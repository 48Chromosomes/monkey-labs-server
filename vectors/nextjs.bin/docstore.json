[["0",{"pageContent":"---\ndescription: Learn about the built-in accessibility features of Next.js.\n---\n\n# Accessibility\n\nThe Next.js team is committed to making Next.js accessible to all developers (and their end-users). By adding accessibility features to Next.js by default, we aim to make the Web more inclusive for everyone.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/accessibility.md","loc":{"lines":{"from":1,"to":7}}}}],["1",{"pageContent":"Route Announcements\n\nWhen transitioning between pages rendered on the server (e.g. using the `<a href>` tag) screen readers and other assistive technology announce the page title when the page loads so that users understand that the page has changed.\n\nIn addition to traditional page navigations, Next.js also supports client-side transitions for improved performance (using `next/link`). To ensure that client-side transitions are also announced to assistive technology, Next.js includes a route announcer by default.\n\nThe Next.js route announcer looks for the page name to announce by first inspecting `document.title`, then the `<h1>` element, and finally the URL pathname. For the most accessible user experience, ensure that each page in your application has a unique and descriptive title.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/accessibility.md","loc":{"lines":{"from":9,"to":15}}}}],["2",{"pageContent":"Linting\n\nNext.js provides an [integrated ESLint experience](/docs/basic-features/eslint.md) out of the box, including custom rules for Next.js. By default, Next.js includes `eslint-plugin-jsx-a11y` to help catch accessibility issues early, including warning on:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/accessibility.md","loc":{"lines":{"from":17,"to":19}}}}],["3",{"pageContent":"- [aria-props](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/aria-props.md?rgh-link-date=2021-06-04T02%3A10%3A36Z)\n- [aria-proptypes](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/aria-proptypes.md?rgh-link-date=2021-06-04T02%3A10%3A36Z)\n- [aria-unsupported-elements](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/aria-unsupported-elements.md?rgh-link-date=2021-06-04T02%3A10%3A36Z)\n- [role-has-required-aria-props](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/role-has-required-aria-props.md?rgh-link-date=2021-06-04T02%3A10%3A36Z)\n- [role-supports-aria-props](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/role-supports-aria-props.md?rgh-link-date=2021-06-04T02%3A10%3A36Z)\n\nFor example, this plugin helps ensure you add alt text to `img` tags, use correct `aria-*` attributes, use correct `role` attributes, and more.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/accessibility.md","loc":{"lines":{"from":21,"to":27}}}}],["4",{"pageContent":"Disabling JavaScript\n\nBy default, Next.js prerenders pages to static HTML files. This means that JavaScript is not required to view the HTML markup from the server and is instead used to add interactivity on the client side.\n\nIf your application requires JavaScript to be disabled, and only HTML to be used, you can remove all JavaScript from your application using an experimental flag:\n\n```js\n// next.config.js\nexport const config = {\n  unstable_runtimeJS: false,\n}\n```\n\n## Accessibility Resources\n\n- [WebAIM WCAG checklist](https://webaim.org/standards/wcag/checklist)\n- [WCAG 2.1 Guidelines](https://www.w3.org/TR/WCAG21/)\n- [The A11y Project](https://www.a11yproject.com/)\n- Check [color contrast ratios](https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_WCAG/Perceivable/Color_contrast) between foreground and background elements\n- Use [`prefers-reduced-motion`](https://web.dev/prefers-reduced-motion/) when working with animations","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/accessibility.md","loc":{"lines":{"from":29,"to":48}}}}],["5",{"pageContent":"---\ndescription: Add components from the AMP community to AMP pages, and make your pages more interactive.\n---\n\n# Adding AMP Components\n\nThe AMP community provides [many components](https://amp.dev/documentation/components/) to make AMP pages more interactive. Next.js will automatically import all components used on a page and there is no need to manually import AMP component scripts:\n\n```jsx\nexport const config = { amp: true }\n\nfunction MyAmpPage() {\n  const date = new Date()\n\n  return (\n    <div>\n      <p>Some time: {date.toJSON()}</p>\n      <amp-timeago\n        width=\"0\"\n        height=\"15\"\n        datetime={date.toJSON()}\n        layout=\"responsive\"\n      >\n        .\n      </amp-timeago>\n    </div>\n  )\n}\n\nexport default MyAmpPage","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/adding-amp-components.md","loc":{"lines":{"from":1,"to":30}}}}],["6",{"pageContent":"The above example uses the [`amp-timeago`](https://amp.dev/documentation/components/amp-timeago/?format=websites) component.\n\nBy default, the latest version of a component is always imported. If you want to customize the version, you can use `next/head`, as in the following example:\n\n```jsx\nimport Head from 'next/head'\n\nexport const config = { amp: true }\n\nfunction MyAmpPage() {\n  const date = new Date()\n\n  return (\n    <div>\n      <Head>\n        <script\n          async\n          key=\"amp-timeago\"\n          custom-element=\"amp-timeago\"\n          src=\"https://cdn.ampproject.org/v0/amp-timeago-0.1.js\"\n        />\n      </Head>\n\n      <p>Some time: {date.toJSON()}</p>\n      <amp-timeago\n        width=\"0\"\n        height=\"15\"\n        datetime={date.toJSON()}\n        layout=\"responsive\"\n      >\n        .\n      </amp-timeago>\n    </div>\n  )\n}\n\nexport default MyAmpPage\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/adding-amp-components.md","loc":{"lines":{"from":33,"to":70}}}}],["7",{"pageContent":"---\ndescription: Learn how AMP pages are created when used together with export.\n---\n\n# AMP in Static HTML export\n\nWhen using [Static HTML export](/docs/advanced-features/static-html-export.md) statically prerender pages, Next.js will detect if the page supports AMP and change the exporting behavior based on that.\n\nFor example, the hybrid AMP page `pages/about.js` would output:\n\n- `out/about.html` - HTML page with client-side React runtime\n- `out/about.amp.html` - AMP page\n\nAnd if `pages/about.js` is an AMP-only page, then it would output:\n\n- `out/about.html` - Optimized AMP page\n\nNext.js will automatically insert a link to the AMP version of your page in the HTML version, so you don't have to, like so:\n\n```jsx\n<link rel=\"amphtml\" href=\"/about.amp.html\" />\n```\n\nAnd the AMP version of your page will include a link to the HTML page:\n\n```jsx\n<link rel=\"canonical\" href=\"/about\" />","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/amp-in-static-html-export.md","loc":{"lines":{"from":1,"to":27}}}}],["8",{"pageContent":"And the AMP version of your page will include a link to the HTML page:\n\n```jsx\n<link rel=\"canonical\" href=\"/about\" />\n```\n\nWhen [`trailingSlash`](/docs/api-reference/next.config.js/trailing-slash.md) is enabled the exported pages for `pages/about.js` would be:\n\n- `out/about/index.html` - HTML page\n- `out/about.amp/index.html` - AMP page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/amp-in-static-html-export.md","loc":{"lines":{"from":27,"to":36}}}}],["9",{"pageContent":"---\ndescription: AMP pages are automatically validated by Next.js during development and on build. Learn more about it here.\n---\n\n# AMP Validation\n\nAMP pages are automatically validated with [amphtml-validator](https://www.npmjs.com/package/amphtml-validator) during development. Errors and warnings will appear in the terminal where you started Next.js.\n\nPages are also validated during [Static HTML export](/docs/advanced-features/static-html-export.md) and any warnings / errors will be printed to the terminal. Any AMP errors will cause the export to exit with status code `1` because the export is not valid AMP.\n\n### Custom Validators\n\nYou can set up custom AMP validator in `next.config.js` as shown below:\n\n```jsx\nmodule.exports = {\n  amp: {\n    validator: './custom_validator.js',\n  },\n}\n```\n\n### Skip AMP Validation\n\nTo turn off AMP validation add the following code to `next.config.js`\n\n```jsx\nexperimental: {\n  amp: {\n    skipValidation: true\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/amp-validation.md","loc":{"lines":{"from":1,"to":33}}}}],["10",{"pageContent":"---\ndescription: With minimal config, and without leaving React, you can start adding AMP and improve the performance and speed of your pages.\n---\n\n# AMP Support\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/amp\">AMP</a></li>\n  </ul>\n</details>\n\nWith Next.js you can turn any React page into an AMP page, with minimal config, and without leaving React.\n\nYou can read more about AMP in the official [amp.dev](https://amp.dev/) site.\n\n## Enabling AMP\n\nTo enable AMP support for a page, and to learn more about the different AMP configs, read the [API documentation for `next/amp`](/docs/api-reference/next/amp.md).\n\n## Caveats\n\n- Only CSS-in-JS is supported. [CSS Modules](/docs/basic-features/built-in-css-support.md) aren't supported by AMP pages at the moment. You can [contribute CSS Modules support to Next.js](https://github.com/vercel/next.js/issues/10549).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/introduction.md","loc":{"lines":{"from":1,"to":24}}}}],["11",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/amp-support/adding-amp-components.md\">\n    <b>AMP Components:</b>\n    <small>Make your pages more interactive with AMP components.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/amp-support/amp-validation.md\">\n    <b>AMP Validation:</b>\n    <small>Learn about how Next.js validates AMP pages.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/introduction.md","loc":{"lines":{"from":26,"to":42}}}}],["12",{"pageContent":"---\ndescription: Using AMP with TypeScript? Extend your typings to allow AMP components.\n---\n\n# TypeScript\n\nAMP currently doesn't have built-in types for TypeScript, but it's in their roadmap ([#13791](https://github.com/ampproject/amphtml/issues/13791)).\n\nAs a workaround you can manually create a file called `amp.d.ts` inside your project and add these [custom types](https://stackoverflow.com/a/50601125).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/amp-support/typescript.md","loc":{"lines":{"from":1,"to":9}}}}],["13",{"pageContent":"---\ndescription: Next.js automatically optimizes your app to be static HTML whenever possible. Learn how it works here.\n---\n\n# Automatic Static Optimization\n\nNext.js automatically determines that a page is static (can be prerendered) if it has no blocking data requirements. This determination is made by the absence of `getServerSideProps` and `getInitialProps` in the page.\n\nThis feature allows Next.js to emit hybrid applications that contain **both server-rendered and statically generated pages**.\n\n> Statically generated pages are still reactive: Next.js will hydrate your application client-side to give it full interactivity.\n\nOne of the main benefits of this feature is that optimized pages require no server-side computation, and can be instantly streamed to the end-user from multiple CDN locations. The result is an _ultra fast_ loading experience for your users.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/automatic-static-optimization.md","loc":{"lines":{"from":1,"to":13}}}}],["14",{"pageContent":"How it works\n\nIf `getServerSideProps` or `getInitialProps` is present in a page, Next.js will switch to render the page on-demand, per-request (meaning [Server-Side Rendering](/docs/basic-features/pages.md#server-side-rendering)).\n\nIf the above is not the case, Next.js will **statically optimize** your page automatically by prerendering the page to static HTML.\n\nDuring prerendering, the router's `query` object will be empty since we do not have `query` information to provide during this phase. After hydration, Next.js will trigger an update to your application to provide the route parameters in the `query` object.\n\nThe cases where the query will be updated after hydration triggering another render are:\n\n- The page is a [dynamic-route](/docs/routing/dynamic-routes.md).\n- The page has query values in the URL.\n- [Rewrites](/docs/api-reference/next.config.js/rewrites.md) are configured in your `next.config.js` since these can have parameters that may need to be parsed and provided in the `query`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/automatic-static-optimization.md","loc":{"lines":{"from":15,"to":27}}}}],["15",{"pageContent":"To be able to distinguish if the query is fully updated and ready for use, you can leverage the `isReady` field on [`next/router`](/docs/api-reference/next/router.md#router-object).\n\n> **Note:** Parameters added with [dynamic routes](/docs/routing/dynamic-routes.md) to a page that's using [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) will always be available inside the `query` object.\n\n`next build` will emit `.html` files for statically optimized pages. For example, the result for the page `pages/about.js` would be:\n\n```bash\n.next/server/pages/about.html","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/automatic-static-optimization.md","loc":{"lines":{"from":29,"to":36}}}}],["16",{"pageContent":"And if you add `getServerSideProps` to the page, it will then be JavaScript, like so:\n\n```bash\n.next/server/pages/about.js\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/automatic-static-optimization.md","loc":{"lines":{"from":39,"to":43}}}}],["17",{"pageContent":"Caveats\n\n- If you have a [custom `App`](/docs/advanced-features/custom-app.md) with `getInitialProps` then this optimization will be turned off in pages without [Static Generation](/docs/basic-features/data-fetching/get-static-props.md).\n- If you have a [custom `Document`](/docs/advanced-features/custom-document.md) with `getInitialProps` be sure you check if `ctx.req` is defined before assuming the page is server-side rendered. `ctx.req` will be `undefined` for pages that are prerendered.\n- Avoid using the `asPath` value on [`next/router`](/docs/api-reference/next/router.md#router-object) in the rendering tree until the router's `isReady` field is `true`. Statically optimized pages only know `asPath` on the client and not the server, so using it as a prop may lead to mismatch errors. The [`active-class-name` example](https://github.com/vercel/next.js/tree/canary/examples/active-class-name) demonstrates one way to use `asPath` as a prop.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/automatic-static-optimization.md","loc":{"lines":{"from":45,"to":49}}}}],["18",{"pageContent":"---\ndescription: Learn how to configure CI to cache Next.js builds\n---\n\n# Continuous Integration (CI) Build Caching\n\nTo improve build performance, Next.js saves a cache to `.next/cache` that is shared between builds.\n\nTo take advantage of this cache in Continuous Integration (CI) environments, your CI workflow will need to be configured to correctly persist the cache between builds.\n\n> If your CI is not configured to persist `.next/cache` between builds, you may see a [No Cache Detected](https://nextjs.org/docs/messages/no-cache) error.\n\nHere are some example cache configurations for common CI providers:\n\n## Vercel\n\nNext.js caching is automatically configured for you. There's no action required on your part.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/ci-build-caching.md","loc":{"lines":{"from":1,"to":17}}}}],["19",{"pageContent":"Vercel\n\nNext.js caching is automatically configured for you. There's no action required on your part.\n\n## CircleCI\n\nEdit your `save_cache` step in `.circleci/config.yml` to include `.next/cache`:\n\n```yaml\nsteps:\n  - save_cache:\n      key: dependency-cache-{{ checksum \"yarn.lock\" }}\n      paths:\n        - ./node_modules\n        - ./.next/cache\n```\n\nIf you do not have a `save_cache` key, please follow CircleCI's [documentation on setting up build caching](https://circleci.com/docs/2.0/caching/).\n\n## Travis CI\n\nAdd or merge the following into your `.travis.yml`:\n\n```yaml\ncache:\n  directories:\n    - $HOME/.cache/yarn\n    - node_modules\n    - .next/cache\n```\n\n## GitLab CI\n\nAdd or merge the following into your `.gitlab-ci.yml`:\n\n```yaml\ncache:\n  key: ${CI_COMMIT_REF_SLUG}\n  paths:\n    - node_modules/\n    - .next/cache/\n```\n\n## Netlify CI\n\nUse [Netlify Plugins](https://www.netlify.com/products/build/plugins/) with [`@netlify/plugin-nextjs`](https://www.npmjs.com/package/@netlify/plugin-nextjs).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/ci-build-caching.md","loc":{"lines":{"from":17,"to":62}}}}],["20",{"pageContent":"Netlify CI\n\nUse [Netlify Plugins](https://www.netlify.com/products/build/plugins/) with [`@netlify/plugin-nextjs`](https://www.npmjs.com/package/@netlify/plugin-nextjs).\n\n## AWS CodeBuild\n\nAdd (or merge in) the following to your `buildspec.yml`:\n\n```yaml\ncache:\n  paths:\n    - 'node_modules/**/*' # Cache `node_modules` for faster `yarn` or `npm i`\n    - '.next/cache/**/*' # Cache Next.js for faster application rebuilds\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/ci-build-caching.md","loc":{"lines":{"from":62,"to":75}}}}],["21",{"pageContent":"GitHub Actions\n\nUsing GitHub's [actions/cache](https://github.com/actions/cache), add the following step in your workflow file:\n\n```yaml\nuses: actions/cache@v3\nwith:\n  # See here for caching with `yarn` https://github.com/actions/cache/blob/main/examples.md#node---yarn or you can leverage caching with actions/setup-node https://github.com/actions/setup-node\n  path: |\n    ~/.npm\n    ${{ github.workspace }}/.next/cache\n  # Generate a new cache whenever packages or source files change.\n  key: ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}-${{ hashFiles('**.[jt]s', '**.[jt]sx') }}\n  # If source files changed but packages didn't, rebuild from a prior cache.\n  restore-keys: |\n    ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}-\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/ci-build-caching.md","loc":{"lines":{"from":77,"to":93}}}}],["22",{"pageContent":"Bitbucket Pipelines\n\nAdd or merge the following into your `bitbucket-pipelines.yml` at the top level (same level as `pipelines`):\n\n```yaml\ndefinitions:\n  caches:\n    nextcache: .next/cache\n```\n\nThen reference it in the `caches` section of your pipeline's `step`:\n\n```yaml\n- step:\n    name: your_step_name\n    caches:\n      - node\n      - nextcache\n```\n\n## Heroku\n\nUsing Heroku's [custom cache](https://devcenter.heroku.com/articles/nodejs-support#custom-caching), add a `cacheDirectories` array in your top-level package.json:\n\n```javascript\n\"cacheDirectories\": [\".next/cache\"]\n```\n\n## Azure Pipelines\n\nUsing Azure Pipelines' [Cache task](https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/cache), add the following task to your pipeline yaml file somewhere prior to the task that executes `next build`:\n\n```yaml\n- task: Cache@2\n  displayName: 'Cache .next/cache'\n  inputs:\n    key: next | $(Agent.OS) | yarn.lock\n    path: '$(System.DefaultWorkingDirectory)/.next/cache'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/ci-build-caching.md","loc":{"lines":{"from":95,"to":133}}}}],["23",{"pageContent":"---\ndescription: Use codemods to update your codebase when upgrading Next.js to the latest version\n---\n\n# Next.js Codemods\n\nNext.js provides Codemod transformations to help upgrade your Next.js codebase when a feature is deprecated.\n\nCodemods are transformations that run on your codebase programmatically. This allows for a large amount of changes to be applied without having to manually go through every file.\n\n## Usage\n\n`npx @next/codemod@latest <transform> <path>`\n\n- `transform` - name of transform, see available transforms below.\n- `path` - files or directory to transform\n- `--dry` Do a dry-run, no code will be edited\n- `--print` Prints the changed output for comparison\n\n## Next.js 13.2\n\n### `built-in-next-font`\n\nThis codemod uninstalls `@next/font` and transforms `@next/font` imports into the built-in `next/font`.\n\nFor example:\n\n```jsx\nimport { Inter } from '@next/font/google'\n```\n\nTransforms into:\n\n```jsx\nimport { Inter } from 'next/font/google'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":1,"to":36}}}}],["24",{"pageContent":"Next.js 13\n\n### `new-link`\n\nSafely removes `<a>` from `next/link` or adds `legacyBehavior` prop.\n\nFor example:\n\n```jsx\nexport default function Page() {\n  return (\n    <Link href=\"/about\">\n      <a>About Us</a>\n    </Link>\n  )\n}\n```\n\nTransforms into:\n\n```jsx\nexport default function Page() {\n  return <Link href=\"/about\">About Us</Link>\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":38,"to":62}}}}],["25",{"pageContent":"`next-image-to-legacy-image`\n\nThis codemod safely migrates existing Next.js 10, 11, 12 applications importing `next/image` to the renamed `next/legacy/image` import in Next.js 13.\n\nFor example:\n\n```jsx\nimport Image1 from 'next/image'\nimport Image2 from 'next/future/image'\n\nexport default function Home() {\n  return (\n    <div>\n      <Image1 src=\"/test.jpg\" width=\"200\" height=\"300\" />\n      <Image2 src=\"/test.png\" width=\"500\" height=\"400\" />\n    </div>\n  )\n}\n```\n\nTransforms into:\n\n```jsx\nimport Image1 from 'next/legacy/image'\nimport Image2 from 'next/image'\n\nexport default function Home() {\n  return (\n    <div>\n      <Image1 src=\"/test.jpg\" width=\"200\" height=\"300\" />\n      <Image2 src=\"/test.png\" width=\"500\" height=\"400\" />\n    </div>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":64,"to":98}}}}],["26",{"pageContent":"`next-image-experimental` (experimental)\n\nThis codemod dangerously migrates from `next/legacy/image` to the new `next/image` by adding inline styles and removing unused props. Please note this codemod is experimental and only covers static usage (such as `<Image src={img} layout=\"responsive\" />`) but not dynamic usage (such as `<Image {...props} />`).\n\n- Removes `layout` prop and adds `style`\n- Removes `objectFit` prop and adds `style`\n- Removes `objectPosition` prop and adds `style`\n- Removes `lazyBoundary` prop\n- Removes `lazyRoot` prop\n- Changes next.config.js `loader` to \"custom\", removes `path`, and sets `loaderFile` to a new file.\n\n#### Before: intrinsic\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nfunction Page() {\n  return <Image src={img} />\n}\n```\n\n#### After: intrinsic\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nconst css = { maxWidth: '100%', height: 'auto' }\nfunction Page() {\n  return <Image src={img} style={css} />\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":100,"to":132}}}}],["27",{"pageContent":"After: intrinsic\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nconst css = { maxWidth: '100%', height: 'auto' }\nfunction Page() {\n  return <Image src={img} style={css} />\n}\n```\n\n#### Before: responsive\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nfunction Page() {\n  return <Image src={img} layout=\"responsive\" />\n}\n```\n\n#### After: responsive\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nconst css = { width: '100%', height: 'auto' }\nfunction Page() {\n  return <Image src={img} sizes=\"100vw\" style={css} />\n}\n```\n\n#### Before: fill\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nfunction Page() {\n  return <Image src={img} layout=\"fill\" />\n}\n```\n\n#### After: fill\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nfunction Page() {\n  return <Image src={img} sizes=\"100vw\" fill />\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":132,"to":187}}}}],["28",{"pageContent":"After: fill\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nfunction Page() {\n  return <Image src={img} sizes=\"100vw\" fill />\n}\n```\n\n#### Before: fixed\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nfunction Page() {\n  return <Image src={img} layout=\"fixed\" />\n}\n```\n\n#### After: fixed\n\n```jsx\nimport Image from 'next/image'\nimport img from '../img.png'\n\nfunction Page() {\n  return <Image src={img} />\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":187,"to":218}}}}],["29",{"pageContent":"Next.js 11\n\n### `cra-to-next` (experimental)\n\nMigrates a Create React App project to Next.js; creating a pages directory and necessary config to match behavior. Client-side only rendering is leveraged initially to prevent breaking compatibility due to `window` usage during SSR and can be enabled seamlessly to allow gradual adoption of Next.js specific features.\n\nPlease share any feedback related to this transform [in this discussion](https://github.com/vercel/next.js/discussions/25858).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":220,"to":226}}}}],["30",{"pageContent":"Next.js 10\n\n### `add-missing-react-import`\n\nTransforms files that do not import `React` to include the import in order for the new [React JSX transform](https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html) to work.\n\nFor example:\n\n```jsx\n// my-component.js\nexport default class Home extends React.Component {\n  render() {\n    return <div>Hello World</div>\n  }\n}\n```\n\nTransforms into:\n\n```jsx\n// my-component.js\nimport React from 'react'\nexport default class Home extends React.Component {\n  render() {\n    return <div>Hello World</div>\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":228,"to":255}}}}],["31",{"pageContent":"Next.js 9\n\n### `name-default-component`\n\nTransforms anonymous components into named components to make sure they work with [Fast Refresh](https://nextjs.org/blog/next-9-4#fast-refresh).\n\nFor example:\n\n```jsx\n// my-component.js\nexport default function () {\n  return <div>Hello World</div>\n}\n```\n\nTransforms into:\n\n```jsx\n// my-component.js\nexport default function MyComponent() {\n  return <div>Hello World</div>\n}\n```\n\nThe component will have a camel cased name based on the name of the file, and it also works with arrow functions.\n\n#### Usage\n\nGo to your project\n\n```\ncd path-to-your-project/\n```\n\nRun the codemod:\n\n```\nnpx @next/codemod@latest name-default-component\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":257,"to":295}}}}],["32",{"pageContent":"`withamp-to-config`\n\nTransforms the `withAmp` HOC into Next.js 9 page configuration.\n\nFor example:\n\n```js\n// Before\nimport { withAmp } from 'next/amp'\n\nfunction Home() {\n  return <h1>My AMP Page</h1>\n}\n\nexport default withAmp(Home)\n```\n\n```js\n// After\nexport default function Home() {\n  return <h1>My AMP Page</h1>\n}\n\nexport const config = {\n  amp: true,\n}\n```\n\n#### Usage\n\nGo to your project\n\n```\ncd path-to-your-project/\n```\n\nRun the codemod:\n\n```\nnpx @next/codemod@latest withamp-to-config\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":297,"to":337}}}}],["33",{"pageContent":"Next.js 6","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":339,"to":339}}}}],["34",{"pageContent":"`url-to-withrouter`\n\nTransforms the deprecated automatically injected `url` property on top level pages to using `withRouter` and the `router` property it injects. Read more here: [https://nextjs.org/docs/messages/url-deprecated](https://nextjs.org/docs/messages/url-deprecated)\n\nFor example:\n\n```js\n// From\nimport React from 'react'\nexport default class extends React.Component {\n  render() {\n    const { pathname } = this.props.url\n    return <div>Current pathname: {pathname}</div>\n  }\n}\n```\n\n```js\n// To\nimport React from 'react'\nimport { withRouter } from 'next/router'\nexport default withRouter(\n  class extends React.Component {\n    render() {\n      const { pathname } = this.props.router\n      return <div>Current pathname: {pathname}</div>\n    }\n  }\n)\n```\n\nThis is one case. All the cases that are transformed (and tested) can be found in the [`__testfixtures__` directory](https://github.com/vercel/next.js/tree/canary/packages/next-codemod/transforms/__testfixtures__/url-to-withrouter).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":341,"to":372}}}}],["35",{"pageContent":"Usage\n\nGo to your project\n\n```\ncd path-to-your-project/\n```\n\nRun the codemod:\n\n```\nnpx @next/codemod@latest url-to-withrouter\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/codemods.md","loc":{"lines":{"from":374,"to":386}}}}],["36",{"pageContent":"---\ndescription: Learn about the Next.js Compiler, written in Rust, which transforms and minifies your Next.js application.\n---\n\n# Next.js Compiler\n\n<details open>\n  <summary><b>Version History</b></summary>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":1,"to":8}}}}],["37",{"pageContent":"| Version   | Changes                                                                                                                                                                                                  |\n| --------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `v13.1.0` | [Module Transpilation](https://nextjs.org/blog/next-13-1#built-in-module-transpilation-stable) and [Modularize Imports](https://nextjs.org/blog/next-13-1#import-resolution-for-smaller-bundles) stable. |\n| `v13.0.0` | SWC Minifier enabled by default.                                                                                                                                                                         |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":10,"to":13}}}}],["38",{"pageContent":"| `v12.3.0` | SWC Minifier [stable](https://nextjs.org/blog/next-12-3#swc-minifier-stable).                                                                                                                            |\n| `v12.2.0` | [SWC Plugins](#swc-plugins-Experimental) experimental support added.                                                                                                                                     |\n| `v12.1.0` | Added support for Styled Components, Jest, Relay, Remove React Properties, Legacy Decorators, Remove Console, and jsxImportSource.                                                                       |\n| `v12.0.0` | Next.js Compiler [introduced](https://nextjs.org/blog/next-12).                                                                                                                                          |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":14,"to":17}}}}],["39",{"pageContent":"</details>\n\nThe Next.js Compiler, written in Rust using [SWC](http://swc.rs/), allows Next.js to transform and minify your JavaScript code for production. This replaces Babel for individual files and Terser for minifying output bundles.\n\nCompilation using the Next.js Compiler is 17x faster than Babel and enabled by default since Next.js version 12. If you have an existing Babel configuration or are using [unsupported features](#unsupported-features), your application will opt-out of the Next.js Compiler and continue using Babel.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":19,"to":23}}}}],["40",{"pageContent":"Why SWC?\n\n[SWC](http://swc.rs/) is an extensible Rust-based platform for the next generation of fast developer tools.\n\nSWC can be used for compilation, minification, bundling, and more – and is designed to be extended. It's something you can call to perform code transformations (either built-in or custom). Running those transformations happens through higher-level tools like Next.js.\n\nWe chose to build on SWC for a few reasons:\n\n- **Extensibility:** SWC can be used as a Crate inside Next.js, without having to fork the library or workaround design constraints.\n- **Performance:** We were able to achieve ~3x faster Fast Refresh and ~5x faster builds in Next.js by switching to SWC, with more room for optimization still in progress.\n- **WebAssembly:** Rust's support for WASM is essential for supporting all possible platforms and taking Next.js development everywhere.\n- **Community:** The Rust community and ecosystem are amazing and still growing.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":25,"to":36}}}}],["41",{"pageContent":"Supported Features","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":38,"to":38}}}}],["42",{"pageContent":"Styled Components\n\nWe're working to port `babel-plugin-styled-components` to the Next.js Compiler.\n\nFirst, update to the latest version of Next.js: `npm install next@latest`. Then, update your `next.config.js` file:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":40,"to":44}}}}],["43",{"pageContent":"```js\nmodule.exports = {\n  compiler: {\n    // see https://styled-components.com/docs/tooling#babel-plugin for more info on the options.\n    styledComponents: boolean | {\n      // Enabled by default in development, disabled in production to reduce file size,\n      // setting this will override the default for all environments.\n      displayName?: boolean,\n      // Enabled by default.\n      ssr?: boolean,\n      // Enabled by default.\n      fileName?: boolean,\n      // Empty by default.\n      topLevelImportPaths?: string[],\n      // Defaults to [\"index\"].\n      meaninglessFileNames?: string[],\n      // Enabled by default.\n      cssProp?: boolean,\n      // Empty by default.\n      namespace?: string,\n      // Not supported yet.\n      minify?: boolean,\n      // Not supported yet.\n      transpileTemplateLiterals?: boolean,\n      // Not supported yet.\n      pure?: boolean,\n    },\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":46,"to":74}}}}],["44",{"pageContent":"`minify`, `transpileTemplateLiterals` and `pure` are not yet implemented. You can follow the progress [here](https://github.com/vercel/next.js/issues/30802). `ssr` and `displayName` transforms are the main requirement for using `styled-components` in Next.js.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":77,"to":77}}}}],["45",{"pageContent":"Jest\n\nThe Next.js Compiler transpiles your tests and simplifies configuring Jest together with Next.js including:\n\n- Auto mocking of `.css`, `.module.css` (and their `.scss` variants), and image imports\n- Automatically sets up `transform` using SWC\n- Loading `.env` (and all variants) into `process.env`\n- Ignores `node_modules` from test resolving and transforms\n- Ignoring `.next` from test resolving\n- Loads `next.config.js` for flags that enable experimental SWC transforms\n\nFirst, update to the latest version of Next.js: `npm install next@latest`. Then, update your `jest.config.js` file:\n\n```js\n// jest.config.js\nconst nextJest = require('next/jest')\n\n// Providing the path to your Next.js app which will enable loading next.config.js and .env files\nconst createJestConfig = nextJest({ dir: './' })\n\n// Any custom config you want to pass to Jest\nconst customJestConfig = {\n  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":79,"to":102}}}}],["46",{"pageContent":"// Any custom config you want to pass to Jest\nconst customJestConfig = {\n  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],\n}\n\n// createJestConfig is exported in this way to ensure that next/jest can load the Next.js configuration, which is async\nmodule.exports = createJestConfig(customJestConfig)\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":102,"to":109}}}}],["47",{"pageContent":"Relay\n\nTo enable [Relay](https://relay.dev/) support:\n\n```js\n// next.config.js\nmodule.exports = {\n  compiler: {\n    relay: {\n      // This should match relay.config.js\n      src: './',\n      artifactDirectory: './__generated__',\n      language: 'typescript',\n      eagerEsModules: false,\n    },\n  },\n}\n```\n\nNOTE: In Next.js all JavaScript files in `pages` directory are considered routes. So, for `relay-compiler` you'll need to specify `artifactDirectory` configuration settings outside of the `pages`, otherwise `relay-compiler` will generate files next to the source file in the `__generated__` directory, and this file will be considered a route, which will break production builds.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":111,"to":130}}}}],["48",{"pageContent":"Remove React Properties\n\nAllows to remove JSX properties. This is often used for testing. Similar to `babel-plugin-react-remove-properties`.\n\nTo remove properties matching the default regex `^data-test`:\n\n```js\n// next.config.js\nmodule.exports = {\n  compiler: {\n    reactRemoveProperties: true,\n  },\n}\n```\n\nTo remove custom properties:\n\n```js\n// next.config.js\nmodule.exports = {\n  compiler: {\n    // The regexes defined here are processed in Rust so the syntax is different from\n    // JavaScript `RegExp`s. See https://docs.rs/regex.\n    reactRemoveProperties: { properties: ['^data-custom$'] },\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":132,"to":158}}}}],["49",{"pageContent":"Remove Console\n\nThis transform allows for removing all `console.*` calls in application code (not `node_modules`). Similar to `babel-plugin-transform-remove-console`.\n\nRemove all `console.*` calls:\n\n```js\n// next.config.js\nmodule.exports = {\n  compiler: {\n    removeConsole: true,\n  },\n}\n```\n\nRemove `console.*` output except `console.error`:\n\n```js\n// next.config.js\nmodule.exports = {\n  compiler: {\n    removeConsole: {\n      exclude: ['error'],\n    },\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":160,"to":186}}}}],["50",{"pageContent":"Legacy Decorators\n\nNext.js will automatically detect `experimentalDecorators` in `jsconfig.json` or `tsconfig.json`. Legacy decorators are commonly used with older versions of libraries like `mobx`.\n\nThis flag is only supported for compatibility with existing applications. We do not recommend using legacy decorators in new applications.\n\nFirst, update to the latest version of Next.js: `npm install next@latest`. Then, update your `jsconfig.json` or `tsconfig.json` file:\n\n```js\n{\n  \"compilerOptions\": {\n    \"experimentalDecorators\": true\n  }\n}\n```\n\n### importSource\n\nNext.js will automatically detect `jsxImportSource` in `jsconfig.json` or `tsconfig.json` and apply that. This is commonly used with libraries like [Theme UI](https://theme-ui.com).\n\nFirst, update to the latest version of Next.js: `npm install next@latest`. Then, update your `jsconfig.json` or `tsconfig.json` file:\n\n```js\n{\n  \"compilerOptions\": {\n    \"jsxImportSource\": \"theme-ui\"\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":188,"to":216}}}}],["51",{"pageContent":"Emotion\n\nWe're working to port `@emotion/babel-plugin` to the Next.js Compiler.\n\nFirst, update to the latest version of Next.js: `npm install next@latest`. Then, update your `next.config.js` file:\n\n```js\n// next.config.js","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":218,"to":225}}}}],["52",{"pageContent":"module.exports = {\n  compiler: {\n    emotion: boolean | {\n      // default is true. It will be disabled when build type is production.\n      sourceMap?: boolean,\n      // default is 'dev-only'.\n      autoLabel?: 'never' | 'dev-only' | 'always',\n      // default is '[local]'.\n      // Allowed values: `[local]` `[filename]` and `[dirname]`\n      // This option only works when autoLabel is set to 'dev-only' or 'always'.\n      // It allows you to define the format of the resulting label.\n      // The format is defined via string where variable parts are enclosed in square brackets [].\n      // For example labelFormat: \"my-classname--[local]\", where [local] will be replaced with the name of the variable the result is assigned to.\n      labelFormat?: string,\n      // default is undefined.\n      // This option allows you to tell the compiler what imports it should\n      // look at to determine what it should transform so if you re-export\n      // Emotion's exports, you can still use transforms.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":227,"to":244}}}}],["53",{"pageContent":"// look at to determine what it should transform so if you re-export\n      // Emotion's exports, you can still use transforms.\n      importMap?: {\n        [packageName: string]: {\n          [exportName: string]: {\n            canonicalImport?: [string, string],\n            styledBaseImport?: [string, string],\n          }\n        }\n      },\n    },\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":244,"to":257}}}}],["54",{"pageContent":"Minification\n\nNext.js' swc compiler is used for minification by default since v13. This is 7x faster than Terser.\n\nIf Terser is still needed for any reason this can be configured.\n\n```js\n// next.config.js\n\nmodule.exports = {\n  swcMinify: false,\n}\n```\n\n### Module Transpilation\n\nNext.js can automatically transpile and bundle dependencies from local packages (like monorepos) or from external dependencies (`node_modules`). This replaces the `next-transpile-modules` package.\n\n```js\n// next.config.js\n\nmodule.exports = {\n  transpilePackages: ['@acme/ui', 'lodash-es'],\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":259,"to":283}}}}],["55",{"pageContent":"Modularize Imports\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/blob/canary/examples/modularize-imports/\">modularize-imports</a></li>\n  </ul>\n</details>\n\nAllows to modularize imports, similar to [babel-plugin-transform-imports](https://www.npmjs.com/package/babel-plugin-transform-imports).\n\nTransforms member style imports of packages that use a “barrel file” (a single file that re-exports other modules):\n\n```js\nimport { Row, Grid as MyGrid } from 'react-bootstrap'\nimport { merge } from 'lodash'\n```\n\n...into default style imports of each module. This prevents compilation of unused modules:\n\n```js\nimport Row from 'react-bootstrap/Row'\nimport MyGrid from 'react-bootstrap/Grid'\nimport merge from 'lodash/merge'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":285,"to":308}}}}],["56",{"pageContent":"Config for the above transform:\n\n```js\n// next.config.js\nmodule.exports = {\n  modularizeImports: {\n    'react-bootstrap': {\n      transform: 'react-bootstrap/{{member}}',\n    },\n    lodash: {\n      transform: 'lodash/{{member}}',\n    },\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":311,"to":325}}}}],["57",{"pageContent":"Handlebars variables and helper functions\n\nThis transform uses [handlebars](https://docs.rs/handlebars) to template the replacement import path in the `transform` field. These variables and helper functions are available:\n\n1. `member`: Has type `string`. The name of the member import.\n2. `lowerCase`, `upperCase`, `camelCase`, `kebabCase`: Helper functions to convert a string to lower, upper, camel or kebab cases.\n3. `matches`: Has type `string[]`. All groups matched by the regular expression. `matches.[0]` is the full match.\n\nFor example, you can use the `kebabCase` helper like this:\n\n```js\n// next.config.js\nmodule.exports = {\n  modularizeImports: {\n    'my-library': {\n      transform: 'my-library/{{ kebabCase member }}',\n    },\n  },\n}\n```\n\nThe above config will transform your code as follows:\n\n```js\n// Before\nimport { MyModule } from 'my-library'\n\n// After (`MyModule` was converted to `my-module`)\nimport MyModule from 'my-library/my-module'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":327,"to":355}}}}],["58",{"pageContent":"You can also use regular expressions using Rust [regex](https://docs.rs/regex/latest/regex/) crate’s syntax:\n\n```js\n// next.config.js\nmodule.exports = {\n  modularizeImports: {\n    'my-library/?(((\\\\w*)?/?)*)': {\n      transform: 'my-library/{{ matches.[1] }}/{{member}}',\n    },\n  },\n}\n```\n\nThe above config will transform your code as follows:\n\n```js\n// Before\nimport { MyModule } from 'my-library'\nimport { App } from 'my-library/components'\nimport { Header, Footer } from 'my-library/components/App'\n\n// After\nimport MyModule from 'my-library/MyModule'\nimport App from 'my-library/components/App'\nimport Header from 'my-library/components/App/Header'\nimport Footer from 'my-library/components/App/Footer'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":358,"to":384}}}}],["59",{"pageContent":"Using named imports\n\nBy default, `modularizeImports` assumes that each module uses default exports. However, this may not always be the case — named exports may be used.\n\n```js\n// my-library/MyModule.ts\n// Using named export instead of default export\nexport const MyModule = {}\n\n// my-library/index.ts\n// The “barrel file” that re-exports `MyModule`\nexport { MyModule } from './MyModule'\n```\n\nIn this case, you can use the `skipDefaultConversion` option to use named imports instead of default imports:\n\n```js\n// next.config.js\nmodule.exports = {\n  modularizeImports: {\n    'my-library': {\n      transform: 'my-library/{{member}}',\n      skipDefaultConversion: true,\n    },\n  },\n}\n```\n\nThe above config will transform your code as follows:\n\n```js\n// Before\nimport { MyModule } from 'my-library'\n\n// After (imports `MyModule` using named import)\nimport { MyModule } from 'my-library/MyModule'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":386,"to":422}}}}],["60",{"pageContent":"Preventing full import\n\nIf you use the `preventFullImport` option, the compiler will throw an error if you import a “barrel file” using default import. If you use the following config:\n\n```js\n// next.config.js\nmodule.exports = {\n  modularizeImports: {\n    lodash: {\n      transform: 'lodash/{{member}}',\n      preventFullImport: true,\n    },\n  },\n}\n```\n\nThe compiler will throw an error if you try to import the full `lodash` library (instead of using named imports):\n\n```js\n// Compiler error\nimport lodash from 'lodash'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":424,"to":445}}}}],["61",{"pageContent":"Experimental Features\n\n### SWC Trace profiling\n\nYou can generate SWC's internal transform traces as chromium's [trace event format](https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU/preview?mode=html#%21=).\n\n```js\n// next.config.js\n\nmodule.exports = {\n  experimental: {\n    swcTraceProfiling: true,\n  },\n}\n```\n\nOnce enabled, swc will generate trace named as `swc-trace-profile-${timestamp}.json` under `.next/`. Chromium's trace viewer (chrome://tracing/, https://ui.perfetto.dev/), or compatible flamegraph viewer (https://www.speedscope.app/) can load & visualize generated traces.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":447,"to":463}}}}],["62",{"pageContent":"SWC Plugins (Experimental)\n\nYou can configure swc's transform to use SWC's experimental plugin support written in wasm to customize transformation behavior.\n\n```js\n// next.config.js\n\nmodule.exports = {\n  experimental: {\n    swcPlugins: [\n      [\n        'plugin',\n        {\n          ...pluginOptions,\n        },\n      ],\n    ],\n  },\n}\n```\n\n`swcPlugins` accepts an array of tuples for configuring plugins. A tuple for the plugin contains the path to the plugin and an object for plugin configuration. The path to the plugin can be an npm module package name or an absolute path to the `.wasm` binary itself.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":465,"to":486}}}}],["63",{"pageContent":"Unsupported Features\n\nWhen your application has a `.babelrc` file, Next.js will automatically fall back to using Babel for transforming individual files. This ensures backwards compatibility with existing applications that leverage custom Babel plugins.\n\nIf you're using a custom Babel setup, [please share your configuration](https://github.com/vercel/next.js/discussions/30174). We're working to port as many commonly used Babel transformations as possible, as well as supporting plugins in the future.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/compiler.md","loc":{"lines":{"from":488,"to":492}}}}],["64",{"pageContent":"---\ndescription: Control page initialization and add a layout that persists for all pages by overriding the default App component used by Next.js.\n---\n\n# Custom `App`\n\n> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for layouts, nested routes, and uses Server Components by default. Inside `app/`, you can fetch data for your entire application inside layouts, including support for more granular nested layouts (with [colocated data fetching](https://beta.nextjs.org/docs/data-fetching/fundamentals)).\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).\n\nNext.js uses the `App` component to initialize pages. You can override it and control the page initialization and:\n\n- Persist layouts between page changes\n- Keeping state when navigating pages\n- Inject additional data into pages\n- [Add global CSS](/docs/basic-features/built-in-css-support.md#adding-a-global-stylesheet)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":1,"to":16}}}}],["65",{"pageContent":"To override the default `App`, create the file `./pages/_app.js` as shown below:\n\n```jsx\nexport default function MyApp({ Component, pageProps }) {\n  return <Component {...pageProps} />\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":18,"to":23}}}}],["66",{"pageContent":"The `Component` prop is the active `page`, so whenever you navigate between routes, `Component` will change to the new `page`. Therefore, any props you send to `Component` will be received by the `page`.\n\n`pageProps` is an object with the initial props that were preloaded for your page by one of our [data fetching methods](/docs/basic-features/data-fetching/overview.md), otherwise it's an empty object.\n\nThe `App.getInitialProps` receives a single argument called `context.ctx`. It's an object with the same set of properties as the [`context` object](/docs/api-reference/data-fetching/get-initial-props#context-object) in `getInitialProps`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":26,"to":30}}}}],["67",{"pageContent":"Caveats","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":32,"to":32}}}}],["68",{"pageContent":"- If your app is running and you added a custom `App`, you'll need to restart the development server. Only required if `pages/_app.js` didn't exist before.\n- Adding a custom [`getInitialProps`](/docs/api-reference/data-fetching/get-initial-props.md) in your `App` will disable [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md) in pages without [Static Generation](/docs/basic-features/data-fetching/get-static-props.md).\n- When you add `getInitialProps` in your custom app, you must `import App from \"next/app\"`, call `App.getInitialProps(appContext)` inside `getInitialProps` and merge the returned object into the return value.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":34,"to":36}}}}],["69",{"pageContent":"- `App` does not support Next.js [Data Fetching methods](/docs/basic-features/data-fetching/overview.md) like [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) or [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md). If you need global data fetching, consider [incrementally adopting the `app/` directory](https://beta.nextjs.org/docs/upgrade-guide).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":37,"to":37}}}}],["70",{"pageContent":"TypeScript\n\nIf you’re using TypeScript, take a look at [our TypeScript documentation](/docs/basic-features/typescript.md#custom-app).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":39,"to":41}}}}],["71",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/automatic-static-optimization.md\">\n    <b>Automatic Static Optimization:</b>\n    <small>Next.js automatically optimizes your app to be static HTML whenever possible. Learn how it works here.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/custom-error-page.md\">\n    <b>Custom Error Page:</b>\n    <small>Learn more about the built-in Error page.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-app.md","loc":{"lines":{"from":43,"to":59}}}}],["72",{"pageContent":"---\ndescription: Extend the default document markup added by Next.js.\n---\n\n# Custom `Document`\n\n> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for layouts, nested routes, and uses Server Components by default. Inside `app/`, you can modify the initial `html` and `body` tags using a root layout.\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).\n\nA custom `Document` can update the `<html>` and `<body>` tags used to render a [Page](/docs/basic-features/pages.md). This file is only rendered on the server, so event handlers like `onClick` cannot be used in `_document`.\n\nTo override the default `Document`, create the file `pages/_document.js` as shown below:\n\n```jsx\nimport { Html, Head, Main, NextScript } from 'next/document'\n\nexport default function Document() {\n  return (\n    <Html>\n      <Head />\n      <body>\n        <Main />\n        <NextScript />\n      </body>\n    </Html>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-document.md","loc":{"lines":{"from":1,"to":28}}}}],["73",{"pageContent":"The code above is the default `Document` added by Next.js. Custom attributes are allowed as props. For example, we might want to add `lang=\"en\"` to the `<html>` tag:\n\n```jsx\n<Html lang=\"en\">\n```\n\nOr add a `className` to the `body` tag:\n\n```jsx\n<body className=\"bg-white\">\n```\n\n`<Html>`, `<Head />`, `<Main />` and `<NextScript />` are required for the page to be properly rendered.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-document.md","loc":{"lines":{"from":31,"to":43}}}}],["74",{"pageContent":"Caveats\n\n- The `<Head />` component used in `_document` is not the same as [`next/head`](/docs/api-reference/next/head.md). The `<Head />` component used here should only be used for any `<head>` code that is common for all pages. For all other cases, such as `<title>` tags, we recommend using [`next/head`](/docs/api-reference/next/head.md) in your pages or components.\n- React components outside of `<Main />` will not be initialized by the browser. Do _not_ add application logic here or custom CSS (like `styled-jsx`). If you need shared components in all your pages (like a menu or a toolbar), read [Layouts](/docs/basic-features/layouts.md) instead.\n- `Document` currently does not support Next.js [Data Fetching methods](/docs/basic-features/data-fetching/overview.md) like [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) or [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-document.md","loc":{"lines":{"from":45,"to":49}}}}],["75",{"pageContent":"Customizing `renderPage`\n\n> **Note:** This is advanced and only needed for libraries like CSS-in-JS to support server-side rendering. This is not needed for built-in `styled-jsx` support.\n\nFor [React 18](/docs/advanced-features/react-18.md) support, we recommend avoiding customizing `getInitialProps` and `renderPage`, if possible.\n\nThe `ctx` object shown below is equivalent to the one received in [`getInitialProps`](/docs/api-reference/data-fetching/get-initial-props.md#context-object), with the addition of `renderPage`.\n\n```jsx\nimport Document, { Html, Head, Main, NextScript } from 'next/document'\n\nclass MyDocument extends Document {\n  static async getInitialProps(ctx) {\n    const originalRenderPage = ctx.renderPage","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-document.md","loc":{"lines":{"from":51,"to":64}}}}],["76",{"pageContent":"```jsx\nimport Document, { Html, Head, Main, NextScript } from 'next/document'\n\nclass MyDocument extends Document {\n  static async getInitialProps(ctx) {\n    const originalRenderPage = ctx.renderPage\n\n    // Run the React rendering logic synchronously\n    ctx.renderPage = () =>\n      originalRenderPage({\n        // Useful for wrapping the whole react tree\n        enhanceApp: (App) => App,\n        // Useful for wrapping in a per-page basis\n        enhanceComponent: (Component) => Component,\n      })\n\n    // Run the parent `getInitialProps`, it now includes the custom `renderPage`\n    const initialProps = await Document.getInitialProps(ctx)\n\n    return initialProps\n  }\n\n  render() {\n    return (\n      <Html>\n        <Head />\n        <body>\n          <Main />\n          <NextScript />\n        </body>\n      </Html>\n    )\n  }\n}\n\nexport default MyDocument","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-document.md","loc":{"lines":{"from":64,"to":99}}}}],["77",{"pageContent":"> **Note**: `getInitialProps` in `_document` is not called during client-side transitions.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-document.md","loc":{"lines":{"from":102,"to":102}}}}],["78",{"pageContent":"TypeScript\n\nYou can use the built-in `DocumentContext` type and change the file name to `./pages/_document.tsx` like so:\n\n```tsx\nimport Document, { DocumentContext, DocumentInitialProps } from 'next/document'\n\nclass MyDocument extends Document {\n  static async getInitialProps(\n    ctx: DocumentContext\n  ): Promise<DocumentInitialProps> {\n    const initialProps = await Document.getInitialProps(ctx)\n\n    return initialProps\n  }\n}\n\nexport default MyDocument\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-document.md","loc":{"lines":{"from":104,"to":122}}}}],["79",{"pageContent":"---\ndescription: Override and extend the built-in Error page to handle custom errors.\n---\n\n# Custom Error Page\n\n## 404 Page\n\nA 404 page may be accessed very often. Server-rendering an error page for every visit increases the load of the Next.js server. This can result in increased costs and slow experiences.\n\nTo avoid the above pitfalls, Next.js provides a static 404 page by default without having to add any additional files.\n\n### Customizing The 404 Page\n\nTo create a custom 404 page you can create a `pages/404.js` file. This file is statically generated at build time.\n\n```jsx\n// pages/404.js\nexport default function Custom404() {\n  return <h1>404 - Page Not Found</h1>\n}\n```\n\n> **Note**: You can use [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) inside this page if you need to fetch data at build time.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-error-page.md","loc":{"lines":{"from":1,"to":24}}}}],["80",{"pageContent":"500 Page\n\nServer-rendering an error page for every visit adds complexity to responding to errors. To help users get responses to errors as fast as possible, Next.js provides a static 500 page by default without having to add any additional files.\n\n### Customizing The 500 Page\n\nTo customize the 500 page you can create a `pages/500.js` file. This file is statically generated at build time.\n\n```jsx\n// pages/500.js\nexport default function Custom500() {\n  return <h1>500 - Server-side error occurred</h1>\n}\n```\n\n> **Note**: You can use [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) inside this page if you need to fetch data at build time.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-error-page.md","loc":{"lines":{"from":26,"to":41}}}}],["81",{"pageContent":"More Advanced Error Page Customizing\n\n500 errors are handled both client-side and server-side by the `Error` component. If you wish to override it, define the file `pages/_error.js` and add the following code:\n\n```jsx\nfunction Error({ statusCode }) {\n  return (\n    <p>\n      {statusCode\n        ? `An error ${statusCode} occurred on server`\n        : 'An error occurred on client'}\n    </p>\n  )\n}\n\nError.getInitialProps = ({ res, err }) => {\n  const statusCode = res ? res.statusCode : err ? err.statusCode : 404\n  return { statusCode }\n}\n\nexport default Error\n```\n\n> `pages/_error.js` is only used in production. In development you’ll get an error with the call stack to know where the error originated from.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-error-page.md","loc":{"lines":{"from":43,"to":66}}}}],["82",{"pageContent":"Reusing the built-in error page\n\nIf you want to render the built-in error page you can by importing the `Error` component:\n\n```jsx\nimport Error from 'next/error'\n\nexport async function getServerSideProps() {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js')\n  const errorCode = res.ok ? false : res.status\n  const json = await res.json()\n\n  return {\n    props: { errorCode, stars: json.stargazers_count },\n  }\n}\n\nexport default function Page({ errorCode, stars }) {\n  if (errorCode) {\n    return <Error statusCode={errorCode} />\n  }\n\n  return <div>Next stars: {stars}</div>\n}\n```\n\nThe `Error` component also takes `title` as a property if you want to pass in a text message along with a `statusCode`.\n\nIf you have a custom `Error` component be sure to import that one instead. `next/error` exports the default component used by Next.js.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-error-page.md","loc":{"lines":{"from":68,"to":96}}}}],["83",{"pageContent":"Caveats\n\n- `Error` does not currently support Next.js [Data Fetching methods](/docs/basic-features/data-fetching.md) like [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) or [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md).\n- `_error`, like `_app`, is a reserved pathname. `_error` is used to define the customized layouts and behaviors of the error pages. `/_error` will render 404 when accessed directly via [routing](/docs/routing/introduction) or rendering in a [custom server](/docs/advanced-features/custom-server).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-error-page.md","loc":{"lines":{"from":98,"to":101}}}}],["84",{"pageContent":"---\ndescription: Start a Next.js app programmatically using a custom server.\n---\n\n# Custom Server\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/custom-server\">Custom Server</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/ssr-caching\">SSR Caching</a></li>\n  </ul>\n</details>\n\nBy default, Next.js includes its own server with `next start`. If you have an existing backend, you can still use it with Next.js (this is not a custom server). A custom Next.js server allows you to start a server 100% programmatically in order to use custom server patterns. Most of the time, you will not need this – but it's available for complete customization.\n\n> **Note:** A custom server **cannot** be deployed on [Vercel](https://vercel.com/solutions/nextjs).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-server.md","loc":{"lines":{"from":1,"to":17}}}}],["85",{"pageContent":"> **Note:** A custom server **cannot** be deployed on [Vercel](https://vercel.com/solutions/nextjs).\n\n> Before deciding to use a custom server, please keep in mind that it should only be used when the integrated router of Next.js can't meet your app requirements. A custom server will remove important performance optimizations, like **serverless functions** and **[Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md).**\n\nTake a look at the following example of a custom server:\n\n```js\n// server.js\nconst { createServer } = require('http')\nconst { parse } = require('url')\nconst next = require('next')\n\nconst dev = process.env.NODE_ENV !== 'production'\nconst hostname = 'localhost'\nconst port = 3000\n// when using middleware `hostname` and `port` must be provided below\nconst app = next({ dev, hostname, port })\nconst handle = app.getRequestHandler()","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-server.md","loc":{"lines":{"from":17,"to":34}}}}],["86",{"pageContent":"app.prepare().then(() => {\n  createServer(async (req, res) => {\n    try {\n      // Be sure to pass `true` as the second argument to `url.parse`.\n      // This tells it to parse the query portion of the URL.\n      const parsedUrl = parse(req.url, true)\n      const { pathname, query } = parsedUrl\n\n      if (pathname === '/a') {\n        await app.render(req, res, '/a', query)\n      } else if (pathname === '/b') {\n        await app.render(req, res, '/b', query)\n      } else {\n        await handle(req, res, parsedUrl)\n      }\n    } catch (err) {\n      console.error('Error occurred handling', req.url, err)\n      res.statusCode = 500\n      res.end('internal server error')\n    }\n  })\n    .once('error', (err) => {\n      console.error(err)\n      process.exit(1)\n    })\n    .listen(port, () => {\n      console.log(`> Ready on http://${hostname}:${port}`)\n    })\n})","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-server.md","loc":{"lines":{"from":36,"to":64}}}}],["87",{"pageContent":"> `server.js` doesn't go through babel or webpack. Make sure the syntax and sources this file requires are compatible with the current node version you are running.\n\nTo run the custom server you'll need to update the `scripts` in `package.json` like so:\n\n```json\n\"scripts\": {\n  \"dev\": \"node server.js\",\n  \"build\": \"next build\",\n  \"start\": \"NODE_ENV=production node server.js\"\n}\n```\n\n---\n\nThe custom server uses the following import to connect the server with the Next.js application:\n\n```js\nconst next = require('next')\nconst app = next({})","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-server.md","loc":{"lines":{"from":67,"to":85}}}}],["88",{"pageContent":"---\n\nThe custom server uses the following import to connect the server with the Next.js application:\n\n```js\nconst next = require('next')\nconst app = next({})\n```\n\nThe above `next` import is a function that receives an object with the following options:\n\n- `dev`: `Boolean` - Whether or not to launch Next.js in dev mode. Defaults to `false`\n- `dir`: `String` - Location of the Next.js project. Defaults to `'.'`\n- `quiet`: `Boolean` - Hide error messages containing server information. Defaults to `false`\n- `conf`: `object` - The same object you would use in [next.config.js](/docs/api-reference/next.config.js/introduction.md). Defaults to `{}`\n\nThe returned `app` can then be used to let Next.js handle requests as required.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-server.md","loc":{"lines":{"from":85,"to":101}}}}],["89",{"pageContent":"Disabling file-system routing\n\nBy default, `Next` will serve each file in the `pages` folder under a pathname matching the filename. If your project uses a custom server, this behavior may result in the same content being served from multiple paths, which can present problems with SEO and UX.\n\nTo disable this behavior and prevent routing based on files in `pages`, open `next.config.js` and disable the `useFileSystemPublicRoutes` config:\n\n```js\nmodule.exports = {\n  useFileSystemPublicRoutes: false,\n}\n```\n\n> Note that `useFileSystemPublicRoutes` disables filename routes from SSR; client-side routing may still access those paths. When using this option, you should guard against navigation to routes you do not want programmatically.\n\n> You may also wish to configure the client-side router to disallow client-side redirects to filename routes; for that refer to [`router.beforePopState`](/docs/api-reference/next/router.md#router.beforePopState).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/custom-server.md","loc":{"lines":{"from":103,"to":117}}}}],["90",{"pageContent":"---\ndescription: Extend the babel preset added by Next.js with your own configs.\n---\n\n# Customizing Babel Config\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-custom-babel-config\">Customizing babel configuration</a></li>\n  </ul>\n</details>\n\nNext.js includes the `next/babel` preset to your app, which includes everything needed to compile React applications and server-side code. But if you want to extend the default Babel configs, it's also possible.\n\nTo start, you only need to define a `.babelrc` file (or `babel.config.js`) at the top of your app. If such a file is found, it will be considered as the _source of truth_, and therefore it needs to define what Next.js needs as well, which is the `next/babel` preset.\n\nHere's an example `.babelrc` file:\n\n```json\n{\n  \"presets\": [\"next/babel\"],\n  \"plugins\": []\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-babel-config.md","loc":{"lines":{"from":1,"to":24}}}}],["91",{"pageContent":"You can [take a look at this file](https://github.com/vercel/next.js/blob/canary/packages/next/src/build/babel/preset.ts) to learn about the presets included by `next/babel`.\n\nTo add presets/plugins **without configuring them**, you can do it this way:\n\n```json\n{\n  \"presets\": [\"next/babel\"],\n  \"plugins\": [\"@babel/plugin-proposal-do-expressions\"]\n}\n```\n\nTo add presets/plugins **with custom configuration**, do it on the `next/babel` preset like so:\n\n```json\n{\n  \"presets\": [\n    [\n      \"next/babel\",\n      {\n        \"preset-env\": {},\n        \"transform-runtime\": {},\n        \"styled-jsx\": {},\n        \"class-properties\": {}\n      }\n    ]\n  ],\n  \"plugins\": []\n}\n```\n\nTo learn more about the available options for each config, visit their documentation site.\n\n> Next.js uses the **current** Node.js version for server-side compilations.\n\n> The `modules` option on `\"preset-env\"` should be kept to `false`, otherwise webpack code splitting is turned off.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-babel-config.md","loc":{"lines":{"from":27,"to":61}}}}],["92",{"pageContent":"---\ndescription: Extend the PostCSS config and plugins added by Next.js with your own.\n---\n\n# Customizing PostCSS Config\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss\">Tailwind CSS Example</a></li>\n  </ul>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":1,"to":12}}}}],["93",{"pageContent":"Default Behavior\n\nNext.js compiles CSS for its [built-in CSS support](/docs/basic-features/built-in-css-support.md) using PostCSS.\n\nOut of the box, with no configuration, Next.js compiles CSS with the following transformations:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":14,"to":18}}}}],["94",{"pageContent":"Out of the box, with no configuration, Next.js compiles CSS with the following transformations:\n\n1. [Autoprefixer](https://github.com/postcss/autoprefixer) automatically adds vendor prefixes to CSS rules (back to IE11).\n1. [Cross-browser Flexbox bugs](https://github.com/philipwalton/flexbugs) are corrected to behave like [the spec](https://www.w3.org/TR/css-flexbox-1/).\n1. New CSS features are automatically compiled for Internet Explorer 11 compatibility:\n   - [`all` Property](https://developer.mozilla.org/en-US/docs/Web/CSS/all)\n   - [Break Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/break-after)\n   - [`font-variant` Property](https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant)\n   - [Gap Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/gap)\n   - [Media Query Ranges](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries#Syntax_improvements_in_Level_4)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":18,"to":27}}}}],["95",{"pageContent":"By default, [CSS Grid](https://www.w3.org/TR/css-grid-1/) and [Custom Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/var) (CSS variables) are **not compiled** for IE11 support.\n\nTo compile [CSS Grid Layout](https://developer.mozilla.org/en-US/docs/Web/CSS/grid) for IE11, you can place the following comment at the top of your CSS file:\n\n```css\n/* autoprefixer grid: autoplace */","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":29,"to":34}}}}],["96",{"pageContent":"You can also enable IE11 support for [CSS Grid Layout](https://developer.mozilla.org/en-US/docs/Web/CSS/grid)\nin your entire project by configuring autoprefixer with the configuration shown below (collapsed).\nSee [\"Customizing Plugins\"](#customizing-plugins) below for more information.\n\n<details>\n<summary><strong>Click to view the configuration to enable CSS Grid Layout</strong></summary>\n\n```json\n{\n  \"plugins\": [\n    \"postcss-flexbugs-fixes\",\n    [\n      \"postcss-preset-env\",\n      {\n        \"autoprefixer\": {\n          \"flexbox\": \"no-2009\",\n          \"grid\": \"autoplace\"\n        },\n        \"stage\": 3,\n        \"features\": {\n          \"custom-properties\": false\n        }\n      }\n    ]\n  ]\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":37,"to":62}}}}],["97",{"pageContent":"</details>\n<br/>\n\nCSS variables are not compiled because it is [not possible to safely do so](https://github.com/MadLittleMods/postcss-css-variables#caveats).\nIf you must use variables, consider using something like [Sass variables](https://sass-lang.com/documentation/variables) which are compiled away by [Sass](https://sass-lang.com/).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":65,"to":69}}}}],["98",{"pageContent":"Customizing Target Browsers\n\nNext.js allows you to configure the target browsers (for [Autoprefixer](https://github.com/postcss/autoprefixer) and compiled css features) through [Browserslist](https://github.com/browserslist/browserslist).\n\nTo customize browserslist, create a `browserslist` key in your `package.json` like so:\n\n```json\n{\n  \"browserslist\": [\">0.3%\", \"not dead\", \"not op_mini all\"]\n}\n```\n\nYou can use the [browsersl.ist](https://browsersl.ist/?q=%3E0.3%25%2C+not+ie+11%2C+not+dead%2C+not+op_mini+all) tool to visualize what browsers you are targeting.\n\n## CSS Modules\n\nNo configuration is needed to support CSS Modules. To enable CSS Modules for a file, rename the file to have the extension `.module.css`.\n\nYou can learn more about [Next.js' CSS Module support here](/docs/basic-features/built-in-css-support.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":71,"to":89}}}}],["99",{"pageContent":"Customizing Plugins\n\n> **Warning**: When you define a custom PostCSS configuration file, Next.js **completely disables** the [default behavior](#default-behavior).\n> Be sure to manually configure all the features you need compiled, including [Autoprefixer](https://github.com/postcss/autoprefixer).\n> You also need to install any plugins included in your custom configuration manually, i.e. `npm install postcss-flexbugs-fixes postcss-preset-env`.\n\nTo customize the PostCSS configuration, create a `postcss.config.json` file in the root of your project.\n\nThis is the default configuration used by Next.js:\n\n```json\n{\n  \"plugins\": [\n    \"postcss-flexbugs-fixes\",\n    [\n      \"postcss-preset-env\",\n      {\n        \"autoprefixer\": {\n          \"flexbox\": \"no-2009\"\n        },\n        \"stage\": 3,\n        \"features\": {\n          \"custom-properties\": false\n        }\n      }\n    ]\n  ]\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":91,"to":118}}}}],["100",{"pageContent":"> **Note**: Next.js also allows the file to be named `.postcssrc.json`, or, to be read from the `postcss` key in `package.json`.\n\nIt is also possible to configure PostCSS with a `postcss.config.js` file, which is useful when you want to conditionally include plugins based on environment:\n\n```js\nmodule.exports = {\n  plugins:\n    process.env.NODE_ENV === 'production'\n      ? [\n          'postcss-flexbugs-fixes',\n          [\n            'postcss-preset-env',\n            {\n              autoprefixer: {\n                flexbox: 'no-2009',\n              },\n              stage: 3,\n              features: {\n                'custom-properties': false,\n              },\n            },\n          ],\n        ]\n      : [\n          // No transformations in development\n        ],\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":121,"to":147}}}}],["101",{"pageContent":"> **Note**: Next.js also allows the file to be named `.postcssrc.js`.\n\nDo **not use `require()`** to import the PostCSS Plugins. Plugins must be provided as strings.\n\n> **Note**: If your `postcss.config.js` needs to support other non-Next.js tools in the same project, you must use the interoperable object-based format instead:\n>\n> ```js\n> module.exports = {\n>   plugins: {\n>     'postcss-flexbugs-fixes': {},\n>     'postcss-preset-env': {\n>       autoprefixer: {\n>         flexbox: 'no-2009',\n>       },\n>       stage: 3,\n>       features: {\n>         'custom-properties': false,\n>       },\n>     },\n>   },\n> }\n> ```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/customizing-postcss-config.md","loc":{"lines":{"from":150,"to":171}}}}],["102",{"pageContent":"---\ndescription: Debug your Next.js app.\n---\n\n# Debugging\n\nThis documentation explains how you can debug your Next.js frontend and backend code with full source maps support using either the [VS Code debugger](https://code.visualstudio.com/docs/editor/debugging) or [Chrome DevTools](https://developers.google.com/web/tools/chrome-devtools).\n\nAny debugger that can attach to Node.js can also be used to debug a Next.js application. You can find more details in the Node.js [Debugging Guide](https://nodejs.org/en/docs/guides/debugging-getting-started/).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":1,"to":9}}}}],["103",{"pageContent":"Debugging with VS Code\n\nCreate a file named `.vscode/launch.json` at the root of your project with the following content:\n\n```json\n{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Next.js: debug server-side\",\n      \"type\": \"node-terminal\",\n      \"request\": \"launch\",\n      \"command\": \"npm run dev\"\n    },\n    {\n      \"name\": \"Next.js: debug client-side\",\n      \"type\": \"chrome\",\n      \"request\": \"launch\",\n      \"url\": \"http://localhost:3000\"\n    },\n    {\n      \"name\": \"Next.js: debug full stack\",\n      \"type\": \"node-terminal\",\n      \"request\": \"launch\",\n      \"command\": \"npm run dev\",\n      \"serverReadyAction\": {\n        \"pattern\": \"started server on .+, url: (https?://.+)\",\n        \"uriFormat\": \"%s\",\n        \"action\": \"debugWithChrome\"\n      }\n    }\n  ]\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":11,"to":43}}}}],["104",{"pageContent":"`npm run dev` can be replaced with `yarn dev` if you're using Yarn. If you're [changing the port number](/docs/api-reference/cli#development) your application starts on, replace the `3000` in `http://localhost:3000` with the port you're using instead.\n\nNow go to the Debug panel (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>D</kbd> on Windows/Linux, <kbd>⇧</kbd>+<kbd>⌘</kbd>+<kbd>D</kbd> on macOS), select a launch configuration, then press <kbd>F5</kbd> or select **Debug: Start Debugging** from the Command Palette to start your debugging session.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":46,"to":48}}}}],["105",{"pageContent":"Using the Debugger in Jetbrains WebStorm\n\nClick the drop down menu listing the runtime configuration, and click `Edit Configurations...`. Create a `Javascript Debug` debug configuration with `http://localhost:3000` as the URL. Customize to your liking (e.g. Browser for debugging, store as project file), and click `OK`. Run this debug configuration, and the selected browser should automatically open. At this point, you should have 2 applications in debug mode: the NextJS node application, and the client/ browser application.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":50,"to":52}}}}],["106",{"pageContent":"Debugging with Chrome DevTools\n\n### Client-side code\n\nStart your development server as usual by running `next dev`, `npm run dev`, or `yarn dev`. Once the server starts, open `http://localhost:3000` (or your alternate URL) in Chrome. Next, open Chrome's Developer Tools (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>J</kbd> on Windows/Linux, <kbd>⌥</kbd>+<kbd>⌘</kbd>+<kbd>I</kbd> on macOS), then go to the **Sources** tab.\n\nNow, any time your client-side code reaches a [`debugger`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger) statement, code execution will pause and that file will appear in the debug area. You can also press <kbd>Ctrl</kbd>+<kbd>P</kbd> on Windows/Linux or <kbd>⌘</kbd>+<kbd>P</kbd> on macOS to search for a file and set breakpoints manually. Note that when searching here, your source files will have paths starting with `webpack://_N_E/./`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":54,"to":60}}}}],["107",{"pageContent":"Server-side code\n\nTo debug server-side Next.js code with Chrome DevTools, you need to pass the [`--inspect`](https://nodejs.org/api/cli.html#cli_inspect_host_port) flag to the underlying Node.js process:\n\n```bash\nNODE_OPTIONS='--inspect' next dev\n```\n\nIf you're using `npm run dev` or `yarn dev` (see [Getting Started](/docs/getting-started)) then you should update the `dev` script on your `package.json`:\n\n```json\n\"dev\": \"NODE_OPTIONS='--inspect' next dev\"\n```\n\nLaunching the Next.js dev server with the `--inspect` flag will look something like this:\n\n```bash\nDebugger listening on ws://127.0.0.1:9229/0cf90313-350d-4466-a748-cd60f4e47c95\nFor help, see: https://nodejs.org/en/docs/inspector\nready - started server on 0.0.0.0:3000, url: http://localhost:3000","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":62,"to":81}}}}],["108",{"pageContent":"> Be aware that running `NODE_OPTIONS='--inspect' npm run dev` or `NODE_OPTIONS='--inspect' yarn dev` won't work. This would try to start multiple debuggers on the same port: one for the npm/yarn process and one for Next.js. You would then get an error like `Starting inspector on 127.0.0.1:9229 failed: address already in use` in your console.\n\nOnce the server starts, open a new tab in Chrome and visit `chrome://inspect`, where you should see your Next.js application inside the **Remote Target** section. Click **inspect** under your application to open a separate DevTools window, then go to the **Sources** tab.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":84,"to":86}}}}],["109",{"pageContent":"Debugging server-side code here works much like debugging client-side code with Chrome DevTools, except that when you search for files here with <kbd>Ctrl</kbd>+<kbd>P</kbd> or <kbd>⌘</kbd>+<kbd>P</kbd>, your source files will have paths starting with `webpack://{application-name}/./` (where `{application-name}` will be replaced with the name of your application according to your `package.json` file).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":88,"to":88}}}}],["110",{"pageContent":"Debugging on Windows\n\nWindows users may run into an issue when using `NODE_OPTIONS='--inspect'` as that syntax is not supported on Windows platforms. To get around this, install the [`cross-env`](https://www.npmjs.com/package/cross-env) package as a development dependency (`-D` with `npm` and `yarn`) and replace the `dev` script with the following.\n\n```json\n\"dev\": \"cross-env NODE_OPTIONS='--inspect' next dev\",\n```\n\n`cross-env` will set the `NODE_OPTIONS` environment variable regardless of which platform you are on (including Mac, Linux, and Windows) and allow you to debug consistently across devices and operating systems.\n\n> **Note:** Ensure Windows Defender is disabled on your machine. This external service will check _every file read_, which has been reported to greatly increase Fast Refresh time with `next dev`. This is a known issue, not related to Next.js, but it does affect Next.js development.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":90,"to":100}}}}],["111",{"pageContent":"More information\n\nTo learn more about how to use a JavaScript debugger, take a look at the following documentation:\n\n- [Node.js debugging in VS Code: Breakpoints](https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_breakpoints)\n- [Chrome DevTools: Debug JavaScript](https://developers.google.com/web/tools/chrome-devtools/javascript)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/debugging.md","loc":{"lines":{"from":102,"to":107}}}}],["112",{"pageContent":"---\ndescription: Dynamically import JavaScript modules and React Components and split your code into manageable chunks.\n---\n\n# Dynamic Import\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-dynamic-import\">Dynamic Import</a></li>\n  </ul>\n</details>\n\nNext.js supports lazy loading external libraries with `import()` and React components with `next/dynamic`. Deferred loading helps improve the initial loading performance by decreasing the amount of JavaScript necessary to render the page. Components or libraries are only imported and included in the JavaScript bundle when they're used.\n\n`next/dynamic` is a composite extension of [`React.lazy`](https://react.dev/reference/react/lazy) and [`Suspense`](https://react.dev/reference/react/Suspense), components can delay hydration until the Suspense boundary is resolved.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/dynamic-import.md","loc":{"lines":{"from":1,"to":16}}}}],["113",{"pageContent":"Example\n\nBy using `next/dynamic`, the header component will not be included in the page's initial JavaScript bundle. The page will render the Suspense `fallback` first, followed by the `Header` component when the `Suspense` boundary is resolved.\n\n```jsx\nimport dynamic from 'next/dynamic'\n\nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  loading: () => <p>Loading...</p>,\n})\n\nexport default function Home() {\n  return <DynamicHeader />\n}\n```\n\n> **Note**: In `import('path/to/component')`, the path must be explicitly written. It can't be a template string nor a variable. Furthermore the `import()` has to be inside the `dynamic()` call for Next.js to be able to match webpack bundles / module ids to the specific `dynamic()` call and preload them before rendering. `dynamic()` can't be used inside of React rendering as it needs to be marked in the top level of the module for preloading to work, similar to `React.lazy`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/dynamic-import.md","loc":{"lines":{"from":18,"to":34}}}}],["114",{"pageContent":"With named exports\n\nTo dynamically import a named export, you can return it from the [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) returned by [`import()`](https://github.com/tc39/proposal-dynamic-import#example):\n\n```jsx\n// components/hello.js\nexport function Hello() {\n  return <p>Hello!</p>\n}\n\n// pages/index.js\nimport dynamic from 'next/dynamic'\n\nconst DynamicComponent = dynamic(() =>\n  import('../components/hello').then((mod) => mod.Hello)\n)\n```\n\n## With no SSR\n\nTo dynamically load a component on the client side, you can use the `ssr` option to disable server-rendering. This is useful if an external dependency or component relies on browser APIs like `window`.\n\n```jsx\nimport dynamic from 'next/dynamic'\n\nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  ssr: false,\n})\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/dynamic-import.md","loc":{"lines":{"from":36,"to":64}}}}],["115",{"pageContent":"With external libraries\n\nThis example uses the external library `fuse.js` for fuzzy search. The module is only loaded in the browser after the user types in the search input.\n\n```jsx\nimport { useState } from 'react'\n\nconst names = ['Tim', 'Joe', 'Bel', 'Lee']\n\nexport default function Page() {\n  const [results, setResults] = useState()\n\n  return (\n    <div>\n      <input\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={async (e) => {\n          const { value } = e.currentTarget\n          // Dynamically load fuse.js\n          const Fuse = (await import('fuse.js')).default\n          const fuse = new Fuse(names)\n\n          setResults(fuse.search(value))\n        }}\n      />\n      <pre>Results: {JSON.stringify(results, null, 2)}</pre>\n    </div>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/dynamic-import.md","loc":{"lines":{"from":66,"to":96}}}}],["116",{"pageContent":"---\ndescription: Handle errors in your Next.js app.\n---\n\n# Error Handling\n\nThis documentation explains how you can handle development, server-side, and client-side errors.\n\n## Handling Errors in Development\n\nWhen there is a runtime error during the development phase of your Next.js application, you will encounter an **overlay**. It is a modal that covers the webpage. It is only visible when the development server runs using `next dev`, `npm run dev`, or `yarn dev` and not in production. Fixing the error will automatically dismiss the overlay.\n\nHere is an example of an overlay:\n\n![Example of an overlay when in development mode](https://assets.vercel.com/image/upload/v1645118290/docs-assets/static/docs/error-handling/overlay.png)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/error-handling.md","loc":{"lines":{"from":1,"to":15}}}}],["117",{"pageContent":"Handling Server Errors\n\nNext.js provides a static 500 page by default to handle server-side errors that occur in your application. You can also [customize this page](/docs/advanced-features/custom-error-page#customizing-the-500-page) by creating a `pages/500.js` file.\n\nHaving a 500 page in your application does not show specific errors to the app user.\n\nYou can also use [404 page](/docs/advanced-features/custom-error-page#404-page) to handle specific runtime error like `file not found`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/error-handling.md","loc":{"lines":{"from":17,"to":23}}}}],["118",{"pageContent":"Handling Client Errors\n\nReact [Error Boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary) is a graceful way to handle a JavaScript error on the client so that the other parts of the application continue working. In addition to preventing the page from crashing, it allows you to provide a custom fallback component and even log error information.\n\nTo use Error Boundaries for your Next.js application, you must create a class component `ErrorBoundary` and wrap the `Component` prop in the `pages/_app.js` file. This component will be responsible to:\n\n- Render a fallback UI after an error is thrown\n- Provide a way to reset the Application's state\n- Log error information\n\nYou can create an `ErrorBoundary` class component by extending `React.Component`. For example:\n\n```jsx\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/error-handling.md","loc":{"lines":{"from":25,"to":40}}}}],["119",{"pageContent":"You can create an `ErrorBoundary` class component by extending `React.Component`. For example:\n\n```jsx\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n\n    // Define a state variable to track whether is an error or not\n    this.state = { hasError: false }\n  }\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI\n\n    return { hasError: true }\n  }\n  componentDidCatch(error, errorInfo) {\n    // You can use your own error logging service here\n    console.log({ error, errorInfo })\n  }\n  render() {\n    // Check if the error is thrown\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <div>\n          <h2>Oops, there is an error!</h2>\n          <button\n            type=\"button\"\n            onClick={() => this.setState({ hasError: false })}\n          >\n            Try again?\n          </button>\n        </div>\n      )\n    }","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/error-handling.md","loc":{"lines":{"from":40,"to":74}}}}],["120",{"pageContent":"// Return children components in case of no error\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/error-handling.md","loc":{"lines":{"from":76,"to":82}}}}],["121",{"pageContent":"The `ErrorBoundary` component keeps track of an `hasError` state. The value of this state variable is a boolean. When the value of `hasError` is `true`, then the `ErrorBoundary` component will render a fallback UI. Otherwise, it will render the children components.\n\nAfter creating an `ErrorBoundary` component, import it in the `pages/_app.js` file to wrap the `Component` prop in your Next.js application.\n\n```jsx\n// Import the ErrorBoundary component\nimport ErrorBoundary from '../components/ErrorBoundary'\n\nfunction MyApp({ Component, pageProps }) {\n  return (\n    // Wrap the Component prop with ErrorBoundary component\n    <ErrorBoundary>\n      <Component {...pageProps} />\n    </ErrorBoundary>\n  )\n}\n\nexport default MyApp\n```\n\nYou can learn more about [Error Boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary) in React's documentation.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/error-handling.md","loc":{"lines":{"from":85,"to":105}}}}],["122",{"pageContent":"Reporting Errors\n\nTo monitor client errors, use a service like [Sentry](https://github.com/vercel/next.js/tree/canary/examples/with-sentry), Bugsnag or Datadog.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/error-handling.md","loc":{"lines":{"from":107,"to":109}}}}],["123",{"pageContent":"---\ndescription: Next.js has built-in support for internationalized routing and language detection. Learn more here.\n---\n\n# Internationalized Routing\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/i18n-routing\">i18n routing</a></li>\n  </ul>\n</details>\n\nNext.js has built-in support for internationalized ([i18n](https://en.wikipedia.org/wiki/Internationalization_and_localization#Naming)) routing since `v10.0.0`. You can provide a list of locales, the default locale, and domain-specific locales and Next.js will automatically handle the routing.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":1,"to":14}}}}],["124",{"pageContent":"The i18n routing support is currently meant to complement existing i18n library solutions like [`react-intl`](https://formatjs.io/docs/getting-started/installation), [`react-i18next`](https://react.i18next.com/), [`lingui`](https://lingui.dev/), [`rosetta`](https://github.com/lukeed/rosetta), [`next-intl`](https://github.com/amannn/next-intl), [`next-translate`](https://github.com/aralroca/next-translate), [`next-multilingual`](https://github.com/Avansai/next-multilingual), [`typesafe-i18n`](https://github.com/ivanhofer/typesafe-i18n), and others by streamlining the routes and locale parsing.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":16,"to":16}}}}],["125",{"pageContent":"Getting started\n\nTo get started, add the `i18n` config to your `next.config.js` file.\n\nLocales are [UTS Locale Identifiers](https://www.unicode.org/reports/tr35/tr35-59/tr35.html#Identifiers), a standardized format for defining locales.\n\nGenerally a Locale Identifier is made up of a language, region, and script separated by a dash: `language-region-script`. The region and script are optional. An example:\n\n- `en-US` - English as spoken in the United States\n- `nl-NL` - Dutch as spoken in the Netherlands\n- `nl` - Dutch, no specific region\n\nIf user locale is `nl-BE` and it is not listed in your configuration, they will be redirected to `nl` if available, or to the default locale otherwise.\nIf you don't plan to support all regions of a country, it is therefore a good practice to include country locales that will act as fallbacks.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":18,"to":31}}}}],["126",{"pageContent":"```js\n// next.config.js\nmodule.exports = {\n  i18n: {\n    // These are all the locales you want to support in\n    // your application\n    locales: ['en-US', 'fr', 'nl-NL'],\n    // This is the default locale you want to be used when visiting\n    // a non-locale prefixed path e.g. `/hello`\n    defaultLocale: 'en-US',\n    // This is a list of locale domains and the default locale they\n    // should handle (these are only required when setting up domain routing)\n    // Note: subdomains must be included in the domain value to be matched e.g. \"fr.example.com\".\n    domains: [\n      {\n        domain: 'example.com',\n        defaultLocale: 'en-US',\n      },\n      {\n        domain: 'example.nl',\n        defaultLocale: 'nl-NL',\n      },\n      {\n        domain: 'example.fr',\n        defaultLocale: 'fr',\n        // an optional http field can also be used to test\n        // locale domains locally with http instead of https\n        http: true,\n      },\n    ],\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":33,"to":65}}}}],["127",{"pageContent":"Locale Strategies\n\nThere are two locale handling strategies: Sub-path Routing and Domain Routing.\n\n### Sub-path Routing\n\nSub-path Routing puts the locale in the url path.\n\n```js\n// next.config.js\nmodule.exports = {\n  i18n: {\n    locales: ['en-US', 'fr', 'nl-NL'],\n    defaultLocale: 'en-US',\n  },\n}\n```\n\nWith the above configuration `en-US`, `fr`, and `nl-NL` will be available to be routed to, and `en-US` is the default locale. If you have a `pages/blog.js` the following urls would be available:\n\n- `/blog`\n- `/fr/blog`\n- `/nl-nl/blog`\n\nThe default locale does not have a prefix.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":67,"to":91}}}}],["128",{"pageContent":"Domain Routing\n\nBy using domain routing you can configure locales to be served from different domains:\n\n```js\n// next.config.js\nmodule.exports = {\n  i18n: {\n    locales: ['en-US', 'fr', 'nl-NL', 'nl-BE'],\n    defaultLocale: 'en-US',\n\n    domains: [\n      {\n        // Note: subdomains must be included in the domain value to be matched\n        // e.g. www.example.com should be used if that is the expected hostname\n        domain: 'example.com',\n        defaultLocale: 'en-US',\n      },\n      {\n        domain: 'example.fr',\n        defaultLocale: 'fr',\n      },\n      {\n        domain: 'example.nl',\n        defaultLocale: 'nl-NL',\n        // specify other locales that should be redirected\n        // to this domain\n        locales: ['nl-BE'],\n      },\n    ],\n  },\n}\n```\n\nFor example if you have `pages/blog.js` the following urls will be available:\n\n- `example.com/blog`\n- `www.example.com/blog`\n- `example.fr/blog`\n- `example.nl/blog`\n- `example.nl/nl-BE/blog`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":93,"to":133}}}}],["129",{"pageContent":"Automatic Locale Detection\n\nWhen a user visits the application root (generally `/`), Next.js will try to automatically detect which locale the user prefers based on the [`Accept-Language`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language) header and the current domain.\n\nIf a locale other than the default locale is detected, the user will be redirected to either:\n\n- **When using Sub-path Routing:** The locale prefixed path\n- **When using Domain Routing:** The domain with that locale specified as the default\n\nWhen using Domain Routing, if a user with the `Accept-Language` header `fr;q=0.9` visits `example.com`, they will be redirected to `example.fr` since that domain handles the `fr` locale by default.\n\nWhen using Sub-path Routing, the user would be redirected to `/fr`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":135,"to":146}}}}],["130",{"pageContent":"Prefixing the Default Locale\n\nWith Next.js 12 and [Middleware](/docs/middleware.md), we can add a prefix to the default locale with a [workaround](https://github.com/vercel/next.js/discussions/18419).\n\nFor example, here's a `next.config.js` file with support for a few languages. Note the `\"default\"` locale has been added intentionally.\n\n```js\n// next.config.js\n\nmodule.exports = {\n  i18n: {\n    locales: ['default', 'en', 'de', 'fr'],\n    defaultLocale: 'default',\n    localeDetection: false,\n  },\n  trailingSlash: true,\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":148,"to":164}}}}],["131",{"pageContent":"Next, we can use [Middleware](/docs/middleware.md) to add custom routing rules:\n\n```js\n// middleware.ts\n\nimport { NextRequest, NextResponse } from 'next/server'\n\nconst PUBLIC_FILE = /\\.(.*)$/\n\nexport async function middleware(req: NextRequest) {\n  if (\n    req.nextUrl.pathname.startsWith('/_next') ||\n    req.nextUrl.pathname.includes('/api/') ||\n    PUBLIC_FILE.test(req.nextUrl.pathname)\n  ) {\n    return\n  }\n\n  if (req.nextUrl.locale === 'default') {\n    const locale = req.cookies.get('NEXT_LOCALE')?.value || 'en'\n\n    return NextResponse.redirect(\n      new URL(`/${locale}${req.nextUrl.pathname}${req.nextUrl.search}`, req.url)\n    )\n  }\n}\n```\n\nThis [Middleware](/docs/middleware.md) skips adding the default prefix to [API Routes](/docs/api-routes/introduction.md) and [public](/docs/basic-features/static-file-serving.md) files like fonts or images. If a request is made to the default locale, we redirect to our prefix `/en`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":167,"to":195}}}}],["132",{"pageContent":"Disabling Automatic Locale Detection\n\nThe automatic locale detection can be disabled with:\n\n```js\n// next.config.js\nmodule.exports = {\n  i18n: {\n    localeDetection: false,\n  },\n}\n```\n\nWhen `localeDetection` is set to `false` Next.js will no longer automatically redirect based on the user's preferred locale and will only provide locale information detected from either the locale based domain or locale path as described above.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":197,"to":210}}}}],["133",{"pageContent":"Accessing the locale information\n\nYou can access the locale information via the Next.js router. For example, using the [`useRouter()`](/docs/api-reference/next/router.md#userouter) hook the following properties are available:\n\n- `locale` contains the currently active locale.\n- `locales` contains all configured locales.\n- `defaultLocale` contains the configured default locale.\n\nWhen [pre-rendering](/docs/basic-features/pages.md#static-generation-recommended) pages with `getStaticProps` or `getServerSideProps`, the locale information is provided in [the context](/docs/basic-features/data-fetching/get-static-props.md) provided to the function.\n\nWhen leveraging `getStaticPaths`, the configured locales are provided in the context parameter of the function under `locales` and the configured defaultLocale under `defaultLocale`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":212,"to":222}}}}],["134",{"pageContent":"Transition between locales\n\nYou can use `next/link` or `next/router` to transition between locales.\n\nFor `next/link`, a `locale` prop can be provided to transition to a different locale from the currently active one. If no `locale` prop is provided, the currently active `locale` is used during client-transitions. For example:\n\n```jsx\nimport Link from 'next/link'\n\nexport default function IndexPage(props) {\n  return (\n    <Link href=\"/another\" locale=\"fr\">\n      To /fr/another\n    </Link>\n  )\n}\n```\n\nWhen using the `next/router` methods directly, you can specify the `locale` that should be used via the transition options. For example:\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function IndexPage(props) {\n  const router = useRouter()\n\n  return (\n    <div\n      onClick={() => {\n        router.push('/another', '/another', { locale: 'fr' })\n      }}\n    >\n      to /fr/another\n    </div>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":224,"to":259}}}}],["135",{"pageContent":"Note that to handle switching only the `locale` while preserving all routing information such as [dynamic route](/docs/routing/dynamic-routes.md) query values or hidden href query values, you can provide the `href` parameter as an object:\n\n```jsx\nimport { useRouter } from 'next/router'\nconst router = useRouter()\nconst { pathname, asPath, query } = router\n// change just the locale and maintain all other route information including href's query\nrouter.push({ pathname, query }, asPath, { locale: nextLocale })\n```\n\nSee [here](/docs/api-reference/next/router.md#with-url-object) for more information on the object structure for `router.push`.\n\nIf you have a `href` that already includes the locale you can opt-out of automatically handling the locale prefixing:\n\n```jsx\nimport Link from 'next/link'\n\nexport default function IndexPage(props) {\n  return (\n    <Link href=\"/fr/another\" locale={false}>\n      To /fr/another\n    </Link>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":262,"to":286}}}}],["136",{"pageContent":"Leveraging the NEXT_LOCALE cookie\n\nNext.js supports overriding the accept-language header with a `NEXT_LOCALE=the-locale` cookie. This cookie can be set using a language switcher and then when a user comes back to the site it will leverage the locale specified in the cookie when redirecting from `/` to the correct locale location.\n\nFor example, if a user prefers the locale `fr` in their accept-language header but a `NEXT_LOCALE=en` cookie is set the `en` locale when visiting `/` the user will be redirected to the `en` locale location until the cookie is removed or expired.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":288,"to":292}}}}],["137",{"pageContent":"Search Engine Optimization\n\nSince Next.js knows what language the user is visiting it will automatically add the `lang` attribute to the `<html>` tag.\n\nNext.js doesn't know about variants of a page so it's up to you to add the `hreflang` meta tags using [`next/head`](/docs/api-reference/next/head.md). You can learn more about `hreflang` in the [Google Webmasters documentation](https://support.google.com/webmasters/answer/189077).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":294,"to":298}}}}],["138",{"pageContent":"How does this work with Static Generation?\n\n> Note that Internationalized Routing does not integrate with [`output: 'export'`](/docs/advanced-features/static-html-export.md) as it does not leverage the Next.js routing layer. Hybrid Next.js applications that do not use `output: 'export'` are fully supported.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":300,"to":302}}}}],["139",{"pageContent":"Dynamic Routes and `getStaticProps` Pages\n\nFor pages using `getStaticProps` with [Dynamic Routes](/docs/routing/dynamic-routes.md), all locale variants of the page desired to be prerendered need to be returned from [`getStaticPaths`](/docs/basic-features/data-fetching/get-static-paths.md). Along with the `params` object returned for `paths`, you can also return a `locale` field specifying which locale you want to render. For example:\n\n```js\n// pages/blog/[slug].js\nexport const getStaticPaths = ({ locales }) => {\n  return {\n    paths: [\n      // if no `locale` is provided only the defaultLocale will be generated\n      { params: { slug: 'post-1' }, locale: 'en-US' },\n      { params: { slug: 'post-1' }, locale: 'fr' },\n    ],\n    fallback: true,\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":304,"to":319}}}}],["140",{"pageContent":"For [Automatically Statically Optimized](/docs/advanced-features/automatic-static-optimization.md) and non-dynamic `getStaticProps` pages, **a version of the page will be generated for each locale**. This is important to consider because it can increase build times depending on how many locales are configured inside `getStaticProps`.\n\nFor example, if you have 50 locales configured with 10 non-dynamic pages using `getStaticProps`, this means `getStaticProps` will be called 500 times. 50 versions of the 10 pages will be generated during each build.\n\nTo decrease the build time of dynamic pages with `getStaticProps`, use a [`fallback` mode](/docs/api-reference/data-fetching/get-static-paths#fallback-true). This allows you to return only the most popular paths and locales from `getStaticPaths` for prerendering during the build. Then, Next.js will build the remaining pages at runtime as they are requested.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":322,"to":326}}}}],["141",{"pageContent":"Automatically Statically Optimized Pages\n\nFor pages that are [automatically statically optimized](/docs/advanced-features/automatic-static-optimization.md), a version of the page will be generated for each locale.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":328,"to":330}}}}],["142",{"pageContent":"Non-dynamic getStaticProps Pages\n\nFor non-dynamic `getStaticProps` pages, a version is generated for each locale like above. `getStaticProps` is called with each `locale` that is being rendered. If you would like to opt-out of a certain locale from being pre-rendered, you can return `notFound: true` from `getStaticProps` and this variant of the page will not be generated.\n\n```js\nexport async function getStaticProps({ locale }) {\n  // Call an external API endpoint to get posts.\n  // You can use any data fetching library\n  const res = await fetch(`https://.../posts?locale=${locale}`)\n  const posts = await res.json()\n\n  if (posts.length === 0) {\n    return {\n      notFound: true,\n    }\n  }\n\n  // By returning { props: posts }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":332,"to":357}}}}],["143",{"pageContent":"Limits for the i18n config\n\n- `locales`: 100 total locales\n- `domains`: 100 total locale domain items\n\n> **Note:** These limits have been added initially to prevent potential [performance issues at build time](#dynamic-routes-and-getStaticProps-pages). You can workaround these limits with custom routing using [Middleware](/docs/middleware.md) in Next.js 12.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/i18n-routing.md","loc":{"lines":{"from":359,"to":364}}}}],["144",{"pageContent":"---\ndescription: Learn how to use instrumentation to run code at server startup in your Next.js app\n---\n\n> **Note**: This feature is experimental. To use it, you must explicitly opt in by defining `experimental.instrumentationHook = true;` in your `next.config.js`.\n\n# `instrumentation.ts`\n\nIf you export a function named `register` from this file, we will call that function whenever a new Next.js server instance is bootstrapped.\nWhen your `register` function is deployed, it will be called on each cold boot (but exactly once in each environment).\n\nSometimes, it may be useful to import a file in your code because of the side effects it will cause. For example, you might import a file that defines a set of global variables, but never explicitly use the imported file in your code. You would still have access to the global variables the package has declared.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/instrumentation.md","loc":{"lines":{"from":1,"to":12}}}}],["145",{"pageContent":"You can import files with side effects in `instrumentation.ts`, which you might want to use in your `register` function as demonstrated in the following example:\n\n```ts\n// /instrumentation.ts\n\nimport { init } from 'package-init'\n\nexport function register() {\n  init()\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/instrumentation.md","loc":{"lines":{"from":14,"to":23}}}}],["146",{"pageContent":"However, we recommend importing files with side effects using `require` from within your `register` function instead. The following example demonstrates a basic usage of `require` in a `register` function:\n\n```ts\n// /instrumentation.ts\n\nexport function register() {\n  require('package-with-side-effect')\n}\n```\n\nBy doing this, you can colocate all of your side effects in one place in your code, and avoid any unintended consequences from importing files.\n\nWe call `register` in all environments, so it's necessary to conditionally require any code that doesn't support both `edge` and `nodejs`. You can use the environment variable `NEXT_RUNTIME` to get the current environment. Importing an environment-specific code would look like this:\n\n```ts\n// /instrumentation.ts\n\nexport function register() {\n  if (process.env.NEXT_RUNTIME === 'nodejs') {\n    require('./instrumentation-node')\n  }\n\n  if (process.env.NEXT_RUNTIME === 'edge') {\n    require('./instrumentation-edge')\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/instrumentation.md","loc":{"lines":{"from":26,"to":52}}}}],["147",{"pageContent":"---\ndescription: Measure and track page performance using Next.js Analytics\n---\n\n# Measuring performance\n\n[Next.js Analytics](https://nextjs.org/analytics) allows you to analyze and measure the performance of\npages using different metrics.\n\nYou can start collecting your [Real Experience Score](https://vercel.com/docs/concepts/analytics/web-vitals?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) with zero-configuration on [Vercel deployments](https://vercel.com/docs/analytics?utm_source=next-site&utm_medium=docs&utm_campaign=next-website). There's also support for Analytics if you're [self-hosting](https://vercel.com/docs/concepts/analytics#self-hosted?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).\n\nThe rest of this documentation describes the built-in relayer Next.js Analytics uses.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":1,"to":12}}}}],["148",{"pageContent":"Build Your Own\n\nFirst, you will need to create a [custom App](/docs/advanced-features/custom-app.md) component and define a `reportWebVitals` function:\n\n```js\n// pages/_app.js\nexport function reportWebVitals(metric) {\n  console.log(metric)\n}\n\nfunction MyApp({ Component, pageProps }) {\n  return <Component {...pageProps} />\n}\n\nexport default MyApp","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":14,"to":28}}}}],["149",{"pageContent":"This function is fired when the final values for any of the metrics have finished calculating on\nthe page. You can use to log any of the results to the console or send to a particular endpoint.\n\nThe `metric` object returned to the function consists of a number of properties:\n\n- `id`: Unique identifier for the metric in the context of the current page load\n- `name`: Metric name\n- `startTime`: First recorded timestamp of the performance entry in [milliseconds](https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp) (if applicable)\n- `value`: Value, or duration in [milliseconds](https://developer.mozilla.org/en-US/docs/Web/API/DOMHighResTimeStamp), of the performance entry\n- `label`: Type of metric (`web-vital` or `custom`)\n\nThere are two types of metrics that are tracked:\n\n- Web Vitals\n- Custom metrics","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":31,"to":45}}}}],["150",{"pageContent":"Web Vitals\n\n[Web Vitals](https://web.dev/vitals/) are a set of useful metrics that aim to capture the user\nexperience of a web page. The following web vitals are all included:\n\n- [Time to First Byte](https://developer.mozilla.org/en-US/docs/Glossary/Time_to_first_byte) (TTFB)\n- [First Contentful Paint](https://developer.mozilla.org/en-US/docs/Glossary/First_contentful_paint) (FCP)\n- [Largest Contentful Paint](https://web.dev/lcp/) (LCP)\n- [First Input Delay](https://web.dev/fid/) (FID)\n- [Cumulative Layout Shift](https://web.dev/cls/) (CLS)\n- [Interaction to Next Paint](https://web.dev/inp/) (INP) _(experimental)_\n\nYou can handle all the results of these metrics using the `web-vital` label:\n\n```js\nexport function reportWebVitals(metric) {\n  if (metric.label === 'web-vital') {\n    console.log(metric) // The metric object ({ id, name, startTime, value, label }) is logged to the console\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":47,"to":66}}}}],["151",{"pageContent":"There's also the option of handling each of the metrics separately:\n\n```js\nexport function reportWebVitals(metric) {\n  switch (metric.name) {\n    case 'FCP':\n      // handle FCP results\n      break\n    case 'LCP':\n      // handle LCP results\n      break\n    case 'CLS':\n      // handle CLS results\n      break\n    case 'FID':\n      // handle FID results\n      break\n    case 'TTFB':\n      // handle TTFB results\n      break\n    case 'INP':\n      // handle INP results (note: INP is still an experimental metric)\n      break\n    default:\n      break\n  }\n}\n```\n\nA third-party library, [web-vitals](https://github.com/GoogleChrome/web-vitals), is used to measure\nthese metrics. Browser compatibility depends on the particular metric, so refer to the [Browser\nSupport](https://github.com/GoogleChrome/web-vitals#browser-support) section to find out which\nbrowsers are supported.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":69,"to":101}}}}],["152",{"pageContent":"Custom metrics\n\nIn addition to the core metrics listed above, there are some additional custom metrics that\nmeasure the time it takes for the page to hydrate and render:\n\n- `Next.js-hydration`: Length of time it takes for the page to start and finish hydrating (in ms)\n- `Next.js-route-change-to-render`: Length of time it takes for a page to start rendering after a\n  route change (in ms)\n- `Next.js-render`: Length of time it takes for a page to finish render after a route change (in ms)\n\nYou can handle all the results of these metrics using the `custom` label:\n\n```js\nexport function reportWebVitals(metric) {\n  if (metric.label === 'custom') {\n    console.log(metric) // The metric object ({ id, name, startTime, value, label }) is logged to the console\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":103,"to":120}}}}],["153",{"pageContent":"There's also the option of handling each of the metrics separately:\n\n```js\nexport function reportWebVitals(metric) {\n  switch (metric.name) {\n    case 'Next.js-hydration':\n      // handle hydration results\n      break\n    case 'Next.js-route-change-to-render':\n      // handle route-change to render results\n      break\n    case 'Next.js-render':\n      // handle render results\n      break\n    default:\n      break\n  }\n}\n```\n\nThese metrics work in all browsers that support the [User Timing API](https://caniuse.com/#feat=user-timing).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":123,"to":143}}}}],["154",{"pageContent":"Sending results to analytics\n\nWith the relay function, you can send any of results to an analytics endpoint to measure and track\nreal user performance on your site. For example:\n\n```js\nexport function reportWebVitals(metric) {\n  const body = JSON.stringify(metric)\n  const url = 'https://example.com/analytics'\n\n  // Use `navigator.sendBeacon()` if available, falling back to `fetch()`.\n  if (navigator.sendBeacon) {\n    navigator.sendBeacon(url, body)\n  } else {\n    fetch(url, { body, method: 'POST', keepalive: true })\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":145,"to":161}}}}],["155",{"pageContent":"> **Note**: If you use [Google Analytics](https://analytics.google.com/analytics/web/), using the\n> `id` value can allow you to construct metric distributions manually (to calculate percentiles,\n> etc.)\n>\n> ```js\n> export function reportWebVitals({ id, name, label, value }) {\n>   // Use `window.gtag` if you initialized Google Analytics as this example:\n>   // https://github.com/vercel/next.js/blob/canary/examples/with-google-analytics/pages/_app.js\n>   window.gtag('event', name, {\n>     event_category:\n>       label === 'web-vital' ? 'Web Vitals' : 'Next.js custom metric',\n>     value: Math.round(name === 'CLS' ? value * 1000 : value), // values must be integers\n>     event_label: id, // id unique to current page load\n>     non_interaction: true, // avoids affecting bounce rate.\n>   })\n> }\n> ```\n>\n> Read more about [sending results to Google Analytics](https://github.com/GoogleChrome/web-vitals#send-the-results-to-google-analytics).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":164,"to":182}}}}],["156",{"pageContent":"Web Vitals Attribution\n\nWhen debugging issues related to Web Vitals, it is often helpful if we can pinpoint the source of the problem.\nFor example, in the case of Cumulative Layout Shift (CLS), we might want to know the first element that shifted when the single largest layout shift occurred.\nOr, in the case of Largest Contentful Paint (LCP), we might want to identify the element corresponding to the LCP for the page.\nIf the LCP element is an image, knowing the URL of the image resource can help us locate the asset we need to optimize.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":184,"to":189}}}}],["157",{"pageContent":"Pinpointing the biggest contributor to the Web Vitals score, aka [attribution](https://github.com/GoogleChrome/web-vitals/blob/4ca38ae64b8d1e899028c692f94d4c56acfc996c/README.md#attribution),\nallows us to obtain more in-depth information like entries for [PerformanceEventTiming](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceEventTiming), [PerformanceNavigationTiming](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigationTiming) and [PerformanceResourceTiming](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming).\n\nAttribution is disabled by default in Next.js but can be enabled **per metric** by specifying the following in `next.config.js`.\n\n```js\n// next.config.js\nexperimental: {\n  webVitalsAttribution: ['CLS', 'LCP']\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":191,"to":200}}}}],["158",{"pageContent":"Valid attribution values are all `web-vitals` metrics specified in the [`NextWebVitalsMetric`](https://github.com/vercel/next.js/blob/442378d21dd56d6e769863eb8c2cb521a463a2e0/packages/next/shared/lib/utils.ts#L43) type.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":203,"to":203}}}}],["159",{"pageContent":"TypeScript\n\nIf you are using TypeScript, you can use the built-in type `NextWebVitalsMetric`:\n\n```ts\n// pages/_app.tsx\n\nimport type { AppProps, NextWebVitalsMetric } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return <Component {...pageProps} />\n}\n\nexport function reportWebVitals(metric: NextWebVitalsMetric) {\n  console.log(metric)\n}\n\nexport default MyApp\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/measuring-performance.md","loc":{"lines":{"from":205,"to":223}}}}],["160",{"pageContent":"---\ndescription: Learn how to use Middleware to run code before a request is completed.\n---\n\n# Middleware\n\n<details open>\n<summary><b>Version History</b></summary>\n\n| Version   | Changes                                                                                    |\n| --------- | ------------------------------------------------------------------------------------------ |\n| `v13.1.0` | Advanced Middleware flags added                                                            |\n| `v13.0.0` | Middleware can modify request headers, response headers, and send responses                |\n| `v12.2.0` | Middleware is stable                                                                       |\n| `v12.0.9` | Enforce absolute URLs in Edge Runtime ([PR](https://github.com/vercel/next.js/pull/33410)) |\n| `v12.0.0` | Middleware (Beta) added                                                                    |\n\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":1,"to":18}}}}],["161",{"pageContent":"</details>\n\nMiddleware allows you to run code before a request is completed, then based on the incoming request, you can modify the response by rewriting, redirecting, modifying the request or response headers, or responding directly.\n\nMiddleware runs _before_ cached content, so you can personalize static files and pages. Common examples of Middleware would be authentication, A/B testing, localized pages, bot protection, and more. Regarding localized pages, you can start with [i18n routing](/docs/advanced-features/i18n-routing) and implement Middleware for more advanced use cases.\n\n> **Note:** If you were using Middleware prior to `12.2`, please see the [upgrade guide](https://nextjs.org/docs/messages/middleware-upgrade-guide).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":18,"to":24}}}}],["162",{"pageContent":"Using Middleware\n\nTo begin using Middleware, follow the steps below:\n\n1. Install the latest version of Next.js:\n\n```bash\nnpm install next@latest\n```\n\n2. Create a `middleware.ts` (or `.js`) file at the same level as your `pages` (in the root or `src` directory)\n3. Export a middleware function from the `middleware.ts` file:\n\n```typescript\n// middleware.ts\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\n// This function can be marked `async` if using `await` inside\nexport function middleware(request: NextRequest) {\n  return NextResponse.redirect(new URL('/about-2', request.url))\n}\n\n// See \"Matching Paths\" below to learn more\nexport const config = {\n  matcher: '/about/:path*',\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":26,"to":53}}}}],["163",{"pageContent":"Matching Paths\n\nMiddleware will be invoked for **every route in your project**. The following is the execution order:\n\n1. `headers` from `next.config.js`\n2. `redirects` from `next.config.js`\n3. Middleware (`rewrites`, `redirects`, etc.)\n4. `beforeFiles` (`rewrites`) from `next.config.js`\n5. Filesystem routes (`public/`, `_next/static/`, Pages, etc.)\n6. `afterFiles` (`rewrites`) from `next.config.js`\n7. Dynamic Routes (`/blog/[slug]`)\n8. `fallback` (`rewrites`) from `next.config.js`\n\nThere are two ways to define which paths Middleware will run on:\n\n1. Custom matcher config\n2. Conditional statements","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":55,"to":71}}}}],["164",{"pageContent":"Matcher\n\n`matcher` allows you to filter Middleware to run on specific paths.\n\n```js\nexport const config = {\n  matcher: '/about/:path*',\n}\n```\n\nYou can match a single path or multiple paths with an array syntax:\n\n```js\nexport const config = {\n  matcher: ['/about/:path*', '/dashboard/:path*'],\n}\n```\n\nThe `matcher` config allows full regex so matching like negative lookaheads or character matching is supported. An example of a negative lookahead to match all except specific paths can be seen here:\n\n```js\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     */\n    '/((?!api|_next/static|_next/image|favicon.ico).*)',\n  ],\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":73,"to":105}}}}],["165",{"pageContent":"> **Note:** The `matcher` values need to be constants so they can be statically analyzed at build-time. Dynamic values such as variables will be ignored.\n\nConfigured matchers:\n\n1. MUST start with `/`\n2. Can include named parameters: `/about/:path` matches `/about/a` and `/about/b` but not `/about/a/c`\n3. Can have modifiers on named parameters (starting with `:`): `/about/:path*` matches `/about/a/b/c` because `*` is _zero or more_. `?` is _zero or one_ and `+` _one or more_\n4. Can use regular expression enclosed in parenthesis: `/about/(.*)` is the same as `/about/:path*`\n\nRead more details on [path-to-regexp](https://github.com/pillarjs/path-to-regexp#path-to-regexp-1) documentation.\n\n> **Note:** For backward compatibility, Next.js always considers `/public` as `/public/index`. Therefore, a matcher of `/public/:path` will match.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":108,"to":119}}}}],["166",{"pageContent":"Conditional Statements\n\n```typescript\n// middleware.ts\n\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  if (request.nextUrl.pathname.startsWith('/about')) {\n    return NextResponse.rewrite(new URL('/about-2', request.url))\n  }\n\n  if (request.nextUrl.pathname.startsWith('/dashboard')) {\n    return NextResponse.rewrite(new URL('/dashboard/user', request.url))\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":121,"to":138}}}}],["167",{"pageContent":"NextResponse\n\nThe [`NextResponse`](#nextresponse) API allows you to:\n\n- `redirect` the incoming request to a different URL\n- `rewrite` the response by displaying a given URL\n- Set request headers for API Routes, `getServerSideProps`, and `rewrite` destinations\n- Set response cookies\n- Set response headers\n\nTo produce a response from Middleware, you can:\n\n1. `rewrite` to a route ([Page](/docs/basic-features/pages.md) or [Edge API Route](/docs/api-routes/edge-api-routes.md)) that produces a response\n2. return a `NextResponse` directly. See [Producing a Response](/docs/advanced-features/middleware#producing-a-response)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":140,"to":153}}}}],["168",{"pageContent":"Using Cookies\n\nCookies are regular headers. On a `Request`, they are stored in the `Cookie` header. On a `Response` they are in the `Set-Cookie` header. Next.js provides a convenient way to access and manipulate these cookies through the `cookies` extension on `NextRequest` and `NextResponse`.\n\n1. For incoming requests, `cookies` comes with the following methods: `get`, `getAll`, `set`, and `delete` cookies. You can check for the existence of a cookie with `has` or remove all cookies with `clear`.\n2. For outgoing responses, `cookies` have the following methods `get`, `getAll`, `set`, and `delete`.\n\n```typescript\n// middleware.ts\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":155,"to":165}}}}],["169",{"pageContent":"```typescript\n// middleware.ts\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  // Assume a \"Cookie:nextjs=fast\" header to be present on the incoming request\n  // Getting cookies from the request using the `RequestCookies` API\n  let cookie = request.cookies.get('nextjs')?.value\n  console.log(cookie) // => 'fast'\n  const allCookies = request.cookies.getAll()\n  console.log(allCookies) // => [{ name: 'nextjs', value: 'fast' }]\n\n  request.cookies.has('nextjs') // => true\n  request.cookies.delete('nextjs')\n  request.cookies.has('nextjs') // => false","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":165,"to":180}}}}],["170",{"pageContent":"request.cookies.has('nextjs') // => true\n  request.cookies.delete('nextjs')\n  request.cookies.has('nextjs') // => false\n\n  // Setting cookies on the response using the `ResponseCookies` API\n  const response = NextResponse.next()\n  response.cookies.set('vercel', 'fast')\n  response.cookies.set({\n    name: 'vercel',\n    value: 'fast',\n    path: '/test',\n  })\n  cookie = response.cookies.get('vercel')\n  console.log(cookie) // => { name: 'vercel', value: 'fast', Path: '/test' }\n  // The outgoing response will have a `Set-Cookie:vercel=fast;path=/test` header.\n\n  return response\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":180,"to":198}}}}],["171",{"pageContent":"Setting Headers\n\nYou can set request and response headers using the `NextResponse` API (setting _request_ headers is available since Next.js v13.0.0).\n\n```ts\n// middleware.ts\n\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  // Clone the request headers and set a new header `x-hello-from-middleware1`\n  const requestHeaders = new Headers(request.headers)\n  requestHeaders.set('x-hello-from-middleware1', 'hello')\n\n  // You can also set request headers in NextResponse.rewrite\n  const response = NextResponse.next({\n    request: {\n      // New request headers\n      headers: requestHeaders,\n    },\n  })\n\n  // Set a new response header `x-hello-from-middleware2`\n  response.headers.set('x-hello-from-middleware2', 'hello')\n  return response\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":200,"to":226}}}}],["172",{"pageContent":"> **Note:** Avoid setting large headers as it might cause [431 Request Header Fields Too Large](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/431) error depending on your backend web server configuration.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":229,"to":229}}}}],["173",{"pageContent":"Producing a Response\n\nYou can respond from Middleware directly by returning a `Response` or `NextResponse` instance. (This is available since [Next.js v13.1.0](https://nextjs.org/blog/next-13-1#nextjs-advanced-middleware))\n\n```ts\n// middleware.ts\nimport { NextRequest, NextResponse } from 'next/server'\nimport { isAuthenticated } from '@lib/auth'\n\n// Limit the middleware to paths starting with `/api/`\nexport const config = {\n  matcher: '/api/:function*',\n}\n\nexport function middleware(request: NextRequest) {\n  // Call our authentication function to check the request\n  if (!isAuthenticated(request)) {\n    // Respond with JSON indicating an error message\n    return new NextResponse(\n      JSON.stringify({ success: false, message: 'authentication failed' }),\n      { status: 401, headers: { 'content-type': 'application/json' } }\n    )\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":231,"to":255}}}}],["174",{"pageContent":"Advanced Middleware Flags\n\nIn `v13.1` of Next.js two additional flags were introduced for middleware, `skipMiddlewareUrlNormalize` and `skipTrailingSlashRedirect` to handle advanced use cases.\n\n`skipTrailingSlashRedirect` allows disabling Next.js default redirects for adding or removing trailing slashes allowing custom handling inside middleware which can allow maintaining the trailing slash for some paths but not others allowing easier incremental migrations.\n\n```js\n// next.config.js\nmodule.exports = {\n  skipTrailingSlashRedirect: true,\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":257,"to":267}}}}],["175",{"pageContent":"```js\n// middleware.js\n\nconst legacyPrefixes = ['/docs', '/blog']\n\nexport default async function middleware(req) {\n  const { pathname } = req.nextUrl\n\n  if (legacyPrefixes.some((prefix) => pathname.startsWith(prefix))) {\n    return NextResponse.next()\n  }\n\n  // apply trailing slash handling\n  if (\n    !pathname.endsWith('/') &&\n    !pathname.match(/((?!\\.well-known(?:\\/.*)?)(?:[^/]+\\/)*[^/]+\\.\\w+)/)\n  ) {\n    req.nextUrl.pathname += '/'\n    return NextResponse.redirect(req.nextUrl)\n  }\n}\n```\n\n`skipMiddlewareUrlNormalize` allows disabling the URL normalizing Next.js does to make handling direct visits and client-transitions the same. There are some advanced cases where you need full control using the original URL which this unlocks.\n\n```js\n// next.config.js\n\nmodule.exports = {\n  skipMiddlewareUrlNormalize: true,\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":270,"to":300}}}}],["176",{"pageContent":"```js\n// middleware.js\n\nexport default async function middleware(req) {\n  const { pathname } = req.nextUrl\n\n  // GET /_next/data/build-id/hello.json\n\n  console.log(pathname)\n  // with the flag this now /_next/data/build-id/hello.json\n  // without the flag this would be normalized to /hello\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":303,"to":315}}}}],["177",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/edge-runtime.md\">\n    <b>Edge Runtime</b>\n    <small>Learn more about the supported Web APIs available.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/server.md\">\n    <b>Middleware API Reference</b>\n    <small>Learn more about the supported APIs for Middleware.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-routes/edge-api-routes.md\">\n    <b>Edge API Routes</b>\n    <small>Build high performance APIs in Next.js. </small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/middleware.md","loc":{"lines":{"from":317,"to":338}}}}],["178",{"pageContent":"---\ndescription: Configure module path aliases that allow you to remap certain import paths.\n---\n\n# Absolute Imports and Module path aliases\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-absolute-imports\">Absolute Imports and Aliases</a></li>\n  </ul>\n</details>\n\nNext.js automatically supports the `tsconfig.json` and `jsconfig.json` `\"paths\"` and `\"baseUrl\"` options since [Next.js 9.4](https://nextjs.org/blog/next-9-4).\n\n> Note: `jsconfig.json` can be used when you don't use TypeScript\n\n> Note: you need to restart dev server to reflect modifications done in `tsconfig.json` / `jsconfig.json`\n\nThese options allow you to configure module aliases, for example a common pattern is aliasing certain directories to use absolute paths.\n\nOne useful feature of these options is that they integrate automatically into certain editors, for example vscode.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/module-path-aliases.md","loc":{"lines":{"from":1,"to":22}}}}],["179",{"pageContent":"One useful feature of these options is that they integrate automatically into certain editors, for example vscode.\n\nThe `baseUrl` configuration option allows you to import directly from the root of the project.\n\nAn example of this configuration:\n\n```json\n// tsconfig.json or jsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\"\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/module-path-aliases.md","loc":{"lines":{"from":22,"to":34}}}}],["180",{"pageContent":"```jsx\n// components/button.js\nexport default function Button() {\n  return <button>Click me</button>\n}\n```\n\n```jsx\n// pages/index.js\nimport Button from 'components/button'\n\nexport default function HomePage() {\n  return (\n    <>\n      <h1>Hello World</h1>\n      <Button />\n    </>\n  )\n}\n```\n\nWhile `baseUrl` is useful you might want to add other aliases that don't match 1 on 1. For this TypeScript has the `\"paths\"` option.\n\nUsing `\"paths\"` allows you to configure module aliases. For example `@/components/*` to `components/*`.\n\nAn example of this configuration:\n\n```json\n// tsconfig.json or jsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/components/*\": [\"components/*\"]\n    }\n  }\n}\n```\n\n```jsx\n// components/button.js\nexport default function Button() {\n  return <button>Click me</button>\n}\n```\n\n```jsx\n// pages/index.js\nimport Button from '@/components/button'\n\nexport default function HomePage() {\n  return (\n    <>\n      <h1>Hello World</h1>\n      <Button />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/module-path-aliases.md","loc":{"lines":{"from":37,"to":95}}}}],["181",{"pageContent":"# Multi Zones\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\">With Zones</a></li>\n  </ul>\n</details>\n\nA zone is a single deployment of a Next.js app. You can have multiple zones and merge them as a single app.\n\nFor example, let's say you have the following apps:\n\n- An app for serving `/blog/**`\n- Another app for serving all other pages\n\nWith multi zones support, you can merge both these apps into a single one allowing your customers to browse it using a single URL, but you can develop and deploy both apps independently.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/multi-zones.md","loc":{"lines":{"from":1,"to":17}}}}],["182",{"pageContent":"How to define a zone\n\nThere are no zone related APIs. You only need to do the following:\n\n- Make sure to keep only the pages you need in your app, meaning that an app can't have pages from another app, if app `A` has `/blog` then app `B` shouldn't have it too.\n- Make sure to configure a [basePath](/docs/api-reference/next.config.js/basepath.md) to avoid conflicts with pages and static files.\n\n## How to merge zones\n\nYou can merge zones using [`rewrites`](/docs/api-reference/next.config.js/rewrites.md) in one of the apps or any HTTP proxy.\n\nFor [Next.js on Vercel](https://vercel.com?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) applications, you can use a [monorepo](https://vercel.com/blog/monorepos-are-changing-how-teams-build-software?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) to deploy both apps with a single `git push`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/multi-zones.md","loc":{"lines":{"from":19,"to":30}}}}],["183",{"pageContent":"---\ndescription: Learn how to instrument your Next.js app with OpenTelemetry.\n---\n\n> **Note**: This feature is experimental, you need to explicitly opt-in by providing `experimental.instrumentationHook = true;` in your `next.config.js`.\n\n# OpenTelemetry in Next.js\n\nObservability is crucial for understanding and optimizing the behavior and performance of your Next.js app.\n\nAs applications become more complex, it becomes increasingly difficult to identify and diagnose issues that may arise. By leveraging observability tools, such as logging and metrics, developers can gain insights into their application's behavior and identify areas for optimization. With observability, developers can proactively address issues before they become major problems and provide a better user experience. Therefore, it is highly recommended to use observability in your Next.js applications to improve performance, optimize resources, and enhance user experience.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":1,"to":11}}}}],["184",{"pageContent":"We recommend using OpenTelemetry for instrumenting your apps.\nIt's a platform-agnostic way to instrument apps that allows you to change your observability provider without changing your code.\nRead [Official OpenTelemetry docs](https://opentelemetry.io/docs/) for more information about OpenTelemetry and how it works.\n\nThis documentation uses terms like _Span_, _Trace_ or _Exporter_ throughout this doc, all of which can be found in [the OpenTelemetry Observability Primer](https://opentelemetry.io/docs/concepts/observability-primer/).\n\nNext.js supports OpenTelemetry instrumentation out of the box, which means that we already instrumented Next.js itself.\nWhen you enable OpenTelemetry we will automatically wrap all your code like `getStaticProps` in _spans_ with helpful attributes.\n\n> **Note:** We currently support OpenTelemetry bindings only in serverless functions.\n> We don't provide any for `edge` or client side code.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":13,"to":23}}}}],["185",{"pageContent":"Getting Started\n\nOpenTelemetry is extensible but setting it up properly can be quite verbose.\nThat's why we prepared a package `@vercel/otel` that helps you get started quickly.\nIt's not extensible and you should configure OpenTelemetry manually you need to customize your setup.\n\n### Using `@vercel/otel`\n\nTo get started, you must install `@vercel/otel`:\n\n```bash\nnpm install @vercel/otel\n```\n\nNext, create a custom [`instrumentation.ts`](https://nextjs.org/docs/advanced-features/instrumentation) file in the root of the project:\n\n```ts\n// instrumentation.ts\nimport { registerOTel } from '@vercel/otel'\n\nexport function register() {\n  registerOTel('next-app')\n}\n```\n\n> **Note**: We have created a basic [with-opentelemetry](https://github.com/vercel/next.js/tree/canary/examples/with-opentelemetry) example that you can use.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":25,"to":50}}}}],["186",{"pageContent":"Manual OpenTelemetry configuration\n\nIf our wrapper `@vercel/otel` doesn't suit your needs, you can configure OpenTelemetry manually.\n\nFirstly you need to install OpenTelemetry packages:\n\n```bash\nnpm install @opentelemetry/sdk-node @opentelemetry/resources @opentelemetry/semantic-conventions @opentelemetry/sdk-trace-base @opentelemetry/exporter-trace-otlp-http\n`\n```\n\nNow you can initialize `NodeSDK` in your `instrumentation.ts`.\nOpenTelemetry APIs are not compatible with edge runtime, so you need to make sure that you are importing them only when `process.env.NEXT_RUNTIME === 'nodejs'`. Conditionally importing with an `require` doesn't play well with typescript. We recommend using a conditionally `require`ing new file `instrumentation.node.ts` which can use normal `import`s:\n\n```ts\n// instrumentation.ts\nexport function register() {\n  if (process.env.NEXT_RUNTIME === 'nodejs') {\n    require('./instrumentation.node.ts')\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":52,"to":72}}}}],["187",{"pageContent":"```ts\n// instrumentation.node.ts\nimport { trace, context } from '@opentelemetry/api'\nimport { NodeSDK } from '@opentelemetry/sdk-node'\nimport { OTLPTraceExporter } from '@opentelemetry/exporter-trace-otlp-http'\nimport { Resource } from '@opentelemetry/resources'\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions'\nimport { SimpleSpanProcessor } from '@opentelemetry/sdk-trace-node'\n\nconst sdk = new NodeSDK({\n  resource: new Resource({\n    [SemanticResourceAttributes.SERVICE_NAME]: 'next-app',\n  }),\n  spanProcessor: new SimpleSpanProcessor(new OTLPTraceExporter()),\n})\nsdk.start()\n```\n\nDoing this is equivalent to using `@vercel/otel`, but it's possible to modify and extend.\nFor example, you could use `@opentelemetry/exporter-trace-otlp-grpc` instead of `@opentelemetry/exporter-trace-otlp-http`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":75,"to":94}}}}],["188",{"pageContent":"Testing your instrumentation\n\nYou need an OpenTelemetry collector with a compatible backend to test OpenTelemetry traces locally.\nWe recommend using our [OpenTelemetry dev environment](https://github.com/vercel/opentelemetry-collector-dev-setup).\n\nIf everything works well you should be able to see the root server span labeled as `GET /requested/pathname`.\nAll other spans from that particular trace will be nested under it.\n\nNext.js traces more spans than are emitted by default.\nTo see more spans, you must set `NEXT_OTEL_VERBOSE=1`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":96,"to":105}}}}],["189",{"pageContent":"Deployment","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":107,"to":107}}}}],["190",{"pageContent":"Using OpenTelemetry Collector\n\nWhen you are deploying with OpenTelemetry Collector, you can use `@vercel/otel`.\nIt will work both on Vercel and when self-hosted.\n\n#### Deploying on Vercel\n\nWe made sure that OpenTelemetry works out of the box on Vercel.\n\nFollow [Vercel documentation](https://vercel.com/docs/concepts/observability/otel-overview/quickstart) to connect your project to an observability provider.\n\n#### Self-hosting\n\nDeploying to other platforms is also straightforward. You will need to spin up your own OpenTelemetry Collector to receive and process the telemetry data from your Next.js app.\n\nTo do this, follow the [OpenTelemetry Collector Getting Started guide](https://opentelemetry.io/docs/collector/getting-started/), which will walk you through setting up the collector and configuring it to receive data from your Next.js app.\n\nOnce you have your collector up and running, you can deploy your Next.js app to your chosen platform following their respective deployment guides.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":109,"to":126}}}}],["191",{"pageContent":"Custom Exporters\n\nWe recommend using OpenTelemetry Collector.\nIf that is not possible on your platform, you can use a custom OpenTelemetry exporter with [manual OpenTelemetry configuration](https://nextjs.org/docs/advanced-features/open-telemetry#manual-opentelemetry-configuration)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":128,"to":131}}}}],["192",{"pageContent":"Custom Spans\n\nYou can add a custom span with [OpenTelemetry APIs](https://opentelemetry.io/docs/instrumentation/js/instrumentation).\n\n```bash\nnpm install @opentelemetry/api\n```\n\nThe following example demonstrates a function that fetches GitHub stars and adds a custom `fetchGithubStars` span to track the fetch request's result:\n\n```ts\nimport { trace } from '@opentelemetry/api'\n\nexport async function fetchGithubStars() {\n  return await trace\n    .getTracer('nextjs-example')\n    .startActiveSpan('fetchGithubStars', async (span) => {\n      try {\n        return await getValue()\n      } finally {\n        span.end()\n      }\n    })\n}\n```\n\nThe `register` function will execute before your code runs in a new environment.\nYou can start creating new spans, and they should be correctly added to the exported trace.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":133,"to":160}}}}],["193",{"pageContent":"Default Spans in Next.js\n\nNext.js automatically instruments several spans for you to provide useful insights into your application's performance.\n\nAttributes on spans follow [OpenTelemetry semantic conventions](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/). We also add some custom attributes under the `next` namespace:\n\n- `next.span_name` - duplicates span name\n- `next.span_type` - each span type has a unique identifier\n- `next.route` - The route pattern of the request (e.g., `/[param]/user`).\n- `next.page`\n  - This is an internal value used by an app router.\n  - You can think about it as a route to a special file (like `page.ts`, `layout.ts`, `loading.ts` and others)\n  - It can be used as a unique identifier only when paired with `next.route` because `/layout` can be used to identify both `/(groupA)/layout.ts` and `/(groupB)/layout.ts`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":162,"to":174}}}}],["194",{"pageContent":"`[http.method] [next.route]`\n\n- `next.span_type`: `BaseServer.handleRequest`\n\nThis span represents the root span for each incoming request to your Next.js application. It tracks the HTTP method, route, target, and status code of the request.\n\nAttributes:\n\n- [Common HTTP attributes](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/http/#common-attributes)\n  - `http.method`\n  - `http.status_code`\n- [Server HTTP attributes](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/http/#http-server-semantic-conventions)\n  - `http.route`\n  - `http.target`\n- `next.span_name`\n- `next.span_type`\n- `next.route`\n\n### `render route (app) [next.route]`\n\n- `next.span_type`: `AppRender.getBodyResult`.\n\nThis span represents the process of rendering a route in the app router.\n\nAttributes:\n\n- `next.span_name`\n- `next.span_type`\n- `next.route`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":176,"to":204}}}}],["195",{"pageContent":"`fetch [http.method] [http.url]`\n\n- `next.span_type`: `AppRender.fetch`\n\nThis span represents the fetch request executed in your code.\n\nAttributes:\n\n- [Common HTTP attributes](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/http/#common-attributes)\n  - `http.method`\n- [Client HTTP attributes](https://opentelemetry.io/docs/reference/specification/trace/semantic_conventions/http/#http-client)\n  - `http.url`\n  - `net.peer.name`\n  - `net.peer.port` (only if specified)\n- `next.span_name`\n- `next.span_type`\n\n### `executing api route (app) [next.route]`\n\n- `next.span_type`: `AppRouteRouteHandlers.runHandler`.\n\nThis span represents the execution of an API route handler in the app router.\n\nAttributes:\n\n- `next.span_name`\n- `next.span_type`\n- `next.route`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":206,"to":233}}}}],["196",{"pageContent":"`getServerSideProps [next.route]`\n\n- `next.span_type`: `Render.getServerSideProps`.\n\nThis span represents the execution of `getServerSideProps` for a specific route.\n\nAttributes:\n\n- `next.span_name`\n- `next.span_type`\n- `next.route`\n\n### `getStaticProps [next.route]`\n\n- `next.span_type`: `Render.getStaticProps`.\n\nThis span represents the execution of `getStaticProps` for a specific route.\n\nAttributes:\n\n- `next.span_name`\n- `next.span_type`\n- `next.route`\n\n### `render route (pages) [next.route]`\n\n- `next.span_type`: `Render.renderDocument`.\n\nThis span represents the process of rendering the document for a specific route.\n\nAttributes:\n\n- `next.span_name`\n- `next.span_type`\n- `next.route`\n\n### `generateMetadata [next.page]`\n\n- `next.span_type`: `ResolveMetadata.generateMetadata`.\n\nThis span represents the process of generating metadata for a specific page (a single route can have multiple of these spans).\n\nAttributes:\n\n- `next.span_name`\n- `next.span_type`\n- `next.page`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/open-telemetry.md","loc":{"lines":{"from":235,"to":281}}}}],["197",{"pageContent":"---\ndescription: Next.js automatically traces which files are needed by each page to allow for easy deployment of your application. Learn how it works here.\n---\n\n# Output File Tracing\n\nDuring a build, Next.js will automatically trace each page and its dependencies to determine all of the files that are needed for deploying a production version of your application.\n\nThis feature helps reduce the size of deployments drastically. Previously, when deploying with Docker you would need to have all files from your package's `dependencies` installed to run `next start`. Starting with Next.js 12, you can leverage Output File Tracing in the `.next/` directory to only include the necessary files.\n\nFurthermore, this removes the need for the deprecated `serverless` target which can cause various issues and also creates unnecessary duplication.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":1,"to":11}}}}],["198",{"pageContent":"How It Works\n\nDuring `next build`, Next.js will use [`@vercel/nft`](https://github.com/vercel/nft) to statically analyze `import`, `require`, and `fs` usage to determine all files that a page might load.\n\nNext.js' production server is also traced for its needed files and output at `.next/next-server.js.nft.json` which can be leveraged in production.\n\nTo leverage the `.nft.json` files emitted to the `.next` output directory, you can read the list of files in each trace that are relative to the `.nft.json` file and then copy them to your deployment location.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":13,"to":19}}}}],["199",{"pageContent":"Automatically Copying Traced Files\n\nNext.js can automatically create a `standalone` folder that copies only the necessary files for a production deployment including select files in `node_modules`.\n\nTo leverage this automatic copying you can enable it in your `next.config.js`:\n\n```js\nmodule.exports = {\n  output: 'standalone',\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":21,"to":30}}}}],["200",{"pageContent":"This will create a folder at `.next/standalone` which can then be deployed on its own without installing `node_modules`.\n\nAdditionally, a minimal `server.js` file is also output which can be used instead of `next start`. This minimal server does not copy the `public` or `.next/static` folders by default as these should ideally be handled by a CDN instead, although these folders can be copied to the `standalone/public` and `standalone/.next/static` folders manually, after which `server.js` file will serve these automatically.\n\nNote: `next.config.js` is read during `next build` and serialized into the `server.js` output file. If the legacy [`serverRuntimeConfig` or `publicRuntimeConfig` options](/docs/api-reference/next.config.js/runtime-configuration.md) are being used, the values will be specific to values at build time.\n\nIf your project uses [Image Optimization](/docs/basic-features/image-optimization.md) with the default `loader`, you must install `sharp` as a dependency:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":33,"to":39}}}}],["201",{"pageContent":"If your project uses [Image Optimization](/docs/basic-features/image-optimization.md) with the default `loader`, you must install `sharp` as a dependency:\n\n```bash\nnpm i sharp","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":39,"to":42}}}}],["202",{"pageContent":"```bash\nyarn add sharp\n```\n\n```bash\npnpm add sharp\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":45,"to":51}}}}],["203",{"pageContent":"Caveats\n\n- While tracing in monorepo setups, the project directory is used for tracing by default. For `next build packages/web-app`, `packages/web-app` would be the tracing root and any files outside of that folder will not be included. To include files outside of this folder you can set `experimental.outputFileTracingRoot` in your `next.config.js`.\n\n```js\n// packages/web-app/next.config.js\nmodule.exports = {\n  experimental: {\n    // this includes files from the monorepo base two directories up\n    outputFileTracingRoot: path.join(__dirname, '../../'),\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":53,"to":64}}}}],["204",{"pageContent":"- There are some cases in which Next.js might fail to include required files, or might incorrectly include unused files. In those cases, you can leverage `experimental.outputFileTracingExcludes` and `experimental.outputFileTracingIncludes` respectively in `next.config.js`. Each config accepts an object with [minimatch globs](https://www.npmjs.com/package/minimatch) for the key to match specific pages and a value of an array with globs relative to the project's root to either include or exclude in the trace.\n\n```js\n// next.config.js\n\nmodule.exports = {\n  experimental: {\n    outputFileTracingExcludes: {\n      '/api/hello': ['./un-necessary-folder/**/*'],\n    },\n    outputFileTracingIncludes: {\n      '/api/another': ['./necessary-folder/**/*'],\n    },\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":67,"to":81}}}}],["205",{"pageContent":"- Currently, Next.js does not do anything with the emitted `.nft.json` files. The files must be read by your deployment platform, for example [Vercel](https://vercel.com), to create a minimal deployment. In a future release, a new command is planned to utilize these `.nft.json` files.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":84,"to":84}}}}],["206",{"pageContent":"Experimental `turbotrace`\n\nTracing dependencies can be slow because it requires very complex computations and analysis. We created `turbotrace` in Rust as a faster and smarter alternative to the JavaScript implementation.\n\nTo enable it, you can add the following configuration to your `next.config.js`:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":86,"to":90}}}}],["207",{"pageContent":"```js\n// next.config.js\nmodule.exports = {\n  experimental: {\n    turbotrace: {\n      // control the log level of the turbotrace, default is `error`\n      logLevel?:\n      | 'bug'\n      | 'fatal'\n      | 'error'\n      | 'warning'\n      | 'hint'\n      | 'note'\n      | 'suggestions'\n      | 'info',\n      // control if the log of turbotrace should contain the details of the analysis, default is `false`\n      logDetail?: boolean\n      // show all log messages without limit\n      // turbotrace only show 1 log message for each categories by default\n      logAll?: boolean\n      // control the context directory of the turbotrace\n      // files outside of the context directory will not be traced\n      // set the `experimental.outputFileTracingRoot` has the same effect\n      // if the `experimental.outputFileTracingRoot` and this option are both set, the `experimental.turbotrace.contextDirectory` will be used\n      contextDirectory?: string","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":92,"to":116}}}}],["208",{"pageContent":"// if the `experimental.outputFileTracingRoot` and this option are both set, the `experimental.turbotrace.contextDirectory` will be used\n      contextDirectory?: string\n      // if there is `process.cwd()` expression in your code, you can set this option to tell `turbotrace` the value of `process.cwd()` while tracing.\n      // for example the require(process.cwd() + '/package.json') will be traced as require('/path/to/cwd/package.json')\n      processCwd?: string\n      // control the maximum memory usage of the `turbotrace`, in `MB`, default is `6000`.\n      memoryLimit?: number\n    },\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/output-file-tracing.md","loc":{"lines":{"from":116,"to":126}}}}],["209",{"pageContent":"---\ndescription: Next.js has the preview mode for statically generated pages. You can learn how it works here.\n---\n\n# Preview Mode\n\n> This document is for Next.js versions 9.3 and up. If you’re using older versions of Next.js, refer to our [previous documentation](https://nextjs.org/docs/tag/v9.2.2/basic-features/pages).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":1,"to":7}}}}],["210",{"pageContent":"<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-wordpress\">WordPress Example</a> (<a href=\"https://next-blog-wordpress.vercel.app\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-datocms\">DatoCMS Example</a> (<a href=\"https://next-blog-datocms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-takeshape\">TakeShape Example</a> (<a href=\"https://next-blog-takeshape.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-sanity\">Sanity Example</a> (<a href=\"https://next-blog-sanity.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prismic\">Prismic Example</a> (<a href=\"https://next-blog-prismic.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":9,"to":16}}}}],["211",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prismic\">Prismic Example</a> (<a href=\"https://next-blog-prismic.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-contentful\">Contentful Example</a> (<a href=\"https://next-blog-contentful.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-strapi\">Strapi Example</a> (<a href=\"https://next-blog-strapi.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prepr\">Prepr Example</a> (<a href=\"https://next-blog-prepr.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-agilitycms\">Agility CMS Example</a> (<a href=\"https://next-blog-agilitycms.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":16,"to":20}}}}],["212",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-agilitycms\">Agility CMS Example</a> (<a href=\"https://next-blog-agilitycms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-cosmic\">Cosmic Example</a> (<a href=\"https://next-blog-cosmic.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-buttercms\">ButterCMS Example</a> (<a href=\"https://next-blog-buttercms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-storyblok\">Storyblok Example</a> (<a href=\"https://next-blog-storyblok.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-graphcms\">GraphCMS Example</a> (<a href=\"https://next-blog-graphcms.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":20,"to":24}}}}],["213",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-graphcms\">GraphCMS Example</a> (<a href=\"https://next-blog-graphcms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-kontent\">Kontent Example</a> (<a href=\"https://next-blog-kontent.vercel.app//\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-umbraco-heartcore\">Umbraco Heartcore Example</a> (<a href=\"https://next-blog-umbraco-heartcore.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-plasmic\">Plasmic Example</a> (<a href=\"https://nextjs-plasmic-example.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-enterspeed\">Enterspeed Example</a> (<a href=\"https://next-blog-demo.enterspeed.com/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":24,"to":28}}}}],["214",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-enterspeed\">Enterspeed Example</a> (<a href=\"https://next-blog-demo.enterspeed.com/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-makeswift\">Makeswift Example</a> (<a href=\"https://nextjs-makeswift-example.vercel.app/\">Demo</a>)</li>\n  </ul>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":28,"to":31}}}}],["215",{"pageContent":"In the [Pages documentation](/docs/basic-features/pages.md) and the [Data Fetching documentation](/docs/basic-features/data-fetching/overview.md), we talked about how to pre-render a page at build time (**Static Generation**) using `getStaticProps` and `getStaticPaths`.\n\nStatic Generation is useful when your pages fetch data from a headless CMS. However, it’s not ideal when you’re writing a draft on your headless CMS and want to **preview** the draft immediately on your page. You’d want Next.js to render these pages at **request time** instead of build time and fetch the draft content instead of the published content. You’d want Next.js to bypass Static Generation only for this specific case.\n\nNext.js has a feature called **Preview Mode** which solves this problem. Here are instructions on how to use it.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":33,"to":37}}}}],["216",{"pageContent":"Step 1. Create and access a preview API route\n\n> Take a look at the [API Routes documentation](/docs/api-routes/introduction.md) first if you’re not familiar with Next.js API Routes.\n\nFirst, create a **preview API route**. It can have any name - e.g. `pages/api/preview.js` (or `.ts` if using TypeScript).\n\nIn this API route, you need to call `setPreviewData` on the response object. The argument for `setPreviewData` should be an object, and this can be used by `getStaticProps` (more on this later). For now, we’ll use `{}`.\n\n```js\nexport default function handler(req, res) {\n  // ...\n  res.setPreviewData({})\n  // ...\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":39,"to":52}}}}],["217",{"pageContent":"`res.setPreviewData` sets some **cookies** on the browser which turns on the preview mode. Any requests to Next.js containing these cookies will be considered as the **preview mode**, and the behavior for statically generated pages will change (more on this later).\n\nYou can test this manually by creating an API route like below and accessing it from your browser manually:\n\n```js\n// A simple example for testing it manually from your browser.\n// If this is located at pages/api/preview.js, then\n// open /api/preview from your browser.\nexport default function handler(req, res) {\n  res.setPreviewData({})\n  res.end('Preview mode enabled')\n}\n```\n\nIf you use your browser’s developer tools, you’ll notice that the `__prerender_bypass` and `__next_preview_data` cookies will be set on this request.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":55,"to":69}}}}],["218",{"pageContent":"Securely accessing it from your Headless CMS\n\nIn practice, you’d want to call this API route _securely_ from your headless CMS. The specific steps will vary depending on which headless CMS you’re using, but here are some common steps you could take.\n\nThese steps assume that the headless CMS you’re using supports setting **custom preview URLs**. If it doesn’t, you can still use this method to secure your preview URLs, but you’ll need to construct and access the preview URL manually.\n\n**First**, you should create a **secret token string** using a token generator of your choice. This secret will only be known by your Next.js app and your headless CMS. This secret prevents people who don’t have access to your CMS from accessing preview URLs.\n\n**Second**, if your headless CMS supports setting custom preview URLs, specify the following as the preview URL. (This assumes that your preview API route is located at `pages/api/preview.js`.)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":71,"to":79}}}}],["219",{"pageContent":"**Second**, if your headless CMS supports setting custom preview URLs, specify the following as the preview URL. (This assumes that your preview API route is located at `pages/api/preview.js`.)\n\n```bash\nhttps://<your-site>/api/preview?secret=<token>&slug=<path>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":79,"to":82}}}}],["220",{"pageContent":"- `<your-site>` should be your deployment domain.\n- `<token>` should be replaced with the secret token you generated.\n- `<path>` should be the path for the page that you want to preview. If you want to preview `/posts/foo`, then you should use `&slug=/posts/foo`.\n\nYour headless CMS might allow you to include a variable in the preview URL so that `<path>` can be set dynamically based on the CMS’s data like so: `&slug=/posts/{entry.fields.slug}`\n\n**Finally**, in the preview API route:\n\n- Check that the secret matches and that the `slug` parameter exists (if not, the request should fail).\n-\n- Call `res.setPreviewData`.\n- Then redirect the browser to the path specified by `slug`. (The following example uses a [307 redirect](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/307)).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":85,"to":96}}}}],["221",{"pageContent":"```js\nexport default async (req, res) => {\n  // Check the secret and next parameters\n  // This secret should only be known to this API route and the CMS\n  if (req.query.secret !== 'MY_SECRET_TOKEN' || !req.query.slug) {\n    return res.status(401).json({ message: 'Invalid token' })\n  }\n\n  // Fetch the headless CMS to check if the provided `slug` exists\n  // getPostBySlug would implement the required fetching logic to the headless CMS\n  const post = await getPostBySlug(req.query.slug)\n\n  // If the slug doesn't exist prevent preview mode from being enabled\n  if (!post) {\n    return res.status(401).json({ message: 'Invalid slug' })\n  }\n\n  // Enable Preview Mode by setting the cookies\n  res.setPreviewData({})\n\n  // Redirect to the path from the fetched post\n  // We don't redirect to req.query.slug as that might lead to open redirect vulnerabilities\n  res.redirect(post.slug)\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":98,"to":121}}}}],["222",{"pageContent":"If it succeeds, then the browser will be redirected to the path you want to preview with the preview mode cookies being set.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":124,"to":124}}}}],["223",{"pageContent":"Step 2. Update `getStaticProps`\n\nThe next step is to update `getStaticProps` to support the preview mode.\n\nIf you request a page which has `getStaticProps` with the preview mode cookies set (via `res.setPreviewData`), then `getStaticProps` will be called at **request time** (instead of at build time).\n\nFurthermore, it will be called with a `context` object where:\n\n- `context.preview` will be `true`.\n- `context.previewData` will be the same as the argument used for `setPreviewData`.\n\n```js\nexport async function getStaticProps(context) {\n  // If you request this page with the preview mode cookies set:\n  //\n  // - context.preview will be true\n  // - context.previewData will be the same as\n  //   the argument used for `setPreviewData`.\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":126,"to":144}}}}],["224",{"pageContent":"We used `res.setPreviewData({})` in the preview API route, so `context.previewData` will be `{}`. You can use this to pass session information from the preview API route to `getStaticProps` if necessary.\n\nIf you’re also using `getStaticPaths`, then `context.params` will also be available.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":147,"to":149}}}}],["225",{"pageContent":"Fetch preview data\n\nYou can update `getStaticProps` to fetch different data based on `context.preview` and/or `context.previewData`.\n\nFor example, your headless CMS might have a different API endpoint for draft posts. If so, you can use `context.preview` to modify the API endpoint URL like below:\n\n```js\nexport async function getStaticProps(context) {\n  // If context.preview is true, append \"/preview\" to the API endpoint\n  // to request draft data instead of published data. This will vary\n  // based on which headless CMS you're using.\n  const res = await fetch(`https://.../${context.preview ? 'preview' : ''}`)\n  // ...\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":151,"to":164}}}}],["226",{"pageContent":"That’s it! If you access the preview API route (with `secret` and `slug`) from your headless CMS or manually, you should now be able to see the preview content. And if you update your draft without publishing, you should be able to preview the draft.\n\n```bash\n# Set this as the preview URL on your headless CMS or access manually,\n# and you should be able to see the preview.\nhttps://<your-site>/api/preview?secret=<token>&slug=<path>\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":167,"to":173}}}}],["227",{"pageContent":"More Details\n\n> **Note**: during rendering `next/router` exposes an `isPreview` flag, see the [router object docs](/docs/api-reference/next/router.md#router-object) for more info.\n\n### Specify the Preview Mode duration\n\n`setPreviewData` takes an optional second parameter which should be an options object. It accepts the following keys:\n\n- `maxAge`: Specifies the number (in seconds) for the preview session to last for.\n- `path`: Specifies the path the cookie should be applied under. Defaults to `/` enabling preview mode for all paths.\n\n```js\nsetPreviewData(data, {\n  maxAge: 60 * 60, // The preview mode cookies expire in 1 hour\n  path: '/about', // The preview mode cookies apply to paths with /about\n})\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":175,"to":191}}}}],["228",{"pageContent":"Clear the Preview Mode cookies\n\nBy default, no expiration date is set for Preview Mode cookies, so the preview session ends when the browser is closed.\n\nTo clear the Preview Mode cookies manually, create an API route that calls `clearPreviewData()`:\n\n```js\n// pages/api/clear-preview-mode-cookies.js\n\nexport default function handler(req, res) {\n  res.clearPreviewData({})\n}\n```\n\nThen, send a request to `/api/clear-preview-mode-cookies` to invoke the API Route. If calling this route using [`next/link`](/docs/api-reference/next/link.md), you must pass `prefetch={false}` to prevent calling `clearPreviewData` during link prefetching.\n\nIf a path was specified in the `setPreviewData` call, you must pass the same path to `clearPreviewData`:\n\n```js\n// pages/api/clear-preview-mode-cookies.js\n\nexport default function handler(req, res) {\n  const { path } = req.query\n\n  res.clearPreviewData({ path })\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":193,"to":219}}}}],["229",{"pageContent":"`previewData` size limits\n\nYou can pass an object to `setPreviewData` and have it be available in `getStaticProps`. However, because the data will be stored in a cookie, there’s a size limitation. Currently, preview data is limited to 2KB.\n\n### Works with `getServerSideProps`\n\nThe preview mode works on `getServerSideProps` as well. It will also be available on the `context` object containing `preview` and `previewData`.\n\n### Works with API Routes\n\nAPI Routes will have access to `preview` and `previewData` under the request object. For example:\n\n```js\nexport default function myApiRoute(req, res) {\n  const isPreview = req.preview\n  const previewData = req.previewData\n  // ...\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":221,"to":239}}}}],["230",{"pageContent":"Unique per `next build`\n\nBoth the bypass cookie value and the private key for encrypting the `previewData` change when `next build` is completed.\nThis ensures that the bypass cookie can’t be guessed.\n\n> **Note:** To test Preview Mode locally over HTTP your browser will need to allow third-party cookies and local storage access.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":241,"to":246}}}}],["231",{"pageContent":"Learn more\n\nThe following pages might also be useful.\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/overview.md\">\n    <b>Data Fetching:</b>\n    <small>Learn more about data fetching in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-routes/introduction.md\">\n    <b>API Routes:</b>\n    <small>Learn more about API routes in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/environment-variables.md\">\n    <b>Environment Variables:</b>\n    <small>Learn more about environment variables in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/preview-mode.md","loc":{"lines":{"from":248,"to":271}}}}],["232",{"pageContent":"# React 18\n\nNext.js 13 requires using React 18, unlocking:\n\n- [Streaming SSR](#streaming-ssr)\n- [React Server Components](#react-server-components)\n- [Edge and Node.js Runtimes](#edge-and-nodejs-runtimes)\n- New APIs like `startTransition` and more.\n\n## Streaming SSR\n\nIn Next.js 13, you can start using the `app/` directory (beta) to take advantage of streaming server-rendering. Learn more by reading the `app/` directory (beta) documentation:\n\n- [Streaming and Suspense](https://beta.nextjs.org/docs/data-fetching/streaming-and-suspense)\n- [Instant Loading UI](https://beta.nextjs.org/docs/routing/loading-ui)\n\n[Deploy the `app/` directory example](https://vercel.com/templates/next.js/app-directory) to try Streaming SSR.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/overview.md","loc":{"lines":{"from":1,"to":17}}}}],["233",{"pageContent":"React Server Components\n\nIn Next.js 13, you can start using the `app/` directory (beta) which use Server Components by default. Learn more by reading the `app/` directory (beta) documentation:\n\n- [Rendering Fundamentals](https://beta.nextjs.org/docs/rendering/fundamentals)\n- [Server and Client Components](https://beta.nextjs.org/docs/rendering/server-and-client-components)\n\n[Deploy the `app/` directory example](https://vercel.com/templates/next.js/app-directory) to try Server Components.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/overview.md","loc":{"lines":{"from":19,"to":26}}}}],["234",{"pageContent":"Edge and Node.js Runtimes\n\nNext.js has two **server runtimes** where you can render parts of your application code: the **Node.js Runtime** and the [**Edge Runtime**](/docs/api-reference/edge-runtime.md). Depending on your deployment infrastructure, both runtimes support streaming.\n\nBy default, Next.js uses the Node.js runtime. [Middleware](https://nextjs.org/docs/advanced-features/middleware) and [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes) use the Edge runtime.\n\n[Learn more about the different runtimes](/docs/advanced-features/react-18/switchable-runtime.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/overview.md","loc":{"lines":{"from":28,"to":34}}}}],["235",{"pageContent":"# React Server Components\n\nReact Server Components allow developers to build applications that span the server and client, combining the rich interactivity of client-side apps with the improved performance of traditional server rendering.\n\nIn Next.js 13, you can start using the `app/` directory (beta) which uses Server Components by default. Learn more by reading the `app/` directory (beta) documentation:\n\n- [Rendering Fundamentals](https://beta.nextjs.org/docs/rendering/fundamentals)\n- [Server and Client Components](https://beta.nextjs.org/docs/rendering/server-and-client-components)\n\n[Deploy the `app/` directory example](https://vercel.com/templates/next.js/app-directory) to try Server Components.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/server-components.md","loc":{"lines":{"from":1,"to":10}}}}],["236",{"pageContent":"# Streaming SSR\n\nStreaming allows you to incrementally render parts of your UI to the client.\n\nIn Next.js 13, you can start using the `app/` directory (beta) to take advantage of streaming server-rendering. Learn more by reading the `app/` directory (beta) documentation:\n\n- [Streaming and Suspense](https://beta.nextjs.org/docs/data-fetching/streaming-and-suspense)\n- [Instant Loading UI](https://beta.nextjs.org/docs/routing/loading-ui)\n\n[Deploy the `app/` directory example](https://vercel.com/templates/next.js/app-directory) to try Streaming SSR.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/streaming.md","loc":{"lines":{"from":1,"to":10}}}}],["237",{"pageContent":"---\ndescription: Learn more about the switchable runtimes (Edge and Node.js) in Next.js.\n---\n\n# Edge and Node.js Runtimes\n\nNext.js has two **server runtimes** where you can render parts of your application code: the **Node.js Runtime** and the [**Edge Runtime**](/docs/api-reference/edge-runtime.md). Depending on your deployment infrastructure, both runtimes support streaming.\n\nBy default, Next.js uses the Node.js runtime. [Middleware](https://nextjs.org/docs/advanced-features/middleware) and [Edge API Routes](https://nextjs.org/docs/api-routes/edge-api-routes) use the Edge runtime.\n\n## Page Runtime Option\n\nOn each page, you can optionally export a `runtime` config set to either `'nodejs'` or `'experimental-edge'`:\n\n```jsx\n// pages/index.js\nexport default function Index () { ... }\n\nexport function getServerSideProps() { ... }\n\nexport const config = {\n  runtime: 'experimental-edge',\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/switchable-runtime.md","loc":{"lines":{"from":1,"to":24}}}}],["238",{"pageContent":"Runtime Differences","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/switchable-runtime.md","loc":{"lines":{"from":26,"to":26}}}}],["239",{"pageContent":"|                                                                                                                                                     | Node (Server) | Node (Serverless) | Edge                                                     |\n| --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ----------------- | -------------------------------------------------------- |\n| Name                                                                                                                                                | `nodejs`      | `nodejs`          | `edge` or `experimental-edge` if using Next.js Rendering |\n| [Cold Boot](https://vercel.com/docs/concepts/get-started/compute#cold-and-hot-boots?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) | /             | ~250ms            | Instant                                                  |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/switchable-runtime.md","loc":{"lines":{"from":28,"to":31}}}}],["240",{"pageContent":"| HTTP Streaming                                                                                                                                      | Yes           | Yes               | Yes                                                      |\n| IO                                                                                                                                                  | All           | All               | `fetch`                                                  |\n| Scalability                                                                                                                                         | /             | High              | Highest                                                  |\n| Security                                                                                                                                            | Normal        | High              | High                                                     |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/switchable-runtime.md","loc":{"lines":{"from":32,"to":35}}}}],["241",{"pageContent":"| Latency                                                                                                                                             | Normal        | Low               | Lowest                                                   |\n| Code Size                                                                                                                                           | /             | 50 MB             | 4 MB                                                     |\n| NPM Packages                                                                                                                                        | All           | All               | A smaller subset                                         |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/switchable-runtime.md","loc":{"lines":{"from":36,"to":38}}}}],["242",{"pageContent":"Next.js' default runtime configuration is good for most use cases, but there are still many reasons to change to one runtime over the other one.\n\nFor example, for API routes that rely on native Node.js APIs, they need to run with the Node.js Runtime. However, if an API only uses something like cookie-based authentication, using Middleware and the Edge Runtime will be a better choice due to its lower latency as well as better scalability.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/switchable-runtime.md","loc":{"lines":{"from":40,"to":42}}}}],["243",{"pageContent":"Edge API Routes\n\n[Edge API Routes](/docs/api-routes/edge-api-routes.md) enable you to build high performance APIs with Next.js using the Edge Runtime.\n\n```typescript\nexport const config = {\n  runtime: 'edge',\n}\n\nexport default (req) => new Response('Hello world!')\n```\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/edge-runtime.md\">\n    <b>Edge Runtime</b>\n    <small>Learn more about the supported Web APIs available.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/server.md\">\n    <b>Middleware API Reference</b>\n    <small>Learn more about the supported APIs for Middleware.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-routes/edge-api-routes.md\">\n    <b>Edge API Routes</b>\n    <small>Build high performance APIs in Next.js. </small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/react-18/switchable-runtime.md","loc":{"lines":{"from":44,"to":77}}}}],["244",{"pageContent":"---\ndescription: Improve the security of your Next.js application by adding HTTP response headers.\n---\n\n# Security Headers\n\nTo improve the security of your application, you can use [`headers`](/docs/api-reference/next.config.js/headers.md) in `next.config.js` to apply HTTP response headers to all routes in your application.\n\n```jsx\n// next.config.js\n\n// You can choose which headers to add to the list\n// after learning more below.\nconst securityHeaders = []\n\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        // Apply these headers to all routes in your application.\n        source: '/:path*',\n        headers: securityHeaders,\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":1,"to":27}}}}],["245",{"pageContent":"Options\n\n### [X-DNS-Prefetch-Control](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-DNS-Prefetch-Control)\n\nThis header controls DNS prefetching, allowing browsers to proactively perform domain name resolution on external links, images, CSS, JavaScript, and more. This prefetching is performed in the background, so the [DNS](https://developer.mozilla.org/en-US/docs/Glossary/DNS) is more likely to be resolved by the time the referenced items are needed. This reduces latency when the user clicks a link.\n\n```jsx\n{\n  key: 'X-DNS-Prefetch-Control',\n  value: 'on'\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":29,"to":40}}}}],["246",{"pageContent":"[Strict-Transport-Security](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security)\n\nThis header informs browsers it should only be accessed using HTTPS, instead of using HTTP. Using the configuration below, all present and future subdomains will use HTTPS for a `max-age` of 2 years. This blocks access to pages or subdomains that can only be served over HTTP.\n\nIf you're deploying to [Vercel](https://vercel.com/docs/concepts/edge-network/headers#strict-transport-security?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), this header is not necessary as it's automatically added to all deployments unless you declare [`headers`](/docs/api-reference/next.config.js/headers.md) in your `next.config.js`.\n\n```jsx\n{\n  key: 'Strict-Transport-Security',\n  value: 'max-age=63072000; includeSubDomains; preload'\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":42,"to":53}}}}],["247",{"pageContent":"[X-XSS-Protection](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-XSS-Protection)\n\nThis header stops pages from loading when they detect reflected cross-site scripting (XSS) attacks. Although this protection is not necessary when sites implement a strong [`Content-Security-Policy`](#content-security-policy) disabling the use of inline JavaScript (`'unsafe-inline'`), it can still provide protection for older web browsers that don't support CSP.\n\n```jsx\n{\n  key: 'X-XSS-Protection',\n  value: '1; mode=block'\n}\n```\n\n### [X-Frame-Options](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options)\n\nThis header indicates whether the site should be allowed to be displayed within an `iframe`. This can prevent against clickjacking attacks. This header has been superseded by CSP's `frame-ancestors` option, which has better support in modern browsers.\n\n```jsx\n{\n  key: 'X-Frame-Options',\n  value: 'SAMEORIGIN'\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":55,"to":75}}}}],["248",{"pageContent":"[Permissions-Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy)\n\nThis header allows you to control which features and APIs can be used in the browser. It was previously named `Feature-Policy`. You can view the full list of permission options [here](https://github.com/w3c/webappsec-permissions-policy/blob/main/features.md).\n\n```jsx\n{\n  key: 'Permissions-Policy',\n  value: 'camera=(), microphone=(), geolocation=(), browsing-topics=()'\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":77,"to":86}}}}],["249",{"pageContent":"[X-Content-Type-Options](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options)\n\nThis header prevents the browser from attempting to guess the type of content if the `Content-Type` header is not explicitly set. This can prevent XSS exploits for websites that allow users to upload and share files. For example, a user trying to download an image, but having it treated as a different `Content-Type` like an executable, which could be malicious. This header also applies to downloading browser extensions. The only valid value for this header is `nosniff`.\n\n```jsx\n{\n  key: 'X-Content-Type-Options',\n  value: 'nosniff'\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":88,"to":97}}}}],["250",{"pageContent":"[Referrer-Policy](https://scotthelme.co.uk/a-new-security-header-referrer-policy/)\n\nThis header controls how much information the browser includes when navigating from the current website (origin) to another. You can read about the different options [here](https://scotthelme.co.uk/a-new-security-header-referrer-policy/).\n\n```jsx\n{\n  key: 'Referrer-Policy',\n  value: 'origin-when-cross-origin'\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":99,"to":108}}}}],["251",{"pageContent":"[Content-Security-Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)\n\nThis header helps prevent cross-site scripting (XSS), clickjacking and other code injection attacks. Content Security Policy (CSP) can specify allowed origins for content including scripts, stylesheets, images, fonts, objects, media (audio, video), iframes, and more.\n\nYou can read about the many different CSP options [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP).\n\nYou can add Content Security Policy directives using a template string.\n\n```jsx\n// Before defining your Security Headers\n// add Content Security Policy directives using a template string.\n\nconst ContentSecurityPolicy = `\n  default-src 'self';\n  script-src 'self';\n  child-src example.com;\n  style-src 'self' example.com;\n  font-src 'self';  \n`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":110,"to":128}}}}],["252",{"pageContent":"When a directive uses a keyword such as `self`, wrap it in single quotes `''`.\n\nIn the header's value, replace the new line with a space.\n\n```js\n{\n  key: 'Content-Security-Policy',\n  value: ContentSecurityPolicy.replace(/\\s{2,}/g, ' ').trim()\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":131,"to":140}}}}],["253",{"pageContent":"References\n\n- [MDN](https://developer.mozilla.org)\n- [Varun Naik](https://blog.vnaik.com/posts/web-attacks.html)\n- [Scott Helme](https://scotthelme.co.uk)\n- [Mozilla Observatory](https://observatory.mozilla.org/)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":142,"to":147}}}}],["254",{"pageContent":"Related\n\nFor more information, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/headers.md\">\n    <b>Headers:</b>\n    <small>Add custom HTTP headers to your Next.js app.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/security-headers.md","loc":{"lines":{"from":149,"to":158}}}}],["255",{"pageContent":"---\ndescription: Enables browser source map generation during the production build.\n---\n\n# Source Maps\n\nSource Maps are enabled by default during development. During production builds, they are disabled to prevent you leaking your source on the client, unless you specifically opt in with the configuration flag.\n\n## Configuration flag\n\nNext.js provides a configuration flag you can use to enable browser source map generation during the production build:\n\n```js\n// next.config.js\nmodule.exports = {\n  productionBrowserSourceMaps: true,\n}\n```\n\nWhen the `productionBrowserSourceMaps` option is enabled, the source maps will be output in the same directory as the JavaScript files. Next.js will automatically serve these files when requested.\n\n## Caveats\n\n- Adding source maps can increase `next build` time\n- Increases memory usage during `next build`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/source-maps.md","loc":{"lines":{"from":1,"to":25}}}}],["256",{"pageContent":"---\ndescription: Save pages under the `src` directory as an alternative to the root `pages` directory.\n---\n\n# `src` Directory\n\nPages can also be added under `src/pages` as an alternative to the root `pages` directory.\n\nThe `src` directory is very common in many apps and Next.js supports it by default.\n\n## Caveats\n\n- `src/pages` will be ignored if `pages` is present in the root directory\n- Config files like `next.config.js` and `tsconfig.json`, as well as environment variables, should be inside the root directory, moving them to `src` won't work. Same goes for the [`public` directory](/docs/basic-features/static-file-serving.md)\n\n## Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/pages.md\">\n    <b>Pages:</b>\n    <small>Learn more about what pages are in Next.js</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/src-directory.md","loc":{"lines":{"from":1,"to":25}}}}],["257",{"pageContent":"---\ndescription: Export your Next.js app to static HTML, and run it standalone without the need of a Node.js server.\n---\n\n# Static HTML Export\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-static-export\">Static Export</a></li>\n  </ul>\n</details>\n\nNext.js can be used to generate static applications, including using React in the browser without the need for a Node.js server.\n\nThe core of Next.js has been designed to enable starting as a static site (or Single-Page Application), if desired, and later upgrade to use powerful, dynamic features that require a server. For example, [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md), [Internationalized Routing](/docs/advanced-features/i18n-routing.md), [and more](#unsupported-features).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":1,"to":16}}}}],["258",{"pageContent":"Since Next.js supports this static export, it can be deployed and hosted on any web server that can serve HTML/CSS/JS static assets.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":18,"to":18}}}}],["259",{"pageContent":"Usage\n\nUpdate your [`next.config.js`](/docs/api-reference/next.config.js/introduction.md) file to include `output: 'export'` like the following:\n\n```js\n/**\n * @type {import('next').NextConfig}\n */\nconst nextConfig = {\n  output: 'export',\n}\n\nmodule.exports = nextConfig\n```\n\nThen run `next build` to generate an `out` directory containing the HTML/CSS/JS static assets.\n\nYou can utilize [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) and [`getStaticPaths`](/docs/basic-features/data-fetching/get-static-paths.md) to generate an HTML file for each page in your `pages` directory (or more for [dynamic routes](/docs/routing/dynamic-routes.md)).\n\nIf you want to change the output directory, you can configure `distDir` like the following:\n\n```js\n/**\n * @type {import('next').NextConfig}\n */\nconst nextConfig = {\n  output: 'export',\n  distDir: 'dist',\n}\n\nmodule.exports = nextConfig","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":20,"to":50}}}}],["260",{"pageContent":"In this example, `next build` will generate a `dist` directory containing the HTML/CSS/JS static assets.\n\nLearn more about [Setting a custom build directory](/docs/api-reference/next.config.js/setting-a-custom-build-directory.md).\n\nIf you want to change the output directory structure to always include a trailing slash, you can configure `trailingSlash` like the following:\n\n```js\n/**\n * @type {import('next').NextConfig}\n */\nconst nextConfig = {\n  output: 'export',\n  trailingSlash: true,\n}\n\nmodule.exports = nextConfig\n```\n\nThis will change links so that `href=\"/about\"` will instead be `href=\"/about/\"`. It will also change the output so that `out/about.html` will instead emit `out/about/index.html`.\n\nLearn more about [Trailing Slash](/docs/api-reference/next.config.js/trailing-slash.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":53,"to":73}}}}],["261",{"pageContent":"Supported Features\n\nThe majority of core Next.js features needed to build a static site are supported, including:\n\n- [Dynamic Routes when using `getStaticPaths`](/docs/routing/dynamic-routes.md)\n- Prefetching with `next/link`\n- Preloading JavaScript\n- [Dynamic Imports](/docs/advanced-features/dynamic-import.md)\n- Any styling options (e.g. CSS Modules, styled-jsx)\n- [Client-side data fetching](/docs/basic-features/data-fetching/client-side.md)\n- [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md)\n- [`getStaticPaths`](/docs/basic-features/data-fetching/get-static-paths.md)\n- [Image Optimization](/docs/basic-features/image-optimization.md) using a [custom loader](/docs/basic-features/image-optimization.md#loaders)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":75,"to":87}}}}],["262",{"pageContent":"Unsupported Features\n\nFeatures that require a Node.js server, or dynamic logic that cannot be computed during the build process, are not supported:\n\n- [Image Optimization](/docs/basic-features/image-optimization.md) (default loader)\n- [Internationalized Routing](/docs/advanced-features/i18n-routing.md)\n- [API Routes](/docs/api-routes/introduction.md)\n- [Rewrites](/docs/api-reference/next.config.js/rewrites.md)\n- [Redirects](/docs/api-reference/next.config.js/redirects.md)\n- [Headers](/docs/api-reference/next.config.js/headers.md)\n- [Middleware](/docs/middleware.md)\n- [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md)\n- [`getStaticPaths` with `fallback: true`](/docs/api-reference/data-fetching/get-static-paths.md#fallback-true)\n- [`getStaticPaths` with `fallback: 'blocking'`](/docs/api-reference/data-fetching/get-static-paths.md#fallback-blocking)\n- [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":89,"to":103}}}}],["263",{"pageContent":"`getInitialProps`\n\nIt's possible to use the [`getInitialProps`](/docs/api-reference/data-fetching/get-initial-props.md) API instead of `getStaticProps`, but it comes with a few caveats:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":105,"to":107}}}}],["264",{"pageContent":"- `getInitialProps` cannot be used alongside `getStaticProps` or `getStaticPaths` on any given page. If you have dynamic routes, instead of using `getStaticPaths` you'll need to configure the [`exportPathMap`](/docs/api-reference/next.config.js/exportPathMap.md) parameter in your [`next.config.js`](/docs/api-reference/next.config.js/introduction.md) file to let the exporter know which HTML files it should output.\n- When `getInitialProps` is called during export, the `req` and `res` fields of its [`context`](/docs/api-reference/data-fetching/get-initial-props.md#context-object) parameter will be empty objects, since during export there is no server running.\n- `getInitialProps` **will be called on every client-side navigation**, if you'd like to only fetch data at build-time, switch to `getStaticProps`.\n- `getInitialProps` should fetch from an API and cannot use Node.js-specific libraries or the file system like `getStaticProps` can.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":109,"to":112}}}}],["265",{"pageContent":"We recommend migrating towards `getStaticProps` over `getInitialProps` whenever possible.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":114,"to":114}}}}],["266",{"pageContent":"next export\n\n> **Warning**: \"next export\" is deprecated since Next.js 13.3 in favor of \"output: 'export'\" configuration.\n\nIn versions of Next.js prior to 13.3, there was no configuration option in next.config.js and instead there was a separate command for `next export`.\n\nThis could be used by updating your `package.json` file to include `next export` like the following:\n\n```json\n\"scripts\": {\n  \"build\": \"next build && next export\"\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":116,"to":127}}}}],["267",{"pageContent":"Running `npm run build` will generate an `out` directory.\n\n`next export` builds an HTML version of your app. During `next build`, [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) and [`getStaticPaths`](/docs/basic-features/data-fetching/get-static-paths.md) will generate an HTML file for each page in your `pages` directory (or more for [dynamic routes](/docs/routing/dynamic-routes.md)). Then, `next export` will copy the already exported files into the correct directory. `getInitialProps` will generate the HTML files during `next export` instead of `next build`.\n\n> **Warning**: Using [`exportPathMap`](/docs/api-reference/next.config.js/exportPathMap.md) is deprecated and is overridden by `getStaticPaths` inside `pages`. We recommend not to use them together.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/static-html-export.md","loc":{"lines":{"from":130,"to":134}}}}],["268",{"pageContent":"---\ndescription: Turbopack, an incremental bundler built with Rust, can be used with Next.js 13 using the --turbo flag for faster local development.\n---\n\n# Turbopack (alpha)\n\n[Turbopack](https://turbo.build/pack) is an incremental bundler optimized for JavaScript and TypeScript, written in Rust, and built into Next.js 13.\n\nOn large applications, Turbopack updates 700x faster than Webpack.\n\n## Usage\n\nTurbopack can be used in Next.js 13 in both the `pages` and `app` directories:\n\n1. Create a Next.js 13 project with Turbopack\n\n```bash\nnpx create-next-app@latest --example with-turbopack\n```\n\n2. Start the Next.js development server (with Turbopack)\n\n```bash\nnext dev --turbo\n```\n\n## Supported Features\n\nTo learn more about the currently supported features for Turbopack, view the [documentation](https://turbo.build/pack/docs/features).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/turbopack.md","loc":{"lines":{"from":1,"to":29}}}}],["269",{"pageContent":"---\ndescription: Learn how to use @next/mdx in your Next.js project.\n---\n\n# Using MDX with Next.js\n\nMDX is a superset of markdown that lets you write JSX directly in your markdown files. It is a powerful way to add dynamic interactivity, and embed components within your content, helping you to bring your pages to life.\n\nNext.js supports MDX through a number of different means, this page will outline some of the ways you can begin integrating MDX into your Next.js project.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":1,"to":9}}}}],["270",{"pageContent":"Why use MDX?\n\nAuthoring in markdown is an intuitive way to write content, its terse syntax, once adopted, can enable you to write content that is both readable and maintainable. Because you can use `HTML` elements in your markdown, you can also get creative when styling your markdown pages.\n\nHowever, because markdown is essentially static content, you can't create _dynamic_ content based on user interactivity. Where MDX shines is in its ability to let you create and use your React components directly in the markup. This opens up a wide range of possibilities when composing your sites pages with interactivity in mind.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":11,"to":15}}}}],["271",{"pageContent":"MDX Plugins\n\nInternally MDX uses remark and rehype. Remark is a markdown processor powered by a plugins ecosystem. This plugin ecosystem lets you parse code, transform `HTML` elements, change syntax, extract frontmatter, and more. Using [remark-gfm to enable GitHub flavored markdown (GFM)](https://mdxjs.com/guides/gfm/) is a popular option.\n\nRehype is an `HTML` processor, also powered by a plugin ecosystem. Similar to remark, these plugins let you manipulate, sanitize, compile and configure all types of data, elements and content.\n\nTo use a plugin from either remark or rehype, you will need to add it to the MDX packages config.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":17,"to":23}}}}],["272",{"pageContent":"`@next/mdx`\n\nThe `@next/mdx` package is configured in the `next.config.js` file at your projects root. **It sources data from local files**, allowing you to create pages with a `.mdx` extension, directly in your `/pages` directory.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":25,"to":27}}}}],["273",{"pageContent":"Setup `@next/mdx` in Next.js\n\nThe following steps outline how to setup `@next/mdx` in your Next.js project:\n\n1. Install the required packages:\n\n   ```bash\n     npm install @next/mdx @mdx-js/loader @mdx-js/react","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":29,"to":36}}}}],["274",{"pageContent":"2. Require the package and configure to support top level `.mdx` pages. The following adds the `options` object key allowing you to pass in any plugins:\n\n   ```js\n   // next.config.js\n\n   const withMDX = require('@next/mdx')({\n     extension: /\\.mdx?$/,\n     options: {\n       // If you use remark-gfm, you'll need to use next.config.mjs\n       // as the package is ESM only\n       // https://github.com/remarkjs/remark-gfm#install\n       remarkPlugins: [],\n       rehypePlugins: [],\n       // If you use `MDXProvider`, uncomment the following line.\n       // providerImportSource: \"@mdx-js/react\",\n     },\n   })\n\n   /** @type {import('next').NextConfig} */\n   const nextConfig = {\n     // Configure pageExtensions to include md and mdx\n     pageExtensions: ['ts', 'tsx', 'js', 'jsx', 'md', 'mdx'],\n     // Optionally, add any other Next.js config below\n     reactStrictMode: true,\n   }\n\n   // Merge MDX config with Next.js config\n   module.exports = withMDX(nextConfig)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":39,"to":66}}}}],["275",{"pageContent":"3. Create a new MDX page within the `/pages` directory:\n\n   ```bash\n     - /pages\n       - my-mdx-page.mdx\n     - package.json\n   ```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":69,"to":75}}}}],["276",{"pageContent":"Using Components, Layouts and Custom Elements\n\nYou can now import a React component directly inside your MDX page:\n\n```md\nimport { MyComponent } from 'my-components'\n\n# My MDX page\n\nThis is a list in markdown:\n\n- One\n- Two\n- Three\n\nCheckout my React component:\n\n<MyComponent/>\n```\n\n### Frontmatter\n\nFrontmatter is a YAML like key/value pairing that can be used to store data about a page. `@next/mdx` does **not** support frontmatter by default, though there are many solutions for adding frontmatter to your MDX content, such as [gray-matter](https://github.com/jonschlinkert/gray-matter).\n\nTo access page metadata with `@next/mdx`, you can export a meta object from within the `.mdx` file:\n\n```md\nexport const meta = {\nauthor: 'Rich Haines'\n}\n\n# My MDX page\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":77,"to":109}}}}],["277",{"pageContent":"Layouts\n\nTo add a layout to your MDX page, create a new component and import it into the MDX page. Then you can wrap the MDX page with your layout component:\n\n```md\nimport { MyComponent, MyLayoutComponent } from 'my-components'\n\nexport const meta = {\nauthor: 'Rich Haines'\n}\n\n# My MDX Page with a Layout\n\nThis is a list in markdown:\n\n- One\n- Two\n- Three\n\nCheckout my React component:\n\n<MyComponent/>\n\nexport default ({ children }) => <MyLayoutComponent meta={meta}>{children}</MyLayoutComponent>\n```\n\n### Custom Elements\n\nOne of the pleasant aspects of using markdown, is that it maps to native `HTML` elements, making writing fast, and intuitive:\n\n```md\n# H1 heading","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":111,"to":142}}}}],["278",{"pageContent":"H2 heading\n\nThis is a list in markdown:\n\n- One\n- Two\n- Three\n```\n\nThe above generates the following `HTML`:\n\n```html\n<h1>H1 heading</h1>\n\n<h2>H2 heading</h2>\n\n<p>This is a list in markdown:</p>\n\n<ul>\n  <li>One</li>\n  <li>Two</li>\n  <li>Three</li>\n</ul>\n```\n\nWhen you want to style your own elements to give a custom feel to your website or application, you can pass in shortcodes. These are your own custom components that map to `HTML` elements. To do this you use the `MDXProvider` and pass a components object as a prop. Each object key in the components object maps to a `HTML` element name.\n\nTo enable you need to specify `providerImportSource: \"@mdx-js/react\"` in `next.config.js`.\n\n```js\n// next.config.js\n\nconst withMDX = require('@next/mdx')({\n  // ...\n  options: {\n    providerImportSource: '@mdx-js/react',\n  },\n})","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":144,"to":181}}}}],["279",{"pageContent":"Then setup the provider in your page\n\n```jsx\n// pages/index.js\n\nimport { MDXProvider } from '@mdx-js/react'\nimport Image from 'next/image'\nimport { Heading, InlineCode, Pre, Table, Text } from 'my-components'\n\nconst ResponsiveImage = (props) => (\n  <Image alt={props.alt} layout=\"responsive\" {...props} />\n)\n\nconst components = {\n  img: ResponsiveImage,\n  h1: Heading.H1,\n  h2: Heading.H2,\n  p: Text,\n  pre: Pre,\n  code: InlineCode,\n}\n\nexport default function Post(props) {\n  return (\n    <MDXProvider components={components}>\n      <main {...props} />\n    </MDXProvider>\n  )\n}\n```\n\nIf you use it across the site you may want to add the provider to `_app.js` so all MDX pages pick up the custom element config.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":184,"to":215}}}}],["280",{"pageContent":"Using rust based MDX compiler (experimental)\n\nNext.js supports a new MDX compiler written in Rust. This compiler is still experimental and is not recommended for production use. To use the new compiler, you need to configure `next.config.js` when you pass it to `withMDX`:\n\n```js\n// next.config.js\nmodule.exports = withMDX({\n  experimental: {\n    mdxRs: true,\n  },\n})\n```\n\n## Helpful Links\n\n- [MDX](https://mdxjs.com)\n- [`@next/mdx`](https://www.npmjs.com/package/@next/mdx)\n- [remark](https://github.com/remarkjs/remark)\n- [rehype](https://github.com/rehypejs/rehype)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/advanced-features/using-mdx.md","loc":{"lines":{"from":217,"to":235}}}}],["281",{"pageContent":"---\ndescription: The Next.js CLI allows you to start, build, and export your application. Learn more about it here.\n---\n\n# Next.js CLI\n\nThe Next.js CLI allows you to start, build, and export your application.\n\nTo get a list of the available CLI commands, run the following command inside your project directory:\n\n```bash\nnpx next -h\n```\n\n_([npx](https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b) comes with npm 5.2+ and higher)_\n\nThe output should look like this:\n\n```bash\nUsage\n  $ next <command>\n\nAvailable commands\n  build, start, export, dev, lint, telemetry, info\n\nOptions\n  --version, -v   Version number\n  --help, -h      Displays this message\n\nFor more information run a command with the --help flag\n  $ next build --help\n```\n\nYou can pass any [node arguments](https://nodejs.org/api/cli.html#cli_node_options_options) to `next` commands:\n\n```bash\nNODE_OPTIONS='--throw-deprecation' next\nNODE_OPTIONS='-r esm' next\nNODE_OPTIONS='--inspect' next","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":1,"to":39}}}}],["282",{"pageContent":"> Note: Running `next` without a command is the same as running `next dev`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":42,"to":42}}}}],["283",{"pageContent":"Build\n\n`next build` creates an optimized production build of your application. The output displays information about each route.\n\n- **Size** – The number of assets downloaded when navigating to the page client-side. The size for each route only includes its dependencies.\n- **First Load JS** – The number of assets downloaded when visiting the page from the server. The amount of JS shared by all is shown as a separate metric.\n\nBoth of these values are **compressed with gzip**. The first load is indicated by green, yellow, or red. Aim for green for performant applications.\n\nYou can enable production profiling for React with the `--profile` flag in `next build`. This requires [Next.js 9.5](https://nextjs.org/blog/next-9-5):\n\n```bash\nnext build --profile\n```\n\nAfter that, you can use the profiler in the same way as you would in development.\n\nYou can enable more verbose build output with the `--debug` flag in `next build`. This requires Next.js 9.5.3:\n\n```bash\nnext build --debug","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":44,"to":64}}}}],["284",{"pageContent":"With this flag enabled additional build output like rewrites, redirects, and headers will be shown.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":67,"to":67}}}}],["285",{"pageContent":"Development\n\n`next dev` starts the application in development mode with hot-code reloading, error reporting, and more:\n\nThe application will start at `http://localhost:3000` by default. The default port can be changed with `-p`, like so:\n\n```bash\nnpx next dev -p 4000\n```\n\nOr using the `PORT` environment variable:\n\n```bash\nPORT=4000 npx next dev\n```\n\n> Note: `PORT` cannot be set in `.env` as booting up the HTTP server happens before any other code is initialized.\n\nYou can also set the hostname to be different from the default of `0.0.0.0`, this can be useful for making the application available for other devices on the network. The default hostname can be changed with `-H`, like so:\n\n```bash\nnpx next dev -H 192.168.1.2\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":69,"to":91}}}}],["286",{"pageContent":"Production\n\n`next start` starts the application in production mode. The application should be compiled with [`next build`](#build) first.\n\nThe application will start at `http://localhost:3000` by default. The default port can be changed with `-p`, like so:\n\n```bash\nnpx next start -p 4000\n```\n\nOr using the `PORT` environment variable:\n\n```bash\nPORT=4000 npx next start\n```\n\n> Note: `PORT` cannot be set in `.env` as booting up the HTTP server happens before any other code is initialized.\n\n> Note: `next start` cannot be used with `output: 'standalone'` or `output: 'export'`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":93,"to":111}}}}],["287",{"pageContent":"Keep Alive Timeout\n\nWhen deploying Next.js behind a downstream proxy (e.g. a load-balancer like AWS ELB/ALB) it's important to configure Next's underlying HTTP server with [keep-alive timeouts](https://nodejs.org/api/http.html#http_server_keepalivetimeout) that are _larger_ than the downstream proxy's timeouts. Otherwise, once a keep-alive timeout is reached for a given TCP connection, Node.js will immediately terminate that connection without notifying the downstream proxy. This results in a proxy error whenever it attempts to reuse a connection that Node.js has already terminated.\n\nTo configure the timeout values for the production Next.js server, pass `--keepAliveTimeout` (in milliseconds) to `next start`, like so:\n\n```bash\nnpx next start --keepAliveTimeout 70000\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":113,"to":121}}}}],["288",{"pageContent":"Lint\n\n`next lint` runs ESLint for all files in the `pages/`, `app` (only if the experimental `appDir` feature is enabled), `components/`, `lib/`, and `src/` directories. It also\nprovides a guided setup to install any required dependencies if ESLint is not already configured in\nyour application.\n\nIf you have other directories that you would like to lint, you can specify them using the `--dir`\nflag:\n\n```bash\nnext lint --dir utils\n```\n\n## Telemetry\n\nNext.js collects **completely anonymous** telemetry data about general usage.\nParticipation in this anonymous program is optional, and you may opt-out if you'd not like to share any information.\n\nTo learn more about Telemetry, [please read this document](https://nextjs.org/telemetry/).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":123,"to":141}}}}],["289",{"pageContent":"Info\n\n`next info` prints relevant details about the current system which can be used to report Next.js bugs.\nThis information includes Operating System platform/arch/version, Binaries (Node.js, npm, Yarn, pnpm) and npm package versions (`next`, `react`, `react-dom`).\n\nRunning the following in your project's root directory:\n\n```bash\nnext info\n```\n\nwill give you information like this example:\n\n```bash\n\n    Operating System:\n      Platform: linux\n      Arch: x64\n      Version: #22-Ubuntu SMP Fri Nov 5 13:21:36 UTC 2021\n    Binaries:\n      Node: 16.13.0\n      npm: 8.1.0\n      Yarn: 1.22.17\n      pnpm: 6.24.2\n    Relevant packages:\n      next: 12.0.8\n      react: 17.0.2\n      react-dom: 17.0.2\n\n```\n\nThis information should then be pasted into GitHub Issues.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/cli.md","loc":{"lines":{"from":143,"to":174}}}}],["290",{"pageContent":"---\ndescription: Create Next.js apps in one command with create-next-app.\n---\n\n# Create Next App\n\nThe easiest way to get started with Next.js is by using `create-next-app`. This CLI tool enables you to quickly start building a new Next.js application, with everything set up for you. You can create a new app using the default Next.js template, or by using one of the [official Next.js examples](https://github.com/vercel/next.js/tree/canary/examples). To get started, use the following command:\n\n### Interactive\n\nYou can create a new project interactively by running:\n\n```bash\nnpx create-next-app@latest\n# or\nyarn create next-app\n# or\npnpm create next-app\n```\n\nYou will be asked for the name of your project, and then whether you want to\ncreate a TypeScript project:\n\n```bash\n✔ Would you like to use TypeScript with this project? … No / Yes\n```\n\nSelect **Yes** to install the necessary types/dependencies and create a new TS project.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/create-next-app.md","loc":{"lines":{"from":1,"to":28}}}}],["291",{"pageContent":"Non-interactive\n\nYou can also pass command line arguments to set up a new project\nnon-interactively. See `create-next-app --help`:\n\n```bash\nUsage: create-next-app <project-directory> [options]\n\nOptions:\n  -V, --version                        output the version number\n  --ts, --typescript\n\n    Initialize as a TypeScript project. (default)\n\n  --js, --javascript\n\n    Initialize as a JavaScript project.\n\n  --tailwind\n\n    Initialize with Tailwind CSS config. (default)\n\n  --no-tailwind\n\n    Initialize without Tailwind CSS config.\n\n  --eslint\n\n    Initialize with ESLint config.\n\n  --experimental-app\n\n    Initialize as a `app/` directory project.\n\n  --src-dir\n\n    Initialize inside a `src/` directory.\n\n  --import-alias <alias-to-configure>\n\n    Specify import alias to use (default \"@/*\").\n\n  --use-npm\n\n    Explicitly tell the CLI to bootstrap the app using npm\n\n  --use-pnpm\n\n    Explicitly tell the CLI to bootstrap the app using pnpm\n\n  -e, --example [name]|[github-url]","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/create-next-app.md","loc":{"lines":{"from":30,"to":80}}}}],["292",{"pageContent":"--use-npm\n\n    Explicitly tell the CLI to bootstrap the app using npm\n\n  --use-pnpm\n\n    Explicitly tell the CLI to bootstrap the app using pnpm\n\n  -e, --example [name]|[github-url]\n\n    An example to bootstrap the app with. You can use an example name\n    from the official Next.js repo or a GitHub URL. The URL can use\n    any branch and/or subdirectory\n\n  --example-path <path-to-example>\n\n    In a rare case, your GitHub URL might contain a branch name with\n    a slash (e.g. bug/fix-1) and the path to the example (e.g. foo/bar).\n    In this case, you must specify the path to the example separately:\n    --example-path foo/bar\n\n  --reset-preferences\n\n    Explicitly tell the CLI to reset any stored preferences\n\n  -h, --help                           output usage information\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/create-next-app.md","loc":{"lines":{"from":80,"to":106}}}}],["293",{"pageContent":"Why use Create Next App?\n\n`create-next-app` allows you to create a new Next.js app within seconds. It is officially maintained by the creators of Next.js, and includes a number of benefits:\n\n- **Interactive Experience**: Running `npx create-next-app@latest` (with no arguments) launches an interactive experience that guides you through setting up a project.\n- **Zero Dependencies**: Initializing a project is as quick as one second. Create Next App has zero dependencies.\n- **Offline Support**: Create Next App will automatically detect if you're offline and bootstrap your project using your local package cache.\n- **Support for Examples**: Create Next App can bootstrap your application using an example from the Next.js examples collection (e.g. `npx create-next-app --example api-routes`).\n- **Tested**: The package is part of the Next.js monorepo and tested using the same integration test suite as Next.js itself, ensuring it works as expected with every release.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/create-next-app.md","loc":{"lines":{"from":108,"to":116}}}}],["294",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/pages.md\">\n    <b>Pages:</b>\n    <small>Learn more about what pages are in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/built-in-css-support.md\">\n    <b>CSS Support:</b>\n    <small>Use the built-in CSS support to add custom styles to your app.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/cli.md\">\n    <b>CLI:</b>\n    <small>Learn more about the Next.js CLI.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/create-next-app.md","loc":{"lines":{"from":118,"to":141}}}}],["295",{"pageContent":"---\ndescription: Enable Server-Side Rendering in a page and do initial data population with `getInitialProps`.\n---\n\n# getInitialProps\n\n> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for [colocated data fetching](https://beta.nextjs.org/docs/data-fetching/fundamentals) at the component level, using the new React `use` hook and an extended `fetch` Web API.\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).\n\n`getInitialProps` enables [server-side rendering](/docs/basic-features/pages.md#server-side-rendering) in a page and allows you to do **initial data population**, it means sending the [page](/docs/basic-features/pages.md) with the data already populated from the server. This is especially useful for [SEO](https://en.wikipedia.org/wiki/Search_engine_optimization).\n\n`getInitialProps` will disable [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":1,"to":13}}}}],["296",{"pageContent":"`getInitialProps` will disable [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md).\n\n`getInitialProps` is an `async` function that can be added to any page as a [`static method`](https://javascript.info/static-properties-methods). Take a look at the following example:\n\n```jsx\nfunction Page({ stars }) {\n  return <div>Next stars: {stars}</div>\n}\n\nPage.getInitialProps = async (ctx) => {\n  const res = await fetch('https://api.github.com/repos/vercel/next.js')\n  const json = await res.json()\n  return { stars: json.stargazers_count }\n}\n\nexport default Page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":13,"to":28}}}}],["297",{"pageContent":"Or using a class component:\n\n```jsx\nimport React from 'react'\n\nclass Page extends React.Component {\n  static async getInitialProps(ctx) {\n    const res = await fetch('https://api.github.com/repos/vercel/next.js')\n    const json = await res.json()\n    return { stars: json.stargazers_count }\n  }\n\n  render() {\n    return <div>Next stars: {this.props.stars}</div>\n  }\n}\n\nexport default Page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":31,"to":48}}}}],["298",{"pageContent":"`getInitialProps` is used to asynchronously fetch some data, which then populates `props`.\n\nData returned from `getInitialProps` is serialized when server rendering, similar to what [`JSON.stringify`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) does. Make sure the returned object from `getInitialProps` is a plain `Object` and not using `Date`, `Map` or `Set`.\n\nFor the initial page load, `getInitialProps` will run on the server only. `getInitialProps` will then run on the client when navigating to a different route via the [`next/link`](/docs/api-reference/next/link.md) component or by using [`next/router`](/docs/api-reference/next/router.md). However, if `getInitialProps` is used in a custom `_app.js`, and the page being navigated to implements `getServerSideProps`, then `getInitialProps` will run on the server.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":51,"to":55}}}}],["299",{"pageContent":"Context Object\n\n`getInitialProps` receives a single argument called `context`, it's an object with the following properties:\n\n- `pathname` - Current route. That is the path of the page in `/pages`\n- `query` - Query string section of URL parsed as an object\n- `asPath` - `String` of the actual path (including the query) shown in the browser\n- `req` - [HTTP request object](https://nodejs.org/api/http.html#http_class_http_incomingmessage 'Class: http.IncomingMessage HTTP | Node.js v14.8.0 Documentation') (server only)\n- `res` - [HTTP response object](https://nodejs.org/api/http.html#http_class_http_serverresponse 'Class: http.ServerResponse HTTP | Node.js v14.8.0 Documentation') (server only)\n- `err` - Error object if any error is encountered during the rendering","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":57,"to":66}}}}],["300",{"pageContent":"Caveats\n\n- `getInitialProps` can **not** be used in children components, only in the default export of every page\n- If you are using server-side only modules inside `getInitialProps`, make sure to [import them properly](https://arunoda.me/blog/ssr-and-server-only-modules), otherwise it'll slow down your app\n\n> Note that irrespective of rendering type, any `props` will be passed to the page component and can be viewed on the client-side in the initial HTML. This is to allow the page to be [hydrated](https://react.dev/reference/react-dom/hydrate) correctly. Make sure that you don't pass any sensitive information that shouldn't be available on the client in `props`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":68,"to":73}}}}],["301",{"pageContent":"TypeScript\n\nIf you're using TypeScript, you can use the `NextPage` type for function components:\n\n```jsx\nimport { NextPage } from 'next'\n\ninterface Props {\n  userAgent?: string;\n}\n\nconst Page: NextPage<Props> = ({ userAgent }) => (\n  <main>Your user agent: {userAgent}</main>\n)\n\nPage.getInitialProps = async ({ req }) => {\n  const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n  return { userAgent }\n}\n\nexport default Page\n```\n\nAnd for `React.Component`, you can use `NextPageContext`:\n\n```jsx\nimport React from 'react'\nimport { NextPageContext } from 'next'\n\ninterface Props {\n  userAgent?: string;\n}\n\nexport default class Page extends React.Component<Props> {\n  static async getInitialProps({ req }: NextPageContext) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent }\n  }\n\n  render() {\n    const { userAgent } = this.props\n    return <main>Your user agent: {userAgent}</main>\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":75,"to":119}}}}],["302",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/overview.md\">\n    <b>Data Fetching:</b>\n    <small>Learn more about data fetching in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-initial-props.md","loc":{"lines":{"from":121,"to":130}}}}],["303",{"pageContent":"---\ndescription: API reference for `getServerSideProps`. Learn how to fetch data on each request with Next.js.\n---\n\n# getServerSideProps\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes                                                             |\n| --------- | ------------------------------------------------------------------- |\n| `v10.0.0` | `locale`, `locales`, `defaultLocale`, and `notFound` options added. |\n| `v9.3.0`  | `getServerSideProps` introduced.                                    |\n\n</details>\n\n> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for [colocated data fetching](https://beta.nextjs.org/docs/data-fetching/fundamentals) at the component level, using the new React `use` hook and an extended `fetch` Web API.\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":1,"to":19}}}}],["304",{"pageContent":"When exporting a function called `getServerSideProps` (Server-Side Rendering) from a page, Next.js will pre-render this page on each request using the data returned by `getServerSideProps`. This is useful if you want to fetch data that changes often, and have the page update to show the most current data.\n\n```js\nexport async function getServerSideProps(context) {\n  return {\n    props: {}, // will be passed to the page component as props\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":21,"to":28}}}}],["305",{"pageContent":"You can import modules in top-level scope for use in `getServerSideProps`. Imports used will **not be bundled for the client-side**. This means you can write **server-side code directly in `getServerSideProps`**, including fetching data from your database.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":31,"to":31}}}}],["306",{"pageContent":"Context parameter\n\nThe `context` parameter is an object containing the following keys:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":33,"to":35}}}}],["307",{"pageContent":"- `params`: If this page uses a [dynamic route](/docs/routing/dynamic-routes.md), `params` contains the route parameters. If the page name is `[id].js` , then `params` will look like `{ id: ... }`.\n- `req`: [The `HTTP` IncomingMessage object](https://nodejs.org/api/http.html#http_class_http_incomingmessage), with an additional `cookies` prop, which is an object with string keys mapping to string values of cookies.\n- `res`: [The `HTTP` response object](https://nodejs.org/api/http.html#http_class_http_serverresponse).\n- `query`: An object representing the query string, including dynamic route parameters.\n- `preview`: `preview` is `true` if the page is in the [Preview Mode](/docs/advanced-features/preview-mode.md) and `false` otherwise.\n- `previewData`: The [preview](/docs/advanced-features/preview-mode.md) data set by `setPreviewData`.\n- `resolvedUrl`: A normalized version of the request `URL` that strips the `_next/data` prefix for client transitions and includes original query values.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":37,"to":43}}}}],["308",{"pageContent":"- `resolvedUrl`: A normalized version of the request `URL` that strips the `_next/data` prefix for client transitions and includes original query values.\n- `locale` contains the active locale (if enabled).\n- `locales` contains all supported locales (if enabled).\n- `defaultLocale` contains the configured default locale (if enabled).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":43,"to":46}}}}],["309",{"pageContent":"getServerSideProps return values\n\nThe `getServerSideProps` function should return an object with **any one of the following** properties:\n\n### `props`\n\nThe `props` object is a key-value pair, where each value is received by the page component. It should be a [serializable object](https://developer.mozilla.org/en-US/docs/Glossary/Serialization) so that any props passed, could be serialized with [`JSON.stringify`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify).\n\n```jsx\nexport async function getServerSideProps(context) {\n  return {\n    props: { message: `Next.js is awesome` }, // will be passed to the page component as props\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":48,"to":62}}}}],["310",{"pageContent":"`notFound`\n\nThe `notFound` boolean allows the page to return a `404` status and [404 Page](/docs/advanced-features/custom-error-page.md#404-page). With `notFound: true`, the page will return a `404` even if there was a successfully generated page before. This is meant to support use cases like user-generated content getting removed by its author.\n\n```js\nexport async function getServerSideProps(context) {\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  if (!data) {\n    return {\n      notFound: true,\n    }\n  }\n\n  return {\n    props: { data }, // will be passed to the page component as props\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":64,"to":83}}}}],["311",{"pageContent":"`redirect`\n\nThe `redirect` object allows redirecting to internal and external resources. It should match the shape of `{ destination: string, permanent: boolean }`. In some rare cases, you might need to assign a custom status code for older `HTTP` clients to properly redirect. In these cases, you can use the `statusCode` property instead of the `permanent` property, but not both.\n\n```js\nexport async function getServerSideProps(context) {\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  if (!data) {\n    return {\n      redirect: {\n        destination: '/',\n        permanent: false,\n      },\n    }\n  }\n\n  return {\n    props: {}, // will be passed to the page component as props\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":85,"to":107}}}}],["312",{"pageContent":"getServerSideProps with TypeScript\n\nThe type of `getServerSideProps` can be specified using `GetServerSideProps` from `next`:\n\n```ts\nimport { GetServerSideProps } from 'next'\n\ntype Data = { ... }\n\nexport const getServerSideProps: GetServerSideProps<{ data: Data }> = async (context) => {\n  const res = await fetch('https://.../data')\n  const data: Data = await res.json()\n\n  return {\n    props: {\n      data,\n    },\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":109,"to":127}}}}],["313",{"pageContent":"If you want to get inferred typings for your props, you can use `InferGetServerSidePropsType<typeof getServerSideProps>`:\n\n```tsx\nimport { InferGetServerSidePropsType } from 'next'\nimport { GetServerSideProps } from 'next'\n\ntype Data = { ... }\n\nexport const getServerSideProps: GetServerSideProps<{ data: Data }> = async () => {\n  const res = await fetch('https://.../data')\n  const data: Data = await res.json()\n\n  return {\n    props: {\n      data,\n    },\n  }\n}\n\nfunction Page({ data }: InferGetServerSidePropsType<typeof getServerSideProps>) {\n  // will resolve data to type Data\n}\n\nexport default Page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":130,"to":153}}}}],["314",{"pageContent":"Implicit typing for `getServerSideProps` will also work properly:\n\n```tsx\nimport { InferGetServerSidePropsType } from 'next'\n\ntype Data = { ... }\n\nexport const getServerSideProps = async () => {\n  const res = await fetch('https://.../data')\n  const data: Data = await res.json()\n\n  return {\n    props: {\n      data,\n    },\n  }\n}\n\nfunction Page({ data }: InferGetServerSidePropsType<typeof getServerSideProps>) {\n  // will resolve data to type Data\n}\n\nexport default Page\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":156,"to":179}}}}],["315",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/overview.md\">\n    <b>Data Fetching:</b>\n    <small>Learn more about data fetching in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-server-side-props.md","loc":{"lines":{"from":181,"to":190}}}}],["316",{"pageContent":"---\ndescription: API reference for `getStaticPaths`. Learn how to fetch data and generate static pages with `getStaticPaths`.\n---\n\n# getStaticPaths\n\n<details>\n  <summary><b>Version History</b></summary>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":1,"to":8}}}}],["317",{"pageContent":"| Version   | Changes                                                                                                                                                 |\n| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `v12.2.0` | [On-Demand Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md#on-demand-revalidation) is stable.    |\n| `v12.1.0` | [On-Demand Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md#on-demand-revalidation) added (beta). |\n| `v9.5.0`  | Stable [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md)                                         |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":10,"to":14}}}}],["318",{"pageContent":"| `v9.5.0`  | Stable [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md)                                         |\n| `v9.3.0`  | `getStaticPaths` introduced.                                                                                                                            |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":14,"to":15}}}}],["319",{"pageContent":"</details>\n\nWhen exporting a function called `getStaticPaths` from a page that uses [Dynamic Routes](/docs/routing/dynamic-routes.md), Next.js will statically pre-render all the paths specified by `getStaticPaths`.\n\n```jsx\nexport async function getStaticPaths() {\n  return {\n    paths: [\n      { params: { ... } } // See the \"paths\" section below\n    ],\n    fallback: true, false or \"blocking\" // See the \"fallback\" section below\n  };\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":17,"to":30}}}}],["320",{"pageContent":"getStaticPaths return values\n\nThe `getStaticPaths` function should return an object with the following **required** properties:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":32,"to":34}}}}],["321",{"pageContent":"`paths`\n\nThe `paths` key determines which paths will be pre-rendered. For example, suppose that you have a page that uses [Dynamic Routes](/docs/routing/dynamic-routes.md) named `pages/posts/[id].js`. If you export `getStaticPaths` from this page and return the following for `paths`:\n\n```js\nreturn {\n  paths: [\n    { params: { id: '1' }},\n    {\n      params: { id: '2' },\n      // with i18n configured the locale for the path can be returned as well\n      locale: \"en\",\n    },\n  ],\n  fallback: ...\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":36,"to":51}}}}],["322",{"pageContent":"Then, Next.js will statically generate `/posts/1` and `/posts/2` during `next build` using the page component in `pages/posts/[id].js`.\n\nThe value for each `params` object must match the parameters used in the page name:\n\n- If the page name is `pages/posts/[postId]/[commentId]`, then `params` should contain `postId` and `commentId`.\n- If the page name uses [catch-all routes](/docs/routing/dynamic-routes.md#catch-all-routes) like `pages/[...slug]`, then `params` should contain `slug` (which is an array). If this array is `['hello', 'world']`, then Next.js will statically generate the page at `/hello/world`.\n- If the page uses an [optional catch-all route](/docs/routing/dynamic-routes.md#optional-catch-all-routes), use `null`, `[]`, `undefined` or `false` to render the root-most route. For example, if you supply `slug: false` for `pages/[[...slug]]`, Next.js will statically generate the page `/`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":54,"to":60}}}}],["323",{"pageContent":"The `params` strings are **case-sensitive** and ideally should be normalized to ensure the paths are generated correctly. For example, if `WoRLD` is returned for a param it will only match if `WoRLD` is the actual path visited, not `world` or `World`.\n\nSeparate of the `params` object a `locale` field can be returned when [i18n is configured](/docs/advanced-features/i18n-routing.md), which configures the locale for the path being generated.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":62,"to":64}}}}],["324",{"pageContent":"`fallback: false`\n\nIf `fallback` is `false`, then any paths not returned by `getStaticPaths` will result in a **404 page**.\n\nWhen `next build` is run, Next.js will check if `getStaticPaths` returned `fallback: false`, it will then build **only** the paths returned by `getStaticPaths`. This option is useful if you have a small number of paths to create, or new page data is not added often. If you find that you need to add more paths, and you have `fallback: false`, you will need to run `next build` again so that the new paths can be generated.\n\nThe following example pre-renders one blog post per page called `pages/posts/[id].js`. The list of blog posts will be fetched from a CMS and returned by `getStaticPaths`. Then, for each page, it fetches the post data from a CMS using [`getStaticProps`](/docs/api-reference/data-fetching/get-static-props.md).\n\n```jsx\n// pages/posts/[id].js\n\nfunction Post({ post }) {\n  // Render post...\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":66,"to":79}}}}],["325",{"pageContent":"```jsx\n// pages/posts/[id].js\n\nfunction Post({ post }) {\n  // Render post...\n}\n\n// This function gets called at build time\nexport async function getStaticPaths() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // Get the paths we want to pre-render based on posts\n  const paths = posts.map((post) => ({\n    params: { id: post.id },\n  }))\n\n  // We'll pre-render only these paths at build time.\n  // { fallback: false } means other routes should 404.\n  return { paths, fallback: false }\n}\n\n// This also gets called at build time\nexport async function getStaticProps({ params }) {\n  // params contains the post `id`.\n  // If the route is like /posts/1, then params.id is 1\n  const res = await fetch(`https://.../posts/${params.id}`)\n  const post = await res.json()\n\n  // Pass post data to the page via props\n  return { props: { post } }\n}\n\nexport default Post\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":79,"to":114}}}}],["326",{"pageContent":"`fallback: true`\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://static-tweet.vercel.app\">Static generation of a large number of pages</a></li>\n  </ul>\n</details>\n\nIf `fallback` is `true`, then the behavior of `getStaticProps` changes in the following ways:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":116,"to":125}}}}],["327",{"pageContent":"- The paths returned from `getStaticPaths` will be rendered to `HTML` at build time by `getStaticProps`.\n- The paths that have not been generated at build time will **not** result in a 404 page. Instead, Next.js will serve a [“fallback”](#fallback-pages) version of the page on the first request to such a path. Web crawlers, such as Google, won't be served a fallback and instead the path will behave as in [`fallback: 'blocking'`](#fallback-blocking).\n- When a page with `fallback: true` is navigated to through `next/link` or `next/router` (client-side) Next.js will _not_ serve a fallback and instead the page will behave as [`fallback: 'blocking'`](#fallback-blocking).\n- In the background, Next.js will statically generate the requested path `HTML` and `JSON`. This includes running `getStaticProps`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":127,"to":130}}}}],["328",{"pageContent":"- In the background, Next.js will statically generate the requested path `HTML` and `JSON`. This includes running `getStaticProps`.\n- When complete, the browser receives the `JSON` for the generated path. This will be used to automatically render the page with the required props. From the user’s perspective, the page will be swapped from the fallback page to the full page.\n- At the same time, Next.js adds this path to the list of pre-rendered pages. Subsequent requests to the same path will serve the generated page, like other pages pre-rendered at build time.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":130,"to":132}}}}],["329",{"pageContent":"> **Note:** `fallback: true` is not supported when using [`output: 'export'`](/docs/advanced-features/static-html-export.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":134,"to":134}}}}],["330",{"pageContent":"When is `fallback: true` useful?\n\n`fallback: true` is useful if your app has a very large number of static pages that depend on data (such as a very large e-commerce site). If you want to pre-render all product pages, the builds would take a very long time.\n\nInstead, you may statically generate a small subset of pages and use `fallback: true` for the rest. When someone requests a page that is not generated yet, the user will see the page with a loading indicator or skeleton component.\n\nShortly after, `getStaticProps` finishes and the page will be rendered with the requested data. From now on, everyone who requests the same page will get the statically pre-rendered page.\n\nThis ensures that users always have a fast experience while preserving fast builds and the benefits of Static Generation.\n\n`fallback: true` will not _update_ generated pages, for that take a look at [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":136,"to":146}}}}],["331",{"pageContent":"`fallback: 'blocking'`\n\nIf `fallback` is `'blocking'`, new paths not returned by `getStaticPaths` will wait for the `HTML` to be generated, identical to SSR (hence why _blocking_), and then be cached for future requests so it only happens once per path.\n\n`getStaticProps` will behave as follows:\n\n- The paths returned from `getStaticPaths` will be rendered to `HTML` at build time by `getStaticProps`.\n- The paths that have not been generated at build time will **not** result in a 404 page. Instead, Next.js will SSR on the first request and return the generated `HTML`.\n- When complete, the browser receives the `HTML` for the generated path. From the user’s perspective, it will transition from \"the browser is requesting the page\" to \"the full page is loaded\". There is no flash of loading/fallback state.\n- At the same time, Next.js adds this path to the list of pre-rendered pages. Subsequent requests to the same path will serve the generated page, like other pages pre-rendered at build time.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":148,"to":157}}}}],["332",{"pageContent":"`fallback: 'blocking'` will not _update_ generated pages by default. To update generated pages, use [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md) in conjunction with `fallback: 'blocking'`.\n\n> **Note:** `fallback: 'blocking'` is not supported when using [`output: 'export'`](/docs/advanced-features/static-html-export.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":159,"to":161}}}}],["333",{"pageContent":"Fallback pages\n\nIn the “fallback” version of a page:\n\n- The page’s props will be empty.\n- Using the [router](/docs/api-reference/next/router.md), you can detect if the fallback is being rendered, `router.isFallback` will be `true`.\n\nThe following example showcases using `isFallback`:\n\n```jsx\n// pages/posts/[id].js\nimport { useRouter } from 'next/router'\n\nfunction Post({ post }) {\n  const router = useRouter()\n\n  // If the page is not yet generated, this will be displayed\n  // initially until getStaticProps() finishes running\n  if (router.isFallback) {\n    return <div>Loading...</div>\n  }\n\n  // Render post...\n}\n\n// This function gets called at build time\nexport async function getStaticPaths() {\n  return {\n    // Only `/posts/1` and `/posts/2` are generated at build time\n    paths: [{ params: { id: '1' } }, { params: { id: '2' } }],\n    // Enable statically generating additional pages\n    // For example: `/posts/3`\n    fallback: true,\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":163,"to":197}}}}],["334",{"pageContent":"// This also gets called at build time\nexport async function getStaticProps({ params }) {\n  // params contains the post `id`.\n  // If the route is like /posts/1, then params.id is 1\n  const res = await fetch(`https://.../posts/${params.id}`)\n  const post = await res.json()\n\n  // Pass post data to the page via props\n  return {\n    props: { post },\n    // Re-generate the post at most once per second\n    // if a request comes in\n    revalidate: 1,\n  }\n}\n\nexport default Post\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":199,"to":216}}}}],["335",{"pageContent":"getStaticPaths with TypeScript\n\nFor TypeScript, you can use the `GetStaticPaths` type from `next`:\n\n```ts\nimport { GetStaticPaths } from 'next'\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n  // ...\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-paths.md","loc":{"lines":{"from":218,"to":228}}}}],["336",{"pageContent":"---\ndescription: API reference for `getStaticProps`. Learn how to use `getStaticProps` to generate static pages with Next.js.\n---\n\n# getStaticProps\n\n<details>\n  <summary><b>Version History</b></summary>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":1,"to":8}}}}],["337",{"pageContent":"| Version   | Changes                                                                                                                                                 |\n| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `v12.2.0` | [On-Demand Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md#on-demand-revalidation) is stable.    |\n| `v12.1.0` | [On-Demand Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md#on-demand-revalidation) added (beta). |\n| `v10.0.0` | `locale`, `locales`, `defaultLocale`, and `notFound` options added.                                                                                     |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":10,"to":14}}}}],["338",{"pageContent":"| `v10.0.0` | `locale`, `locales`, `defaultLocale`, and `notFound` options added.                                                                                     |\n| `v10.0.0` | `fallback: 'blocking'` return option added.                                                                                                             |\n| `v9.5.0`  | Stable [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md)                                         |\n| `v9.3.0`  | `getStaticProps` introduced.                                                                                                                            |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":14,"to":17}}}}],["339",{"pageContent":"</details>\n\n> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for [colocated data fetching](https://beta.nextjs.org/docs/data-fetching/fundamentals) at the component level, using the new React `use` hook and an extended `fetch` Web API.\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).\n\nExporting a function called `getStaticProps` will pre-render a page at build time using the props returned from the function:\n\n```jsx\nexport async function getStaticProps(context) {\n  return {\n    props: {}, // will be passed to the page component as props\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":19,"to":32}}}}],["340",{"pageContent":"You can import modules in top-level scope for use in `getStaticProps`. Imports used will **not be bundled for the client-side**. This means you can write **server-side code directly in `getStaticProps`**, including fetching data from your database.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":35,"to":35}}}}],["341",{"pageContent":"Context parameter\n\nThe `context` parameter is an object containing the following keys:\n\n- `params` contains the route parameters for pages using [dynamic routes](/docs/routing/dynamic-routes.md). For example, if the page name is `[id].js` , then `params` will look like `{ id: ... }`. You should use this together with `getStaticPaths`, which we’ll explain later.\n- `preview` is `true` if the page is in the [Preview Mode](/docs/advanced-features/preview-mode.md) and `undefined` otherwise.\n- `previewData` contains the [preview](/docs/advanced-features/preview-mode.md) data set by `setPreviewData`.\n- `locale` contains the active locale (if enabled).\n- `locales` contains all supported locales (if enabled).\n- `defaultLocale` contains the configured default locale (if enabled).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":37,"to":46}}}}],["342",{"pageContent":"getStaticProps return values\n\nThe `getStaticProps` function should return an object containing either `props`, `redirect`, or `notFound` followed by an **optional** `revalidate` property.\n\n### `props`\n\nThe `props` object is a key-value pair, where each value is received by the page component. It should be a [serializable object](https://developer.mozilla.org/en-US/docs/Glossary/Serialization) so that any props passed, could be serialized with [`JSON.stringify`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify).\n\n```jsx\nexport async function getStaticProps(context) {\n  return {\n    props: { message: `Next.js is awesome` }, // will be passed to the page component as props\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":48,"to":62}}}}],["343",{"pageContent":"`revalidate`\n\nThe `revalidate` property is the amount in seconds after which a page re-generation can occur (defaults to `false` or no revalidation).\n\n```js\n// This function gets called at build time on server-side.\n// It may be called again, on a serverless function, if\n// revalidation is enabled and a new request comes in\nexport async function getStaticProps() {\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  return {\n    props: {\n      posts,\n    },\n    // Next.js will attempt to re-generate the page:\n    // - When a request comes in\n    // - At most once every 10 seconds\n    revalidate: 10, // In seconds\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":64,"to":85}}}}],["344",{"pageContent":"Learn more about [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md).\n\nThe cache status of a page leveraging ISR can be determined by reading the value of the `x-nextjs-cache` response header. The possible values are the following:\n\n- `MISS` - the path is not in the cache (occurs at most once, on the first visit)\n- `STALE` - the path is in the cache but exceeded the revalidate time so it will be updated in the background\n- `HIT` - the path is in the cache and has not exceeded the revalidate time","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":88,"to":94}}}}],["345",{"pageContent":"`notFound`\n\nThe `notFound` boolean allows the page to return a `404` status and [404 Page](/docs/advanced-features/custom-error-page.md#404-page). With `notFound: true`, the page will return a `404` even if there was a successfully generated page before. This is meant to support use cases like user-generated content getting removed by its author. Note, `notFound` follows the same `revalidate` behavior [described here](/docs/api-reference/data-fetching/get-static-props.md#revalidate).\n\n```js\nexport async function getStaticProps(context) {\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  if (!data) {\n    return {\n      notFound: true,\n    }\n  }\n\n  return {\n    props: { data }, // will be passed to the page component as props\n  }\n}\n```\n\n> **Note**: `notFound` is not needed for [`fallback: false`](/docs/api-reference/data-fetching/get-static-paths#fallback-false) mode as only paths returned from `getStaticPaths` will be pre-rendered.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":96,"to":117}}}}],["346",{"pageContent":"`redirect`\n\nThe `redirect` object allows redirecting to internal or external resources. It should match the shape of `{ destination: string, permanent: boolean }`.\n\nIn some rare cases, you might need to assign a custom status code for older `HTTP` clients to properly redirect. In these cases, you can use the `statusCode` property instead of the `permanent` property, **but not both**. You can also set `basePath: false` similar to redirects in `next.config.js`.\n\n```js\nexport async function getStaticProps(context) {\n  const res = await fetch(`https://...`)\n  const data = await res.json()\n\n  if (!data) {\n    return {\n      redirect: {\n        destination: '/',\n        permanent: false,\n        // statusCode: 301\n      },\n    }\n  }\n\n  return {\n    props: { data }, // will be passed to the page component as props\n  }\n}\n```\n\nIf the redirects are known at build-time, they should be added in [`next.config.js`](/docs/api-reference/next.config.js/redirects.md) instead.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":119,"to":146}}}}],["347",{"pageContent":"Reading files: Use `process.cwd()`\n\nFiles can be read directly from the filesystem in `getStaticProps`.\n\nIn order to do so you have to get the full path to a file.\n\nSince Next.js compiles your code into a separate directory you can't use `__dirname` as the path it returns will be different from the pages directory.\n\nInstead you can use `process.cwd()` which gives you the directory where Next.js is being executed.\n\n```jsx\nimport { promises as fs } from 'fs'\nimport path from 'path'\n\n// posts will be populated at build time by getStaticProps()\nfunction Blog({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li>\n          <h3>{post.filename}</h3>\n          <p>{post.content}</p>\n        </li>\n      ))}\n    </ul>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":148,"to":174}}}}],["348",{"pageContent":"// This function gets called at build time on server-side.\n// It won't be called on client-side, so you can even do\n// direct database queries.\nexport async function getStaticProps() {\n  const postsDirectory = path.join(process.cwd(), 'posts')\n  const filenames = await fs.readdir(postsDirectory)\n\n  const posts = filenames.map(async (filename) => {\n    const filePath = path.join(postsDirectory, filename)\n    const fileContents = await fs.readFile(filePath, 'utf8')\n\n    // Generally you would parse/transform the contents\n    // For example you can transform markdown to HTML here\n\n    return {\n      filename,\n      content: fileContents,\n    }\n  })\n  // By returning { props: { posts } }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      posts: await Promise.all(posts),\n    },\n  }\n}\n\nexport default Blog\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":176,"to":205}}}}],["349",{"pageContent":"getStaticProps with TypeScript\n\nThe type of `getStaticProps` can be specified using `GetStaticProps` from `next`:\n\n```ts\nimport { GetStaticProps } from 'next'\n\ntype Post = {\n  author: string\n  content: string\n}\n\nexport const getStaticProps: GetStaticProps<{ posts: Post[] }> = async (\n  context\n) => {\n  const res = await fetch('https://.../posts')\n  const posts: Post[] = await res.json()\n\n  return {\n    props: {\n      posts,\n    },\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":207,"to":230}}}}],["350",{"pageContent":"If you want to get inferred typings for your props, you can use `InferGetStaticPropsType<typeof getStaticProps>`:\n\n```tsx\nimport type { InferGetStaticPropsType, GetStaticProps } from 'next'\n\ntype Post = {\n  author: string\n  content: string\n}\n\nexport const getStaticProps: GetStaticProps<{ posts: Post[] }> = async () => {\n  const res = await fetch('https://.../posts')\n  const posts: Post[] = await res.json()\n\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n\nfunction Blog({ posts }: InferGetStaticPropsType<typeof getStaticProps>) {\n  // will resolve posts to type Post[]\n}\n\nexport default Blog","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":233,"to":258}}}}],["351",{"pageContent":"Implicit typing for `getStaticProps` will also work properly:\n\n```tsx\nimport { InferGetStaticPropsType } from 'next'\n\ntype Post = {\n  author: string\n  content: string\n}\n\nexport const getStaticProps = async () => {\n  const res = await fetch('https://.../posts')\n  const posts: Post[] = await res.json()\n\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n\nfunction Blog({ posts }: InferGetStaticPropsType<typeof getStaticProps>) {\n  // will resolve posts to type Post[]\n}\n\nexport default Blog\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":261,"to":287}}}}],["352",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/overview.md\">\n    <b>Data Fetching:</b>\n    <small>Learn more about data fetching in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/data-fetching/get-static-props.md","loc":{"lines":{"from":289,"to":298}}}}],["353",{"pageContent":"---\ndescription: The Next.js Edge Runtime is based on standard Web APIs. Learn more about the supported APIs available.\n---\n\n# Edge Runtime\n\nThe Next.js Edge Runtime is based on standard Web APIs, which is used by [Middleware](/docs/middleware.md) and [Edge API Routes](/docs/api-routes/edge-api-routes.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":1,"to":7}}}}],["354",{"pageContent":"Network APIs\n\nThe Edge Runtime supports the following network APIs:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":9,"to":11}}}}],["355",{"pageContent":"| API                                                                                                 | Description                      |\n| --------------------------------------------------------------------------------------------------- | -------------------------------- |\n| [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)                               | Fetches a resource               |\n| [`Request`](https://developer.mozilla.org/en-US/docs/Web/API/Request)                               | Represents an HTTP request       |\n| [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response)                             | Represents an HTTP response      |\n| [`Headers`](https://developer.mozilla.org/en-US/docs/Web/API/Headers)                               | Represents HTTP headers          |\n| [`FetchEvent`](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent)                         | Represents a fetch event         |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":13,"to":19}}}}],["356",{"pageContent":"| [`FetchEvent`](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent)                         | Represents a fetch event         |\n| [`addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener) | Adds an event listener           |\n| [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData)                             | Represents form data             |\n| [`File`](https://developer.mozilla.org/en-US/docs/Web/API/File)                                     | Represents a file                |\n| [`Blob`](https://developer.mozilla.org/en-US/docs/Web/API/Blob)                                     | Represents a blob                |\n| [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)               | Represents URL search parameters |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":19,"to":24}}}}],["357",{"pageContent":"Encoding APIs\n\nThe Edge Runtime supports the following encoding APIs:\n\n| API                                                                                       | Description                        |\n| ----------------------------------------------------------------------------------------- | ---------------------------------- |\n| [`TextEncoder`](https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder)             | Encodes a string into a Uint8Array |\n| [`TextDecoder`](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder)             | Decodes a Uint8Array into a string |\n| [`atob`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/atob) | Decodes a base-64 encoded string   |\n| [`btoa`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa) | Encodes a string in base-64        |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":26,"to":35}}}}],["358",{"pageContent":"Stream APIs\n\nThe Edge Runtime supports the following stream APIs:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":37,"to":39}}}}],["359",{"pageContent":"| API                                                                                                           | Description                             |\n| ------------------------------------------------------------------------------------------------------------- | --------------------------------------- |\n| [`ReadableStream`](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream)                           | Represents a readable stream            |\n| [`WritableStream`](https://developer.mozilla.org/en-US/docs/Web/API/WritableStream)                           | Represents a writable stream            |\n| [`WritableStreamDefaultWriter`](https://developer.mozilla.org/en-US/docs/Web/API/WritableStreamDefaultWriter) | Represents a writer of a WritableStream |\n| [`TransformStream`](https://developer.mozilla.org/en-US/docs/Web/API/TransformStream)                         | Represents a transform stream           |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":41,"to":46}}}}],["360",{"pageContent":"| [`TransformStream`](https://developer.mozilla.org/en-US/docs/Web/API/TransformStream)                         | Represents a transform stream           |\n| [`ReadableStreamDefaultReader`](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultReader) | Represents a reader of a ReadableStream |\n| [`ReadableStreamBYOBReader`](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamBYOBReader)       | Represents a reader of a ReadableStream |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":46,"to":48}}}}],["361",{"pageContent":"Crypto APIs\n\nThe Edge Runtime supports the following crypto APIs:\n\n| API                                                                             | Description                                                                                         |\n| ------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- |\n| [`crypto`](https://developer.mozilla.org/en-US/docs/Web/API/Window/crypto)      | Provides access to the cryptographic functionality of the platform                                  |\n| [`SubtleCrypto`](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto) | Provides access to common cryptographic primitives, like hashing, signing, encryption or decryption |\n| [`CryptoKey`](https://developer.mozilla.org/en-US/docs/Web/API/CryptoKey)       | Represents a cryptographic key                                                                      |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":50,"to":58}}}}],["362",{"pageContent":"Web Standard APIs\n\nThe Edge Runtime supports the following web standard APIs:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":60,"to":62}}}}],["363",{"pageContent":"| API                                                                                                                         | Description                                                                                                                                                                                          |\n| --------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| [`AbortController`](https://developer.mozilla.org/en-US/docs/Web/API/AbortController)                                       | Allows you to abort one or more DOM requests as and when desired                                                                                                                                     |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":64,"to":66}}}}],["364",{"pageContent":"| [`DOMException`](https://developer.mozilla.org/en-US/docs/Web/API/DOMException)                                             | Represents an error that occurs in the DOM                                                                                                                                                           |\n| [`structuredClone`](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm)            | Creates a deep copy of a value                                                                                                                                                                       |\n| [`URLPattern`](https://developer.mozilla.org/en-US/docs/Web/API/URLPattern)                                                 | Represents a URL pattern                                                                                                                                                                             |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":67,"to":69}}}}],["365",{"pageContent":"| [`Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)                           | Represents an array of values                                                                                                                                                                        |\n| [`ArrayBuffer`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)               | Represents a generic, fixed-length raw binary data buffer                                                                                                                                            |\n| [`Atomics`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics)                       | Provides atomic operations as static methods                                                                                                                                                         |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":70,"to":72}}}}],["366",{"pageContent":"| [`BigInt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt)                         | Represents a whole number with arbitrary precision                                                                                                                                                   |\n| [`BigInt64Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array)           | Represents a typed array of 64-bit signed integers                                                                                                                                                   |\n| [`BigUint64Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array)         | Represents a typed array of 64-bit unsigned integers                                                                                                                                                 |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":73,"to":75}}}}],["367",{"pageContent":"| [`Boolean`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)                       | Represents a logical entity and can have two values: `true` and `false`                                                                                                                              |\n| [`clearInterval`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval)                 | Cancels a timed, repeating action which was previously established by a call to `setInterval()`                                                                                                      |\n| [`clearTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout)                   | Cancels a timed, repeating action which was previously established by a call to `setTimeout()`                                                                                                       |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":76,"to":78}}}}],["368",{"pageContent":"| [`console`](https://developer.mozilla.org/en-US/docs/Web/API/Console)                                                       | Provides access to the browser's debugging console                                                                                                                                                   |\n| [`DataView`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView)                     | Represents a generic view of an `ArrayBuffer`                                                                                                                                                        |\n| [`Date`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)                             | Represents a single moment in time in a platform-independent format                                                                                                                                  |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":79,"to":81}}}}],["369",{"pageContent":"| [`decodeURI`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURI)                   | Decodes a Uniform Resource Identifier (URI) previously created by `encodeURI` or by a similar routine                                                                                                |\n| [`decodeURIComponent`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent) | Decodes a Uniform Resource Identifier (URI) component previously created by `encodeURIComponent` or by a similar routine                                                                             |\n| [`encodeURI`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI)                   | Encodes a Uniform Resource Identifier (URI) by replacing each instance of certain characters by one, two, three, or four escape sequences representing the UTF-8 encoding of the character           |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":82,"to":84}}}}],["370",{"pageContent":"| [`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) | Encodes a Uniform Resource Identifier (URI) component by replacing each instance of certain characters by one, two, three, or four escape sequences representing the UTF-8 encoding of the character |\n| [`Error`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)                           | Represents an error when trying to execute a statement or accessing a property                                                                                                                       |\n| [`EvalError`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError)                   | Represents an error that occurs regarding the global function `eval()`                                                                                                                               |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":85,"to":87}}}}],["371",{"pageContent":"| [`Float32Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array)             | Represents a typed array of 32-bit floating point numbers                                                                                                                                            |\n| [`Float64Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array)             | Represents a typed array of 64-bit floating point numbers                                                                                                                                            |\n| [`Function`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)                     | Represents a function                                                                                                                                                                                |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":88,"to":90}}}}],["372",{"pageContent":"| [`Infinity`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity)                     | Represents the mathematical Infinity value                                                                                                                                                           |\n| [`Int8Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array)                   | Represents a typed array of 8-bit signed integers                                                                                                                                                    |\n| [`Int16Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array)                 | Represents a typed array of 16-bit signed integers                                                                                                                                                   |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":91,"to":93}}}}],["373",{"pageContent":"| [`Int32Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array)                 | Represents a typed array of 32-bit signed integers                                                                                                                                                   |\n| [`Intl`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)                             | Provides access to internationalization and localization functionality                                                                                                                               |\n| [`isFinite`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isFinite)                     | Determines whether a value is a finite number                                                                                                                                                        |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":94,"to":96}}}}],["374",{"pageContent":"| [`isNaN`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isNaN)                           | Determines whether a value is `NaN` or not                                                                                                                                                           |\n| [`JSON`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON)                             | Provides functionality to convert JavaScript values to and from the JSON format                                                                                                                      |\n| [`Map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)                               | Represents a collection of values, where each value may occur only once                                                                                                                              |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":97,"to":99}}}}],["375",{"pageContent":"| [`Math`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math)                             | Provides access to mathematical functions and constants                                                                                                                                              |\n| [`Number`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)                         | Represents a numeric value                                                                                                                                                                           |\n| [`Object`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)                         | Represents the object that is the base of all JavaScript objects                                                                                                                                     |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":100,"to":102}}}}],["376",{"pageContent":"| [`parseFloat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseFloat)                 | Parses a string argument and returns a floating point number                                                                                                                                         |\n| [`parseInt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt)                     | Parses a string argument and returns an integer of the specified radix                                                                                                                               |\n| [`Promise`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)                       | Represents the eventual completion (or failure) of an asynchronous operation, and its resulting value                                                                                                |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":103,"to":105}}}}],["377",{"pageContent":"| [`Proxy`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)                           | Represents an object that is used to define custom behavior for fundamental operations (e.g. property lookup, assignment, enumeration, function invocation, etc)                                     |\n| [`RangeError`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError)                 | Represents an error when a value is not in the set or range of allowed values                                                                                                                        |\n| [`ReferenceError`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError)         | Represents an error when a non-existent variable is referenced                                                                                                                                       |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":106,"to":108}}}}],["378",{"pageContent":"| [`Reflect`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect)                       | Provides methods for interceptable JavaScript operations                                                                                                                                             |\n| [`RegExp`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp)                         | Represents a regular expression, allowing you to match combinations of characters                                                                                                                    |\n| [`Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)                               | Represents a collection of values, where each value may occur only once                                                                                                                              |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":109,"to":111}}}}],["379",{"pageContent":"| [`setInterval`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/setInterval)               | Repeatedly calls a function, with a fixed time delay between each call                                                                                                                               |\n| [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/setTimeout)                 | Calls a function or evaluates an expression after a specified number of milliseconds                                                                                                                 |\n| [`SharedArrayBuffer`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)   | Represents a generic, fixed-length raw binary data buffer                                                                                                                                            |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":112,"to":114}}}}],["380",{"pageContent":"| [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)                         | Represents a sequence of characters                                                                                                                                                                  |\n| [`Symbol`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol)                         | Represents a unique and immutable data type that is used as the key of an object property                                                                                                            |\n| [`SyntaxError`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError)               | Represents an error when trying to interpret syntactically invalid code                                                                                                                              |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":115,"to":117}}}}],["381",{"pageContent":"| [`TypeError`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError)                   | Represents an error when a value is not of the expected type                                                                                                                                         |\n| [`Uint8Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)                 | Represents a typed array of 8-bit unsigned integers                                                                                                                                                  |\n| [`Uint8ClampedArray`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray)   | Represents a typed array of 8-bit unsigned integers clamped to 0-255                                                                                                                                 |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":118,"to":120}}}}],["382",{"pageContent":"| [`Uint32Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array)               | Represents a typed array of 32-bit unsigned integers                                                                                                                                                 |\n| [`URIError`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError)                     | Represents an error when a global URI handling function was used in a wrong way                                                                                                                      |\n| [`URL`](https://developer.mozilla.org/en-US/docs/Web/API/URL)                                                               | Represents an object providing static methods used for creating object URLs                                                                                                                          |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":121,"to":123}}}}],["383",{"pageContent":"| [`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)                                       | Represents a collection of key/value pairs                                                                                                                                                           |\n| [`WeakMap`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)                       | Represents a collection of key/value pairs in which the keys are weakly referenced                                                                                                                   |\n| [`WeakSet`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet)                       | Represents a collection of objects in which each object may occur only once                                                                                                                          |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":124,"to":126}}}}],["384",{"pageContent":"| [`WebAssembly`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly)               | Provides access to WebAssembly                                                                                                                                                                       |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":127,"to":127}}}}],["385",{"pageContent":"Environment Variables\n\nYou can use `process.env` to access [Environment Variables](/docs/basic-features/environment-variables.md) for both `next dev` and `next build`.\n\nRunning `console.log` on `process.env` **will not** show all your Environment Variables. You have to access the variables directly as shown below:\n\n```javascript\nconsole.log(process.env)\n// { NEXT_RUNTIME: 'edge' }\nconsole.log(process.env.TEST_VARIABLE)\n// value\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":129,"to":140}}}}],["386",{"pageContent":"Compatible Node.js Modules\n\nThe following modules can be imported with and without the `node:` prefix when using the `import` statement:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":142,"to":144}}}}],["387",{"pageContent":"| Module                                                   | Description                                                                                                                                                                                       |\n| -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| [`async_hooks`](https://nodejs.org/api/async_hooks.html) | Manage asynchronous resources lifecycles with `AsyncLocalStorage`. Supports the [WinterCG subset](https://github.com/wintercg/proposal-common-minimum-api/blob/main/asynclocalstorage.md) of APIs |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":146,"to":148}}}}],["388",{"pageContent":"| [`events`](https://nodejs.org/api/events.html)           | Facilitate event-driven programming with custom event emitters and listeners. This API is fully supported                                                                                         |\n| [`buffer`](https://nodejs.org/api/buffer.html)           | Efficiently manipulate binary data using fixed-size, raw memory allocations with `Buffer`. Every primitive compatible with `Uint8Array` accepts `Buffer` too                                      |\n| [`assert`](https://nodejs.org/api/assert.html)           | Provide a set of assertion functions for verifying invariants in your code                                                                                                                        |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":149,"to":151}}}}],["389",{"pageContent":"| [`util`](https://nodejs.org/api/util.html)               | Offer various utility functions where we include `promisify`/`callbackify` and `types`                                                                                                            |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":152,"to":152}}}}],["390",{"pageContent":"Also, `Buffer` and `AsyncLocalStorage` are globally exposed to maximize compatibility with existing Node.js nodules.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":154,"to":154}}}}],["391",{"pageContent":"Unsupported APIs\n\nThe Edge Runtime has some restrictions including:\n\n- Some Node.js APIs other than the ones listed above **are not supported**. For example, you can't read or write to the filesystem\n- `node_modules` _can_ be used, as long as they implement ES Modules and do not use native Node.js APIs\n- Calling `require` directly is **not allowed**. Use ES Modules instead\n\nThe following JavaScript language features are disabled, and **will not work:**","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":156,"to":164}}}}],["392",{"pageContent":"| API                                                                                                                                   | Description                                                         |\n| ------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------- |\n| [`eval`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval)                                       | Evaluates JavaScript code represented as a string                   |\n| [`new Function(evalString)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function)               | Creates a new function with the code provided as an argument        |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":166,"to":169}}}}],["393",{"pageContent":"| [`WebAssembly.compile`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/compile)         | Compiles a WebAssembly module from a buffer source                  |\n| [`WebAssembly.instantiate`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/instantiate) | Compiles and instantiates a WebAssembly module from a buffer source |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":170,"to":171}}}}],["394",{"pageContent":"In rare cases, your code could contain (or import) some dynamic code evaluation statements which _can not be reached at runtime_ and which can not be removed by treeshaking.\nYou can relax the check to allow specific files with your Middleware or Edge API Route exported configuration:\n\n```javascript\nexport const config = {\n  runtime: 'edge', // for Edge API Routes only\n  unstable_allowDynamic: [\n    '/lib/utilities.js', // allows a single file\n    '/node_modules/function-bind/**', // use a glob to allow anything in the function-bind 3rd party module\n  ],\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":173,"to":183}}}}],["395",{"pageContent":"`unstable_allowDynamic` is a [glob](https://github.com/micromatch/micromatch#matching-features), or an array of globs, ignoring dynamic code evaluation for specific files. The globs are relative to your application root folder.\n\nBe warned that if these statements are executed on the Edge, _they will throw and cause a runtime error_.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":186,"to":188}}}}],["396",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/middleware.md\">\n    <b>Middleware</b>\n    <small>Run code before a request is completed.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/server.md\">\n    <b>Middleware API Reference</b>\n    <small>Learn more about the supported APIs for Middleware.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-routes/edge-api-routes.md\">\n    <b>Edge API Routes</b>\n    <small>Build high performance APIs in Next.js. </small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/edge-runtime.md","loc":{"lines":{"from":190,"to":211}}}}],["397",{"pageContent":"---\ndescription: Enable AMP in a page, and control the way Next.js adds AMP to the page with the AMP config.\n---\n\n# next/amp\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/amp\">AMP</a></li>\n  </ul>\n</details>\n\n> AMP support is one of our advanced features, you can [read more about AMP here](/docs/advanced-features/amp-support/introduction.md).\n\nTo enable AMP, add the following config to your page:\n\n```jsx\nexport const config = { amp: true }\n```\n\nThe `amp` config accepts the following values:\n\n- `true` - The page will be AMP-only\n- `'hybrid'` - The page will have two versions, one with AMP and another one with HTML\n\nTo learn more about the `amp` config, read the sections below.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/amp.md","loc":{"lines":{"from":1,"to":27}}}}],["398",{"pageContent":"AMP First Page\n\nTake a look at the following example:\n\n```jsx\nexport const config = { amp: true }\n\nfunction About(props) {\n  return <h3>My AMP About Page!</h3>\n}\n\nexport default About\n```\n\nThe page above is an AMP-only page, which means:\n\n- The page has no Next.js or React client-side runtime\n- The page is automatically optimized with [AMP Optimizer](https://github.com/ampproject/amp-toolbox/tree/master/packages/optimizer), an optimizer that applies the same transformations as AMP caches (improves performance by up to 42%)\n- The page has a user-accessible (optimized) version of the page and a search-engine indexable (unoptimized) version of the page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/amp.md","loc":{"lines":{"from":29,"to":47}}}}],["399",{"pageContent":"Hybrid AMP Page\n\nTake a look at the following example:\n\n```jsx\nimport { useAmp } from 'next/amp'\n\nexport const config = { amp: 'hybrid' }\n\nfunction About(props) {\n  const isAmp = useAmp()\n\n  return (\n    <div>\n      <h3>My AMP About Page!</h3>\n      {isAmp ? (\n        <amp-img\n          width=\"300\"\n          height=\"300\"\n          src=\"/my-img.jpg\"\n          alt=\"a cool image\"\n          layout=\"responsive\"\n        />\n      ) : (\n        <img width=\"300\" height=\"300\" src=\"/my-img.jpg\" alt=\"a cool image\" />\n      )}\n    </div>\n  )\n}\n\nexport default About","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/amp.md","loc":{"lines":{"from":49,"to":79}}}}],["400",{"pageContent":"The page above is a hybrid AMP page, which means:\n\n- The page is rendered as traditional HTML (default) and AMP HTML (by adding `?amp=1` to the URL)\n- The AMP version of the page only has valid optimizations applied with AMP Optimizer so that it is indexable by search-engines\n\nThe page uses `useAmp` to differentiate between modes, it's a [React Hook](https://react.dev/reference/react) that returns `true` if the page is using AMP, and `false` otherwise.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/amp.md","loc":{"lines":{"from":82,"to":87}}}}],["401",{"pageContent":"---\ndescription: Optimizing loading web fonts with the built-in `next/font` loaders.\n---\n\n# next/font\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes                                                               |\n| --------- | --------------------------------------------------------------------- |\n| `v13.2.0` | `@next/font` renamed to `next/font`. Installation no longer required. |\n| `v13.0.0` | `next/font` was added.                                                |\n\n</details>\n\nThis API reference will help you understand how to use `next/font/google` and `next/font/local`. For features and usage, please see the [Optimizing Fonts](/docs/basic-features/font-optimization.md) page.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":1,"to":17}}}}],["402",{"pageContent":"Font function arguments\n\nFor usage, review [Google Fonts](/docs/basic-features/font-optimization.md#google-fonts) and [Local Fonts](/docs/basic-features/font-optimization#local-fonts).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":19,"to":21}}}}],["403",{"pageContent":"| Key                                         | `font/google` | `font/local` | Data type                  | Required          |\n| ------------------------------------------- | ------------- | ------------ | -------------------------- | ----------------- |\n| [`src`](#src)                               | ❌            | ✅           | String or Array of Objects | Required          |\n| [`weight`](#weight)                         | ✅            | ✅           | String or Array            | Required/Optional |\n| [`style`](#style)                           | ✅            | ✅           | String or Array            | Optional          |\n| [`subsets`](#subsets)                       | ✅            | ❌           | Array of Strings           | Optional          |\n| [`axes`](#axes)                             | ✅            | ❌           | Array of Strings           | Optional          |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":23,"to":29}}}}],["404",{"pageContent":"| [`axes`](#axes)                             | ✅            | ❌           | Array of Strings           | Optional          |\n| [`display`](#display)                       | ✅            | ✅           | String                     | Optional          |\n| [`preload`](#preload)                       | ✅            | ✅           | Boolean                    | Optional          |\n| [`fallback`](#fallback)                     | ✅            | ✅           | Array of Strings           | Optional          |\n| [`adjustFontFallback`](#adjustFontFallback) | ✅            | ✅           | Boolean or String          | Optional          |\n| [`variable`](#variable)                     | ✅            | ✅           | String                     | Optional          |\n| [`declarations`](#declarations)             | ❌            | ✅           | Array of Objects           | Optional          |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":29,"to":35}}}}],["405",{"pageContent":"`src`\n\nThe path of the font file as a string or an array of objects (with type `Array<{path: string, weight?: string, style?: string}>`) relative to the directory where the font loader function is called.\n\nUsed in `next/font/local`\n\n- Required\n\nExamples:\n\n- `src:'./fonts/my-font.woff2'` where `my-font.woff2` is placed in a directory named `fonts` inside the `app` directory\n- `src:[{path: './inter/Inter-Thin.ttf', weight: '100',},{path: './inter/Inter-Regular.ttf',weight: '400',},{path: './inter/Inter-Bold-Italic.ttf', weight: '700',style: 'italic',},]`\n- if the font loader function is called in `app/page.tsx` using `src:'../styles/fonts/my-font.ttf'`, then `my-font.ttf` is placed in `styles/fonts` at the root of the project","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":37,"to":49}}}}],["406",{"pageContent":"`weight`\n\nThe font [`weight`](https://fonts.google.com/knowledge/glossary/weight) with the following possibilities:\n\n- A string with possible values of the weights available for the specific font or a range of values if it's a [variable](https://fonts.google.com/variablefonts) font\n- An array of weight values if the font is not a [variable google font](https://fonts.google.com/variablefonts). It applies to `next/font/google` only.\n\nUsed in `next/font/google` and `next/font/local`\n\n- Required if the font being used is **not** [variable](https://fonts.google.com/variablefonts)\n\nExamples:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":51,"to":62}}}}],["407",{"pageContent":"Used in `next/font/google` and `next/font/local`\n\n- Required if the font being used is **not** [variable](https://fonts.google.com/variablefonts)\n\nExamples:\n\n- `weight: '400'`: A string for a single weight value - for the font [`Inter`](https://fonts.google.com/specimen/Inter?query=inter), the possible values are `'100'`, `'200'`, `'300'`, `'400'`, `'500'`, `'600'`, `'700'`, `'800'`, `'900'` or `'variable'` where `'variable'` is the default)\n- `weight: '100 900'`: A string for the range between `100` and `900` for a variable font\n- `weight: ['100','400','900']`: An array of 3 possible values for a non variable font","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":62,"to":70}}}}],["408",{"pageContent":"`style`\n\nThe font [`style`](https://developer.mozilla.org/en-US/docs/Web/CSS/font-style) with the following possibilities:\n\n- A string [value](https://developer.mozilla.org/en-US/docs/Web/CSS/font-style#values) with default value of `'normal'`\n- An array of style values if the font is not a [variable google font](https://fonts.google.com/variablefonts). It applies to `next/font/google` only.\n\nUsed in `next/font/google` and `next/font/local`\n\n- Optional\n\nExamples:\n\n- `style: 'italic'`: A string - it can be `normal` or `italic` for `next/font/google`\n- `style: 'oblique'`: A string - it can take any value for `next/font/local` but is expected to come from [standard font styles](https://developer.mozilla.org/en-US/docs/Web/CSS/font-style)\n- `style: ['italic','normal']`: An array of 2 values for `next/font/google` - the values are from `normal` and `italic`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":72,"to":87}}}}],["409",{"pageContent":"`subsets`\n\nThe font [`subsets`](https://fonts.google.com/knowledge/glossary/subsetting) defined by an array of string values with the names of each subset you would like to be [preloaded](/docs/basic-features/font-optimization#specifying-a-subset). Fonts specified via `subsets` will have a link preload tag injected into the head when the [`preload`](/docs/api-reference/next/font.md#preload) option is true, which is the default.\n\nUsed in `next/font/google`\n\n- Optional\n\nExamples:\n\n- `subsets: ['latin']`: An array with the subset `latin`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":89,"to":99}}}}],["410",{"pageContent":"`axes`\n\nSome variable fonts have extra `axes` that can be included. By default, only the font weight is included to keep the file size down. The possible values of `axes` depend on the specific font.\n\nUsed in `next/font/google`\n\n- Optional\n\nExamples:\n\n- `axes: ['slnt']`: An array with value `slnt` for the `Inter` variable font which has `slnt` as additional `axes` as shown [here](https://fonts.google.com/variablefonts?vfquery=inter#font-families). You can find the possible `axes` values for your font by using the filter on the [Google variable fonts page](https://fonts.google.com/variablefonts#font-families) and looking for axes other than `wght`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":101,"to":111}}}}],["411",{"pageContent":"`display`\n\nThe font [`display`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display) with possible string [values](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display#values) of `'auto'`, `'block'`, `'swap'`, `'fallback'` or `'optional'` with default value of `'swap'`.\n\nUsed in `next/font/google` and `next/font/local`\n\n- Optional\n\nExamples:\n\n- `display: 'optional'`: A string assigned to the `optional` value\n\n### `preload`\n\nA boolean value that specifies whether the font should be [preloaded](/docs/basic-features/font-optimization#preloading) or not. The default is `true`.\n\nUsed in `next/font/google` and `next/font/local`\n\n- Optional\n\nExamples:\n\n- `preload: false`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":113,"to":135}}}}],["412",{"pageContent":"`fallback`\n\nThe fallback font to use if the font cannot be loaded. An array of strings of fallback fonts with no default.\n\n- Optional\n\nUsed in `next/font/google` and `next/font/local`\n\nExamples:\n\n- `fallback: ['system-ui', 'arial']`: An array setting the fallback fonts to `system-ui` or `arial`\n\n### `adjustFontFallback`\n\n- For `next/font/google`: A boolean value that sets whether an automatic fallback font should be used to reduce [Cumulative Layout Shift](https://web.dev/cls/). The default is `true`.\n- For `next/font/local`: A string or boolean `false` value that sets whether an automatic fallback font should be used to reduce [Cumulative Layout Shift](https://web.dev/cls/). The possible values are `'Arial'`, `'Times New Roman'` or `false`. The default is `'Arial'`.\n\nUsed in `next/font/google` and `next/font/local`\n\n- Optional\n\nExamples:\n\n- `adjustFontFallback: false`: for ``next/font/google`\n- `adjustFontFallback: 'Times New Roman'`: for `next/font/local`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":137,"to":161}}}}],["413",{"pageContent":"`variable`\n\nA string value to define the CSS variable name to be used if the style is applied with the [CSS variable method](#css-variables).\n\nUsed in `next/font/google` and `next/font/local`\n\n- Optional\n\nExamples:\n\n- `variable: '--my-font'`: The CSS variable `--my-font` is declared\n\n### `declarations`\n\nAn array of font face [descriptor](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face#descriptors) key-value pairs that define the generated `@font-face` further.\n\nUsed in `next/font/local`\n\n- Optional\n\nExamples:\n\n- `declarations: [{ prop: 'ascent-override', value: '90%' }]`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":163,"to":185}}}}],["414",{"pageContent":"Applying Styles\n\nYou can apply the font styles in three ways:\n\n- [`className`](#classname)\n- [`style`](#style)\n- [CSS Variables](#css-variables)\n\n### `className`\n\nReturns a read-only CSS `className` for the loaded font to be passed to an HTML element.\n\n```tsx\n<p className={inter.className}>Hello, Next.js!</p>\n```\n\n### `style`\n\nReturns a read-only CSS `style` object for the loaded font to be passed to an HTML element, including `style.fontFamily` to access the font family name and fallback fonts.\n\n```tsx\n<p style={inter.style}>Hello World</p>\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":187,"to":209}}}}],["415",{"pageContent":"CSS Variables\n\nIf you would like to set your styles in an external style sheet and specify additional options there, use the CSS variable method.\n\nIn addition to importing the font, also import the CSS file where the CSS variable is defined and set the variable option of the font loader object as follows:\n\n```js\n// pages/index.js\nimport { Inter } from 'next/font/google'\nimport styles from '../styles/component.module.css'\n\nconst inter = Inter({\n  variable: '--inter-font',\n})\n```\n\nTo use the font, set the `className` of the parent container of the text you would like to style to the font loader's `variable` value and the `className` of the text to the `styles` property from the external CSS file.\n\n```js\n// pages/index.js\n<main className={inter.variable}>\n  <p className={styles.text}>Hello World</p>\n</main>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":211,"to":233}}}}],["416",{"pageContent":"Define the `text` selector class in the `component.module.css` CSS file as follows:\n\n```css\n/* styles/component.module.css */\n.text {\n  font-family: var(--inter-font);\n  font-weight: 200;\n  font-style: italic;\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":236,"to":244}}}}],["417",{"pageContent":"In the example above, the text `Hello World` is styled using the `Inter` font and the generated font fallback with `font-weight: 200` and `font-style: italic`.\n\n<!-- ### Using a font definitions file\n\nEvery time you call the `localFont` or Google font function, that font will be hosted as one instance in your application. Therefore, if you need to use the same font in multiple places, you should load it in one place and import the related font object where you need it. This is done using a font definitions file.\n\nFor example, create a `fonts.ts` file in a `styles` folder at the root of your app directory.\n\nThen, specify your font definitions as follows:\n\n```ts\n// styles/fonts.ts\nimport { Inter, Lora, Source_Sans_Pro } from 'next/font/google';\nimport localFont from 'next/font/local';","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":247,"to":260}}}}],["418",{"pageContent":"Then, specify your font definitions as follows:\n\n```ts\n// styles/fonts.ts\nimport { Inter, Lora, Source_Sans_Pro } from 'next/font/google';\nimport localFont from 'next/font/local';\n\n// define your variable fonts\nconst inter = Inter();\nconst lora = Lora();\n// define 2 weights of a non-variable font\nconst sourceCodePro400 = Source_Sans_Pro({ weight: '400' });\nconst sourceCodePro700 = Source_Sans_Pro({ weight: '700' });\n// define a custom local font where GreatVibes-Regular.ttf is stored in the styles folder\nconst greatVibes = localFont({ src: './GreatVibes-Regular.ttf' });\n\nexport { inter, lora, sourceCodePro400, sourceCodePro700, greatVibes };","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":260,"to":276}}}}],["419",{"pageContent":"You can now use these definitions in your code as follows:\n\n```tsx\n// app/page.tsx\nimport { inter, lora, sourceCodePro700, greatVibes } from '../styles/fonts';\n\nexport default function Page() {\n  return (\n    <div>\n      <p className={inter.className}>Hello world using Inter font</p>\n      <p style={lora.style}>Hello world using Lora font</p>\n      <p className={sourceCodePro700.className}>\n        Hello world using Source_Sans_Pro font with weight 700\n      </p>\n      <p className={greatVibes.className}>My title in Great Vibes font</p>\n    </div>\n  );\n}\n```\n\nTo make it easier to access the font definitions in your code, you can define a path alias in your `tsconfig.json` or `jsconfig.json` files as follows:\n\n```json\n// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@/fonts\": [\"./styles/fonts\"]\n    }\n  }\n}\n```\n\nYou can now import any font definition as follows:\n\n```tsx\n// app/about/page.tsx\nimport { greatVibes, sourceCodePro400 } from '@/fonts';\n``` -->","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":279,"to":317}}}}],["420",{"pageContent":"Next Steps\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/font-optimization.md\">\n    <b>Font Optimization</b>\n    <small>Learn how to optimize fonts with the Font module.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/font.md","loc":{"lines":{"from":319,"to":326}}}}],["421",{"pageContent":"---\ndescription: Add custom elements to the `head` of your page with the built-in Head component.\n---\n\n# next/head\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/head-elements\">Head Elements</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/layout-component\">Layout Component</a></li>\n  </ul>\n</details>\n\nWe expose a built-in component for appending elements to the `head` of the page:\n\n```jsx\nimport Head from 'next/head'\n\nfunction IndexPage() {\n  return (\n    <div>\n      <Head>\n        <title>My page title</title>\n      </Head>\n      <p>Hello world!</p>\n    </div>\n  )\n}\n\nexport default IndexPage","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/head.md","loc":{"lines":{"from":1,"to":31}}}}],["422",{"pageContent":"To avoid duplicate tags in your `head` you can use the `key` property, which will make sure the tag is only rendered once, as in the following example:\n\n```jsx\nimport Head from 'next/head'\n\nfunction IndexPage() {\n  return (\n    <div>\n      <Head>\n        <title>My page title</title>\n        <meta property=\"og:title\" content=\"My page title\" key=\"title\" />\n      </Head>\n      <Head>\n        <meta property=\"og:title\" content=\"My new title\" key=\"title\" />\n      </Head>\n      <p>Hello world!</p>\n    </div>\n  )\n}\n\nexport default IndexPage","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/head.md","loc":{"lines":{"from":34,"to":54}}}}],["423",{"pageContent":"In this case only the second `<meta property=\"og:title\" />` is rendered. `meta` tags with duplicate `key` attributes are automatically handled.\n\n> The contents of `head` get cleared upon unmounting the component, so make sure each page completely defines what it needs in `head`, without making assumptions about what other pages added.\n\n`title`, `meta` or any other elements (e.g. `script`) need to be contained as **direct** children of the `Head` element,\nor wrapped into maximum one level of `<React.Fragment>` or arrays—otherwise the tags won't be correctly picked up on client-side navigations.\n\n> We recommend using [next/script](/docs/basic-features/script.md) in your component instead of manually creating a `<script>` in `next/head`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/head.md","loc":{"lines":{"from":57,"to":64}}}}],["424",{"pageContent":"---\ndescription: Enable Image Optimization with the built-in Image component.\n---\n\n# next/image\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/image-component\">Image Component</a></li>\n  </ul>\n</details>\n\n<details>\n  <summary><b>Version History</b></summary>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":1,"to":15}}}}],["425",{"pageContent":"| Version   | Changes                                                                                                                                                                                                                  |\n| --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| `v13.2.0` | `contentDispositionType` configuration added.                                                                                                                                                                            |\n| `v13.0.6` | `ref` prop added.                                                                                                                                                                                                        |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":17,"to":20}}}}],["426",{"pageContent":"| `v13.0.0` | `<span>` wrapper removed. `layout`, `objectFit`, `objectPosition`, `lazyBoundary`, `lazyRoot` props removed. `alt` is required. `onLoadingComplete` receives reference to `img` element. Built-in loader config removed. |\n| `v12.3.0` | `remotePatterns` and `unoptimized` configuration is stable.                                                                                                                                                              |\n| `v12.2.0` | Experimental `remotePatterns` and experimental `unoptimized` configuration added. `layout=\"raw\"` removed.                                                                                                                |\n| `v12.1.1` | `style` prop added. Experimental[\\*](#experimental-raw-layout-mode) support for `layout=\"raw\"` added.                                                                                                                    |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":21,"to":24}}}}],["427",{"pageContent":"| `v12.1.0` | `dangerouslyAllowSVG` and `contentSecurityPolicy` configuration added.                                                                                                                                                   |\n| `v12.0.9` | `lazyRoot` prop added.                                                                                                                                                                                                   |\n| `v12.0.0` | `formats` configuration added.<br/>AVIF support added.<br/>Wrapper `<div>` changed to `<span>`.                                                                                                                          |\n| `v11.1.0` | `onLoadingComplete` and `lazyBoundary` props added.                                                                                                                                                                      |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":25,"to":28}}}}],["428",{"pageContent":"| `v11.0.0` | `src` prop support for static import.<br/>`placeholder` prop added.<br/>`blurDataURL` prop added.                                                                                                                        |\n| `v10.0.5` | `loader` prop added.                                                                                                                                                                                                     |\n| `v10.0.1` | `layout` prop added.                                                                                                                                                                                                     |\n| `v10.0.0` | `next/image` introduced.                                                                                                                                                                                                 |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":29,"to":32}}}}],["429",{"pageContent":"</details>\n\n> **Note**: This page is the API reference for the `next/image` component. For a feature overview and usage information, please see the [Image Component and Image Optimization](/docs/basic-features/image-optimization.md) documentation.\n\n> **Note**: If you are using a version of Next.js prior to 13, you'll want to use the [next/legacy/image](/docs/api-reference/next/legacy/image.md) documentation since the component was renamed.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":34,"to":38}}}}],["430",{"pageContent":"> **Note**: If you are using a version of Next.js prior to 13, you'll want to use the [next/legacy/image](/docs/api-reference/next/legacy/image.md) documentation since the component was renamed.\n\nThis `next/image` component uses browser native [lazy loading](https://caniuse.com/loading-lazy-attr), which may fallback to eager loading for older browsers before Safari 15.4. When using the blur-up placeholder, older browsers before Safari 12 will fallback to empty placeholder. When using styles with `width`/`height` of `auto`, it is possible to cause [Layout Shift](https://web.dev/cls/) on older browsers before Safari 15 that don't [preserve the aspect ratio](https://caniuse.com/mdn-html_elements_img_aspect_ratio_computed_from_attributes). For more details, see [this MDN video](https://www.youtube.com/watch?v=4-d_SoCHeWE).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":38,"to":40}}}}],["431",{"pageContent":"Known Browser Bugs\n\n- [Safari 15 and 16](https://bugs.webkit.org/show_bug.cgi?id=243601) display a gray border while loading. Safari 16.4 [fixed this issue](https://webkit.org/blog/13966/webkit-features-in-safari-16-4/#:~:text=Now%20in%20Safari%2016.4%2C%20a%20gray%20line%20no%20longer%20appears%20to%20mark%20the%20space%20where%20a%20lazy%2Dloaded%20image%20will%20appear%20once%20it%E2%80%99s%20been%20loaded.). Possible solutions:\n  - Use CSS `@supports (font: -apple-system-body) and (-webkit-appearance: none) { img[loading=\"lazy\"] { clip-path: inset(0.6px) } }`\n  - Use [`priority`](#priority) if the image is above the fold\n- [Firefox 67+](https://bugzilla.mozilla.org/show_bug.cgi?id=1556156) displays a white background while loading. Possible solutions:\n  - Enable [AVIF `formats`](#acceptable-formats)\n  - Use [`placeholder=\"blur\"`](#placeholder)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":42,"to":49}}}}],["432",{"pageContent":"Required Props\n\nThe `<Image />` component requires the following properties.\n\n### src\n\nMust be one of the following:\n\n1. A [statically imported](/docs/basic-features/image-optimization.md#local-images) image file, or\n2. A path string. This can be either an absolute external URL,\n   or an internal path depending on the [loader](#loader) prop.\n\nWhen using an external URL, you must add it to [remotePatterns](#remote-patterns) in `next.config.js`.\n\n### width\n\nThe `width` property represents the _rendered_ width in pixels, so it will affect how large the image appears.\n\nRequired, except for [statically imported images](/docs/basic-features/image-optimization.md#local-images) or images with the [`fill` property](#fill).\n\n### height\n\nThe `height` property represents the _rendered_ height in pixels, so it will affect how large the image appears.\n\nRequired, except for [statically imported images](/docs/basic-features/image-optimization.md#local-images) or images with the [`fill` property](#fill).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":51,"to":75}}}}],["433",{"pageContent":"alt\n\nThe `alt` property is used to describe the image for screen readers and search engines. It is also the fallback text if images have been disabled or an error occurs while loading the image.\n\nIt should contain text that could replace the image [without changing the meaning of the page](https://html.spec.whatwg.org/multipage/images.html#general-guidelines). It is not meant to supplement the image and should not repeat information that is already provided in the captions above or below the image.\n\nIf the image is [purely decorative](https://html.spec.whatwg.org/multipage/images.html#a-purely-decorative-image-that-doesn't-add-any-information) or [not intended for the user](https://html.spec.whatwg.org/multipage/images.html#an-image-not-intended-for-the-user), the `alt` property should be an empty string (`alt=\"\"`).\n\n[Learn more](https://html.spec.whatwg.org/multipage/images.html#alt)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":77,"to":85}}}}],["434",{"pageContent":"Optional Props\n\nThe `<Image />` component accepts a number of additional properties beyond those which are required. This section describes the most commonly-used properties of the Image component. Find details about more rarely-used properties in the [Advanced Props](#advanced-props) section.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":87,"to":89}}}}],["435",{"pageContent":"loader\n\nA custom function used to resolve image URLs.\n\nA `loader` is a function returning a URL string for the image, given the following parameters:\n\n- [`src`](#src)\n- [`width`](#width)\n- [`quality`](#quality)\n\nHere is an example of using a custom loader:\n\n```js\nimport Image from 'next/image'\n\nconst myLoader = ({ src, width, quality }) => {\n  return `https://example.com/${src}?w=${width}&q=${quality || 75}`\n}\n\nconst MyImage = (props) => {\n  return (\n    <Image\n      loader={myLoader}\n      src=\"me.png\"\n      alt=\"Picture of the author\"\n      width={500}\n      height={500}\n    />\n  )\n}\n```\n\nAlternatively, you can use the [loaderFile](#loader-configuration) configuration in next.config.js to configure every instance of `next/image` in your application, without passing a prop.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":91,"to":123}}}}],["436",{"pageContent":"fill\n\nA boolean that causes the image to fill the parent element instead of setting [`width`](#width) and [`height`](#height).\n\nThe parent element _must_ assign `position: \"relative\"`, `position: \"fixed\"`, or `position: \"absolute\"` style.\n\nBy default, the img element will automatically be assigned the `position: \"absolute\"` style.\n\nThe default image fit behavior will stretch the image to fit the container. You may prefer to set `object-fit: \"contain\"` for an image which is letterboxed to fit the container and preserve aspect ratio.\n\nAlternatively, `object-fit: \"cover\"` will cause the image to fill the entire container and be cropped to preserve aspect ratio. For this to look correct, the `overflow: \"hidden\"` style should be assigned to the parent element.\n\nSee also:\n\n- [position](https://developer.mozilla.org/en-US/docs/Web/CSS/position)\n- [object-fit](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)\n- [object-position](https://developer.mozilla.org/en-US/docs/Web/CSS/object-position)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":125,"to":141}}}}],["437",{"pageContent":"sizes\n\nA string that provides information about how wide the image will be at different breakpoints. The value of `sizes` will greatly affect performance for images using [`fill`](#fill) or which are styled to have a responsive size.\n\nThe `sizes` property serves two important purposes related to image performance:\n\nFirst, the value of `sizes` is used by the browser to determine which size of the image to download, from `next/image`'s automatically-generated source set. When the browser chooses, it does not yet know the size of the image on the page, so it selects an image that is the same size or larger than the viewport. The `sizes` property allows you to tell the browser that the image will actually be smaller than full screen. If you don't specify a `sizes` value in an image with the `fill` property, a default value of `100vw` (full screen width) is used.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":143,"to":149}}}}],["438",{"pageContent":"Second, the `sizes` property configures how `next/image` automatically generates an image source set. If no `sizes` value is present, a small source set is generated, suitable for a fixed-size image. If `sizes` is defined, a large source set is generated, suitable for a responsive image. If the `sizes` property includes sizes such as `50vw`, which represent a percentage of the viewport width, then the source set is trimmed to not include any values which are too small to ever be necessary.\n\nFor example, if you know your styling will cause an image to be full-width on mobile devices, in a 2-column layout on tablets, and a 3-column layout on desktop displays, you should include a sizes property such as the following:\n\n```js\nimport Image from 'next/image'\nconst Example = () => (\n  <div className=\"grid-element\">\n    <Image\n      src=\"/example.png\"\n      fill\n      sizes=\"(max-width: 768px) 100vw,\n              (max-width: 1200px) 50vw,\n              33vw\"\n    />\n  </div>\n)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":151,"to":167}}}}],["439",{"pageContent":"This example `sizes` could have a dramatic effect on performance metrics. Without the `33vw` sizes, the image selected from the server would be 3 times as wide as it needs to be. Because file size is proportional to the square of the width, without `sizes` the user would download an image that's 9 times larger than necessary.\n\nLearn more about `srcset` and `sizes`:\n\n- [web.dev](https://web.dev/learn/design/responsive-images/#sizes)\n- [mdn](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-sizes)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":170,"to":175}}}}],["440",{"pageContent":"quality\n\nThe quality of the optimized image, an integer between `1` and `100`, where `100` is the best quality and therefore largest file size. Defaults to `75`.\n\n### priority\n\nWhen true, the image will be considered high priority and\n[preload](https://web.dev/preload-responsive-images/). Lazy loading is automatically disabled for images using `priority`.\n\nYou should use the `priority` property on any image detected as the [Largest Contentful Paint (LCP)](https://nextjs.org/learn/seo/web-performance/lcp) element. It may be appropriate to have multiple priority images, as different images may be the LCP element for different viewport sizes.\n\nShould only be used when the image is visible above the fold. Defaults to `false`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":177,"to":188}}}}],["441",{"pageContent":"placeholder\n\nA placeholder to use while the image is loading. Possible values are `blur` or `empty`. Defaults to `empty`.\n\nWhen `blur`, the [`blurDataURL`](#blurdataurl) property will be used as the placeholder. If `src` is an object from a [static import](/docs/basic-features/image-optimization.md#local-images) and the imported image is `.jpg`, `.png`, `.webp`, or `.avif`, then `blurDataURL` will be automatically populated.\n\nFor dynamic images, you must provide the [`blurDataURL`](#blurdataurl) property. Solutions such as [Plaiceholder](https://github.com/joe-bell/plaiceholder) can help with `base64` generation.\n\nWhen `empty`, there will be no placeholder while the image is loading, only empty space.\n\nTry it out:\n\n- [Demo the `blur` placeholder](https://image-component.nextjs.gallery/placeholder)\n- [Demo the shimmer effect with `blurDataURL` prop](https://image-component.nextjs.gallery/shimmer)\n- [Demo the color effect with `blurDataURL` prop](https://image-component.nextjs.gallery/color)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":190,"to":204}}}}],["442",{"pageContent":"Advanced Props\n\nIn some cases, you may need more advanced usage. The `<Image />` component optionally accepts the following advanced properties.\n\n### style\n\nAllows [passing CSS styles](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style) to the underlying image element.\n\nAlso keep in mind that the required `width` and `height` props can interact with your styling. If you use styling to modify an image's `width`, you must set the `height=\"auto\"` style as well, or your image will be distorted.\n\n### onLoadingComplete\n\nA callback function that is invoked once the image is completely loaded and the [placeholder](#placeholder) has been removed.\n\nThe callback function will be called with one argument, a reference to the underlying `<img>` element.\n\n### onLoad\n\nA callback function that is invoked when the image is loaded.\n\nNote that the load event might occur before the placeholder is removed and the image is fully decoded.\n\nInstead, use [`onLoadingComplete`](#onloadingcomplete).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":206,"to":228}}}}],["443",{"pageContent":"onError\n\nA callback function that is invoked if the image fails to load.\n\n### loading\n\n> **Attention**: This property is only meant for advanced usage. Switching an\n> image to load with `eager` will normally **hurt performance**.\n>\n> We recommend using the [`priority`](#priority) property instead, which\n> properly loads the image eagerly for nearly all use cases.\n\nThe loading behavior of the image. Defaults to `lazy`.\n\nWhen `lazy`, defer loading the image until it reaches a calculated distance from\nthe viewport.\n\nWhen `eager`, load the image immediately.\n\n[Learn more](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-loading)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":230,"to":249}}}}],["444",{"pageContent":"blurDataURL\n\nA [Data URL](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) to\nbe used as a placeholder image before the `src` image successfully loads. Only takes effect when combined\nwith [`placeholder=\"blur\"`](#placeholder).\n\nMust be a base64-encoded image. It will be enlarged and blurred, so a very small image (10px or\nless) is recommended. Including larger images as placeholders may harm your application performance.\n\nTry it out:\n\n- [Demo the default `blurDataURL` prop](https://image-component.nextjs.gallery/placeholder)\n- [Demo the shimmer effect with `blurDataURL` prop](https://image-component.nextjs.gallery/shimmer)\n- [Demo the color effect with `blurDataURL` prop](https://image-component.nextjs.gallery/color)\n\nYou can also [generate a solid color Data URL](https://png-pixel.com) to match the image.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":251,"to":266}}}}],["445",{"pageContent":"unoptimized\n\nWhen true, the source image will be served as-is instead of changing quality,\nsize, or format. Defaults to `false`.\n\n```js\nimport Image from 'next/image'\n\nconst UnoptimizedImage = (props) => {\n  return <Image {...props} unoptimized />\n}\n```\n\nSince Next.js 12.3.0, this prop can be assigned to all images by updating `next.config.js` with the following configuration:\n\n```js\nmodule.exports = {\n  images: {\n    unoptimized: true,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":268,"to":289}}}}],["446",{"pageContent":"Other Props\n\nOther properties on the `<Image />` component will be passed to the underlying\n`img` element with the exception of the following:\n\n- `srcSet`. Use [Device Sizes](#device-sizes) instead.\n- `decoding`. It is always `\"async\"`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":291,"to":297}}}}],["447",{"pageContent":"Configuration Options","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":299,"to":299}}}}],["448",{"pageContent":"Remote Patterns\n\nTo protect your application from malicious users, configuration is required in order to use external images. This ensures that only external images from your account can be served from the Next.js Image Optimization API. These external images can be configured with the `remotePatterns` property in your `next.config.js` file, as shown below:\n\n```js\nmodule.exports = {\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'example.com',\n        port: '',\n        pathname: '/account123/**',\n      },\n    ],\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":301,"to":317}}}}],["449",{"pageContent":"> Note: The example above will ensure the `src` property of `next/image` must start with `https://example.com/account123/`. Any other protocol, hostname, port, or unmatched path will respond with 400 Bad Request.\n\nBelow is another example of the `remotePatterns` property in the `next.config.js` file:\n\n```js\nmodule.exports = {\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: '**.example.com',\n      },\n    ],\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":320,"to":334}}}}],["450",{"pageContent":"> Note: The example above will ensure the `src` property of `next/image` must start with `https://img1.example.com` or `https://me.avatar.example.com` or any number of subdomains. Any other protocol or unmatched hostname will respond with 400 Bad Request.\n\nWildcard patterns can be used for both `pathname` and `hostname` and have the following syntax:\n\n- `*` match a single path segment or subdomain\n- `**` match any number of path segments at the end or subdomains at the beginning\n\nThe `**` syntax does not work in the middle of the pattern.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":337,"to":344}}}}],["451",{"pageContent":"Domains\n\n> Note: We recommend using [`remotePatterns`](#remote-patterns) instead so you can restrict protocol and pathname.\n\nSimilar to [`remotePatterns`](#remote-patterns), the `domains` configuration can be used to provide a list of allowed hostnames for external images.\n\nHowever, the `domains` configuration does not support wildcard pattern matching and it cannot restrict protocol, port, or pathname.\n\nBelow is an example of the `domains` property in the `next.config.js` file:\n\n```js\nmodule.exports = {\n  images: {\n    domains: ['assets.acme.com'],\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":346,"to":362}}}}],["452",{"pageContent":"Loader Configuration\n\nIf you want to use a cloud provider to optimize images instead of using the Next.js built-in Image Optimization API, you can configure the `loaderFile` in your `next.config.js` like the following:\n\n```js\nmodule.exports = {\n  images: {\n    loader: 'custom',\n    loaderFile: './my/image/loader.js',\n  },\n}\n```\n\nThis must point to a file relative to the root of your Next.js application. The file must export a default function that returns a string, for example:\n\n```js\nexport default function myImageLoader({ src, width, quality }) {\n  return `https://example.com/${src}?w=${width}&q=${quality || 75}`\n}\n```\n\nAlternatively, you can use the [`loader` prop](#loader) to configure each instance of `next/image`.\n\nExamples:\n\n- [Custom Image Loader Configuration](/docs/api-reference/next.config.js/custom-image-loader-config.md#example-loader-configuration)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":364,"to":389}}}}],["453",{"pageContent":"Advanced\n\nThe following configuration is for advanced use cases and is usually not necessary. If you choose to configure the properties below, you will override any changes to the Next.js defaults in future updates.\n\n### Device Sizes\n\nIf you know the expected device widths of your users, you can specify a list of device width breakpoints using the `deviceSizes` property in `next.config.js`. These widths are used when the `next/image` component uses [`sizes`](#sizes) prop to ensure the correct image is served for user's device.\n\nIf no configuration is provided, the default below is used.\n\n```js\nmodule.exports = {\n  images: {\n    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":391,"to":407}}}}],["454",{"pageContent":"Image Sizes\n\nYou can specify a list of image widths using the `images.imageSizes` property in your `next.config.js` file. These widths are concatenated with the array of [device sizes](#device-sizes) to form the full array of sizes used to generate image [srcset](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/srcset)s.\n\nThe reason there are two separate lists is that imageSizes is only used for images which provide a [`sizes`](#sizes) prop, which indicates that the image is less than the full width of the screen. **Therefore, the sizes in imageSizes should all be smaller than the smallest size in deviceSizes.**\n\nIf no configuration is provided, the default below is used.\n\n```js\nmodule.exports = {\n  images: {\n    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":409,"to":423}}}}],["455",{"pageContent":"Acceptable Formats\n\nThe default [Image Optimization API](#loader) will automatically detect the browser's supported image formats via the request's `Accept` header.\n\nIf the `Accept` head matches more than one of the configured formats, the first match in the array is used. Therefore, the array order matters. If there is no match (or the source image is [animated](#animated-images)), the Image Optimization API will fallback to the original image's format.\n\nIf no configuration is provided, the default below is used.\n\n```js\nmodule.exports = {\n  images: {\n    formats: ['image/webp'],\n  },\n}\n```\n\nYou can enable AVIF support with the following configuration.\n\n```js\nmodule.exports = {\n  images: {\n    formats: ['image/avif', 'image/webp'],\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":425,"to":448}}}}],["456",{"pageContent":"You can enable AVIF support with the following configuration.\n\n```js\nmodule.exports = {\n  images: {\n    formats: ['image/avif', 'image/webp'],\n  },\n}\n```\n\n> Note: AVIF generally takes 20% longer to encode but it compresses 20% smaller compared to WebP. This means that the first time an image is requested, it will typically be slower and then subsequent requests that are cached will be faster.\n\n> Note: If you self-host with a Proxy/CDN in front of Next.js, you must configure the Proxy to forward the `Accept` header.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":448,"to":460}}}}],["457",{"pageContent":"Caching Behavior\n\nThe following describes the caching algorithm for the default [loader](#loader). For all other loaders, please refer to your cloud provider's documentation.\n\nImages are optimized dynamically upon request and stored in the `<distDir>/cache/images` directory. The optimized image file will be served for subsequent requests until the expiration is reached. When a request is made that matches a cached but expired file, the expired image is served stale immediately. Then the image is optimized again in the background (also called revalidation) and saved to the cache with the new expiration date.\n\nThe cache status of an image can be determined by reading the value of the `x-nextjs-cache` response header. The possible values are the following:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":462,"to":468}}}}],["458",{"pageContent":"The cache status of an image can be determined by reading the value of the `x-nextjs-cache` response header. The possible values are the following:\n\n- `MISS` - the path is not in the cache (occurs at most once, on the first visit)\n- `STALE` - the path is in the cache but exceeded the revalidate time so it will be updated in the background\n- `HIT` - the path is in the cache and has not exceeded the revalidate time\n\nThe expiration (or rather Max Age) is defined by either the [`minimumCacheTTL`](#minimum-cache-ttl) configuration or the upstream image `Cache-Control` header, whichever is larger. Specifically, the `max-age` value of the `Cache-Control` header is used. If both `s-maxage` and `max-age` are found, then `s-maxage` is preferred. The `max-age` is also passed-through to any downstream clients including CDNs and browsers.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":468,"to":474}}}}],["459",{"pageContent":"- You can configure [`minimumCacheTTL`](#minimum-cache-ttl) to increase the cache duration when the upstream image does not include `Cache-Control` header or the value is very low.\n- You can configure [`deviceSizes`](#device-sizes) and [`imageSizes`](#device-sizes) to reduce the total number of possible generated images.\n- You can configure [formats](#acceptable-formats) to disable multiple formats in favor of a single image format.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":476,"to":478}}}}],["460",{"pageContent":"Minimum Cache TTL\n\nYou can configure the Time to Live (TTL) in seconds for cached optimized images. In many cases, it's better to use a [Static Image Import](/docs/basic-features/image-optimization.md#local-images) which will automatically hash the file contents and cache the image forever with a `Cache-Control` header of `immutable`.\n\n```js\nmodule.exports = {\n  images: {\n    minimumCacheTTL: 60,\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":480,"to":489}}}}],["461",{"pageContent":"The expiration (or rather Max Age) of the optimized image is defined by either the `minimumCacheTTL` or the upstream image `Cache-Control` header, whichever is larger.\n\nIf you need to change the caching behavior per image, you can configure [`headers`](/docs/api-reference/next.config.js/headers) to set the `Cache-Control` header on the upstream image (e.g. `/some-asset.jpg`, not `/_next/image` itself).\n\nThere is no mechanism to invalidate the cache at this time, so its best to keep `minimumCacheTTL` low. Otherwise you may need to manually change the [`src`](#src) prop or delete `<distDir>/cache/images`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":492,"to":496}}}}],["462",{"pageContent":"Disable Static Imports\n\nThe default behavior allows you to import static files such as `import icon from './icon.png` and then pass that to the `src` property.\n\nIn some cases, you may wish to disable this feature if it conflicts with other plugins that expect the import to behave differently.\n\nYou can disable static image imports inside your `next.config.js`:\n\n```js\nmodule.exports = {\n  images: {\n    disableStaticImages: true,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":498,"to":512}}}}],["463",{"pageContent":"Dangerously Allow SVG\n\nThe default [loader](#loader) does not optimize SVG images for a few reasons. First, SVG is a vector format meaning it can be resized losslessly. Second, SVG has many of the same features as HTML/CSS, which can lead to vulnerabilities without proper [Content Security Policy (CSP) headers](/docs/advanced-features/security-headers.md).\n\nIf you need to serve SVG images with the default Image Optimization API, you can set `dangerouslyAllowSVG` inside your `next.config.js`:\n\n```js\nmodule.exports = {\n  images: {\n    dangerouslyAllowSVG: true,\n    contentDispositionType: 'attachment',\n    contentSecurityPolicy: \"default-src 'self'; script-src 'none'; sandbox;\",\n  },\n}\n```\n\nIn addition, it is strongly recommended to also set `contentDispositionType` to force the browser to download the image, as well as `contentSecurityPolicy` to prevent scripts embedded in the image from executing.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":514,"to":530}}}}],["464",{"pageContent":"Animated Images\n\nThe default [loader](#loader) will automatically bypass Image Optimization for animated images and serve the image as-is.\n\nAuto-detection for animated files is best-effort and supports GIF, APNG, and WebP. If you want to explicitly bypass Image Optimization for a given animated image, use the [unoptimized](#unoptimized) prop.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":532,"to":536}}}}],["465",{"pageContent":"Related\n\nFor an overview of the Image component features and usage guidelines, see:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/image-optimization.md\">\n    <b>Images</b>\n    <small>Learn how to display and optimize images with the Image component.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/image.md","loc":{"lines":{"from":538,"to":547}}}}],["466",{"pageContent":"---\ndescription: Backwards compatible Image Optimization with the Legacy Image component.\n---\n\n# next/legacy/image\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/image-legacy-component\">Legacy Image Component</a></li>\n  </ul>\n</details>\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes                                     |\n| --------- | ------------------------------------------- |\n| `v13.0.0` | `next/image` renamed to `next/legacy/image` |\n\n</details>\n\nStarting with Next.js 13, the `next/image` component was rewritten to improve both the performance and developer experience. In order to provide a backwards compatible upgrade solution, the old `next/image` was renamed to `next/legacy/image`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":1,"to":23}}}}],["467",{"pageContent":"Comparison\n\nCompared to `next/legacy/image`, the new `next/image` component has the following changes:\n\n- Removes `<span>` wrapper around `<img>` in favor of [native computed aspect ratio](https://caniuse.com/mdn-html_elements_img_aspect_ratio_computed_from_attributes)\n- Adds support for canonical `style` prop\n  - Removes `layout` prop in favor of `style` or `className`\n  - Removes `objectFit` prop in favor of `style` or `className`\n  - Removes `objectPosition` prop in favor of `style` or `className`\n- Removes `IntersectionObserver` implementation in favor of [native lazy loading](https://caniuse.com/loading-lazy-attr)\n  - Removes `lazyBoundary` prop since there is no native equivalent\n  - Removes `lazyRoot` prop since there is no native equivalent\n- Removes `loader` config in favor of [`loader`](#loader) prop\n- Changed `alt` prop from optional to required\n- Changed `onLoadingComplete` callback to receive reference to `<img>` element","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":25,"to":39}}}}],["468",{"pageContent":"Required Props\n\nThe `<Image />` component requires the following properties.\n\n### src\n\nMust be one of the following:\n\n1. A [statically imported](/docs/basic-features/image-optimization.md#local-images) image file, or\n2. A path string. This can be either an absolute external URL,\n   or an internal path depending on the [loader](#loader) prop or [loader configuration](#loader-configuration).\n\nWhen using an external URL, you must add it to\n[remotePatterns](#remote-patterns) in\n`next.config.js`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":41,"to":55}}}}],["469",{"pageContent":"width\n\nThe `width` property can represent either the _rendered_ width or _original_ width in pixels, depending on the [`layout`](#layout) and [`sizes`](#sizes) properties.\n\nWhen using `layout=\"intrinsic\"` or `layout=\"fixed\"` the `width` property represents the _rendered_ width in pixels, so it will affect how large the image appears.\n\nWhen using `layout=\"responsive\"`, `layout=\"fill\"`, the `width` property represents the _original_ width in pixels, so it will only affect the aspect ratio.\n\nThe `width` property is required, except for [statically imported images](/docs/basic-features/image-optimization.md#local-images), or those with `layout=\"fill\"`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":57,"to":65}}}}],["470",{"pageContent":"height\n\nThe `height` property can represent either the _rendered_ height or _original_ height in pixels, depending on the [`layout`](#layout) and [`sizes`](#sizes) properties.\n\nWhen using `layout=\"intrinsic\"` or `layout=\"fixed\"` the `height` property represents the _rendered_ height in pixels, so it will affect how large the image appears.\n\nWhen using `layout=\"responsive\"`, `layout=\"fill\"`, the `height` property represents the _original_ height in pixels, so it will only affect the aspect ratio.\n\nThe `height` property is required, except for [statically imported images](/docs/basic-features/image-optimization.md#local-images), or those with `layout=\"fill\"`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":67,"to":75}}}}],["471",{"pageContent":"Optional Props\n\nThe `<Image />` component accepts a number of additional properties beyond those which are required. This section describes the most commonly-used properties of the Image component. Find details about more rarely-used properties in the [Advanced Props](#advanced-props) section.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":77,"to":79}}}}],["472",{"pageContent":"layout\n\nThe layout behavior of the image as the viewport changes size.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":81,"to":83}}}}],["473",{"pageContent":"| `layout`              | Behavior                                                 | `srcSet`                                                                                                    | `sizes` | Has wrapper and sizer |\n| --------------------- | -------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- | ------- | --------------------- |\n| `intrinsic` (default) | Scale *down* to fit width of container, up to image size | `1x`, `2x` (based on [imageSizes](#image-sizes))                                                            | N/A     | yes                   |\n| `fixed`               | Sized to `width` and `height` exactly                    | `1x`, `2x` (based on [imageSizes](#image-sizes))                                                            | N/A     | yes                   |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":85,"to":88}}}}],["474",{"pageContent":"| `responsive`          | Scale to fit width of container                          | `640w`, `750w`, ... `2048w`, `3840w` (based on [imageSizes](#image-sizes) and [deviceSizes](#device-sizes)) | `100vw` | yes                   |\n| `fill`                | Grow in both X and Y axes to fill container              | `640w`, `750w`, ... `2048w`, `3840w` (based on [imageSizes](#image-sizes) and [deviceSizes](#device-sizes)) | `100vw` | yes                   |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":89,"to":90}}}}],["475",{"pageContent":"- [Demo the `intrinsic` layout (default)](https://image-legacy-component.nextjs.gallery/layout-intrinsic)\n  - When `intrinsic`, the image will scale the dimensions down for smaller viewports, but maintain the original dimensions for larger viewports.\n- [Demo the `fixed` layout](https://image-legacy-component.nextjs.gallery/layout-fixed)\n  - When `fixed`, the image dimensions will not change as the viewport changes (no responsiveness) similar to the native `img` element.\n- [Demo the `responsive` layout](https://image-legacy-component.nextjs.gallery/layout-responsive)\n  - When `responsive`, the image will scale the dimensions down for smaller viewports and scale up for larger viewports.\n  - Ensure the parent element uses `display: block` in their stylesheet.\n- [Demo the `fill` layout](https://image-legacy-component.nextjs.gallery/layout-fill)\n  - When `fill`, the image will stretch both width and height to the dimensions of the parent element, provided the parent element is relative.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":92,"to":100}}}}],["476",{"pageContent":"- When `fill`, the image will stretch both width and height to the dimensions of the parent element, provided the parent element is relative.\n  - This is usually paired with the [`objectFit`](#objectFit) property.\n  - Ensure the parent element has `position: relative` in their stylesheet.\n- [Demo background image](https://image-legacy-component.nextjs.gallery/background)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":100,"to":103}}}}],["477",{"pageContent":"loader\n\nA custom function used to resolve URLs. Setting the loader as a prop on the Image component overrides the default loader defined in the [`images` section of `next.config.js`](#loader-configuration).\n\nA `loader` is a function returning a URL string for the image, given the following parameters:\n\n- [`src`](#src)\n- [`width`](#width)\n- [`quality`](#quality)\n\nHere is an example of using a custom loader:\n\n```js\nimport Image from 'next/legacy/image'\n\nconst myLoader = ({ src, width, quality }) => {\n  return `https://example.com/${src}?w=${width}&q=${quality || 75}`\n}\n\nconst MyImage = (props) => {\n  return (\n    <Image\n      loader={myLoader}\n      src=\"me.png\"\n      alt=\"Picture of the author\"\n      width={500}\n      height={500}\n    />\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":105,"to":135}}}}],["478",{"pageContent":"sizes\n\nA string that provides information about how wide the image will be at different breakpoints. The value of `sizes` will greatly affect performance for images using `layout=\"responsive\"` or `layout=\"fill\"`. It will be ignored for images using `layout=\"intrinsic\"` or `layout=\"fixed\"`.\n\nThe `sizes` property serves two important purposes related to image performance:\n\nFirst, the value of `sizes` is used by the browser to determine which size of the image to download, from `next/legacy/image`'s automatically-generated source set. When the browser chooses, it does not yet know the size of the image on the page, so it selects an image that is the same size or larger than the viewport. The `sizes` property allows you to tell the browser that the image will actually be smaller than full screen. If you don't specify a `sizes` value, a default value of `100vw` (full screen width) is used.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":137,"to":143}}}}],["479",{"pageContent":"Second, the `sizes` value is parsed and used to trim the values in the automatically-created source set. If the `sizes` property includes sizes such as `50vw`, which represent a percentage of the viewport width, then the source set is trimmed to not include any values which are too small to ever be necessary.\n\nFor example, if you know your styling will cause an image to be full-width on mobile devices, in a 2-column layout on tablets, and a 3-column layout on desktop displays, you should include a sizes property such as the following:\n\n```js\nimport Image from 'next/legacy/image'\nconst Example = () => (\n  <div className=\"grid-element\">\n    <Image\n      src=\"/example.png\"\n      layout=\"fill\"\n      sizes=\"(max-width: 768px) 100vw,\n              (max-width: 1200px) 50vw,\n              33vw\"\n    />\n  </div>\n)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":145,"to":161}}}}],["480",{"pageContent":"This example `sizes` could have a dramatic effect on performance metrics. Without the `33vw` sizes, the image selected from the server would be 3 times as wide as it needs to be. Because file size is proportional to the square of the width, without `sizes` the user would download an image that's 9 times larger than necessary.\n\nLearn more about `srcset` and `sizes`:\n\n- [web.dev](https://web.dev/learn/design/responsive-images/#sizes)\n- [mdn](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-sizes)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":164,"to":169}}}}],["481",{"pageContent":"quality\n\nThe quality of the optimized image, an integer between `1` and `100` where `100` is the best quality. Defaults to `75`.\n\n### priority\n\nWhen true, the image will be considered high priority and\n[preload](https://web.dev/preload-responsive-images/). Lazy loading is automatically disabled for images using `priority`.\n\nYou should use the `priority` property on any image detected as the [Largest Contentful Paint (LCP)](https://nextjs.org/learn/seo/web-performance/lcp) element. It may be appropriate to have multiple priority images, as different images may be the LCP element for different viewport sizes.\n\nShould only be used when the image is visible above the fold. Defaults to `false`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":171,"to":182}}}}],["482",{"pageContent":"placeholder\n\nA placeholder to use while the image is loading. Possible values are `blur` or `empty`. Defaults to `empty`.\n\nWhen `blur`, the [`blurDataURL`](#blurdataurl) property will be used as the placeholder. If `src` is an object from a [static import](/docs/basic-features/image-optimization.md#local-images) and the imported image is `.jpg`, `.png`, `.webp`, or `.avif`, then `blurDataURL` will be automatically populated.\n\nFor dynamic images, you must provide the [`blurDataURL`](#blurdataurl) property. Solutions such as [Plaiceholder](https://github.com/joe-bell/plaiceholder) can help with `base64` generation.\n\nWhen `empty`, there will be no placeholder while the image is loading, only empty space.\n\nTry it out:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":184,"to":194}}}}],["483",{"pageContent":"When `empty`, there will be no placeholder while the image is loading, only empty space.\n\nTry it out:\n\n- [Demo the `blur` placeholder](https://image-legacy-component.nextjs.gallery/placeholder)\n- [Demo the shimmer effect with `blurDataURL` prop](https://image-legacy-component.nextjs.gallery/shimmer)\n- [Demo the color effect with `blurDataURL` prop](https://image-legacy-component.nextjs.gallery/color)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":194,"to":200}}}}],["484",{"pageContent":"Advanced Props\n\nIn some cases, you may need more advanced usage. The `<Image />` component optionally accepts the following advanced properties.\n\n### style\n\nAllows [passing CSS styles](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style) to the underlying image element.\n\nNote that all `layout` modes apply their own styles to the image element, and these automatic styles take precedence over the `style` prop.\n\nAlso keep in mind that the required `width` and `height` props can interact with your styling. If you use styling to modify an image's `width`, you must set the `height=\"auto\"` style as well, or your image will be distorted.\n\n### objectFit\n\nDefines how the image will fit into its parent container when using `layout=\"fill\"`.\n\nThis value is passed to the [object-fit CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit) for the `src` image.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":202,"to":218}}}}],["485",{"pageContent":"objectPosition\n\nDefines how the image is positioned within its parent element when using `layout=\"fill\"`.\n\nThis value is passed to the [object-position CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/object-position) applied to the image.\n\n### onLoadingComplete\n\nA callback function that is invoked once the image is completely loaded and the [placeholder](#placeholder) has been removed.\n\nThe `onLoadingComplete` function accepts one parameter, an object with the following properties:\n\n- [`naturalWidth`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/naturalWidth)\n- [`naturalHeight`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/naturalHeight)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":220,"to":233}}}}],["486",{"pageContent":"loading\n\n> **Attention**: This property is only meant for advanced usage. Switching an\n> image to load with `eager` will normally **hurt performance**.\n>\n> We recommend using the [`priority`](#priority) property instead, which\n> properly loads the image eagerly for nearly all use cases.\n\nThe loading behavior of the image. Defaults to `lazy`.\n\nWhen `lazy`, defer loading the image until it reaches a calculated distance from\nthe viewport.\n\nWhen `eager`, load the image immediately.\n\n[Learn more](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-loading)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":235,"to":250}}}}],["487",{"pageContent":"blurDataURL\n\nA [Data URL](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs) to\nbe used as a placeholder image before the `src` image successfully loads. Only takes effect when combined\nwith [`placeholder=\"blur\"`](#placeholder).\n\nMust be a base64-encoded image. It will be enlarged and blurred, so a very small image (10px or\nless) is recommended. Including larger images as placeholders may harm your application performance.\n\nTry it out:\n\n- [Demo the default `blurDataURL` prop](https://image-legacy-component.nextjs.gallery/placeholder)\n- [Demo the shimmer effect with `blurDataURL` prop](https://image-legacy-component.nextjs.gallery/shimmer)\n- [Demo the color effect with `blurDataURL` prop](https://image-legacy-component.nextjs.gallery/color)\n\nYou can also [generate a solid color Data URL](https://png-pixel.com) to match the image.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":252,"to":267}}}}],["488",{"pageContent":"lazyBoundary\n\nA string (with similar syntax to the margin property) that acts as the bounding box used to detect the intersection of the viewport with the image and trigger lazy [loading](#loading). Defaults to `\"200px\"`.\n\nIf the image is nested in a scrollable parent element other than the root document, you will also need to assign the [lazyRoot](#lazyroot) prop.\n\n[Learn more](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":269,"to":275}}}}],["489",{"pageContent":"lazyRoot\n\nA React [Ref](https://react.dev/learn/referencing-values-with-refs) pointing to the scrollable parent element. Defaults to `null` (the document viewport).\n\nThe Ref must point to a DOM element or a React component that [forwards the Ref](https://react.dev/reference/react/forwardRef) to the underlying DOM element.\n\n**Example pointing to a DOM element**\n\n```jsx\nimport Image from 'next/legacy/image'\nimport React from 'react'\n\nconst Example = () => {\n  const lazyRoot = React.useRef(null)\n\n  return (\n    <div ref={lazyRoot} style={{ overflowX: 'scroll', width: '500px' }}>\n      <Image lazyRoot={lazyRoot} src=\"/one.jpg\" width=\"500\" height=\"500\" />\n      <Image lazyRoot={lazyRoot} src=\"/two.jpg\" width=\"500\" height=\"500\" />\n    </div>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":277,"to":298}}}}],["490",{"pageContent":"**Example pointing to a React component**\n\n```jsx\nimport Image from 'next/legacy/image'\nimport React from 'react'\n\nconst Container = React.forwardRef((props, ref) => {\n  return (\n    <div ref={ref} style={{ overflowX: 'scroll', width: '500px' }}>\n      {props.children}\n    </div>\n  )\n})\n\nconst Example = () => {\n  const lazyRoot = React.useRef(null)\n\n  return (\n    <Container ref={lazyRoot}>\n      <Image lazyRoot={lazyRoot} src=\"/one.jpg\" width=\"500\" height=\"500\" />\n      <Image lazyRoot={lazyRoot} src=\"/two.jpg\" width=\"500\" height=\"500\" />\n    </Container>\n  )\n}\n```\n\n[Learn more](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/root)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":301,"to":327}}}}],["491",{"pageContent":"unoptimized\n\nWhen true, the source image will be served as-is instead of changing quality,\nsize, or format. Defaults to `false`.\n\n```js\nimport Image from 'next/image'\n\nconst UnoptimizedImage = (props) => {\n  return <Image {...props} unoptimized />\n}\n```\n\nSince Next.js 12.3.0, this prop can be assigned to all images by updating `next.config.js` with the following configuration:\n\n```js\nmodule.exports = {\n  images: {\n    unoptimized: true,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":329,"to":350}}}}],["492",{"pageContent":"Other Props\n\nOther properties on the `<Image />` component will be passed to the underlying\n`img` element with the exception of the following:\n\n- `srcSet`. Use\n  [Device Sizes](#device-sizes)\n  instead.\n- `ref`. Use [`onLoadingComplete`](#onloadingcomplete) instead.\n- `decoding`. It is always `\"async\"`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":352,"to":361}}}}],["493",{"pageContent":"Configuration Options","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":363,"to":363}}}}],["494",{"pageContent":"Remote Patterns\n\nTo protect your application from malicious users, configuration is required in order to use external images. This ensures that only external images from your account can be served from the Next.js Image Optimization API. These external images can be configured with the `remotePatterns` property in your `next.config.js` file, as shown below:\n\n```js\nmodule.exports = {\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'example.com',\n        port: '',\n        pathname: '/account123/**',\n      },\n    ],\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":365,"to":381}}}}],["495",{"pageContent":"> Note: The example above will ensure the `src` property of `next/legacy/image` must start with `https://example.com/account123/`. Any other protocol, hostname, port, or unmatched path will respond with 400 Bad Request.\n\nBelow is another example of the `remotePatterns` property in the `next.config.js` file:\n\n```js\nmodule.exports = {\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: '**.example.com',\n      },\n    ],\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":384,"to":398}}}}],["496",{"pageContent":"> Note: The example above will ensure the `src` property of `next/legacy/image` must start with `https://img1.example.com` or `https://me.avatar.example.com` or any number of subdomains. Any other protocol or unmatched hostname will respond with 400 Bad Request.\n\nWildcard patterns can be used for both `pathname` and `hostname` and have the following syntax:\n\n- `*` match a single path segment or subdomain\n- `**` match any number of path segments at the end or subdomains at the beginning\n\nThe `**` syntax does not work in the middle of the pattern.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":401,"to":408}}}}],["497",{"pageContent":"Domains\n\n> Note: We recommend using [`remotePatterns`](#remote-patterns) instead so you can restrict protocol and pathname.\n\nSimilar to [`remotePatterns`](#remote-patterns), the `domains` configuration can be used to provide a list of allowed hostnames for external images.\n\nHowever, the `domains` configuration does not support wildcard pattern matching and it cannot restrict protocol, port, or pathname.\n\nBelow is an example of the `domains` property in the `next.config.js` file:\n\n```js\nmodule.exports = {\n  images: {\n    domains: ['assets.acme.com'],\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":410,"to":426}}}}],["498",{"pageContent":"Loader Configuration\n\nIf you want to use a cloud provider to optimize images instead of using the Next.js built-in Image Optimization API, you can configure the `loader` and `path` prefix in your `next.config.js` file. This allows you to use relative URLs for the Image [`src`](#src) and automatically generate the correct absolute URL for your provider.\n\n```js\nmodule.exports = {\n  images: {\n    loader: 'imgix',\n    path: 'https://example.com/myaccount/',\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":428,"to":439}}}}],["499",{"pageContent":"Built-in Loaders\n\nThe following Image Optimization cloud providers are included:\n\n- Default: Works automatically with `next dev`, `next start`, or a custom server\n- [Vercel](https://vercel.com): Works automatically when you deploy on Vercel, no configuration necessary. [Learn more](https://vercel.com/docs/concepts/image-optimization?utm_source=next-site&utm_medium=docs&utm_campaign=next-website)\n- [Imgix](https://www.imgix.com): `loader: 'imgix'`\n- [Cloudinary](https://cloudinary.com): `loader: 'cloudinary'`\n- [Akamai](https://www.akamai.com): `loader: 'akamai'`\n- Custom: `loader: 'custom'` use a custom cloud provider by implementing the [`loader`](#loader) prop on the `next/legacy/image` component\n\nIf you need a different provider, you can use the [`loader`](#loader) prop with `next/legacy/image`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":441,"to":452}}}}],["500",{"pageContent":"If you need a different provider, you can use the [`loader`](#loader) prop with `next/legacy/image`.\n\n> Images can not be optimized at build time using [`output: 'export'`](/docs/advanced-features/static-html-export.md), only on-demand. To use `next/legacy/image` with `output: 'export'`, you will need to use a different loader than the default. [Read more in the discussion.](https://github.com/vercel/next.js/discussions/19065)\n\n> The `next/legacy/image` component's default loader uses [`squoosh`](https://www.npmjs.com/package/@squoosh/lib) because it is quick to install and suitable for a development environment. When using `next start` in your production environment, it is strongly recommended that you install [`sharp`](https://www.npmjs.com/package/sharp) by running `yarn add sharp` in your project directory. This is not necessary for Vercel deployments, as `sharp` is installed automatically.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":452,"to":456}}}}],["501",{"pageContent":"Advanced\n\nThe following configuration is for advanced use cases and is usually not necessary. If you choose to configure the properties below, you will override any changes to the Next.js defaults in future updates.\n\n### Device Sizes\n\nIf you know the expected device widths of your users, you can specify a list of device width breakpoints using the `deviceSizes` property in `next.config.js`. These widths are used when the `next/legacy/image` component uses `layout=\"responsive\"` or `layout=\"fill\"` to ensure the correct image is served for user's device.\n\nIf no configuration is provided, the default below is used.\n\n```js\nmodule.exports = {\n  images: {\n    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":458,"to":474}}}}],["502",{"pageContent":"Image Sizes\n\nYou can specify a list of image widths using the `images.imageSizes` property in your `next.config.js` file. These widths are concatenated with the array of [device sizes](#device-sizes) to form the full array of sizes used to generate image [srcset](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/srcset)s.\n\nThe reason there are two separate lists is that imageSizes is only used for images which provide a [`sizes`](#sizes) prop, which indicates that the image is less than the full width of the screen. **Therefore, the sizes in imageSizes should all be smaller than the smallest size in deviceSizes.**\n\nIf no configuration is provided, the default below is used.\n\n```js\nmodule.exports = {\n  images: {\n    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":476,"to":490}}}}],["503",{"pageContent":"Acceptable Formats\n\nThe default [Image Optimization API](#loader-configuration) will automatically detect the browser's supported image formats via the request's `Accept` header.\n\nIf the `Accept` head matches more than one of the configured formats, the first match in the array is used. Therefore, the array order matters. If there is no match (or the source image is [animated](#animated-images)), the Image Optimization API will fallback to the original image's format.\n\nIf no configuration is provided, the default below is used.\n\n```js\nmodule.exports = {\n  images: {\n    formats: ['image/webp'],\n  },\n}\n```\n\nYou can enable AVIF support with the following configuration.\n\n```js\nmodule.exports = {\n  images: {\n    formats: ['image/avif', 'image/webp'],\n  },\n}\n```\n\n> Note: AVIF generally takes 20% longer to encode but it compresses 20% smaller compared to WebP. This means that the first time an image is requested, it will typically be slower and then subsequent requests that are cached will be faster.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":492,"to":518}}}}],["504",{"pageContent":"Caching Behavior\n\nThe following describes the caching algorithm for the default [loader](#loader). For all other loaders, please refer to your cloud provider's documentation.\n\nImages are optimized dynamically upon request and stored in the `<distDir>/cache/images` directory. The optimized image file will be served for subsequent requests until the expiration is reached. When a request is made that matches a cached but expired file, the expired image is served stale immediately. Then the image is optimized again in the background (also called revalidation) and saved to the cache with the new expiration date.\n\nThe cache status of an image can be determined by reading the value of the `x-nextjs-cache` (`x-vercel-cache` when deployed on Vercel) response header. The possible values are the following:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":520,"to":526}}}}],["505",{"pageContent":"The cache status of an image can be determined by reading the value of the `x-nextjs-cache` (`x-vercel-cache` when deployed on Vercel) response header. The possible values are the following:\n\n- `MISS` - the path is not in the cache (occurs at most once, on the first visit)\n- `STALE` - the path is in the cache but exceeded the revalidate time so it will be updated in the background\n- `HIT` - the path is in the cache and has not exceeded the revalidate time\n\nThe expiration (or rather Max Age) is defined by either the [`minimumCacheTTL`](#minimum-cache-ttl) configuration or the upstream image `Cache-Control` header, whichever is larger. Specifically, the `max-age` value of the `Cache-Control` header is used. If both `s-maxage` and `max-age` are found, then `s-maxage` is preferred. The `max-age` is also passed-through to any downstream clients including CDNs and browsers.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":526,"to":532}}}}],["506",{"pageContent":"- You can configure [`minimumCacheTTL`](#minimum-cache-ttl) to increase the cache duration when the upstream image does not include `Cache-Control` header or the value is very low.\n- You can configure [`deviceSizes`](#device-sizes) and [`imageSizes`](#device-sizes) to reduce the total number of possible generated images.\n- You can configure [formats](#acceptable-formats) to disable multiple formats in favor of a single image format.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":534,"to":536}}}}],["507",{"pageContent":"Minimum Cache TTL\n\nYou can configure the Time to Live (TTL) in seconds for cached optimized images. In many cases, it's better to use a [Static Image Import](/docs/basic-features/image-optimization.md#local-images) which will automatically hash the file contents and cache the image forever with a `Cache-Control` header of `immutable`.\n\n```js\nmodule.exports = {\n  images: {\n    minimumCacheTTL: 60,\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":538,"to":547}}}}],["508",{"pageContent":"The expiration (or rather Max Age) of the optimized image is defined by either the `minimumCacheTTL` or the upstream image `Cache-Control` header, whichever is larger.\n\nIf you need to change the caching behavior per image, you can configure [`headers`](/docs/api-reference/next.config.js/headers) to set the `Cache-Control` header on the upstream image (e.g. `/some-asset.jpg`, not `/_next/image` itself).\n\nThere is no mechanism to invalidate the cache at this time, so its best to keep `minimumCacheTTL` low. Otherwise you may need to manually change the [`src`](#src) prop or delete `<distDir>/cache/images`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":550,"to":554}}}}],["509",{"pageContent":"Disable Static Imports\n\nThe default behavior allows you to import static files such as `import icon from './icon.png` and then pass that to the `src` property.\n\nIn some cases, you may wish to disable this feature if it conflicts with other plugins that expect the import to behave differently.\n\nYou can disable static image imports inside your `next.config.js`:\n\n```js\nmodule.exports = {\n  images: {\n    disableStaticImages: true,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":556,"to":570}}}}],["510",{"pageContent":"Dangerously Allow SVG\n\nThe default [loader](#loader) does not optimize SVG images for a few reasons. First, SVG is a vector format meaning it can be resized losslessly. Second, SVG has many of the same features as HTML/CSS, which can lead to vulnerabilities without proper [Content Security Policy (CSP) headers](/docs/advanced-features/security-headers.md).\n\nIf you need to serve SVG images with the default Image Optimization API, you can set `dangerouslyAllowSVG` inside your `next.config.js`:\n\n```js\nmodule.exports = {\n  images: {\n    dangerouslyAllowSVG: true,\n    contentDispositionType: 'attachment',\n    contentSecurityPolicy: \"default-src 'self'; script-src 'none'; sandbox;\",\n  },\n}\n```\n\nIn addition, it is strongly recommended to also set `contentDispositionType` to force the browser to download the image, as well as `contentSecurityPolicy` to prevent scripts embedded in the image from executing.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":572,"to":588}}}}],["511",{"pageContent":"Animated Images\n\nThe default [loader](#loader) will automatically bypass Image Optimization for animated images and serve the image as-is.\n\nAuto-detection for animated files is best-effort and supports GIF, APNG, and WebP. If you want to explicitly bypass Image Optimization for a given animated image, use the [unoptimized](#unoptimized) prop.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":590,"to":594}}}}],["512",{"pageContent":"Related\n\nFor an overview of the Image component features and usage guidelines, see:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/image-optimization.md\">\n    <b>Images</b>\n    <small>Learn how to display and optimize images with the Image component.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/legacy/image.md","loc":{"lines":{"from":596,"to":605}}}}],["513",{"pageContent":"---\ndescription: Enable client-side transitions between routes with the built-in Link component.\n---\n\n# next/link\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/hello-world\">Hello World</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/active-class-name\">Active className on Link</a></li>\n  </ul>\n</details>\n\n> Before moving forward, we recommend you to read [Routing Introduction](/docs/routing/introduction.md) first.\n\nClient-side transitions between routes can be enabled via the `Link` component exported by `next/link`.\n\nFor an example, consider a `pages` directory with the following files:\n\n- `pages/index.js`\n- `pages/about.js`\n- `pages/blog/[slug].js`\n\nWe can have a link to each of these pages like so:\n\n```jsx\nimport Link from 'next/link'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":1,"to":28}}}}],["514",{"pageContent":"- `pages/index.js`\n- `pages/about.js`\n- `pages/blog/[slug].js`\n\nWe can have a link to each of these pages like so:\n\n```jsx\nimport Link from 'next/link'\n\nfunction Home() {\n  return (\n    <ul>\n      <li>\n        <Link href=\"/\">Home</Link>\n      </li>\n      <li>\n        <Link href=\"/about\">About Us</Link>\n      </li>\n      <li>\n        <Link href=\"/blog/hello-world\">Blog Post</Link>\n      </li>\n    </ul>\n  )\n}\n\nexport default Home","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":28,"to":53}}}}],["515",{"pageContent":"`Link` accepts the following props:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":56,"to":56}}}}],["516",{"pageContent":"- `href` - The path or URL to navigate to. This is the only required prop. It can also be an object, see [example here](/docs/api-reference/next/link.md#with-url-object)\n- `as` - Optional decorator for the path that will be shown in the browser URL bar. Before Next.js 9.5.3 this was used for dynamic routes, check our [previous docs](https://nextjs.org/docs/tag/v9.5.2/api-reference/next/link#dynamic-routes) to see how it worked. Note: when this path differs from the one provided in `href` the previous `href`/`as` behavior is used as shown in the [previous docs](https://nextjs.org/docs/tag/v9.5.2/api-reference/next/link#dynamic-routes).\n- [`legacyBehavior`](#if-the-child-is-a-tag) - Changes behavior so that child must be `<a>`. Defaults to `false`.\n- [`passHref`](#if-the-child-is-a-custom-component-that-wraps-an-a-tag) - Forces `Link` to send the `href` property to its child. Defaults to `false`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":58,"to":61}}}}],["517",{"pageContent":"- [`passHref`](#if-the-child-is-a-custom-component-that-wraps-an-a-tag) - Forces `Link` to send the `href` property to its child. Defaults to `false`\n- `prefetch` - Prefetch the page in the background. Defaults to `true`. Any `<Link />` that is in the viewport (initially or through scroll) will be preloaded. Prefetch can be disabled by passing `prefetch={false}`. When `prefetch` is set to `false`, prefetching will still occur on hover. Pages using [Static Generation](/docs/basic-features/data-fetching/get-static-props.md) will preload `JSON` files with the data for faster page transitions. Prefetching is only enabled in production.\n- [`replace`](#replace-the-url-instead-of-push) - Replace the current `history` state instead of adding a new url into the stack. Defaults to `false`\n- [`scroll`](#disable-scrolling-to-the-top-of-the-page) - Scroll to the top of the page after a navigation. Defaults to `true`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":61,"to":64}}}}],["518",{"pageContent":"- [`scroll`](#disable-scrolling-to-the-top-of-the-page) - Scroll to the top of the page after a navigation. Defaults to `true`\n- [`shallow`](/docs/routing/shallow-routing.md) - Update the path of the current page without rerunning [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md), [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md) or [`getInitialProps`](/docs/api-reference/data-fetching/get-initial-props.md). Defaults to `false`\n- `locale` - The active locale is automatically prepended. `locale` allows for providing a different locale. When `false` `href` has to include the locale as the default behavior is disabled.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":64,"to":66}}}}],["519",{"pageContent":"Note, when `legacyBehavior` is not set to `true`, all [`anchor`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a) tag properties can be passed to `next/link` as well such as, `className`, `onClick`, etc.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":68,"to":68}}}}],["520",{"pageContent":"If the route has dynamic segments\n\nThere is nothing to do when linking to a [dynamic route](/docs/routing/dynamic-routes.md), including [catch all routes](/docs/routing/dynamic-routes.md#catch-all-routes), since Next.js 9.5.3 (for older versions check our [previous docs](https://nextjs.org/docs/tag/v9.5.2/api-reference/next/link#dynamic-routes)). However, it can become quite common and handy to use [interpolation](/docs/routing/introduction.md#linking-to-dynamic-paths) or an [URL Object](#with-url-object) to generate the link.\n\nFor example, the dynamic route `pages/blog/[slug].js` will match the following link:\n\n```jsx\nimport Link from 'next/link'\n\nfunction Posts({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li key={post.id}>\n          <Link href={`/blog/${encodeURIComponent(post.slug)}`}>\n            {post.title}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default Posts\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":70,"to":94}}}}],["521",{"pageContent":"If the child is `<a>` tag\n\n```jsx\nimport Link from 'next/link'\n\nfunction Legacy() {\n  return (\n    <Link href=\"/about\" legacyBehavior>\n      <a>About Us</a>\n    </Link>\n  )\n}\n\nexport default Legacy\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":96,"to":110}}}}],["522",{"pageContent":"If the child is a custom component that wraps an `<a>` tag\n\nIf the child of `Link` is a custom component that wraps an `<a>` tag, you must add `passHref` to `Link`. This is necessary if you’re using libraries like [styled-components](https://styled-components.com/). Without this, the `<a>` tag will not have the `href` attribute, which hurts your site's accessibility and might affect SEO. If you're using [ESLint](/docs/basic-features/eslint.md#eslint-plugin), there is a built-in rule `next/link-passhref` to ensure correct usage of `passHref`.\n\n```jsx\nimport Link from 'next/link'\nimport styled from 'styled-components'\n\n// This creates a custom component that wraps an <a> tag\nconst RedLink = styled.a`\n  color: red;\n`\n\nfunction NavLink({ href, name }) {\n  return (\n    <Link href={href} passHref legacyBehavior>\n      <RedLink>{name}</RedLink>\n    </Link>\n  )\n}\n\nexport default NavLink","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":112,"to":133}}}}],["523",{"pageContent":"- If you’re using [emotion](https://emotion.sh/)’s JSX pragma feature (`@jsx jsx`), you must use `passHref` even if you use an `<a>` tag directly.\n- The component should support `onClick` property to trigger navigation correctly","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":136,"to":137}}}}],["524",{"pageContent":"If the child is a functional component\n\nIf the child of `Link` is a functional component, in addition to using `passHref` and `legacyBehavior`, you must wrap the component in [`React.forwardRef`](https://react.dev/reference/react/forwardRef):\n\n```jsx\nimport Link from 'next/link'\n\n// `onClick`, `href`, and `ref` need to be passed to the DOM element\n// for proper handling\nconst MyButton = React.forwardRef(({ onClick, href }, ref) => {\n  return (\n    <a href={href} onClick={onClick} ref={ref}>\n      Click Me\n    </a>\n  )\n})\n\nfunction Home() {\n  return (\n    <Link href=\"/about\" passHref legacyBehavior>\n      <MyButton />\n    </Link>\n  )\n}\n\nexport default Home\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":139,"to":165}}}}],["525",{"pageContent":"With URL Object\n\n`Link` can also receive a URL object and it will automatically format it to create the URL string. Here's how to do it:\n\n```jsx\nimport Link from 'next/link'\n\nfunction Home() {\n  return (\n    <ul>\n      <li>\n        <Link\n          href={{\n            pathname: '/about',\n            query: { name: 'test' },\n          }}\n        >\n          About us\n        </Link>\n      </li>\n      <li>\n        <Link\n          href={{\n            pathname: '/blog/[slug]',\n            query: { slug: 'my-post' },\n          }}\n        >\n          Blog Post\n        </Link>\n      </li>\n    </ul>\n  )\n}\n\nexport default Home\n```\n\nThe above example has a link to:\n\n- A predefined route: `/about?name=test`\n- A [dynamic route](/docs/routing/dynamic-routes.md): `/blog/my-post`\n\nYou can use every property as defined in the [Node.js URL module documentation](https://nodejs.org/api/url.html#url_url_strings_and_url_objects).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":167,"to":209}}}}],["526",{"pageContent":"Replace the URL instead of push\n\nThe default behavior of the `Link` component is to `push` a new URL into the `history` stack. You can use the `replace` prop to prevent adding a new entry, as in the following example:\n\n```jsx\n<Link href=\"/about\" replace>\n  About us\n</Link>\n```\n\n## Disable scrolling to the top of the page\n\nThe default behavior of `Link` is to scroll to the top of the page. When there is a hash defined it will scroll to the specific id, like a normal `<a>` tag. To prevent scrolling to the top / hash `scroll={false}` can be added to `Link`:\n\n```jsx\n<Link href=\"/#hashid\" scroll={false}>\n  Disables scrolling to the top\n</Link>\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":211,"to":229}}}}],["527",{"pageContent":"With Next.js 13 Middleware\n\nIt's common to use [Middleware](/docs/advanced-features/middleware) for authentication or other purposes that involve rewriting the user to a different page. In order for the `<Link />` component to properly prefetch links with rewrites via Middleware, you need to tell Next.js both the URL to display and the URL to prefetch. This is required to avoid un-necessary fetches to middleware to know the correct route to prefetch.\n\nFor example, if you have want to serve a `/dashboard` route that has authenticated and visitor views, you may add something similar to the following in your Middleware to redirect the user to the correct page:\n\n```js\n// middleware.js\nexport function middleware(req) {\n  const nextUrl = req.nextUrl\n  if (nextUrl.pathname === '/dashboard') {\n    if (req.cookies.authToken) {\n      return NextResponse.rewrite(new URL('/auth/dashboard', req.url))\n    } else {\n      return NextResponse.rewrite(new URL('/public/dashboard', req.url))\n    }\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":231,"to":248}}}}],["528",{"pageContent":"In this case, you would want to use the following code in your `<Link />` component (inside `pages/`):\n\n```js\n// pages/index.js\nimport Link from 'next/link'\nimport useIsAuthed from './hooks/useIsAuthed'\n\nexport default function Page() {\n  const isAuthed = useIsAuthed()\n  const path = isAuthed ? '/auth/dashboard' : '/dashboard'\n  return (\n    <Link as=\"/dashboard\" href={path}>\n      Dashboard\n    </Link>\n  )\n}\n```\n\n> **Note:** If you're using [Dynamic Routes](/docs/routing/dynamic-routes), you'll need to adapt your `as` and `href` props. For example, if you have a Dynamic Route like `/dashboard/[user]` that you want to present differently via middleware, you would write: `<Link href={{ pathname: '/dashboard/authed/[user]', query: { user: username } }} as=\"/dashboard/[user]\">Profile</Link>`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/link.md","loc":{"lines":{"from":251,"to":269}}}}],["529",{"pageContent":"---\ndescription: Learn more about the API of the Next.js Router, and access the router instance in your page with the useRouter hook.\n---\n\n# next/router\n\n> Before moving forward, we recommend you to read [Routing Introduction](/docs/routing/introduction.md) first.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":1,"to":7}}}}],["530",{"pageContent":"useRouter\n\nIf you want to access the [`router` object](#router-object) inside any function component in your app, you can use the `useRouter` hook, take a look at the following example:\n\n```jsx\nimport { useRouter } from 'next/router'\n\nfunction ActiveLink({ children, href }) {\n  const router = useRouter()\n  const style = {\n    marginRight: 10,\n    color: router.asPath === href ? 'red' : 'black',\n  }\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    router.push(href)\n  }\n\n  return (\n    <a href={href} onClick={handleClick} style={style}>\n      {children}\n    </a>\n  )\n}\n\nexport default ActiveLink\n```\n\n> `useRouter` is a [React Hook](https://react.dev/learn#using-hooks), meaning it cannot be used with classes. You can either use [withRouter](#withRouter) or wrap your class in a function component.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":9,"to":38}}}}],["531",{"pageContent":"`router` object\n\nThe following is the definition of the `router` object returned by both [`useRouter`](#useRouter) and [`withRouter`](#withRouter):","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":40,"to":42}}}}],["532",{"pageContent":"- `pathname`: `String` - The path for current route file that comes after `/pages`. Therefore, `basePath`, `locale` and trailing slash (`trailingSlash: true`) are not included.\n- `query`: `Object` - The query string parsed to an object, including [dynamic route](/docs/routing/dynamic-routes.md) parameters. It will be an empty object during prerendering if the page doesn't use [Server-side Rendering](/docs/basic-features/data-fetching/get-server-side-props.md). Defaults to `{}`\n- `asPath`: `String` - The path as shown in the browser including the search params and respecting the `trailingSlash` configuration. `basePath` and `locale` are not included.\n- `isFallback`: `boolean` - Whether the current page is in [fallback mode](/docs/api-reference/data-fetching/get-static-paths.md#fallback-pages).\n- `basePath`: `String` - The active [basePath](/docs/api-reference/next.config.js/basepath.md) (if enabled).\n- `locale`: `String` - The active locale (if enabled).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":44,"to":49}}}}],["533",{"pageContent":"- `basePath`: `String` - The active [basePath](/docs/api-reference/next.config.js/basepath.md) (if enabled).\n- `locale`: `String` - The active locale (if enabled).\n- `locales`: `String[]` - All supported locales (if enabled).\n- `defaultLocale`: `String` - The current default locale (if enabled).\n- `domainLocales`: `Array<{domain, defaultLocale, locales}>` - Any configured domain locales.\n- `isReady`: `boolean` - Whether the router fields are updated client-side and ready for use. Should only be used inside of `useEffect` methods and not for conditionally rendering on the server. See related docs for use case with [automatically statically optimized pages](/docs/advanced-features/automatic-static-optimization.md)\n- `isPreview`: `boolean` - Whether the application is currently in [preview mode](/docs/advanced-features/preview-mode.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":49,"to":55}}}}],["534",{"pageContent":"> Using the `asPath` field may lead to a mismatch between client and server if the page is rendered using server-side rendering or [automatic static optimization](/docs/advanced-features/automatic-static-optimization.md). Avoid using `asPath` until the `isReady` field is `true`.\n\nThe following methods are included inside `router`:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":57,"to":59}}}}],["535",{"pageContent":"router.push\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/using-router\">Using Router</a></li>\n  </ul>\n</details>\n\nHandles client-side transitions, this method is useful for cases where [`next/link`](/docs/api-reference/next/link.md) is not enough.\n\n```jsx\nrouter.push(url, as, options)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":61,"to":73}}}}],["536",{"pageContent":"- `url`: `UrlObject | String` - The URL to navigate to (see [Node.JS URL module documentation](https://nodejs.org/api/url.html#legacy-urlobject) for `UrlObject` properties).\n- `as`: `UrlObject | String` - Optional decorator for the path that will be shown in the browser URL bar. Before Next.js 9.5.3 this was used for dynamic routes, check our [previous docs](https://nextjs.org/docs/tag/v9.5.2/api-reference/next/link#dynamic-routes) to see how it worked. Note: when this path differs from the one provided in `href` the previous `href`/`as` behavior is used as shown in the [previous docs](https://nextjs.org/docs/tag/v9.5.2/api-reference/next/link#dynamic-routes)\n- `options` - Optional object with the following configuration options:\n  - `scroll` - Optional boolean, controls scrolling to the top of the page after navigation. Defaults to `true`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":76,"to":79}}}}],["537",{"pageContent":"- `options` - Optional object with the following configuration options:\n  - `scroll` - Optional boolean, controls scrolling to the top of the page after navigation. Defaults to `true`\n  - [`shallow`](/docs/routing/shallow-routing.md): Update the path of the current page without rerunning [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md), [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md) or [`getInitialProps`](/docs/api-reference/data-fetching/get-initial-props.md). Defaults to `false`\n  - `locale` - Optional string, indicates locale of the new page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":79,"to":82}}}}],["538",{"pageContent":"> You don't need to use `router.push` for external URLs. [window.location](https://developer.mozilla.org/en-US/docs/Web/API/Window/location) is better suited for those cases.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":84,"to":84}}}}],["539",{"pageContent":"Usage\n\nNavigating to `pages/about.js`, which is a predefined route:\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function Page() {\n  const router = useRouter()\n\n  return (\n    <button type=\"button\" onClick={() => router.push('/about')}>\n      Click me\n    </button>\n  )\n}\n```\n\nNavigating `pages/post/[pid].js`, which is a dynamic route:\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function Page() {\n  const router = useRouter()\n\n  return (\n    <button type=\"button\" onClick={() => router.push('/post/abc')}>\n      Click me\n    </button>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":86,"to":117}}}}],["540",{"pageContent":"Redirecting the user to `pages/login.js`, useful for pages behind [authentication](/docs/authentication):\n\n```jsx\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\n// Here you would fetch and return the user\nconst useUser = () => ({ user: null, loading: false })\n\nexport default function Page() {\n  const { user, loading } = useUser()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!(user || loading)) {\n      router.push('/login')\n    }\n  }, [user, loading])\n\n  return <p>Redirecting...</p>\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":120,"to":141}}}}],["541",{"pageContent":"Resetting state after navigation\n\nWhen navigating to the same page in Next.js, the page's state **will not** be reset by default as React does not unmount unless the parent component has changed.\n\n```jsx\n// pages/[slug].js\nimport Link from 'next/link'\nimport { useState } from 'react'\nimport { useRouter } from 'next/router'\n\nexport default function Page(props) {\n  const router = useRouter()\n  const [count, setCount] = useState(0)\n  return (\n    <div>\n      <h1>Page: {router.query.slug}</h1>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>Increase count</button>\n      <Link href=\"/one\">one</Link> <Link href=\"/two\">two</Link>\n    </div>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":143,"to":164}}}}],["542",{"pageContent":"In the above example, navigating between `/one` and `/two` **will not** reset the count . The `useState` is maintained between renders because the top-level React component, `Page`, is the same.\n\nIf you do not want this behavior, you have a couple of options:\n\n1. Manually ensure each state is updated using `useEffect`. In the above example, that could look like:\n\n```jsx\nuseEffect(() => {\n  setCount(0)\n}, [router.query.slug])\n```\n\n2. Use a React `key` to [tell React to remount the component](https://react.dev/learn/rendering-lists#keeping-list-items-in-order-with-key). To do this for all pages, you can use a custom app:\n\n```jsx\n// pages/_app.js\nimport { useRouter } from 'next/router'\n\nexport default function MyApp({ Component, pageProps }) {\n  const router = useRouter()\n  return <Component key={router.asPath} {...pageProps} />\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":167,"to":189}}}}],["543",{"pageContent":"With URL object\n\nYou can use a URL object in the same way you can use it for [`next/link`](/docs/api-reference/next/link.md#with-url-object). Works for both the `url` and `as` parameters:\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function ReadMore({ post }) {\n  const router = useRouter()\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => {\n        router.push({\n          pathname: '/post/[pid]',\n          query: { pid: post.id },\n        })\n      }}\n    >\n      Click here to read more\n    </button>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":191,"to":215}}}}],["544",{"pageContent":"router.replace\n\nSimilar to the `replace` prop in [`next/link`](/docs/api-reference/next/link.md), `router.replace` will prevent adding a new URL entry into the `history` stack.\n\n```jsx\nrouter.replace(url, as, options)\n```\n\n- The API for `router.replace` is exactly the same as the API for [`router.push`](#router.push).\n\n#### Usage\n\nTake a look at the following example:\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function Page() {\n  const router = useRouter()\n\n  return (\n    <button type=\"button\" onClick={() => router.replace('/home')}>\n      Click me\n    </button>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":217,"to":243}}}}],["545",{"pageContent":"router.prefetch\n\nPrefetch pages for faster client-side transitions. This method is only useful for navigations without [`next/link`](/docs/api-reference/next/link.md), as `next/link` takes care of prefetching pages automatically.\n\n> This is a production only feature. Next.js doesn't prefetch pages in development.\n\n```jsx\nrouter.prefetch(url, as, options)\n```\n\n- `url` - The URL to prefetch, including explicit routes (e.g. `/dashboard`) and dynamic routes (e.g. `/product/[id]`)\n- `as` - Optional decorator for `url`. Before Next.js 9.5.3 this was used to prefetch dynamic routes, check our [previous docs](https://nextjs.org/docs/tag/v9.5.2/api-reference/next/link#dynamic-routes) to see how it worked\n- `options` - Optional object with the following allowed fields:\n  - `locale` - allows providing a different locale from the active one. If `false`, `url` has to include the locale as the active locale won't be used.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":245,"to":258}}}}],["546",{"pageContent":"Usage\n\nLet's say you have a login page, and after a login, you redirect the user to the dashboard. For that case, we can prefetch the dashboard to make a faster transition, like in the following example:\n\n```jsx\nimport { useCallback, useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\nexport default function Login() {\n  const router = useRouter()\n  const handleSubmit = useCallback((e) => {\n    e.preventDefault()\n\n    fetch('/api/login', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        /* Form data */\n      }),\n    }).then((res) => {\n      // Do a fast client-side transition to the already prefetched dashboard page\n      if (res.ok) router.push('/dashboard')\n    })\n  }, [])\n\n  useEffect(() => {\n    // Prefetch the dashboard page\n    router.prefetch('/dashboard')\n  }, [router])\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {/* Form fields */}\n      <button type=\"submit\">Login</button>\n    </form>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":260,"to":297}}}}],["547",{"pageContent":"router.beforePopState\n\nIn some cases (for example, if using a [Custom Server](/docs/advanced-features/custom-server.md)), you may wish to listen to [popstate](https://developer.mozilla.org/en-US/docs/Web/Events/popstate) and do something before the router acts on it.\n\n```jsx\nrouter.beforePopState(cb)\n```\n\n- `cb` - The function to run on incoming `popstate` events. The function receives the state of the event as an object with the following props:\n  - `url`: `String` - the route for the new state. This is usually the name of a `page`\n  - `as`: `String` - the url that will be shown in the browser\n  - `options`: `Object` - Additional options sent by [router.push](#router.push)\n\nIf `cb` returns `false`, the Next.js router will not handle `popstate`, and you'll be responsible for handling it in that case. See [Disabling file-system routing](/docs/advanced-features/custom-server.md#disabling-file-system-routing).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":299,"to":312}}}}],["548",{"pageContent":"Usage\n\nYou could use `beforePopState` to manipulate the request, or force a SSR refresh, as in the following example:\n\n```jsx\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\nexport default function Page() {\n  const router = useRouter()\n\n  useEffect(() => {\n    router.beforePopState(({ url, as, options }) => {\n      // I only want to allow these two routes!\n      if (as !== '/' && as !== '/other') {\n        // Have SSR render bad routes as a 404.\n        window.location.href = as\n        return false\n      }\n\n      return true\n    })\n  }, [router])\n\n  return <p>Welcome to the page</p>\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":314,"to":340}}}}],["549",{"pageContent":"router.back\n\nNavigate back in history. Equivalent to clicking the browser’s back button. It executes `window.history.back()`.\n\n#### Usage\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function Page() {\n  const router = useRouter()\n\n  return (\n    <button type=\"button\" onClick={() => router.back()}>\n      Click here to go back\n    </button>\n  )\n}\n```\n\n### router.reload\n\nReload the current URL. Equivalent to clicking the browser’s refresh button. It executes `window.location.reload()`.\n\n#### Usage\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function Page() {\n  const router = useRouter()\n\n  return (\n    <button type=\"button\" onClick={() => router.reload()}>\n      Click here to reload\n    </button>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":342,"to":380}}}}],["550",{"pageContent":"router.events\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-loading\">With a page loading indicator</a></li>\n  </ul>\n</details>\n\nYou can listen to different events happening inside the Next.js Router. Here's a list of supported events:\n\n- `routeChangeStart(url, { shallow })` - Fires when a route starts to change\n- `routeChangeComplete(url, { shallow })` - Fires when a route changed completely\n- `routeChangeError(err, url, { shallow })` - Fires when there's an error when changing routes, or a route load is cancelled\n  - `err.cancelled` - Indicates if the navigation was cancelled\n- `beforeHistoryChange(url, { shallow })` - Fires before changing the browser's history\n- `hashChangeStart(url, { shallow })` - Fires when the hash will change but not the page\n- `hashChangeComplete(url, { shallow })` - Fires when the hash has changed but not the page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":382,"to":399}}}}],["551",{"pageContent":"> **Note:** Here `url` is the URL shown in the browser, including the [`basePath`](/docs/api-reference/next.config.js/basepath.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":401,"to":401}}}}],["552",{"pageContent":"Usage\n\nFor example, to listen to the router event `routeChangeStart`, open or create `pages/_app.js` and subscribe to the event, like so:\n\n```jsx\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\nexport default function MyApp({ Component, pageProps }) {\n  const router = useRouter()\n\n  useEffect(() => {\n    const handleRouteChange = (url, { shallow }) => {\n      console.log(\n        `App is changing to ${url} ${\n          shallow ? 'with' : 'without'\n        } shallow routing`\n      )\n    }\n\n    router.events.on('routeChangeStart', handleRouteChange)\n\n    // If the component is unmounted, unsubscribe\n    // from the event with the `off` method:\n    return () => {\n      router.events.off('routeChangeStart', handleRouteChange)\n    }\n  }, [router])\n\n  return <Component {...pageProps} />\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":403,"to":433}}}}],["553",{"pageContent":"> We use a [Custom App](/docs/advanced-features/custom-app.md) (`pages/_app.js`) for this example to subscribe to the event because it's not unmounted on page navigations, but you can subscribe to router events on any component in your application.\n\nRouter events should be registered when a component mounts ([useEffect](https://react.dev/reference/react/useEffect) or [componentDidMount](https://react.dev/reference/react/Component#componentdidmount) / [componentWillUnmount](https://react.dev/reference/react/Component#componentwillunmount)) or imperatively when an event happens.\n\nIf a route load is cancelled (for example, by clicking two links rapidly in succession), `routeChangeError` will fire. And the passed `err` will contain a `cancelled` property set to `true`, as in the following example:\n\n```jsx\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\nexport default function MyApp({ Component, pageProps }) {\n  const router = useRouter()","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":436,"to":447}}}}],["554",{"pageContent":"```jsx\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\nexport default function MyApp({ Component, pageProps }) {\n  const router = useRouter()\n\n  useEffect(() => {\n    const handleRouteChangeError = (err, url) => {\n      if (err.cancelled) {\n        console.log(`Route to ${url} was cancelled!`)\n      }\n    }\n\n    router.events.on('routeChangeError', handleRouteChangeError)\n\n    // If the component is unmounted, unsubscribe\n    // from the event with the `off` method:\n    return () => {\n      router.events.off('routeChangeError', handleRouteChangeError)\n    }\n  }, [router])\n\n  return <Component {...pageProps} />\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":447,"to":472}}}}],["555",{"pageContent":"Potential ESLint errors\n\nCertain methods accessible on the `router` object return a Promise. If you have the ESLint rule, [no-floating-promises](https://typescript-eslint.io/rules/no-floating-promises) enabled, consider disabling it either globally, or for the affected line.\n\nIf your application needs this rule, you should either `void` the promise – or use an `async` function, `await` the Promise, then void the function call. **This is not applicable when the method is called from inside an `onClick` handler**.\n\nThe affected methods are:\n\n- `router.push`\n- `router.replace`\n- `router.prefetch`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":474,"to":484}}}}],["556",{"pageContent":"Potential solutions\n\n```jsx\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\n// Here you would fetch and return the user\nconst useUser = () => ({ user: null, loading: false })\n\nexport default function Page() {\n  const { user, loading } = useUser()\n  const router = useRouter()\n\n  useEffect(() => {\n    // disable the linting on the next line - This is the cleanest solution\n    // eslint-disable-next-line no-floating-promises\n    router.push('/login')\n\n    // void the Promise returned by router.push\n    if (!(user || loading)) {\n      void router.push('/login')\n    }\n    // or use an async function, await the Promise, then void the function call\n    async function handleRouteChange() {\n      if (!(user || loading)) {\n        await router.push('/login')\n      }\n    }\n    void handleRouteChange()\n  }, [user, loading])\n\n  return <p>Redirecting...</p>\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":486,"to":519}}}}],["557",{"pageContent":"withRouter\n\nIf [`useRouter`](#useRouter) is not the best fit for you, `withRouter` can also add the same [`router` object](#router-object) to any component.\n\n### Usage\n\n```jsx\nimport { withRouter } from 'next/router'\n\nfunction Page({ router }) {\n  return <p>{router.pathname}</p>\n}\n\nexport default withRouter(Page)\n```\n\n### TypeScript\n\nTo use class components with `withRouter`, the component needs to accept a router prop:\n\n```tsx\nimport React from 'react'\nimport { withRouter, NextRouter } from 'next/router'\n\ninterface WithRouterProps {\n  router: NextRouter\n}\n\ninterface MyComponentProps extends WithRouterProps {}\n\nclass MyComponent extends React.Component<MyComponentProps> {\n  render() {\n    return <p>{this.props.router.pathname}</p>\n  }\n}\n\nexport default withRouter(MyComponent)\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/router.md","loc":{"lines":{"from":521,"to":558}}}}],["558",{"pageContent":"---\ndescription: Optimize third-party script loading with the built-in Script component.\n---\n\n# next/script\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes                                                                                                                     |\n| --------- | --------------------------------------------------------------------------------------------------------------------------- |\n| `v13.0.0` | `beforeInteractive` and `afterInteractive` is modified to support [`app/`](https://beta.nextjs.org/docs/optimizing/scripts) |\n| `v12.2.4` | `onReady` prop added.                                                                                                       |\n| `v12.2.2` | Allow `next/script` with `beforeInteractive` to be placed in `_document`.                                                   |\n| `v11.0.0` | `next/script` introduced.                                                                                                   |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":1,"to":15}}}}],["559",{"pageContent":"</details>\n\nThis API reference will help you understand how to use [props](#props) available for the Script Component. For features and usage, please see the [Optimizing Scripts](/docs/basic-features/script.md) page.\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Dashboard() {\n  return (\n    <>\n      <Script src=\"https://example.com/script.js\" />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":17,"to":31}}}}],["560",{"pageContent":"Props\n\nHere's a summary of the props available for the Script Component:\n\n| Prop                    | Example                           | Values   | Required                              |\n| ----------------------- | --------------------------------- | -------- | ------------------------------------- |\n| [`src`](#src)           | `src=\"http://example.com/script\"` | String   | Required unless inline script is used |\n| [`strategy`](#strategy) | `strategy=\"lazyOnload\"`           | String   | Optional                              |\n| [`onLoad`](#onload)     | `onLoad={onLoadFunc}`             | Function | Optional                              |\n| [`onReady`](#onReady)   | `onReady={onReadyFunc}`           | Function | Optional                              |\n| [`onError`](#onerror)   | `onError={onErrorFunc}`           | Function | Optional                              |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":33,"to":43}}}}],["561",{"pageContent":"Required Props\n\nThe `<Script />` component requires the following properties.\n\n### `src`\n\nA path string specifying the URL of an external script. This can be either an absolute external URL or an internal path.\n\n> **Note:** The `src` property is required unless an inline script is used.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":45,"to":53}}}}],["562",{"pageContent":"Optional Props\n\nThe `<Script />` component accepts a number of additional properties beyond those which are required.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":55,"to":57}}}}],["563",{"pageContent":"`strategy`\n\nThe loading strategy of the script. There are four different strategies that can be used:\n\n- `beforeInteractive`: Load before any Next.js code and before any page hydration occurs.\n- `afterInteractive`: (**default**) Load early but after some hydration on the page occurs.\n- `lazyOnload`: Load during browser idle time.\n- `worker`: (experimental) Load in a web worker.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":59,"to":66}}}}],["564",{"pageContent":"`beforeInteractive`\n\nScripts that load with the `beforeInteractive` strategy are injected into the initial HTML from the server, downloaded before any Next.js module, and executed in the order they are placed before _any_ hydration occurs on the page.\n\nScripts denoted with this strategy are preloaded and fetched before any first-party code, but their execution does not block page hydration from occurring.\n\n`beforeInteractive` scripts must be placed inside `pages/_document.js` and are designed to load scripts that are needed by the entire site (i.e. the script will load when any page in the application has been loaded server-side).\n\n**This strategy should only be used for critical scripts that need to be fetched before any part of the page becomes interactive.**\n\n```jsx\nimport { Html, Head, Main, NextScript } from 'next/document'\nimport Script from 'next/script'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":68,"to":80}}}}],["565",{"pageContent":"```jsx\nimport { Html, Head, Main, NextScript } from 'next/document'\nimport Script from 'next/script'\n\nexport default function Document() {\n  return (\n    <Html>\n      <Head />\n      <body>\n        <Main />\n        <NextScript />\n        <Script\n          src=\"https://example.com/script.js\"\n          strategy=\"beforeInteractive\"\n        />\n      </body>\n    </Html>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":80,"to":98}}}}],["566",{"pageContent":"> **Note**: Scripts with `beforeInteractive` will always be injected inside the `head` of the HTML document regardless of where it's placed in the component.\n\nSome examples of scripts that should be loaded as soon as possible with `beforeInteractive` include:\n\n- Bot detectors\n- Cookie consent managers","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":101,"to":106}}}}],["567",{"pageContent":"`afterInteractive`\n\nScripts that use the `afterInteractive` strategy are injected into the HTML client-side and will load after some (or all) hydration occurs on the page. **This is the default strategy** of the Script component and should be used for any script that needs to load as soon as possible but not before any first-party Next.js code.\n\n`afterInteractive` scripts can be placed inside of any page or layout and will only load and execute when that page (or group of pages) is opened in the browser.\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script src=\"https://example.com/script.js\" strategy=\"afterInteractive\" />\n    </>\n  )\n}\n```\n\nSome examples of scripts that are good candidates for `afterInteractive` include:\n\n- Tag managers\n- Analytics","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":108,"to":129}}}}],["568",{"pageContent":"`lazyOnload`\n\nScripts that use the `lazyOnload` strategy are injected into the HTML client-side during browser idle time and will load after all resources on the page have been fetched. This strategy should be used for any background or low priority scripts that do not need to load early.\n\n`lazyOnload` scripts can be placed inside of any page or layout and will only load and execute when that page (or group of pages) is opened in the browser.\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script src=\"https://example.com/script.js\" strategy=\"lazyOnload\" />\n    </>\n  )\n}\n```\n\nExamples of scripts that do not need to load immediately and can be fetched with `lazyOnload` include:\n\n- Chat support plugins\n- Social media widgets","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":131,"to":152}}}}],["569",{"pageContent":"`worker`\n\n> **Note:** The `worker` strategy is not yet stable and does not yet work with the [`app/`](/docs/routing/defining-routes) directory. Use with caution.\n\nScripts that use the `worker` strategy are off-loaded to a web worker in order to free up the main thread and ensure that only critical, first-party resources are processed on it. While this strategy can be used for any script, it is an advanced use case that is not guaranteed to support all third-party scripts.\n\nTo use `worker` as a strategy, the `nextScriptWorkers` flag must be enabled in `next.config.js`:\n\n```js\nmodule.exports = {\n  experimental: {\n    nextScriptWorkers: true,\n  },\n}\n```\n\n`worker` scripts can **only currently be used in the `pages/` directory**:\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Home() {\n  return (\n    <>\n      <Script src=\"https://example.com/script.js\" strategy=\"worker\" />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":154,"to":182}}}}],["570",{"pageContent":"`onLoad`\n\n> **Note:** `onLoad` can't be used with `beforeInteractive` – consider using `onReady` instead. Learn more about usage of `onLoad` in the [`app/` directory](https://beta.nextjs.org/docs/optimizing/scripts#onload).\n\nSome third-party scripts require users to run JavaScript code once after the script has finished loading in order to instantiate content or call a function. If you are loading a script with either afterInteractive or lazyOnload as a loading strategy, you can execute code after it has loaded using the onLoad property.\n\nHere's an example of executing a lodash method only after the library has been loaded.\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script\n        src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js\"\n        onLoad={() => {\n          console.log(_.sample([1, 2, 3, 4]))\n        }}\n      />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":184,"to":207}}}}],["571",{"pageContent":"`onReady`\n\n> **Note:** Learn more about usage of `onReady` in the [`app/` directory](https://beta.nextjs.org/docs/optimizing/scripts#onready).\n\nSome third-party scripts require users to run JavaScript code after the script has finished loading and every time the component is mounted (after a route navigation for example). You can execute code after the script's load event when it first loads and then after every subsequent component re-mount using the onReady property.\n\nHere's an example of how to re-instantiate a Google Maps JS embed everytime the component is mounted:\n\n```jsx\nimport { useRef } from 'react'\nimport Script from 'next/script'\n\nexport default function Page() {\n  const mapRef = useRef()","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":209,"to":222}}}}],["572",{"pageContent":"```jsx\nimport { useRef } from 'react'\nimport Script from 'next/script'\n\nexport default function Page() {\n  const mapRef = useRef()\n\n  return (\n    <>\n      <div ref={mapRef}></div>\n      <Script\n        id=\"google-maps\"\n        src=\"https://maps.googleapis.com/maps/api/js\"\n        onReady={() => {\n          new google.maps.Map(mapRef.current, {\n            center: { lat: -34.397, lng: 150.644 },\n            zoom: 8,\n          })\n        }}\n      />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":222,"to":245}}}}],["573",{"pageContent":"`onError`\n\n> **Note:** `onError` cannot be used with the `beforeInteractive` loading strategy. Learn more about usage of `onError` in the [`app/` directory](https://beta.nextjs.org/docs/optimizing/scripts#onError).\n\nSometimes it is helpful to catch when a script fails to load. These errors can be handled with the onError property:\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n        onError={(e) => {\n          console.error('Script failed to load', e)\n        }}\n      />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":247,"to":268}}}}],["574",{"pageContent":"Next Steps\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/script.md\">\n    <b>Optimizing Scripts</b>\n    <small>Learn how to optimize third-party scripts in your Next.js application.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/script.md","loc":{"lines":{"from":270,"to":277}}}}],["575",{"pageContent":"---\ndescription: Learn about the server-only helpers for Middleware and Edge API Routes.\n---\n\n# next/server\n\n`next/server` provides server-only helpers for use in [Middleware](/docs/middleware.md) and [Edge API Routes](/docs/api-routes/edge-api-routes.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":1,"to":7}}}}],["576",{"pageContent":"NextRequest\n\nThe `NextRequest` object is an extension of the native [`Request`](https://developer.mozilla.org/en-US/docs/Web/API/Request) interface, with the following added methods and properties:\n\n- `cookies` - A [RequestCookies](https://edge-runtime.vercel.app/packages/cookies#for-request) instance with cookies from the `Request`. It reads/mutates the `Cookie` header of the request. See also [Using cookies in Middleware](/docs/advanced-features/middleware#using-cookies).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":9,"to":13}}}}],["577",{"pageContent":"- `get` - A method that takes a cookie `name` and returns an object with `name` and `value`. If a cookie with `name` isn't found, it returns `undefined`. If multiple cookies match, it will only return the first match.\n  - `getAll` - A method that is similar to `get`, but returns a list of all the cookies with a matching `name`. If `name` is unspecified, it returns all the available cookies.\n  - `set` - A method that takes an object with properties of `CookieListItem` as defined in the [W3C CookieStore API](https://wicg.github.io/cookie-store/#dictdef-cookielistitem) spec.\n  - `delete` - A method that takes either a cookie `name` or a list of names. and removes the cookies matching the name(s). Returns `true` for deleted and `false` for undeleted cookies.\n  - `has` - A method that takes a cookie `name` and returns a `boolean` based on if the cookie exists (`true`) or not (`false`).\n  - `clear` - A method that takes no argument and will effectively remove the `Cookie` header.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":15,"to":20}}}}],["578",{"pageContent":"- `nextUrl`: Includes an extended, parsed, URL object that gives you access to Next.js specific properties such as `pathname`, `basePath`, `trailingSlash` and `i18n`. Includes the following properties:\n  - `basePath` (`string`)\n  - `buildId` (`string || undefined`)\n  - `defaultLocale` (`string || undefined`)\n  - `domainLocale`\n    - `defaultLocale`: (`string`)\n    - `domain`: (`string`)\n    - `http`: (`boolean || undefined`)\n    - `locales`: (`string[] || undefined`)\n  - `locale` (`string || undefined`)\n  - `url` (`URL`)\n- `ip`: (`string || undefined`) - Has the IP address of the `Request`. This information is provided by your hosting platform.\n- `geo` - Has the geographic location from the `Request`. This information is provided by your hosting platform. Includes the following properties:\n  - `city` (`string || undefined`)\n  - `country` (`string || undefined`)\n  - `region` (`string || undefined`)\n  - `latitude` (`string || undefined`)\n  - `longitude` (`string || undefined`)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":22,"to":39}}}}],["579",{"pageContent":"You can use the `NextRequest` object as a direct replacement for the native `Request` interface, giving you more control over how you manipulate the request.\n\n`NextRequest` can be imported from `next/server`:\n\n```typescript\nimport type { NextRequest } from 'next/server'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":41,"to":47}}}}],["580",{"pageContent":"NextFetchEvent\n\nThe `NextFetchEvent` object extends the native [`FetchEvent`](https://developer.mozilla.org/en-US/docs/Web/API/FetchEvent) object, and includes the [`waitUntil()`](https://developer.mozilla.org/en-US/docs/Web/API/ExtendableEvent/waitUntil) method.\n\nThe `waitUntil()` method can be used to prolong the execution of the function if you have other background work to make.\n\n```typescript\nimport { NextResponse } from 'next/server'\nimport type { NextFetchEvent, NextRequest } from 'next/server'\n\nexport function middleware(req: NextRequest, event: NextFetchEvent) {\n  event.waitUntil(\n    fetch('https://my-analytics-platform.com', {\n      method: 'POST',\n      body: JSON.stringify({ pathname: req.nextUrl.pathname }),\n    })\n  )\n\n  return NextResponse.next()\n}\n```\n\nThe `NextFetchEvent` object can be imported from `next/server`:\n\n```typescript\nimport type { NextFetchEvent } from 'next/server'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":49,"to":75}}}}],["581",{"pageContent":"NextResponse\n\nThe `NextResponse` class extends the native [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) interface, with the following:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":77,"to":79}}}}],["582",{"pageContent":"Public Methods\n\nPublic methods are available on an instance of the `NextResponse` class. Depending on your use case, you can create an instance and assign to a variable, then access the following public methods:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":81,"to":83}}}}],["583",{"pageContent":"- `cookies` - A [ResponseCookies](https://edge-runtime.vercel.app/packages/cookies#for-response) instance with the cookies from the `Response`. It reads/mutates the `Set-Cookie` header of the response. See also [Using cookies in Middleware](/docs/advanced-features/middleware#using-cookies).\n  - `get` - A method that takes a cookie `name` and returns an object with `name` and `value`. If a cookie with `name` isn't found, it returns `undefined`. If multiple cookies match, it will only return the first match.\n  - `getAll` - A method that is similar to `get`, but returns a list of all the cookies with a matching `name`. If `name` is unspecified, it returns all the available cookies.\n  - `set` - A method that takes an object with properties of `CookieListItem` as defined in the [W3C CookieStore API](https://wicg.github.io/cookie-store/#dictdef-cookielistitem) spec.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":85,"to":88}}}}],["584",{"pageContent":"- `set` - A method that takes an object with properties of `CookieListItem` as defined in the [W3C CookieStore API](https://wicg.github.io/cookie-store/#dictdef-cookielistitem) spec.\n  - `delete` - A method that takes either a cookie `name` or a list of names. and removes the cookies matching the name(s). Returns `true` for deleted and `false` for undeleted cookies.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":88,"to":89}}}}],["585",{"pageContent":"Static Methods\n\nThe following static methods are available on the `NextResponse` class directly:\n\n- `redirect()` - Returns a `NextResponse` with a redirect set\n- `rewrite()` - Returns a `NextResponse` with a rewrite set\n- `next()` - Returns a `NextResponse` that will continue the middleware chain\n\nTo use the methods above, **you must return the `NextResponse` object** returned. `NextResponse` can be imported from `next/server`:\n\n```typescript\nimport { NextResponse } from 'next/server'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":162,"to":174}}}}],["586",{"pageContent":"userAgent\n\nThe `userAgent` helper allows you to interact with the user agent object from the request. It is abstracted from the native `Request` object, and is an opt in feature. It has the following properties:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":176,"to":178}}}}],["587",{"pageContent":"- `isBot`: (`boolean`) Whether the request comes from a known bot\n- `browser`\n  - `name`: (`string || undefined`) The name of the browser\n  - `version`: (`string || undefined`) The version of the browser, determined dynamically\n- `device`\n  - `model`: (`string || undefined`) The model of the device, determined dynamically\n  - `type`: (`string || undefined`) The type of the browser, can be one of the following values: `console`, `mobile`, `tablet`, `smarttv`, `wearable`, `embedded`, or `undefined`\n  - `vendor`: (`string || undefined`) The vendor of the device, determined dynamically\n- `engine`\n  - `name`: (`string || undefined`) The name of the browser engine, could be one of the following values: `Amaya`, `Blink`, `EdgeHTML`, `Flow`, `Gecko`, `Goanna`, `iCab`, `KHTML`, `Links`, `Lynx`, `NetFront`, `NetSurf`, `Presto`, `Tasman`, `Trident`, `w3m`, `WebKit` or `undefined`\n  - `version`: (`string || undefined`) The version of the browser engine, determined dynamically, or `undefined`\n- `os`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":180,"to":191}}}}],["588",{"pageContent":"- `version`: (`string || undefined`) The version of the browser engine, determined dynamically, or `undefined`\n- `os`\n  - `name`: (`string || undefined`) The name of the OS, could be `undefined`\n  - `version`: (`string || undefined`) The version of the OS, determined dynamically, or `undefined`\n- `cpu`\n  - `architecture`: (`string || undefined`) The architecture of the CPU, could be one of the following values: `68k`, `amd64`, `arm`, `arm64`, `armhf`, `avr`, `ia32`, `ia64`, `irix`, `irix64`, `mips`, `mips64`, `pa-risc`, `ppc`, `sparc`, `sparc64` or `undefined`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":191,"to":196}}}}],["589",{"pageContent":"`userAgent` can be imported from `next/server`:\n\n```typescript\nimport { userAgent } from 'next/server'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":198,"to":201}}}}],["590",{"pageContent":"```typescript\nimport { NextRequest, NextResponse, userAgent } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  const url = request.nextUrl\n  const { device } = userAgent(request)\n  const viewport = device.type === 'mobile' ? 'mobile' : 'desktop'\n  url.searchParams.set('viewport', viewport)\n  return NextResponse.rewrite(url)\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":204,"to":214}}}}],["591",{"pageContent":"FAQ","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":216,"to":216}}}}],["592",{"pageContent":"Why does `redirect` use 307 and 308?\n\nWhen using `redirect()` you may notice that the status codes used are `307` for a temporary redirect, and `308` for a permanent redirect. While traditionally a `302` was used for a temporary redirect, and a `301` for a permanent redirect, many browsers changed the request method of the redirect, from a `POST` to `GET` request when using a `302`, regardless of the origins request method.\n\nTaking the following example of a redirect from `/users` to `/people`, if you make a `POST` request to `/users` to create a new user, and are conforming to a `302` temporary redirect, the request method will be changed from a `POST` to a `GET` request. This doesn't make sense, as to create a new user, you should be making a `POST` request to `/people`, and not a `GET` request.\n\nThe introduction of the `307` status code means that the request method is preserved as `POST`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":218,"to":224}}}}],["593",{"pageContent":"The introduction of the `307` status code means that the request method is preserved as `POST`.\n\n- `302` - Temporary redirect, will change the request method from `POST` to `GET`\n- `307` - Temporary redirect, will preserve the request method as `POST`\n\nThe `redirect()` method uses a `307` by default, instead of a `302` temporary redirect, meaning your requests will _always_ be preserved as `POST` requests.\n\nIf you want to cause a `GET` response to a `POST` request, use `303`.\n\n[Learn more](https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections) about HTTP Redirects.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":224,"to":233}}}}],["594",{"pageContent":"How do I access Environment Variables?\n\n`process.env` can be used to access [Environment Variables](/docs/basic-features/environment-variables.md) from Edge Middleware. They are evaluated during `next build`:\n\n| Works                                                        | Does **not** work                          |\n| ------------------------------------------------------------ | ------------------------------------------ |\n| `console.log(process.env.MY_ENV_VARIABLE)`                   | `const getEnv = name => process.env[name]` |\n| `const { MY_ENV_VARIABLE } = process.env`                    |                                            |\n| `const { \"MY-ENV-VARIABLE\": MY_ENV_VARIABLE } = process.env` |                                            |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":235,"to":243}}}}],["595",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/edge-runtime.md\">\n    <b>Edge Runtime</b>\n    <small>Learn more about the supported Web APIs available.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/middleware.md\">\n    <b>Middleware</b>\n    <small>Run code before a request is completed.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next/server.md","loc":{"lines":{"from":245,"to":259}}}}],["596",{"pageContent":"---\ndescription: Learn more about setting a base path in Next.js\n---\n\n# Base Path\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version  | Changes          |\n| -------- | ---------------- |\n| `v9.5.0` | Base Path added. |\n\n</details>\n\nTo deploy a Next.js application under a sub-path of a domain you can use the `basePath` config option.\n\n`basePath` allows you to set a path prefix for the application. For example, to use `/docs` instead of `''` (an empty string, the default), open `next.config.js` and add the `basePath` config:\n\n```js\nmodule.exports = {\n  basePath: '/docs',\n}\n```\n\nNote: this value must be set at build time and can not be changed without re-building as the value is inlined in the client-side bundles.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/basepath.md","loc":{"lines":{"from":1,"to":26}}}}],["597",{"pageContent":"Links\n\nWhen linking to other pages using `next/link` and `next/router` the `basePath` will be automatically applied.\n\nFor example, using `/about` will automatically become `/docs/about` when `basePath` is set to `/docs`.\n\n```js\nexport default function HomePage() {\n  return (\n    <>\n      <Link href=\"/about\">About Page</Link>\n    </>\n  )\n}\n```\n\nOutput html:\n\n```html\n<a href=\"/docs/about\">About Page</a>\n```\n\nThis makes sure that you don't have to change all links in your application when changing the `basePath` value.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/basepath.md","loc":{"lines":{"from":28,"to":50}}}}],["598",{"pageContent":"Images\n\nWhen using the [`next/image`](/docs/api-reference/next/image.md) component, you will need to add the `basePath` in front of `src`.\n\nFor example, using `/docs/me.png` will properly serve your image when `basePath` is set to `/docs`.\n\n```jsx\nimport Image from 'next/image'\n\nfunction Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src=\"/docs/me.png\"\n        alt=\"Picture of the author\"\n        width={500}\n        height={500}\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}\n\nexport default Home\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/basepath.md","loc":{"lines":{"from":52,"to":77}}}}],["599",{"pageContent":"---\ndescription: In development mode, pages include an indicator to let you know if your new code it's being compiled. You can opt-out of it here.\n---\n\n# Build indicator\n\nWhen you edit your code, and Next.js is compiling the application, a compilation indicator appears in the bottom right corner of the page.\n\n> **Note:** This indicator is only present in development mode and will not appear when building and running the app in production mode.\n\nIn some cases this indicator can be misplaced on your page, for example, when conflicting with a chat launcher. To change its position, open `next.config.js` and set the `buildActivityPosition` in the `devIndicators` object to `bottom-right` (default), `bottom-left`, `top-right` or `top-left`:\n\n```js\nmodule.exports = {\n  devIndicators: {\n    buildActivityPosition: 'bottom-right',\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/build-indicator.md","loc":{"lines":{"from":1,"to":18}}}}],["600",{"pageContent":"In some cases this indicator might not be useful for you. To remove it, open `next.config.js` and disable the `buildActivity` config in `devIndicators` object:\n\n```js\nmodule.exports = {\n  devIndicators: {\n    buildActivity: false,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/build-indicator.md","loc":{"lines":{"from":21,"to":29}}}}],["601",{"pageContent":"---\ndescription: A custom asset prefix allows you serve static assets from a CDN. Learn more about it here.\n---\n\n# CDN Support with Asset Prefix\n\n> **Attention**: [Deploying to Vercel](/docs/deployment.md) automatically configures a global CDN for your Next.js project.\n> You do not need to manually setup an Asset Prefix.\n\n> **Note**: Next.js 9.5+ added support for a customizable [Base Path](/docs/api-reference/next.config.js/basepath.md), which is better\n> suited for hosting your application on a sub-path like `/docs`.\n> We do not suggest you use a custom Asset Prefix for this use case.\n\nTo set up a [CDN](https://en.wikipedia.org/wiki/Content_delivery_network), you can set up an asset prefix and configure your CDN's origin to resolve to the domain that Next.js is hosted on.\n\nOpen `next.config.js` and add the `assetPrefix` config:\n\n```js\nconst isProd = process.env.NODE_ENV === 'production'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/cdn-support-with-asset-prefix.md","loc":{"lines":{"from":1,"to":19}}}}],["602",{"pageContent":"Open `next.config.js` and add the `assetPrefix` config:\n\n```js\nconst isProd = process.env.NODE_ENV === 'production'\n\nmodule.exports = {\n  // Use the CDN in production and localhost for development.\n  assetPrefix: isProd ? 'https://cdn.mydomain.com' : undefined,\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/cdn-support-with-asset-prefix.md","loc":{"lines":{"from":19,"to":27}}}}],["603",{"pageContent":"Next.js will automatically use your asset prefix for the JavaScript and CSS files it loads from the `/_next/` path (`.next/static/` folder). For example, with the above configuration, the following request for a JS chunk:\n\n```\n/_next/static/chunks/4b9b41aaa062cbbfeff4add70f256968c51ece5d.4d708494b3aed70c04f0.js\n```\n\nWould instead become:\n\n```\nhttps://cdn.mydomain.com/_next/static/chunks/4b9b41aaa062cbbfeff4add70f256968c51ece5d.4d708494b3aed70c04f0.js","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/cdn-support-with-asset-prefix.md","loc":{"lines":{"from":30,"to":39}}}}],["604",{"pageContent":"The exact configuration for uploading your files to a given CDN will depend on your CDN of choice. The only folder you need to host on your CDN is the contents of `.next/static/`, which should be uploaded as `_next/static/` as the above URL request indicates. **Do not upload the rest of your `.next/` folder**, as you should not expose your server code and other configuration to the public.\n\nWhile `assetPrefix` covers requests to `_next/static`, it does not influence the following paths:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/cdn-support-with-asset-prefix.md","loc":{"lines":{"from":42,"to":44}}}}],["605",{"pageContent":"While `assetPrefix` covers requests to `_next/static`, it does not influence the following paths:\n\n- Files in the [public](/docs/basic-features/static-file-serving.md) folder; if you want to serve those assets over a CDN, you'll have to introduce the prefix yourself\n- `/_next/data/` requests for `getServerSideProps` pages. These requests will always be made against the main domain since they're not static.\n- `/_next/data/` requests for `getStaticProps` pages. These requests will always be made against the main domain to support [Incremental Static Generation](/docs/basic-features/data-fetching/incremental-static-regeneration.md), even if you're not using it (for consistency).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/cdn-support-with-asset-prefix.md","loc":{"lines":{"from":44,"to":48}}}}],["606",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/static-file-serving.md\">\n    <b>Static File Serving:</b>\n    <small>Serve static files, like images, in the public directory.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/cdn-support-with-asset-prefix.md","loc":{"lines":{"from":50,"to":64}}}}],["607",{"pageContent":"---\ndescription: Next.js provides gzip compression to compress rendered content and static files, it only works with the server target. Learn more about it here.\n---\n\n# Compression\n\nNext.js provides [**gzip**](https://tools.ietf.org/html/rfc6713#section-3) compression to compress rendered content and static files. In general you will want to enable compression on a HTTP proxy like [nginx](https://www.nginx.com/), to offload load from the `Node.js` process.\n\nTo disable **compression**, open `next.config.js` and disable the `compress` config:\n\n```js\nmodule.exports = {\n  compress: false,\n}\n```\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/compression.md","loc":{"lines":{"from":1,"to":24}}}}],["608",{"pageContent":"---\ndescription: Configure how Next.js will dispose and keep in memory pages created in development.\n---\n\n# Configuring onDemandEntries\n\nNext.js exposes some options that give you some control over how the server will dispose or keep in memory built pages in development.\n\nTo change the defaults, open `next.config.js` and add the `onDemandEntries` config:\n\n```js\nmodule.exports = {\n  onDemandEntries: {\n    // period (in ms) where the server will keep pages in the buffer\n    maxInactiveAge: 25 * 1000,\n    // number of pages that should be kept simultaneously without being disposed\n    pagesBufferLength: 2,\n  },\n}\n```\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/configuring-onDemandEntries.md","loc":{"lines":{"from":1,"to":29}}}}],["609",{"pageContent":"---\ndescription: Configure the build id, which is used to identify the current build in which your application is being served.\n---\n\n# Configuring the Build ID\n\nNext.js uses a constant id generated at build time to identify which version of your application is being served. This can cause problems in multi-server deployments when `next build` is run on every server. In order to keep a consistent build id between builds you can provide your own build id.\n\nOpen `next.config.js` and add the `generateBuildId` function:\n\n```js\nmodule.exports = {\n  generateBuildId: async () => {\n    // You can, for example, get the latest git commit hash here\n    return 'my-build-id'\n  },\n}\n```\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/configuring-the-build-id.md","loc":{"lines":{"from":1,"to":27}}}}],["610",{"pageContent":"---\ndescription: Custom configuration for the next/image loader\n---\n\n# Custom Image Loader Configuration\n\nIf you want to use a cloud provider to optimize images instead of using the Next.js built-in Image Optimization API, you can configure `next.config.js` with the following:\n\n```js\nmodule.exports = {\n  images: {\n    loader: 'custom',\n    loaderFile: './my/image/loader.js',\n  },\n}\n```\n\nThis `loaderFile` must point to a file relative to the root of your Next.js application. The file must export a default function that returns a string, for example:\n\n```js\nexport default function myImageLoader({ src, width, quality }) {\n  return `https://example.com/${src}?w=${width}&q=${quality || 75}`\n}\n```\n\nAlternatively, you can use the [`loader` prop](/docs/api-reference/next/image.md#loader) to pass the function to each instance of `next/image`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-image-loader-config.md","loc":{"lines":{"from":1,"to":26}}}}],["611",{"pageContent":"Example Loader Configuration\n\n- [Akamai](#akamai)\n- [Cloudinary](#cloudinary)\n- [Cloudflare](#cloudflare)\n- [Contentful](#contentful)\n- [Fastly](#fastly)\n- [Gumlet](#gumlet)\n- [ImageEngine](#imageengine)\n- [Imgix](#imgix)\n- [Thumbor](#thumbor)\n\n### Akamai\n\n```js\n// Docs: https://techdocs.akamai.com/ivm/reference/test-images-on-demand\nexport default function akamaiLoader({ src, width, quality }) {\n  return `https://example.com/${src}?imwidth=${width}`\n}\n```\n\n### Cloudinary\n\n```js\n// Demo: https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg\nexport default function cloudinaryLoader({ src, width, quality }) {\n  const params = ['f_auto', 'c_limit', `w_${width}`, `q_${quality || 'auto'}`]\n  return `https://example.com/${params.join(',')}${src}`\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-image-loader-config.md","loc":{"lines":{"from":28,"to":57}}}}],["612",{"pageContent":"Cloudflare\n\n```js\n// Docs: https://developers.cloudflare.com/images/url-format\nexport default function cloudflareLoader({ src, width, quality }) {\n  const params = [`width=${width}`, `quality=${quality || 75}`, 'format=auto']\n  return `https://example.com/cdn-cgi/image/${params.join(',')}/${src}`\n}\n```\n\n### Contentful\n\n```js\n// Docs: https://www.contentful.com/developers/docs/references/images-api/\nexport default function contentfulLoader({ src, quality, width }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('fm', 'webp')\n  url.searchParams.set('w', width.toString())\n  url.searchParams.set('q', quality.toString() || '75')\n  return url.href\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-image-loader-config.md","loc":{"lines":{"from":59,"to":80}}}}],["613",{"pageContent":"Fastly\n\n```js\n// Docs: https://developer.fastly.com/reference/io/\nexport default function fastlyLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('auto', 'webp')\n  url.searchParams.set('width', width.toString())\n  url.searchParams.set('quality', quality.toString() || '75')\n  return url.href\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-image-loader-config.md","loc":{"lines":{"from":82,"to":93}}}}],["614",{"pageContent":"Gumlet\n\n```js\n// Docs: https://docs.gumlet.com/reference/image-transform-size\nexport default function gumletLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  url.searchParams.set('format', 'auto')\n  url.searchParams.set('w', width.toString())\n  url.searchParams.set('q', quality.toString() || '75')\n  return url.href\n}\n```\n\n### ImageEngine\n\n```js\n// Docs: https://support.imageengine.io/hc/en-us/articles/360058880672-Directives\nexport default function imageengineLoader({ src, width, quality }) {\n  const compression = 100 - (quality || 50)\n  const params = [`w_${width}`, `cmpr_${compression}`)]\n  return `https://example.com${src}?imgeng=/${params.join('/')`\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-image-loader-config.md","loc":{"lines":{"from":95,"to":117}}}}],["615",{"pageContent":"Imgix\n\n```js\n// Demo: https://static.imgix.net/daisy.png?format=auto&fit=max&w=300\nexport default function imgixLoader({ src, width, quality }) {\n  const url = new URL(`https://example.com${src}`)\n  const params = url.searchParams\n  params.set('auto', params.getAll('auto').join(',') || 'format')\n  params.set('fit', params.get('fit') || 'max')\n  params.set('w', params.get('w') || width.toString())\n  params.set('q', quality.toString() || '50')\n  return url.href\n}\n```\n\n### Thumbor\n\n```js\n// Docs: https://thumbor.readthedocs.io/en/latest/\nexport default function thumborLoader({ src, width, quality }) {\n  const params = [`${width}x0`, `filters:quality(${quality || 75})`]\n  return `https://example.com${params.join('/')}${src}`\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-image-loader-config.md","loc":{"lines":{"from":119,"to":142}}}}],["616",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/image-optimization.md\">\n    <b>Image Optimization</b>\n    <small>Learn how to optimize images with the Image component.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-image-loader-config.md","loc":{"lines":{"from":144,"to":158}}}}],["617",{"pageContent":"---\ndescription: Extend the default page extensions used by Next.js when resolving pages in the pages directory.\n---\n\n# Custom Page Extensions\n\nYou can extend the default Page extensions (`.tsx`, `.ts`, `.jsx`, `.js`) used by Next.js. Inside `next.config.js`, add the `pageExtensions` config:\n\n```js\nmodule.exports = {\n  pageExtensions: ['mdx', 'md', 'jsx', 'js', 'tsx', 'ts'],\n}\n```\n\nChanging these values affects _all_ Next.js pages, including the following:\n\n- `middleware.js`\n- `pages/_document.js`\n- `pages/_app.js`\n- `pages/api/`\n\nFor example, if you reconfigure `.ts` page extensions to `.page.ts`, you would need to rename pages like `_app.page.ts`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-page-extensions.md","loc":{"lines":{"from":1,"to":22}}}}],["618",{"pageContent":"Including non-page files in the `pages` directory\n\nYou can colocate test files or other files used by components in the `pages` directory. Inside `next.config.js`, add the `pageExtensions` config:\n\n```js\nmodule.exports = {\n  pageExtensions: ['page.tsx', 'page.ts', 'page.jsx', 'page.js'],\n}\n```\n\nThen, rename your pages to have a file extension that includes `.page` (e.g. rename `MyPage.tsx` to `MyPage.page.tsx`). Ensure you rename _all_ Next.js pages, including the files mentioned above.\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-page-extensions.md","loc":{"lines":{"from":24,"to":43}}}}],["619",{"pageContent":"---\ndescription: Extend the default webpack config added by Next.js.\n---\n\n# Custom Webpack Config\n\n> Note: changes to webpack config are not covered by semver so proceed at your own risk\n\nBefore continuing to add custom webpack configuration to your application make sure Next.js doesn't already support your use-case:\n\n- [CSS imports](/docs/basic-features/built-in-css-support.md#adding-a-global-stylesheet)\n- [CSS modules](/docs/basic-features/built-in-css-support.md#adding-component-level-css)\n- [Sass/SCSS imports](/docs/basic-features/built-in-css-support.md#sass-support)\n- [Sass/SCSS modules](/docs/basic-features/built-in-css-support.md#sass-support)\n- [preact](https://github.com/vercel/next.js/tree/canary/examples/using-preact)\n- [Customizing babel configuration](/docs/advanced-features/customizing-babel-config.md)\n\nSome commonly asked for features are available as plugins:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-webpack-config.md","loc":{"lines":{"from":1,"to":18}}}}],["620",{"pageContent":"Some commonly asked for features are available as plugins:\n\n- [@next/mdx](https://github.com/vercel/next.js/tree/canary/packages/next-mdx)\n- [@next/bundle-analyzer](https://github.com/vercel/next.js/tree/canary/packages/next-bundle-analyzer)\n\nIn order to extend our usage of `webpack`, you can define a function that extends its config inside `next.config.js`, like so:\n\n```js\nmodule.exports = {\n  webpack: (\n    config,\n    { buildId, dev, isServer, defaultLoaders, nextRuntime, webpack }\n  ) => {\n    // Important: return the modified config\n    return config\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-webpack-config.md","loc":{"lines":{"from":18,"to":34}}}}],["621",{"pageContent":"> The `webpack` function is executed twice, once for the server and once for the client. This allows you to distinguish between client and server configuration using the `isServer` property.\n\nThe second argument to the `webpack` function is an object with the following properties:\n\n- `buildId`: `String` - The build id, used as a unique identifier between builds\n- `dev`: `Boolean` - Indicates if the compilation will be done in development\n- `isServer`: `Boolean` - It's `true` for server-side compilation, and `false` for client-side compilation\n- `nextRuntime`: `String | undefined` - The target runtime for server-side compilation; either `\"edge\"` or `\"nodejs\"`, it's `undefined` for client-side compilation.\n- `defaultLoaders`: `Object` - Default loaders used internally by Next.js:\n  - `babel`: `Object` - Default `babel-loader` configuration\n\nExample usage of `defaultLoaders.babel`:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-webpack-config.md","loc":{"lines":{"from":37,"to":48}}}}],["622",{"pageContent":"Example usage of `defaultLoaders.babel`:\n\n```js\n// Example config for adding a loader that depends on babel-loader\n// This source was taken from the @next/mdx plugin source:\n// https://github.com/vercel/next.js/tree/canary/packages/next-mdx\nmodule.exports = {\n  webpack: (config, options) => {\n    config.module.rules.push({\n      test: /\\.mdx/,\n      use: [\n        options.defaultLoaders.babel,\n        {\n          loader: '@mdx-js/loader',\n          options: pluginOptions.options,\n        },\n      ],\n    })\n\n    return config\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-webpack-config.md","loc":{"lines":{"from":48,"to":70}}}}],["623",{"pageContent":"`nextRuntime`\n\nNotice that `isServer` is `true` when `nextRuntime` is `\"edge\"` or `\"nodejs\"`, nextRuntime \"`edge`\" is currently for middleware and server components in edge runtime only.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-webpack-config.md","loc":{"lines":{"from":72,"to":74}}}}],["624",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/custom-webpack-config.md","loc":{"lines":{"from":76,"to":83}}}}],["625",{"pageContent":"---\ndescription: Next.js will generate etags for every page by default. Learn more about how to disable etag generation here.\n---\n\n# Disabling ETag Generation\n\nNext.js will generate [etags](https://en.wikipedia.org/wiki/HTTP_ETag) for every page by default. You may want to disable etag generation for HTML pages depending on your cache strategy.\n\nOpen `next.config.js` and disable the `generateEtags` option:\n\n```js\nmodule.exports = {\n  generateEtags: false,\n}\n```\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/disabling-etag-generation.md","loc":{"lines":{"from":1,"to":24}}}}],["626",{"pageContent":"---\ndescription: Next.js will automatically use HTTP Keep-Alive by default. Learn more about how to disable HTTP Keep-Alive here.\n---\n\n# Disabling HTTP Keep-Alive\n\nIn Node.js versions prior to 18, Next.js automatically polyfills `fetch()` with [node-fetch](/docs/basic-features/supported-browsers-features#polyfills) and enables [HTTP Keep-Alive](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Keep-Alive) by default.\n\nTo disable HTTP Keep-Alive for all `fetch()` calls on the server-side, open `next.config.js` and add the `httpAgentOptions` config:\n\n```js\nmodule.exports = {\n  httpAgentOptions: {\n    keepAlive: false,\n  },\n}\n```\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/disabling-http-keep-alive.md","loc":{"lines":{"from":1,"to":26}}}}],["627",{"pageContent":"---\ndescription: Next.js will add the `x-powered-by` header by default. Learn to opt-out of it here.\n---\n\n# Disabling x-powered-by\n\nBy default Next.js will add the `x-powered-by` header. To opt-out of it, open `next.config.js` and disable the `poweredByHeader` config:\n\n```js\nmodule.exports = {\n  poweredByHeader: false,\n}\n```\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/disabling-x-powered-by.md","loc":{"lines":{"from":1,"to":22}}}}],["628",{"pageContent":"---\ndescription: Learn to add and access environment variables in your Next.js application at build time.\n---\n\n# Environment Variables\n\n> Since the release of [Next.js 9.4](https://nextjs.org/blog/next-9-4) we now have a more intuitive and ergonomic experience for [adding environment variables](/docs/basic-features/environment-variables.md). Give it a try!\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-env-from-next-config-js\">With env</a></li>\n  </ul>\n</details>\n\n> <b>Note</b>: environment variables specified in this way will <b>always</b> be included in the JavaScript bundle, prefixing the environment variable name with `NEXT_PUBLIC_` only has an effect when specifying them [through the environment or .env files](/docs/basic-features/environment-variables.md).\n\nTo add environment variables to the JavaScript bundle, open `next.config.js` and add the `env` config:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/environment-variables.md","loc":{"lines":{"from":1,"to":18}}}}],["629",{"pageContent":"To add environment variables to the JavaScript bundle, open `next.config.js` and add the `env` config:\n\n```js\nmodule.exports = {\n  env: {\n    customKey: 'my-value',\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/environment-variables.md","loc":{"lines":{"from":18,"to":25}}}}],["630",{"pageContent":"Now you can access `process.env.customKey` in your code. For example:\n\n```jsx\nfunction Page() {\n  return <h1>The value of customKey is: {process.env.customKey}</h1>\n}\n\nexport default Page\n```\n\nNext.js will replace `process.env.customKey` with `'my-value'` at build time. Trying to destructure `process.env` variables won't work due to the nature of webpack [DefinePlugin](https://webpack.js.org/plugins/define-plugin/).\n\nFor example, the following line:\n\n```jsx\nreturn <h1>The value of customKey is: {process.env.customKey}</h1>\n```\n\nWill end up being:\n\n```jsx\nreturn <h1>The value of customKey is: {'my-value'}</h1>\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/environment-variables.md","loc":{"lines":{"from":28,"to":50}}}}],["631",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/environment-variables.md\">\n    <b>Built-in support for Environment Variables:</b>\n    <small>Learn more about the new support for environment variables.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/environment-variables.md","loc":{"lines":{"from":52,"to":66}}}}],["632",{"pageContent":"---\ndescription: Customize the pages that will be exported as HTML files when using `next export`.\n---\n\n# exportPathMap\n\n> This feature is exclusive to `next export` and currently **deprecated** in favor of `getStaticPaths` with `pages` or `generateStaticParams` with `app`.\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-static-export\">Static Export</a></li>\n  </ul>\n</details>\n\n`exportPathMap` allows you to specify a mapping of request paths to page destinations, to be used during export. Paths defined in `exportPathMap` will also be available when using [`next dev`](/docs/api-reference/cli.md#development).\n\nLet's start with an example, to create a custom `exportPathMap` for an app with the following pages:\n\n- `pages/index.js`\n- `pages/about.js`\n- `pages/post.js`\n\nOpen `next.config.js` and add the following `exportPathMap` config:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/exportPathMap.md","loc":{"lines":{"from":1,"to":24}}}}],["633",{"pageContent":"- `pages/index.js`\n- `pages/about.js`\n- `pages/post.js`\n\nOpen `next.config.js` and add the following `exportPathMap` config:\n\n```js\nmodule.exports = {\n  exportPathMap: async function (\n    defaultPathMap,\n    { dev, dir, outDir, distDir, buildId }\n  ) {\n    return {\n      '/': { page: '/' },\n      '/about': { page: '/about' },\n      '/p/hello-nextjs': { page: '/post', query: { title: 'hello-nextjs' } },\n      '/p/learn-nextjs': { page: '/post', query: { title: 'learn-nextjs' } },\n      '/p/deploy-nextjs': { page: '/post', query: { title: 'deploy-nextjs' } },\n    }\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/exportPathMap.md","loc":{"lines":{"from":24,"to":44}}}}],["634",{"pageContent":"> Note: the `query` field in `exportPathMap` cannot be used with [automatically statically optimized pages](/docs/advanced-features/automatic-static-optimization) or [`getStaticProps` pages](/docs/basic-features/data-fetching/get-static-props.md) as they are rendered to HTML files at build-time and additional query information cannot be provided during `next export`.\n\nThe pages will then be exported as HTML files, for example, `/about` will become `/about.html`.\n\n`exportPathMap` is an `async` function that receives 2 arguments: the first one is `defaultPathMap`, which is the default map used by Next.js. The second argument is an object with:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/exportPathMap.md","loc":{"lines":{"from":47,"to":51}}}}],["635",{"pageContent":"`exportPathMap` is an `async` function that receives 2 arguments: the first one is `defaultPathMap`, which is the default map used by Next.js. The second argument is an object with:\n\n- `dev` - `true` when `exportPathMap` is being called in development. `false` when running `next export`. In development `exportPathMap` is used to define routes.\n- `dir` - Absolute path to the project directory\n- `outDir` - Absolute path to the `out/` directory ([configurable with `-o`](#customizing-the-output-directory)). When `dev` is `true` the value of `outDir` will be `null`.\n- `distDir` - Absolute path to the `.next/` directory (configurable with the [`distDir`](/docs/api-reference/next.config.js/setting-a-custom-build-directory.md) config)\n- `buildId` - The generated build id\n\nThe returned object is a map of pages where the `key` is the `pathname` and the `value` is an object that accepts the following fields:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/exportPathMap.md","loc":{"lines":{"from":51,"to":59}}}}],["636",{"pageContent":"The returned object is a map of pages where the `key` is the `pathname` and the `value` is an object that accepts the following fields:\n\n- `page`: `String` - the page inside the `pages` directory to render\n- `query`: `Object` - the `query` object passed to `getInitialProps` when prerendering. Defaults to `{}`\n\n> The exported `pathname` can also be a filename (for example, `/readme.md`), but you may need to set the `Content-Type` header to `text/html` when serving its content if it is different than `.html`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/exportPathMap.md","loc":{"lines":{"from":59,"to":64}}}}],["637",{"pageContent":"Adding a trailing slash\n\nIt is possible to configure Next.js to export pages as `index.html` files and require trailing slashes, `/about` becomes `/about/index.html` and is routable via `/about/`. This was the default behavior prior to Next.js 9.\n\nTo switch back and add a trailing slash, open `next.config.js` and enable the `trailingSlash` config:\n\n```js\nmodule.exports = {\n  trailingSlash: true,\n}\n```\n\n## Customizing the output directory\n\n[`next export`](/docs/advanced-features/static-html-export.md#how-to-use-it) will use `out` as the default output directory, you can customize this using the `-o` argument, like so:\n\n```bash\nnext export -o outdir\n```\n\n> **Warning**: Using `exportPathMap` is deprecated and is overridden by `getStaticPaths` inside `pages`. We recommend not to use them together.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/exportPathMap.md","loc":{"lines":{"from":66,"to":86}}}}],["638",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/static-html-export.md\">\n    <b>Static HTML Export:</b>\n    <small>Export your Next.js app to static HTML.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/exportPathMap.md","loc":{"lines":{"from":88,"to":102}}}}],["639",{"pageContent":"---\ndescription: Add custom HTTP headers to your Next.js app.\n---\n\n# Headers\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/headers\">Headers</a></li>\n  </ul>\n</details>\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes        |\n| --------- | -------------- |\n| `v10.2.0` | `has` added.   |\n| `v9.5.0`  | Headers added. |\n\n</details>\n\nHeaders allow you to set custom HTTP headers on the response to an incoming request on a given path.\n\nTo set custom HTTP headers you can use the `headers` key in `next.config.js`:\n\n```js\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        source: '/about',\n        headers: [\n          {\n            key: 'x-custom-header',\n            value: 'my custom header value',\n          },\n          {\n            key: 'x-another-custom-header',\n            value: 'my other custom header value',\n          },\n        ],\n      },\n    ]\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":1,"to":47}}}}],["640",{"pageContent":"`headers` is an async function that expects an array to be returned holding objects with `source` and `headers` properties:\n\n- `source` is the incoming request path pattern.\n- `headers` is an array of response header objects, with `key` and `value` properties.\n- `basePath`: `false` or `undefined` - if false the basePath won't be included when matching, can be used for external rewrites only.\n- `locale`: `false` or `undefined` - whether the locale should not be included when matching.\n- `has` is an array of [has objects](#header-cookie-and-query-matching) with the `type`, `key` and `value` properties.\n- `missing` is an array of [missing objects](#header-cookie-and-query-matching) with the `type`, `key` and `value` properties.\n\nHeaders are checked before the filesystem which includes pages and `/public` files.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":50,"to":59}}}}],["641",{"pageContent":"Header Overriding Behavior\n\nIf two headers match the same path and set the same header key, the last header key will override the first. Using the below headers, the path `/hello` will result in the header `x-hello` being `world` due to the last header value set being `world`.\n\n```js\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        source: '/:path*',\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'there',\n          },\n        ],\n      },\n      {\n        source: '/hello',\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'world',\n          },\n        ],\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":61,"to":90}}}}],["642",{"pageContent":"Path Matching\n\nPath matches are allowed, for example `/blog/:slug` will match `/blog/hello-world` (no nested paths):\n\n```js\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        source: '/blog/:slug',\n        headers: [\n          {\n            key: 'x-slug',\n            value: ':slug', // Matched parameters can be used in the value\n          },\n          {\n            key: 'x-slug-:slug', // Matched parameters can be used in the key\n            value: 'my other custom header value',\n          },\n        ],\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":92,"to":116}}}}],["643",{"pageContent":"Wildcard Path Matching\n\nTo match a wildcard path you can use `*` after a parameter, for example `/blog/:slug*` will match `/blog/a/b/c/d/hello-world`:\n\n```js\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        source: '/blog/:slug*',\n        headers: [\n          {\n            key: 'x-slug',\n            value: ':slug*', // Matched parameters can be used in the value\n          },\n          {\n            key: 'x-slug-:slug*', // Matched parameters can be used in the key\n            value: 'my other custom header value',\n          },\n        ],\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":118,"to":142}}}}],["644",{"pageContent":"Regex Path Matching\n\nTo match a regex path you can wrap the regex in parenthesis after a parameter, for example `/blog/:slug(\\\\d{1,})` will match `/blog/123` but not `/blog/abc`:\n\n```js\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        source: '/blog/:post(\\\\d{1,})',\n        headers: [\n          {\n            key: 'x-post',\n            value: ':post',\n          },\n        ],\n      },\n    ]\n  },\n}\n```\n\nThe following characters `(`, `)`, `{`, `}`, `:`, `*`, `+`, `?` are used for regex path matching, so when used in the `source` as non-special values they must be escaped by adding `\\\\` before them:\n\n```js\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        // this will match `/english(default)/something` being requested\n        source: '/english\\\\(default\\\\)/:slug',\n        headers: [\n          {\n            key: 'x-header',\n            value: 'value',\n          },\n        ],\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":144,"to":185}}}}],["645",{"pageContent":"Header, Cookie, and Query Matching\n\nTo only apply a header when header, cookie, or query values also match the `has` field or don't match the `missing` field can be used. Both the `source` and all `has` items must match and all `missing` items must not match for the header to be applied.\n\n`has` and `missing` items can have the following fields:\n\n- `type`: `String` - must be either `header`, `cookie`, `host`, or `query`.\n- `key`: `String` - the key from the selected type to match against.\n- `value`: `String` or `undefined` - the value to check for, if undefined any value will match. A regex like string can be used to capture a specific part of the value, e.g. if the value `first-(?<paramName>.*)` is used for `first-second` then `second` will be usable in the destination with `:paramName`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":187,"to":195}}}}],["646",{"pageContent":"```js\nmodule.exports = {\n  async headers() {\n    return [\n      // if the header `x-add-header` is present,\n      // the `x-another-header` header will be applied\n      {\n        source: '/:path*',\n        has: [\n          {\n            type: 'header',\n            key: 'x-add-header',\n          },\n        ],\n        headers: [\n          {\n            key: 'x-another-header',\n            value: 'hello',\n          },\n        ],\n      },\n      // if the header `x-no-header` is not present,\n      // the `x-another-header` header will be applied\n      {\n        source: '/:path*',\n        missing: [\n          {\n            type: 'header',\n            key: 'x-no-header',\n          },\n        ],\n        headers: [\n          {\n            key: 'x-another-header',\n            value: 'hello',\n          },\n        ],\n      },\n      // if the source, query, and cookie are matched,\n      // the `x-authorized` header will be applied\n      {\n        source: '/specific/:path*',\n        has: [\n          {\n            type: 'query',","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":197,"to":241}}}}],["647",{"pageContent":"// if the source, query, and cookie are matched,\n      // the `x-authorized` header will be applied\n      {\n        source: '/specific/:path*',\n        has: [\n          {\n            type: 'query',\n            key: 'page',\n            // the page value will not be available in the\n            // header key/values since value is provided and\n            // doesn't use a named capture group e.g. (?<page>home)\n            value: 'home',\n          },\n          {\n            type: 'cookie',\n            key: 'authorized',\n            value: 'true',\n          },\n        ],\n        headers: [\n          {\n            key: 'x-authorized',\n            value: ':authorized',\n          },\n        ],\n      },\n      // if the header `x-authorized` is present and\n      // contains a matching value, the `x-another-header` will be applied\n      {\n        source: '/:path*',\n        has: [\n          {\n            type: 'header',\n            key: 'x-authorized',\n            value: '(?<authorized>yes|true)',\n          },\n        ],","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":241,"to":277}}}}],["648",{"pageContent":"{\n        source: '/:path*',\n        has: [\n          {\n            type: 'header',\n            key: 'x-authorized',\n            value: '(?<authorized>yes|true)',\n          },\n        ],\n        headers: [\n          {\n            key: 'x-another-header',\n            value: ':authorized',\n          },\n        ],\n      },\n      // if the host is `example.com`,\n      // this header will be applied\n      {\n        source: '/:path*',\n        has: [\n          {\n            type: 'host',\n            value: 'example.com',\n          },\n        ],\n        headers: [\n          {\n            key: 'x-another-header',\n            value: ':authorized',\n          },\n        ],\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":277,"to":313}}}}],["649",{"pageContent":"Headers with basePath support\n\nWhen leveraging [`basePath` support](/docs/api-reference/next.config.js/basepath.md) with headers each `source` is automatically prefixed with the `basePath` unless you add `basePath: false` to the header:\n\n```js\nmodule.exports = {\n  basePath: '/docs',\n\n  async headers() {\n    return [\n      {\n        source: '/with-basePath', // becomes /docs/with-basePath\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'world',\n          },\n        ],\n      },\n      {\n        source: '/without-basePath', // is not modified since basePath: false is set\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'world',\n          },\n        ],\n        basePath: false,\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":315,"to":347}}}}],["650",{"pageContent":"Headers with i18n support\n\nWhen leveraging [`i18n` support](/docs/advanced-features/i18n-routing.md) with headers each `source` is automatically prefixed to handle the configured `locales` unless you add `locale: false` to the header. If `locale: false` is used you must prefix the `source` with a locale for it to be matched correctly.\n\n```js\nmodule.exports = {\n  i18n: {\n    locales: ['en', 'fr', 'de'],\n    defaultLocale: 'en',\n  },","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":349,"to":358}}}}],["651",{"pageContent":"async headers() {\n    return [\n      {\n        source: '/with-locale', // automatically handles all locales\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'world',\n          },\n        ],\n      },\n      {\n        // does not handle locales automatically since locale: false is set\n        source: '/nl/with-locale-manual',\n        locale: false,\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'world',\n          },\n        ],\n      },\n      {\n        // this matches '/' since `en` is the defaultLocale\n        source: '/en',\n        locale: false,\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'world',\n          },\n        ],\n      },\n      {\n        // this gets converted to /(en|fr|de)/(.*) so will not match the top-level\n        // `/` or `/fr` routes like /:path* would\n        source: '/(.*)',\n        headers: [\n          {\n            key: 'x-hello',\n            value: 'world',\n          },\n        ],\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":360,"to":407}}}}],["652",{"pageContent":"Cache-Control\n\nYou can set the `Cache-Control` header in your [Next.js API Routes](/docs/api-routes/introduction.md) by using the `res.setHeader` method:\n\n```js\n// pages/api/user.js\n\nexport default function handler(req, res) {\n  res.setHeader('Cache-Control', 's-maxage=86400')\n  res.status(200).json({ name: 'John Doe' })\n}\n```\n\nYou cannot set `Cache-Control` headers in `next.config.js` file as these will be overwritten in production to ensure that API Routes and static assets are cached effectively.\n\nIf you need to revalidate the cache of a page that has been [statically generated](/docs/basic-features/pages.md#static-generation-recommended), you can do so by setting the `revalidate` prop in the page's [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) function.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":409,"to":424}}}}],["653",{"pageContent":"Related\n\nFor more information, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/security-headers.md\">\n    <b>Security Headers:</b>\n    <small>Improve the security of your Next.js application by adding HTTP response headers.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/headers.md","loc":{"lines":{"from":426,"to":435}}}}],["654",{"pageContent":"---\ndescription: Next.js reports ESLint errors and warnings during builds by default. Learn how to opt-out of this behavior here.\n---\n\n# Ignoring ESLint\n\nWhen ESLint is detected in your project, Next.js fails your **production build** (`next build`) when errors are present.\n\nIf you'd like Next.js to produce production code even when your application has ESLint errors, you can disable the built-in linting step completely. This is not recommended unless you already have ESLint configured to run in a separate part of your workflow (for example, in CI or a pre-commit hook).\n\nOpen `next.config.js` and enable the `ignoreDuringBuilds` option in the `eslint` config:\n\n```js\nmodule.exports = {\n  eslint: {\n    // Warning: This allows production builds to successfully complete even if\n    // your project has ESLint errors.\n    ignoreDuringBuilds: true,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/ignoring-eslint.md","loc":{"lines":{"from":1,"to":21}}}}],["655",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/eslint.md\">\n    <b>ESLint:</b>\n    <small>Get started with ESLint in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/ignoring-eslint.md","loc":{"lines":{"from":23,"to":37}}}}],["656",{"pageContent":"---\ndescription: Next.js reports TypeScript errors by default. Learn to opt-out of this behavior here.\n---\n\n# Ignoring TypeScript Errors\n\nNext.js fails your **production build** (`next build`) when TypeScript errors are present in your project.\n\nIf you'd like Next.js to dangerously produce production code even when your application has errors, you can disable the built-in type checking step.\n\nIf disabled, be sure you are running type checks as part of your build or deploy process, otherwise this can be very dangerous.\n\nOpen `next.config.js` and enable the `ignoreBuildErrors` option in the `typescript` config:\n\n```js\nmodule.exports = {\n  typescript: {\n    // !! WARN !!\n    // Dangerously allow production builds to successfully complete even if\n    // your project has type errors.\n    // !! WARN !!\n    ignoreBuildErrors: true,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/ignoring-typescript-errors.md","loc":{"lines":{"from":1,"to":25}}}}],["657",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/typescript.md\">\n    <b>TypeScript:</b>\n    <small>Get started with TypeScript in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/ignoring-typescript-errors.md","loc":{"lines":{"from":27,"to":41}}}}],["658",{"pageContent":"---\ndescription: learn more about the configuration file used by Next.js to handle your application.\n---\n\n# next.config.js\n\nFor custom advanced configuration of Next.js, you can create a `next.config.js` or `next.config.mjs` file in the root of your project directory (next to `package.json`).\n\n`next.config.js` is a regular Node.js module, not a JSON file. It gets used by the Next.js server and build phases, and it's not included in the browser build.\n\nTake a look at the following `next.config.js` example:\n\n```js\n/**\n * @type {import('next').NextConfig}\n */\nconst nextConfig = {\n  /* config options here */\n}\n\nmodule.exports = nextConfig\n```\n\nIf you need [ECMAScript modules](https://nodejs.org/api/esm.html), you can use `next.config.mjs`:\n\n```js\n/**\n * @type {import('next').NextConfig}\n */\nconst nextConfig = {\n  /* config options here */\n}\n\nexport default nextConfig","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/introduction.md","loc":{"lines":{"from":1,"to":34}}}}],["659",{"pageContent":"You can also use a function:\n\n```js\nmodule.exports = (phase, { defaultConfig }) => {\n  /**\n   * @type {import('next').NextConfig}\n   */\n  const nextConfig = {\n    /* config options here */\n  }\n  return nextConfig\n}\n```\n\nSince Next.js 12.1.0, you can use an async function:\n\n```js\nmodule.exports = async (phase, { defaultConfig }) => {\n  /**\n   * @type {import('next').NextConfig}\n   */\n  const nextConfig = {\n    /* config options here */\n  }\n  return nextConfig\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/introduction.md","loc":{"lines":{"from":37,"to":62}}}}],["660",{"pageContent":"`phase` is the current context in which the configuration is loaded. You can see the [available phases](https://github.com/vercel/next.js/blob/5e6b008b561caf2710ab7be63320a3d549474a5b/packages/next/shared/lib/constants.ts#L19-L23). Phases can be imported from `next/constants`:\n\n```js\nconst { PHASE_DEVELOPMENT_SERVER } = require('next/constants')\n\nmodule.exports = (phase, { defaultConfig }) => {\n  if (phase === PHASE_DEVELOPMENT_SERVER) {\n    return {\n      /* development only config options here */\n    }\n  }\n\n  return {\n    /* config options for all phases except development here */\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/introduction.md","loc":{"lines":{"from":65,"to":80}}}}],["661",{"pageContent":"The commented lines are the place where you can put the configs allowed by `next.config.js`, which are [defined in this file](https://github.com/vercel/next.js/blob/canary/packages/next/src/server/config-shared.ts).\n\nHowever, none of the configs are required, and it's not necessary to understand what each config does. Instead, search for the features you need to enable or modify in this section and they will show you what to do.\n\n> Avoid using new JavaScript features not available in your target Node.js version. `next.config.js` will not be parsed by Webpack, Babel or TypeScript.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/introduction.md","loc":{"lines":{"from":83,"to":87}}}}],["662",{"pageContent":"---\ndescription: The complete Next.js runtime is now Strict Mode-compliant, learn how to opt-in\n---\n\n# React Strict Mode\n\n> **Suggested**: We strongly suggest you enable Strict Mode in your Next.js application to better prepare your application for the future of React.\n\nReact's [Strict Mode](https://react.dev/reference/react/StrictMode) is a development mode only feature for highlighting potential problems in an application. It helps to identify unsafe lifecycles, legacy API usage, and a number of other features.\n\nThe Next.js runtime is Strict Mode-compliant. To opt-in to Strict Mode, configure the following option in your `next.config.js`:\n\n```js\n// next.config.js\nmodule.exports = {\n  reactStrictMode: true,\n}\n```\n\nIf you or your team are not ready to use Strict Mode in your entire application, that's OK! You can incrementally migrate on a page-by-page basis using `<React.StrictMode>`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/react-strict-mode.md","loc":{"lines":{"from":1,"to":20}}}}],["663",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/react-strict-mode.md","loc":{"lines":{"from":22,"to":29}}}}],["664",{"pageContent":"---\ndescription: Add redirects to your Next.js app.\n---\n\n# Redirects\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/redirects\">Redirects</a></li>\n  </ul>\n</details>\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes          |\n| --------- | ---------------- |\n| `v10.2.0` | `has` added.     |\n| `v9.5.0`  | Redirects added. |\n\n</details>\n\nRedirects allow you to redirect an incoming request path to a different destination path.\n\nTo use Redirects you can use the `redirects` key in `next.config.js`:\n\n```js\nmodule.exports = {\n  async redirects() {\n    return [\n      {\n        source: '/about',\n        destination: '/',\n        permanent: true,\n      },\n    ]\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":1,"to":39}}}}],["665",{"pageContent":"`redirects` is an async function that expects an array to be returned holding objects with `source`, `destination`, and `permanent` properties:\n\n- `source` is the incoming request path pattern.\n- `destination` is the path you want to route to.\n- `permanent` `true` or `false` - if `true` will use the 308 status code which instructs clients/search engines to cache the redirect forever, if `false` will use the 307 status code which is temporary and is not cached.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":42,"to":46}}}}],["666",{"pageContent":"> **Why does Next.js use 307 and 308?** Traditionally a 302 was used for a temporary redirect, and a 301 for a permanent redirect, but many browsers changed the request method of the redirect to `GET`, regardless of the original method. For example, if the browser made a request to `POST /v1/users` which returned status code `302` with location `/v2/users`, the subsequent request might be `GET /v2/users` instead of the expected `POST /v2/users`. Next.js uses the 307 temporary redirect, and 308 permanent redirect status codes to explicitly preserve the request method used.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":48,"to":48}}}}],["667",{"pageContent":"- `basePath`: `false` or `undefined` - if false the `basePath` won't be included when matching, can be used for external redirects only.\n- `locale`: `false` or `undefined` - whether the locale should not be included when matching.\n- `has` is an array of [has objects](#header-cookie-and-query-matching) with the `type`, `key` and `value` properties.\n- `missing` is an array of [missing objects](#header-cookie-and-query-matching) with the `type`, `key` and `value` properties.\n\nRedirects are checked before the filesystem which includes pages and `/public` files.\n\nRedirects are not applied to client-side routing (`Link`, `router.push`), unless [Middleware](/docs/advanced-features/middleware) is present and matches the path.\n\nWhen a redirect is applied, any query values provided in the request will be passed through to the redirect destination. For example, see the following redirect configuration:\n\n```js\n{\n  source: '/old-blog/:path*',\n  destination: '/blog/:path*',\n  permanent: false\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":50,"to":66}}}}],["668",{"pageContent":"When `/old-blog/post-1?hello=world` is requested, the client will be redirected to `/blog/post-1?hello=world`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":69,"to":69}}}}],["669",{"pageContent":"Path Matching\n\nPath matches are allowed, for example `/old-blog/:slug` will match `/old-blog/hello-world` (no nested paths):\n\n```js\nmodule.exports = {\n  async redirects() {\n    return [\n      {\n        source: '/old-blog/:slug',\n        destination: '/news/:slug', // Matched parameters can be used in the destination\n        permanent: true,\n      },\n    ]\n  },\n}\n```\n\n### Wildcard Path Matching\n\nTo match a wildcard path you can use `*` after a parameter, for example `/blog/:slug*` will match `/blog/a/b/c/d/hello-world`:\n\n```js\nmodule.exports = {\n  async redirects() {\n    return [\n      {\n        source: '/blog/:slug*',\n        destination: '/news/:slug*', // Matched parameters can be used in the destination\n        permanent: true,\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":71,"to":105}}}}],["670",{"pageContent":"Regex Path Matching\n\nTo match a regex path you can wrap the regex in parentheses after a parameter, for example `/post/:slug(\\\\d{1,})` will match `/post/123` but not `/post/abc`:\n\n```js\nmodule.exports = {\n  async redirects() {\n    return [\n      {\n        source: '/post/:slug(\\\\d{1,})',\n        destination: '/news/:slug', // Matched parameters can be used in the destination\n        permanent: false,\n      },\n    ]\n  },\n}\n```\n\nThe following characters `(`, `)`, `{`, `}`, `:`, `*`, `+`, `?` are used for regex path matching, so when used in the `source` as non-special values they must be escaped by adding `\\\\` before them:\n\n```js\nmodule.exports = {\n  async redirects() {\n    return [\n      {\n        // this will match `/english(default)/something` being requested\n        source: '/english\\\\(default\\\\)/:slug',\n        destination: '/en-us/:slug',\n        permanent: false,\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":107,"to":140}}}}],["671",{"pageContent":"Header, Cookie, and Query Matching\n\nTo only match a redirect when header, cookie, or query values also match the `has` field or don't match the `missing` field can be used. Both the `source` and all `has` items must match and all `missing` items must not match for the redirect to be applied.\n\n`has` and `missing` items can have the following fields:\n\n- `type`: `String` - must be either `header`, `cookie`, `host`, or `query`.\n- `key`: `String` - the key from the selected type to match against.\n- `value`: `String` or `undefined` - the value to check for, if undefined any value will match. A regex like string can be used to capture a specific part of the value, e.g. if the value `first-(?<paramName>.*)` is used for `first-second` then `second` will be usable in the destination with `:paramName`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":142,"to":150}}}}],["672",{"pageContent":"```js\nmodule.exports = {\n  async redirects() {\n    return [\n      // if the header `x-redirect-me` is present,\n      // this redirect will be applied\n      {\n        source: '/:path((?!another-page$).*)',\n        has: [\n          {\n            type: 'header',\n            key: 'x-redirect-me',\n          },\n        ],\n        permanent: false,\n        destination: '/another-page',\n      },\n      // if the header `x-dont-redirect` is present,\n      // this redirect will NOT be applied\n      {\n        source: '/:path((?!another-page$).*)',\n        missing: [\n          {\n            type: 'header',\n            key: 'x-do-not-redirect',\n          },\n        ],\n        permanent: false,\n        destination: '/another-page',\n      },\n      // if the source, query, and cookie are matched,\n      // this redirect will be applied\n      {\n        source: '/specific/:path*',\n        has: [\n          {\n            type: 'query',\n            key: 'page',\n            // the page value will not be available in the","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":152,"to":190}}}}],["673",{"pageContent":"{\n        source: '/specific/:path*',\n        has: [\n          {\n            type: 'query',\n            key: 'page',\n            // the page value will not be available in the\n            // destination since value is provided and doesn't\n            // use a named capture group e.g. (?<page>home)\n            value: 'home',\n          },\n          {\n            type: 'cookie',\n            key: 'authorized',\n            value: 'true',\n          },\n        ],\n        permanent: false,\n        destination: '/another/:path*',\n      },\n      // if the header `x-authorized` is present and\n      // contains a matching value, this redirect will be applied\n      {\n        source: '/',\n        has: [\n          {\n            type: 'header',\n            key: 'x-authorized',\n            value: '(?<authorized>yes|true)',\n          },\n        ],\n        permanent: false,\n        destination: '/home?authorized=:authorized',\n      },\n      // if the host is `example.com`,\n      // this redirect will be applied\n      {","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":190,"to":226}}}}],["674",{"pageContent":"},\n        ],\n        permanent: false,\n        destination: '/home?authorized=:authorized',\n      },\n      // if the host is `example.com`,\n      // this redirect will be applied\n      {\n        source: '/:path((?!another-page$).*)',\n        has: [\n          {\n            type: 'host',\n            value: 'example.com',\n          },\n        ],\n        permanent: false,\n        destination: '/another-page',\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":226,"to":247}}}}],["675",{"pageContent":"Redirects with basePath support\n\nWhen leveraging [`basePath` support](/docs/api-reference/next.config.js/basepath.md) with redirects each `source` and `destination` is automatically prefixed with the `basePath` unless you add `basePath: false` to the redirect:\n\n```js\nmodule.exports = {\n  basePath: '/docs',\n\n  async redirects() {\n    return [\n      {\n        source: '/with-basePath', // automatically becomes /docs/with-basePath\n        destination: '/another', // automatically becomes /docs/another\n        permanent: false,\n      },\n      {\n        // does not add /docs since basePath: false is set\n        source: '/without-basePath',\n        destination: 'https://example.com',\n        basePath: false,\n        permanent: false,\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":249,"to":274}}}}],["676",{"pageContent":"Redirects with i18n support\n\nWhen leveraging [`i18n` support](/docs/advanced-features/i18n-routing.md) with redirects each `source` and `destination` is automatically prefixed to handle the configured `locales` unless you add `locale: false` to the redirect. If `locale: false` is used you must prefix the `source` and `destination` with a locale for it to be matched correctly.\n\n```js\nmodule.exports = {\n  i18n: {\n    locales: ['en', 'fr', 'de'],\n    defaultLocale: 'en',\n  },","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":276,"to":285}}}}],["677",{"pageContent":"async redirects() {\n    return [\n      {\n        source: '/with-locale', // automatically handles all locales\n        destination: '/another', // automatically passes the locale on\n        permanent: false,\n      },\n      {\n        // does not handle locales automatically since locale: false is set\n        source: '/nl/with-locale-manual',\n        destination: '/nl/another',\n        locale: false,\n        permanent: false,\n      },\n      {\n        // this matches '/' since `en` is the defaultLocale\n        source: '/en',\n        destination: '/en/another',\n        locale: false,\n        permanent: false,\n      },\n      // it's possible to match all locales even when locale: false is set\n      {\n        source: '/:locale/page',\n        destination: '/en/newpage',\n        permanent: false,\n        locale: false,\n      }\n      {\n        // this gets converted to /(en|fr|de)/(.*) so will not match the top-level\n        // `/` or `/fr` routes like /:path* would\n        source: '/(.*)',\n        destination: '/another',","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":287,"to":319}}}}],["678",{"pageContent":"{\n        // this gets converted to /(en|fr|de)/(.*) so will not match the top-level\n        // `/` or `/fr` routes like /:path* would\n        source: '/(.*)',\n        destination: '/another',\n        permanent: false,\n      },\n    ]\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":319,"to":328}}}}],["679",{"pageContent":"In some rare cases, you might need to assign a custom status code for older HTTP Clients to properly redirect. In these cases, you can use the `statusCode` property instead of the `permanent` property, but not both. Note: to ensure IE11 compatibility a `Refresh` header is automatically added for the 308 status code.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":331,"to":331}}}}],["680",{"pageContent":"Other Redirects\n\n- Inside [API Routes](/docs/api-routes/response-helpers.md), you can use `res.redirect()`.\n- Inside [`getStaticProps`](/docs/api-reference/data-fetching/get-static-props.md) and [`getServerSideProps`](/docs/api-reference/data-fetching/get-server-side-props.md), you can redirect specific pages at request-time.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/redirects.md","loc":{"lines":{"from":333,"to":336}}}}],["681",{"pageContent":"---\ndescription: Add rewrites to your Next.js app.\n---\n\n# Rewrites\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/rewrites\">Rewrites</a></li>\n  </ul>\n</details>\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes          |\n| --------- | ---------------- |\n| `v13.3.0` | `missing` added. |\n| `v10.2.0` | `has` added.     |\n| `v9.5.0`  | Rewrites added.  |\n\n</details>\n\nRewrites allow you to map an incoming request path to a different destination path.\n\nRewrites act as a URL proxy and mask the destination path, making it appear the user hasn't changed their location on the site. In contrast, [redirects](/docs/api-reference/next.config.js/redirects.md) will reroute to a new page and show the URL changes.\n\nTo use rewrites you can use the `rewrites` key in `next.config.js`:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":1,"to":29}}}}],["682",{"pageContent":"To use rewrites you can use the `rewrites` key in `next.config.js`:\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/about',\n        destination: '/',\n      },\n    ]\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":29,"to":41}}}}],["683",{"pageContent":"Rewrites are applied to client-side routing, a `<Link href=\"/about\">` will have the rewrite applied in the above example.\n\n`rewrites` is an async function that expects to return either an array or an object of arrays (see below) holding objects with `source` and `destination` properties:\n\n- `source`: `String` - is the incoming request path pattern.\n- `destination`: `String` is the path you want to route to.\n- `basePath`: `false` or `undefined` - if false the basePath won't be included when matching, can be used for external rewrites only.\n- `locale`: `false` or `undefined` - whether the locale should not be included when matching.\n- `has` is an array of [has objects](#header-cookie-and-query-matching) with the `type`, `key` and `value` properties.\n- `missing` is an array of [missing objects](#header-cookie-and-query-matching) with the `type`, `key` and `value` properties.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":44,"to":53}}}}],["684",{"pageContent":"When the `rewrites` function returns an array, rewrites are applied after checking the filesystem (pages and `/public` files) and before dynamic routes. When the `rewrites` function returns an object of arrays with a specific shape, this behavior can be changed and more finely controlled, as of `v10.1` of Next.js:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":55,"to":55}}}}],["685",{"pageContent":"```js\nmodule.exports = {\n  async rewrites() {\n    return {\n      beforeFiles: [\n        // These rewrites are checked after headers/redirects\n        // and before all files including _next/public files which\n        // allows overriding page files\n        {\n          source: '/some-page',\n          destination: '/somewhere-else',\n          has: [{ type: 'query', key: 'overrideMe' }],\n        },\n      ],\n      afterFiles: [\n        // These rewrites are checked after pages/public files\n        // are checked but before dynamic routes\n        {\n          source: '/non-existent',\n          destination: '/somewhere-else',\n        },\n      ],\n      fallback: [\n        // These rewrites are checked after both pages/public files\n        // and dynamic routes are checked\n        {\n          source: '/:path*',\n          destination: `https://my-old-site.com/:path*`,\n        },\n      ],\n    }\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":57,"to":89}}}}],["686",{"pageContent":"Note: rewrites in `beforeFiles` do not check the filesystem/dynamic routes immediately after matching a source, they continue until all `beforeFiles` have been checked.\n\nThe order Next.js routes are checked is:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":92,"to":94}}}}],["687",{"pageContent":"The order Next.js routes are checked is:\n\n1. [headers](/docs/api-reference/next.config.js/headers) are checked/applied\n2. [redirects](/docs/api-reference/next.config.js/redirects) are checked/applied\n3. `beforeFiles` rewrites are checked/applied\n4. static files from the [public directory](/docs/basic-features/static-file-serving), `_next/static` files, and non-dynamic pages are checked/served\n5. `afterFiles` rewrites are checked/applied, if one of these rewrites is matched we check dynamic routes/static files after each match\n6. `fallback` rewrites are checked/applied, these are applied before rendering the 404 page and after dynamic routes/all static assets have been checked. If you use [fallback: true/'blocking'](/docs/api-reference/data-fetching/get-static-paths#fallback-true) in `getStaticPaths`, the fallback `rewrites` defined in your `next.config.js` will _not_ be run.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":94,"to":101}}}}],["688",{"pageContent":"Rewrite parameters\n\nWhen using parameters in a rewrite the parameters will be passed in the query by default when none of the parameters are used in the `destination`.\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/old-about/:path*',\n        destination: '/about', // The :path parameter isn't used here so will be automatically passed in the query\n      },\n    ]\n  },\n}\n```\n\nIf a parameter is used in the destination none of the parameters will be automatically passed in the query.\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/docs/:path*',\n        destination: '/:path*', // The :path parameter is used here so will not be automatically passed in the query\n      },\n    ]\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":103,"to":132}}}}],["689",{"pageContent":"You can still pass the parameters manually in the query if one is already used in the destination by specifying the query in the `destination`.\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/:first/:second',\n        destination: '/:first?second=:second',\n        // Since the :first parameter is used in the destination the :second parameter\n        // will not automatically be added in the query although we can manually add it\n        // as shown above\n      },\n    ]\n  },\n}\n```\n\nNote: for static pages from the [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md) or [prerendering](/docs/basic-features/data-fetching/get-static-props.md) params from rewrites will be parsed on the client after hydration and provided in the query.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":135,"to":153}}}}],["690",{"pageContent":"Path Matching\n\nPath matches are allowed, for example `/blog/:slug` will match `/blog/hello-world` (no nested paths):\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/blog/:slug',\n        destination: '/news/:slug', // Matched parameters can be used in the destination\n      },\n    ]\n  },\n}\n```\n\n### Wildcard Path Matching\n\nTo match a wildcard path you can use `*` after a parameter, for example `/blog/:slug*` will match `/blog/a/b/c/d/hello-world`:\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/blog/:slug*',\n        destination: '/news/:slug*', // Matched parameters can be used in the destination\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":155,"to":187}}}}],["691",{"pageContent":"Regex Path Matching\n\nTo match a regex path you can wrap the regex in parenthesis after a parameter, for example `/blog/:slug(\\\\d{1,})` will match `/blog/123` but not `/blog/abc`:\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/old-blog/:post(\\\\d{1,})',\n        destination: '/blog/:post', // Matched parameters can be used in the destination\n      },\n    ]\n  },\n}\n```\n\nThe following characters `(`, `)`, `{`, `}`, `:`, `*`, `+`, `?` are used for regex path matching, so when used in the `source` as non-special values they must be escaped by adding `\\\\` before them:\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        // this will match `/english(default)/something` being requested\n        source: '/english\\\\(default\\\\)/:slug',\n        destination: '/en-us/:slug',\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":189,"to":220}}}}],["692",{"pageContent":"Header, Cookie, and Query Matching\n\nTo only match a rewrite when header, cookie, or query values also match the `has` field or don't match the `missing` field can be used. Both the `source` and all `has` items must match and all `missing` items must not match for the rewrite to be applied.\n\n`has` and `missing` items can have the following fields:\n\n- `type`: `String` - must be either `header`, `cookie`, `host`, or `query`.\n- `key`: `String` - the key from the selected type to match against.\n- `value`: `String` or `undefined` - the value to check for, if undefined any value will match. A regex like string can be used to capture a specific part of the value, e.g. if the value `first-(?<paramName>.*)` is used for `first-second` then `second` will be usable in the destination with `:paramName`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":222,"to":230}}}}],["693",{"pageContent":"```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      // if the header `x-rewrite-me` is present,\n      // this rewrite will be applied\n      {\n        source: '/:path*',\n        has: [\n          {\n            type: 'header',\n            key: 'x-rewrite-me',\n          },\n        ],\n        destination: '/another-page',\n      },\n      // if the header `x-rewrite-me` is not present,\n      // this rewrite will be applied\n      {\n        source: '/:path*',\n        missing: [\n          {\n            type: 'header',\n            key: 'x-rewrite-me',\n          },\n        ],\n        destination: '/another-page',\n      },\n      // if the source, query, and cookie are matched,\n      // this rewrite will be applied\n      {\n        source: '/specific/:path*',\n        has: [\n          {\n            type: 'query',\n            key: 'page',\n            // the page value will not be available in the\n            // destination since value is provided and doesn't\n            // use a named capture group e.g. (?<page>home)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":232,"to":270}}}}],["694",{"pageContent":"// the page value will not be available in the\n            // destination since value is provided and doesn't\n            // use a named capture group e.g. (?<page>home)\n            value: 'home',\n          },\n          {\n            type: 'cookie',\n            key: 'authorized',\n            value: 'true',\n          },\n        ],\n        destination: '/:path*/home',\n      },\n      // if the header `x-authorized` is present and\n      // contains a matching value, this rewrite will be applied\n      {\n        source: '/:path*',\n        has: [\n          {\n            type: 'header',\n            key: 'x-authorized',\n            value: '(?<authorized>yes|true)',\n          },\n        ],\n        destination: '/home?authorized=:authorized',\n      },\n      // if the host is `example.com`,\n      // this rewrite will be applied\n      {\n        source: '/:path*',\n        has: [\n          {\n            type: 'host',\n            value: 'example.com',\n          },\n        ],\n        destination: '/another-page',\n      },","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":270,"to":307}}}}],["695",{"pageContent":"{\n        source: '/:path*',\n        has: [\n          {\n            type: 'host',\n            value: 'example.com',\n          },\n        ],\n        destination: '/another-page',\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":307,"to":320}}}}],["696",{"pageContent":"Rewriting to an external URL\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/custom-routes-proxying\">Incremental adoption of Next.js</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\">Using Multiple Zones</a></li>\n  </ul>\n</details>\n\nRewrites allow you to rewrite to an external url. This is especially useful for incrementally adopting Next.js. The following is an example rewrite for redirecting the `/blog` route of your main app to an external site.\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/blog',\n        destination: 'https://example.com/blog',\n      },\n      {\n        source: '/blog/:slug',\n        destination: 'https://example.com/blog/:slug', // Matched parameters can be used in the destination\n      },\n    ]\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":322,"to":348}}}}],["697",{"pageContent":"If you're using `trailingSlash: true`, you also need to insert a trailing slash in the `source` parameter. If the destination server is also expecting a trailing slash it should be included in the `destination` parameter as well.\n\n```js\nmodule.exports = {\n  trailingSlash: true,\n  async rewrites() {\n    return [\n      {\n        source: '/blog/',\n        destination: 'https://example.com/blog/',\n      },\n      {\n        source: '/blog/:path*/',\n        destination: 'https://example.com/blog/:path*/',\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":351,"to":369}}}}],["698",{"pageContent":"Incremental adoption of Next.js\n\nYou can also have Next.js fall back to proxying to an existing website after checking all Next.js routes.\n\nThis way you don't have to change the rewrites configuration when migrating more pages to Next.js\n\n```js\nmodule.exports = {\n  async rewrites() {\n    return {\n      fallback: [\n        {\n          source: '/:path*',\n          destination: `https://custom-routes-proxying-endpoint.vercel.app/:path*`,\n        },\n      ],\n    }\n  },\n}\n```\n\nSee additional information on incremental adoption [in the docs here](/docs/migrating/incremental-adoption.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":371,"to":392}}}}],["699",{"pageContent":"Rewrites with basePath support\n\nWhen leveraging [`basePath` support](/docs/api-reference/next.config.js/basepath.md) with rewrites each `source` and `destination` is automatically prefixed with the `basePath` unless you add `basePath: false` to the rewrite:\n\n```js\nmodule.exports = {\n  basePath: '/docs',\n\n  async rewrites() {\n    return [\n      {\n        source: '/with-basePath', // automatically becomes /docs/with-basePath\n        destination: '/another', // automatically becomes /docs/another\n      },\n      {\n        // does not add /docs to /without-basePath since basePath: false is set\n        // Note: this can not be used for internal rewrites e.g. `destination: '/another'`\n        source: '/without-basePath',\n        destination: 'https://example.com',\n        basePath: false,\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":394,"to":418}}}}],["700",{"pageContent":"Rewrites with i18n support\n\nWhen leveraging [`i18n` support](/docs/advanced-features/i18n-routing.md) with rewrites each `source` and `destination` is automatically prefixed to handle the configured `locales` unless you add `locale: false` to the rewrite. If `locale: false` is used you must prefix the `source` and `destination` with a locale for it to be matched correctly.\n\n```js\nmodule.exports = {\n  i18n: {\n    locales: ['en', 'fr', 'de'],\n    defaultLocale: 'en',\n  },","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":420,"to":429}}}}],["701",{"pageContent":"async rewrites() {\n    return [\n      {\n        source: '/with-locale', // automatically handles all locales\n        destination: '/another', // automatically passes the locale on\n      },\n      {\n        // does not handle locales automatically since locale: false is set\n        source: '/nl/with-locale-manual',\n        destination: '/nl/another',\n        locale: false,\n      },\n      {\n        // this matches '/' since `en` is the defaultLocale\n        source: '/en',\n        destination: '/en/another',\n        locale: false,\n      },\n      {\n        // it's possible to match all locales even when locale: false is set\n        source: '/:locale/api-alias/:path*',\n        destination: '/api/:path*',\n        locale: false,\n      },\n      {\n        // this gets converted to /(en|fr|de)/(.*) so will not match the top-level\n        // `/` or `/fr` routes like /:path* would\n        source: '/(.*)',\n        destination: '/another',\n      },\n    ]\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/rewrites.md","loc":{"lines":{"from":431,"to":464}}}}],["702",{"pageContent":"---\ndescription: Add client and server runtime configuration to your Next.js app.\n---\n\n# Runtime Configuration\n\n> Note: This feature is considered legacy and does not work with [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md), [Output File Tracing](/docs/advanced-features/output-file-tracing.md#automatically-copying-traced-files), or [React Server Components](/docs/advanced-features/react-18/server-components.md). Please use [environment variables](/docs/basic-features/environment-variables.md) instead in order to avoid initialization overhead.\n\nTo add runtime configuration to your app, open `next.config.js` and add the `publicRuntimeConfig` and `serverRuntimeConfig` configs:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/runtime-configuration.md","loc":{"lines":{"from":1,"to":9}}}}],["703",{"pageContent":"To add runtime configuration to your app, open `next.config.js` and add the `publicRuntimeConfig` and `serverRuntimeConfig` configs:\n\n```js\nmodule.exports = {\n  serverRuntimeConfig: {\n    // Will only be available on the server side\n    mySecret: 'secret',\n    secondSecret: process.env.SECOND_SECRET, // Pass through env variables\n  },\n  publicRuntimeConfig: {\n    // Will be available on both server and client\n    staticFolder: '/static',\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/runtime-configuration.md","loc":{"lines":{"from":9,"to":22}}}}],["704",{"pageContent":"Place any server-only runtime config under `serverRuntimeConfig`.\n\nAnything accessible to both client and server-side code should be under `publicRuntimeConfig`.\n\n> A page that relies on `publicRuntimeConfig` **must** use `getInitialProps` or `getServerSideProps` or your application must have a [Custom App](/docs/advanced-features/custom-app.md) with `getInitialProps` to opt-out of [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md). Runtime configuration won't be available to any page (or component in a page) without being server-side rendered.\n\nTo get access to the runtime configs in your app use `next/config`, like so:\n\n```jsx\nimport getConfig from 'next/config'\nimport Image from 'next/image'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/runtime-configuration.md","loc":{"lines":{"from":25,"to":35}}}}],["705",{"pageContent":"To get access to the runtime configs in your app use `next/config`, like so:\n\n```jsx\nimport getConfig from 'next/config'\nimport Image from 'next/image'\n\n// Only holds serverRuntimeConfig and publicRuntimeConfig\nconst { serverRuntimeConfig, publicRuntimeConfig } = getConfig()\n// Will only be available on the server-side\nconsole.log(serverRuntimeConfig.mySecret)\n// Will be available on both server-side and client-side\nconsole.log(publicRuntimeConfig.staticFolder)\n\nfunction MyImage() {\n  return (\n    <div>\n      <Image\n        src={`${publicRuntimeConfig.staticFolder}/logo.png`}\n        alt=\"logo\"\n        layout=\"fill\"\n      />\n    </div>\n  )\n}\n\nexport default MyImage\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/runtime-configuration.md","loc":{"lines":{"from":35,"to":61}}}}],["706",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/environment-variables.md\">\n    <b>Environment Variables:</b>\n    <small>Access environment variables in your Next.js application at build time.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/runtime-configuration.md","loc":{"lines":{"from":63,"to":77}}}}],["707",{"pageContent":"---\ndescription: Set a custom build directory to use instead of the default .next directory.\n---\n\n# Setting a custom build directory\n\nYou can specify a name to use for a custom build directory to use instead of `.next`.\n\nOpen `next.config.js` and add the `distDir` config:\n\n```js\nmodule.exports = {\n  distDir: 'build',\n}\n```\n\nNow if you run `next build` Next.js will use `build` instead of the default `.next` folder.\n\n> `distDir` **should not** leave your project directory. For example, `../build` is an **invalid** directory.\n\n## Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/setting-a-custom-build-directory.md","loc":{"lines":{"from":1,"to":28}}}}],["708",{"pageContent":"---\ndescription: Optimized pages include an indicator to let you know if it's being statically optimized. You can opt-out of it here.\n---\n\n# Static Optimization Indicator\n\n> **Note:** This indicator was removed in Next.js version 10.0.1. We recommend upgrading to the latest version of Next.js.\n\nWhen a page qualifies for [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md) we show an indicator to let you know.\n\nThis is helpful since automatic static optimization can be very beneficial and knowing immediately in development if the page qualifies can be useful.\n\nIn some cases this indicator might not be useful, like when working on electron applications. To remove it open `next.config.js` and disable the `autoPrerender` config in `devIndicators`:\n\n```js\nmodule.exports = {\n  devIndicators: {\n    autoPrerender: false,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/static-optimization-indicator.md","loc":{"lines":{"from":1,"to":21}}}}],["709",{"pageContent":"---\ndescription: Configure Next.js pages to resolve with or without a trailing slash.\n---\n\n# Trailing Slash\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version  | Changes               |\n| -------- | --------------------- |\n| `v9.5.0` | Trailing Slash added. |\n\n</details>\n\nBy default Next.js will redirect urls with trailing slashes to their counterpart without a trailing slash. For example `/about/` will redirect to `/about`. You can configure this behavior to act the opposite way, where urls without trailing slashes are redirected to their counterparts with trailing slashes.\n\nOpen `next.config.js` and add the `trailingSlash` config:\n\n```js\nmodule.exports = {\n  trailingSlash: true,\n}\n```\n\nWith this option set, urls like `/about` will redirect to `/about/`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/trailing-slash.md","loc":{"lines":{"from":1,"to":26}}}}],["710",{"pageContent":"Related\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next.config.js/introduction.md\">\n    <b>Introduction to next.config.js:</b>\n    <small>Learn more about the configuration file used by Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/trailing-slash.md","loc":{"lines":{"from":28,"to":35}}}}],["711",{"pageContent":"---\ndescription: Configure Next.js with Turbopack-specific options\n---\n\n# Turbopack-specific options (experimental)\n\n> **Warning**: These features are experimental and will only work with `next --turbo`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/turbopack.md","loc":{"lines":{"from":1,"to":7}}}}],["712",{"pageContent":"webpack loaders\n\nCurrently, Turbopack supports a subset of webpack's loader API, allowing you to use some webpack loaders to transform code in Turbopack.\n\nTo configure loaders, add the names of the loaders you've installed and any options in `next.config.js`, mapping file extensions to a list of loaders:\n\n```js\nmodule.exports = {\n  experimental: {\n    turbo: {\n      loaders: {\n        // Option format\n        '.md': [\n          {\n            loader: '@mdx-js/loader',\n            options: {\n              format: 'md',\n            },\n          },\n        ],\n        // Option-less format\n        '.mdx': ['@mdx-js/loader'],\n      },\n    },\n  },\n}\n```\n\nThen, given the above configuration, you can use transformed code from your app:\n\n```js\nimport MyDoc from './my-doc.mdx'\n\nexport default function Home() {\n  return <MyDoc />\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/turbopack.md","loc":{"lines":{"from":9,"to":45}}}}],["713",{"pageContent":"Resolve Alias\n\nThrough `next.config.js`, Turbopack can be configured to modify module resolution through aliases, similar to webpack's [`resolve.alias`](https://webpack.js.org/configuration/resolve/#resolvealias) configuration.\n\nTo configure resolve aliases, map imported patterns to their new destination in `next.config.js`:\n\n```js\nmodule.exports = {\n  experimental: {\n    turbo: {\n      resolveAlias: {\n        underscore: 'lodash',\n        mocha: { browser: 'mocha/browser-entry.js' },\n      },\n    },\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/turbopack.md","loc":{"lines":{"from":47,"to":63}}}}],["714",{"pageContent":"This aliases imports of the `underscore` package to the `lodash` package. In other words, `import underscore from 'underscore'` will load the `lodash` module instead of `underscore`.\n\nTurbopack also supports conditional aliasing through this field, similar to Node.js's [conditional exports](https://nodejs.org/docs/latest-v18.x/api/packages.html#conditional-exports). At the moment only the `browser` condition is supported. In the case above, imports of the `mocha` module will be aliased to `mocha/browser-entry.js` when Turbopack targets browser environments.\n\nFor more information and guidance for how to migrate your app to Turbopack from webpack, see [Turbopack's documentation on webpack compatibility](https://turbo.build/pack/docs/migrating-from-webpack).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/turbopack.md","loc":{"lines":{"from":66,"to":70}}}}],["715",{"pageContent":"---\ndescription: Configure Next.js to allow importing modules from external URLs (experimental).\n---\n\n# URL Imports\n\nURL imports are an experimental feature that allows you to import modules directly from external servers (instead of from the local disk).\n\n> **Warning**: This feature is experimental. Only use domains that you trust to download and execute on your machine. Please exercise\n> discretion, and caution until the feature is flagged as stable.\n\nTo opt-in, add the allowed URL prefixes inside `next.config.js`:\n\n```js\nmodule.exports = {\n  experimental: {\n    urlImports: ['https://example.com/assets/', 'https://cdn.skypack.dev'],\n  },\n}\n```\n\nThen, you can import modules directly from URLs:\n\n```js\nimport { a, b, c } from 'https://example.com/assets/some/module.js'\n```\n\nURL Imports can be used everywhere normal package imports can be used.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/url-imports.md","loc":{"lines":{"from":1,"to":28}}}}],["716",{"pageContent":"Security Model\n\nThis feature is being designed with **security as the top priority**. To start, we added an experimental flag forcing you to explicitly allow the domains you accept URL imports from. We're working to take this further by limiting URL imports to execute in the browser sandbox using the [Edge Runtime](/docs/api-reference/edge-runtime.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/url-imports.md","loc":{"lines":{"from":30,"to":32}}}}],["717",{"pageContent":"Lockfile\n\nWhen using URL imports, Next.js will create a `next.lock` directory containing a lockfile and fetched assets.\nThis directory **must be committed to Git**, not ignored by `.gitignore`.\n\n- When running `next dev`, Next.js will download and add all newly discovered URL Imports to your lockfile\n- When running `next build`, Next.js will use only the lockfile to build the application for production\n\nTypically, no network requests are needed and any outdated lockfile will cause the build to fail.\nOne exception is resources that respond with `Cache-Control: no-cache`.\nThese resources will have a `no-cache` entry in the lockfile and will always be fetched from the network on each build.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/url-imports.md","loc":{"lines":{"from":34,"to":44}}}}],["718",{"pageContent":"Examples\n\n### Skypack\n\n```js\nimport confetti from 'https://cdn.skypack.dev/canvas-confetti'\nimport { useEffect } from 'react'\n\nexport default () => {\n  useEffect(() => {\n    confetti()\n  })\n  return <p>Hello</p>\n}\n```\n\n### Static Image Imports\n\n```js\nimport Image from 'next/image'\nimport logo from 'https://example.com/assets/logo.png'\n\nexport default () => (\n  <div>\n    <Image src={logo} placeholder=\"blur\" />\n  </div>\n)\n```\n\n### URLs in CSS\n\n```css\n.className {\n  background: url('https://example.com/assets/hero.jpg');\n}\n```\n\n### Asset Imports\n\n```js\nconst logo = new URL('https://example.com/assets/file.txt', import.meta.url)\n\nconsole.log(logo.pathname)\n\n// prints \"/_next/static/media/file.a9727b5d.txt\"\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-reference/next.config.js/url-imports.md","loc":{"lines":{"from":46,"to":91}}}}],["719",{"pageContent":"---\ndescription: You can add the dynamic routes used for pages to API Routes too. Learn how it works here.\n---\n\n# Dynamic API Routes\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes\">Basic API Routes</a></li>\n  </ul>\n</details>\n\nAPI routes support [dynamic routes](/docs/routing/dynamic-routes.md), and follow the same file naming rules used for `pages`.\n\nFor example, the API route `pages/api/post/[pid].js` has the following code:\n\n```js\nexport default function handler(req, res) {\n  const { pid } = req.query\n  res.end(`Post: ${pid}`)\n}\n```\n\nNow, a request to `/api/post/abc` will respond with the text: `Post: abc`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/dynamic-api-routes.md","loc":{"lines":{"from":1,"to":25}}}}],["720",{"pageContent":"Index routes and Dynamic API routes\n\nA very common RESTful pattern is to set up routes like this:\n\n- `GET api/posts` - gets a list of posts, probably paginated\n- `GET api/posts/12345` - gets post id 12345\n\nWe can model this in two ways:\n\n- Option 1:\n  - `/api/posts.js`\n  - `/api/posts/[postId].js`\n- Option 2:\n  - `/api/posts/index.js`\n  - `/api/posts/[postId].js`\n\nBoth are equivalent. A third option of only using `/api/posts/[postId].js` is not valid because Dynamic Routes (including Catch-all routes - see below) do not have an `undefined` state and `GET api/posts` will not match `/api/posts/[postId].js` under any circumstances.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/dynamic-api-routes.md","loc":{"lines":{"from":27,"to":43}}}}],["721",{"pageContent":"Catch all API routes\n\nAPI Routes can be extended to catch all paths by adding three dots (`...`) inside the brackets. For example:\n\n- `pages/api/post/[...slug].js` matches `/api/post/a`, but also `/api/post/a/b`, `/api/post/a/b/c` and so on.\n\n> **Note**: You can use names other than `slug`, such as: `[...param]`\n\nMatched parameters will be sent as a query parameter (`slug` in the example) to the page, and it will always be an array, so, the path `/api/post/a` will have the following `query` object:\n\n```json\n{ \"slug\": [\"a\"] }\n```\n\nAnd in the case of `/api/post/a/b`, and any other matching path, new parameters will be added to the array, like so:\n\n```json\n{ \"slug\": [\"a\", \"b\"] }\n```\n\nAn API route for `pages/api/post/[...slug].js` could look like this:\n\n```js\nexport default function handler(req, res) {\n  const { slug } = req.query\n  res.end(`Post: ${slug.join(', ')}`)\n}\n```\n\nNow, a request to `/api/post/a/b/c` will respond with the text: `Post: a, b, c`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/dynamic-api-routes.md","loc":{"lines":{"from":45,"to":74}}}}],["722",{"pageContent":"Optional catch all API routes\n\nCatch all routes can be made optional by including the parameter in double brackets (`[[...slug]]`).\n\nFor example, `pages/api/post/[[...slug]].js` will match `/api/post`, `/api/post/a`, `/api/post/a/b`, and so on.\n\nThe main difference between catch all and optional catch all routes is that with optional, the route without the parameter is also matched (`/api/post` in the example above).\n\nThe `query` objects are as follows:\n\n```json\n{ } // GET `/api/post` (empty object)\n{ \"slug\": [\"a\"] } // `GET /api/post/a` (single-element array)\n{ \"slug\": [\"a\", \"b\"] } // `GET /api/post/a/b` (multi-element array)\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/dynamic-api-routes.md","loc":{"lines":{"from":76,"to":90}}}}],["723",{"pageContent":"Caveats\n\n- Predefined API routes take precedence over dynamic API routes, and dynamic API routes over catch all API routes. Take a look at the following examples:\n  - `pages/api/post/create.js` - Will match `/api/post/create`\n  - `pages/api/post/[pid].js` - Will match `/api/post/1`, `/api/post/abc`, etc. But not `/api/post/create`\n  - `pages/api/post/[...slug].js` - Will match `/api/post/1/2`, `/api/post/a/b/c`, etc. But not `/api/post/create`, `/api/post/abc`\n\n## Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/routing/dynamic-routes.md\">\n    <b>Dynamic Routes:</b>\n    <small>Learn more about the built-in dynamic routes.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/dynamic-api-routes.md","loc":{"lines":{"from":92,"to":108}}}}],["724",{"pageContent":"---\ndescription: Edge API Routes enable you to build high performance APIs directly inside your Next.js application.\n---\n\n# Edge API Routes\n\nEdge API Routes enable you to build high performance APIs with Next.js. Using the [Edge Runtime](/docs/api-reference/edge-runtime.md), they are often faster than Node.js-based API Routes. This performance improvement does come with [constraints](/docs/api-reference/edge-runtime.md#unsupported-apis), like not having access to native Node.js APIs. Instead, Edge API Routes are built on standard Web APIs.\n\nAny file inside the folder `pages/api` is mapped to `/api/*` and will be treated as an API endpoint instead of a page. They are server-side only bundles and won't increase your client-side bundle size.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/edge-api-routes.md","loc":{"lines":{"from":1,"to":9}}}}],["725",{"pageContent":"Examples\n\n### Basic\n\n```typescript\nexport const config = {\n  runtime: 'edge',\n}\n\nexport default (req) => new Response('Hello world!')\n```\n\n### JSON Response\n\n```typescript\nimport type { NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  return new Response(\n    JSON.stringify({\n      name: 'Jim Halpert',\n    }),\n    {\n      status: 200,\n      headers: {\n        'content-type': 'application/json',\n      },\n    }\n  )\n}\n```\n\n### Cache-Control\n\n```typescript\nimport type { NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  return new Response(\n    JSON.stringify({\n      name: 'Jim Halpert',\n    }),\n    {\n      status: 200,\n      headers: {\n        'content-type': 'application/json',\n        'cache-control': 'public, s-maxage=1200, stale-while-revalidate=600',\n      },\n    }\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/edge-api-routes.md","loc":{"lines":{"from":11,"to":70}}}}],["726",{"pageContent":"Query Parameters\n\n```typescript\nimport type { NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  const { searchParams } = new URL(req.url)\n  const email = searchParams.get('email')\n  return new Response(email)\n}\n```\n\n### Forwarding Headers\n\n```typescript\nimport { type NextRequest } from 'next/server'\n\nexport const config = {\n  runtime: 'edge',\n}\n\nexport default async function handler(req: NextRequest) {\n  const authorization = req.cookies.get('authorization')?.value\n  return fetch('https://backend-api.com/api/protected', {\n    method: req.method,\n    headers: {\n      authorization,\n    },\n    redirect: 'manual',\n  })\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/edge-api-routes.md","loc":{"lines":{"from":72,"to":107}}}}],["727",{"pageContent":"Configuring Regions (for deploying)\n\nYou may want to restrict your edge function to specific regions when deploying so that you can colocate near your data sources ensuring lower response times which can be achieved as shown.\n\nNote: this config is available in `v12.3.2` of Next.js and up.\n\n```js\nimport { NextResponse } from 'next/server'\n\nexport const config = {\n  regions: ['sfo1', 'iad1'], // defaults to 'all'\n}\n\nexport default async function handler(req: NextRequest) {\n  const myData = await getNearbyData()\n  return NextResponse.json(myData)\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/edge-api-routes.md","loc":{"lines":{"from":109,"to":126}}}}],["728",{"pageContent":"Differences between API Routes\n\nEdge API Routes use the [Edge Runtime](/docs/api-reference/edge-runtime.md), whereas API Routes use the [Node.js runtime](/docs/advanced-features/react-18/switchable-runtime.md).\n\nEdge API Routes can [stream responses](/docs/api-reference/edge-runtime.md#web-stream-apis) from the server and run _after_ cached files (e.g. HTML, CSS, JavaScript) have been accessed. Server-side streaming can help improve performance with faster [Time To First Byte (TTFB)](https://web.dev/ttfb/).\n\n> Note: Using [Edge Runtime](/docs/api-reference/edge-runtime.md) with `getServerSideProps` does not give you access to the response object. If you need access to `res`, you should use the [Node.js runtime](/docs/advanced-features/react-18/switchable-runtime.md) by setting `runtime: 'nodejs'`.\n\nView the [supported APIs](/docs/api-reference/edge-runtime.md) and [unsupported APIs](/docs/api-reference/edge-runtime.md#unsupported-apis) for the Edge Runtime.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/edge-api-routes.md","loc":{"lines":{"from":128,"to":136}}}}],["729",{"pageContent":"---\ndescription: Next.js supports API Routes, which allow you to build your API without leaving your Next.js app. Learn how it works here.\n---\n\n# API Routes\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes\">Basic API Routes</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes-graphql\">API Routes with GraphQL</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes-rest\">API Routes with REST</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes-cors\">API Routes with CORS</a></li>\n  </ul>\n</details>\n\nAPI routes provide a solution to build your **API** with Next.js.\n\nAny file inside the folder `pages/api` is mapped to `/api/*` and will be treated as an API endpoint instead of a `page`. They are server-side only bundles and won't increase your client-side bundle size.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/introduction.md","loc":{"lines":{"from":1,"to":19}}}}],["730",{"pageContent":"For example, the following API route `pages/api/user.js` returns a `json` response with a status code of `200`:\n\n```js\nexport default function handler(req, res) {\n  res.status(200).json({ name: 'John Doe' })\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/introduction.md","loc":{"lines":{"from":21,"to":26}}}}],["731",{"pageContent":"> **Note**: API Routes will be affected by [`pageExtensions` configuration](/docs/api-reference/next.config.js/custom-page-extensions.md) in `next.config.js`.\n\nFor an API route to work, you need to export a function as default (a.k.a **request handler**), which then receives the following parameters:\n\n- `req`: An instance of [http.IncomingMessage](https://nodejs.org/api/http.html#class-httpincomingmessage), plus some [pre-built middlewares](/docs/api-routes/request-helpers.md)\n- `res`: An instance of [http.ServerResponse](https://nodejs.org/api/http.html#class-httpserverresponse), plus some [helper functions](/docs/api-routes/response-helpers.md)\n\nTo handle different HTTP methods in an API route, you can use `req.method` in your request handler, like so:\n\n```js\nexport default function handler(req, res) {\n  if (req.method === 'POST') {\n    // Process a POST request\n  } else {\n    // Handle any other HTTP method\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/introduction.md","loc":{"lines":{"from":29,"to":45}}}}],["732",{"pageContent":"To fetch API endpoints, take a look into any of the examples at the start of this section.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/introduction.md","loc":{"lines":{"from":48,"to":48}}}}],["733",{"pageContent":"Use Cases\n\nFor new projects, you can build your entire API with API Routes. If you have an existing API, you do not need to forward calls to the API through an API Route. Some other use cases for API Routes are:\n\n- Masking the URL of an external service (e.g. `/api/secret` instead of `https://company.com/secret-url`)\n- Using [Environment Variables](/docs/basic-features/environment-variables.md) on the server to securely access external services.\n\n## Caveats\n\n- API Routes [do not specify CORS headers](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS), meaning they are **same-origin only** by default. You can customize such behavior by wrapping the request handler with the [CORS request helpers](https://github.com/vercel/next.js/tree/canary/examples/api-routes-cors).\n- API Routes can't be used with [`output: 'export'`](/docs/advanced-features/static-html-export.md)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/introduction.md","loc":{"lines":{"from":50,"to":60}}}}],["734",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/api-routes/request-helpers.md\">\n    <b>API Routes Request Helpers:</b>\n    <small>learn about the built-in helpers for the request.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-routes/response-helpers.md\">\n    <b>Response Helpers:</b>\n    <small>learn about the built-in methods for the response.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/typescript.md#api-routes\">\n    <b>TypeScript:</b>\n    <small>Add TypeScript to your API Routes.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/introduction.md","loc":{"lines":{"from":62,"to":85}}}}],["735",{"pageContent":"---\ndescription: API Routes provide built-in request helpers that parse the incoming request. Learn more about them here.\n---\n\n# API Routes Request Helpers\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes-middleware\">API Routes Request Helpers</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes-cors\">API Routes with CORS</a></li>\n  </ul>\n</details>\n\nAPI Routes provide built-in request helpers which parse the incoming request (`req`):\n\n- `req.cookies` - An object containing the cookies sent by the request. Defaults to `{}`\n- `req.query` - An object containing the [query string](https://en.wikipedia.org/wiki/Query_string). Defaults to `{}`\n- `req.body` - An object containing the body parsed by `content-type`, or `null` if no body was sent","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/request-helpers.md","loc":{"lines":{"from":1,"to":19}}}}],["736",{"pageContent":"Custom config\n\nEvery API Route can export a `config` object to change the default configuration, which is the following:\n\n```js\nexport const config = {\n  api: {\n    bodyParser: {\n      sizeLimit: '1mb',\n    },\n  },\n}\n```\n\nThe `api` object includes all config options available for API Routes.\n\n`bodyParser` is automatically enabled. If you want to consume the body as a `Stream` or with [`raw-body`](https://www.npmjs.com/package/raw-body), you can set this to `false`.\n\nOne use case for disabling the automatic `bodyParsing` is to allow you to verify the raw body of a **webhook** request, for example [from GitHub](https://docs.github.com/en/developers/webhooks-and-events/webhooks/securing-your-webhooks#validating-payloads-from-github).\n\n```js\nexport const config = {\n  api: {\n    bodyParser: false,\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/request-helpers.md","loc":{"lines":{"from":21,"to":46}}}}],["737",{"pageContent":"`bodyParser.sizeLimit` is the maximum size allowed for the parsed body, in any format supported by [bytes](https://github.com/visionmedia/bytes.js), like so:\n\n```js\nexport const config = {\n  api: {\n    bodyParser: {\n      sizeLimit: '500kb',\n    },\n  },\n}\n```\n\n`externalResolver` is an explicit flag that tells the server that this route is being handled by an external resolver like _express_ or _connect_. Enabling this option disables warnings for unresolved requests.\n\n```js\nexport const config = {\n  api: {\n    externalResolver: true,\n  },\n}\n```\n\n`responseLimit` is automatically enabled, warning when an API Routes' response body is over 4MB.\n\nIf you are not using Next.js in a serverless environment, and understand the performance implications of not using a CDN or dedicated media host, you can set this limit to `false`.\n\n```js\nexport const config = {\n  api: {\n    responseLimit: false,\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/request-helpers.md","loc":{"lines":{"from":49,"to":80}}}}],["738",{"pageContent":"`responseLimit` can also take the number of bytes or any string format supported by `bytes`, for example `1000`, `'500kb'` or `'3mb'`.\nThis value will be the maximum response size before a warning is displayed. Default is 4MB. (see above)\n\n```js\nexport const config = {\n  api: {\n    responseLimit: '8mb',\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/request-helpers.md","loc":{"lines":{"from":83,"to":92}}}}],["739",{"pageContent":"Extending the `req`/`res` objects with TypeScript\n\nFor better type-safety, it is not recommended to extend the `req` and `res` objects. Instead, use functions to work with them:\n\n```ts\n// utils/cookies.ts\n\nimport { serialize, CookieSerializeOptions } from 'cookie'\nimport { NextApiResponse } from 'next'\n\n/**\n * This sets `cookie` using the `res` object\n */\n\nexport const setCookie = (\n  res: NextApiResponse,\n  name: string,\n  value: unknown,\n  options: CookieSerializeOptions = {}\n) => {\n  const stringValue =\n    typeof value === 'object' ? 'j:' + JSON.stringify(value) : String(value)\n\n  if (typeof options.maxAge === 'number') {\n    options.expires = new Date(Date.now() + options.maxAge * 1000)\n  }\n\n  res.setHeader('Set-Cookie', serialize(name, stringValue, options))\n}\n\n// pages/api/cookies.ts\n\nimport { NextApiRequest, NextApiResponse } from 'next'\nimport { setCookie } from '../../utils/cookies'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/request-helpers.md","loc":{"lines":{"from":94,"to":127}}}}],["740",{"pageContent":"res.setHeader('Set-Cookie', serialize(name, stringValue, options))\n}\n\n// pages/api/cookies.ts\n\nimport { NextApiRequest, NextApiResponse } from 'next'\nimport { setCookie } from '../../utils/cookies'\n\nconst handler = (req: NextApiRequest, res: NextApiResponse) => {\n  // Calling our pure function using the `res` object, it will add the `set-cookie` header\n  // Add the `set-cookie` header on the main domain and expire after 30 days\n  setCookie(res, 'Next.js', 'api-middleware!', { path: '/', maxAge: 2592000 })\n  // Return the `set-cookie` header so we can display it in the browser and show that it works!\n  res.end(res.getHeader('Set-Cookie'))\n}\n\nexport default handler","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/request-helpers.md","loc":{"lines":{"from":127,"to":143}}}}],["741",{"pageContent":"If you can't avoid these objects from being extended, you have to create your own type to include the extra properties:\n\n```ts\n// pages/api/foo.ts\n\nimport { NextApiRequest, NextApiResponse } from 'next'\nimport { withFoo } from 'external-lib-foo'\n\ntype NextApiRequestWithFoo = NextApiRequest & {\n  foo: (bar: string) => void\n}\n\nconst handler = (req: NextApiRequestWithFoo, res: NextApiResponse) => {\n  req.foo('bar') // we can now use `req.foo` without type errors\n  res.end('ok')\n}\n\nexport default withFoo(handler)\n```\n\nKeep in mind this is not safe since the code will still compile even if you remove `withFoo()` from the export.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/request-helpers.md","loc":{"lines":{"from":146,"to":166}}}}],["742",{"pageContent":"---\ndescription: API Routes include a set of Express.js-like methods for the response to help you creating new API endpoints. Learn how it works here.\n---\n\n# API Routes Response Helpers\n\nThe [Server Response object](https://nodejs.org/api/http.html#http_class_http_serverresponse), (often abbreviated as `res`) includes a set of Express.js-like helper methods to improve the developer experience and increase the speed of creating new API endpoints.\n\nThe included helpers are:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":1,"to":9}}}}],["743",{"pageContent":"The included helpers are:\n\n- `res.status(code)` - A function to set the status code. `code` must be a valid [HTTP status code](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)\n- `res.json(body)` - Sends a JSON response. `body` must be a [serializable object](https://developer.mozilla.org/en-US/docs/Glossary/Serialization)\n- `res.send(body)` - Sends the HTTP response. `body` can be a `string`, an `object` or a `Buffer`\n- `res.redirect([status,] path)` - Redirects to a specified path or URL. `status` must be a valid [HTTP status code](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes). If not specified, `status` defaults to \"307\" \"Temporary redirect\".\n- `res.revalidate(urlPath)` - [Revalidate a page on demand](/docs/basic-features/data-fetching/incremental-static-regeneration.md#on-demand-revalidation) using `getStaticProps`. `urlPath` must be a `string`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":9,"to":15}}}}],["744",{"pageContent":"Setting the status code of a response\n\nWhen sending a response back to the client, you can set the status code of the response.\n\nThe following example sets the status code of the response to `200` (`OK`) and returns a `message` property with the value of `Hello from Next.js!` as a JSON response:\n\n```js\nexport default function handler(req, res) {\n  res.status(200).json({ message: 'Hello from Next.js!' })\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":17,"to":27}}}}],["745",{"pageContent":"Sending a JSON response\n\nWhen sending a response back to the client you can send a JSON response, this must be a [serializable object](https://developer.mozilla.org/en-US/docs/Glossary/Serialization).\nIn a real world application you might want to let the client know the status of the request depending on the result of the requested endpoint.\n\nThe following example sends a JSON response with the status code `200` (`OK`) and the result of the async operation. It's contained in a try catch block to handle any errors that may occur, with the appropriate status code and error message caught and sent back to the client:\n\n```js\nexport default async function handler(req, res) {\n  try {\n    const result = await someAsyncOperation()\n    res.status(200).json({ result })\n  } catch (err) {\n    res.status(500).json({ error: 'failed to load data' })\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":29,"to":45}}}}],["746",{"pageContent":"Sending a HTTP response\n\nSending an HTTP response works the same way as when sending a JSON response. The only difference is that the response body can be a `string`, an `object` or a `Buffer`.\n\nThe following example sends a HTTP response with the status code `200` (`OK`) and the result of the async operation.\n\n```js\nexport default async function handler(req, res) {\n  try {\n    const result = await someAsyncOperation()\n    res.status(200).send({ result })\n  } catch (err) {\n    res.status(500).send({ error: 'failed to fetch data' })\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":47,"to":62}}}}],["747",{"pageContent":"Redirects to a specified path or URL\n\nTaking a form as an example, you may want to redirect your client to a specified path or URL once they have submitted the form.\n\nThe following example redirects the client to the `/` path if the form is successfully submitted:\n\n```js\nexport default async function handler(req, res) {\n  const { name, message } = req.body\n  try {\n    await handleFormInputAsync({ name, message })\n    res.redirect(307, '/')\n  } catch (err) {\n    res.status(500).send({ error: 'failed to fetch data' })\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":64,"to":80}}}}],["748",{"pageContent":"Adding TypeScript types\n\nYou can make your response handlers more type-safe by importing the `NextApiRequest` and `NextApiResponse` types from `next`, in addition to those, you can also type your response data:\n\n```ts\nimport type { NextApiRequest, NextApiResponse } from 'next'\n\ntype ResponseData = {\n  message: string\n}\n\nexport default function handler(\n  req: NextApiRequest,\n  res: NextApiResponse<ResponseData>\n) {\n  res.status(200).json({ message: 'Hello from Next.js!' })\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":82,"to":98}}}}],["749",{"pageContent":"> Note: The body of `NextApiRequest` is `any` because the client may include any payload. You should validate the type/shape of the body at runtime before using it.\n\nTo view more examples using types, check out the [TypeScript documentation](/docs/basic-features/typescript.md#api-routes).\n\nIf you prefer to view your examples within a real projects structure you can checkout our examples repository:\n\n- [Basic API Routes](https://github.com/vercel/next.js/tree/canary/examples/api-routes)\n- [API Routes with REST](https://github.com/vercel/next.js/tree/canary/examples/api-routes-rest)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/api-routes/response-helpers.md","loc":{"lines":{"from":101,"to":108}}}}],["750",{"pageContent":"---\ndescription: Learn about authentication patterns in Next.js apps and explore a few examples.\n---\n\n# Authentication\n\nAuthentication verifies who a user is, while authorization controls what a user can access. Next.js supports multiple authentication patterns, each designed for different use cases. This page will go through each case so that you can choose based on your constraints.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":1,"to":7}}}}],["751",{"pageContent":"Authentication Patterns\n\nThe first step to identifying which authentication pattern you need is understanding the [data-fetching strategy](/docs/basic-features/data-fetching/overview.md) you want. We can then determine which authentication providers support this strategy. There are two main patterns:\n\n- Use [static generation](/docs/basic-features/pages.md#static-generation-recommended) to server-render a loading state, followed by fetching user data client-side.\n- Fetch user data [server-side](/docs/basic-features/pages.md#server-side-rendering) to eliminate a flash of unauthenticated content.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":9,"to":14}}}}],["752",{"pageContent":"Authenticating Statically Generated Pages\n\nNext.js automatically determines that a page is static if there are no blocking data requirements. This means the absence of [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md) and `getInitialProps` in the page. Instead, your page can render a loading state from the server, followed by fetching the user client-side.\n\nOne advantage of this pattern is it allows pages to be served from a global CDN and preloaded using [`next/link`](/docs/api-reference/next/link.md). In practice, this results in a faster TTI ([Time to Interactive](https://web.dev/interactive/)).\n\nLet's look at an example for a profile page. This will initially render a loading skeleton. Once the request for a user has finished, it will show the user's name:\n\n```jsx\n// pages/profile.js\n\nimport useUser from '../lib/useUser'\nimport Layout from '../components/Layout'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":16,"to":28}}}}],["753",{"pageContent":"```jsx\n// pages/profile.js\n\nimport useUser from '../lib/useUser'\nimport Layout from '../components/Layout'\n\nconst Profile = () => {\n  // Fetch the user client-side\n  const { user } = useUser({ redirectTo: '/login' })\n\n  // Server-render loading state\n  if (!user || user.isLoggedIn === false) {\n    return <Layout>Loading...</Layout>\n  }\n\n  // Once the user request finishes, show the user\n  return (\n    <Layout>\n      <h1>Your Profile</h1>\n      <pre>{JSON.stringify(user, null, 2)}</pre>\n    </Layout>\n  )\n}\n\nexport default Profile","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":28,"to":52}}}}],["754",{"pageContent":"You can view this [example in action](https://iron-session-example.vercel.app/). Check out the [`with-iron-session`](https://github.com/vercel/next.js/tree/canary/examples/with-iron-session) example to see how it works.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":55,"to":55}}}}],["755",{"pageContent":"Authenticating Server-Rendered Pages\n\nIf you export an `async` function called [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md) from a page, Next.js will pre-render this page on each request using the data returned by `getServerSideProps`.\n\n```jsx\nexport async function getServerSideProps(context) {\n  return {\n    props: {}, // Will be passed to the page component as props\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":57,"to":66}}}}],["756",{"pageContent":"Let's transform the profile example to use [server-side rendering](/docs/basic-features/pages#server-side-rendering). If there's a session, return `user` as a prop to the `Profile` component in the page. Notice there is not a loading skeleton in [this example](https://iron-session-example.vercel.app/).\n\n```jsx\n// pages/profile.js\n\nimport withSession from '../lib/session'\nimport Layout from '../components/Layout'\n\nexport const getServerSideProps = withSession(async function ({ req, res }) {\n  const { user } = req.session\n\n  if (!user) {\n    return {\n      redirect: {\n        destination: '/login',\n        permanent: false,\n      },\n    }\n  }\n\n  return {\n    props: { user },\n  }\n})\n\nconst Profile = ({ user }) => {\n  // Show the user. No loading state is required\n  return (\n    <Layout>\n      <h1>Your Profile</h1>\n      <pre>{JSON.stringify(user, null, 2)}</pre>\n    </Layout>\n  )\n}\n\nexport default Profile","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":69,"to":104}}}}],["757",{"pageContent":"An advantage of this pattern is preventing a flash of unauthenticated content before redirecting. It's important to note fetching user data in `getServerSideProps` will block rendering until the request to your authentication provider resolves. To prevent creating a bottleneck and increasing your TTFB ([Time to First Byte](https://web.dev/time-to-first-byte/)), you should ensure your authentication lookup is fast. Otherwise, consider [static generation](#authenticating-statically-generated-pages).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":107,"to":107}}}}],["758",{"pageContent":"Authentication Providers\n\nNow that we've discussed authentication patterns, let's look at specific providers and explore how they're used with Next.js.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":109,"to":111}}}}],["759",{"pageContent":"Bring Your Own Database\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-iron-session\">with-iron-session</a></li>\n    <li><a href=\"https://github.com/nextauthjs/next-auth-example\">next-auth-example</a></li>\n  </ul>\n</details>\n\nIf you have an existing database with user data, you'll likely want to utilize an open-source solution that's provider agnostic.\n\n- If you want a low-level, encrypted, and stateless session utility use [`iron-session`](https://github.com/vercel/next.js/tree/canary/examples/with-iron-session).\n- If you want a full-featured authentication system with built-in providers (Google, Facebook, GitHub…), JWT, JWE, email/password, magic links and more… use [`next-auth`](https://github.com/nextauthjs/next-auth-example).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":113,"to":126}}}}],["760",{"pageContent":"Both of these libraries support either authentication pattern. If you're interested in [Passport](http://www.passportjs.org/), we also have examples for it using secure and encrypted cookies:\n\n- [with-passport](https://github.com/vercel/next.js/tree/canary/examples/with-passport)\n- [with-passport-and-next-connect](https://github.com/vercel/next.js/tree/canary/examples/with-passport-and-next-connect)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":128,"to":131}}}}],["761",{"pageContent":"Other Providers\n\nTo see examples with other authentication providers, check out the [examples folder](https://github.com/vercel/next.js/tree/canary/examples).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":133,"to":135}}}}],["762",{"pageContent":"<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/auth0\">Auth0</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-clerk\">Clerk</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-firebase-authentication\">Firebase</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-magic\">Magic</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-nhost-auth-realtime-graphql\">Nhost</a></li>\n    <li><a href=\"https://github.com/vercel/examples/tree/main/solutions/auth-with-ory\">Ory</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-supabase-auth-realtime-db\">Supabase</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-supertokens\">Supertokens</a></li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":137,"to":147}}}}],["763",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-supertokens\">Supertokens</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-userbase\">Userbase</a></li>\n  </ul>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":147,"to":150}}}}],["764",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/pages.md\">\n    <b>Pages:</b>\n    <small>Learn more about pages and the different pre-rendering methods in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/overview.md\">\n    <b>Data Fetching:</b>\n    <small>Learn more about data fetching in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/authentication.md","loc":{"lines":{"from":152,"to":168}}}}],["765",{"pageContent":"---\ndescription: Next.js supports including CSS files as Global CSS or CSS Modules, using `styled-jsx` for CSS-in-JS, or any other CSS-in-JS solution! Learn more here.\n---\n\n# Built-In CSS Support\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/basic-css\">Basic CSS Example</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss\">With Tailwind CSS</a></li>\n  </ul>\n</details>\n\nNext.js allows you to import CSS files from a JavaScript file.\nThis is possible because Next.js extends the concept of [`import`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import) beyond JavaScript.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":1,"to":16}}}}],["766",{"pageContent":"Adding a Global Stylesheet\n\nTo add a stylesheet to your application, import the CSS file within `pages/_app.js`.\n\nFor example, consider the following stylesheet named `styles.css`:\n\n```css\nbody {\n  font-family: 'SF Pro Text', 'SF Pro Icons', 'Helvetica Neue', 'Helvetica',\n    'Arial', sans-serif;\n  padding: 20px 20px 60px;\n  max-width: 680px;\n  margin: 0 auto;\n}\n```\n\nCreate a [`pages/_app.js` file](/docs/advanced-features/custom-app.md) if not already present.\nThen, [`import`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import) the `styles.css` file.\n\n```jsx\nimport '../styles.css'\n\n// This default export is required in a new `pages/_app.js` file.\nexport default function MyApp({ Component, pageProps }) {\n  return <Component {...pageProps} />\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":18,"to":43}}}}],["767",{"pageContent":"These styles (`styles.css`) will apply to all pages and components in your application.\nDue to the global nature of stylesheets, and to avoid conflicts, you may **only import them inside [`pages/_app.js`](/docs/advanced-features/custom-app.md)**.\n\nIn development, expressing stylesheets this way allows your styles to be hot reloaded as you edit them—meaning you can keep application state.\n\nIn production, all CSS files will be automatically concatenated into a single minified `.css` file.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":46,"to":51}}}}],["768",{"pageContent":"Import styles from `node_modules`\n\nSince Next.js **9.5.4**, importing a CSS file from `node_modules` is permitted anywhere in your application.\n\nFor global stylesheets, like `bootstrap` or `nprogress`, you should import the file inside `pages/_app.js`.\nFor example:\n\n```jsx\n// pages/_app.js\nimport 'bootstrap/dist/css/bootstrap.css'\n\nexport default function MyApp({ Component, pageProps }) {\n  return <Component {...pageProps} />\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":53,"to":66}}}}],["769",{"pageContent":"For importing CSS required by a third party component, you can do so in your component. For example:\n\n```tsx\n// components/ExampleDialog.js\nimport { useState } from 'react'\nimport { Dialog } from '@reach/dialog'\nimport VisuallyHidden from '@reach/visually-hidden'\nimport '@reach/dialog/styles.css'\n\nfunction ExampleDialog(props) {\n  const [showDialog, setShowDialog] = useState(false)\n  const open = () => setShowDialog(true)\n  const close = () => setShowDialog(false)\n\n  return (\n    <div>\n      <button onClick={open}>Open Dialog</button>\n      <Dialog isOpen={showDialog} onDismiss={close}>\n        <button className=\"close-button\" onClick={close}>\n          <VisuallyHidden>Close</VisuallyHidden>\n          <span aria-hidden>×</span>\n        </button>\n        <p>Hello there. I am a dialog</p>\n      </Dialog>\n    </div>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":69,"to":96}}}}],["770",{"pageContent":"Adding Component-Level CSS\n\nNext.js supports [CSS Modules](https://github.com/css-modules/css-modules) using the `[name].module.css` file naming convention.\n\nCSS Modules locally scope CSS by automatically creating a unique class name.\nThis allows you to use the same CSS class name in different files without worrying about collisions.\n\nThis behavior makes CSS Modules the ideal way to include component-level CSS.\nCSS Module files **can be imported anywhere in your application**.\n\nFor example, consider a reusable `Button` component in the `components/` folder:\n\nFirst, create `components/Button.module.css` with the following content:\n\n```css\n/*\nYou do not need to worry about .error {} colliding with any other `.css` or\n`.module.css` files!\n*/\n.error {\n  color: white;\n  background-color: red;\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":98,"to":120}}}}],["771",{"pageContent":"Then, create `components/Button.js`, importing and using the above CSS file:\n\n```jsx\nimport styles from './Button.module.css'\n\nexport function Button() {\n  return (\n    <button\n      type=\"button\"\n      // Note how the \"error\" class is accessed as a property on the imported\n      // `styles` object.\n      className={styles.error}\n    >\n      Destroy\n    </button>\n  )\n}\n```\n\nCSS Modules are an _optional feature_ and are **only enabled for files with the `.module.css` extension**.\nRegular `<link>` stylesheets and global CSS files are still supported.\n\nIn production, all CSS Module files will be automatically concatenated into **many minified and code-split** `.css` files.\nThese `.css` files represent hot execution paths in your application, ensuring the minimal amount of CSS is loaded for your application to paint.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":123,"to":146}}}}],["772",{"pageContent":"Sass Support\n\nNext.js allows you to import Sass using both the `.scss` and `.sass` extensions.\nYou can use component-level Sass via CSS Modules and the `.module.scss` or `.module.sass` extension.\n\nBefore you can use Next.js' built-in Sass support, be sure to install [`sass`](https://github.com/sass/sass):\n\n```bash\nnpm install --save-dev sass\n```\n\nSass support has the same benefits and restrictions as the built-in CSS support detailed above.\n\n> **Note**: Sass supports [two different syntaxes](https://sass-lang.com/documentation/syntax), each with their own extension.\n> The `.scss` extension requires you use the [SCSS syntax](https://sass-lang.com/documentation/syntax#scss),\n> while the `.sass` extension requires you use the [Indented Syntax (\"Sass\")](https://sass-lang.com/documentation/syntax#the-indented-syntax).\n>\n> If you're not sure which to choose, start with the `.scss` extension which is a superset of CSS, and doesn't require you learn the\n> Indented Syntax (\"Sass\").","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":148,"to":166}}}}],["773",{"pageContent":"Customizing Sass Options\n\nIf you want to configure the Sass compiler you can do so by using `sassOptions` in `next.config.js`.\n\nFor example to add `includePaths`:\n\n```js\nconst path = require('path')\n\nmodule.exports = {\n  sassOptions: {\n    includePaths: [path.join(__dirname, 'styles')],\n  },\n}\n```\n\n### Sass Variables\n\nNext.js supports Sass variables exported from CSS Module files.\n\nFor example, using the exported `primaryColor` Sass variable:\n\n```scss\n/* variables.module.scss */\n$primary-color: #64ff00;\n\n:export {\n  primaryColor: $primary-color;\n}\n```\n\n```js\n// pages/_app.js\nimport variables from '../styles/variables.module.scss'\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <Layout color={variables.primaryColor}>\n      <Component {...pageProps} />\n    </Layout>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":168,"to":210}}}}],["774",{"pageContent":"CSS-in-JS","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":210,"to":210}}}}],["775",{"pageContent":"<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-styled-jsx\">Styled JSX</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-styled-components\">Styled Components</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-emotion\">Emotion</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-linaria\">Linaria</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss-emotion\">Tailwind CSS + Emotion</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-styletron\">Styletron</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-cxs\">Cxs</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-aphrodite\">Aphrodite</a></li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":422,"to":432}}}}],["776",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-cxs\">Cxs</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-aphrodite\">Aphrodite</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-fela\">Fela</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-stitches\">Stitches</a></li>\n  </ul>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":432,"to":437}}}}],["777",{"pageContent":"It's possible to use any existing CSS-in-JS solution.\nThe simplest one is inline styles:\n\n```jsx\nfunction HiThere() {\n  return <p style={{ color: 'red' }}>hi there</p>\n}\n\nexport default HiThere","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":439,"to":447}}}}],["778",{"pageContent":"We bundle [styled-jsx](https://github.com/vercel/styled-jsx) to provide support for isolated scoped CSS.\nThe aim is to support \"shadow CSS\" similar to Web Components, which unfortunately [do not support server-rendering and are JS-only](https://github.com/w3c/webcomponents/issues/71).\n\nSee the above examples for other popular CSS-in-JS solutions (like Styled Components).\n\nA component using `styled-jsx` looks like this:\n\n```jsx\nfunction HelloWorld() {\n  return (\n    <div>\n      Hello world\n      <p>scoped!</p>\n      <style jsx>{`\n        p {\n          color: blue;\n        }\n        div {\n          background: red;\n        }\n        @media (max-width: 600px) {\n          div {\n            background: blue;\n          }\n        }\n      `}</style>\n      <style global jsx>{`\n        body {\n          background: black;\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default HelloWorld\n```\n\nPlease see the [styled-jsx documentation](https://github.com/vercel/styled-jsx) for more examples.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":450,"to":488}}}}],["779",{"pageContent":"FAQ\n\n### Does it work with JavaScript disabled?\n\nYes, if you disable JavaScript the CSS will still be loaded in the production build (`next start`). During development, we require JavaScript to be enabled to provide the best developer experience with [Fast Refresh](https://nextjs.org/blog/next-9-4#fast-refresh).\n\n## Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/customizing-postcss-config.md\">\n    <b>Customizing PostCSS Config:</b>\n    <small>Extend the PostCSS config and plugins added by Next.js with your own.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/built-in-css-support.md","loc":{"lines":{"from":490,"to":505}}}}],["780",{"pageContent":"---\ndescription: 'Learn about client-side data fetching, and how to use SWR, a data fetching React hook library that handles caching, revalidation, focus tracking, refetching on interval and more.'\n---\n\n# Client-side data fetching\n\nClient-side data fetching is useful when your page doesn't require SEO indexing, when you don't need to pre-render your data, or when the content of your pages needs to update frequently. Unlike the server-side rendering APIs, you can use client-side data fetching at the component level.\n\nIf done at the page level, the data is fetched at runtime, and the content of the page is updated as the data changes. When used at the component level, the data is fetched at the time of the component mount, and the content of the component is updated as the data changes.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/client-side.md","loc":{"lines":{"from":1,"to":9}}}}],["781",{"pageContent":"It's important to note that using client-side data fetching can affect the performance of your application and the load speed of your pages. This is because the data fetching is done at the time of the component or pages mount, and the data is not cached.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/client-side.md","loc":{"lines":{"from":11,"to":11}}}}],["782",{"pageContent":"Client-side data fetching with useEffect\n\nThe following example shows how you can fetch data on the client side using the useEffect hook.\n\n```jsx\nimport { useState, useEffect } from 'react'\n\nfunction Profile() {\n  const [data, setData] = useState(null)\n  const [isLoading, setLoading] = useState(false)\n\n  useEffect(() => {\n    setLoading(true)\n    fetch('/api/profile-data')\n      .then((res) => res.json())\n      .then((data) => {\n        setData(data)\n        setLoading(false)\n      })\n  }, [])\n\n  if (isLoading) return <p>Loading...</p>\n  if (!data) return <p>No profile data</p>\n\n  return (\n    <div>\n      <h1>{data.name}</h1>\n      <p>{data.bio}</p>\n    </div>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/client-side.md","loc":{"lines":{"from":13,"to":44}}}}],["783",{"pageContent":"Client-side data fetching with SWR\n\nThe team behind Next.js has created a React hook library for data fetching called [**SWR**](https://swr.vercel.app/). It is **highly recommended** if you are fetching data on the client-side. It handles caching, revalidation, focus tracking, refetching on intervals, and more.\n\nUsing the same example as above, we can now use SWR to fetch the profile data. SWR will automatically cache the data for us and will revalidate the data if it becomes stale.\n\nFor more information on using SWR, check out the [SWR docs](https://swr.vercel.app/docs/getting-started).\n\n```jsx\nimport useSWR from 'swr'\n\nconst fetcher = (...args) => fetch(...args).then((res) => res.json())\n\nfunction Profile() {\n  const { data, error } = useSWR('/api/profile-data', fetcher)\n\n  if (error) return <div>Failed to load</div>\n  if (!data) return <div>Loading...</div>\n\n  return (\n    <div>\n      <h1>{data.name}</h1>\n      <p>{data.bio}</p>\n    </div>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/client-side.md","loc":{"lines":{"from":46,"to":72}}}}],["784",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/routing/introduction.md\">\n    <b>Routing:</b>\n    <small>Learn more about routing in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/client-side.md","loc":{"lines":{"from":74,"to":83}}}}],["785",{"pageContent":"---\ndescription: Fetch data on each request with `getServerSideProps`.\n---\n\n# getServerSideProps\n\nIf you export a function called `getServerSideProps` (Server-Side Rendering) from a page, Next.js will pre-render this page on each request using the data returned by `getServerSideProps`.\n\n```js\nexport async function getServerSideProps(context) {\n  return {\n    props: {}, // will be passed to the page component as props\n  }\n}\n```\n\n> Note that irrespective of rendering type, any `props` will be passed to the page component and can be viewed on the client-side in the initial HTML. This is to allow the page to be [hydrated](https://react.dev/reference/react-dom/hydrate) correctly. Make sure that you don't pass any sensitive information that shouldn't be available on the client in `props`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":1,"to":17}}}}],["786",{"pageContent":"When does getServerSideProps run\n\n`getServerSideProps` only runs on server-side and never runs on the browser. If a page uses `getServerSideProps`, then:\n\n- When you request this page directly, `getServerSideProps` runs at request time, and this page will be pre-rendered with the returned props\n- When you request this page on client-side page transitions through [`next/link`](/docs/api-reference/next/link.md) or [`next/router`](/docs/api-reference/next/router.md), Next.js sends an API request to the server, which runs `getServerSideProps`\n\n`getServerSideProps` returns JSON which will be used to render the page. All this work will be handled automatically by Next.js, so you don’t need to do anything extra as long as you have `getServerSideProps` defined.\n\nYou can use the [next-code-elimination tool](https://next-code-elimination.vercel.app/) to verify what Next.js eliminates from the client-side bundle.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":19,"to":28}}}}],["787",{"pageContent":"You can use the [next-code-elimination tool](https://next-code-elimination.vercel.app/) to verify what Next.js eliminates from the client-side bundle.\n\n`getServerSideProps` can only be exported from a **page**. You can’t export it from non-page files.\n\nNote that you must export `getServerSideProps` as a standalone function — it will **not** work if you add `getServerSideProps` as a property of the page component.\n\nThe [`getServerSideProps` API reference](/docs/api-reference/data-fetching/get-server-side-props.md) covers all parameters and props that can be used with `getServerSideProps`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":28,"to":34}}}}],["788",{"pageContent":"When should I use getServerSideProps\n\nYou should use `getServerSideProps` only if you need to render a page whose data must be fetched at request time. This could be due to the nature of the data or properties of the request (such as `authorization` headers or geo location). Pages using `getServerSideProps` will be server side rendered at request time and only be cached if [cache-control headers are configured](/docs/going-to-production#caching).\n\nIf you do not need to render the data during the request, then you should consider fetching data on the [client side](#fetching-data-on-the-client-side) or [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":36,"to":40}}}}],["789",{"pageContent":"getServerSideProps or API Routes\n\nIt can be tempting to reach for an [API Route](/docs/api-routes/introduction.md) when you want to fetch data from the server, then call that API route from `getServerSideProps`. This is an unnecessary and inefficient approach, as it will cause an extra request to be made due to both `getServerSideProps` and API Routes running on the server.\n\nTake the following example. An API route is used to fetch some data from a CMS. That API route is then called directly from `getServerSideProps`. This produces an additional call, reducing performance. Instead, directly import the logic used inside your API Route into `getServerSideProps`. This could mean calling a CMS, database, or other API directly from inside `getServerSideProps`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":42,"to":46}}}}],["790",{"pageContent":"getServerSideProps with Edge API Routes\n\n`getServerSideProps` can be used with both Serverless and Edge Runtimes, and you can set props in both. However, currently in Edge Runtime, you do not have access to the response object. This means that you cannot — for example — add cookies in `getServerSideProps`. To have access to the response object, you should **continue to use the Node.js runtime**, which is the default runtime.\n\nYou can explicitly set the runtime on a [per-page basis](https://nextjs.org/docs/advanced-features/react-18/switchable-runtime#page-runtime-option) by modifying the `config`, for example:\n\n```js\nexport const config = {\n  runtime: 'nodejs',\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":48,"to":58}}}}],["791",{"pageContent":"Fetching data on the client side\n\nIf your page contains frequently updating data, and you don’t need to pre-render the data, you can fetch the data on the [client side](/docs/basic-features/data-fetching/client-side.md). An example of this is user-specific data:\n\n- First, immediately show the page without data. Parts of the page can be pre-rendered using Static Generation. You can show loading states for missing data\n- Then, fetch the data on the client side and display it when ready\n\nThis approach works well for user dashboard pages, for example. Because a dashboard is a private, user-specific page, SEO is not relevant and the page doesn’t need to be pre-rendered. The data is frequently updated, which requires request-time data fetching.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":60,"to":67}}}}],["792",{"pageContent":"Using getServerSideProps to fetch data at request time\n\nThe following example shows how to fetch data at request time and pre-render the result.\n\n```jsx\nfunction Page({ data }) {\n  // Render data...\n}\n\n// This gets called on every request\nexport async function getServerSideProps() {\n  // Fetch data from external API\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  // Pass data to the page via props\n  return { props: { data } }\n}\n\nexport default Page\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":69,"to":89}}}}],["793",{"pageContent":"Caching with Server-Side Rendering (SSR)\n\nYou can use caching headers (`Cache-Control`) inside `getServerSideProps` to cache dynamic responses. For example, using [`stale-while-revalidate`](https://web.dev/stale-while-revalidate/).\n\n```jsx\n// This value is considered fresh for ten seconds (s-maxage=10).\n// If a request is repeated within the next 10 seconds, the previously\n// cached value will still be fresh. If the request is repeated before 59 seconds,\n// the cached value will be stale but still render (stale-while-revalidate=59).\n//\n// In the background, a revalidation request will be made to populate the cache\n// with a fresh value. If you refresh the page, you will see the new value.\nexport async function getServerSideProps({ req, res }) {\n  res.setHeader(\n    'Cache-Control',\n    'public, s-maxage=10, stale-while-revalidate=59'\n  )\n\n  return {\n    props: {},\n  }\n}\n```\n\nLearn more about [caching](/docs/going-to-production.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":91,"to":115}}}}],["794",{"pageContent":"Does getServerSideProps render an error page\n\nIf an error is thrown inside `getServerSideProps`, it will show the `pages/500.js` file. Check out the documentation for [500 page](/docs/advanced-features/custom-error-page#500-page) to learn more on how to create it. During development this file will not be used and the dev overlay will be shown instead.\n\n## Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/data-fetching/get-server-side-props.md\">\n    <b>getServerSideProps API Reference</b>\n    <small>Read the API Reference for getServerSideProps</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-server-side-props.md","loc":{"lines":{"from":117,"to":130}}}}],["795",{"pageContent":"---\ndescription: Fetch data and generate static pages with `getStaticProps`. Learn more about this API for data fetching in Next.js.\n---\n\n# getStaticPaths\n\nIf a page has [Dynamic Routes](/docs/routing/dynamic-routes.md) and uses `getStaticProps`, it needs to define a list of paths to be statically generated.\n\nWhen you export a function called `getStaticPaths` (Static Site Generation) from a page that uses dynamic routes, Next.js will statically pre-render all the paths specified by `getStaticPaths`.\n\n```jsx\n// pages/posts/[id].js\n\n// Generates `/posts/1` and `/posts/2`\nexport async function getStaticPaths() {\n  return {\n    paths: [{ params: { id: '1' } }, { params: { id: '2' } }],\n    fallback: false, // can also be true or 'blocking'\n  }\n}\n\n// `getStaticPaths` requires using `getStaticProps`\nexport async function getStaticProps(context) {\n  return {\n    // Passed to the page component as props\n    props: { post: {} },\n  }\n}\n\nexport default function Post({ post }) {\n  // Render post...\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":1,"to":32}}}}],["796",{"pageContent":"The [`getStaticPaths` API reference](/docs/api-reference/data-fetching/get-static-paths.md) covers all parameters and props that can be used with `getStaticPaths`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":35,"to":35}}}}],["797",{"pageContent":"When should I use getStaticPaths?\n\nYou should use `getStaticPaths` if you’re statically pre-rendering pages that use dynamic routes and:\n\n- The data comes from a headless CMS\n- The data comes from a database\n- The data comes from the filesystem\n- The data can be publicly cached (not user-specific)\n- The page must be pre-rendered (for SEO) and be very fast — `getStaticProps` generates `HTML` and `JSON` files, both of which can be cached by a CDN for performance","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":37,"to":45}}}}],["798",{"pageContent":"When does getStaticPaths run\n\n`getStaticPaths` will only run during build in production, it will not be called during runtime. You can validate code written inside `getStaticPaths` is removed from the client-side bundle [with this tool](https://next-code-elimination.vercel.app/).\n\n### How does getStaticProps run with regards to getStaticPaths\n\n- `getStaticProps` runs during `next build` for any `paths` returned during build\n- `getStaticProps` runs in the background when using `fallback: true`\n- `getStaticProps` is called before initial render when using `fallback: blocking`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":47,"to":55}}}}],["799",{"pageContent":"Where can I use getStaticPaths\n\n- `getStaticPaths` **must** be used with `getStaticProps`\n- You **cannot** use `getStaticPaths` with [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md)\n- You can export `getStaticPaths` from a [Dynamic Route](/docs/routing/dynamic-routes.md) that also uses `getStaticProps`\n- You **cannot** export `getStaticPaths` from non-page file (e.g. your `components` folder)\n- You must export `getStaticPaths` as a standalone function, and not a property of the page component\n\n## Runs on every request in development\n\nIn development (`next dev`), `getStaticPaths` will be called on every request.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":57,"to":67}}}}],["800",{"pageContent":"Generating paths on-demand\n\n`getStaticPaths` allows you to control which pages are generated during the build instead of on-demand with [`fallback`](/docs/api-reference/data-fetching/get-static-paths.md#fallback-blocking). Generating more pages during a build will cause slower builds.\n\nYou can defer generating all pages on-demand by returning an empty array for `paths`. This can be especially helpful when deploying your Next.js application to multiple environments. For example, you can have faster builds by generating all pages on-demand for previews (but not production builds). This is helpful for sites with hundreds/thousands of static pages.\n\n```jsx\n// pages/posts/[id].js\n\nexport async function getStaticPaths() {\n  // When this is true (in preview environments) don't\n  // prerender any static pages\n  // (faster builds, but slower initial page load)\n  if (process.env.SKIP_BUILD_STATIC_GENERATION) {\n    return {\n      paths: [],\n      fallback: 'blocking',\n    }\n  }","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":69,"to":87}}}}],["801",{"pageContent":"// Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // Get the paths we want to prerender based on posts\n  // In production environments, prerender all pages\n  // (slower builds, but faster initial page load)\n  const paths = posts.map((post) => ({\n    params: { id: post.id },\n  }))\n\n  // { fallback: false } means other routes should 404\n  return { paths, fallback: false }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":89,"to":103}}}}],["802",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/data-fetching/get-static-paths.md\">\n    <b>getStaticPaths API Reference</b>\n    <small>Read the API Reference for getStaticPaths</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-paths.md","loc":{"lines":{"from":105,"to":114}}}}],["803",{"pageContent":"---\ndescription: Fetch data and generate static pages with `getStaticProps`. Learn more about this API for data fetching in Next.js.\n---\n\n# getStaticProps\n\nIf you export a function called `getStaticProps` (Static Site Generation) from a page, Next.js will pre-render this page at build time using the props returned by `getStaticProps`.\n\n```jsx\nexport async function getStaticProps(context) {\n  return {\n    props: {}, // will be passed to the page component as props\n  }\n}\n```\n\n> Note that irrespective of rendering type, any `props` will be passed to the page component and can be viewed on the client-side in the initial HTML. This is to allow the page to be [hydrated](https://react.dev/reference/react-dom/hydrate) correctly. Make sure that you don't pass any sensitive information that shouldn't be available on the client in `props`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":1,"to":17}}}}],["804",{"pageContent":"When should I use getStaticProps?\n\nYou should use `getStaticProps` if:\n\n- The data required to render the page is available at build time ahead of a user’s request\n- The data comes from a headless CMS\n- The page must be pre-rendered (for SEO) and be very fast — `getStaticProps` generates `HTML` and `JSON` files, both of which can be cached by a CDN for performance\n- The data can be publicly cached (not user-specific). This condition can be bypassed in certain specific situation by using a Middleware to rewrite the path.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":19,"to":26}}}}],["805",{"pageContent":"When does getStaticProps run\n\n`getStaticProps` always runs on the server and never on the client. You can validate code written inside `getStaticProps` is removed from the client-side bundle [with this tool](https://next-code-elimination.vercel.app/).\n\n- `getStaticProps` always runs during `next build`\n- `getStaticProps` runs in the background when using [`fallback: true`](/docs/api-reference/data-fetching/get-static-paths#fallback-true)\n- `getStaticProps` is called before initial render when using [`fallback: blocking`](/docs/api-reference/data-fetching/get-static-paths#fallback-blocking)\n- `getStaticProps` runs in the background when using `revalidate`\n- `getStaticProps` runs on-demand in the background when using [`revalidate()`](/docs/basic-features/data-fetching/incremental-static-regeneration.md#on-demand-revalidation)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":28,"to":36}}}}],["806",{"pageContent":"When combined with [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md), `getStaticProps` will run in the background while the stale page is being revalidated, and the fresh page served to the browser.\n\n`getStaticProps` does not have access to the incoming request (such as query parameters or HTTP headers) as it generates static HTML. If you need access to the request for your page, consider using [Middleware](/docs/middleware.md) in addition to `getStaticProps`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":38,"to":40}}}}],["807",{"pageContent":"Using getStaticProps to fetch data from a CMS\n\nThe following example shows how you can fetch a list of blog posts from a CMS.\n\n```jsx\n// posts will be populated at build time by getStaticProps()\nfunction Blog({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li>{post.title}</li>\n      ))}\n    </ul>\n  )\n}\n\n// This function gets called at build time on server-side.\n// It won't be called on client-side, so you can even do\n// direct database queries.\nexport async function getStaticProps() {\n  // Call an external API endpoint to get posts.\n  // You can use any data fetching library\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // By returning { props: { posts } }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n\nexport default Blog","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":42,"to":76}}}}],["808",{"pageContent":"The [`getStaticProps` API reference](/docs/api-reference/data-fetching/get-static-props.md) covers all parameters and props that can be used with `getStaticProps`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":79,"to":79}}}}],["809",{"pageContent":"Write server-side code directly\n\nAs `getStaticProps` runs only on the server-side, it will never run on the client-side. It won’t even be included in the JS bundle for the browser, so you can write direct database queries without them being sent to browsers.\n\nThis means that instead of fetching an **API route** from `getStaticProps` (that itself fetches data from an external source), you can write the server-side code directly in `getStaticProps`.\n\nTake the following example. An API route is used to fetch some data from a CMS. That API route is then called directly from `getStaticProps`. This produces an additional call, reducing performance. Instead, the logic for fetching the data from the CMS can be shared by using a `lib/` directory. Then it can be shared with `getStaticProps`.\n\n```jsx\n// lib/load-posts.js","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":81,"to":90}}}}],["810",{"pageContent":"```jsx\n// lib/load-posts.js\n\n// The following function is shared\n// with getStaticProps and API routes\n// from a `lib/` directory\nexport async function loadPosts() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts/')\n  const data = await res.json()\n\n  return data\n}\n\n// pages/blog.js\nimport { loadPosts } from '../lib/load-posts'\n\n// This function runs only on the server side\nexport async function getStaticProps() {\n  // Instead of fetching your `/api` route you can call the same\n  // function directly in `getStaticProps`\n  const posts = await loadPosts()\n\n  // Props returned will be passed to the page component\n  return { props: { posts } }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":90,"to":115}}}}],["811",{"pageContent":"Alternatively, if you are **not** using API routes to fetch data, then the [`fetch()`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) API _can_ be used directly in `getStaticProps` to fetch data.\n\nTo verify what Next.js eliminates from the client-side bundle, you can use the [next-code-elimination tool](https://next-code-elimination.vercel.app/).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":118,"to":120}}}}],["812",{"pageContent":"Statically generates both HTML and JSON\n\nWhen a page with `getStaticProps` is pre-rendered at build time, in addition to the page HTML file, Next.js generates a JSON file holding the result of running `getStaticProps`.\n\nThis JSON file will be used in client-side routing through [`next/link`](/docs/api-reference/next/link.md) or [`next/router`](/docs/api-reference/next/router.md). When you navigate to a page that’s pre-rendered using `getStaticProps`, Next.js fetches this JSON file (pre-computed at build time) and uses it as the props for the page component. This means that client-side page transitions will **not** call `getStaticProps` as only the exported JSON is used.\n\nWhen using Incremental Static Generation, `getStaticProps` will be executed in the background to generate the JSON needed for client-side navigation. You may see this in the form of multiple requests being made for the same page, however, this is intended and has no impact on end-user performance.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":122,"to":128}}}}],["813",{"pageContent":"Where can I use getStaticProps\n\n`getStaticProps` can only be exported from a **page**. You **cannot** export it from non-page files, `_app`, `_document`, or `_error`.\n\nOne of the reasons for this restriction is that React needs to have all the required data before the page is rendered.\n\nAlso, you must use export `getStaticProps` as a standalone function — it will **not** work if you add `getStaticProps` as a property of the page component.\n\n> Note: if you have created a [custom app](/docs/advanced-features/custom-app.md), ensure you are passing the `pageProps` to the page component as shown in the linked document, otherwise the props will be empty.\n\n## Runs on every request in development\n\nIn development (`next dev`), `getStaticProps` will be called on every request.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":130,"to":142}}}}],["814",{"pageContent":"Runs on every request in development\n\nIn development (`next dev`), `getStaticProps` will be called on every request.\n\n## Preview Mode\n\nYou can temporarily bypass static generation and render the page at **request time** instead of build time using [**Preview Mode**](/docs/advanced-features/preview-mode.md). For example, you might be using a headless CMS and want to preview drafts before they're published.\n\n## Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/data-fetching/get-static-props.md\">\n    <b>getStaticProps API Reference</b>\n    <small>Read the API Reference for getStaticProps</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/get-static-props.md","loc":{"lines":{"from":142,"to":159}}}}],["815",{"pageContent":"---\ndescription: 'Learn how to create or update static pages at runtime with Incremental Static Regeneration.'\n---\n\n# Incremental Static Regeneration\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://nextjs.org/commerce\">Next.js Commerce</a></li>\n    <li><a href=\"https://reactions-demo.vercel.app/\">GitHub Reactions Demo</a></li>\n    <li><a href=\"https://static-tweet.vercel.app/\">Static Tweet Demo</a></li>\n  </ul>\n</details>\n\n<details>\n  <summary><b>Version History</b></summary>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":1,"to":17}}}}],["816",{"pageContent":"<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes                                                                                 |\n| --------- | --------------------------------------------------------------------------------------- |\n| `v12.2.0` | On-Demand ISR is stable                                                                 |\n| `v12.1.0` | On-Demand ISR added (beta).                                                             |\n| `v12.0.0` | [Bot-aware ISR fallback](https://nextjs.org/blog/next-12#bot-aware-isr-fallback) added. |\n| `v9.5.0`  | Base Path added.                                                                        |\n\n</details>\n\nNext.js allows you to create or update static pages _after_ you’ve built your site. Incremental Static Regeneration (ISR) enables you to use static-generation on a per-page basis, **without needing to rebuild the entire site**. With ISR, you can retain the benefits of static while scaling to millions of pages.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":17,"to":29}}}}],["817",{"pageContent":"> Note: The [`experimental-edge` runtime](https://nextjs.org/docs/api-reference/edge-runtime) is currently not compatible with ISR, although you can leverage `stale-while-revalidate` by setting the `cache-control` header manually.\n\nTo use ISR, add the `revalidate` prop to `getStaticProps`:\n\n```jsx\nfunction Blog({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li key={post.id}>{post.title}</li>\n      ))}\n    </ul>\n  )\n}\n\n// This function gets called at build time on server-side.\n// It may be called again, on a serverless function, if\n// revalidation is enabled and a new request comes in\nexport async function getStaticProps() {\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  return {\n    props: {\n      posts,\n    },\n    // Next.js will attempt to re-generate the page:\n    // - When a request comes in\n    // - At most once every 10 seconds\n    revalidate: 10, // In seconds\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":31,"to":62}}}}],["818",{"pageContent":"// This function gets called at build time on server-side.\n// It may be called again, on a serverless function, if\n// the path has not been generated.\nexport async function getStaticPaths() {\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // Get the paths we want to pre-render based on posts\n  const paths = posts.map((post) => ({\n    params: { id: post.id },\n  }))\n\n  // We'll pre-render only these paths at build time.\n  // { fallback: 'blocking' } will server-render pages\n  // on-demand if the path doesn't exist.\n  return { paths, fallback: 'blocking' }\n}\n\nexport default Blog","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":64,"to":82}}}}],["819",{"pageContent":"When a request is made to a page that was pre-rendered at build time, it will initially show the cached page.\n\n- Any requests to the page after the initial request and before 10 seconds are also cached and instantaneous.\n- After the 10-second window, the next request will still show the cached (stale) page\n- Next.js triggers a regeneration of the page in the background.\n- Once the page generates successfully, Next.js will invalidate the cache and show the updated page. If the background regeneration fails, the old page would still be unaltered.\n\nWhen a request is made to a path that hasn’t been generated, Next.js will server-render the page on the first request. Future requests will serve the static file from the cache. ISR on Vercel [persists the cache globally and handles rollbacks](https://vercel.com/docs/concepts/next.js/incremental-static-regeneration?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":85,"to":92}}}}],["820",{"pageContent":"> Note: Check if your upstream data provider has caching enabled by default. You might need to disable (e.g. `useCdn: false`), otherwise a revalidation won't be able to pull fresh data to update the ISR cache. Caching can occur at a CDN (for an endpoint being requested) when it returns the `Cache-Control` header.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":94,"to":94}}}}],["821",{"pageContent":"On-Demand Revalidation\n\nIf you set a `revalidate` time of `60`, all visitors will see the same generated version of your site for one minute. The only way to invalidate the cache is from someone visiting that page after the minute has passed.\n\nStarting with `v12.2.0`, Next.js supports On-Demand Incremental Static Regeneration to manually purge the Next.js cache for a specific page. This makes it easier to update your site when:\n\n- Content from your headless CMS is created or updated\n- Ecommerce metadata changes (price, description, category, reviews, etc.)\n\nInside `getStaticProps`, you do not need to specify `revalidate` to use on-demand revalidation. If `revalidate` is omitted, Next.js will use the default value of `false` (no revalidation) and only revalidate the page on-demand when `revalidate()` is called.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":96,"to":105}}}}],["822",{"pageContent":"> **Note:** [Middleware](/docs/advanced-features/middleware.md) won't be executed for On-Demand ISR requests. Instead, call `revalidate()` on the _exact_ path that you want revalidated. For example, if you have `pages/blog/[slug].js` and a rewrite from `/post-1` -> `/blog/post-1`, you would need to call `res.revalidate('/blog/post-1')`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":107,"to":107}}}}],["823",{"pageContent":"Using On-Demand Revalidation\n\nFirst, create a secret token only known by your Next.js app. This secret will be used to prevent unauthorized access to the revalidation API Route. You can access the route (either manually or with a webhook) with the following URL structure:\n\n```bash\nhttps://<your-site.com>/api/revalidate?secret=<token>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":109,"to":114}}}}],["824",{"pageContent":"Next, add the secret as an [Environment Variable](/docs/basic-features/environment-variables.md) to your application. Finally, create the revalidation API Route:\n\n```jsx\n// pages/api/revalidate.js\n\nexport default async function handler(req, res) {\n  // Check for secret to confirm this is a valid request\n  if (req.query.secret !== process.env.MY_SECRET_TOKEN) {\n    return res.status(401).json({ message: 'Invalid token' })\n  }\n\n  try {\n    // this should be the actual path not a rewritten path\n    // e.g. for \"/blog/[slug]\" this should be \"/blog/post-1\"\n    await res.revalidate('/path-to-revalidate')\n    return res.json({ revalidated: true })\n  } catch (err) {\n    // If there was an error, Next.js will continue\n    // to show the last successfully generated page\n    return res.status(500).send('Error revalidating')\n  }\n}\n```\n\n[View our demo](https://on-demand-isr.vercel.app) to see on-demand revalidation in action and provide feedback.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":117,"to":141}}}}],["825",{"pageContent":"Testing on-Demand ISR during development\n\nWhen running locally with `next dev`, `getStaticProps` is invoked on every request. To verify your on-demand ISR configuration is correct, you will need to create a [production build](/docs/api-reference/cli.md#build) and start the [production server](/docs/api-reference/cli.md#production):\n\n```bash\n$ next build\n$ next start\n```\n\nThen, you can confirm that static pages have successfully revalidated.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":143,"to":152}}}}],["826",{"pageContent":"Error handling and revalidation\n\nIf there is an error inside `getStaticProps` when handling background regeneration, or you manually throw an error, the last successfully generated page will continue to show. On the next subsequent request, Next.js will retry calling `getStaticProps`.\n\n```jsx\nexport async function getStaticProps() {\n  // If this request throws an uncaught error, Next.js will\n  // not invalidate the currently shown page and\n  // retry getStaticProps on the next request.\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  if (!res.ok) {\n    // If there is a server error, you might want to\n    // throw an error instead of returning so that the cache is not updated\n    // until the next successful request.\n    throw new Error(`Failed to fetch posts, received status ${res.status}`)\n  }\n\n  // If the request was successful, return the posts\n  // and revalidate every 10 seconds.\n  return {\n    props: {\n      posts,\n    },\n    revalidate: 10,\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":154,"to":182}}}}],["827",{"pageContent":"Self-hosting ISR\n\nIncremental Static Regeneration (ISR) works on [self-hosted Next.js sites](/docs/deployment.md#self-hosting) out of the box when you use `next start`.\n\nYou can use this approach when deploying to container orchestrators such as [Kubernetes](https://kubernetes.io/) or [HashiCorp Nomad](https://www.nomadproject.io/). By default, generated assets will be stored in-memory on each pod. This means that each pod will have its own copy of the static files. Stale data may be shown until that specific pod is hit by a request.\n\nTo ensure consistency across all pods, you can disable in-memory caching. This will inform the Next.js server to only leverage assets generated by ISR in the file system.\n\nYou can use a shared network mount in your Kubernetes pods (or similar setup) to reuse the same file-system cache between different containers. By sharing the same mount, the `.next` folder which contains the `next/image` cache will also be shared and re-used.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":184,"to":192}}}}],["828",{"pageContent":"To disable in-memory caching, set `isrMemoryCacheSize` to `0` in your `next.config.js` file:\n\n```js\nmodule.exports = {\n  experimental: {\n    // Defaults to 50MB\n    isrMemoryCacheSize: 0,\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":194,"to":202}}}}],["829",{"pageContent":"> **Note:** You might need to consider a race condition between multiple pods trying to update the cache at the same time, depending on how your shared mount is configured.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":205,"to":205}}}}],["830",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/get-static-paths.md\">\n    <b>Dynamic routing</b>\n    <small>Learn more about dynamic routing in Next.js with getStaticPaths.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/incremental-static-regeneration.md","loc":{"lines":{"from":207,"to":216}}}}],["831",{"pageContent":"---\ndescription: 'Next.js allows you to fetch data in multiple ways, with pre-rendering, server-side rendering or static-site generation, and incremental static regeneration. Learn how to manage your application data in Next.js.'\n---\n\n# Data Fetching Overview","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":1,"to":5}}}}],["832",{"pageContent":"<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-wordpress\">WordPress Example</a> (<a href=\"https://next-blog-wordpress.vercel.app\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter\">Blog Starter using markdown files</a> (<a href=\"https://next-blog-starter.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-datocms\">DatoCMS Example</a> (<a href=\"https://next-blog-datocms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-takeshape\">TakeShape Example</a> (<a href=\"https://next-blog-takeshape.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-sanity\">Sanity Example</a> (<a href=\"https://next-blog-sanity.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":7,"to":14}}}}],["833",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-sanity\">Sanity Example</a> (<a href=\"https://next-blog-sanity.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prismic\">Prismic Example</a> (<a href=\"https://next-blog-prismic.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-contentful\">Contentful Example</a> (<a href=\"https://next-blog-contentful.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-strapi\">Strapi Example</a> (<a href=\"https://next-blog-strapi.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prepr\">Prepr Example</a> (<a href=\"https://next-blog-prepr.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":14,"to":18}}}}],["834",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prepr\">Prepr Example</a> (<a href=\"https://next-blog-prepr.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-agilitycms\">Agility CMS Example</a> (<a href=\"https://next-blog-agilitycms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-cosmic\">Cosmic Example</a> (<a href=\"https://next-blog-cosmic.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-buttercms\">ButterCMS Example</a> (<a href=\"https://next-blog-buttercms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-storyblok\">Storyblok Example</a> (<a href=\"https://next-blog-storyblok.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":18,"to":22}}}}],["835",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-storyblok\">Storyblok Example</a> (<a href=\"https://next-blog-storyblok.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-graphcms\">GraphCMS Example</a> (<a href=\"https://next-blog-graphcms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-kontent\">Kontent Example</a> (<a href=\"https://next-blog-kontent.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://static-tweet.vercel.app/\">Static Tweet Demo</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-enterspeed\">Enterspeed Example</a> (<a href=\"https://next-blog-demo.enterspeed.com/\">Demo</a>)</li>\n  </ul>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":22,"to":28}}}}],["836",{"pageContent":"> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for [colocated data fetching](https://beta.nextjs.org/docs/data-fetching/fundamentals) at the component level, using the new React `use` hook and an extended `fetch` Web API.\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).\n\nData fetching in Next.js allows you to render your content in different ways, depending on your application's use case. These include pre-rendering with **Server-side Rendering** or **Static Generation**, and updating or creating content at runtime with **Incremental Static Regeneration**.\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/get-server-side-props.md\">\n    <b>SSR: Server-side rendering</b>\n    <small>Learn more about server-side rendering in Next.js with getServerSideProps.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":30,"to":41}}}}],["837",{"pageContent":"<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/get-static-props.md\">\n    <b>SSG: Static-site generation</b>\n    <small>Learn more about static site generation in Next.js with getStaticProps.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/client-side.md\">\n    <b>CSR: Client-side rendering</b>\n    <small>Learn more about client side rendering in Next.js with SWR.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/get-static-paths.md\">\n    <b>Dynamic routing</b>\n    <small>Learn more about dynamic routing in Next.js with getStaticPaths.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/incremental-static-regeneration.md\">\n    <b>ISR: Incremental Static Regeneration</b>\n    <small>Learn more about Incremental Static Regeneration in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":43,"to":69}}}}],["838",{"pageContent":"Learn more\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/preview-mode.md\">\n    <b>Preview Mode:</b>\n    <small>Learn more about the preview mode in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/routing/introduction.md\">\n    <b>Routing:</b>\n    <small>Learn more about routing in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/typescript.md#pages\">\n    <b>TypeScript:</b>\n    <small>Add TypeScript to your pages.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/data-fetching/overview.md","loc":{"lines":{"from":71,"to":92}}}}],["839",{"pageContent":"---\ndescription: Learn to add and access environment variables in your Next.js application.\n---\n\n# Environment Variables\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/environment-variables\">Environment Variables</a></li>\n  </ul>\n</details>\n\nNext.js comes with built-in support for environment variables, which allows you to do the following:\n\n- [Use `.env.local` to load environment variables](#loading-environment-variables)\n- [Expose environment variables to the browser by prefixing with `NEXT_PUBLIC_`](#exposing-environment-variables-to-the-browser)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":1,"to":17}}}}],["840",{"pageContent":"Loading Environment Variables\n\nNext.js has built-in support for loading environment variables from `.env.local` into `process.env`.\n\nAn example `.env.local`:\n\n```bash\nDB_HOST=localhost\nDB_USER=myuser\nDB_PASS=mypassword\n```\n\nThis loads `process.env.DB_HOST`, `process.env.DB_USER`, and `process.env.DB_PASS` into the Node.js environment automatically allowing you to use them in [Next.js data fetching methods](/docs/basic-features/data-fetching/overview.md) and [API routes](/docs/api-routes/introduction.md).\n\nFor example, using [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md):\n\n```js\n// pages/index.js\nexport async function getStaticProps() {\n  const db = await myDB.connect({\n    host: process.env.DB_HOST,\n    username: process.env.DB_USER,\n    password: process.env.DB_PASS,\n  })\n  // ...\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":19,"to":44}}}}],["841",{"pageContent":"> **Note**: In order to keep server-only secrets safe, environment variables are evaluated at build time, so only environment variables _actually_ used will be included. This means that `process.env` is not a standard JavaScript object, so you’re not able to\n> use [object destructuring](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment).\n> Environment variables must be referenced as e.g. `process.env.PUBLISHABLE_KEY`, _not_ `const { PUBLISHABLE_KEY } = process.env`.\n\n> **Note**: Next.js will automatically expand variables (`$VAR`) inside of your `.env*` files.\n> This allows you to reference other secrets, like so:\n>\n> ```bash\n> # .env\n> HOSTNAME=localhost\n> PORT=8080\n> HOST=http://$HOSTNAME:$PORT\n> ```\n>\n> If you are trying to use a variable with a `$` in the actual value, it needs to be escaped like so: `\\$`.\n>\n> For example:\n>\n> ```bash\n> # .env\n> A=abc\n>\n> # becomes \"preabc\"\n> WRONG=pre$A\n>\n> # becomes \"pre$A\"\n> CORRECT=pre\\$A\n>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":47,"to":74}}}}],["842",{"pageContent":"> **Note**: If you are using a `/src` folder, please note that Next.js will load the .env files **only** from the parent folder and **not** from the `/src` folder.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":76,"to":76}}}}],["843",{"pageContent":"Exposing Environment Variables to the Browser\n\nBy default environment variables are only available in the Node.js environment, meaning they won't be exposed to the browser.\n\nIn order to expose a variable to the browser you have to prefix the variable with `NEXT_PUBLIC_`. For example:\n\n```bash\nNEXT_PUBLIC_ANALYTICS_ID=abcdefghijk","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":78,"to":85}}}}],["844",{"pageContent":"This loads `process.env.NEXT_PUBLIC_ANALYTICS_ID` into the Node.js environment automatically, allowing you to use it anywhere in your code. The value will be inlined into JavaScript sent to the browser because of the `NEXT_PUBLIC_` prefix. This inlining occurs at build time, so your various `NEXT_PUBLIC_` envs need to be set when the project is built.\n\n```js\n// pages/index.js\nimport setupAnalyticsService from '../lib/my-analytics-service'\n\n// 'NEXT_PUBLIC_ANALYTICS_ID' can be used here as it's prefixed by 'NEXT_PUBLIC_'.\n// It will be transformed at build time to `setupAnalyticsService('abcdefghijk')`.\nsetupAnalyticsService(process.env.NEXT_PUBLIC_ANALYTICS_ID)\n\nfunction HomePage() {\n  return <h1>Hello World</h1>\n}\n\nexport default HomePage","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":88,"to":102}}}}],["845",{"pageContent":"Note that dynamic lookups will _not_ be inlined, such as:\n\n```js\n// This will NOT be inlined, because it uses a variable\nconst varName = 'NEXT_PUBLIC_ANALYTICS_ID'\nsetupAnalyticsService(process.env[varName])\n\n// This will NOT be inlined, because it uses a variable\nconst env = process.env\nsetupAnalyticsService(env.NEXT_PUBLIC_ANALYTICS_ID)\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":105,"to":115}}}}],["846",{"pageContent":"Default Environment Variables\n\nIn general only one `.env.local` file is needed. However, sometimes you might want to add some defaults for the `development` (`next dev`) or `production` (`next start`) environment.\n\nNext.js allows you to set defaults in `.env` (all environments), `.env.development` (development environment), and `.env.production` (production environment).\n\n`.env.local` always overrides the defaults set.\n\n> **Note**: `.env`, `.env.development`, and `.env.production` files should be included in your repository as they define defaults. **`.env*.local` should be added to `.gitignore`**, as those files are intended to be ignored. `.env.local` is where secrets can be stored.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":117,"to":125}}}}],["847",{"pageContent":"Environment Variables on Vercel\n\nWhen deploying your Next.js application to [Vercel](https://vercel.com), Environment Variables can be configured [in the Project Settings](https://vercel.com/docs/concepts/projects/environment-variables?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).\n\nAll types of Environment Variables should be configured there. Even Environment Variables used in Development – which can be [downloaded onto your local device](https://vercel.com/docs/concepts/projects/environment-variables#development-environment-variables?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) afterwards.\n\nIf you've configured [Development Environment Variables](https://vercel.com/docs/concepts/projects/environment-variables#development-environment-variables?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) you can pull them into a `.env.local` for usage on your local machine using the following command:\n\n```bash\nvercel env pull .env.local\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":127,"to":137}}}}],["848",{"pageContent":"Test Environment Variables\n\nApart from `development` and `production` environments, there is a 3rd option available: `test`. In the same way you can set defaults for development or production environments, you can do the same with a `.env.test` file for the `testing` environment (though this one is not as common as the previous two). Next.js will not load environment variables from `.env.development` or `.env.production` in the `testing` environment.\n\nThis one is useful when running tests with tools like `jest` or `cypress` where you need to set specific environment vars only for testing purposes. Test default values will be loaded if `NODE_ENV` is set to `test`, though you usually don't need to do this manually as testing tools will address it for you.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":139,"to":143}}}}],["849",{"pageContent":"There is a small difference between `test` environment, and both `development` and `production` that you need to bear in mind: `.env.local` won't be loaded, as you expect tests to produce the same results for everyone. This way every test execution will use the same env defaults across different executions by ignoring your `.env.local` (which is intended to override the default set).\n\n> **Note**: similar to Default Environment Variables, `.env.test` file should be included in your repository, but `.env.test.local` shouldn't, as `.env*.local` are intended to be ignored through `.gitignore`.\n\nWhile running unit tests you can make sure to load your environment variables the same way Next.js does by leveraging the `loadEnvConfig` function from the `@next/env` package.\n\n```js\n// The below can be used in a Jest global setup file or similar for your testing set-up\nimport { loadEnvConfig } from '@next/env'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":145,"to":153}}}}],["850",{"pageContent":"```js\n// The below can be used in a Jest global setup file or similar for your testing set-up\nimport { loadEnvConfig } from '@next/env'\n\nexport default async () => {\n  const projectDir = process.cwd()\n  loadEnvConfig(projectDir)\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":153,"to":161}}}}],["851",{"pageContent":"Environment Variable Load Order\n\nEnvironment variables are looked up in the following places, in order, stopping once the variable is found.\n\n1. `process.env`\n1. `.env.$(NODE_ENV).local`\n1. `.env.local` (Not checked when `NODE_ENV` is `test`.)\n1. `.env.$(NODE_ENV)`\n1. `.env`\n\nFor example, if `NODE_ENV` is `development` and you define a variable in both `.env.development.local` and `.env`, the value in `.env.development.local` will be used.\n\n> **Note:** The allowed values for `NODE_ENV` are `production`, `development` and `test`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/environment-variables.md","loc":{"lines":{"from":163,"to":175}}}}],["852",{"pageContent":"---\ndescription: Next.js provides an integrated ESLint experience by default. These conformance rules help you use Next.js in the optimal way.\n---\n\n# ESLint\n\nNext.js provides an integrated [ESLint](https://eslint.org/) experience out of the box. Add `next lint` as a script to `package.json`:\n\n```json\n\"scripts\": {\n  \"lint\": \"next lint\"\n}\n```\n\nThen run `npm run lint` or `yarn lint`:\n\n```bash\nyarn lint\n```\n\nIf you don't already have ESLint configured in your application, you will be guided through the installation and configuration process.\n\n```bash\nyarn lint\n\n# You'll see a prompt like this:\n#\n# ? How would you like to configure ESLint?\n#\n# ❯   Base configuration + Core Web Vitals rule-set (recommended)\n#     Base configuration\n#     None","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":1,"to":32}}}}],["853",{"pageContent":"One of the following three options can be selected:\n\n- **Strict**: Includes Next.js' base ESLint configuration along with a stricter [Core Web Vitals rule-set](/docs/basic-features/eslint.md#core-web-vitals). This is the recommended configuration for developers setting up ESLint for the first time.\n\n  ```json\n  {\n    \"extends\": \"next/core-web-vitals\"\n  }\n  ```\n\n- **Base**: Includes Next.js' base ESLint configuration.\n\n  ```json\n  {\n    \"extends\": \"next\"\n  }","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":35,"to":50}}}}],["854",{"pageContent":"- **Cancel**: Does not include any ESLint configuration. Only select this option if you plan on setting up your own custom ESLint configuration.\n\nIf either of the two configuration options are selected, Next.js will automatically install `eslint` and `eslint-config-next` as development dependencies in your application and create an `.eslintrc.json` file in the root of your project that includes your selected configuration.\n\nYou can now run `next lint` every time you want to run ESLint to catch errors. Once ESLint has been set up, it will also automatically run during every build (`next build`). Errors will fail the build, while warnings will not.\n\n> If you do not want ESLint to run during `next build`, refer to the documentation for [Ignoring ESLint](/docs/api-reference/next.config.js/ignoring-eslint.md).\n\nWe recommend using an appropriate [integration](https://eslint.org/docs/user-guide/integrations#editors) to view warnings and errors directly in your code editor during development.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":53,"to":61}}}}],["855",{"pageContent":"ESLint Config\n\nThe default configuration (`eslint-config-next`) includes everything you need to have an optimal out-of-the-box linting experience in Next.js. If you do not have ESLint already configured in your application, we recommend using `next lint` to set up ESLint along with this configuration.\n\n> If you would like to use `eslint-config-next` along with other ESLint configurations, refer to the [Additional Configurations](/docs/basic-features/eslint.md#additional-configurations) section to learn how to do so without causing any conflicts.\n\nRecommended rule-sets from the following ESLint plugins are all used within `eslint-config-next`:\n\n- [`eslint-plugin-react`](https://www.npmjs.com/package/eslint-plugin-react)\n- [`eslint-plugin-react-hooks`](https://www.npmjs.com/package/eslint-plugin-react-hooks)\n- [`eslint-plugin-next`](https://www.npmjs.com/package/@next/eslint-plugin-next)\n\nThis will take precedence over the configuration from `next.config.js`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":63,"to":75}}}}],["856",{"pageContent":"ESLint Plugin\n\nNext.js provides an ESLint plugin, [`eslint-plugin-next`](https://www.npmjs.com/package/@next/eslint-plugin-next), already bundled within the base configuration that makes it possible to catch common issues and problems in a Next.js application. The full set of rules is as follows:\n\n- ✔: Enabled in the recommended configuration","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":77,"to":81}}}}],["857",{"pageContent":"|     | Rule                                                                                                                        | Description                                                                                        |\n| :-: | --------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |\n| ✔️  | [@next/next/google-font-display](/docs/messages/google-font-display.md)                                                     | Enforce font-display behavior with Google Fonts.                                                   |\n| ✔️  | [@next/next/google-font-preconnect](/docs/messages/google-font-preconnect.md)                                               | Ensure `preconnect` is used with Google Fonts.                                                     |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":83,"to":86}}}}],["858",{"pageContent":"| ✔️  | [@next/next/inline-script-id](/docs/messages/inline-script-id.md)                                                           | Enforce `id` attribute on `next/script` components with inline content.                            |\n| ✔️  | [@next/next/next-script-for-ga](/docs/messages/next-script-for-ga.md)                                                       | Prefer `next/script` component when using the inline script for Google Analytics.                  |\n| ✔️  | [@next/next/no-assign-module-variable](/docs/messages/no-assign-module-variable.md)                                         | Prevent assignment to the `module` variable.                                                       |\n| ✔️  | [@next/next/no-before-interactive-script-outside-document](/docs/messages/no-before-interactive-script-outside-document.md) | Prevent usage of `next/script`'s `beforeInteractive` strategy outside of `pages/_document.js`.     |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":87,"to":90}}}}],["859",{"pageContent":"| ✔️  | [@next/next/no-css-tags](/docs/messages/no-css-tags.md)                                                                     | Prevent manual stylesheet tags.                                                                    |\n| ✔️  | [@next/next/no-document-import-in-page](/docs/messages/no-document-import-in-page.md)                                       | Prevent importing `next/document` outside of `pages/_document.js`.                                 |\n| ✔️  | [@next/next/no-duplicate-head](/docs/messages/no-duplicate-head.md)                                                         | Prevent duplicate usage of `<Head>` in `pages/_document.js`.                                       |\n| ✔️  | [@next/next/no-head-element](/docs/messages/no-head-element.md)                                                             | Prevent usage of `<head>` element.                                                                 |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":91,"to":94}}}}],["860",{"pageContent":"| ✔️  | [@next/next/no-head-import-in-document](/docs/messages/no-head-import-in-document.md)                                       | Prevent usage of `next/head` in `pages/_document.js`.                                              |\n| ✔️  | [@next/next/no-html-link-for-pages](/docs/messages/no-html-link-for-pages.md)                                               | Prevent usage of `<a>` elements to navigate to internal Next.js pages.                             |\n| ✔️  | [@next/next/no-img-element](/docs/messages/no-img-element.md)                                                               | Prevent usage of `<img>` element due to slower LCP and higher bandwidth.                           |\n| ✔️  | [@next/next/no-page-custom-font](/docs/messages/no-page-custom-font.md)                                                     | Prevent page-only custom fonts.                                                                    |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":95,"to":98}}}}],["861",{"pageContent":"| ✔️  | [@next/next/no-script-component-in-head](/docs/messages/no-script-component-in-head.md)                                     | Prevent usage of `next/script` in `next/head` component.                                           |\n| ✔️  | [@next/next/no-styled-jsx-in-document](/docs/messages/no-styled-jsx-in-document.md)                                         | Prevent usage of `styled-jsx` in `pages/_document.js`.                                             |\n| ✔️  | [@next/next/no-sync-scripts](/docs/messages/no-sync-scripts.md)                                                             | Prevent synchronous scripts.                                                                       |\n| ✔️  | [@next/next/no-title-in-document-head](/docs/messages/no-title-in-document-head.md)                                         | Prevent usage of `<title>` with `Head` component from `next/document`.                             |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":99,"to":102}}}}],["862",{"pageContent":"| ✔️  | @next/next/no-typos                                                                                                         | Prevent common typos in [Next.js's data fetching functions](/docs/basic-features/data-fetching.md) |\n| ✔️  | [@next/next/no-unwanted-polyfillio](/docs/messages/no-unwanted-polyfillio.md)                                               | Prevent duplicate polyfills from Polyfill.io.                                                      |","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":103,"to":104}}}}],["863",{"pageContent":"If you already have ESLint configured in your application, we recommend extending from this plugin directly instead of including `eslint-config-next` unless a few conditions are met. Refer to the [Recommended Plugin Ruleset](/docs/basic-features/eslint.md#recommended-plugin-ruleset) to learn more.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":106,"to":106}}}}],["864",{"pageContent":"Custom Settings\n\n#### `rootDir`\n\nIf you're using `eslint-plugin-next` in a project where Next.js isn't installed in your root directory (such as a monorepo), you can tell `eslint-plugin-next` where to find your Next.js application using the `settings` property in your `.eslintrc`:\n\n```json\n{\n  \"extends\": \"next\",\n  \"settings\": {\n    \"next\": {\n      \"rootDir\": \"packages/my-app/\"\n    }\n  }\n}\n```\n\n`rootDir` can be a path (relative or absolute), a glob (i.e. `\"packages/*/\"`), or an array of paths and/or globs.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":108,"to":125}}}}],["865",{"pageContent":"Linting Custom Directories and Files\n\nBy default, Next.js will run ESLint for all files in the `pages/`, `app` (only if the experimental `appDir` feature is enabled), `components/`, `lib/`, and `src/` directories. However, you can specify which directories using the `dirs` option in the `eslint` config in `next.config.js` for production builds:\n\n```js\nmodule.exports = {\n  eslint: {\n    dirs: ['pages', 'utils'], // Only run ESLint on the 'pages' and 'utils' directories during production builds (next build)\n  },\n}\n```\n\nSimilarly, the `--dir` and `--file` flags can be used for `next lint` to lint specific directories and files:\n\n```bash\nnext lint --dir pages --dir utils --file bar.js\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":127,"to":143}}}}],["866",{"pageContent":"Caching\n\nTo improve performance, information of files processed by ESLint are cached by default. This is stored in `.next/cache` or in your defined [build directory](/docs/api-reference/next.config.js/setting-a-custom-build-directory). If you include any ESLint rules that depend on more than the contents of a single source file and need to disable the cache, use the `--no-cache` flag with `next lint`.\n\n```bash\nnext lint --no-cache\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":145,"to":151}}}}],["867",{"pageContent":"Disabling Rules\n\nIf you would like to modify or disable any rules provided by the supported plugins (`react`, `react-hooks`, `next`), you can directly change them using the `rules` property in your `.eslintrc`:\n\n```json\n{\n  \"extends\": \"next\",\n  \"rules\": {\n    \"react/no-unescaped-entities\": \"off\",\n    \"@next/next/no-page-custom-font\": \"off\"\n  }\n}\n```\n\n### Core Web Vitals\n\nThe `next/core-web-vitals` rule set is enabled when `next lint` is run for the first time and the **strict** option is selected.\n\n```json\n{\n  \"extends\": \"next/core-web-vitals\"\n}\n```\n\n`next/core-web-vitals` updates `eslint-plugin-next` to error on a number of rules that are warnings by default if they affect [Core Web Vitals](https://web.dev/vitals/).\n\n> The `next/core-web-vitals` entry point is automatically included for new applications built with [Create Next App](/docs/api-reference/create-next-app.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":153,"to":179}}}}],["868",{"pageContent":"Usage With Other Tools\n\n### Prettier\n\nESLint also contains code formatting rules, which can conflict with your existing [Prettier](https://prettier.io/) setup. We recommend including [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier) in your ESLint config to make ESLint and Prettier work together.\n\nFirst, install the dependency:\n\n```bash\nnpm install --save-dev eslint-config-prettier\n# or\nyarn add --dev eslint-config-prettier\n```\n\nThen, add `prettier` to your existing ESLint config:\n\n```json\n{\n  \"extends\": [\"next\", \"prettier\"]\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":181,"to":201}}}}],["869",{"pageContent":"lint-staged\n\nIf you would like to use `next lint` with [lint-staged](https://github.com/okonet/lint-staged) to run the linter on staged git files, you'll have to add the following to the `.lintstagedrc.js` file in the root of your project in order to specify usage of the `--file` flag.\n\n```js\nconst path = require('path')\n\nconst buildEslintCommand = (filenames) =>\n  `next lint --fix --file ${filenames\n    .map((f) => path.relative(process.cwd(), f))\n    .join(' --file ')}`\n\nmodule.exports = {\n  '*.{js,jsx,ts,tsx}': [buildEslintCommand],\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":203,"to":218}}}}],["870",{"pageContent":"Migrating Existing Config","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":220,"to":220}}}}],["871",{"pageContent":"Recommended Plugin Ruleset\n\nIf you already have ESLint configured in your application and any of the following conditions are true:\n\n- You have one or more of the following plugins already installed (either separately or through a different config such as `airbnb` or `react-app`):\n  - `react`\n  - `react-hooks`\n  - `jsx-a11y`\n  - `import`\n- You've defined specific `parserOptions` that are different from how Babel is configured within Next.js (this is not recommended unless you have [customized your Babel configuration](/docs/advanced-features/customizing-babel-config.md))\n- You have `eslint-plugin-import` installed with Node.js and/or TypeScript [resolvers](https://github.com/benmosher/eslint-plugin-import#resolvers) defined to handle imports","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":222,"to":232}}}}],["872",{"pageContent":"Then we recommend either removing these settings if you prefer how these properties have been configured within [`eslint-config-next`](https://github.com/vercel/next.js/blob/canary/packages/eslint-config-next/index.js) or extending directly from the Next.js ESLint plugin instead:\n\n```js\nmodule.exports = {\n  extends: [\n    //...\n    'plugin:@next/next/recommended',\n  ],\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":234,"to":242}}}}],["873",{"pageContent":"The plugin can be installed normally in your project without needing to run `next lint`:\n\n```bash\nnpm install --save-dev @next/eslint-plugin-next\n# or\nyarn add --dev @next/eslint-plugin-next\n```\n\nThis eliminates the risk of collisions or errors that can occur due to importing the same plugin or parser across multiple configurations.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":245,"to":253}}}}],["874",{"pageContent":"Additional Configurations\n\nIf you already use a separate ESLint configuration and want to include `eslint-config-next`, ensure that it is extended last after other configurations. For example:\n\n```\n{\n  \"extends\": [\"eslint:recommended\", \"next\"]\n}\n```\n\nThe `next` configuration already handles setting default values for the `parser`, `plugins` and `settings` properties. There is no need to manually re-declare any of these properties unless you need a different configuration for your use case. If you include any other shareable configurations, **you will need to make sure that these properties are not overwritten or modified**. Otherwise, we recommend removing any configurations that share behavior with the `next` configuration or extending directly from the Next.js ESLint plugin as mentioned above.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/eslint.md","loc":{"lines":{"from":255,"to":265}}}}],["875",{"pageContent":"---\ndescription:\n  Next.js' Fast Refresh is a new hot reloading experience that gives you\n  instantaneous feedback on edits made to your React components.\n---\n\n# Fast Refresh\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/fast-refresh-demo\">Fast Refresh Demo</a></li>\n  </ul>\n</details>\n\nFast Refresh is a Next.js feature that gives you instantaneous feedback on\nedits made to your React components. Fast Refresh is enabled by default in all\nNext.js applications on **9.4 or newer**. With Next.js Fast Refresh enabled,\nmost edits should be visible within a second, **without losing component\nstate**.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":1,"to":20}}}}],["876",{"pageContent":"How It Works","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":22,"to":22}}}}],["877",{"pageContent":"- If you edit a file that **only exports React component(s)**, Fast Refresh will\n  update the code only for that file, and re-render your component. You can edit\n  anything in that file, including styles, rendering logic, event handlers, or\n  effects.\n- If you edit a file with exports that _aren't_ React components, Fast Refresh\n  will re-run both that file, and the other files importing it. So if both\n  `Button.js` and `Modal.js` import `theme.js`, editing `theme.js` will update\n  both components.\n- Finally, if you **edit a file** that's **imported by files outside of the\n  React tree**, Fast Refresh **will fall back to doing a full reload**. You\n  might have a file which renders a React component but also exports a value\n  that is imported by a **non-React component**. For example, maybe your\n  component also exports a constant, and a non-React utility file imports it. In\n  that case, consider migrating the constant to a separate file and importing it","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":24,"to":37}}}}],["878",{"pageContent":"component also exports a constant, and a non-React utility file imports it. In\n  that case, consider migrating the constant to a separate file and importing it\n  into both files. This will re-enable Fast Refresh to work. Other cases can\n  usually be solved in a similar way.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":37,"to":40}}}}],["879",{"pageContent":"Error Resilience\n\n### Syntax Errors\n\nIf you make a syntax error during development, you can fix it and save the file\nagain. The error will disappear automatically, so you won't need to reload the\napp. **You will not lose component state**.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":42,"to":48}}}}],["880",{"pageContent":"Runtime Errors\n\nIf you make a mistake that leads to a runtime error inside your component,\nyou'll be greeted with a contextual overlay. Fixing the error will automatically\ndismiss the overlay, without reloading the app.\n\nComponent state will be retained if the error did not occur during rendering. If\nthe error did occur during rendering, React will remount your application using\nthe updated code.\n\nIf you have [error boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)\nin your app (which is a good idea for graceful failures in production), they\nwill retry rendering on the next edit after a rendering error. This means having\nan error boundary can prevent you from always getting reset to the root app\nstate. However, keep in mind that error boundaries shouldn't be _too_ granular.\nThey are used by React in production, and should always be designed\nintentionally.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":50,"to":66}}}}],["881",{"pageContent":"Limitations\n\nFast Refresh tries to preserve local React state in the component you're\nediting, but only if it's safe to do so. Here's a few reasons why you might see\nlocal state being reset on every edit to a file:\n\n- Local state is not preserved for class components (only function components\n  and Hooks preserve state).\n- The file you're editing might have _other_ exports in addition to a React\n  component.\n- Sometimes, a file would export the result of calling a higher-order component\n  like `HOC(WrappedComponent)`. If the returned component is a\n  class, its state will be reset.\n- Anonymous arrow functions like `export default () => <div />;` cause Fast Refresh to not preserve local component state. For large codebases you can use our [`name-default-component` codemod](/docs/advanced-features/codemods.md#name-default-component).\n\nAs more of your codebase moves to function components and Hooks, you can expect\nstate to be preserved in more cases.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":68,"to":84}}}}],["882",{"pageContent":"Tips\n\n- Fast Refresh preserves React local state in function components (and Hooks) by\n  default.\n- Sometimes you might want to _force_ the state to be reset, and a component to\n  be remounted. For example, this can be handy if you're tweaking an animation\n  that only happens on mount. To do this, you can add `// @refresh reset`\n  anywhere in the file you're editing. This directive is local to the file, and\n  instructs Fast Refresh to remount components defined in that file on every\n  edit.\n- You can put `console.log` or `debugger;` into the components you edit during\n  development.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":86,"to":97}}}}],["883",{"pageContent":"Fast Refresh and Hooks\n\nWhen possible, Fast Refresh attempts to preserve the state of your component\nbetween edits. In particular, `useState` and `useRef` preserve their previous\nvalues as long as you don't change their arguments or the order of the Hook\ncalls.\n\nHooks with dependencies—such as `useEffect`, `useMemo`, and `useCallback`—will\n_always_ update during Fast Refresh. Their list of dependencies will be ignored\nwhile Fast Refresh is happening.\n\nFor example, when you edit `useMemo(() => x * 2, [x])` to\n`useMemo(() => x * 10, [x])`, it will re-run even though `x` (the dependency)\nhas not changed. If React didn't do that, your edit wouldn't reflect on the\nscreen!\n\nSometimes, this can lead to unexpected results. For example, even a `useEffect`\nwith an empty array of dependencies would still re-run once during Fast Refresh.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":99,"to":116}}}}],["884",{"pageContent":"Sometimes, this can lead to unexpected results. For example, even a `useEffect`\nwith an empty array of dependencies would still re-run once during Fast Refresh.\n\nHowever, writing code resilient to occasional re-running of `useEffect` is a good practice even\nwithout Fast Refresh. It will make it easier for you to introduce new dependencies to it later on\nand it's enforced by [React Strict Mode](/docs/api-reference/next.config.js/react-strict-mode.md),\nwhich we highly recommend enabling.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/fast-refresh.md","loc":{"lines":{"from":116,"to":122}}}}],["885",{"pageContent":"---\ndescription: Optimizing loading web fonts with the built-in `next/font` loaders.\n---\n\n# Optimizing Fonts\n\n[**`next/font`**](/docs/api-reference/next/font.md) will automatically optimize your fonts (including custom fonts) and remove external network requests for improved privacy and performance.\n\n> **🎥 Watch:** Learn more about how to use `next/font` → [YouTube (6 minutes)](https://www.youtube.com/watch?v=L8_98i_bMMA).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":1,"to":9}}}}],["886",{"pageContent":"Overview\n\n`next/font` includes **built-in automatic self-hosting** for _any_ font file. This means you can optimally load web fonts with zero layout shift, thanks to the underlying CSS `size-adjust` property used.\n\nThis new font system also allows you to conveniently use all Google Fonts with performance and privacy in mind. CSS and font files are downloaded at build time and self-hosted with the rest of your static assets. **No requests are sent to Google by the browser.**","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":11,"to":15}}}}],["887",{"pageContent":"Google Fonts\n\nAutomatically self-host any Google Font. Fonts are included in the deployment and served from the same domain as your deployment. **No requests are sent to Google by the browser.**\n\nTo get started, import the font you would like to use from `next/font/google` as a function. We recommend using [**variable fonts**](https://fonts.google.com/variablefonts) for the best performance and flexibility.\n\nTo use the font in all your pages, add it to [`_app.js` file](https://nextjs.org/docs/advanced-features/custom-app) under `/pages` as shown below:\n\n```js\n// pages/_app.js\nimport { Inter } from 'next/font/google'\n\n// If loading a variable font, you don't need to specify the font weight\nconst inter = Inter({ subsets: ['latin'] })\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <main className={inter.className}>\n      <Component {...pageProps} />\n    </main>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":17,"to":38}}}}],["888",{"pageContent":"If you can't use a variable font, you will **need to specify a weight**:\n\n```js\n// pages/_app.js\nimport { Roboto } from 'next/font/google'\n\nconst roboto = Roboto({\n  weight: '400',\n  subsets: ['latin'],\n})\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <main className={roboto.className}>\n      <Component {...pageProps} />\n    </main>\n  )\n}\n```\n\nYou can specify multiple weights and/or styles by using an array:\n\n```js\nconst roboto = Roboto({\n  weight: ['400', '700'],\n  style: ['normal', 'italic'],\n  subsets: ['latin'],\n})\n```\n\n> **Note**: You can use `_` for fonts with spaces in the name. For example `Titillium Web` should be `Titillium_Web`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":41,"to":71}}}}],["889",{"pageContent":"Apply the font in `<head>`\n\nYou can also use the font without a wrapper and `className` by injecting it inside the `<head>` as follows:\n\n```js\n// pages/_app.js\nimport { Inter } from 'next/font/google'\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <>\n      <style jsx global>{`\n        html {\n          font-family: ${inter.style.fontFamily};\n        }\n      `}</style>\n      <Component {...pageProps} />\n    </>\n  )\n}\n```\n\n#### Single page usage\n\nTo use the font on a single page, add it to the specific page as shown below:\n\n```js\n// pages/index.js\nimport { Inter } from 'next/font/google'\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport default function Home() {\n  return (\n    <div className={inter.className}>\n      <p>Hello World</p>\n    </div>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":73,"to":114}}}}],["890",{"pageContent":"Specifying a subset\n\nGoogle Fonts are automatically [subset](https://fonts.google.com/knowledge/glossary/subsetting). This reduces the size of the font file and improves performance. You'll need to define which of these subsets you want to preload. Failing to specify any subsets while [`preload`](/docs/api-reference/next/font.md#preload) is true will result in a warning.\n\n```js\n// pages/_app.js\nconst inter = Inter({ subsets: ['latin'] })\n```\n\nView the [Font API Reference](/docs/api-reference/next/font.md#nextfontgoogle) for more information.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":116,"to":125}}}}],["891",{"pageContent":"Local Fonts\n\nImport `next/font/local` and specify the `src` of your local font file. We recommend using [**variable fonts**](https://fonts.google.com/variablefonts) for the best performance and flexibility.\n\n```js\n// pages/_app.js\nimport localFont from 'next/font/local'\n\n// Font files can be colocated inside of `pages`\nconst myFont = localFont({ src: './my-font.woff2' })\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <main className={myFont.className}>\n      <Component {...pageProps} />\n    </main>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":127,"to":144}}}}],["892",{"pageContent":"If you want to use multiple files for a single font family, `src` can be an array:\n\n```js\nconst roboto = localFont({\n  src: [\n    {\n      path: './Roboto-Regular.woff2',\n      weight: '400',\n      style: 'normal',\n    },\n    {\n      path: './Roboto-Italic.woff2',\n      weight: '400',\n      style: 'italic',\n    },\n    {\n      path: './Roboto-Bold.woff2',\n      weight: '700',\n      style: 'normal',\n    },\n    {\n      path: './Roboto-BoldItalic.woff2',\n      weight: '700',\n      style: 'italic',\n    },\n  ],\n})\n```\n\nView the [Font API Reference](/docs/api-reference/next/font.md#nextfontlocal) for more information.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":147,"to":176}}}}],["893",{"pageContent":"With Tailwind CSS\n\n`next/font` can be used with Tailwind CSS through a [CSS variable](/docs/api-reference/next/font#css-variables).\n\nIn the example below, we use the font `Inter` from `next/font/google` (You can use any font from Google or Local Fonts). Load your font with the `variable` option to define your CSS variable name and assign it to `inter`. Then, use `inter.variable` to add the CSS variable to your HTML document.\n\n```js\n// pages/_app.js\nimport { Inter } from 'next/font/google'\n\nconst inter = Inter({\n  subsets: ['latin'],\n  variable: '--font-inter',\n})\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <main className={`${inter.variable} font-sans`}>\n      <Component {...pageProps} />\n    </main>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":178,"to":199}}}}],["894",{"pageContent":"Finally, add the CSS variable to your [Tailwind CSS config](https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss):\n\n```js\n// tailwind.config.js\nconst { fontFamily } = require('tailwindcss/defaultTheme')\n\n/** @type {import('tailwindcss').Config} \\*/\nmodule.exports = {\n  content: [\n    './pages/**/*.{js,ts,jsx,tsx}',\n    './components/**/*.{js,ts,jsx,tsx}',\n  ],\n  theme: {\n    extend: {\n      fontFamily: {\n        sans: ['var(--font-inter)', ...fontFamily.sans],\n      },\n    },\n  },\n  plugins: [],\n}\n```\n\nYou can now use the `font-sans` utility class to apply the font to your elements.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":202,"to":225}}}}],["895",{"pageContent":"Preloading\n\nWhen a font function is called on a page of your site, it is not globally available and preloaded on all routes. Rather, the font is only preloaded on the related route/s based on the type of file where it is used:\n\n- if it's a [unique page](/docs/basic-features/pages), it is preloaded on the unique route for that page\n- if it's in the [custom App](/docs/advanced-features/custom-app), it is preloaded on all the routes of the site under `/pages`\n\n## Reusing fonts\n\nEvery time you call the `localFont` or Google font function, that font is hosted as one instance in your application. Therefore, if you load the same font function in multiple files, multiple instances of the same font are hosted. In this situation, it is recommended to do the following:\n\n- Call the font loader function in one shared file\n- Export it as a constant\n- Import the constant in each file where you would like to use this font","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":227,"to":240}}}}],["896",{"pageContent":"Next Steps\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/font.md\">\n    <b>Font API Reference</b>\n    <small>See the API Reference for the Font module.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/image-optimization.md\">\n    <b>Image Optimization</b>\n    <small>Learn how to optimize images with the Image component.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/font-optimization.md","loc":{"lines":{"from":242,"to":256}}}}],["897",{"pageContent":"---\ndescription: Next.js supports built-in image optimization, as well as third party loaders for Imgix, Cloudinary, and more! Learn more here.\n---\n\n# Image Component and Image Optimization\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/image-component\">Image Component</a></li>\n  </ul>\n</details>\n\nThe Next.js Image component, [`next/image`](/docs/api-reference/next/image.md), is an extension of the HTML `<img>` element, evolved for the modern web. It includes a variety of built-in performance optimizations to help you achieve good [Core Web Vitals](https://nextjs.org/learn/seo/web-performance). These scores are an important measurement of user experience on your website, and are [factored into Google's search rankings](https://nextjs.org/learn/seo/web-performance/seo-impact).\n\nSome of the optimizations built into the Image component include:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":1,"to":16}}}}],["898",{"pageContent":"Some of the optimizations built into the Image component include:\n\n- **Improved Performance:** Always serve correctly sized image for each device, using modern image formats\n- **Visual Stability:** Prevent [Cumulative Layout Shift](https://nextjs.org/learn/seo/web-performance/cls) automatically\n- **Faster Page Loads:** Images are only loaded when they enter the viewport, with optional blur-up placeholders\n- **Asset Flexibility:** On-demand image resizing, even for images stored on remote servers","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":16,"to":21}}}}],["899",{"pageContent":"Using the Image Component\n\nTo add an image to your application, import the [`next/image`](/docs/api-reference/next/image.md) component:\n\n```jsx\nimport Image from 'next/image'\n```\n\nNow, you can define the `src` for your image (either local or remote).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":23,"to":31}}}}],["900",{"pageContent":"Local Images\n\nTo use a local image, `import` your `.jpg`, `.png`, or `.webp` files:\n\n```jsx\nimport profilePic from '../assets/me.png'\n```\n\nDynamic `await import()` or `require()` are _not_ supported. The `import` must be static so it can be analyzed at build time.\n\nNext.js will automatically determine the `width` and `height` of your image based on the imported file. These values are used to prevent [Cumulative Layout Shift](https://nextjs.org/learn/seo/web-performance/cls) while your image is loading.\n\n```js\nimport Image from 'next/image'\nimport profilePic from '../assets/me.png'\n\nfunction Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src={profilePic}\n        alt=\"Picture of the author\"\n        // width={500} automatically provided\n        // height={500} automatically provided\n        // blurDataURL=\"data:...\" automatically provided\n        // placeholder=\"blur\" // Optional blur-up while loading\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":33,"to":65}}}}],["901",{"pageContent":"Remote Images\n\nTo use a remote image, the `src` property should be a URL string, which can be [relative](#loaders) or [absolute](/docs/api-reference/next/image.md#remote-patterns). Because Next.js does not have access to remote files during the build process, you'll need to provide the [`width`](/docs/api-reference/next/image.md#width), [`height`](/docs/api-reference/next/image.md#height) and optional [`blurDataURL`](/docs/api-reference/next/image.md#blurdataurl) props manually:\n\n```jsx\nimport Image from 'next/image'\n\nexport default function Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src=\"/me.png\"\n        alt=\"Picture of the author\"\n        width={500}\n        height={500}\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}\n```\n\n> Learn more about the [sizing requirements](#image-sizing) in `next/image`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":67,"to":90}}}}],["902",{"pageContent":"Domains\n\nSometimes you may want to optimize a remote image, but still use the built-in Next.js Image Optimization API. To do this, leave the `loader` at its default setting and enter an absolute URL for the Image `src` prop.\n\nTo protect your application from malicious users, you must define a list of remote hostnames you intend to use with the `next/image` component.\n\n> Learn more about [`remotePatterns`](/docs/api-reference/next/image.md#remote-patterns) configuration.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":92,"to":98}}}}],["903",{"pageContent":"Loaders\n\nNote that in the [example earlier](#remote-images), a partial URL (`\"/me.png\"`) is provided for a remote image. This is possible because of the loader architecture.\n\nA loader is a function that generates the URLs for your image. It modifies the provided `src`, and generates multiple URLs to request the image at different sizes. These multiple URLs are used in the automatic [srcset](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/srcset) generation, so that visitors to your site will be served an image that is the right size for their viewport.\n\nThe default loader for Next.js applications uses the built-in Image Optimization API, which optimizes images from anywhere on the web, and then serves them directly from the Next.js web server. If you would like to serve your images directly from a CDN or image server, you can write your own loader function with a few lines of JavaScript.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":100,"to":106}}}}],["904",{"pageContent":"You can define a loader per-image with the [`loader` prop](/docs/api-reference/next/image.md#loader), or at the application level with the [`loaderFile` configuration](https://nextjs.org/docs/api-reference/next/image#loader-configuration).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":108,"to":108}}}}],["905",{"pageContent":"Priority\n\nYou should add the `priority` property to the image that will be the [Largest Contentful Paint (LCP) element](https://web.dev/lcp/#what-elements-are-considered) for each page. Doing so allows Next.js to specially prioritize the image for loading (e.g. through preload tags or priority hints), leading to a meaningful boost in LCP.\n\nThe LCP element is typically the largest image or text block visible within the viewport of the page. When you run `next dev`, you'll see a console warning if the LCP element is an `<Image>` without the `priority` property.\n\nOnce you've identified the LCP image, you can add the property like this:\n\n```jsx\nimport Image from 'next/image'\n\nexport default function Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src=\"/me.png\"\n        alt=\"Picture of the author\"\n        width={500}\n        height={500}\n        priority\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":110,"to":135}}}}],["906",{"pageContent":"See more about priority in the [`next/image` component documentation](/docs/api-reference/next/image.md#priority).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":138,"to":138}}}}],["907",{"pageContent":"Image Sizing\n\nOne of the ways that images most commonly hurt performance is through _layout shift_, where the image pushes other elements around on the page as it loads in. This performance problem is so annoying to users that it has its own Core Web Vital, called [Cumulative Layout Shift](https://web.dev/cls/). The way to avoid image-based layout shifts is to [always size your images](https://web.dev/optimize-cls/#images-without-dimensions). This allows the browser to reserve precisely enough space for the image before it loads.\n\nBecause `next/image` is designed to guarantee good performance results, it cannot be used in a way that will contribute to layout shift, and **must** be sized in one of three ways:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":140,"to":144}}}}],["908",{"pageContent":"Because `next/image` is designed to guarantee good performance results, it cannot be used in a way that will contribute to layout shift, and **must** be sized in one of three ways:\n\n1. Automatically, using a [static import](#local-images)\n2. Explicitly, by including a [`width`](/docs/api-reference/next/image.md#width) and [`height`](/docs/api-reference/next/image.md#height) property\n3. Implicitly, by using [fill](/docs/api-reference/next/image.md#fill) which causes the image to expand to fill its parent element.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":144,"to":148}}}}],["909",{"pageContent":"> ### What if I don't know the size of my images?\n>\n> If you are accessing images from a source without knowledge of the images' sizes, there are several things you can do:\n>\n> **Use `fill`**\n>\n> The [`fill`](/docs/api-reference/next/image#fill) prop allows your image to be sized by its parent element. Consider using CSS to give the image's parent element space on the page along [`sizes`](/docs/api-reference/next/image#sizes) prop to match any media query break points. You can also use [`object-fit`](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit) with `fill`, `contain`, or `cover`, and [`object-position`](https://developer.mozilla.org/en-US/docs/Web/CSS/object-position) to define how the image should occupy that space.\n>\n> **Normalize your images**\n>\n> If you're serving images from a source that you control, consider modifying your image pipeline to normalize the images to a specific size.\n>\n> **Modify your API calls**\n>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":150,"to":163}}}}],["910",{"pageContent":">\n> **Normalize your images**\n>\n> If you're serving images from a source that you control, consider modifying your image pipeline to normalize the images to a specific size.\n>\n> **Modify your API calls**\n>\n> If your application is retrieving image URLs using an API call (such as to a CMS), you may be able to modify the API call to return the image dimensions along with the URL.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":163,"to":170}}}}],["911",{"pageContent":"If none of the suggested methods works for sizing your images, the `next/image` component is designed to work well on a page alongside standard `<img>` elements.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":172,"to":172}}}}],["912",{"pageContent":"Styling\n\nStyling the Image component is similar to styling a normal `<img>` element, but there are a few guidelines to keep in mind:\n\n**Use `className` or `style`, not `styled-jsx`**\n\nIn most cases, we recommend using the `className` prop. This can be an imported [CSS Module](/docs/basic-features/built-in-css-support.md#adding-component-level-css), a [global stylesheet](/docs/basic-features/built-in-css-support#adding-a-global-stylesheet), etc.\n\nYou can also use the `style` prop to assign inline styles.\n\nYou cannot use [styled-jsx](/docs/basic-features/built-in-css-support.md#css-in-js) because it's scoped to the current component (unless you mark the style as `global`).\n\n**When using `fill`, the parent element must have `position: relative`**\n\nThis is necessary for the proper rendering of the image element in that layout mode.\n\n**When using `fill`, the parent element must have `display: block`**\n\nThis is the default for `<div>` elements but should be specified otherwise.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":174,"to":192}}}}],["913",{"pageContent":"Properties\n\n[**View all properties available to the `next/image` component.**](/docs/api-reference/next/image.md)\n\n### Styling Examples\n\nFor examples of the Image component used with the various styles, see the [Image Component Demo](https://image-component.nextjs.gallery).\n\n## Configuration\n\nThe `next/image` component and Next.js Image Optimization API can be configured in the [`next.config.js` file](/docs/api-reference/next.config.js/introduction.md). These configurations allow you to [enable remote images](/docs/api-reference/next/image.md#remote-patterns), [define custom image breakpoints](/docs/api-reference/next/image.md#device-sizes), [change caching behavior](/docs/api-reference/next/image.md#caching-behavior) and more.\n\n[**Read the full image configuration documentation for more information.**](/docs/api-reference/next/image.md#configuration-options)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":194,"to":206}}}}],["914",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/image.md\">\n    <b>next/image</b>\n    <small>See all available properties for the Image component</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/image-optimization.md","loc":{"lines":{"from":208,"to":217}}}}],["915",{"pageContent":"---\ndescription: Learn how to share components and state between Next.js pages with Layouts.\n---\n\n# Layouts\n\n> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for layouts, nested routes, and uses Server Components by default. Inside `app/`, you can fetch data for your entire application inside layouts, including support for more granular nested layouts (with [colocated data fetching](https://beta.nextjs.org/docs/data-fetching/fundamentals)).\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).\n\nThe React model allows us to deconstruct a [page](/docs/basic-features/pages.md) into a series of components. Many of these components are often reused between pages. For example, you might have the same navigation bar and footer on every page.\n\n```jsx\n// components/layout.js\n\nimport Navbar from './navbar'\nimport Footer from './footer'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":1,"to":17}}}}],["916",{"pageContent":"```jsx\n// components/layout.js\n\nimport Navbar from './navbar'\nimport Footer from './footer'\n\nexport default function Layout({ children }) {\n  return (\n    <>\n      <Navbar />\n      <main>{children}</main>\n      <Footer />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":17,"to":32}}}}],["917",{"pageContent":"Examples\n\n### Single Shared Layout with Custom App\n\nIf you only have one layout for your entire application, you can create a [Custom App](/docs/advanced-features/custom-app.md) and wrap your application with the layout. Since the `<Layout />` component is re-used when changing pages, its component state will be preserved (e.g. input values).\n\n```jsx\n// pages/_app.js\n\nimport Layout from '../components/layout'\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <Layout>\n      <Component {...pageProps} />\n    </Layout>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":34,"to":52}}}}],["918",{"pageContent":"Per-Page Layouts\n\nIf you need multiple layouts, you can add a property `getLayout` to your page, allowing you to return a React component for the layout. This allows you to define the layout on a _per-page basis_. Since we're returning a function, we can have complex nested layouts if desired.\n\n```jsx\n// pages/index.js\n\nimport Layout from '../components/layout'\nimport NestedLayout from '../components/nested-layout'\n\nexport default function Page() {\n  return (\n    /** Your content */\n  )\n}\n\nPage.getLayout = function getLayout(page) {\n  return (\n    <Layout>\n      <NestedLayout>{page}</NestedLayout>\n    </Layout>\n  )\n}\n```\n\n```jsx\n// pages/_app.js\n\nexport default function MyApp({ Component, pageProps }) {\n  // Use the layout defined at the page level, if available\n  const getLayout = Component.getLayout || ((page) => page)\n\n  return getLayout(<Component {...pageProps} />)\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":54,"to":87}}}}],["919",{"pageContent":"When navigating between pages, we want to *persist* page state (input values, scroll position, etc.) for a Single-Page Application (SPA) experience.\n\nThis layout pattern enables state persistence because the React component tree is maintained between page transitions. With the component tree, React can understand which elements have changed to preserve state.\n\n> **Note**: This process is called [reconciliation](https://react.dev/learn/preserving-and-resetting-state), which is how React understands which elements have changed.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":90,"to":94}}}}],["920",{"pageContent":"With TypeScript\n\nWhen using TypeScript, you must first create a new type for your pages which includes a `getLayout` function. Then, you must create a new type for your `AppProps` which overrides the `Component` property to use the previously created type.\n\n```tsx\n// pages/index.tsx\n\nimport type { ReactElement } from 'react'\nimport Layout from '../components/layout'\nimport NestedLayout from '../components/nested-layout'\nimport type { NextPageWithLayout } from './_app'\n\nconst Page: NextPageWithLayout = () => {\n  return <p>hello world</p>\n}\n\nPage.getLayout = function getLayout(page: ReactElement) {\n  return (\n    <Layout>\n      <NestedLayout>{page}</NestedLayout>\n    </Layout>\n  )\n}\n\nexport default Page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":96,"to":120}}}}],["921",{"pageContent":"```tsx\n// pages/_app.tsx\n\nimport type { ReactElement, ReactNode } from 'react'\nimport type { NextPage } from 'next'\nimport type { AppProps } from 'next/app'\n\nexport type NextPageWithLayout<P = {}, IP = P> = NextPage<P, IP> & {\n  getLayout?: (page: ReactElement) => ReactNode\n}\n\ntype AppPropsWithLayout = AppProps & {\n  Component: NextPageWithLayout\n}\n\nexport default function MyApp({ Component, pageProps }: AppPropsWithLayout) {\n  // Use the layout defined at the page level, if available\n  const getLayout = Component.getLayout ?? ((page) => page)\n\n  return getLayout(<Component {...pageProps} />)\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":123,"to":144}}}}],["922",{"pageContent":"Data Fetching\n\nInside your layout, you can fetch data on the client-side using `useEffect` or a library like [SWR](https://swr.vercel.app/). Because this file is not a [Page](/docs/basic-features/pages.md), you cannot use `getStaticProps` or `getServerSideProps` currently.\n\n```jsx\n// components/layout.js\n\nimport useSWR from 'swr'\nimport Navbar from './navbar'\nimport Footer from './footer'\n\nexport default function Layout({ children }) {\n  const { data, error } = useSWR('/api/navigation', fetcher)\n\n  if (error) return <div>Failed to load</div>\n  if (!data) return <div>Loading...</div>\n\n  return (\n    <>\n      <Navbar links={data.links} />\n      <main>{children}</main>\n      <Footer />\n    </>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":146,"to":170}}}}],["923",{"pageContent":"For more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/pages.md\">\n    <b>Pages:</b>\n    <small>Learn more about what pages are in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/custom-app.md\">\n    <b>Custom App:</b>\n    <small>Learn more about how Next.js initializes pages.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/layouts.md","loc":{"lines":{"from":173,"to":187}}}}],["924",{"pageContent":"---\ndescription: Next.js pages are React Components exported in a file in the pages directory. Learn how they work here.\n---\n\n# Pages\n\n> **Note**: Next.js 13 introduces the `app/` directory (beta). This new directory has support for layouts, nested routes, and uses Server Components by default. Inside `app/`, you can fetch data for your entire application inside layouts, including support for more granular nested layouts (with [colocated data fetching](https://beta.nextjs.org/docs/data-fetching/fundamentals)).\n>\n> [Learn more about incrementally adopting `app/`](https://beta.nextjs.org/docs/upgrade-guide).\n\nIn Next.js, a **page** is a [React Component](https://react.dev/learn/your-first-component) exported from a `.js`, `.jsx`, `.ts`, or `.tsx` file in the `pages` directory. Each page is associated with a route based on its file name.\n\n**Example**: If you create `pages/about.js` that exports a React component like below, it will be accessible at `/about`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":1,"to":13}}}}],["925",{"pageContent":"**Example**: If you create `pages/about.js` that exports a React component like below, it will be accessible at `/about`.\n\n```jsx\nexport default function About() {\n  return <div>About</div>\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":13,"to":19}}}}],["926",{"pageContent":"Pages with Dynamic Routes\n\nNext.js supports pages with dynamic routes. For example, if you create a file called `pages/posts/[id].js`, then it will be accessible at `posts/1`, `posts/2`, etc.\n\n> To learn more about dynamic routing, check the [Dynamic Routing documentation](/docs/routing/dynamic-routes.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":21,"to":25}}}}],["927",{"pageContent":"Pre-rendering\n\nBy default, Next.js **pre-renders** every page. This means that Next.js generates HTML for each page in advance, instead of having it all done by client-side JavaScript. Pre-rendering can result in better performance and SEO.\n\nEach generated HTML is associated with minimal JavaScript code necessary for that page. When a page is loaded by the browser, its JavaScript code runs and makes the page fully interactive. (This process is called _hydration_.)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":27,"to":31}}}}],["928",{"pageContent":"Two forms of Pre-rendering\n\nNext.js has two forms of pre-rendering: **Static Generation** and **Server-side Rendering**. The difference is in **when** it generates the HTML for a page.\n\n- [**Static Generation (Recommended)**](#static-generation): The HTML is generated at **build time** and will be reused on each request.\n- [**Server-side Rendering**](#server-side-rendering): The HTML is generated on **each request**.\n\nImportantly, Next.js lets you **choose** which pre-rendering form you'd like to use for each page. You can create a \"hybrid\" Next.js app by using Static Generation for most pages and using Server-side Rendering for others.\n\nWe **recommend** using **Static Generation** over Server-side Rendering for performance reasons. Statically generated pages can be cached by CDN with no extra configuration to boost performance. However, in some cases, Server-side Rendering might be the only option.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":33,"to":42}}}}],["929",{"pageContent":"You can also use **Client-side data fetching** along with Static Generation or Server-side Rendering. That means some parts of a page can be rendered entirely by client side JavaScript. To learn more, take a look at the [Data Fetching](/docs/basic-features/data-fetching/client-side.md) documentation.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":44,"to":44}}}}],["930",{"pageContent":"Static Generation","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":44,"to":44}}}}],["931",{"pageContent":"<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-wordpress\">WordPress Example</a> (<a href=\"https://next-blog-wordpress.vercel.app\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter\">Blog Starter using markdown files</a> (<a href=\"https://next-blog-starter.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-datocms\">DatoCMS Example</a> (<a href=\"https://next-blog-datocms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-takeshape\">TakeShape Example</a> (<a href=\"https://next-blog-takeshape.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-sanity\">Sanity Example</a> (<a href=\"https://next-blog-sanity.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":57,"to":64}}}}],["932",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-sanity\">Sanity Example</a> (<a href=\"https://next-blog-sanity.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prismic\">Prismic Example</a> (<a href=\"https://next-blog-prismic.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-contentful\">Contentful Example</a> (<a href=\"https://next-blog-contentful.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-strapi\">Strapi Example</a> (<a href=\"https://next-blog-strapi.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prepr\">Prepr Example</a> (<a href=\"https://next-blog-prepr.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":64,"to":68}}}}],["933",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-prepr\">Prepr Example</a> (<a href=\"https://next-blog-prepr.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-agilitycms\">Agility CMS Example</a> (<a href=\"https://next-blog-agilitycms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-cosmic\">Cosmic Example</a> (<a href=\"https://next-blog-cosmic.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-buttercms\">ButterCMS Example</a> (<a href=\"https://next-blog-buttercms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-storyblok\">Storyblok Example</a> (<a href=\"https://next-blog-storyblok.vercel.app/\">Demo</a>)</li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":68,"to":72}}}}],["934",{"pageContent":"<li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-storyblok\">Storyblok Example</a> (<a href=\"https://next-blog-storyblok.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-graphcms\">GraphCMS Example</a> (<a href=\"https://next-blog-graphcms.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-kontent\">Kontent Example</a> (<a href=\"https://next-blog-kontent.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-builder-io\">Builder.io Example</a> (<a href=\"https://cms-builder-io.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-tina\">TinaCMS Example</a> (<a href=\"https://cms-tina-example.vercel.app/\">Demo</a>)</li>\n    <li><a href=\"https://static-tweet.vercel.app/\">Static Tweet (Demo)</a></li>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":72,"to":77}}}}],["935",{"pageContent":"<li><a href=\"https://static-tweet.vercel.app/\">Static Tweet (Demo)</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/cms-enterspeed\">Enterspeed Example</a> (<a href=\"https://next-blog-demo.enterspeed.com/\">Demo</a>)</li>\n  </ul>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":77,"to":80}}}}],["936",{"pageContent":"If a page uses **Static Generation**, the page HTML is generated at **build time**. That means in production, the page HTML is generated when you run `next build` . This HTML will then be reused on each request. It can be cached by a CDN.\n\nIn Next.js, you can statically generate pages **with or without data**. Let's take a look at each case.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":82,"to":84}}}}],["937",{"pageContent":"Static Generation without data\n\nBy default, Next.js pre-renders pages using Static Generation without fetching data. Here's an example:\n\n```jsx\nfunction About() {\n  return <div>About</div>\n}\n\nexport default About\n```\n\nNote that this page does not need to fetch any external data to be pre-rendered. In cases like this, Next.js generates a single HTML file per page during build time.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":86,"to":98}}}}],["938",{"pageContent":"Static Generation with data\n\nSome pages require fetching external data for pre-rendering. There are two scenarios, and one or both might apply. In each case, you can use these functions that Next.js provides:\n\n1. Your page **content** depends on external data: Use `getStaticProps`.\n2. Your page **paths** depend on external data: Use `getStaticPaths` (usually in addition to `getStaticProps`).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":100,"to":105}}}}],["939",{"pageContent":"Scenario 1: Your page **content** depends on external data\n\n**Example**: Your blog page might need to fetch the list of blog posts from a CMS (content management system).\n\n```jsx\n// TODO: Need to fetch `posts` (by calling some API endpoint)\n//       before this page can be pre-rendered.\nexport default function Blog({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li>{post.title}</li>\n      ))}\n    </ul>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":107,"to":122}}}}],["940",{"pageContent":"To fetch this data on pre-render, Next.js allows you to `export` an `async` function called `getStaticProps` from the same file. This function gets called at build time and lets you pass fetched data to the page's `props` on pre-render.\n\n```jsx\nexport default function Blog({ posts }) {\n  // Render posts...\n}\n\n// This function gets called at build time\nexport async function getStaticProps() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // By returning { props: { posts } }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      posts,\n    },\n  }\n}\n```\n\nTo learn more about how `getStaticProps` works, check out the [Data Fetching documentation](/docs/basic-features/data-fetching/get-static-props.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":125,"to":148}}}}],["941",{"pageContent":"Scenario 2: Your page paths depend on external data\n\nNext.js allows you to create pages with **dynamic routes**. For example, you can create a file called `pages/posts/[id].js` to show a single blog post based on `id`. This will allow you to show a blog post with `id: 1` when you access `posts/1`.\n\n> To learn more about dynamic routing, check the [Dynamic Routing documentation](/docs/routing/dynamic-routes.md).\n\nHowever, which `id` you want to pre-render at build time might depend on external data.\n\n**Example**: suppose that you've only added one blog post (with `id: 1`) to the database. In this case, you'd only want to pre-render `posts/1` at build time.\n\nLater, you might add the second post with `id: 2`. Then you'd want to pre-render `posts/2` as well.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":150,"to":160}}}}],["942",{"pageContent":"Later, you might add the second post with `id: 2`. Then you'd want to pre-render `posts/2` as well.\n\nSo your page **paths** that are pre-rendered depend on external data**.** To handle this, Next.js lets you `export` an `async` function called `getStaticPaths` from a dynamic page (`pages/posts/[id].js` in this case). This function gets called at build time and lets you specify which paths you want to pre-render.\n\n```jsx\n// This function gets called at build time\nexport async function getStaticPaths() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // Get the paths we want to pre-render based on posts\n  const paths = posts.map((post) => ({\n    params: { id: post.id },\n  }))\n\n  // We'll pre-render only these paths at build time.\n  // { fallback: false } means other routes should 404.\n  return { paths, fallback: false }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":160,"to":179}}}}],["943",{"pageContent":"Also in `pages/posts/[id].js`, you need to export `getStaticProps` so that you can fetch the data about the post with this `id` and use it to pre-render the page:\n\n```jsx\nexport default function Post({ post }) {\n  // Render post...\n}\n\nexport async function getStaticPaths() {\n  // ...\n}\n\n// This also gets called at build time\nexport async function getStaticProps({ params }) {\n  // params contains the post `id`.\n  // If the route is like /posts/1, then params.id is 1\n  const res = await fetch(`https://.../posts/${params.id}`)\n  const post = await res.json()\n\n  // Pass post data to the page via props\n  return { props: { post } }\n}\n```\n\nTo learn more about how `getStaticPaths` works, check out the [Data Fetching documentation](/docs/basic-features/data-fetching/get-static-paths.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":182,"to":205}}}}],["944",{"pageContent":"When should I use Static Generation?\n\nWe recommend using **Static Generation** (with and without data) whenever possible because your page can be built once and served by CDN, which makes it much faster than having a server render the page on every request.\n\nYou can use Static Generation for many types of pages, including:\n\n- Marketing pages\n- Blog posts and portfolios\n- E-commerce product listings\n- Help and documentation\n\nYou should ask yourself: \"Can I pre-render this page **ahead** of a user's request?\" If the answer is yes, then you should choose Static Generation.\n\nOn the other hand, Static Generation is **not** a good idea if you cannot pre-render a page ahead of a user's request. Maybe your page shows frequently updated data, and the page content changes on every request.\n\nIn cases like this, you can do one of the following:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":207,"to":222}}}}],["945",{"pageContent":"In cases like this, you can do one of the following:\n\n- Use Static Generation with **Client-side data fetching:** You can skip pre-rendering some parts of a page and then use client-side JavaScript to populate them. To learn more about this approach, check out the [Data Fetching documentation](/docs/basic-features/data-fetching/client-side.md).\n- Use **Server-Side Rendering:** Next.js pre-renders a page on each request. It will be slower because the page cannot be cached by a CDN, but the pre-rendered page will always be up-to-date. We'll talk about this approach below.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":222,"to":225}}}}],["946",{"pageContent":"Server-side Rendering\n\n> Also referred to as \"SSR\" or \"Dynamic Rendering\".\n\nIf a page uses **Server-side Rendering**, the page HTML is generated on **each request**.\n\nTo use Server-side Rendering for a page, you need to `export` an `async` function called `getServerSideProps`. This function will be called by the server on every request.\n\nFor example, suppose that your page needs to pre-render frequently updated data (fetched from an external API). You can write `getServerSideProps` which fetches this data and passes it to `Page` like below:\n\n```jsx\nexport default function Page({ data }) {\n  // Render data...\n}\n\n// This gets called on every request\nexport async function getServerSideProps() {\n  // Fetch data from external API\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  // Pass data to the page via props\n  return { props: { data } }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":227,"to":250}}}}],["947",{"pageContent":"As you can see, `getServerSideProps` is similar to `getStaticProps`, but the difference is that `getServerSideProps` is run on every request instead of on build time.\n\nTo learn more about how `getServerSideProps` works, check out our [Data Fetching documentation](/docs/basic-features/data-fetching/get-server-side-props.md)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":253,"to":255}}}}],["948",{"pageContent":"Summary\n\nWe've discussed two forms of pre-rendering for Next.js.\n\n- **Static Generation (Recommended):** The HTML is generated at **build time** and will be reused on each request. To make a page use Static Generation, either export the page component, or export `getStaticProps` (and `getStaticPaths` if necessary). It's great for pages that can be pre-rendered ahead of a user's request. You can also use it with Client-side Rendering to bring in additional data.\n- **Server-side Rendering:** The HTML is generated on **each request**. To make a page use Server-side Rendering, export `getServerSideProps`. Because Server-side Rendering results in slower performance than Static Generation, use this only if absolutely necessary.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":257,"to":262}}}}],["949",{"pageContent":"Learn more\n\nWe recommend you to read the following sections next:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/data-fetching/overview.md\">\n    <b>Data Fetching:</b>\n    <small>Learn more about data fetching in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/advanced-features/preview-mode.md\">\n    <b>Preview Mode:</b>\n    <small>Learn more about the preview mode in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/routing/introduction.md\">\n    <b>Routing:</b>\n    <small>Learn more about routing in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/typescript.md#pages\">\n    <b>TypeScript:</b>\n    <small>Add TypeScript to your pages.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/pages.md","loc":{"lines":{"from":264,"to":294}}}}],["950",{"pageContent":"---\ndescription: Optimize your third-party scripts with the built-in `next/script` component.\n---\n\n# Optimizing Scripts\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/script-component\">Script Component</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-google-tag-manager\">Google Tag Manager</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-google-analytics\">Google Analytics</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-facebook-pixel\">Facebook Pixel</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-clerk\">Clerk</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-segment-analytics\">Segment Analytics</a></li>\n  </ul>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":1,"to":17}}}}],["951",{"pageContent":"The **Script component**, [`next/script`](/docs/api-reference/next/script.md), allows you to optimally load third-party scripts anywhere in your Next.js application. It is an extension of the HTML `<script>` element and enables you to choose between multiple loading strategies to fit your use case.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":19,"to":19}}}}],["952",{"pageContent":"Overview\n\nWebsites often use third-party scripts to add functionality like analytics, ads, customer support widgets, and consent management. However, this can introduce problems that impact both user and developer experience:\n\n- Some third-party scripts decrease loading performance and can degrade the user experience, especially if they are blocking the page content from being displayed.\n- Developers are often unsure where and how to load third-party scripts in an application without impacting page performance.\n\nBrowsers load and execute `<script>` elements based on the order of placement in HTML and the usage of `async` and `defer` attributes. However, using the native `<script>` element creates some challenges:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":21,"to":28}}}}],["953",{"pageContent":"- As your application grows in size and complexity, it becomes increasingly difficult to manage the loading order of third-party scripts.\n- [Streaming and Suspense](https://beta.nextjs.org/docs/data-fetching/streaming-and-suspense) improve page performance by rendering and hydrating new content as soon as possible, but `<script>` attributes (like `defer`) are incompatible without additional work.\n\nThe Script component solves these problems by providing a declarative API for loading third-party scripts. It provides a set of built-in loading strategies that can be used to optimize the loading sequence of scripts with support for streaming. Each of the strategies provided by the Script component uses the best possible combination of React and Web APIs to ensure that scripts are loaded with minimal impact to page performance.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":30,"to":33}}}}],["954",{"pageContent":"Usage\n\nTo get started, import the [`next/script`](/docs/api-reference/next/script.md) component:\n\n```jsx\nimport Script from 'next/script'\n```\n\n### Page Scripts\n\nTo load a third-party script in a single route, import `next/script` and include the script directly in your page component:\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Dashboard() {\n  return (\n    <>\n      <Script src=\"https://example.com/script.js\" />\n    </>\n  )\n}\n```\n\nThe script will only be fetched and executed when this specific page is loaded on the browser.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":35,"to":59}}}}],["955",{"pageContent":"Application Scripts\n\nTo load a third-party script for all routes, import `next/script` and include the script directly in `pages/_app.js`:\n\n```jsx\nimport Script from 'next/script'\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <>\n      <Script src=\"https://example.com/script.js\" />\n      <Component {...pageProps} />\n    </>\n  )\n}\n```\n\nThis script will load and execute when _any_ route in your application is accessed. Next.js will ensure the script will **only load once**, even if a user navigates between multiple pages.\n\n> **Note**: You should rarely need to load a third-party script for every page of your application. We recommend only including third-party scripts in specific pages in order to minimize any unnecessary impact to performance.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":61,"to":80}}}}],["956",{"pageContent":"Strategy\n\nAlthough the default behavior of `next/script` allows you to load third-party scripts in any page, you can fine-tune its loading behavior by using the `strategy` property:\n\n- `beforeInteractive`: Load the script before any Next.js code and before any page hydration occurs.\n- `afterInteractive`: (**default**) Load the script early but after some hydration on the page occurs.\n- `lazyOnload`: Load the script later during browser idle time.\n- `worker`: (experimental) Load the script in a web worker.\n\nRefer to the [`next/script`](/docs/api-reference/next/script.md#strategy) API reference documentation to learn more about each strategy and their use cases.\n\n> **Note**: Once a `next/script` component has been loaded by the browser, it will stay in the DOM and client-side navigations won't re-execute the script.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":82,"to":93}}}}],["957",{"pageContent":"Offloading Scripts To A Web Worker (experimental)\n\n> **Note:** The `worker` strategy is not yet stable and does not yet work with the [`app/`](https://beta.nextjs.org/docs/routing/defining-routes) directory. Use with caution.\n\nScripts that use the `worker` strategy are offloaded and executed in a web worker with [Partytown](https://partytown.builder.io/). This can improve the performance of your site by dedicating the main thread to the rest of your application code.\n\nThis strategy is still experimental and can only be used if the `nextScriptWorkers` flag is enabled in `next.config.js`:\n\n```js\nmodule.exports = {\n  experimental: {\n    nextScriptWorkers: true,\n  },\n}\n```\n\nThen, run `next` (normally `npm run dev` or `yarn dev`) and Next.js will guide you through the installation of the required packages to finish the setup:\n\n```bash\nnpm run dev\n\n# You'll see instructions like these:\n#\n# Please install Partytown by running:\n#\n#         npm install @builder.io/partytown\n#\n# ...","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":95,"to":122}}}}],["958",{"pageContent":"Once setup is complete, defining `strategy=\"worker\"` will automatically instantiate Partytown in your application and offload the script to a web worker.\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Home() {\n  return (\n    <>\n      <Script src=\"https://example.com/script.js\" strategy=\"worker\" />\n    </>\n  )\n}\n```\n\nThere are a number of trade-offs that need to be considered when loading a third-party script in a web worker. Please see Partytown's [tradeoffs](https://partytown.builder.io/trade-offs) documentation for more information.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":125,"to":139}}}}],["959",{"pageContent":"Inline Scripts\n\nInline scripts, or scripts not loaded from an external file, are also supported by the Script component. They can be written by placing the JavaScript within curly braces:\n\n```jsx\n<Script id=\"show-banner\" strategy=\"afterInteractive\">\n  {`document.getElementById('banner').classList.remove('hidden')`}\n</Script>\n```\n\nOr by using the `dangerouslySetInnerHTML` property:\n\n```jsx\n<Script\n  id=\"show-banner\"\n  strategy=\"afterInteractive\"\n  dangerouslySetInnerHTML={{\n    __html: `document.getElementById('banner').classList.remove('hidden')`,\n  }}\n/>\n```\n\n> **Note**: An `id` property must be assigned for inline scripts in order for Next.js to track and optimize the script.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":141,"to":163}}}}],["960",{"pageContent":"Executing Additional Code\n\nEvent handlers can be used with the Script component to execute additional code after a certain event occurs:\n\n- `onLoad`: Execute code after the script has finished loading.\n- `onReady`: Execute code after the script has finished loading and every time the component is mounted.\n- `onError`: Execute code if the script fails to load.\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n        onLoad={() => {\n          console.log('Script has loaded')\n        }}\n      />\n    </>\n  )\n}\n```\n\nRefer to the [`next/script`](/docs/api-reference/next/script.md#onload) API reference to learn more about each event handler and view examples.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":165,"to":190}}}}],["961",{"pageContent":"Additional Attributes\n\nThere are many DOM attributes that can be assigned to a `<script>` element that are not used by the Script component, like [`nonce`](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce) or [custom data attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/data-*). Including any additional attributes will automatically forward it to the final, optimized `<script>` element that is included in the HTML.\n\n```jsx\nimport Script from 'next/script'\n\nexport default function Page() {\n  return (\n    <>\n      <Script\n        src=\"https://example.com/script.js\"\n        id=\"example-script\"\n        nonce=\"XUENAJFW\"\n        data-test=\"script\"\n      />\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":192,"to":211}}}}],["962",{"pageContent":"Next Steps\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/script.md\">\n    <b>next/script API Reference</b>\n    <small>View the API for the Script component.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/script.md","loc":{"lines":{"from":213,"to":220}}}}],["963",{"pageContent":"---\ndescription: Next.js allows you to serve static files, like images, in the public directory. You can learn how it works here.\n---\n\n# Static File Serving\n\nNext.js can serve static files, like images, under a folder called `public` in the root directory. Files inside `public` can then be referenced by your code starting from the base URL (`/`).\n\nFor example, if you add `me.png` inside `public`, the following code will access the image:\n\n```jsx\nimport Image from 'next/image'\n\nfunction Avatar() {\n  return <Image src=\"/me.png\" alt=\"me\" width=\"64\" height=\"64\" />\n}\n\nexport default Avatar","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/static-file-serving.md","loc":{"lines":{"from":1,"to":18}}}}],["964",{"pageContent":"> Note: `next/image` requires Next.js 10 or later.\n\nThis folder is also useful for `robots.txt`, `favicon.ico`, Google Site Verification, and any other static files (including `.html`)!\n\n> **Note**: Be sure the directory is named `public`. The name cannot be changed and is the only directory used to serve static assets.\n\n> **Note**: Be sure to not have a static file with the same name as a file in the `pages/` directory, as this will result in an error.\n>\n> Read more: <https://nextjs.org/docs/messages/conflicting-public-file-page>\n\n> **Note**: Only assets that are in the `public` directory at [build time](/docs/api-reference/cli.md#build) will be served by Next.js. Files added at runtime won't be available. We recommend using a third party service like [AWS S3](https://aws.amazon.com/s3/) for persistent file storage.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/static-file-serving.md","loc":{"lines":{"from":21,"to":31}}}}],["965",{"pageContent":"---\ndescription: Browser support and which JavaScript features are supported by Next.js.\n---\n\n# Supported Browsers and Features\n\nNext.js supports **modern browsers** with zero configuration.\n\n- Chrome 64+\n- Edge 79+\n- Firefox 67+\n- Opera 51+\n- Safari 12+\n\n## Browserslist\n\nIf you would like to target specific browsers or features, Next.js supports [Browserslist](https://browsersl.ist) configuration in your `package.json` file. Next.js uses the following Browserslist configuration by default:\n\n```json\n{\n  \"browserslist\": [\n    \"chrome 64\",\n    \"edge 79\",\n    \"firefox 67\",\n    \"opera 51\",\n    \"safari 12\"\n  ]\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/supported-browsers-features.md","loc":{"lines":{"from":1,"to":29}}}}],["966",{"pageContent":"Polyfills\n\nWe inject [widely used polyfills](https://github.com/vercel/next.js/blob/canary/packages/next-polyfill-nomodule/src/index.js), including:\n\n- [**fetch()**](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) — Replacing: `whatwg-fetch` and `unfetch`.\n- [**URL**](https://developer.mozilla.org/en-US/docs/Web/API/URL) — Replacing: the [`url` package (Node.js API)](https://nodejs.org/api/url.html).\n- [**Object.assign()**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign) — Replacing: `object-assign`, `object.assign`, and `core-js/object/assign`.\n\nIf any of your dependencies includes these polyfills, they’ll be eliminated automatically from the production build to avoid duplication.\n\nIn addition, to reduce bundle size, Next.js will only load these polyfills for browsers that require them. The majority of the web traffic globally will not download these polyfills.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/supported-browsers-features.md","loc":{"lines":{"from":31,"to":41}}}}],["967",{"pageContent":"Custom Polyfills\n\nIf your own code or any external npm dependencies require features not supported by your target browsers (such as IE 11), you need to add polyfills yourself.\n\nIn this case, you should add a top-level import for the **specific polyfill** you need in your [Custom `<App>`](/docs/advanced-features/custom-app.md) or the individual component.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/supported-browsers-features.md","loc":{"lines":{"from":43,"to":47}}}}],["968",{"pageContent":"JavaScript Language Features\n\nNext.js allows you to use the latest JavaScript features out of the box. In addition to [ES6 features](https://github.com/lukehoban/es6features), Next.js also supports:\n\n- [Async/await](https://github.com/tc39/ecmascript-asyncawait) (ES2017)\n- [Object Rest/Spread Properties](https://github.com/tc39/proposal-object-rest-spread) (ES2018)\n- [Dynamic `import()`](https://github.com/tc39/proposal-dynamic-import) (ES2020)\n- [Optional Chaining](https://github.com/tc39/proposal-optional-chaining) (ES2020)\n- [Nullish Coalescing](https://github.com/tc39/proposal-nullish-coalescing) (ES2020)\n- [Class Fields](https://github.com/tc39/proposal-class-fields) and [Static Properties](https://github.com/tc39/proposal-static-class-features) (part of stage 3 proposal)\n- and more!","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/supported-browsers-features.md","loc":{"lines":{"from":49,"to":59}}}}],["969",{"pageContent":"Server-Side Polyfills\n\nIn addition to `fetch()` on the client-side, Next.js polyfills `fetch()` in the Node.js environment. You can use `fetch()` in your server code (such as `getStaticProps`/`getServerSideProps`) without using polyfills such as `isomorphic-unfetch` or `node-fetch`.\n\n### TypeScript Features\n\nNext.js has built-in TypeScript support. [Learn more here](/docs/basic-features/typescript.md).\n\n### Customizing Babel Config (Advanced)\n\nYou can customize babel configuration. [Learn more here](/docs/advanced-features/customizing-babel-config.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/supported-browsers-features.md","loc":{"lines":{"from":61,"to":71}}}}],["970",{"pageContent":"---\ndescription: Next.js supports TypeScript by default and has built-in types for pages and the API. You can get started with TypeScript in Next.js here.\n---\n\n# TypeScript\n\n<details>\n  <summary><b>Version History</b></summary>\n\n| Version   | Changes                                                                                                                              |\n| --------- | ------------------------------------------------------------------------------------------------------------------------------------ |\n| `v12.0.0` | [SWC](https://nextjs.org/docs/advanced-features/compiler) is now used by default to compile TypeScript and TSX for faster builds.    |\n| `v10.2.1` | [Incremental type checking](https://www.typescriptlang.org/tsconfig#incremental) support added when enabled in your `tsconfig.json`. |\n\n</details>\n\nNext.js provides an integrated [TypeScript](https://www.typescriptlang.org/) experience, including zero-configuration set up and built-in types for Pages, APIs, and more.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":1,"to":17}}}}],["971",{"pageContent":"</details>\n\nNext.js provides an integrated [TypeScript](https://www.typescriptlang.org/) experience, including zero-configuration set up and built-in types for Pages, APIs, and more.\n\n- [Clone and deploy the TypeScript starter](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fwith-typescript&project-name=with-typescript&repository-name=with-typescript&utm_source=next-site&utm_medium=docs&utm_campaign=next-website)\n- [View an example application](https://github.com/vercel/next.js/tree/canary/examples/with-typescript)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":17,"to":22}}}}],["972",{"pageContent":"`create-next-app` support\n\nYou can create a TypeScript project with [`create-next-app`](https://nextjs.org/docs/api-reference/create-next-app) using the `--ts, --typescript` flag like so:\n\n```\nnpx create-next-app@latest --ts\n# or\nyarn create next-app --typescript\n# or\npnpm create next-app --ts\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":24,"to":34}}}}],["973",{"pageContent":"Existing projects\n\nTo get started in an existing project, create an empty `tsconfig.json` file in\nthe root folder:\n\n```bash\ntouch tsconfig.json","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":36,"to":42}}}}],["974",{"pageContent":"Next.js will automatically configure this file with default values. Providing your own `tsconfig.json` with custom [compiler options](https://www.typescriptlang.org/docs/handbook/compiler-options.html) is also supported.\n\nYou can also provide a relative path to a tsconfig.json file by setting `typescript.tsconfigPath` prop inside your `next.config.js` file.\n\nStarting in `v12.0.0`, Next.js uses [SWC](https://nextjs.org/docs/advanced-features/compiler) by default to compile TypeScript and TSX for faster builds.\n\n> Next.js will use Babel to handle TypeScript if `.babelrc` is present. This has some [caveats](https://babeljs.io/docs/en/babel-plugin-transform-typescript#caveats) and some [compiler options are handled differently](https://babeljs.io/docs/en/babel-plugin-transform-typescript#typescript-compiler-options).\n\nThen, run `next` (normally `npm run dev` or `yarn dev`) and Next.js will guide you through the installation of the required packages to finish the setup:\n\n```bash\nnpm run dev","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":45,"to":56}}}}],["975",{"pageContent":"Then, run `next` (normally `npm run dev` or `yarn dev`) and Next.js will guide you through the installation of the required packages to finish the setup:\n\n```bash\nnpm run dev\n\n# You'll see instructions like these:\n#\n# Please install TypeScript, @types/react, and @types/node by running:\n#\n#         yarn add --dev typescript @types/react @types/node\n#\n# ...","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":56,"to":67}}}}],["976",{"pageContent":"You're now ready to start converting files from `.js` to `.tsx` and leveraging the benefits of TypeScript!\n\n> A file named `next-env.d.ts` will be created at the root of your project. This file ensures Next.js types are picked up by the TypeScript compiler. **You should not remove it or edit it** as it can change at any time. This file should not be committed and should be ignored by version control (e.g. inside your `.gitignore` file).\n\n> TypeScript `strict` mode is turned off by default. When you feel comfortable with TypeScript, it's recommended to turn it on in your `tsconfig.json`.\n\n> Instead of editing `next-env.d.ts`, you can include additional types by adding a new file e.g. `additional.d.ts` and then referencing it in the [`include`](https://www.typescriptlang.org/tsconfig#include) array in your `tsconfig.json`.\n\nBy default, Next.js will do type checking as part of `next build`. We recommend using code editor type checking during development.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":70,"to":78}}}}],["977",{"pageContent":"By default, Next.js will do type checking as part of `next build`. We recommend using code editor type checking during development.\n\nIf you want to silence the error reports, refer to the documentation for [Ignoring TypeScript errors](/docs/api-reference/next.config.js/ignoring-typescript-errors.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":78,"to":80}}}}],["978",{"pageContent":"Static Generation and Server-side Rendering\n\nFor `getStaticProps`, `getStaticPaths`, and `getServerSideProps`, you can use the `GetStaticProps`, `GetStaticPaths`, and `GetServerSideProps` types respectively:\n\n```ts\nimport { GetStaticProps, GetStaticPaths, GetServerSideProps } from 'next'\n\nexport const getStaticProps: GetStaticProps = async (context) => {\n  // ...\n}\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n  // ...\n}\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n  // ...\n}\n```\n\n> If you're using `getInitialProps`, you can [follow the directions on this page](/docs/api-reference/data-fetching/get-initial-props.md#typescript).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":82,"to":102}}}}],["979",{"pageContent":"API Routes\n\nThe following is an example of how to use the built-in types for API routes:\n\n```ts\nimport type { NextApiRequest, NextApiResponse } from 'next'\n\nexport default function handler(req: NextApiRequest, res: NextApiResponse) {\n  res.status(200).json({ name: 'John Doe' })\n}\n```\n\nYou can also type the response data:\n\n```ts\nimport type { NextApiRequest, NextApiResponse } from 'next'\n\ntype Data = {\n  name: string\n}\n\nexport default function handler(\n  req: NextApiRequest,\n  res: NextApiResponse<Data>\n) {\n  res.status(200).json({ name: 'John Doe' })\n}\n```\n\n## Custom `App`\n\nIf you have a [custom `App`](/docs/advanced-features/custom-app.md), you can use the built-in type `AppProps` and change file name to `./pages/_app.tsx` like so:\n\n```ts\nimport type { AppProps } from 'next/app'\n\nexport default function MyApp({ Component, pageProps }: AppProps) {\n  return <Component {...pageProps} />\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":104,"to":143}}}}],["980",{"pageContent":"Path aliases and baseUrl\n\nNext.js automatically supports the `tsconfig.json` `\"paths\"` and `\"baseUrl\"` options.\n\nYou can learn more about this feature on the [Module Path aliases documentation](/docs/advanced-features/module-path-aliases.md).\n\n## Type checking next.config.js\n\nThe `next.config.js` file must be a JavaScript file as it does not get parsed by Babel or TypeScript, however you can add some type checking in your IDE using JSDoc as below:\n\n```js\n// @ts-check\n\n/**\n * @type {import('next').NextConfig}\n **/\nconst nextConfig = {\n  /* config options here */\n}\n\nmodule.exports = nextConfig\n```\n\n## Incremental type checking\n\nSince `v10.2.1` Next.js supports [incremental type checking](https://www.typescriptlang.org/tsconfig#incremental) when enabled in your `tsconfig.json`, this can help speed up type checking in larger applications.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":145,"to":170}}}}],["981",{"pageContent":"Minimum TypeScript Version\n\nIt is highly recommended to be on at least `v4.5.2` of TypeScript to get syntax features such as [type modifiers on import names](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#type-on-import-names) and [performance improvements](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#real-path-sync-native).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":172,"to":174}}}}],["982",{"pageContent":"Ignoring TypeScript Errors\n\nNext.js fails your **production build** (`next build`) when TypeScript errors are present in your project.\n\nIf you'd like Next.js to dangerously produce production code even when your application has errors, you can disable the built-in type checking step.\n\nIf disabled, be sure you are running type checks as part of your build or deploy process, otherwise this can be very dangerous.\n\nOpen `next.config.js` and enable the `ignoreBuildErrors` option in the `typescript` config:\n\n```js\nmodule.exports = {\n  typescript: {\n    // !! WARN !!\n    // Dangerously allow production builds to successfully complete even if\n    // your project has type errors.\n    // !! WARN !!\n    ignoreBuildErrors: true,\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/basic-features/typescript.md","loc":{"lines":{"from":176,"to":196}}}}],["983",{"pageContent":"---\ndescription: Learn how to deploy your Next.js app to production, either managed or self-hosted.\n---\n\n# Deployment\n\nCongratulations, you are ready to deploy your Next.js application to production. This document will show how to deploy either managed or self-hosted using the [Next.js Build API](#nextjs-build-api).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":1,"to":7}}}}],["984",{"pageContent":"Next.js Build API\n\n`next build` generates an optimized version of your application for production. This standard output includes:\n\n- HTML files for pages using `getStaticProps` or [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md)\n- CSS files for global styles or for individually scoped styles\n- JavaScript for pre-rendering dynamic content from the Next.js server\n- JavaScript for interactivity on the client-side through React\n\nThis output is generated inside the `.next` folder:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":9,"to":18}}}}],["985",{"pageContent":"- `.next/static/chunks/pages` – Each JavaScript file inside this folder relates to the route with the same name. For example, `.next/static/chunks/pages/about.js` would be the JavaScript file loaded when viewing the `/about` route in your application\n- `.next/static/media` – Statically imported images from `next/image` are hashed and copied here\n- `.next/static/css` – Global CSS files for all pages in your application\n- `.next/server/pages` – The HTML and JavaScript entry points prerendered from the server. The `.nft.json` files are created when [Output File Tracing](/docs/advanced-features/output-file-tracing.md) is enabled and contain all the file paths that depend on a given page.\n- `.next/server/chunks` – Shared JavaScript chunks used in multiple places throughout your application\n- `.next/cache` – Output for the build cache and cached images, responses, and pages from the Next.js server. Using a cache helps decrease build times and improve performance of loading images","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":20,"to":25}}}}],["986",{"pageContent":"All JavaScript code inside `.next` has been **compiled** and browser bundles have been **minified** to help achieve the best performance and support [all modern browsers](/docs/basic-features/supported-browsers-features.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":27,"to":27}}}}],["987",{"pageContent":"Managed Next.js with Vercel\n\n[Vercel](https://vercel.com?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) is the fastest way to deploy your Next.js application with zero configuration.\n\nWhen deploying to Vercel, the platform [automatically detects Next.js](https://vercel.com/solutions/nextjs?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), runs `next build`, and optimizes the build output for you, including:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":29,"to":33}}}}],["988",{"pageContent":"- Persisting cached assets across deployments if unchanged\n- [Immutable deployments](https://vercel.com/features/previews?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) with a unique URL for every commit\n- [Pages](/docs/basic-features/pages.md) are automatically statically optimized, if possible\n- Assets (JavaScript, CSS, images, fonts) are compressed and served from a [Global Edge Network](https://vercel.com/features/infrastructure?utm_source=next-site&utm_medium=docs&utm_campaign=next-website)\n- [API Routes](/docs/api-routes/introduction.md) are automatically optimized as isolated [Serverless Functions](https://vercel.com/features/infrastructure?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) that can scale infinitely\n- [Middleware](/docs/middleware.md) is automatically optimized as [Edge Functions](https://vercel.com/features/edge-functions?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) that have zero cold starts and boot instantly","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":35,"to":40}}}}],["989",{"pageContent":"In addition, Vercel provides features like:\n\n- Automatic performance monitoring with [Next.js Analytics](https://vercel.com/analytics?utm_source=next-site&utm_medium=docs&utm_campaign=next-website)\n- Automatic HTTPS and SSL certificates\n- Automatic CI/CD (through GitHub, GitLab, Bitbucket, etc.)\n- Support for [Environment Variables](https://vercel.com/docs/environment-variables?utm_source=next-site&utm_medium=docs&utm_campaign=next-website)\n- Support for [Custom Domains](https://vercel.com/docs/custom-domains?utm_source=next-site&utm_medium=docs&utm_campaign=next-website)\n- Support for [Image Optimization](/docs/basic-features/image-optimization.md) with `next/image`\n- Instant global deployments via `git push`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":42,"to":50}}}}],["990",{"pageContent":"[Deploy a Next.js application to Vercel](https://vercel.com/new/git/external?repository-url=https://github.com/vercel/next.js/tree/canary/examples/hello-world&project-name=hello-world&repository-name=hello-world&utm_source=next-site&utm_medium=docs&utm_campaign=next-website) for free to try it out.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":52,"to":52}}}}],["991",{"pageContent":"Self-Hosting\n\nYou can self-host Next.js with support for all features using Node.js or Docker. You can also do a Static HTML Export, which [has some limitations](/docs/advanced-features/static-html-export.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":54,"to":56}}}}],["992",{"pageContent":"Node.js Server\n\nNext.js can be deployed to any hosting provider that supports Node.js. For example, [AWS EC2](https://aws.amazon.com/ec2/) or a [DigitalOcean Droplet](https://www.digitalocean.com/products/droplets/).\n\nFirst, ensure your `package.json` has the `\"build\"` and `\"start\"` scripts:\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\"\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":58,"to":71}}}}],["993",{"pageContent":"Then, run `npm run build` to build your application. Finally, run `npm run start` to start the Node.js server. This server supports all features of Next.js.\n\n> If you are using [`next/image`](/docs/basic-features/image-optimization.md), consider adding `sharp` for more performant [Image Optimization](/docs/basic-features/image-optimization.md) in your production environment by running `npm install sharp` in your project directory. On Linux platforms, `sharp` may require [additional configuration](https://sharp.pixelplumbing.com/install#linux-memory-allocator) to prevent excessive memory usage.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":74,"to":76}}}}],["994",{"pageContent":"Docker Image\n\nNext.js can be deployed to any hosting provider that supports [Docker](https://www.docker.com/) containers. You can use this approach when deploying to container orchestrators such as [Kubernetes](https://kubernetes.io/) or [HashiCorp Nomad](https://www.nomadproject.io/), or when running inside a single node in any cloud provider.\n\n1. [Install Docker](https://docs.docker.com/get-docker/) on your machine\n1. Clone the [with-docker](https://github.com/vercel/next.js/tree/canary/examples/with-docker) example\n1. Build your container: `docker build -t nextjs-docker .`\n1. Run your container: `docker run -p 3000:3000 nextjs-docker`\n\nIf you need to use different Environment Variables across multiple environments, check out our [with-docker-multi-env](https://github.com/vercel/next.js/tree/canary/examples/with-docker-multi-env) example.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":78,"to":87}}}}],["995",{"pageContent":"Static HTML Export\n\nIf you’d like to do a static HTML export of your Next.js app, follow the directions on our [Static HTML Export documentation](/docs/advanced-features/static-html-export.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":89,"to":91}}}}],["996",{"pageContent":"Other Services\n\nThe following services support Next.js `v12+`. Below, you’ll find examples or guides to deploy Next.js to each service.\n\n### Managed Server\n\n- [AWS Copilot](https://aws.github.io/copilot-cli/)\n- [Digital Ocean App Platform](https://docs.digitalocean.com/tutorials/app-nextjs-deploy/)\n- [Google Cloud Run](https://github.com/vercel/next.js/tree/canary/examples/with-docker)\n- [Heroku](https://elements.heroku.com/buildpacks/mars/heroku-nextjs)\n- [Railway](https://docs.railway.app/getting-started)\n- [Render](https://render.com/docs/deploy-nextjs-app)\n\n> **Note:** There are also managed platforms that allow you to use a Dockerfile as shown in the [example above](/docs/deployment.md#docker-image).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":93,"to":106}}}}],["997",{"pageContent":"Static Only\n\nThe following services only support deploying Next.js using [`output: 'export'`](/docs/advanced-features/static-html-export.md).\n\n- [GitHub Pages](https://github.com/vercel/next.js/tree/canary/examples/github-pages)\n\nYou can also manually deploy the output from [`output: 'export'`](/docs/advanced-features/static-html-export.md) to any static hosting provider, often through your CI/CD pipeline like GitHub Actions, Jenkins, AWS CodeBuild, Circle CI, Azure Pipelines, and more.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":108,"to":114}}}}],["998",{"pageContent":"Serverless\n\n- [AWS Amplify](https://aws.amazon.com/blogs/mobile/amplify-next-js-13/)\n- [Azure Static Web Apps](https://learn.microsoft.com/en-us/azure/static-web-apps/nextjs)\n- [Cloudflare Pages](https://developers.cloudflare.com/pages/framework-guides/deploy-a-nextjs-site/)\n- [Firebase](https://firebase.google.com/docs/hosting/nextjs)\n- [Netlify](https://docs.netlify.com/integrations/frameworks/next-js)\n- [Terraform](https://github.com/milliHQ/terraform-aws-next-js)\n- [SST](https://docs.sst.dev/start/nextjs)\n\n> **Note:** Not all serverless providers implement the [Next.js Build API](/docs/deployment.md#nextjs-build-api) from `next start`. Please check with the provider to see what features are supported.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":116,"to":126}}}}],["999",{"pageContent":"Automatic Updates\n\nWhen you deploy your Next.js application, you want to see the latest version without needing to reload.\n\nNext.js will automatically load the latest version of your application in the background when routing. For client-side navigations, `next/link` will temporarily function as a normal `<a>` tag.\n\n**Note:** If a new page (with an old version) has already been prefetched by `next/link`, Next.js will use the old version. Navigating to a page that has _not_ been prefetched (and is not cached at the CDN level) will load the latest version.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":128,"to":134}}}}],["1000",{"pageContent":"Manual Graceful shutdowns\n\nSometimes you might want to run some cleanup code on process signals like `SIGTERM` or `SIGINT`.\n\nYou can do that by setting the env variable `NEXT_MANUAL_SIG_HANDLE` to `true` and then register a handler for that signal inside your `_document.js` file. Please note that you need to register env variable directly in the system env variable, not in the `.env` file.\n\n```json\n// package.json\n{\n  \"scripts\": {\n    \"dev\": \"NEXT_MANUAL_SIG_HANDLE=true next dev\",\n    \"build\": \"next build\",\n    \"start\": \"NEXT_MANUAL_SIG_HANDLE=true next start\"\n  }\n}\n```\n\n```js\n// pages/_document.js\n\nif (process.env.NEXT_MANUAL_SIG_HANDLE) {\n  // this should be added in your custom _document\n  process.on('SIGTERM', () => {\n    console.log('Received SIGTERM: ', 'cleaning up')\n    process.exit(0)\n  })\n\n  process.on('SIGINT', () => {\n    console.log('Received SIGINT: ', 'cleaning up')\n    process.exit(0)\n  })\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":136,"to":168}}}}],["1001",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/going-to-production.md\">\n    <b>Going to Production:</b>\n    <small>Ensure the best performance and user experience.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/deployment.md","loc":{"lines":{"from":170,"to":179}}}}],["1002",{"pageContent":"---\ndescription: Get to know more about Next.js with the frequently asked questions.\n---\n\n# Frequently Asked Questions\n\n<details>\n  <summary>Is Next.js production ready?</summary>\n  <p>Yes! Next.js is used by many of the top websites in the world. See the\n  <a href=\"https://nextjs.org/showcase\">Showcase</a> for more info.</p>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/faq.md","loc":{"lines":{"from":1,"to":11}}}}],["1003",{"pageContent":"<details>\n  <summary>How do I fetch data in Next.js?</summary>\n  Next.js provides a variety of methods depending on your use case. You can use:\n  <ul>\n    <li> Client-side data fetching: Fetch data with <a href=\"/docs/basic-features/data-fetching/client-side.md#client-side-data-fetching-with-useeffect\">useEffect</a> or <a href=\"/docs/basic-features/data-fetching/client-side.md#client-side-data-fetching-with-swr\">SWR</a> inside your React components</li>\n    <li> Server-side rendering with <a href=\"/docs/basic-features/data-fetching/get-server-side-props.md\">getServerSideProps</a></li>\n    <li> Static-site generation with <a href=\"/docs/basic-features/data-fetching/get-static-props.md\">getStaticProps</a></li>\n    <li> Incremental Static Regeneration by <a href=\"/docs/basic-features/data-fetching/incremental-static-regeneration.md\">adding the `revalidate` prop to getStaticProps</a></li>\n  </ul>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/faq.md","loc":{"lines":{"from":13,"to":21}}}}],["1004",{"pageContent":"<li> Incremental Static Regeneration by <a href=\"/docs/basic-features/data-fetching/incremental-static-regeneration.md\">adding the `revalidate` prop to getStaticProps</a></li>\n  </ul>\n  To learn more about data fetching, visit our <a href=\"/docs/basic-features/data-fetching/overview.md\">data fetching documentation</a>.\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/faq.md","loc":{"lines":{"from":21,"to":24}}}}],["1005",{"pageContent":"<details>\n  <summary>Why does Next.js have its own Router?</summary>\n  Next.js includes a built-in router for a few reasons:\n  <ul>\n    <li>It uses a file-system based router which reduces configuration</li>\n    <li>It supports shallow routing which allows you to change the URL without running data fetching methods</li>\n    <li>Routes are always lazy-loadable</li>\n  </ul>\n    If you're migrating from React Router, see the <a href=\"/docs/migrating/from-react-router.md\">migration documentation</a>.\n</details>\n\n<details>\n  <summary>Can I use Next.js with my favorite JavaScript library?</summary>\n  <p>Yes! We have hundreds of examples in our <a href=\"https://github.com/vercel/next.js/tree/canary/examples\">examples directory</a>.</p>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/faq.md","loc":{"lines":{"from":26,"to":40}}}}],["1006",{"pageContent":"<details>\n  <summary>Can I use Next.js with GraphQL?</summary>\n  <p>Yes! Here's an <a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-apollo\">example with Apollo</a> and an <a href=\"https://github.com/vercel/next.js/tree/canary/examples/api-routes-graphql\">example API Route with GraphQL</a>.</p>\n</details>\n\n<details>\n  <summary>Can I use Next.js with Redux?</summary>\n  <p>Yes! Here's an <a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-redux\">example with Redux</a> and an <a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-redux-thunk\">example with thunk</a>.</p>\n</details>\n\n<details>\n  <summary>Can I make a Next.js Progressive Web App (PWA)?</summary>\n   <p>Yes! Here's our <a href=\"https://github.com/vercel/next.js/tree/canary/examples/progressive-web-app\">Next.js PWA Example</a>.</p>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/faq.md","loc":{"lines":{"from":42,"to":55}}}}],["1007",{"pageContent":"<details>\n  <summary>Can I use a CDN for static assets?</summary>\n  <p>Yes! When you deploy your Next.js application to <a href=\"https://vercel.com\">Vercel</a>, your static assets are automatically detected and served by the Edge Network. If you self-host Next.js, you can learn how to manually configure the asset prefix <a href=\"/docs/api-reference/next.config.js/cdn-support-with-asset-prefix.md\">here</a>.</p>\n</details>\n\n<details>\n  <summary>How can I change the internal webpack config?</summary>\n  <p>In most cases, no manual webpack configuration is necessary since Next.js automatically configures webpack. For advanced cases where more control is needed, refer to the <a href=\"/docs/api-reference/next.config.js/custom-webpack-config.md\">custom webpack config documentation</a>.</p>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/faq.md","loc":{"lines":{"from":57,"to":65}}}}],["1008",{"pageContent":"<details>\n  <summary>What is Next.js inspired by?</summary>\n  <p>Many of the goals we set out to accomplish were the ones listed in The <a href=\"https://rauchg.com/2014/7-principles-of-rich-web-applications\">7 principles of Rich Web Applications</a> by Guillermo Rauch.</p>\n\n  <p>The ease-of-use of PHP is a great inspiration. We feel Next.js is a suitable replacement for many scenarios where you would otherwise use PHP to output HTML.</p>\n\n  <p>Unlike PHP, we benefit from the ES6 module system and every page exports a component or function that can be easily imported for lazy evaluation or testing.</p>\n\n  <p>As we were researching options for server-rendering React that didn’t involve a large number of steps, we came across <a href=\"https://github.com/facebookarchive/react-page\">react-page</a> (now deprecated), a similar approach to Next.js by the creator of React Jordan Walke.</p>\n</details>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/faq.md","loc":{"lines":{"from":67,"to":76}}}}],["1009",{"pageContent":"---\ndescription: Get started with Next.js in the official documentation, and learn more about all our features!\n---\n\n> Next.js 13 was recently released, [learn more](https://nextjs.org/blog/next-13) and see the [upgrade guide](https://nextjs.org/docs/upgrading#upgrading-from-12-to-13). Version 13 also introduces beta features like the [`app` directory](https://beta.nextjs.org/docs/app-directory-roadmap) that works alongside the `pages` directory (stable) for incremental adoption. You can continue using `pages` in Next.js 13, but if you want to try the new `app` features, [see the new beta docs](https://beta.nextjs.org/docs).\n\n# Getting Started\n\nWelcome to the Next.js documentation!\n\nIf you're new to Next.js, we recommend starting with the [learn course](https://nextjs.org/learn/basics/create-nextjs-app). The interactive course with quizzes will guide you through everything you need to know to use Next.js.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":1,"to":11}}}}],["1010",{"pageContent":"If you have questions about anything related to Next.js, you're always welcome to ask our community on [GitHub Discussions](https://github.com/vercel/next.js/discussions).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":13,"to":13}}}}],["1011",{"pageContent":"System Requirements\n\n- [Node.js 14.6.0](https://nodejs.org/) or newer\n- MacOS, Windows (including WSL), and Linux are supported","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":15,"to":18}}}}],["1012",{"pageContent":"Automatic Setup\n\nWe recommend creating a new Next.js app using `create-next-app`, which sets up everything automatically for you. (You don't need to create an empty directory. `create-next-app` will make one for you.) To create a project, run:\n\n```bash\nnpx create-next-app@latest\n# or\nyarn create next-app\n# or\npnpm create next-app\n```\n\nIf you want to start with a TypeScript project you can use the `--typescript` flag:\n\n```bash\nnpx create-next-app@latest --typescript\n# or\nyarn create next-app --typescript\n# or\npnpm create next-app --typescript\n```\n\nAfter the installation is complete:\n\n- Run `npm run dev` or `yarn dev` or `pnpm dev` to start the development server on `http://localhost:3000`\n- Visit `http://localhost:3000` to view your application\n- Edit `pages/index.js` and see the updated result in your browser\n\nFor more information on how to use `create-next-app`, you can review the [`create-next-app` documentation](/docs/api-reference/create-next-app.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":20,"to":48}}}}],["1013",{"pageContent":"Manual Setup\n\nInstall `next`, `react` and `react-dom` in your project:\n\n```bash\nnpm install next react react-dom\n# or\nyarn add next react react-dom\n# or\npnpm add next react react-dom\n```\n\nOpen `package.json` and add the following `scripts`:\n\n```json\n\"scripts\": {\n  \"dev\": \"next dev\",\n  \"build\": \"next build\",\n  \"start\": \"next start\",\n  \"lint\": \"next lint\"\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":50,"to":70}}}}],["1014",{"pageContent":"These scripts refer to the different stages of developing an application:\n\n- `dev` - Runs [`next dev`](/docs/api-reference/cli.md#development) to start Next.js in development mode\n- `build` - Runs [`next build`](/docs/api-reference/cli.md#build) to build the application for production usage\n- `start` - Runs [`next start`](/docs/api-reference/cli.md#production) to start a Next.js production server\n- `lint` - Runs [`next lint`](/docs/api-reference/cli.md#lint) to set up Next.js' built-in ESLint configuration\n\nCreate two directories `pages` and `public` at the root of your application:\n\n- `pages` - Associated with a route based on their file name. For example, `pages/about.js` is mapped to `/about`\n- `public` - Stores static assets such as images, fonts, etc. Files inside `public` directory can then be referenced by your code starting from the base URL (`/`).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":73,"to":83}}}}],["1015",{"pageContent":"Next.js is built around the concept of [pages](/docs/basic-features/pages.md). A page is a [React Component](https://react.dev/learn/your-first-component) exported from a `.js`, `.jsx`, `.ts`, or `.tsx` file in the `pages` directory. You can even add [dynamic route](/docs/routing/dynamic-routes) parameters with the filename.\n\nInside the `pages` directory, add the `index.js` file to get started. This is the page that is rendered when the user visits the root of your application.\n\nPopulate `pages/index.js` with the following contents:\n\n```jsx\nfunction HomePage() {\n  return <div>Welcome to Next.js!</div>\n}\n\nexport default HomePage","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":85,"to":96}}}}],["1016",{"pageContent":"After the set up is complete:\n\n- Run `npm run dev` or `yarn dev` or `pnpm dev` to start the development server on `http://localhost:3000`\n- Visit `http://localhost:3000` to view your application\n- Edit `pages/index.js` and see the updated result in your browser\n\nSo far, we get:\n\n- Automatic compilation and [bundling](/docs/advanced-features/compiler.md)\n- [React Fast Refresh](https://nextjs.org/blog/next-9-4#fast-refresh)\n- [Static generation and server-side rendering](/docs/basic-features/data-fetching/overview.md) of [`pages/`](/docs/basic-features/pages.md)\n- [Static file serving](/docs/basic-features/static-file-serving.md) through `public/` which is mapped to the base URL (`/`)\n\nIn addition, any Next.js application is ready for production from the start. Read more in our [Deployment documentation](/docs/deployment.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":99,"to":112}}}}],["1017",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/pages.md\">\n    <b>Pages:</b>\n    <small>Learn more about what pages are in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/built-in-css-support.md\">\n    <b>CSS Support:</b>\n    <small>Built-in CSS support to add custom styles to your app.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/cli.md\">\n    <b>CLI:</b>\n    <small>Learn more about the Next.js CLI.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/getting-started.md","loc":{"lines":{"from":114,"to":137}}}}],["1018",{"pageContent":"---\ndescription: Before taking your Next.js application to production, here are some recommendations to ensure the best user experience.\n---\n\n# Going to Production\n\nBefore taking your Next.js application to production, here are some recommendations to ensure the best user experience.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":1,"to":7}}}}],["1019",{"pageContent":"In General","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":9,"to":9}}}}],["1020",{"pageContent":"- Use [caching](#caching) wherever possible.\n- Ensure your database and backend are deployed in the same region.\n- Aim to ship the least amount of JavaScript possible.\n- Defer loading heavy JavaScript bundles until needed.\n- Ensure [logging](#logging) is set up.\n- Ensure [error handling](#error-handling) is set up.\n- Configure the [404](/docs/advanced-features/custom-error-page.md#404-page) (Not Found) and [500](/docs/advanced-features/custom-error-page.md#500-page) (Error) pages.\n- Ensure you are [measuring performance](/docs/advanced-features/measuring-performance.md).\n- Run [Lighthouse](https://developers.google.com/web/tools/lighthouse) to check for performance, best practices, accessibility, and SEO. For best results, use a production build of Next.js and use incognito in your browser so results aren't affected by extensions.\n- Review [Supported Browsers and Features](/docs/basic-features/supported-browsers-features.md).\n- Improve performance using:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":11,"to":21}}}}],["1021",{"pageContent":"- Review [Supported Browsers and Features](/docs/basic-features/supported-browsers-features.md).\n- Improve performance using:\n  - [`next/image` and Automatic Image Optimization](/docs/basic-features/image-optimization.md)\n  - [Automatic Font Optimization](/docs/basic-features/font-optimization.md)\n  - [Script Optimization](/docs/basic-features/script.md)\n- Improve [loading performance](#loading-performance)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":21,"to":26}}}}],["1022",{"pageContent":"Caching\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/ssr-caching\">ssr-caching</a></li>\n  </ul>\n</details>\n\nCaching improves response times and reduces the number of requests to external services. Next.js automatically adds caching headers to immutable assets served from `/_next/static` including JavaScript, CSS, static images, and other media.\n\n```\nCache-Control: public, max-age=31536000, immutable","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":28,"to":40}}}}],["1023",{"pageContent":"`Cache-Control` headers set in `next.config.js` will be overwritten in production to ensure that static assets can be cached effectively. If you need to revalidate the cache of a page that has been [statically generated](/docs/basic-features/pages.md#static-generation-recommended), you can do so by setting `revalidate` in the page's [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md) function. If you're using `next/image`, you can configure the [`minimumCacheTTL`](/docs/api-reference/next/image#minimum-cache-ttl) for the default Image Optimization loader.\n\n**Note:** When running your application locally with `next dev`, your headers are overwritten to prevent caching locally.\n\n```\nCache-Control: no-cache, no-store, max-age=0, must-revalidate","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":43,"to":48}}}}],["1024",{"pageContent":"You can also use caching headers inside `getServerSideProps` and API Routes for dynamic responses. For example, using [`stale-while-revalidate`](https://web.dev/stale-while-revalidate/).\n\n```jsx\n// This value is considered fresh for ten seconds (s-maxage=10).\n// If a request is repeated within the next 10 seconds, the previously\n// cached value will still be fresh. If the request is repeated before 59 seconds,\n// the cached value will be stale but still render (stale-while-revalidate=59).\n//\n// In the background, a revalidation request will be made to populate the cache\n// with a fresh value. If you refresh the page, you will see the new value.\nexport async function getServerSideProps({ req, res }) {\n  res.setHeader(\n    'Cache-Control',\n    'public, s-maxage=10, stale-while-revalidate=59'\n  )\n\n  return {\n    props: {},\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":51,"to":70}}}}],["1025",{"pageContent":"By default, `Cache-Control` headers will be set differently depending on how your page fetches data.\n\n- If the page uses `getServerSideProps` or `getInitialProps`, it will use the default `Cache-Control` header set by `next start` in order to prevent accidental caching of responses that cannot be cached. If you want a different cache behavior while using `getServerSideProps`, use `res.setHeader('Cache-Control', 'value_you_prefer')` inside of the function as shown above.\n- If the page is using `getStaticProps`, it will have a `Cache-Control` header of `s-maxage=REVALIDATE_SECONDS, stale-while-revalidate`, or if `revalidate` is _not_ used, `s-maxage=31536000, stale-while-revalidate` to cache for the maximum age possible.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":73,"to":76}}}}],["1026",{"pageContent":"> **Note:** Your deployment provider must support caching for dynamic responses. If you are self-hosting, you will need to add this logic yourself using a key/value store like Redis. If you are using Vercel, [Edge Caching works without configuration](https://vercel.com/docs/edge-network/caching?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":78,"to":78}}}}],["1027",{"pageContent":"Reducing JavaScript Size\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-dynamic-import\">with-dynamic-import</a></li>\n  </ul>\n</details>\n\nTo reduce the amount of JavaScript sent to the browser, you can use the following tools to understand what is included inside each JavaScript bundle:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":80,"to":89}}}}],["1028",{"pageContent":"To reduce the amount of JavaScript sent to the browser, you can use the following tools to understand what is included inside each JavaScript bundle:\n\n- [Import Cost](https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost) – Display the size of the imported package inside VSCode.\n- [Package Phobia](https://packagephobia.com/) – Find the cost of adding a new dev dependency to your project.\n- [Bundle Phobia](https://bundlephobia.com/) - Analyze how much a dependency can increase bundle sizes.\n- [Webpack Bundle Analyzer](https://github.com/vercel/next.js/tree/canary/packages/next-bundle-analyzer) – Visualize the size of webpack output files with an interactive, zoomable treemap.\n- [bundlejs](https://bundlejs.com/) - An online tool to quickly bundle & minify your projects, while viewing the compressed gzip/brotli bundle size, all running locally on your browser.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":89,"to":95}}}}],["1029",{"pageContent":"Each file inside your `pages/` directory will automatically be code split into its own JavaScript bundle during `next build`. You can also use [Dynamic Imports](/docs/advanced-features/dynamic-import.md) to lazy-load components and libraries. For example, you might want to defer loading your modal code until a user clicks the open button.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":97,"to":97}}}}],["1030",{"pageContent":"Logging\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/Logflare/next-pino-logflare-logging-example\">Pino and Logflare Example</a></li>\n  </ul>\n</details>\n\nSince Next.js runs on both the client and server, there are multiple forms of logging supported:\n\n- `console.log` in the browser\n- `stdout` on the server\n\nIf you want a structured logging package, we recommend [Pino](https://www.npmjs.com/package/pino). If you're using Vercel, there are [pre-built logging integrations](https://vercel.com/integrations?utm_source=next-site&utm_medium=docs&utm_campaign=next-website#logging) compatible with Next.js.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":99,"to":113}}}}],["1031",{"pageContent":"Error Handling\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-sentry\">with-sentry</a></li>\n  </ul>\n</details>\n\nWhen an unhandled exception occurs, you can control the experience for your users with the [500 page](/docs/advanced-features/custom-error-page.md#500-page). We recommend customizing this to your brand instead of the default Next.js theme.\n\nYou can also log and track exceptions with a tool like Sentry. [This example](https://github.com/vercel/next.js/tree/canary/examples/with-sentry) shows how to catch & report errors on both the client and server-side, using the Sentry SDK for Next.js. There's also a [Sentry integration for Vercel](https://vercel.com/integrations/sentry?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":115,"to":126}}}}],["1032",{"pageContent":"Loading Performance\n\nTo improve loading performance, you first need to determine what to measure and how to measure it. [Core Web Vitals](https://vercel.com/blog/core-web-vitals?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) is a good industry standard that is measured using your own web browser. If you are not familiar with the metrics of Core Web Vitals, review this [blog post](https://vercel.com/blog/core-web-vitals?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) and determine which specific metric/s will be your drivers for loading performance. Ideally, you would want to measure the loading performance in the following environments:\n\n- In the lab, using your own computer or a simulator.\n- In the field, using real-world data from actual visitors.\n- Local, using a test that runs on your device.\n- Remote, using a test that runs in the cloud.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":128,"to":135}}}}],["1033",{"pageContent":"Once you are able to measure the loading performance, use the following strategies to improve it iteratively so that you apply one strategy, measure the new performance and continue tweaking until you do not see much improvement. Then, you can move on to the next strategy.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":137,"to":137}}}}],["1034",{"pageContent":"- Use caching regions that are close to the regions where your database or API is deployed.\n- As described in the [caching](#caching) section, use a `stale-while-revalidate` value that will not overload your backend.\n- Use [Incremental Static Regeneration](/docs/basic-features/data-fetching#incremental-static-regeneration) to reduce the number of requests to your backend.\n- Remove unused JavaScript. Review this [blog post](https://calibreapp.com/blog/bundle-size-optimization) to understand what Core Web Vitals metrics bundle size affects and what strategies you can use to reduce it, such as:\n  - Setting up your Code Editor to view import costs and sizes\n  - Finding alternative smaller packages\n  - Dynamically loading components and dependencies","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":139,"to":145}}}}],["1035",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/deployment.md\">\n    <b>Deployment:</b>\n    <small>Take your Next.js application to production.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/going-to-production.md","loc":{"lines":{"from":147,"to":156}}}}],["1036",{"pageContent":"---\ntitle: Building Forms with Next.js\ndescription: Learn how to create forms with Next.js, from the form HTML element to advanced concepts with React.\n---\n\n# Building Forms with Next.js\n\nA web form has a **client-server** relationship. They are used to send data handled by a web server for processing and storage. The form itself is the client, and the server is any storage mechanism that can be used to store, retrieve and send data when needed.\n\nThis guide will teach you how to create a web form with Next.js.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":1,"to":10}}}}],["1037",{"pageContent":"Part 1: HTML Form\n\nHTML forms are built using the `<form>` tag. It takes a set of attributes and fields to structure the form for features like text fields, checkboxes, dropdown menus, buttons, radio buttons, etc.\n\nHere's the syntax of an HTML form:\n\n```html\n<!-- Basic HTML Form -->\n<form action=\"/send-data-here\" method=\"post\">\n  <label for=\"first\">First name:</label>\n  <input type=\"text\" id=\"first\" name=\"first\" />\n  <label for=\"last\">Last name:</label>\n  <input type=\"text\" id=\"last\" name=\"last\" />\n  <button type=\"submit\">Submit</button>\n</form>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":12,"to":26}}}}],["1038",{"pageContent":"The front-end looks like this:\n\n![html forms](https://assets.vercel.com/image/upload/dpr_auto,q_auto,f_auto/nextjs/guides/building-forms/html-forms.png)\n\nThe HTML `<form>` tag acts as a container for different `<input>` elements like `text` field and submit `button`. Let's study each of these elements:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":29,"to":33}}}}],["1039",{"pageContent":"The HTML `<form>` tag acts as a container for different `<input>` elements like `text` field and submit `button`. Let's study each of these elements:\n\n- `action`: An attribute that specifies where the form data is sent when the form is submitted. It's generally a URL (an absolute URL or a relative URL).\n- `method`: Specifies the [HTTP method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods), i.e., `GET` or `POST` used to send data while submitting the form.\n- `<label>`: An element that defines the label for other form elements. Labels aid accessibility, especially for screen readers.\n- `<input>`: The form element that is widely used to structure the form fields. It depends significantly on the value of the `type` attribute. Input types can be `text`, `checkbox`, `email`, `radio`, and more.\n- `<button>`: Represents a clickable button that's used to submit the form data.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":33,"to":39}}}}],["1040",{"pageContent":"Form Validation\n\nA process that checks if the information provided by a user is correct or not. Form validation also ensures that the provided information is in the correct format (e.g. there's an @ in the email field). These are of two types:\n\n- **Client-side**: Validation is done in the browser\n- **Server-side**: Validation is done on the server\n\nThough both of these types are equally important, this guide will focus on client-side validation only.\n\nClient-side validation is further categorized as:\n\n- **Built-in**: Uses HTML-based attributes like `required`, `type`, `minLength`, `maxLength`, `pattern`, etc.\n- **JavaScript-based**: Validation that's coded with JavaScript.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":41,"to":53}}}}],["1041",{"pageContent":"Built-in Form Validation Using `required`, `type`, `minLength`, `maxLength`\n\n- `required`: Specifies which fields must be filled before submitting the form.\n- `type`: Specifies the data's type (i.e a number, email address, string, etc).\n- `minLength`: Specifies minimum length for the text data string.\n- `maxLength`: Specifies maximum length for the text data string.\n\nSo, a form using this attributes may look like:\n\n```html\n<!-- HTML Form with Built-in Validation -->\n<form action=\"/send-data-here\" method=\"post\">\n  <label for=\"roll\">Roll Number</label>\n  <input\n    type=\"text\"\n    id=\"roll\"\n    name=\"roll\"\n    required\n    minlength=\"10\"\n    maxlength=\"20\"\n  />\n  <label for=\"name\">Name:</label>\n  <input type=\"text\" id=\"name\" name=\"name\" required />\n  <button type=\"submit\">Submit</button>\n</form>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":55,"to":79}}}}],["1042",{"pageContent":"With these validation checks in place, when a user tries to submit an empty field for Name, it gives an error that pops right in the form field. Similarly, a roll number can only be entered if it's 10-20 characters long.\n\n![form validation](https://assets.vercel.com/image/upload/dpr_auto,q_auto,f_auto/nextjs/guides/building-forms/form-validation.jpg)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":82,"to":84}}}}],["1043",{"pageContent":"JavaScript-based Form Validation\n\nForm Validation is important to ensure that a user has submitted the correct data, in a correct format. JavaScript offers an additional level of validation along with HTML native form attributes on the client side. Developers generally prefer validating form data through JavaScript because its data processing is faster when compared to server-side validation, however front-end validation may be less secure in some scenarios as a malicious user could always send malformed data to your server.\n\nThe following example shows using JavaScript to validate a form:\n\n```html\n<form onsubmit=\"validateFormWithJS()\">\n  <label for=\"rollNumber\">Roll Number:</label>\n  <input type=\"text\" name=\"rollNumber\" id=\"rollNumber\" />\n\n  <label for=\"name\">Name:</label>\n  <input type=\"text\" name=\"name\" id=\"name\" />\n\n  <button type=\"submit\">Submit</button>\n</form>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":86,"to":101}}}}],["1044",{"pageContent":"<label for=\"name\">Name:</label>\n  <input type=\"text\" name=\"name\" id=\"name\" />\n\n  <button type=\"submit\">Submit</button>\n</form>\n\n<script>\n  function validateFormWithJS() {\n    const name = document.querySelector('#name').value\n    const rollNumber = document.querySelector('#rollNumber').value\n\n    if (!name) {\n      alert('Please enter your name.')\n      return false\n    }\n\n    if (rollNumber.length < 3) {\n      alert('Roll Number should be at least 3 digits long.')\n      return false\n    }\n  }\n</script>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":101,"to":122}}}}],["1045",{"pageContent":"The HTML [script](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script) tag is used to embed any client-side JavaScript. It can either contain inline scripting statements (as shown in the example above) or point to an external script file via the `src` attribute.\nThis example validates the name and roll number of a user. The `validateFormWithJS()` function does not allow an empty name field, and the roll number must be at least three digits long. The validation is performed when you hit the Submit button. You are not redirected to the next page until the given values are correct.\n\n![js-validation](https://assets.vercel.com/image/upload/dpr_auto,q_auto,f_auto/nextjs/guides/building-forms/js-validation.jpg)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":125,"to":128}}}}],["1046",{"pageContent":"Form Validation Using Regular Expressions\n\nJavaScript validation with Regular Expressions uses the `pattern` HTML attribute. A regular expression (commonly known as RegEx) is an object that describes a pattern of characters. You can only apply the `pattern` attribute to the `<input>` element. This way, you can validate the input value using Regular Expressions (RegEx) by defining your own rules. Once again, if the value does not match the defined pattern, the input will give an error.\nThe below example shows using the `pattern` attribute on an `input` element:\n\n```html\n<form action=\"/action_page.php\">\n  <label for=\"pswrd\">Password:</label>\n  <input\n    type=\"password\"\n    id=\"pswrd\"\n    name=\"pswrd\"\n    pattern=\"[a-z0-9]{1,15}\"\n    title=\"Password should be digits (0 to 9) or alphabets (a to z).\"\n  />\n\n  <button type=\"submit\">Submit</button>\n</form>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":130,"to":147}}}}],["1047",{"pageContent":"The password form field must only contain digits (0 to 9), lowercase alphabets (a to z) and it must be no more than 15 characters in length. No other characters (#,$,&, etc.) are allowed. The rule in RegEx is written as `[a-z0-9]{1,15}`.\n\n![form-validate-regex](https://assets.vercel.com/image/upload/dpr_auto,q_auto,f_auto/nextjs/guides/building-forms/form-validate-regex.jpg)\n\n> To learn more about HTML forms, check out the [MDN Web Docs](https://developer.mozilla.org/en-US/docs/Learn/Forms).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":150,"to":154}}}}],["1048",{"pageContent":"Part 2: Project Setup\n\nIn the following section you will be creating forms in React using Next.js.\n\nCreate a new Next.js app. You can use the [create-next-app](https://nextjs.org/docs/getting-started#setup) for a quick start. In your command line terminal, run the following:\n\n```\nnpx create-next-app\n```\n\nAnswer the questions to create your project, and give it a name, this example uses [`next-forms`](https://github.com/vercel/next.js/tree/canary/examples/next-forms). Next `cd` into this directory, and run `npm run dev` or `yarn dev` command to start the development server.\n\nOpen the URL printed in the terminal to ensure that your app is running successfully.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":156,"to":168}}}}],["1049",{"pageContent":"Part 3: Setting up a Next.js Form API Route\n\nBoth the client and the server will be built using Next.js. For the server part, create an API endpoint where you will send the form data.\n\nNext.js offers a file-based system for routing that's built on the [concept of pages](/docs/basic-features/pages). Any file inside the folder `pages/api` is mapped to `/api/*` and will be treated as an API endpoint instead of a page. This [API endpoint](/docs/api-routes/introduction) is going to be server-side only.\n\nGo to `pages/api`, create a file called `form.js` and paste this code written in Node.js:\n\n```js\nexport default function handler(req, res) {\n  // Get data submitted in request's body.\n  const body = req.body\n\n  // Optional logging to see the responses\n  // in the command line where next.js app is running.\n  console.log('body: ', body)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":170,"to":185}}}}],["1050",{"pageContent":"// Optional logging to see the responses\n  // in the command line where next.js app is running.\n  console.log('body: ', body)\n\n  // Guard clause checks for first and last name,\n  // and returns early if they are not found\n  if (!body.first || !body.last) {\n    // Sends a HTTP bad request error code\n    return res.status(400).json({ data: 'First or last name not found' })\n  }\n\n  // Found the name.\n  // Sends a HTTP success code\n  res.status(200).json({ data: `${body.first} ${body.last}` })\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":185,"to":199}}}}],["1051",{"pageContent":"This form `handler` function will receive the request `req` from the client (i.e. submitted form data). And in return, it'll send a response `res` as JSON that will have both the first and the last name. You can access this API endpoint at `http://localhost:3000/api/form` or replace the localhost URL with an actual Vercel deployment when you deploy.\n\n> Moreover, you can also attach this API to a database like MongoDB or Google Sheets. This way, your submitted form data will be securely stored for later use. For this guide, no database is used. Instead, the same data is returned to the user to demo how it's done.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":202,"to":204}}}}],["1052",{"pageContent":"Form Submission without JavaScript\n\nYou can now use `/api/form` relative endpoint inside the `action` attribute of the form. You are sending form data to the server when the form is submitted via `POST` HTTP method (which is used to send data).\n\n```html\n<form action=\"/api/form\" method=\"post\">\n  <label for=\"first\">First name:</label>\n  <input type=\"text\" id=\"first\" name=\"first\" />\n  <label for=\"last\">Last name:</label>\n  <input type=\"text\" id=\"last\" name=\"last\" />\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\nIf you submit this form, it will submit the data to the forms API endpoint `/api/form`. The server then responds, generally handling the data and loading the URL defined by the action attribute, causing a new page load. So in this case you'll be redirected to `http://localhost:3000/api/form` with the following response from the server.\n\n![form-no-js](https://assets.vercel.com/image/upload/dpr_auto,q_auto,f_auto/nextjs/guides/building-forms/form-no-js.jpg)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":206,"to":222}}}}],["1053",{"pageContent":"Part 4: Configuring Forms in Next.js\n\nYou have created a Next.js API Route for form submission. Now it's time to configure the client (the form itself) inside Next.js using React. The first step will be extending your knowledge of HTML forms and converting it into React (using [JSX](https://react.dev/learn/writing-markup-with-jsx)).\n\nHere's the same form in a [React function component](https://react.dev/reference/react/Component) written using [JSX](https://react.dev/learn/writing-markup-with-jsx).\n\n```js\nexport default function Form() {\n  return (\n    <form action=\"/api/form\" method=\"post\">\n      <label htmlFor=\"first\">First Name</label>\n      <input type=\"text\" id=\"first\" name=\"first\" required />\n\n      <label htmlFor=\"last\">Last Name</label>\n      <input type=\"text\" id=\"last\" name=\"last\" required />\n\n      <button type=\"submit\">Submit</button>\n    </form>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":224,"to":243}}}}],["1054",{"pageContent":"Here's what changed:\n\n- The `for` attribute is changed to `htmlFor`. (Since `for` is a keyword associated with the \"for\" loop in JavaScript, React elements use `htmlFor` instead.)\n- The `action` attribute now has a relative URL which is the form API endpoint.\n\nThis completes the basic structure of your Next.js-based form.\n\n> You can view the entire source code of [next-forms](https://github.com/vercel/next.js/tree/canary/examples/next-forms) example repo that we're creating here as a working example. Feel free to clone it and start right away. This demo is built with create-next-app, and you can preview the basic form CSS styles inside `/styles/global.css` file.\n\n![forms with nextjs](https://assets.vercel.com/image/upload/dpr_auto,q_auto,f_auto/nextjs/guides/building-forms/forms-with-nextjs.png)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":246,"to":255}}}}],["1055",{"pageContent":"Part 5: Form Submission without JavaScript\n\nJavaScript brings interactivity to our web applications, but sometimes you need to control the JavaScript bundle from being too large, or your sites visitors might have JavaScript disabled.\n\nThere are several reasons why users disable JavaScript:\n\n- Addressing bandwidth constraints\n- Increasing device (phone or laptop) battery life\n- For privacy so they won’t be tracked with analytical scripts\n\nRegardless of the reason, disabling JavaScript will impact site functionality partially, if not completely.\n\nNext open the `next-forms` directory. Inside the `/pages` directory, create a file `no-js-form.js`.\n\n> **Quick Tip**: In Next.js, a page is a React Component exported from a `.js`, `.jsx`, `.ts`, or `.tsx` file in the pages directory. Each page is associated with a route based on its file name.\n>\n> Example: If you create `pages/no-js-form.js`, it will be accessible at `your-domain.tld/no-js-form`.\n\nLet's use the same code from above:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":257,"to":275}}}}],["1056",{"pageContent":"Let's use the same code from above:\n\n```js\nexport default function PageWithoutJSbasedForm() {\n  return (\n    <form action=\"/api/form\" method=\"post\">\n      <label htmlFor=\"first\">First Name</label>\n      <input type=\"text\" id=\"first\" name=\"first\" required />\n\n      <label htmlFor=\"last\">Last Name</label>\n      <input type=\"text\" id=\"last\" name=\"last\" required />\n\n      <button type=\"submit\">Submit</button>\n    </form>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":275,"to":290}}}}],["1057",{"pageContent":"With JavaScript disabled, when you hit the Submit button, an event is triggered, which collects the form data and sends it to our forms API endpoint as defined in the `action` attribute and using `POST` HTTP `method`. You'll be redirected to the `/api/form` endpoint since that's how form `action` works.\n\nThe form data will be submitted on the server as a request `req` to the form handler function written above. It will process the data and return a JSON string as a response `res` with your submitted name included.\n\n> To improve the experience here, as a response you can redirect the user to a page and thank them for submitting the form.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":293,"to":297}}}}],["1058",{"pageContent":"Part 6: Form Submission with JavaScript Enabled\n\nInside `/pages`, you'll create another file called `js-form.js`. This will create a `/js-form` page on your Next.js app.\n\nNow, as soon as the form is submitted, we prevent the form's default behavior of reloading the page. We'll take the form data, convert it to JSON string, and send it to our server, the API endpoint. Finally, our server will respond with the name submitted. All of this with a basic JavaScript `handleSubmit()` function.\n\nHere's what this function looks like. It's well documented for you to understand each step:\n\n```js\nexport default function PageWithJSbasedForm() {\n  // Handles the submit event on form submit.\n  const handleSubmit = async (event) => {\n    // Stop the form from submitting and refreshing the page.\n    event.preventDefault()\n\n    // Get data from the form.\n    const data = {\n      first: event.target.first.value,\n      last: event.target.last.value,\n    }","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":299,"to":318}}}}],["1059",{"pageContent":"// Get data from the form.\n    const data = {\n      first: event.target.first.value,\n      last: event.target.last.value,\n    }\n\n    // Send the data to the server in JSON format.\n    const JSONdata = JSON.stringify(data)\n\n    // API endpoint where we send form data.\n    const endpoint = '/api/form'\n\n    // Form the request for sending data to the server.\n    const options = {\n      // The method is POST because we are sending data.\n      method: 'POST',\n      // Tell the server we're sending JSON.\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      // Body of the request is the JSON data we created above.\n      body: JSONdata,\n    }\n\n    // Send the form data to our forms API on Vercel and get a response.\n    const response = await fetch(endpoint, options)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":318,"to":343}}}}],["1060",{"pageContent":"// Send the form data to our forms API on Vercel and get a response.\n    const response = await fetch(endpoint, options)\n\n    // Get the response data from server as JSON.\n    // If server returns the name submitted, that means the form works.\n    const result = await response.json()\n    alert(`Is this your full name: ${result.data}`)\n  }\n  return (\n    // We pass the event to the handleSubmit() function on submit.\n    <form onSubmit={handleSubmit}>\n      <label htmlFor=\"first\">First Name</label>\n      <input type=\"text\" id=\"first\" name=\"first\" required />\n\n      <label htmlFor=\"last\">Last Name</label>\n      <input type=\"text\" id=\"last\" name=\"last\" required />\n\n      <button type=\"submit\">Submit</button>\n    </form>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":343,"to":363}}}}],["1061",{"pageContent":"It's a Next.js page with a React function component called `PageWithJSbasedForm` with a `<form>` element written in JSX. There's no action on the `<form>` element. Instead, we use the `onSubmit` event handler to send data to our `{handleSubmit}` function.\n\nThe `handleSubmit()` function processes your form data through a series of steps:\n\n- The `event.preventDefault()` stops the `<form>` element from refreshing the entire page.\n- We created a JavaScript object called `data` with the `first` and `last` values from the form.\n- JSON is a language-agnostic data transfer format. So we use `JSON.stringify(data)` to convert the data to JSON.\n- We then use `fetch()` to send the data to our `/api/form` endpoint using JSON and HTTP `POST` method.\n- Server sends back a response with the name submitted. Woohoo! 🥳","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":366,"to":374}}}}],["1062",{"pageContent":"Conclusion\n\nThis guide has covered the following:\n\n- The basic HTML `form` element\n- Understanding forms with React.js\n- Validating forms data with and without JavaScript\n- Using Next.js API Routes to handle `req` and `res` from the client and server\n\nFor more details go through [Next.js Learn Course](https://nextjs.org/learn/basics/create-nextjs-app).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/guides/building-forms.md","loc":{"lines":{"from":376,"to":385}}}}],["1063",{"pageContent":"---\ndescription: Learn how to transition an existing Create React App project to Next.js.\n---\n\n# Migrating from Create React App\n\nThis guide will help you understand how to transition from an existing non-ejected Create React App project to Next.js. Migrating to Next.js will allow you to:\n\n- Choose which [data fetching](/docs/basic-features/data-fetching/overview.md) strategy you want on a per-page basis.\n- Use [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md) to update _existing_ pages by re-rendering them in the background as traffic comes in.\n- Use [API Routes](/docs/api-routes/introduction.md).\n\nAnd more! Let’s walk through a series of steps to complete the migration.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":1,"to":13}}}}],["1064",{"pageContent":"Updating `package.json` and dependencies\n\nThe first step towards migrating to Next.js is to update `package.json` and dependencies. You should:\n\n- Remove `react-scripts` (but keep `react` and `react-dom`). If you're using React Router, you can also remove `react-router-dom`.\n- Install `next`.\n- Add Next.js related commands to `scripts`. One is `next dev`, which runs a development server at `localhost:3000`. You should also add `next build` and `next start` for creating and starting a production build.\n\nHere's an example `package.json`:\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\"\n  },\n  \"dependencies\": {\n    \"next\": \"latest\",\n    \"react\": \"latest\",\n    \"react-dom\": \"latest\"\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":15,"to":38}}}}],["1065",{"pageContent":"Static Assets and Compiled Output\n\nCreate React App uses the `public` directory for the [entry HTML file](https://create-react-app.dev/docs/using-the-public-folder) as well as static assets, but Next.js only uses it for static assets. When migrating from Create React App, the location of the `public` directory remains the same.\n\n- Move any images, fonts, or other static assets to `public`.\n- Convert `index.html` (the entry point of your application) to Next.js. Any `<head>` code should be moved to a [custom `_document.js`](/docs/advanced-features/custom-document.md). Any shared layout between all pages should be moved to a [custom `_app.js`](/docs/advanced-features/custom-app.md).\n- See [Styling](#styling) for CSS/Sass files.\n- Add `.next` to `.gitignore`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":40,"to":47}}}}],["1066",{"pageContent":"Creating Routes & Linking\n\nWith Create React App, you're likely using React Router. Instead of using a third-party library, Next.js includes its own [file-system based routing](/docs/routing/introduction.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":49,"to":51}}}}],["1067",{"pageContent":"- Create a [`pages`](/docs/basic-features/pages.md) directory at the root of your project.\n- Then, move the `src/App.js` file to `pages/index.js`. This file is the [index page](https://nextjs.org/docs/routing/introduction#index-routes) of your Next.js application. Populate this file with code that is used to display the index route in your Create React App.\n- Convert all other `Route` components to new files in the `pages` directory.\n- For routes that require dynamic content (e.g. `/blog/:slug`), you can use [Dynamic Routes](/docs/routing/dynamic-routes.md) with Next.js (e.g. `pages/blog/[slug].js`). The value of `slug` is accessible through a [query parameter](/docs/routing/dynamic-routes.md). For example, the route `/blog/first-post` would forward the query object `{ 'slug': 'first-post' }` to `pages/blog/[slug].js` ([learn more here](/docs/basic-features/data-fetching/get-static-paths.md)).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":53,"to":56}}}}],["1068",{"pageContent":"For more information, see [Migrating from React Router](/docs/migrating/from-react-router.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":58,"to":58}}}}],["1069",{"pageContent":"Styling\n\nNext.js has built-in support for [CSS](/docs/basic-features/built-in-css-support.md), [Sass](/docs/basic-features/built-in-css-support.md#sass-support) and [CSS-in-JS](/docs/basic-features/built-in-css-support.md#css-in-js).\n\nWith Create React App, you can import `.css` files directly inside React components. Next.js allows you to do the same, but requires these files to be [CSS Modules](/docs/basic-features/built-in-css-support.md). For global styles, you'll need a [custom `_app.js`](/docs/advanced-features/custom-app.md) to add a [global stylesheet](/docs/basic-features/built-in-css-support.md#adding-a-global-stylesheet).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":60,"to":64}}}}],["1070",{"pageContent":"Safely Accessing Web APIs\n\nWith client-side rendered applications (like Create React App), you can access `window`, `localStorage`, `navigator`, and other [Web APIs](https://developer.mozilla.org/en-US/docs/Web/API) out of the box.\n\nSince Next.js uses [pre-rendering](/docs/basic-features/pages.md#pre-rendering), you'll need to safely access those Web APIs only when you're on the client-side. For example, the following code snippet will allow access to `window` only on the client-side.\n\n```jsx\nif (typeof window !== 'undefined') {\n  // You now have access to `window`\n}\n```\n\nA recommended way of accessing Web APIs safely is by using the [`useEffect`](https://react.dev/reference/react/useEffect) hook, which only executes client-side:\n\n```jsx\nimport { useEffect } from 'react'\n\nuseEffect(() => {\n  // You now have access to `window`\n}, [])\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":66,"to":86}}}}],["1071",{"pageContent":"Image Component and Image Optimization\n\nSince version **10.0.0**, Next.js has a built-in [Image Component and Automatic Image Optimization](/docs/basic-features/image-optimization.md).\n\nThe Next.js Image Component, [`next/image`](/docs/api-reference/next/image.md), is an extension of the HTML `<img>` element, evolved for the modern web.\n\nThe Automatic Image Optimization allows for resizing, optimizing, and serving images in modern formats like [WebP](https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types) when the browser supports it. This avoids shipping large images to devices with a smaller viewport. It also allows Next.js to automatically adopt future image formats and serve them to browsers that support those formats.\n\nInstead of optimizing images at build time, Next.js optimizes images on-demand, as users request them. Your build times aren't increased, whether shipping 10 images or 10 million images.\n\n```jsx\nimport Image from 'next/image'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":88,"to":99}}}}],["1072",{"pageContent":"```jsx\nimport Image from 'next/image'\n\nexport default function Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src=\"/me.png\"\n        alt=\"Picture of the author\"\n        width={500}\n        height={500}\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":99,"to":116}}}}],["1073",{"pageContent":"Environment Variables\n\nNext.js has support for `.env` [Environment Variables](/docs/basic-features/environment-variables.md) similar to Create React App. The main difference is the prefix used to expose environment variables on the client-side.\n\n- Change all environment variables with the `REACT_APP_` prefix to `NEXT_PUBLIC_`.\n- Server-side environment variables will be available at build-time and in [API Routes](/docs/api-routes/introduction.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":118,"to":123}}}}],["1074",{"pageContent":"Search Engine Optimization\n\nMost Create React App examples use `react-helmet` to assist with adding `meta` tags for proper SEO. With Next.js, we use [`next/head`](/docs/api-reference/next/head.md) to add `meta` tags to your `<head />` element. For example, here's an SEO component with Create React App:\n\n```jsx\n// src/components/seo.js\n\nimport { Helmet } from 'react-helmet'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":125,"to":132}}}}],["1075",{"pageContent":"```jsx\n// src/components/seo.js\n\nimport { Helmet } from 'react-helmet'\n\nexport default function SEO({ description, title, siteTitle }) {\n  return (\n    <Helmet\n      title={title}\n      titleTemplate={siteTitle ? `%s | ${siteTitle}` : null}\n      meta={[\n        {\n          name: `description`,\n          content: description,\n        },\n        {\n          property: `og:title`,\n          content: title,\n        },\n        {\n          property: `og:description`,\n          content: description,\n        },\n        {\n          property: `og:type`,\n          content: `website`,\n        },\n        {\n          name: `twitter:card`,\n          content: `summary`,\n        },\n        {\n          name: `twitter:creator`,\n          content: twitter,\n        },\n        {\n          name: `twitter:title`,\n          content: title,\n        },\n        {\n          name: `twitter:description`,\n          content: description,\n        },\n      ]}\n    />\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":132,"to":178}}}}],["1076",{"pageContent":"And here's the same example using Next.js.\n\n```jsx\n// src/components/seo.js\n\nimport Head from 'next/head'\n\nexport default function SEO({ description, title, siteTitle }) {\n  return (\n    <Head>\n      <title>{`${title} | ${siteTitle}`}</title>\n      <meta name=\"description\" content={description} />\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:title\" content={title} />\n      <meta property=\"og:description\" content={description} />\n      <meta property=\"og:site_name\" content={siteTitle} />\n      <meta property=\"twitter:card\" content=\"summary\" />\n      <meta property=\"twitter:creator\" content={config.social.twitter} />\n      <meta property=\"twitter:title\" content={title} />\n      <meta property=\"twitter:description\" content={description} />\n    </Head>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":181,"to":204}}}}],["1077",{"pageContent":"Single-Page App (SPA)\n\nIf you want to move your existing Create React App to Next.js and keep a Single-Page App, you can move your old application's entry point to an [Optional Catch-All Route](/docs/routing/dynamic-routes.md#optional-catch-all-routes) named `pages/[[...app]].js`.\n\n```jsx\n// pages/[[...app]].js\n\nimport { useState, useEffect } from 'react'\nimport CreateReactAppEntryPoint from '../components/app'\n\nfunction App() {\n  const [isMounted, setIsMounted] = useState(false)\n\n  useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  if (!isMounted) {\n    return null\n  }\n\n  return <CreateReactAppEntryPoint />\n}\n\nexport default App\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":206,"to":231}}}}],["1078",{"pageContent":"Ejected Create React App\n\nIf you've ejected Create React App, here are some things to consider:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":233,"to":235}}}}],["1079",{"pageContent":"- If you have custom file loaders set up for CSS, Sass, or other assets, this is all built-in with Next.js.\n- If you've manually added [new JavaScript features](/docs/basic-features/supported-browsers-features.md#javascript-language-features) (e.g. Optional Chaining) or [Polyfills](/docs/basic-features/supported-browsers-features.md#polyfills), check to see what's included by default with Next.js.\n- If you have a custom code splitting setup, you can remove that. Next.js has automatic code splitting on a [per-page basis](/docs/basic-features/pages.md).\n- You can [customize your PostCSS setup](/docs/advanced-features/customizing-postcss-config.md#default-behavior) with Next.js without ejecting from the framework.\n- You should reference the default [Babel config](/docs/advanced-features/customizing-babel-config.md) and [Webpack config](/docs/api-reference/next.config.js/custom-webpack-config.md) of Next.js to see what's included by default.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":237,"to":241}}}}],["1080",{"pageContent":"Learn More\n\nYou can learn more about Next.js by completing our [starter tutorial](https://nextjs.org/learn/basics/create-nextjs-app). If you have questions or if this guide didn't work for you, feel free to reach out to our community on [GitHub Discussions](https://github.com/vercel/next.js/discussions).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-create-react-app.md","loc":{"lines":{"from":243,"to":245}}}}],["1081",{"pageContent":"---\ndescription: Learn how to transition an existing Gatsby project to Next.js.\n---\n\n# Migrating from Gatsby\n\nThis guide will help you understand how to transition from an existing Gatsby project to Next.js. Migrating to Next.js will allow you to:\n\n- Choose which [data fetching](/docs/basic-features/data-fetching/overview.md) strategy you want on a per-page basis.\n- Use [Incremental Static Regeneration](/docs/basic-features/data-fetching/incremental-static-regeneration.md) to update _existing_ pages by re-rendering them in the background as traffic comes in.\n- Use [API Routes](/docs/api-routes/introduction.md).\n\nAnd more! Let’s walk through a series of steps to complete the migration.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":1,"to":13}}}}],["1082",{"pageContent":"Updating `package.json` and dependencies\n\nThe first step towards migrating to Next.js is to update `package.json` and dependencies. You should:\n\n- Remove all Gatsby-related packages (but keep `react` and `react-dom`).\n- Install `next`.\n- Add Next.js related commands to `scripts`. One is `next dev`, which runs a development server at `localhost:3000`. You should also add `next build` and `next start` for creating and starting a production build.\n\nHere's an example `package.json` ([view diff](https://github.com/leerob/gatsby-to-nextjs/pull/1/files#diff-b9cfc7f2cdf78a7f4b91a753d10865a2)):\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\"\n  },\n  \"dependencies\": {\n    \"next\": \"latest\",\n    \"react\": \"latest\",\n    \"react-dom\": \"latest\"\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":15,"to":38}}}}],["1083",{"pageContent":"Static Assets and Compiled Output\n\nGatsby uses the `public` directory for the compiled output, whereas Next.js uses it for static assets. Here are the steps for migration ([view diff](https://github.com/leerob/gatsby-to-nextjs/pull/1/files#diff-a084b794bc0759e7a6b77810e01874f2)):\n\n- Remove `.cache/` and `public` from `.gitignore` and delete both directories.\n- Rename Gatsby’s `static` directory as `public`.\n- Add `.next` to `.gitignore`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":40,"to":46}}}}],["1084",{"pageContent":"Creating Routes\n\nBoth Gatsby and Next support a `pages` directory, which uses [file-system based routing](/docs/routing/introduction.md). Gatsby's directory is `src/pages`, which is also [supported by Next.js](/docs/advanced-features/src-directory.md).\n\nGatsby creates dynamic routes using the `createPages` API inside of `gatsby-node.js`. With Next, we can use [Dynamic Routes](/docs/routing/dynamic-routes.md) inside of `pages` to achieve the same effect. Rather than having a `template` directory, you can use the React component inside your dynamic route file. For example:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":48,"to":52}}}}],["1085",{"pageContent":"- **Gatsby:** `createPages` API inside `gatsby-node.js` for each blog post, then have a template file at `src/templates/blog-post.js`.\n- **Next:** Create `pages/blog/[slug].js` which contains the blog post template. The value of `slug` is accessible through a [query parameter](/docs/routing/dynamic-routes.md). For example, the route `/blog/first-post` would forward the query object `{ 'slug': 'first-post' }` to `pages/blog/[slug].js` ([learn more here](/docs/basic-features/data-fetching/get-static-paths.md)).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":54,"to":55}}}}],["1086",{"pageContent":"Styling\n\nWith Gatsby, global CSS imports are included in `gatsby-browser.js`. With Next, you should create a [custom `_app.js`](/docs/advanced-features/custom-app.md) for global CSS. When migrating, you can copy over your CSS imports directly and update the relative file path, if necessary. Next.js has [built-in CSS support](/docs/basic-features/built-in-css-support.md).\n\n## Links\n\nThe Gatsby `Link` and Next.js [`Link`](/docs/api-reference/next/link.md) component have a slightly different API.\n\n```jsx\n// Gatsby\n\nimport { Link } from 'gatsby'\n\nexport default function Home() {\n  return <Link to=\"/blog\">blog</Link>\n}\n```\n\n```jsx\n// Next.js\n\nimport Link from 'next/link'\n\nexport default function Home() {\n  return <Link href=\"/blog\">blog</Link>\n}\n```\n\nUpdate any import statements, switch `to` to `href`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":57,"to":85}}}}],["1087",{"pageContent":"Data Fetching\n\nThe largest difference between Gatsby and Next.js is how data fetching is implemented. Gatsby is opinionated with GraphQL being the default strategy for retrieving data across your application. With Next.js, you get to choose which strategy you want (GraphQL is one supported option).\n\nGatsby uses the `graphql` tag to query data in the pages of your site. This may include local data, remote data, or information about your site configuration. Gatsby only allows the creation of static pages. With Next.js, you can choose on a [per-page basis](/docs/basic-features/pages.md) which [data fetching strategy](/docs/basic-features/data-fetching/overview.md) you want. For example, `getServerSideProps` allows you to do server-side rendering. If you wanted to generate a static page, you'd export `getStaticProps` / `getStaticPaths` inside the page, rather than using `pageQuery`. For example:\n\n```js\n// src/pages/[slug].js","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":87,"to":94}}}}],["1088",{"pageContent":"```js\n// src/pages/[slug].js\n\n// Install remark and remark-html\nimport { remark } from 'remark'\nimport html from 'remark-html'\nimport { getPostBySlug, getAllPosts } from '../lib/blog'\n\nexport async function getStaticProps({ params }) {\n  const post = getPostBySlug(params.slug)\n  const markdown = await remark()\n    .use(html)\n    .process(post.content || '')\n  const content = markdown.toString()\n\n  return {\n    props: {\n      ...post,\n      content,\n    },\n  }\n}\n\nexport async function getStaticPaths() {\n  const posts = getAllPosts()\n\n  return {\n    paths: posts.map((post) => {\n      return {\n        params: {\n          slug: post.slug,\n        },\n      }\n    }),\n    fallback: false,\n  }\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":94,"to":130}}}}],["1089",{"pageContent":"You'll commonly see Gatsby plugins used for reading the file system (`gatsby-source-filesystem`), handling markdown files (`gatsby-transformer-remark`), and so on. For example, the popular starter blog example has [15 Gatsby specific packages](https://github.com/gatsbyjs/gatsby-starter-blog/blob/master/package.json). Next takes a different approach. It includes common features directly inside the framework, and gives the user full control over integrations with external packages. For example, rather than abstracting reading from the file system to a plugin, you can use the native Node.js `fs` package inside `getStaticProps` / `getStaticPaths` to read from the file system.\n\n```js\n// src/lib/blog.js\n\n// Install gray-matter and date-fns\nimport matter from 'gray-matter'\nimport { parseISO, format } from 'date-fns'\nimport fs from 'fs'\nimport { join } from 'path'\n\n// Add markdown files in `src/content/blog`\nconst postsDirectory = join(process.cwd(), 'src', 'content', 'blog')","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":133,"to":145}}}}],["1090",{"pageContent":"// Add markdown files in `src/content/blog`\nconst postsDirectory = join(process.cwd(), 'src', 'content', 'blog')\n\nexport function getPostBySlug(slug) {\n  const realSlug = slug.replace(/\\.md$/, '')\n  const fullPath = join(postsDirectory, `${realSlug}.md`)\n  const fileContents = fs.readFileSync(fullPath, 'utf8')\n  const { data, content } = matter(fileContents)\n  const date = format(parseISO(data.date), 'MMMM dd, yyyy')\n\n  return { slug: realSlug, frontmatter: { ...data, date }, content }\n}\n\nexport function getAllPosts() {\n  const slugs = fs.readdirSync(postsDirectory)\n  const posts = slugs.map((slug) => getPostBySlug(slug))\n\n  return posts\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":145,"to":164}}}}],["1091",{"pageContent":"Image Component and Image Optimization\n\nNext.js has a built-in [Image Component and Automatic Image Optimization](/docs/basic-features/image-optimization.md).\n\nThe Next.js Image Component, [`next/image`](/docs/api-reference/next/image.md), is an extension of the HTML `<img>` element, evolved for the modern web.\n\nThe Automatic Image Optimization allows for resizing, optimizing, and serving images in modern formats like [WebP](https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types) when the browser supports it. This avoids shipping large images to devices with a smaller viewport. It also allows Next.js to automatically adopt future image formats and serve them to browsers that support those formats.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":166,"to":172}}}}],["1092",{"pageContent":"Migrating from Gatsby Image\n\nInstead of optimizing images at build time, Next.js optimizes images on-demand, as users request them. Unlike static site generators and static-only solutions, your build times aren't increased, whether shipping 10 images or 10 million images.\n\nThis means you can remove common Gatsby plugins like:\n\n- `gatsby-image`\n- `gatsby-transformer-sharp`\n- `gatsby-plugin-sharp`\n\nInstead, use the built-in [`next/image`](/docs/api-reference/next/image.md) component and [Automatic Image Optimization](/docs/basic-features/image-optimization.md).\n\n> The `next/image` component's default loader is not supported when using [`output: 'export'`](/docs/advanced-features/static-html-export.md). However, other loader options will work.\n\n```jsx\nimport Image from 'next/image'\nimport profilePic from '../assets/me.png'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":174,"to":190}}}}],["1093",{"pageContent":"```jsx\nimport Image from 'next/image'\nimport profilePic from '../assets/me.png'\n\nexport default function Home() {\n  return (\n    <>\n      <h1>My Homepage</h1>\n      <Image\n        src={profilePic}\n        alt=\"Picture of the author\"\n        // When \"responsive\", similar to \"fluid\" from Gatsby\n        // When \"intrinsic\", similar to \"fluid\" with maxWidth from Gatsby\n        // When \"fixed\", similar to \"fixed\" from Gatsby\n        layout=\"responsive\"\n        // Optional, similar to \"blur-up\" from Gatsby\n        placeholder=\"blur\"\n        // Optional, similar to \"width\" in Gatsby GraphQL\n        width={500}\n        // Optional, similar to \"height\" in Gatsby GraphQL\n        height={500}\n      />\n      <p>Welcome to my homepage!</p>\n    </>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":190,"to":216}}}}],["1094",{"pageContent":"Site Configuration\n\nWith Gatsby, your site's metadata (name, description, etc.) is located inside `gatsby-config.js`. This is then exposed through the GraphQL API and consumed through a `pageQuery` or a static query inside a component.\n\nWith Next.js, we recommend creating a config file similar to below. You can then import this file anywhere without having to use GraphQL to access your site's metadata.\n\n```js\n// src/config.js\n\nexport default {\n  title: 'Starter Blog',\n  author: {\n    name: 'Lee Robinson',\n    summary: 'who loves Next.js.',\n  },\n  description: 'A starter blog converting Gatsby -> Next.',\n  social: {\n    twitter: 'leeerob',\n  },\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":218,"to":238}}}}],["1095",{"pageContent":"Search Engine Optimization\n\nMost Gatsby examples use `react-helmet` to assist with adding `meta` tags for proper SEO. With Next.js, we use [`next/head`](/docs/api-reference/next/head.md) to add `meta` tags to your `<head />` element. For example, here's an SEO component with Gatsby:\n\n```js\n// src/components/seo.js\n\nimport { Helmet } from 'react-helmet'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":240,"to":247}}}}],["1096",{"pageContent":"```js\n// src/components/seo.js\n\nimport { Helmet } from 'react-helmet'\n\nexport default function SEO({ description, title, siteTitle }) {\n  return (\n    <Helmet\n      title={title}\n      titleTemplate={siteTitle ? `%s | ${siteTitle}` : null}\n      meta={[\n        {\n          name: `description`,\n          content: description,\n        },\n        {\n          property: `og:title`,\n          content: title,\n        },\n        {\n          property: `og:description`,\n          content: description,\n        },\n        {\n          property: `og:type`,\n          content: `website`,\n        },\n        {\n          name: `twitter:card`,\n          content: `summary`,\n        },\n        {\n          name: `twitter:creator`,\n          content: twitter,\n        },\n        {\n          name: `twitter:title`,\n          content: title,\n        },\n        {\n          name: `twitter:description`,\n          content: description,\n        },\n      ]}\n    />\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":247,"to":293}}}}],["1097",{"pageContent":"And here's the same example using Next.js, including reading from a site config file.\n\n```js\n// src/components/seo.js\n\nimport Head from 'next/head'\nimport config from '../config'\n\nexport default function SEO({ description, title }) {\n  const siteTitle = config.title\n\n  return (\n    <Head>\n      <title>{`${title} | ${siteTitle}`}</title>\n      <meta name=\"description\" content={description} />\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:title\" content={title} />\n      <meta property=\"og:description\" content={description} />\n      <meta property=\"og:site_name\" content={siteTitle} />\n      <meta property=\"twitter:card\" content=\"summary\" />\n      <meta property=\"twitter:creator\" content={config.social.twitter} />\n      <meta property=\"twitter:title\" content={title} />\n      <meta property=\"twitter:description\" content={description} />\n    </Head>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":296,"to":322}}}}],["1098",{"pageContent":"Learn more\n\nTake a look at [this pull request](https://github.com/leerob/gatsby-to-nextjs/pull/1) for more details on how an app can be migrated from Gatsby to Next.js. If you have questions or if this guide didn't work for you, feel free to reach out to our community on [GitHub Discussions](https://github.com/vercel/next.js/discussions).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-gatsby.md","loc":{"lines":{"from":324,"to":326}}}}],["1099",{"pageContent":"---\ndescription: Learn how to migrate from React Router to file-system based routes with Next.js.\n---\n\n# Migrating from React Router\n\nThis guide will help you understand how to transition from [React Router](https://reactrouter.com) to [file-system based](/docs/routing/introduction.md) routes with Next.js. Using [`next/link`](/docs/api-reference/next/link.md) and [`next/router`](/docs/api-reference/next/router.md) will allow you to:\n\n- Decrease bundle size by removing React Router as a dependency.\n- Define your application routes through the file system.\n- Utilize the latest improvements to the Next.js framework.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":1,"to":11}}}}],["1100",{"pageContent":"Basics\n\nFirst, uninstall React Router. You'll be migrating to the built-in routing with Next.js.\n\n```jsx\nnpm uninstall react-router-dom\n```\n\nThe `Link` component for performing client-side route transitions is slightly different from React Router.\n\n```jsx\n// Before (React Router)\nimport { Link } from 'react-router-dom'\n\nexport default function App() {\n  return <Link to=\"/about\">About</Link>\n}\n\n// After (Next.js)\nimport Link from 'next/link'\n\nexport default function App() {\n  return (\n    <Link href=\"/about\">\n      About\n    </Link>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":13,"to":40}}}}],["1101",{"pageContent":"Most React applications that use React Router have a top-level navigation file, containing a list of routes. For example:\n\n```jsx\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\n\nexport default function App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/about\">\n          <h1>About</h1>\n        </Route>\n        <Route path=\"/blog\">\n          <h1>Blog</h1>\n        </Route>\n        <Route path=\"/\">\n          <h1>Home</h1>\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n```\n\nWith Next.js, you can express the same application structure in the file system. When a file is added to the [`pages`](/docs/basic-features/pages.md) directory it's automatically available as a route.\n\n- `pages/about.js` → `/about`\n- `pages/blog.js` → `/blog`\n- `pages/index.js` → `/`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":43,"to":71}}}}],["1102",{"pageContent":"Nested Routes\n\nIn the example below, routes like `/blog/my-post` would render the `Post` component. If a slug was not provided, it would render the list of all blog posts.\n\n```jsx\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  useRouteMatch,\n  useParams,\n} from 'react-router-dom'\n\nexport default function Blog() {\n  // Nested route under /blog\n  const match = useRouteMatch()\n\n  return (\n    <Router>\n      <Switch>\n        <Route path={`${match.path}/:slug`}>\n          <Post />\n        </Route>\n        <Route path={match.path}>\n          <h1>All Blog Posts</h1>\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n\nfunction Post() {\n  const { slug } = useParams()\n  return <h1>Post Slug: {slug}</h1>\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":73,"to":107}}}}],["1103",{"pageContent":"Rather than using the `:slug` syntax inside your `Route` component, Next.js uses the `[slug]` syntax in the file name for [Dynamic Routes](/docs/routing/dynamic-routes.md). We can transform this to Next.js by creating two new files, `pages/blog/index.js` (showing all pages) and `pages/blog/[slug].js` (showing an individual post).\n\n```jsx\n// pages/blog/index.js\n\nexport default function Blog() {\n  return <h1>All Blog Posts</h1>\n}\n\n// pages/blog/[slug].js\n\nimport { useRouter } from 'next/router'\n\nexport default function Post() {\n  const router = useRouter()\n  const { slug } = router.query\n\n  return <h1>Post Slug: {slug}</h1>\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":110,"to":129}}}}],["1104",{"pageContent":"Server Rendering\n\nNext.js has built-in support for [Server-side Rendering](/docs/basic-features/pages#server-side-rendering.md). This means you can remove any instances of `StaticRouter` in your code.\n\n## Code Splitting\n\nNext.js has built-in support for [Code Splitting](https://v5.reactrouter.com/web/guides/code-splitting). This means you can remove any instances of:\n\n- `@loadable/server`, `@loadable/babel-plugin`, and `@loadable/webpack-plugin`\n- Modifications to your `.babelrc` for `@loadable/babel-plugin`\n\nEach file inside your `pages/` directory will be code split into its own JavaScript bundle during the build process. Next.js [also supports](/docs/basic-features/supported-browsers-features.md#javascript-language-features) ES2020 dynamic `import()` for JavaScript. With it you can import JavaScript modules dynamically and work with them. They also work with SSR.\n\nFor more information, read about [Dynamic Imports](https://nextjs.org/docs/advanced-features/dynamic-import).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":131,"to":144}}}}],["1105",{"pageContent":"Scroll Restoration\n\nNext.js has built-in support for [Scroll Restoration](https://v5.reactrouter.com/web/guides/scroll-restoration). This means you can remove any custom `ScrollToTop` components you have defined.\n\nThe default behavior of `next/link` and `next/router` is to scroll to the top of the page. You can also [disable this](https://nextjs.org/docs/api-reference/next/link#disable-scrolling-to-the-top-of-the-page) if you prefer.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":146,"to":150}}}}],["1106",{"pageContent":"Learn More\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/routing/introduction.md\">\n    <b>Routing:</b>\n    <small>Learn more about routing in Next.js.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/routing/dynamic-routes.md\">\n    <b>Dynamic Routes:</b>\n    <small>Learn more about the built-in dynamic routes.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/link.md\">\n    <b>Pages:</b>\n    <small>Enable client-side transitions with next/link.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/from-react-router.md","loc":{"lines":{"from":152,"to":175}}}}],["1107",{"pageContent":"---\ndescription: Learn different strategies for incrementally adopting Next.js into your development workflow.\n---\n\n# Incrementally Adopting Next.js\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/rewrites\">Rewrites</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/redirects\">Redirects</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\">Multi-Zones</a></li>\n  </ul>\n</details>\n\nNext.js has been designed for gradual adoption. With Next.js, you can continue using your existing code and add as much (or as little) React as you need. By starting small and incrementally adding more pages, you can prevent derailing feature work by avoiding a complete rewrite.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/incremental-adoption.md","loc":{"lines":{"from":1,"to":16}}}}],["1108",{"pageContent":"Strategies\n\n### Subpath\n\nThe first strategy is to configure your server or proxy such that, everything under a specific subpath points to a Next.js app. For example, your existing website might be at `example.com`, and you might configure your proxy such that `example.com/store` serves a Next.js e-commerce store.\n\nUsing [`basePath`](/docs/api-reference/next.config.js/basepath.md), you can configure your Next.js application's assets and links to automatically work with your new subpath `/store`. Since each page in Next.js is its own [standalone route](/docs/routing/introduction.md), pages like `pages/products.js` will route to `example.com/store/products` in your application.\n\n```jsx\n// next.config.js\n\nmodule.exports = {\n  basePath: '/store',\n}\n```\n\nTo learn more about `basePath`, take a look at our [documentation](/docs/api-reference/next.config.js/basepath.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/incremental-adoption.md","loc":{"lines":{"from":18,"to":34}}}}],["1109",{"pageContent":"Rewrites\n\nThe second strategy is to create a new Next.js app that points to the root URL of your domain. Then, you can use [`rewrites`](/docs/api-reference/next.config.js/rewrites.md) inside `next.config.js` to have some subpaths to be proxied to your existing app.\n\nFor example, let's say you created a Next.js app to be served from `example.com` with the following `next.config.js`. Now, requests for the pages you’ve added to this Next.js app (e.g. `/about` if you’ve added `pages/about.js`) will be handled by Next.js, and requests for any other route (e.g. `/dashboard`) will be proxied to `proxy.example.com`.\n\n> **Note:** If you use [fallback: true/'blocking'](/docs/api-reference/data-fetching/get-static-paths#fallback-true) in `getStaticPaths`, the catch-all fallback `rewrites` defined in `next.config.js` will not be run. They are instead caught by the `getStaticPaths` fallback.\n\n```jsx\n// next.config.js","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/incremental-adoption.md","loc":{"lines":{"from":36,"to":45}}}}],["1110",{"pageContent":"```jsx\n// next.config.js\n\nmodule.exports = {\n  async rewrites() {\n    return {\n      // After checking all Next.js pages (including dynamic routes)\n      // and static files we proxy any other requests\n      fallback: [\n        {\n          source: '/:path*',\n          destination: `https://proxy.example.com/:path*`,\n        },\n      ],\n    }\n\n    // For versions of Next.js < v10.1 you can use a no-op rewrite instead\n    return [\n      // we need to define a no-op rewrite to trigger checking\n      // all pages/static files before we attempt proxying\n      {\n        source: '/:path*',\n        destination: '/:path*',\n      },\n      {\n        source: '/:path*',\n        destination: `https://proxy.example.com/:path*`,\n      },\n    ]\n  },\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/incremental-adoption.md","loc":{"lines":{"from":45,"to":75}}}}],["1111",{"pageContent":"To learn more about rewrites, take a look at our [documentation](/docs/api-reference/next.config.js/rewrites.md).\n\n> **Note:** If you are incrementally migrating to a dynamic route (e.g. `[slug].js`) and using `fallback: true` or `fallback: 'blocking'` along with a fallback `rewrite`, ensure you consider the case where pages are not found. When Next.js matches the dynamic route it stops checking any further routes. Using `notFound: true` in `getStaticProps` will return the 404 page without applying the fallback `rewrite`. If this is not desired, you can use `getServerSideProps` with `stale-while-revalidate` Cache-Control headers when returning your props. Then, you can _manually_ proxy to your existing backend using something like [http-proxy](https://github.com/vercel/next.js/discussions/38839#discussioncomment-3744442) instead of returning `notFound: true`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/incremental-adoption.md","loc":{"lines":{"from":78,"to":80}}}}],["1112",{"pageContent":"Micro-Frontends with Monorepos and Subdomains\n\nNext.js and [Vercel](https://vercel.com) make it straightforward to adopt micro frontends and deploy as a [monorepo](https://vercel.com/blog/monorepos-are-changing-how-teams-build-software?utm_source=next-site&utm_medium=docs&utm_campaign=next-website). This allows you to use [subdomains](https://demo.vercel.pub/platforms-starter-kit) to adopt new applications incrementally. Some benefits of micro-frontends:\n\n- Smaller, more cohesive and maintainable codebases.\n- More scalable organizations with decoupled, autonomous teams.\n- The ability to upgrade, update, or even rewrite parts of the frontend in a more incremental fashion.\n\nOnce your monorepo is set up, push changes to your Git repository as usual and you'll see the commits deployed to the Vercel projects you've connected.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/incremental-adoption.md","loc":{"lines":{"from":82,"to":90}}}}],["1113",{"pageContent":"Conclusion\n\nTo learn more, read about [subpaths](/docs/api-reference/next.config.js/basepath.md) and [rewrites](/docs/api-reference/next.config.js/rewrites.md) or [deploy a Next.js monorepo](https://vercel.com/templates/next.js/monorepo-turborepo).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/migrating/incremental-adoption.md","loc":{"lines":{"from":92,"to":94}}}}],["1114",{"pageContent":"---\ndescription: Dynamic Routes are pages that allow you to add custom params to your URLs. Start creating Dynamic Routes and learn more here.\n---\n\n# Dynamic Routes\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/dynamic-routing\">Dynamic Routing</a></li>\n  </ul>\n</details>\n\nDefining routes by using predefined paths is not always enough for complex applications. In Next.js you can add brackets to a page (`[param]`) to create a dynamic route (a.k.a. url slugs, pretty urls, and others).\n\nConsider the following page `pages/post/[pid].js`:\n\n```jsx\nimport { useRouter } from 'next/router'\n\nconst Post = () => {\n  const router = useRouter()\n  const { pid } = router.query\n\n  return <p>Post: {pid}</p>\n}\n\nexport default Post","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/dynamic-routes.md","loc":{"lines":{"from":1,"to":28}}}}],["1115",{"pageContent":"Any route like `/post/1`, `/post/abc`, etc. will be matched by `pages/post/[pid].js`. The matched path parameter will be sent as a query parameter to the page, and it will be merged with the other query parameters.\n\nFor example, the route `/post/abc` will have the following `query` object:\n\n```json\n{ \"pid\": \"abc\" }\n```\n\nSimilarly, the route `/post/abc?foo=bar` will have the following `query` object:\n\n```json\n{ \"foo\": \"bar\", \"pid\": \"abc\" }\n```\n\nHowever, route parameters will override query parameters with the same name. For example, the route `/post/abc?pid=123` will have the following `query` object:\n\n```json\n{ \"pid\": \"abc\" }\n```\n\nMultiple dynamic route segments work the same way. The page `pages/post/[pid]/[comment].js` will match the route `/post/abc/a-comment` and its `query` object will be:\n\n```json\n{ \"pid\": \"abc\", \"comment\": \"a-comment\" }","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/dynamic-routes.md","loc":{"lines":{"from":31,"to":54}}}}],["1116",{"pageContent":"Client-side navigations to dynamic routes are handled with [`next/link`](/docs/api-reference/next/link.md). If we wanted to have links to the routes used above it will look like this:\n\n```jsx\nimport Link from 'next/link'\n\nfunction Home() {\n  return (\n    <ul>\n      <li>\n        <Link href=\"/post/abc\">Go to pages/post/[pid].js</Link>\n      </li>\n      <li>\n        <Link href=\"/post/abc?foo=bar\">Also goes to pages/post/[pid].js</Link>\n      </li>\n      <li>\n        <Link href=\"/post/abc/a-comment\">\n          Go to pages/post/[pid]/[comment].js\n        </Link>\n      </li>\n    </ul>\n  )\n}\n\nexport default Home\n```\n\nRead our docs for [Linking between pages](/docs/routing/introduction.md#linking-between-pages) to learn more.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/dynamic-routes.md","loc":{"lines":{"from":57,"to":83}}}}],["1117",{"pageContent":"Catch all routes\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/catch-all-routes\">Catch All Routes</a></li>\n  </ul>\n</details>\n\nDynamic routes can be extended to catch all paths by adding three dots (`...`) inside the brackets. For example:\n\n- `pages/post/[...slug].js` not only matches `/post/a`, but also `/post/a/b`, `/post/a/b/c`, and so on.\n- `pages/post/[...slug].js` does not match `/post`.\n\n> **Note**: You can use names other than `slug`, such as: `[...param]`\n\nMatched parameters will be sent as a query parameter (`slug` in the example) to the page, and it will always be an array, so, the path `/post/a` will have the following `query` object:\n\n```json\n{ \"slug\": [\"a\"] }\n```\n\nAnd in the case of `/post/a/b`, and any other matching path, new parameters will be added to the array, like so:\n\n```json\n{ \"slug\": [\"a\", \"b\"] }\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/dynamic-routes.md","loc":{"lines":{"from":85,"to":111}}}}],["1118",{"pageContent":"Optional catch all routes\n\nCatch all routes can be made optional by including the parameter in double brackets (`[[...slug]]`).\n\nFor example, `pages/post/[[...slug]].js` will match `/post`, `/post/a`, `/post/a/b`, and so on.\n\nThe main difference between catch all and optional catch all routes is that with optional, the route without the parameter is also matched (`/post` in the example above).\n\nThe `query` objects are as follows:\n\n```json\n{ } // GET `/post` (empty object)\n{ \"slug\": [\"a\"] } // `GET /post/a` (single-element array)\n{ \"slug\": [\"a\", \"b\"] } // `GET /post/a/b` (multi-element array)\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/dynamic-routes.md","loc":{"lines":{"from":113,"to":127}}}}],["1119",{"pageContent":"Caveats\n\n- Predefined routes take precedence over dynamic routes, and dynamic routes over catch all routes. Take a look at the following examples:\n  - `pages/post/create.js` - Will match `/post/create`\n  - `pages/post/[pid].js` - Will match `/post/1`, `/post/abc`, etc. But not `/post/create`\n  - `pages/post/[...slug].js` - Will match `/post/1/2`, `/post/a/b/c`, etc. But not `/post/create`, `/post/abc`\n- Pages that are statically optimized by [Automatic Static Optimization](/docs/advanced-features/automatic-static-optimization.md) will be hydrated without their route parameters provided, i.e `query` will be an empty object (`{}`).\n\n  After hydration, Next.js will trigger an update to your application to provide the route parameters in the `query` object.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/dynamic-routes.md","loc":{"lines":{"from":129,"to":137}}}}],["1120",{"pageContent":"Related\n\nFor more information on what to do next, we recommend the following sections:\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/link.md\">\n    <b>next/link:</b>\n    <small>Enable client-side transitions with next/link.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/routing/introduction.md\">\n    <b>Routing:</b>\n    <small>Learn more about routing in Next.js.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/dynamic-routes.md","loc":{"lines":{"from":139,"to":155}}}}],["1121",{"pageContent":"---\ndescription: Client-side navigations are also possible using the Next.js Router instead of the Link component. Learn more here.\n---\n\n# Imperatively\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/using-router\">Using Router</a></li>\n  </ul>\n</details>\n\n[`next/link`](/docs/api-reference/next/link.md) should be able to cover most of your routing needs, but you can also do client-side navigations without it, take a look at the [documentation for `next/router`](/docs/api-reference/next/router.md).\n\nThe following example shows how to do basic page navigations with [`useRouter`](/docs/api-reference/next/router.md#useRouter):\n\n```jsx\nimport { useRouter } from 'next/router'\n\nexport default function ReadMore() {\n  const router = useRouter()\n\n  return (\n    <button onClick={() => router.push('/about')}>\n      Click here to read more\n    </button>\n  )\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/imperatively.md","loc":{"lines":{"from":1,"to":30}}}}],["1122",{"pageContent":"---\ndescription: Next.js has a built-in, opinionated, and file-system based Router. You can learn how it works here.\n---\n\n# Routing\n\nNext.js has a file-system based router built on the [concept of pages](/docs/basic-features/pages.md).\n\nWhen a file is added to the `pages` directory, it's automatically available as a route.\n\nThe files inside the `pages` directory can be used to define most common patterns.\n\n#### Index routes\n\nThe router will automatically route files named `index` to the root of the directory.\n\n- `pages/index.js` → `/`\n- `pages/blog/index.js` → `/blog`\n\n#### Nested routes\n\nThe router supports nested files. If you create a nested folder structure, files will automatically be routed in the same way still.\n\n- `pages/blog/first-post.js` → `/blog/first-post`\n- `pages/dashboard/settings/username.js` → `/dashboard/settings/username`","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/introduction.md","loc":{"lines":{"from":1,"to":25}}}}],["1123",{"pageContent":"Dynamic route segments\n\nTo match a dynamic segment, you can use the bracket syntax. This allows you to match named parameters.\n\n- `pages/blog/[slug].js` → `/blog/:slug` (`/blog/hello-world`)\n- `pages/[username]/settings.js` → `/:username/settings` (`/foo/settings`)\n- `pages/post/[...all].js` → `/post/*` (`/post/2020/id/title`)\n\n> Check out the [Dynamic Routes documentation](/docs/routing/dynamic-routes.md) to learn more about how they work.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/introduction.md","loc":{"lines":{"from":27,"to":35}}}}],["1124",{"pageContent":"Linking between pages\n\nThe Next.js router allows you to do client-side route transitions between pages, similar to a single-page application.\n\nA React component called `Link` is provided to do this client-side route transition.\n\n```jsx\nimport Link from 'next/link'\n\nfunction Home() {\n  return (\n    <ul>\n      <li>\n        <Link href=\"/\">Home</Link>\n      </li>\n      <li>\n        <Link href=\"/about\">About Us</Link>\n      </li>\n      <li>\n        <Link href=\"/blog/hello-world\">Blog Post</Link>\n      </li>\n    </ul>\n  )\n}\n\nexport default Home","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/introduction.md","loc":{"lines":{"from":37,"to":62}}}}],["1125",{"pageContent":"The example above uses multiple links. Each one maps a path (`href`) to a known page:\n\n- `/` → `pages/index.js`\n- `/about` → `pages/about.js`\n- `/blog/hello-world` → `pages/blog/[slug].js`\n\nAny `<Link />` in the viewport (initially or through scroll) will be prefetched by default (including the corresponding data) for pages using [Static Generation](/docs/basic-features/data-fetching/get-static-props.md). The corresponding data for [server-rendered](/docs/basic-features/data-fetching/get-server-side-props.md) routes is fetched _only when_ the `<Link />` is clicked.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/introduction.md","loc":{"lines":{"from":65,"to":71}}}}],["1126",{"pageContent":"Linking to dynamic paths\n\nYou can also use interpolation to create the path, which comes in handy for [dynamic route segments](#dynamic-route-segments). For example, to show a list of posts which have been passed to the component as a prop:\n\n```jsx\nimport Link from 'next/link'\n\nfunction Posts({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li key={post.id}>\n          <Link href={`/blog/${encodeURIComponent(post.slug)}`}>\n            {post.title}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default Posts","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/introduction.md","loc":{"lines":{"from":73,"to":94}}}}],["1127",{"pageContent":"> [`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent) is used in the example to keep the path utf-8 compatible.\n\nAlternatively, using a URL Object:\n\n```jsx\nimport Link from 'next/link'\n\nfunction Posts({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li key={post.id}>\n          <Link\n            href={{\n              pathname: '/blog/[slug]',\n              query: { slug: post.slug },\n            }}\n          >\n            {post.title}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default Posts\n```\n\nNow, instead of using interpolation to create the path, we use a URL object in `href` where:\n\n- `pathname` is the name of the page in the `pages` directory. `/blog/[slug]` in this case.\n- `query` is an object with the dynamic segment. `slug` in this case.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/introduction.md","loc":{"lines":{"from":97,"to":129}}}}],["1128",{"pageContent":"Injecting the router\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/dynamic-routing\">Dynamic Routing</a></li>\n  </ul>\n</details>\n\nTo access the [`router` object](/docs/api-reference/next/router.md#router-object) in a React component you can use [`useRouter`](/docs/api-reference/next/router.md#useRouter) or [`withRouter`](/docs/api-reference/next/router.md#withRouter).\n\nIn general we recommend using [`useRouter`](/docs/api-reference/next/router.md#useRouter).\n\n## Learn more\n\nThe router is divided in multiple parts:\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/link.md\">\n    <b>next/link:</b>\n    <small>Handle client-side navigations.</small>\n  </a>\n</div>\n\n<div class=\"card\">\n  <a href=\"/docs/api-reference/next/router.md\">\n    <b>next/router:</b>\n    <small>Leverage the router API in your pages.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/introduction.md","loc":{"lines":{"from":131,"to":160}}}}],["1129",{"pageContent":"---\ndescription: You can use shallow routing to change the URL without triggering a new page change. Learn more here.\n---\n\n# Shallow Routing\n\n<details>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-shallow-routing\">Shallow Routing</a></li>\n  </ul>\n</details>\n\nShallow routing allows you to change the URL without running data fetching methods again, that includes [`getServerSideProps`](/docs/basic-features/data-fetching/get-server-side-props.md), [`getStaticProps`](/docs/basic-features/data-fetching/get-static-props.md), and [`getInitialProps`](/docs/api-reference/data-fetching/get-initial-props.md).\n\nYou'll receive the updated `pathname` and the `query` via the [`router` object](/docs/api-reference/next/router.md#router-object) (added by [`useRouter`](/docs/api-reference/next/router.md#useRouter) or [`withRouter`](/docs/api-reference/next/router.md#withRouter)), without losing state.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/shallow-routing.md","loc":{"lines":{"from":1,"to":16}}}}],["1130",{"pageContent":"To enable shallow routing, set the `shallow` option to `true`. Consider the following example:\n\n```jsx\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/router'\n\n// Current URL is '/'\nfunction Page() {\n  const router = useRouter()\n\n  useEffect(() => {\n    // Always do navigations after the first render\n    router.push('/?counter=10', undefined, { shallow: true })\n  }, [])\n\n  useEffect(() => {\n    // The counter changed!\n  }, [router.query.counter])\n}\n\nexport default Page","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/shallow-routing.md","loc":{"lines":{"from":18,"to":38}}}}],["1131",{"pageContent":"The URL will get updated to `/?counter=10`. and the page won't get replaced, only the state of the route is changed.\n\nYou can also watch for URL changes via [`componentDidUpdate`](https://react.dev/reference/react/Component#componentdidupdate) as shown below:\n\n```jsx\ncomponentDidUpdate(prevProps) {\n  const { pathname, query } = this.props.router\n  // verify props have changed to avoid an infinite loop\n  if (query.counter !== prevProps.router.query.counter) {\n    // fetch data based on the new query\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/shallow-routing.md","loc":{"lines":{"from":41,"to":53}}}}],["1132",{"pageContent":"Caveats\n\nShallow routing **only** works for URL changes in the current page. For example, let's assume we have another page called `pages/about.js`, and you run this:\n\n```jsx\nrouter.push('/?counter=10', '/about?counter=10', { shallow: true })\n```\n\nSince that's a new page, it'll unload the current page, load the new one and wait for data fetching even though we asked to do shallow routing.\n\nWhen shallow routing is used with middleware it will not ensure the new page matches the current page like previously done without middleware. This is due to middleware being able to rewrite dynamically and can't be verified client-side without a data fetch which is skipped with shallow, so a shallow route change must always be treated as shallow.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/routing/shallow-routing.md","loc":{"lines":{"from":55,"to":65}}}}],["1133",{"pageContent":"---\ndescription: Learn how to set up Next.js with three commonly used testing tools — Cypress, Playwright, Jest, and React Testing Library.\n---\n\n# Testing\n\n<details open>\n  <summary><b>Examples</b></summary>\n  <ul>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-cypress\">Next.js with Cypress</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-playwright\">Next.js with Playwright</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-jest\">Next.js with Jest and React Testing Library</a></li>\n    <li><a href=\"https://github.com/vercel/next.js/tree/canary/examples/with-vitest\">Next.js with Vitest</a></li>\n  </ul>\n</details>\n\nLearn how to set up Next.js with commonly used testing tools: [Cypress](https://nextjs.org/docs/testing#cypress), [Playwright](https://nextjs.org/docs/testing#playwright), and [Jest with React Testing Library](https://nextjs.org/docs/testing#jest-and-react-testing-library).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":1,"to":17}}}}],["1134",{"pageContent":"Cypress\n\nCypress is a test runner used for **End-to-End (E2E)** and **Component Testing**.\n\n### Quickstart\n\nYou can use `create-next-app` with the [with-cypress example](https://github.com/vercel/next.js/tree/canary/examples/with-cypress) to quickly get started.\n\n```bash\nnpx create-next-app@latest --example with-cypress with-cypress-app\n```\n\n### Manual setup\n\nTo get started with Cypress, install the `cypress` package:\n\n```bash\nnpm install --save-dev cypress\n```\n\nAdd Cypress to the `package.json` scripts field:\n\n```json\n\"scripts\": {\n  \"dev\": \"next dev\",\n  \"build\": \"next build\",\n  \"start\": \"next start\",\n  \"cypress\": \"cypress open\",\n}\n```\n\nRun Cypress for the first time to generate examples that use their recommended folder structure:\n\n```bash\nnpm run cypress\n```\n\nYou can look through the generated examples and the [Writing Your First Test](https://docs.cypress.io/guides/getting-started/writing-your-first-test) section of the Cypress Documentation to help you get familiar with Cypress.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":19,"to":56}}}}],["1135",{"pageContent":"Should I use E2E or Component Tests?\n\nThe [Cypress docs contain a guide](https://docs.cypress.io/guides/core-concepts/testing-types) on the difference between these two types of tests and when it is appropriate to use each.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":58,"to":60}}}}],["1136",{"pageContent":"Creating your first Cypress E2E test\n\nAssuming the following two Next.js pages:\n\n```jsx\n// pages/index.js\nimport Link from 'next/link'\n\nexport default function Home() {\n  return (\n    <nav>\n      <h1>Homepage</h1>\n      <Link href=\"/about\">About</Link>\n    </nav>\n  )\n}\n```\n\n```jsx\n// pages/about.js\nexport default function About() {\n  return (\n    <div>\n      <h1>About Page</h1>\n      <Link href=\"/\">Homepage</Link>\n    </div>\n  )\n}\n```\n\nAdd a test to check your navigation is working correctly:\n\n```jsx\n// cypress/e2e/app.cy.js\n\ndescribe('Navigation', () => {\n  it('should navigate to the about page', () => {\n    // Start from the index page\n    cy.visit('http://localhost:3000/')\n\n    // Find a link with an href attribute containing \"about\" and click it\n    cy.get('a[href*=\"about\"]').click()\n\n    // The new url should include \"/about\"\n    cy.url().should('include', '/about')\n\n    // The new page should contain an h1 with \"About page\"\n    cy.get('h1').contains('About Page')\n  })\n})","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":62,"to":111}}}}],["1137",{"pageContent":"You can use `cy.visit(\"/\")` instead of `cy.visit(\"http://localhost:3000/\")` if you add `baseUrl: 'http://localhost:3000'` to the `cypress.config.js` configuration file.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":114,"to":114}}}}],["1138",{"pageContent":"Creating your first Cypress component test\n\nComponent tests build and mount a specific component without having to bundle your whole application or launch a server. This allows for more performant tests that still provide visual feedback and the same API used for Cypress E2E tests.\n\n> **Note:** Since component tests do not launch a Next.js server, capabilities like `<Image />` and `getServerSideProps` which rely on a server being available will not function out-of-the-box. See the [Cypress Next.js docs](https://docs.cypress.io/guides/component-testing/react/overview#Nextjs) for examples of getting these features working within component tests.\n\nAssuming the same components from the previous section, add a test to validate a component is rendering the expected output:\n\n```jsx\n// pages/about.cy.js\nimport AboutPage from './about.js'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":116,"to":126}}}}],["1139",{"pageContent":"Assuming the same components from the previous section, add a test to validate a component is rendering the expected output:\n\n```jsx\n// pages/about.cy.js\nimport AboutPage from './about.js'\n\ndescribe('<AboutPage />', () => {\n  it('should render and display expected content', () => {\n    // Mount the React component for the About page\n    cy.mount(<AboutPage />)\n\n    // The new page should contain an h1 with \"About page\"\n    cy.get('h1').contains('About Page')\n\n    // Validate that a link with the expected URL is present\n    // *Following* the link is better suited to an E2E test\n    cy.get('a[href=\"/\"]').should('be.visible')\n  })\n})\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":126,"to":145}}}}],["1140",{"pageContent":"Running your Cypress tests\n\n#### E2E Tests\n\nSince Cypress E2E tests are testing a real Next.js application they require the Next.js server to be running prior to starting Cypress. We recommend running your tests against your production code to more closely resemble how your application will behave.\n\nRun `npm run build` and `npm run start`, then run `npm run cypress -- --e2e` in another terminal window to start Cypress and run your E2E testing suite.\n\n> **Note:** Alternatively, you can install the `start-server-and-test` package and add it to the `package.json` scripts field: `\"test\": \"start-server-and-test start http://localhost:3000 cypress\"` to start the Next.js production server in conjunction with Cypress. Remember to rebuild your application after new changes.\n\n#### Component Tests\n\nRun `npm run cypress -- --component` to start Cypress and execute your component testing suite.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":147,"to":159}}}}],["1141",{"pageContent":"Getting ready for Continuous Integration (CI)\n\nYou will have noticed that running Cypress so far has opened an interactive browser which is not ideal for CI environments. You can also run Cypress headlessly using the `cypress run` command:\n\n```json\n// package.json\n\n\"scripts\": {\n  //...\n  \"e2e\": \"start-server-and-test dev http://localhost:3000 \\\"cypress open --e2e\\\"\",\n  \"e2e:headless\": \"start-server-and-test dev http://localhost:3000 \\\"cypress run --e2e\\\"\",\n  \"component\": \"cypress open --component\",\n  \"component:headless\": \"cypress run --component\"\n}\n```\n\nYou can learn more about Cypress and Continuous Integration from these resources:\n\n- [Cypress Continuous Integration Docs](https://docs.cypress.io/guides/continuous-integration/introduction)\n- [Cypress GitHub Actions Guide](https://on.cypress.io/github-actions)\n- [Official Cypress GitHub Action](https://github.com/cypress-io/github-action)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":161,"to":181}}}}],["1142",{"pageContent":"Playwright\n\nPlaywright is a testing framework that lets you automate Chromium, Firefox, and WebKit with a single API. You can use it to write **End-to-End (E2E)** and **Integration** tests across all platforms.\n\n### Quickstart\n\nThe fastest way to get started is to use `create-next-app` with the [with-playwright example](https://github.com/vercel/next.js/tree/canary/examples/with-playwright). This will create a Next.js project complete with Playwright all set up.\n\n```bash\nnpx create-next-app@latest --example with-playwright with-playwright-app\n```\n\n### Manual setup\n\nYou can also use `npm init playwright` to add Playwright to an existing `NPM` project.\n\nTo manually get started with Playwright, install the `@playwright/test` package:\n\n```bash\nnpm install --save-dev @playwright/test\n```\n\nAdd Playwright to the `package.json` scripts field:\n\n```json\n\"scripts\": {\n  \"dev\": \"next dev\",\n  \"build\": \"next build\",\n  \"start\": \"next start\",\n  \"test:e2e\": \"playwright test\",\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":183,"to":214}}}}],["1143",{"pageContent":"Creating your first Playwright end-to-end test\n\nAssuming the following two Next.js pages:\n\n```jsx\n// pages/index.js\nimport Link from 'next/link'\n\nexport default function Home() {\n  return (\n    <nav>\n      <Link href=\"/about\">About</Link>\n    </nav>\n  )\n}\n```\n\n```jsx\n// pages/about.js\nexport default function About() {\n  return (\n    <div>\n      <h1>About Page</h1>\n    </div>\n  )\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":216,"to":241}}}}],["1144",{"pageContent":"```jsx\n// pages/about.js\nexport default function About() {\n  return (\n    <div>\n      <h1>About Page</h1>\n    </div>\n  )\n}\n```\n\nAdd a test to verify that your navigation is working correctly:\n\n```jsx\n// e2e/example.spec.ts\n\nimport { test, expect } from '@playwright/test'\n\ntest('should navigate to the about page', async ({ page }) => {\n  // Start from the index page (the baseURL is set via the webServer in the playwright.config.ts)\n  await page.goto('http://localhost:3000/')\n  // Find an element with the text 'About Page' and click on it\n  await page.click('text=About')\n  // The new URL should be \"/about\" (baseURL is used there)\n  await expect(page).toHaveURL('http://localhost:3000/about')\n  // The new page should contain an h1 with \"About Page\"\n  await expect(page.locator('h1')).toContainText('About Page')\n})","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":241,"to":268}}}}],["1145",{"pageContent":"You can use `page.goto(\"/\")` instead of `page.goto(\"http://localhost:3000/\")`, if you add [`\"baseURL\": \"http://localhost:3000\"`](https://playwright.dev/docs/api/class-testoptions#test-options-base-url) to the `playwright.config.ts` configuration file.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":271,"to":271}}}}],["1146",{"pageContent":"Running your Playwright tests\n\nSince Playwright is testing a real Next.js application, it requires the Next.js server to be running prior to starting Playwright. It is recommended to run your tests against your production code to more closely resemble how your application will behave.\n\nRun `npm run build` and `npm run start`, then run `npm run test:e2e` in another terminal window to run the Playwright tests.\n\n> **Note:** Alternatively, you can use the [`webServer`](https://playwright.dev/docs/test-advanced#launching-a-development-web-server-during-the-tests) feature to let Playwright start the development server and wait until it's fully available.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":273,"to":279}}}}],["1147",{"pageContent":"Running Playwright on Continuous Integration (CI)\n\nPlaywright will by default run your tests in the [headless mode](https://playwright.dev/docs/ci#running-headed). To install all the Playwright dependencies, run `npx playwright install-deps`.\n\nYou can learn more about Playwright and Continuous Integration from these resources:\n\n- [Getting started with Playwright](https://playwright.dev/docs/intro)\n- [Use a development server](https://playwright.dev/docs/test-advanced#launching-a-development-web-server-during-the-tests)\n- [Playwright on your CI provider](https://playwright.dev/docs/ci)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":281,"to":289}}}}],["1148",{"pageContent":"Jest and React Testing Library\n\nJest and React Testing Library are frequently used together for **Unit Testing**. There are three ways you can start using Jest within your Next.js application:\n\n1. Using one of our [quickstart examples](https://nextjs.org/docs/testing#quickstart-2)\n2. With the [Next.js Rust Compiler](https://nextjs.org/docs/testing#setting-up-jest-with-the-rust-compiler)\n3. With [Babel](https://nextjs.org/docs/testing#setting-up-jest-with-babel)\n\nThe following sections will go through how you can set up Jest with each of these options:\n\n### Quickstart\n\nYou can use `create-next-app` with the [with-jest](https://github.com/vercel/next.js/tree/canary/examples/with-jest) example to quickly get started with Jest and React Testing Library:\n\n```bash\nnpx create-next-app@latest --example with-jest with-jest-app\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":291,"to":307}}}}],["1149",{"pageContent":"Setting up Jest (with the Rust Compiler)\n\nSince the release of [Next.js 12](https://nextjs.org/blog/next-12), Next.js now has built-in configuration for Jest.\n\nTo set up Jest, install `jest`, `jest-environment-jsdom`, `@testing-library/react`, `@testing-library/jest-dom`:\n\n```bash\nnpm install --save-dev jest jest-environment-jsdom @testing-library/react @testing-library/jest-dom","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":309,"to":316}}}}],["1150",{"pageContent":"Create a `jest.config.mjs` file in your project's root directory and add the following:\n\n```jsx\n// jest.config.mjs\nimport nextJest from 'next/jest.js'\n\nconst createJestConfig = nextJest({\n  // Provide the path to your Next.js app to load next.config.js and .env files in your test environment\n  dir: './',\n})\n\n// Add any custom config to be passed to Jest\n/** @type {import('jest').Config} */\nconst config = {\n  // Add more setup options before each test is run\n  // setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],\n\n  testEnvironment: 'jest-environment-jsdom',\n}\n\n// createJestConfig is exported this way to ensure that next/jest can load the Next.js config which is async\nexport default createJestConfig(config)","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":319,"to":340}}}}],["1151",{"pageContent":"Under the hood, `next/jest` is automatically configuring Jest for you, including:\n\n- Setting up `transform` using [SWC](https://nextjs.org/docs/advanced-features/compiler)\n- Auto mocking stylesheets (`.css`, `.module.css`, and their scss variants), image imports and [`next/font`](https://nextjs.org/docs/basic-features/font-optimization)\n- Loading `.env` (and all variants) into `process.env`\n- Ignoring `node_modules` from test resolving and transforms\n- Ignoring `.next` from test resolving\n- Loading `next.config.js` for flags that enable SWC transforms\n\n> **Note**: To test environment variables directly, load them manually in a separate setup script or in your `jest.config.js` file. For more information, please see [Test Environment Variables](https://nextjs.org/docs/basic-features/environment-variables#test-environment-variables).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":343,"to":352}}}}],["1152",{"pageContent":"Setting up Jest (with Babel)\n\nIf you opt out of the [Rust Compiler](https://nextjs.org/docs/advanced-features/compiler), you will need to manually configure Jest and install `babel-jest` and `identity-obj-proxy` in addition to the packages above.\n\nHere are the recommended options to configure Jest for Next.js:\n\n```jsx\n// jest.config.js\nmodule.exports = {\n  collectCoverage: true,\n  // on node 14.x coverage provider v8 offers good speed and more or less good report\n  coverageProvider: 'v8',\n  collectCoverageFrom: [\n    '**/*.{js,jsx,ts,tsx}',\n    '!**/*.d.ts',\n    '!**/node_modules/**',\n    '!<rootDir>/out/**',\n    '!<rootDir>/.next/**',\n    '!<rootDir>/*.config.js',\n    '!<rootDir>/coverage/**',\n  ],\n  moduleNameMapper: {\n    // Handle CSS imports (with CSS modules)\n    // https://jestjs.io/docs/webpack#mocking-css-modules\n    '^.+\\\\.module\\\\.(css|sass|scss)$': 'identity-obj-proxy',","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":354,"to":378}}}}],["1153",{"pageContent":"// Handle CSS imports (without CSS modules)\n    '^.+\\\\.(css|sass|scss)$': '<rootDir>/__mocks__/styleMock.js',\n\n    // Handle image imports\n    // https://jestjs.io/docs/webpack#handling-static-assets\n    '^.+\\\\.(png|jpg|jpeg|gif|webp|avif|ico|bmp|svg)$/i': `<rootDir>/__mocks__/fileMock.js`,\n\n    // Handle module aliases\n    '^@/components/(.*)$': '<rootDir>/components/$1',\n  },\n  // Add more setup options before each test is run\n  // setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],\n  testPathIgnorePatterns: ['<rootDir>/node_modules/', '<rootDir>/.next/'],\n  testEnvironment: 'jsdom',\n  transform: {\n    // Use babel-jest to transpile tests with the next/babel preset\n    // https://jestjs.io/docs/configuration#transform-objectstring-pathtotransformer--pathtotransformer-object\n    '^.+\\\\.(js|jsx|ts|tsx)$': ['babel-jest', { presets: ['next/babel'] }],\n  },\n  transformIgnorePatterns: [\n    '/node_modules/',\n    '^.+\\\\.module\\\\.(css|sass|scss)$',\n  ],\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":380,"to":403}}}}],["1154",{"pageContent":"You can learn more about each configuration option in the [Jest docs](https://jestjs.io/docs/configuration).\n\n**Handling stylesheets and image imports**\n\nStylesheets and images aren't used in the tests but importing them may cause errors, so they will need to be mocked. Create the mock files referenced in the configuration above - `fileMock.js` and `styleMock.js` - inside a `__mocks__` directory:\n\n```js\n// __mocks__/fileMock.js\nmodule.exports = {\n  src: '/img.jpg',\n  height: 24,\n  width: 24,\n  blurDataURL: 'data:image/png;base64,imagedata',\n}\n```\n\n```js\n// __mocks__/styleMock.js\nmodule.exports = {}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":406,"to":424}}}}],["1155",{"pageContent":"```js\n// __mocks__/styleMock.js\nmodule.exports = {}\n```\n\nFor more information on handling static assets, please refer to the [Jest Docs](https://jestjs.io/docs/webpack#handling-static-assets).\n\n**Optional: Extend Jest with custom matchers**\n\n`@testing-library/jest-dom` includes a set of convenient [custom matchers](https://github.com/testing-library/jest-dom#custom-matchers) such as `.toBeInTheDocument()` making it easier to write tests. You can import the custom matchers for every test by adding the following option to the Jest configuration file:\n\n```js\n// jest.config.js\nsetupFilesAfterEnv: ['<rootDir>/jest.setup.js']\n```\n\nThen, inside `jest.setup.js`, add the following import:\n\n```jsx\n// jest.setup.js\nimport '@testing-library/jest-dom/extend-expect'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":424,"to":444}}}}],["1156",{"pageContent":"Then, inside `jest.setup.js`, add the following import:\n\n```jsx\n// jest.setup.js\nimport '@testing-library/jest-dom/extend-expect'\n```\n\nIf you need to add more setup options before each test, it's common to add them to the `jest.setup.js` file above.\n\n**Optional: Absolute Imports and Module Path Aliases**\n\nIf your project is using [Module Path Aliases](https://nextjs.org/docs/advanced-features/module-path-aliases), you will need to configure Jest to resolve the imports by matching the paths option in the `jsconfig.json` file with the `moduleNameMapper` option in the `jest.config.js` file. For example:\n\n```json\n// tsconfig.json or jsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/components/*\": [\"components/*\"]\n    }\n  }\n}\n```\n\n```jsx\n// jest.config.js\nmoduleNameMapper: {\n  '^@/components/(.*)$': '<rootDir>/components/$1',\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":444,"to":474}}}}],["1157",{"pageContent":"Creating your tests:\n\n**Add a test script to package.json**\n\nAdd the Jest executable in watch mode to the `package.json` scripts:\n\n```jsx\n\"scripts\": {\n  \"dev\": \"next dev\",\n  \"build\": \"next build\",\n  \"start\": \"next start\",\n  \"test\": \"jest --watch\"\n}","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":476,"to":488}}}}],["1158",{"pageContent":"`jest --watch` will re-run tests when a file is changed. For more Jest CLI options, please refer to the [Jest Docs](https://jestjs.io/docs/cli#reference).\n\n**Create your first tests**\n\nYour project is now ready to run tests. Follow Jest's convention by adding tests to the `__tests__` folder in your project's root directory.\n\nFor example, we can add a test to check if the `<Home />` component successfully renders a heading:\n\n```jsx\n// __tests__/index.test.jsx\n\nimport { render, screen } from '@testing-library/react'\nimport Home from '../pages/index'\nimport '@testing-library/jest-dom'\n\ndescribe('Home', () => {\n  it('renders a heading', () => {\n    render(<Home />)\n\n    const heading = screen.getByRole('heading', {\n      name: /welcome to next\\.js!/i,\n    })\n\n    expect(heading).toBeInTheDocument()\n  })\n})","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":491,"to":516}}}}],["1159",{"pageContent":"Optionally, add a [snapshot test](https://jestjs.io/docs/snapshot-testing) to keep track of any unexpected changes to your `<Home />` component:\n\n```jsx\n// __tests__/snapshot.js\n\nimport { render } from '@testing-library/react'\nimport Home from '../pages/index'\n\nit('renders homepage unchanged', () => {\n  const { container } = render(<Home />)\n  expect(container).toMatchSnapshot()\n})","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":519,"to":530}}}}],["1160",{"pageContent":"> **Note**: Test files should not be included inside the pages directory because any files inside the pages directory are considered routes.\n\n**Running your test suite**\n\nRun `npm run test` to run your test suite. After your tests pass or fail, you will notice a list of interactive Jest commands that will be helpful as you add more tests.\n\nFor further reading, you may find these resources helpful:\n\n- [Jest Docs](https://jestjs.io/docs/getting-started)\n- [React Testing Library Docs](https://testing-library.com/docs/react-testing-library/intro/)\n- [Testing Playground](https://testing-playground.com/) - use good testing practices to match elements.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":533,"to":543}}}}],["1161",{"pageContent":"Community Packages and Examples\n\nThe Next.js community has created packages and articles you may find helpful:\n\n- [next-router-mock](https://github.com/scottrippey/next-router-mock) for Storybook.\n- [Test Preview Vercel Deploys with Cypress](https://glebbahmutov.com/blog/develop-preview-test/) by Gleb Bahmutov.\n\nFor more information on what to read next, we recommend:\n\n<div class=\"card\">\n  <a href=\"/docs/basic-features/environment-variables#test-environment-variables.md\">\n    <b>Test Environment Variables</b>\n    <small>Learn more about the test environment variables.</small>\n  </a>\n</div>","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/testing.md","loc":{"lines":{"from":545,"to":559}}}}],["1162",{"pageContent":"---\ndescription: Learn how to upgrade Next.js.\n---\n\n# Upgrade Guide","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":1,"to":5}}}}],["1163",{"pageContent":"Upgrading from 12 to 13\n\nTo update to Next.js version 13, run the following command using your preferred package manager:\n\n```bash\nnpm i next@latest react@latest react-dom@latest eslint-config-next@latest\n# or\nyarn add next@latest react@latest react-dom@latest eslint-config-next@latest\n# or\npnpm up next react react-dom eslint-config-next --latest\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":7,"to":17}}}}],["1164",{"pageContent":"v13 Summary","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":19,"to":19}}}}],["1165",{"pageContent":"- The [Supported Browsers](/docs/basic-features/supported-browsers-features.md) have been changed to drop Internet Explorer and target modern browsers.\n- The minimum Node.js version has been bumped from 12.22.0 to 14.6.0, since 12.x has reached end-of-life.\n- The minimum React version has been bumped from 17.0.2 to 18.2.0.\n- The `swcMinify` configuration property was changed from `false` to `true`. See [Next.js Compiler](/docs/advanced-features/compiler.md) for more info.\n- The `next/image` import was renamed to `next/legacy/image`. The `next/future/image` import was renamed to `next/image`. A [codemod is available](/docs/advanced-features/codemods.md#next-image-to-legacy-image) to safely and automatically rename your imports.\n- The `next/link` child can no longer be `<a>`. Add the `legacyBehavior` prop to use the legacy behavior or remove the `<a>` to upgrade. A [codemod is available](/docs/advanced-features/codemods.md#new-link) to automatically upgrade your code.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":21,"to":26}}}}],["1166",{"pageContent":"- The `target` configuration property has been removed and superseded by [Output File Tracing](https://nextjs.org/docs/advanced-features/output-file-tracing).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":27,"to":27}}}}],["1167",{"pageContent":"Migrating shared features\n\nNext.js 13 introduces a new [`app` directory](https://beta.nextjs.org/docs/routing/fundamentals) with new features and conventions. However, upgrading to Next.js 13 does **not** require using the new [`app` directory](https://beta.nextjs.org/docs/routing/fundamentals#the-app-directory).\n\nYou can continue using `pages` with new features that work in both directories, such as the updated [Image component](#image-component), [Link component](#link-component), [Script component](#script-component), and [Font optimization](#font-optimization).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":29,"to":33}}}}],["1168",{"pageContent":"`<Image/>` Component\n\nNext.js 12 introduced many improvements to the Image Component with a temporary import: `next/future/image`. These improvements included less client-side JavaScript, easier ways to extend and style images, better accessibility, and native browser lazy loading.\n\nStarting in Next.js 13, this new behavior is now the default for `next/image`.\n\nThere are two codemods to help you migrate to the new Image Component:","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":35,"to":41}}}}],["1169",{"pageContent":"Starting in Next.js 13, this new behavior is now the default for `next/image`.\n\nThere are two codemods to help you migrate to the new Image Component:\n\n- [next-image-to-legacy-image](/docs/advanced-features/codemods.md#next-image-to-legacy-image): This codemod will safely and automatically rename `next/image` imports to `next/legacy/image` to maintain the same behavior as Next.js 12. We recommend running this codemod to quickly update to Next.js 13 automatically.\n- [next-image-experimental](/docs/advanced-features/codemods.md#next-image-experimental-experimental): After running the previous codemod, you can optionally run this experimental codemod to upgrade `next/legacy/image` to the new `next/image`, which will remove unused props and add inline styles. Please note this codemod is experimental and only covers static usage (such as `<Image src={img} layout=\"responsive\" />`) but not dynamic usage (such as `<Image {...props} />`).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":41,"to":46}}}}],["1170",{"pageContent":"Alternatively, you can manually update by following the [migration guide](/docs/advanced-features/codemods.md#next-image-experimental-experimental) and also see the [legacy comparison](/docs/api-reference/next/legacy/image.md#comparison).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":48,"to":48}}}}],["1171",{"pageContent":"`<Link>` Component\n\nThe [`<Link>` Component](/docs/api-reference/next/link.md) no longer requires manually adding an `<a>` tag as a child. This behavior was added as an experimental option in [version 12.2](https://nextjs.org/blog/next-12-2) and is now the default. In Next.js 13, `<Link>` always renders `<a>` and allows you to forward props to the underlying tag.\n\nFor example:\n\n```jsx\nimport Link from 'next/link'\n\n// Next.js 12: `<a>` has to be nested otherwise it's excluded\n<Link href=\"/about\">\n  <a>About</a>\n</Link>\n\n// Next.js 13: `<Link>` always renders `<a>` under the hood\n<Link href=\"/about\">\n  About\n</Link>\n```\n\nTo upgrade your links to Next.js 13, you can use the [`new-link` codemod](/docs/advanced-features/codemods.md#new-link).\n\n### `<Script>` Component\n\nThe behavior of [`next/script`](/docs/api-reference/next/script.md) has been updated to support both `pages` and `app`. If incrementally adopting `app`, read the [upgrade guide](https://beta.nextjs.org/docs/upgrade-guide).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":50,"to":74}}}}],["1172",{"pageContent":"Font Optimization\n\nPreviously, Next.js helped you optimize fonts by inlining font CSS. Version 13 introduces the new [`next/font`](/docs/basic-features/font-optimization.md) module which gives you the ability to customize your font loading experience while still ensuring great performance and privacy.\n\nSee [Optimizing Fonts](/docs/basic-features/font-optimization.md) to learn how to use `next/font`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":76,"to":80}}}}],["1173",{"pageContent":"Upgrading to 12.2\n\nIf you were using Middleware prior to `12.2`, please see the [upgrade guide](https://nextjs.org/docs/messages/middleware-upgrade-guide) for more information.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":82,"to":84}}}}],["1174",{"pageContent":"Upgrading from 11 to 12\n\n### Minimum Node.js version\n\nThe minimum Node.js version has been bumped from 12.0.0 to 12.22.0 which is the first version of Node.js with native ES Modules support.\n\n### Upgrade React version to latest\n\nThe minimum required React version is `17.0.2`. To upgrade you can run the following command in the terminal:\n\n```\nnpm install react@latest react-dom@latest\n```\n\nOr using `yarn`:\n\n```\nyarn add react@latest react-dom@latest\n```\n\n### Upgrade Next.js version to 12\n\nTo upgrade you can run the following command in the terminal:\n\n```\nnpm install next@12\n```\n\nor\n\n```\nyarn add next@12\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":86,"to":118}}}}],["1175",{"pageContent":"SWC replacing Babel\n\nNext.js now uses a Rust-based compiler, [SWC](https://swc.rs/), to compile JavaScript/TypeScript. This new compiler is up to 17x faster than Babel when compiling individual files and allows for up to 5x faster Fast Refresh.\n\nNext.js provides full backwards compatibility with applications that have [custom Babel configuration](https://nextjs.org/docs/advanced-features/customizing-babel-config). All transformations that Next.js handles by default like styled-jsx and tree-shaking of `getStaticProps` / `getStaticPaths` / `getServerSideProps` have been ported to Rust.\n\nWhen an application has a custom Babel configuration, Next.js will automatically opt-out of using SWC for compiling JavaScript/Typescript and will fall back to using Babel in the same way that it was used in Next.js 11.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":120,"to":126}}}}],["1176",{"pageContent":"Many of the integrations with external libraries that currently require custom Babel transformations will be ported to Rust-based SWC transforms in the near future. These include but are not limited to:\n\n- Styled Components\n- Emotion\n- Relay\n\nIn order to prioritize transforms that will help you adopt SWC, please provide your `.babelrc` on [the feedback thread](https://github.com/vercel/next.js/discussions/30174).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":128,"to":134}}}}],["1177",{"pageContent":"SWC replacing Terser for minification\n\nYou can opt-in to replacing Terser with SWC for minifying JavaScript up to 7x faster using a flag in `next.config.js`:\n\n```js\nmodule.exports = {\n  swcMinify: true,\n}\n```\n\nMinification using SWC is an opt-in flag to ensure it can be tested against more real-world Next.js applications before it becomes the default in Next.js 12.1. If you have feedback about minification, please leave it on [the feedback thread](https://github.com/vercel/next.js/discussions/30237).\n\n### Improvements to styled-jsx CSS parsing\n\nOn top of the Rust-based compiler, we've implemented a new CSS parser based on the CSS parser that was used for the styled-jsx Babel transform. This new parser has improved handling of CSS and now errors when invalid CSS is used that would previously slip through and cause unexpected behavior.\n\nBecause of this change, invalid CSS will throw an error during development and `next build`. This change only affects styled-jsx usage.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":136,"to":152}}}}],["1178",{"pageContent":"`next/image` changed wrapping element\n\n`next/image` now renders the `<img>` inside a `<span>` instead of `<div>`.\n\nIf your application has specific CSS targeting span, for example, `.container span`, upgrading to Next.js 12 might incorrectly match the wrapping element inside the `<Image>` component. You can avoid this by restricting the selector to a specific class such as `.container span.item` and updating the relevant component with that className, such as `<span className=\"item\" />`.\n\nIf your application has specific CSS targeting the `next/image` `<div>` tag, for example `.container div`, it may not match anymore. You can update the selector `.container span`, or preferably, add a new `<div className=\"wrapper\">` wrapping the `<Image>` component and target that instead such as `.container .wrapper`.\n\nThe `className` prop is unchanged and will still be passed to the underlying `<img>` element.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":154,"to":162}}}}],["1179",{"pageContent":"The `className` prop is unchanged and will still be passed to the underlying `<img>` element.\n\nSee the [documentation](https://nextjs.org/docs/basic-features/image-optimization#styling) for more info.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":162,"to":164}}}}],["1180",{"pageContent":"Next.js' HMR connection now uses a WebSocket\n\nPreviously, Next.js used a [server-sent events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events) connection to receive HMR events. Next.js 12 now uses a WebSocket connection.\n\nIn some cases when proxying requests to the Next.js dev server, you will need to ensure the upgrade request is handled correctly. For example, in `nginx` you would need to add the following configuration:\n\n```nginx\nlocation /_next/webpack-hmr {\n    proxy_pass http://localhost:3000/_next/webpack-hmr;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n}\n```\n\nFor custom servers, such as `express`, you may need to use `app.all` to ensure the request is passed correctly, for example:\n\n```js\napp.all('/_next/webpack-hmr', (req, res) => {\n  nextjsRequestHandler(req, res)\n})\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":166,"to":187}}}}],["1181",{"pageContent":"Webpack 4 support has been removed\n\nIf you are already using webpack 5 you can skip this section.\n\nNext.js has adopted webpack 5 as the default for compilation in Next.js 11. As communicated in the [webpack 5 upgrading documentation](https://nextjs.org/docs/messages/webpack5) Next.js 12 removes support for webpack 4.\n\nIf your application is still using webpack 4 using the opt-out flag you will now see an error linking to the [webpack 5 upgrading documentation](https://nextjs.org/docs/messages/webpack5).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":189,"to":195}}}}],["1182",{"pageContent":"`target` option deprecated\n\nIf you do not have `target` in `next.config.js` you can skip this section.\n\nThe target option has been deprecated in favor of built-in support for tracing what dependencies are needed to run a page.\n\nDuring `next build`, Next.js will automatically trace each page and its dependencies to determine all of the files that are needed for deploying a production version of your application.\n\nIf you are currently using the `target` option set to `serverless` please read the [documentation on how to leverage the new output](https://nextjs.org/docs/advanced-features/output-file-tracing).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":197,"to":205}}}}],["1183",{"pageContent":"Upgrading from version 10 to 11\n\n### Upgrade React version to latest\n\nMost applications already use the latest version of React, with Next.js 11 the minimum React version has been updated to 17.0.2.\n\nTo upgrade you can run the following command:\n\n```\nnpm install react@latest react-dom@latest\n```\n\nOr using `yarn`:\n\n```\nyarn add react@latest react-dom@latest\n```\n\n### Upgrade Next.js version to 11\n\nTo upgrade you can run the following command in the terminal:\n\n```\nnpm install next@11\n```\n\nor\n\n```\nyarn add next@11\n```\n\n### Webpack 5\n\nWebpack 5 is now the default for all Next.js applications. If you did not have custom webpack configuration your application is already using webpack 5. If you do have custom webpack configuration you can refer to the [Next.js webpack 5 documentation](https://nextjs.org/docs/messages/webpack5) for upgrading guidance.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":207,"to":241}}}}],["1184",{"pageContent":"Cleaning the `distDir` is now a default\n\nThe build output directory (defaults to `.next`) is now cleared by default except for the Next.js caches. You can refer to [the cleaning `distDir` RFC](https://github.com/vercel/next.js/discussions/6009) for more information.\n\nIf your application was relying on this behavior previously you can disable the new default behavior by adding the `cleanDistDir: false` flag in `next.config.js`.\n\n### `PORT` is now supported for `next dev` and `next start`\n\nNext.js 11 supports the `PORT` environment variable to set the port the application has to run on. Using `-p`/`--port` is still recommended but if you were prohibited from using `-p` in any way you can now use `PORT` as an alternative:\n\nExample:\n\n```\nPORT=4000 next start\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":243,"to":257}}}}],["1185",{"pageContent":"`next.config.js` customization to import images\n\nNext.js 11 supports static image imports with `next/image`. This new feature relies on being able to process image imports. If you previously added the `next-images` or `next-optimized-images` packages you can either move to the new built-in support using `next/image` or disable the feature:\n\n```js\nmodule.exports = {\n  images: {\n    disableStaticImages: true,\n  },\n}\n```\n\n### Remove `super.componentDidCatch()` from `pages/_app.js`\n\nThe `next/app` component's `componentDidCatch` has been deprecated since Next.js 9 as it's no longer needed and has since been a no-op, in Next.js 11 it has been removed.\n\nIf your `pages/_app.js` has a custom `componentDidCatch` method you can remove `super.componentDidCatch` as it is no longer needed.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":259,"to":275}}}}],["1186",{"pageContent":"Remove `Container` from `pages/_app.js`\n\nThis export has been deprecated since Next.js 9 as it's no longer needed and has since been a no-op with a warning during development. In Next.js 11 it has been removed.\n\nIf your `pages/_app.js` imports `Container` from `next/app` you can remove `Container` as it has been removed. Learn more in [the documentation](https://nextjs.org/docs/messages/app-container-deprecated).\n\n### Remove `props.url` usage from page components\n\nThis property has been deprecated since Next.js 4 and has since shown a warning during development. With the introduction of `getStaticProps` / `getServerSideProps` these methods already disallowed usage of `props.url`. In Next.js 11 it has been removed completely.\n\nYou can learn more in [the documentation](https://nextjs.org/docs/messages/url-deprecated).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":277,"to":287}}}}],["1187",{"pageContent":"Remove `unsized` property on `next/image`\n\nThe `unsized` property on `next/image` was deprecated in Next.js 10.0.1. You can use `layout=\"fill\"` instead. In Next.js 11 `unsized` was removed.\n\n### Remove `modules` property on `next/dynamic`\n\nThe `modules` and `render` option for `next/dynamic` have been deprecated since Next.js 9.5 showing a warning that it has been deprecated. This was done in order to make `next/dynamic` close to `React.lazy` in API surface. In Next.js 11 the `modules` and `render` options have been removed.\n\nThis option hasn't been mentioned in the documentation since Next.js 8 so it's less likely that your application is using it.\n\nIf your application does use `modules` and `render` you can refer to [the documentation](https://nextjs.org/docs/messages/next-dynamic-modules).\n\n### Remove `Head.rewind`\n\n`Head.rewind` has been a no-op since Next.js 9.5, in Next.js 11 it was removed. You can safely remove your usage of `Head.rewind`.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":289,"to":303}}}}],["1188",{"pageContent":"Remove `Head.rewind`\n\n`Head.rewind` has been a no-op since Next.js 9.5, in Next.js 11 it was removed. You can safely remove your usage of `Head.rewind`.\n\n### Moment.js locales excluded by default\n\nMoment.js includes translations for a lot of locales by default. Next.js now automatically excludes these locales by default to optimize bundle size for applications using Moment.js.\n\nTo load a specific locale use this snippet:\n\n```js\nimport moment from 'moment'\nimport 'moment/locale/ja'\n\nmoment.locale('ja')\n```\n\nYou can opt-out of this new default by adding `excludeDefaultMomentLocales: false` to `next.config.js` if you do not want the new behavior, do note it's highly recommended to not disable this new optimization as it significantly reduces the size of Moment.js.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":303,"to":320}}}}],["1189",{"pageContent":"Update usage of `router.events`\n\nIn case you're accessing `router.events` during rendering, in Next.js 11 `router.events` is no longer provided during pre-rendering. Ensure you're accessing `router.events` in `useEffect`:\n\n```js\nuseEffect(() => {\n  const handleRouteChange = (url, { shallow }) => {\n    console.log(\n      `App is changing to ${url} ${\n        shallow ? 'with' : 'without'\n      } shallow routing`\n    )\n  }\n\n  router.events.on('routeChangeStart', handleRouteChange)\n\n  // If the component is unmounted, unsubscribe\n  // from the event with the `off` method:\n  return () => {\n    router.events.off('routeChangeStart', handleRouteChange)\n  }\n}, [router])\n```\n\nIf your application uses `router.router.events` which was an internal property that was not public please make sure to use `router.events` as well.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":322,"to":346}}}}],["1190",{"pageContent":"React 16 to 17\n\nReact 17 introduced a new [JSX Transform](https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html) that brings a long-time Next.js feature to the wider React ecosystem: Not having to `import React from 'react'` when using JSX. When using React 17 Next.js will automatically use the new transform. This transform does not make the `React` variable global, which was an unintended side-effect of the previous Next.js implementation. A [codemod is available](/docs/advanced-features/codemods.md#add-missing-react-import) to automatically fix cases where you accidentally used `React` without importing it.\n\n## Upgrading from version 9 to 10\n\nThere were no breaking changes between version 9 and 10.\n\nTo upgrade run the following command:\n\n```\nnpm install next@10\n```\n\nOr using `yarn`:\n\n```\nyarn add next@10\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":348,"to":366}}}}],["1191",{"pageContent":"Upgrading from version 8 to 9","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":368,"to":368}}}}],["1192",{"pageContent":"Preamble\n\n#### Production Deployment on Vercel\n\nIf you previously configured `routes` in your `vercel.json` file for dynamic routes, these rules can be removed when leveraging Next.js 9's new [Dynamic Routing feature](/docs/routing/dynamic-routes.md).\n\nNext.js 9's dynamic routes are **automatically configured on [Vercel](https://vercel.com?utm_source=next-site&utm_medium=docs&utm_campaign=next-website)** and do not require any `vercel.json` customization.\n\nYou can read more about [Dynamic Routing here](/docs/routing/dynamic-routes.md).","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":370,"to":378}}}}],["1193",{"pageContent":"Check your Custom <App> (`pages/_app.js`)\n\nIf you previously copied the [Custom `<App>`](/docs/advanced-features/custom-app.md) example, you may be able to remove your `getInitialProps`.\n\nRemoving `getInitialProps` from `pages/_app.js` (when possible) is important to leverage new Next.js features!\n\nThe following `getInitialProps` does nothing and may be removed:\n\n```js\nclass MyApp extends App {\n  // Remove me, I do nothing!\n  static async getInitialProps({ Component, ctx }) {\n    let pageProps = {}\n\n    if (Component.getInitialProps) {\n      pageProps = await Component.getInitialProps(ctx)\n    }\n\n    return { pageProps }\n  }\n\n  render() {\n    // ... etc\n  }\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":380,"to":405}}}}],["1194",{"pageContent":"Breaking Changes","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":407,"to":407}}}}],["1195",{"pageContent":"`@zeit/next-typescript` is no longer necessary\n\nNext.js will now ignore usage `@zeit/next-typescript` and warn you to remove it. Please remove this plugin from your `next.config.js`.\n\nRemove references to `@zeit/next-typescript/babel` from your custom `.babelrc` (if present).\n\nUsage of [`fork-ts-checker-webpack-plugin`](https://github.com/Realytics/fork-ts-checker-webpack-plugin/issues) should also be removed from your `next.config.js`.\n\nTypeScript Definitions are published with the `next` package, so you need to uninstall `@types/next` as they would conflict.\n\nThe following types are different:\n\n> This list was created by the community to help you upgrade, if you find other differences please send a pull request to this list to help other users.\n\nFrom:\n\n```tsx\nimport { NextContext } from 'next'\nimport { NextAppContext, DefaultAppIProps } from 'next/app'\nimport { NextDocumentContext, DefaultDocumentIProps } from 'next/document'","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":409,"to":428}}}}],["1196",{"pageContent":"to\n\n```tsx\nimport { NextPageContext } from 'next'\nimport { AppContext, AppInitialProps } from 'next/app'\nimport { DocumentContext, DocumentInitialProps } from 'next/document'\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":431,"to":437}}}}],["1197",{"pageContent":"The `config` key is now a named export on a page\n\nYou may no longer export a custom variable named `config` from a page (i.e. `export { config }` / `export const config ...`).\nThis exported variable is now used to specify page-level Next.js configuration like Opt-in AMP and API Route features.\n\nYou must rename a non-Next.js-purposed `config` export to something different.\n\n#### `next/dynamic` no longer renders \"loading...\" by default while loading\n\nDynamic components will not render anything by default while loading. You can still customize this behavior by setting the `loading` property:\n\n```jsx\nimport dynamic from 'next/dynamic'\n\nconst DynamicComponentWithCustomLoading = dynamic(\n  () => import('../components/hello2'),\n  {\n    loading: () => <p>Loading</p>,\n  }\n)\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":439,"to":459}}}}],["1198",{"pageContent":"`withAmp` has been removed in favor of an exported configuration object\n\nNext.js now has the concept of page-level configuration, so the `withAmp` higher-order component has been removed for consistency.\n\nThis change can be **automatically migrated by running the following commands at the root of your Next.js project:**\n\n```bash\ncurl -L https://github.com/vercel/next-codemod/archive/master.tar.gz | tar -xz --strip=2 next-codemod-master/transforms/withamp-to-config.js npx jscodeshift -t ./withamp-to-config.js pages/**/*.js\n```\n\nTo perform this migration by hand, or view what the codemod will produce, see below:\n\n**Before**\n\n```jsx\nimport { withAmp } from 'next/amp'\n\nfunction Home() {\n  return <h1>My AMP Page</h1>\n}\n\nexport default withAmp(Home)\n// or\nexport default withAmp(Home, { hybrid: true })\n```\n\n**After**\n\n```jsx\nexport default function Home() {\n  return <h1>My AMP Page</h1>\n}\n\nexport const config = {\n  amp: true,\n  // or\n  amp: 'hybrid',\n}\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":461,"to":499}}}}],["1199",{"pageContent":"`next export` no longer exports pages as `index.html`\n\nPreviously, exporting `pages/about.js` would result in `out/about/index.html`. This behavior has been changed to result in `out/about.html`.\n\nYou can revert to the previous behavior by creating a `next.config.js` with the following content:\n\n```js\n// next.config.js\nmodule.exports = {\n  trailingSlash: true,\n}\n```\n\n#### `./pages/api/` is treated differently\n\nPages in `./pages/api/` are now considered [API Routes](https://nextjs.org/blog/next-9#api-routes).\nPages in this directory will no longer contain a client-side bundle.","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":501,"to":517}}}}],["1200",{"pageContent":"Deprecated Features","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":519,"to":519}}}}],["1201",{"pageContent":"`next/dynamic` has deprecated loading multiple modules at once\n\nThe ability to load multiple modules at once has been deprecated in `next/dynamic` to be closer to React's implementation (`React.lazy` and `Suspense`).\n\nUpdating code that relies on this behavior is relatively straightforward! We've provided an example of a before/after to help you migrate your application:\n\n**Before**\n\n```jsx\nimport dynamic from 'next/dynamic'\n\nconst HelloBundle = dynamic({\n  modules: () => {\n    const components = {\n      Hello1: () => import('../components/hello1').then((m) => m.default),\n      Hello2: () => import('../components/hello2').then((m) => m.default),\n    }\n\n    return components\n  },\n  render: (props, { Hello1, Hello2 }) => (\n    <div>\n      <h1>{props.title}</h1>\n      <Hello1 />\n      <Hello2 />\n    </div>\n  ),\n})\n\nfunction DynamicBundle() {\n  return <HelloBundle title=\"Dynamic Bundle\" />\n}\n\nexport default DynamicBundle","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":521,"to":554}}}}],["1202",{"pageContent":"**After**\n\n```jsx\nimport dynamic from 'next/dynamic'\n\nconst Hello1 = dynamic(() => import('../components/hello1'))\nconst Hello2 = dynamic(() => import('../components/hello2'))\n\nfunction HelloBundle({ title }) {\n  return (\n    <div>\n      <h1>{title}</h1>\n      <Hello1 />\n      <Hello2 />\n    </div>\n  )\n}\n\nfunction DynamicBundle() {\n  return <HelloBundle title=\"Dynamic Bundle\" />\n}\n\nexport default DynamicBundle\n```","metadata":{"source":"/Users/marcus/personal/monkeylabs/docs/upgrading.md","loc":{"lines":{"from":557,"to":580}}}}]]