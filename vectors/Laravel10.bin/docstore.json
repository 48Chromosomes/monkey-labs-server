[["0",{"pageContent":"# Artisan Console","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":1,"to":1}}}}],["1",{"pageContent":"- [Introduction](#introduction)\n    - [Tinker (REPL)](#tinker)\n- [Writing Commands](#writing-commands)\n    - [Generating Commands](#generating-commands)\n    - [Command Structure](#command-structure)\n    - [Closure Commands](#closure-commands)\n    - [Isolatable Commands](#isolatable-commands)\n- [Defining Input Expectations](#defining-input-expectations)\n    - [Arguments](#arguments)\n    - [Options](#options)\n    - [Input Arrays](#input-arrays)\n    - [Input Descriptions](#input-descriptions)\n    - [Prompting For Missing Input](#prompting-for-missing-input)\n- [Command I/O](#command-io)\n    - [Retrieving Input](#retrieving-input)\n    - [Prompting For Input](#prompting-for-input)\n    - [Writing Output](#writing-output)\n- [Registering Commands](#registering-commands)\n- [Programmatically Executing Commands](#programmatically-executing-commands)\n    - [Calling Commands From Other Commands](#calling-commands-from-other-commands)\n- [Signal Handling](#signal-handling)\n- [Stub Customization](#stub-customization)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":3,"to":24}}}}],["2",{"pageContent":"- [Calling Commands From Other Commands](#calling-commands-from-other-commands)\n- [Signal Handling](#signal-handling)\n- [Stub Customization](#stub-customization)\n- [Events](#events)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":24,"to":27}}}}],["3",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":29,"to":29}}}}],["4",{"pageContent":"Introduction\n\nArtisan is the command line interface included with Laravel. Artisan exists at the root of your application as the `artisan` script and provides a number of helpful commands that can assist you while you build your application. To view a list of all available Artisan commands, you may use the `list` command:\n\n```shell\nphp artisan list\n```\n\nEvery command also includes a \"help\" screen which displays and describes the command's available arguments and options. To view a help screen, precede the name of the command with `help`:\n\n```shell\nphp artisan help migrate\n```\n\n<a name=\"laravel-sail\"></a>\n#### Laravel Sail\n\nIf you are using [Laravel Sail](/docs/{{version}}/sail) as your local development environment, remember to use the `sail` command line to invoke Artisan commands. Sail will execute your Artisan commands within your application's Docker containers:\n\n```shell\n./vendor/bin/sail artisan list\n```\n\n<a name=\"tinker\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":30,"to":53}}}}],["5",{"pageContent":"Tinker (REPL)\n\nLaravel Tinker is a powerful REPL for the Laravel framework, powered by the [PsySH](https://github.com/bobthecow/psysh) package.\n\n<a name=\"installation\"></a>\n#### Installation\n\nAll Laravel applications include Tinker by default. However, you may install Tinker using Composer if you have previously removed it from your application:\n\n```shell\ncomposer require laravel/tinker\n```\n\n> **Note**  \n> Looking for a graphical UI for interacting with your Laravel application? Check out [Tinkerwell](https://tinkerwell.app)!\n\n<a name=\"usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":54,"to":70}}}}],["6",{"pageContent":"Usage\n\nTinker allows you to interact with your entire Laravel application on the command line, including your Eloquent models, jobs, events, and more. To enter the Tinker environment, run the `tinker` Artisan command:\n\n```shell\nphp artisan tinker\n```\n\nYou can publish Tinker's configuration file using the `vendor:publish` command:\n\n```shell\nphp artisan vendor:publish --provider=\"Laravel\\Tinker\\TinkerServiceProvider\"\n```\n\n> **Warning**  \n> The `dispatch` helper function and `dispatch` method on the `Dispatchable` class depends on garbage collection to place the job on the queue. Therefore, when using tinker, you should use `Bus::dispatch` or `Queue::push` to dispatch jobs.\n\n<a name=\"command-allow-list\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":71,"to":88}}}}],["7",{"pageContent":"Command Allow List\n\nTinker utilizes an \"allow\" list to determine which Artisan commands are allowed to be run within its shell. By default, you may run the `clear-compiled`, `down`, `env`, `inspire`, `migrate`, `optimize`, and `up` commands. If you would like to allow more commands you may add them to the `commands` array in your `tinker.php` configuration file:\n\n    'commands' => [\n        // App\\Console\\Commands\\ExampleCommand::class,\n    ],\n\n<a name=\"classes-that-should-not-be-aliased\"></a>\n#### Classes That Should Not Be Aliased\n\nTypically, Tinker automatically aliases classes as you interact with them in Tinker. However, you may wish to never alias some classes. You may accomplish this by listing the classes in the `dont_alias` array of your `tinker.php` configuration file:\n\n    'dont_alias' => [\n        App\\Models\\User::class,\n    ],\n\n<a name=\"writing-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":89,"to":106}}}}],["8",{"pageContent":"Writing Commands\n\nIn addition to the commands provided with Artisan, you may build your own custom commands. Commands are typically stored in the `app/Console/Commands` directory; however, you are free to choose your own storage location as long as your commands can be loaded by Composer.\n\n<a name=\"generating-commands\"></a>\n### Generating Commands\n\nTo create a new command, you may use the `make:command` Artisan command. This command will create a new command class in the `app/Console/Commands` directory. Don't worry if this directory does not exist in your application - it will be created the first time you run the `make:command` Artisan command:\n\n```shell\nphp artisan make:command SendEmails\n```\n\n<a name=\"command-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":107,"to":120}}}}],["9",{"pageContent":"Command Structure\n\nAfter generating your command, you should define appropriate values for the `signature` and `description` properties of the class. These properties will be used when displaying your command on the `list` screen. The `signature` property also allows you to define [your command's input expectations](#defining-input-expectations). The `handle` method will be called when your command is executed. You may place your command logic in this method.\n\nLet's take a look at an example command. Note that we are able to request any dependencies we need via the command's `handle` method. The Laravel [service container](/docs/{{version}}/container) will automatically inject all dependencies that are type-hinted in this method's signature:\n\n    <?php\n\n    namespace App\\Console\\Commands;\n\n    use App\\Models\\User;\n    use App\\Support\\DripEmailer;\n    use Illuminate\\Console\\Command;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":121,"to":133}}}}],["10",{"pageContent":"<?php\n\n    namespace App\\Console\\Commands;\n\n    use App\\Models\\User;\n    use App\\Support\\DripEmailer;\n    use Illuminate\\Console\\Command;\n\n    class SendEmails extends Command\n    {\n        /**\n         * The name and signature of the console command.\n         *\n         * @var string\n         */\n        protected $signature = 'mail:send {user}';\n\n        /**\n         * The console command description.\n         *\n         * @var string\n         */\n        protected $description = 'Send a marketing email to a user';\n\n        /**\n         * Execute the console command.\n         */\n        public function handle(DripEmailer $drip): void\n        {\n            $drip->send(User::find($this->argument('user')));\n        }\n    }\n\n> **Note**  \n> For greater code reuse, it is good practice to keep your console commands light and let them defer to application services to accomplish their tasks. In the example above, note that we inject a service class to do the \"heavy lifting\" of sending the e-mails.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":133,"to":167}}}}],["11",{"pageContent":"<a name=\"closure-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":169,"to":169}}}}],["12",{"pageContent":"Closure Commands\n\nClosure based commands provide an alternative to defining console commands as classes. In the same way that route closures are an alternative to controllers, think of command closures as an alternative to command classes. Within the `commands` method of your `app/Console/Kernel.php` file, Laravel loads the `routes/console.php` file:\n\n    /**\n     * Register the closure based commands for the application.\n     */\n    protected function commands(): void\n    {\n        require base_path('routes/console.php');\n    }\n\nEven though this file does not define HTTP routes, it defines console based entry points (routes) into your application. Within this file, you may define all of your closure based console commands using the `Artisan::command` method. The `command` method accepts two arguments: the [command signature](#defining-input-expectations) and a closure which receives the command's arguments and options:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":170,"to":182}}}}],["13",{"pageContent":"Artisan::command('mail:send {user}', function (string $user) {\n        $this->info(\"Sending email to: {$user}!\");\n    });\n\nThe closure is bound to the underlying command instance, so you have full access to all of the helper methods you would typically be able to access on a full command class.\n\n<a name=\"type-hinting-dependencies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":184,"to":190}}}}],["14",{"pageContent":"Type-Hinting Dependencies\n\nIn addition to receiving your command's arguments and options, command closures may also type-hint additional dependencies that you would like resolved out of the [service container](/docs/{{version}}/container):\n\n    use App\\Models\\User;\n    use App\\Support\\DripEmailer;\n\n    Artisan::command('mail:send {user}', function (DripEmailer $drip, string $user) {\n        $drip->send(User::find($user));\n    });\n\n<a name=\"closure-command-descriptions\"></a>\n#### Closure Command Descriptions\n\nWhen defining a closure based command, you may use the `purpose` method to add a description to the command. This description will be displayed when you run the `php artisan list` or `php artisan help` commands:\n\n    Artisan::command('mail:send {user}', function (string $user) {\n        // ...\n    })->purpose('Send a marketing email to a user');\n\n<a name=\"isolatable-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":191,"to":211}}}}],["15",{"pageContent":"Isolatable Commands\n\n> **Warning**\n> To utilize this feature, your application must be using the `memcached`, `redis`, `dynamodb`, `database`, `file`, or `array` cache driver as your application's default cache driver. In addition, all servers must be communicating with the same central cache server.\n\nSometimes you may wish to ensure that only one instance of a command can run at a time. To accomplish this, you may implement the `Illuminate\\Contracts\\Console\\Isolatable` interface on your command class:\n\n    <?php\n\n    namespace App\\Console\\Commands;\n\n    use Illuminate\\Console\\Command;\n    use Illuminate\\Contracts\\Console\\Isolatable;\n\n    class SendEmails extends Command implements Isolatable\n    {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":212,"to":229}}}}],["16",{"pageContent":"use Illuminate\\Console\\Command;\n    use Illuminate\\Contracts\\Console\\Isolatable;\n\n    class SendEmails extends Command implements Isolatable\n    {\n        // ...\n    }\n\nWhen a command is marked as `Isolatable`, Laravel will automatically add an `--isolated` option to the command. When the command is invoked with that option, Laravel will ensure that no other instances of that command are already running. Laravel accomplishes this by attempting to acquire an atomic lock using your application's default cache driver. If other instances of the command are running, the command will not execute; however, the command will still exit with a successful exit status code:\n\n```shell\nphp artisan mail:send 1 --isolated","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":229,"to":240}}}}],["17",{"pageContent":"If you would like to specify the exit status code that the command should return if it is not able to execute, you may provide the desired status code via the `isolated` option:\n\n```shell\nphp artisan mail:send 1 --isolated=12\n```\n\n<a name=\"lock-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":243,"to":249}}}}],["18",{"pageContent":"Lock ID\n\nBy default, Laravel will use the command's name to generate the string key that is used to acquire the atomic lock in your application's cache. However, you may customize this key by defining an `isolatableId` method on your Artisan command class, allowing you to integrate the command's arguments or options into the key:\n\n```php\n/**\n * Get the isolatable ID for the command.\n */\npublic function isolatableId(): string\n{\n    return $this->argument('user');\n}\n```\n\n<a name=\"lock-expiration-time\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":250,"to":264}}}}],["19",{"pageContent":"Lock Expiration Time\n\nBy default, isolation locks expire after the command is finished. Or, if the command is interrupted and unable to finish, the lock will expire after one hour. However, you may adjust the lock expiration time by defining a `isolationLockExpiresAt` method on your command:\n\n```php\nuse DateTimeInterface;\nuse DateInterval;\n\n/**\n * Determine when an isolation lock expires for the command.\n */\npublic function isolationLockExpiresAt(): DateTimeInterface|DateInterval\n{\n    return now()->addMinutes(5);\n}\n```\n\n<a name=\"defining-input-expectations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":265,"to":282}}}}],["20",{"pageContent":"Defining Input Expectations\n\nWhen writing console commands, it is common to gather input from the user through arguments or options. Laravel makes it very convenient to define the input you expect from the user using the `signature` property on your commands. The `signature` property allows you to define the name, arguments, and options for the command in a single, expressive, route-like syntax.\n\n<a name=\"arguments\"></a>\n### Arguments\n\nAll user supplied arguments and options are wrapped in curly braces. In the following example, the command defines one required argument: `user`:\n\n    /**\n     * The name and signature of the console command.\n     *\n     * @var string\n     */\n    protected $signature = 'mail:send {user}';\n\nYou may also make arguments optional or define default values for arguments:\n\n    // Optional argument...\n    'mail:send {user?}'\n\n    // Optional argument with default value...\n    'mail:send {user=foo}'\n\n<a name=\"options\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":283,"to":307}}}}],["21",{"pageContent":"Options\n\nOptions, like arguments, are another form of user input. Options are prefixed by two hyphens (`--`) when they are provided via the command line. There are two types of options: those that receive a value and those that don't. Options that don't receive a value serve as a boolean \"switch\". Let's take a look at an example of this type of option:\n\n    /**\n     * The name and signature of the console command.\n     *\n     * @var string\n     */\n    protected $signature = 'mail:send {user} {--queue}';\n\nIn this example, the `--queue` switch may be specified when calling the Artisan command. If the `--queue` switch is passed, the value of the option will be `true`. Otherwise, the value will be `false`:\n\n```shell\nphp artisan mail:send 1 --queue\n```\n\n<a name=\"options-with-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":308,"to":325}}}}],["22",{"pageContent":"Options With Values\n\nNext, let's take a look at an option that expects a value. If the user must specify a value for an option, you should suffix the option name with a `=` sign:\n\n    /**\n     * The name and signature of the console command.\n     *\n     * @var string\n     */\n    protected $signature = 'mail:send {user} {--queue=}';\n\nIn this example, the user may pass a value for the option like so. If the option is not specified when invoking the command, its value will be `null`:\n\n```shell\nphp artisan mail:send 1 --queue=default\n```\n\nYou may assign default values to options by specifying the default value after the option name. If no option value is passed by the user, the default value will be used:\n\n    'mail:send {user} {--queue=default}'\n\n<a name=\"option-shortcuts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":326,"to":347}}}}],["23",{"pageContent":"Option Shortcuts\n\nTo assign a shortcut when defining an option, you may specify it before the option name and use the `|` character as a delimiter to separate the shortcut from the full option name:\n\n    'mail:send {user} {--Q|queue}'\n\nWhen invoking the command on your terminal, option shortcuts should be prefixed with a single hyphen and no `=` character should be included when specifying a value for the option:\n\n```shell\nphp artisan mail:send 1 -Qdefault\n```\n\n<a name=\"input-arrays\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":348,"to":360}}}}],["24",{"pageContent":"Input Arrays\n\nIf you would like to define arguments or options to expect multiple input values, you may use the `*` character. First, let's take a look at an example that specifies such an argument:\n\n    'mail:send {user*}'\n\nWhen calling this method, the `user` arguments may be passed in order to the command line. For example, the following command will set the value of `user` to an array with `1` and `2` as its values:\n\n```shell\nphp artisan mail:send 1 2\n```\n\nThis `*` character can be combined with an optional argument definition to allow zero or more instances of an argument:\n\n    'mail:send {user?*}'\n\n<a name=\"option-arrays\"></a>\n#### Option Arrays\n\nWhen defining an option that expects multiple input values, each option value passed to the command should be prefixed with the option name:\n\n    'mail:send {--id=*}'\n\nSuch a command may be invoked by passing multiple `--id` arguments:\n\n```shell\nphp artisan mail:send --id=1 --id=2\n```\n\n<a name=\"input-descriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":361,"to":390}}}}],["25",{"pageContent":"Input Descriptions\n\nYou may assign descriptions to input arguments and options by separating the argument name from the description using a colon. If you need a little extra room to define your command, feel free to spread the definition across multiple lines:\n\n    /**\n     * The name and signature of the console command.\n     *\n     * @var string\n     */\n    protected $signature = 'mail:send\n                            {user : The ID of the user}\n                            {--queue : Whether the job should be queued}';\n\n<a name=\"prompting-for-missing-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":391,"to":404}}}}],["26",{"pageContent":"Prompting For Missing Input\n\nIf your command contains required arguments, the user will receive an error message when they are not provided. Alternatively, you may configure your command to automatically prompt the user when required arguments are missing by implementing the `PromptsForMissingInput` interface:\n\n    <?php\n\n    namespace App\\Console\\Commands;\n\n    use Illuminate\\Console\\Command;\n    use Illuminate\\Contracts\\Console\\PromptsForMissingInput;\n\n    class SendEmails extends Command implements PromptsForMissingInput\n    {\n        /**\n         * The name and signature of the console command.\n         *\n         * @var string\n         */\n        protected $signature = 'mail:send {user}';\n\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":405,"to":426}}}}],["27",{"pageContent":"// ...\n    }\n\nIf Laravel needs to gather a required argument from the user, it will automatically ask the user for the argument by intelligently phrasing the question using either the argument name or description. If you wish to customize the question used to gather the required argument, you may implement the `promptForMissingArgumentsUsing` method, returning an array of questions keyed by the argument names:\n\n    /**\n     * Prompt for missing input arguments using the returned questions.\n     *\n     * @return array\n     */\n    protected function promptForMissingArgumentsUsing()\n    {\n        return [\n            'user' => 'Which user ID should receive the mail?',\n        ];\n    }\n\nYou may also provide placeholder text by using a tuple containing the question and placeholder:\n\n    return [\n        'user' => ['Which user ID should receive the mail?', 'E.g. 123'],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":426,"to":447}}}}],["28",{"pageContent":"You may also provide placeholder text by using a tuple containing the question and placeholder:\n\n    return [\n        'user' => ['Which user ID should receive the mail?', 'E.g. 123'],\n    ];\n\nIf you would like complete control over the prompt, you may provide a closure that should prompt the user and return their answer:\n\n    use App\\Models\\User;\n    use function Laravel\\Prompts\\search;\n\n    // ...\n\n    return [\n        'user' => fn () => search(\n            label: 'Search for a user:',\n            placeholder: 'E.g. Taylor Otwell',\n            options: fn ($value) => strlen($value) > 0\n                ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n                : []\n        ),\n    ];\n\n> **Note**  \nThe comprehensive [Laravel Prompts](/docs/{{version}}/prompts) documentation includes additional information on the available prompts and their usage.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":447,"to":471}}}}],["29",{"pageContent":"> **Note**  \nThe comprehensive [Laravel Prompts](/docs/{{version}}/prompts) documentation includes additional information on the available prompts and their usage.\n\nIf you wish to prompt the user to select or enter [options](#options), you may include prompts in your command's `handle` method. However, if you only wish to prompt the user when they have also been automatically prompted for missing arguments, then you may implement the `afterPromptingForMissingArguments` method:\n\n    use Symfony\\Component\\Console\\Input\\InputInterface;\n    use Symfony\\Component\\Console\\Output\\OutputInterface;\n    use function Laravel\\Prompts\\confirm;\n\n    // ...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":471,"to":480}}}}],["30",{"pageContent":"use Symfony\\Component\\Console\\Input\\InputInterface;\n    use Symfony\\Component\\Console\\Output\\OutputInterface;\n    use function Laravel\\Prompts\\confirm;\n\n    // ...\n\n    /**\n     * Perform actions after the user was prompted for missing arguments.\n     *\n     * @param  \\Symfony\\Component\\Console\\Input\\InputInterface  $input\n     * @param  \\Symfony\\Component\\Console\\Output\\OutputInterface  $output\n     * @return void\n     */\n    protected function afterPromptingForMissingArguments(InputInterface $input, OutputInterface $output)\n    {\n        $input->setOption('queue', confirm(\n            label: 'Would you like to queue the mail?',\n            default: $this->option('queue')\n        ));\n    }\n\n<a name=\"command-io\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":480,"to":501}}}}],["31",{"pageContent":"Command I/O\n\n<a name=\"retrieving-input\"></a>\n### Retrieving Input\n\nWhile your command is executing, you will likely need to access the values for the arguments and options accepted by your command. To do so, you may use the `argument` and `option` methods. If an argument or option does not exist, `null` will be returned:\n\n    /**\n     * Execute the console command.\n     */\n    public function handle(): void\n    {\n        $userId = $this->argument('user');\n    }\n\nIf you need to retrieve all of the arguments as an `array`, call the `arguments` method:\n\n    $arguments = $this->arguments();\n\nOptions may be retrieved just as easily as arguments using the `option` method. To retrieve all of the options as an array, call the `options` method:\n\n    // Retrieve a specific option...\n    $queueName = $this->option('queue');\n\n    // Retrieve all options as an array...\n    $options = $this->options();\n\n<a name=\"prompting-for-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":502,"to":529}}}}],["32",{"pageContent":"Prompting For Input\n\n> **Note**  \n> [Laravel Prompts](/docs/{{version}}/prompts) is a PHP package for adding beautiful and user-friendly forms to your command-line applications, with browser-like features including placeholder text and validation.\n\nIn addition to displaying output, you may also ask the user to provide input during the execution of your command. The `ask` method will prompt the user with the given question, accept their input, and then return the user's input back to your command:\n\n    /**\n     * Execute the console command.\n     */\n    public function handle(): void\n    {\n        $name = $this->ask('What is your name?');\n\n        // ...\n    }\n\nThe `secret` method is similar to `ask`, but the user's input will not be visible to them as they type in the console. This method is useful when asking for sensitive information such as passwords:\n\n    $password = $this->secret('What is the password?');\n\n<a name=\"asking-for-confirmation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":530,"to":551}}}}],["33",{"pageContent":"Asking For Confirmation\n\nIf you need to ask the user for a simple \"yes or no\" confirmation, you may use the `confirm` method. By default, this method will return `false`. However, if the user enters `y` or `yes` in response to the prompt, the method will return `true`.\n\n    if ($this->confirm('Do you wish to continue?')) {\n        // ...\n    }\n\nIf necessary, you may specify that the confirmation prompt should return `true` by default by passing `true` as the second argument to the `confirm` method:\n\n    if ($this->confirm('Do you wish to continue?', true)) {\n        // ...\n    }\n\n<a name=\"auto-completion\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":552,"to":566}}}}],["34",{"pageContent":"Auto-Completion\n\nThe `anticipate` method can be used to provide auto-completion for possible choices. The user can still provide any answer, regardless of the auto-completion hints:\n\n    $name = $this->anticipate('What is your name?', ['Taylor', 'Dayle']);\n\nAlternatively, you may pass a closure as the second argument to the `anticipate` method. The closure will be called each time the user types an input character. The closure should accept a string parameter containing the user's input so far, and return an array of options for auto-completion:\n\n    $name = $this->anticipate('What is your address?', function (string $input) {\n        // Return auto-completion options...\n    });\n\n<a name=\"multiple-choice-questions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":567,"to":579}}}}],["35",{"pageContent":"Multiple Choice Questions\n\nIf you need to give the user a predefined set of choices when asking a question, you may use the `choice` method. You may set the array index of the default value to be returned if no option is chosen by passing the index as the third argument to the method:\n\n    $name = $this->choice(\n        'What is your name?',\n        ['Taylor', 'Dayle'],\n        $defaultIndex\n    );\n\nIn addition, the `choice` method accepts optional fourth and fifth arguments for determining the maximum number of attempts to select a valid response and whether multiple selections are permitted:\n\n    $name = $this->choice(\n        'What is your name?',\n        ['Taylor', 'Dayle'],\n        $defaultIndex,\n        $maxAttempts = null,\n        $allowMultipleSelections = false\n    );\n\n<a name=\"writing-output\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":580,"to":600}}}}],["36",{"pageContent":"Writing Output\n\nTo send output to the console, you may use the `line`, `info`, `comment`, `question`, `warn`, and `error` methods. Each of these methods will use appropriate ANSI colors for their purpose. For example, let's display some general information to the user. Typically, the `info` method will display in the console as green colored text:\n\n    /**\n     * Execute the console command.\n     */\n    public function handle(): void\n    {\n        // ...\n\n        $this->info('The command was successful!');\n    }\n\nTo display an error message, use the `error` method. Error message text is typically displayed in red:\n\n    $this->error('Something went wrong!');\n\nYou may use the `line` method to display plain, uncolored text:\n\n    $this->line('Display this on the screen');\n\nYou may use the `newLine` method to display a blank line:\n\n    // Write a single blank line...\n    $this->newLine();\n\n    // Write three blank lines...\n    $this->newLine(3);\n\n<a name=\"tables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":601,"to":631}}}}],["37",{"pageContent":"Tables\n\nThe `table` method makes it easy to correctly format multiple rows / columns of data. All you need to do is provide the column names and the data for the table and Laravel will\nautomatically calculate the appropriate width and height of the table for you:\n\n    use App\\Models\\User;\n\n    $this->table(\n        ['Name', 'Email'],\n        User::all(['name', 'email'])->toArray()\n    );\n\n<a name=\"progress-bars\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":632,"to":644}}}}],["38",{"pageContent":"Progress Bars\n\nFor long running tasks, it can be helpful to show a progress bar that informs users how complete the task is. Using the `withProgressBar` method, Laravel will display a progress bar and advance its progress for each iteration over a given iterable value:\n\n    use App\\Models\\User;\n\n    $users = $this->withProgressBar(User::all(), function (User $user) {\n        $this->performTask($user);\n    });\n\nSometimes, you may need more manual control over how a progress bar is advanced. First, define the total number of steps the process will iterate through. Then, advance the progress bar after processing each item:\n\n    $users = App\\Models\\User::all();\n\n    $bar = $this->output->createProgressBar(count($users));\n\n    $bar->start();\n\n    foreach ($users as $user) {\n        $this->performTask($user);\n\n        $bar->advance();\n    }\n\n    $bar->finish();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":645,"to":669}}}}],["39",{"pageContent":"$bar = $this->output->createProgressBar(count($users));\n\n    $bar->start();\n\n    foreach ($users as $user) {\n        $this->performTask($user);\n\n        $bar->advance();\n    }\n\n    $bar->finish();\n\n> **Note**  \n> For more advanced options, check out the [Symfony Progress Bar component documentation](https://symfony.com/doc/current/components/console/helpers/progressbar.html).\n\n<a name=\"registering-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":669,"to":684}}}}],["40",{"pageContent":"Registering Commands\n\nAll of your console commands are registered within your application's `App\\Console\\Kernel` class, which is your application's \"console kernel\". Within the `commands` method of this class, you will see a call to the kernel's `load` method. The `load` method will scan the `app/Console/Commands` directory and automatically register each command it contains with Artisan. You are even free to make additional calls to the `load` method to scan other directories for Artisan commands:\n\n    /**\n     * Register the commands for the application.\n     */\n    protected function commands(): void\n    {\n        $this->load(__DIR__.'/Commands');\n        $this->load(__DIR__.'/../Domain/Orders/Commands');\n\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":685,"to":698}}}}],["41",{"pageContent":"// ...\n    }\n\nIf necessary, you may manually register commands by adding the command's class name to a `$commands` property within your `App\\Console\\Kernel` class. If this property is not already defined on your kernel, you should define it manually. When Artisan boots, all the commands listed in this property will be resolved by the [service container](/docs/{{version}}/container) and registered with Artisan:\n\n    protected $commands = [\n        Commands\\SendEmails::class\n    ];\n\n<a name=\"programmatically-executing-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":698,"to":707}}}}],["42",{"pageContent":"Programmatically Executing Commands\n\nSometimes you may wish to execute an Artisan command outside of the CLI. For example, you may wish to execute an Artisan command from a route or controller. You may use the `call` method on the `Artisan` facade to accomplish this. The `call` method accepts either the command's signature name or class name as its first argument, and an array of command parameters as the second argument. The exit code will be returned:\n\n    use Illuminate\\Support\\Facades\\Artisan;\n\n    Route::post('/user/{user}/mail', function (string $user) {\n        $exitCode = Artisan::call('mail:send', [\n            'user' => $user, '--queue' => 'default'\n        ]);\n\n        // ...\n    });\n\nAlternatively, you may pass the entire Artisan command to the `call` method as a string:\n\n    Artisan::call('mail:send 1 --queue=default');\n\n<a name=\"passing-array-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":708,"to":726}}}}],["43",{"pageContent":"Passing Array Values\n\nIf your command defines an option that accepts an array, you may pass an array of values to that option:\n\n    use Illuminate\\Support\\Facades\\Artisan;\n\n    Route::post('/mail', function () {\n        $exitCode = Artisan::call('mail:send', [\n            '--id' => [5, 13]\n        ]);\n    });\n\n<a name=\"passing-boolean-values\"></a>\n#### Passing Boolean Values\n\nIf you need to specify the value of an option that does not accept string values, such as the `--force` flag on the `migrate:refresh` command, you should pass `true` or `false` as the value of the option:\n\n    $exitCode = Artisan::call('migrate:refresh', [\n        '--force' => true,\n    ]);\n\n<a name=\"queueing-artisan-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":727,"to":748}}}}],["44",{"pageContent":"Queueing Artisan Commands\n\nUsing the `queue` method on the `Artisan` facade, you may even queue Artisan commands so they are processed in the background by your [queue workers](/docs/{{version}}/queues). Before using this method, make sure you have configured your queue and are running a queue listener:\n\n    use Illuminate\\Support\\Facades\\Artisan;\n\n    Route::post('/user/{user}/mail', function (string $user) {\n        Artisan::queue('mail:send', [\n            'user' => $user, '--queue' => 'default'\n        ]);\n\n        // ...\n    });\n\nUsing the `onConnection` and `onQueue` methods, you may specify the connection or queue the Artisan command should be dispatched to:\n\n    Artisan::queue('mail:send', [\n        'user' => 1, '--queue' => 'default'\n    ])->onConnection('redis')->onQueue('commands');\n\n<a name=\"calling-commands-from-other-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":749,"to":769}}}}],["45",{"pageContent":"Calling Commands From Other Commands\n\nSometimes you may wish to call other commands from an existing Artisan command. You may do so using the `call` method. This `call` method accepts the command name and an array of command arguments / options:\n\n    /**\n     * Execute the console command.\n     */\n    public function handle(): void\n    {\n        $this->call('mail:send', [\n            'user' => 1, '--queue' => 'default'\n        ]);\n\n        // ...\n    }\n\nIf you would like to call another console command and suppress all of its output, you may use the `callSilently` method. The `callSilently` method has the same signature as the `call` method:\n\n    $this->callSilently('mail:send', [\n        'user' => 1, '--queue' => 'default'\n    ]);\n\n<a name=\"signal-handling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":770,"to":792}}}}],["46",{"pageContent":"Signal Handling\n\nAs you may know, operating systems allow signals to be sent to running processes. For example, the `SIGTERM` signal is how operating systems ask a program to terminate. If you wish to listen for signals in your Artisan console commands and execute code when they occur, you may use the `trap` method:\n\n    /**\n     * Execute the console command.\n     */\n    public function handle(): void\n    {\n        $this->trap(SIGTERM, fn () => $this->shouldKeepRunning = false);\n\n        while ($this->shouldKeepRunning) {\n            // ...\n        }\n    }\n\nTo listen for multiple signals at once, you may provide an array of signals to the `trap` method:\n\n    $this->trap([SIGTERM, SIGQUIT], function (int $signal) {\n        $this->shouldKeepRunning = false;\n\n        dump($signal); // SIGTERM / SIGQUIT\n    });\n\n<a name=\"stub-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":793,"to":817}}}}],["47",{"pageContent":"Stub Customization\n\nThe Artisan console's `make` commands are used to create a variety of classes, such as controllers, jobs, migrations, and tests. These classes are generated using \"stub\" files that are populated with values based on your input. However, you may want to make small changes to files generated by Artisan. To accomplish this, you may use the `stub:publish` command to publish the most common stubs to your application so that you can customize them:\n\n```shell\nphp artisan stub:publish\n```\n\nThe published stubs will be located within a `stubs` directory in the root of your application. Any changes you make to these stubs will be reflected when you generate their corresponding classes using Artisan's `make` commands.\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":818,"to":828}}}}],["48",{"pageContent":"Events\n\nArtisan dispatches three events when running commands: `Illuminate\\Console\\Events\\ArtisanStarting`, `Illuminate\\Console\\Events\\CommandStarting`, and `Illuminate\\Console\\Events\\CommandFinished`. The `ArtisanStarting` event is dispatched immediately when Artisan starts running. Next, the `CommandStarting` event is dispatched immediately before a command runs. Finally, the `CommandFinished` event is dispatched once a command finishes executing.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/artisan.md","loc":{"lines":{"from":829,"to":831}}}}],["49",{"pageContent":"# Authentication","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":1,"to":1}}}}],["50",{"pageContent":"- [Introduction](#introduction)\n    - [Starter Kits](#starter-kits)\n    - [Database Considerations](#introduction-database-considerations)\n    - [Ecosystem Overview](#ecosystem-overview)\n- [Authentication Quickstart](#authentication-quickstart)\n    - [Install A Starter Kit](#install-a-starter-kit)\n    - [Retrieving The Authenticated User](#retrieving-the-authenticated-user)\n    - [Protecting Routes](#protecting-routes)\n    - [Login Throttling](#login-throttling)\n- [Manually Authenticating Users](#authenticating-users)\n    - [Remembering Users](#remembering-users)\n    - [Other Authentication Methods](#other-authentication-methods)\n- [HTTP Basic Authentication](#http-basic-authentication)\n    - [Stateless HTTP Basic Authentication](#stateless-http-basic-authentication)\n- [Logging Out](#logging-out)\n    - [Invalidating Sessions On Other Devices](#invalidating-sessions-on-other-devices)\n- [Password Confirmation](#password-confirmation)\n    - [Configuration](#password-confirmation-configuration)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":3,"to":20}}}}],["51",{"pageContent":"- [Invalidating Sessions On Other Devices](#invalidating-sessions-on-other-devices)\n- [Password Confirmation](#password-confirmation)\n    - [Configuration](#password-confirmation-configuration)\n    - [Routing](#password-confirmation-routing)\n    - [Protecting Routes](#password-confirmation-protecting-routes)\n- [Adding Custom Guards](#adding-custom-guards)\n    - [Closure Request Guards](#closure-request-guards)\n- [Adding Custom User Providers](#adding-custom-user-providers)\n    - [The User Provider Contract](#the-user-provider-contract)\n    - [The Authenticatable Contract](#the-authenticatable-contract)\n- [Social Authentication](/docs/{{version}}/socialite)\n- [Events](#events)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":20,"to":31}}}}],["52",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":33,"to":33}}}}],["53",{"pageContent":"Introduction\n\nMany web applications provide a way for their users to authenticate with the application and \"login\". Implementing this feature in web applications can be a complex and potentially risky endeavor. For this reason, Laravel strives to give you the tools you need to implement authentication quickly, securely, and easily.\n\nAt its core, Laravel's authentication facilities are made up of \"guards\" and \"providers\". Guards define how users are authenticated for each request. For example, Laravel ships with a `session` guard which maintains state using session storage and cookies.\n\nProviders define how users are retrieved from your persistent storage. Laravel ships with support for retrieving users using [Eloquent](/docs/{{version}}/eloquent) and the database query builder. However, you are free to define additional providers as needed for your application.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":34,"to":40}}}}],["54",{"pageContent":"Your application's authentication configuration file is located at `config/auth.php`. This file contains several well-documented options for tweaking the behavior of Laravel's authentication services.\n\n> **Note**  \n> Guards and providers should not be confused with \"roles\" and \"permissions\". To learn more about authorizing user actions via permissions, please refer to the [authorization](/docs/{{version}}/authorization) documentation.\n\n<a name=\"starter-kits\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":42,"to":47}}}}],["55",{"pageContent":"Starter Kits\n\nWant to get started fast? Install a [Laravel application starter kit](/docs/{{version}}/starter-kits) in a fresh Laravel application. After migrating your database, navigate your browser to `/register` or any other URL that is assigned to your application. The starter kits will take care of scaffolding your entire authentication system!\n\n**Even if you choose not to use a starter kit in your final Laravel application, installing the [Laravel Breeze](/docs/{{version}}/starter-kits#laravel-breeze) starter kit can be a wonderful opportunity to learn how to implement all of Laravel's authentication functionality in an actual Laravel project.** Since Laravel Breeze creates authentication controllers, routes, and views for you, you can examine the code within these files to learn how Laravel's authentication features may be implemented.\n\n<a name=\"introduction-database-considerations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":48,"to":54}}}}],["56",{"pageContent":"Database Considerations\n\nBy default, Laravel includes an `App\\Models\\User` [Eloquent model](/docs/{{version}}/eloquent) in your `app/Models` directory. This model may be used with the default Eloquent authentication driver. If your application is not using Eloquent, you may use the `database` authentication provider which uses the Laravel query builder.\n\nWhen building the database schema for the `App\\Models\\User` model, make sure the password column is at least 60 characters in length. Of course, the `users` table migration that is included in new Laravel applications already creates a column that exceeds this length.\n\nAlso, you should verify that your `users` (or equivalent) table contains a nullable, string `remember_token` column of 100 characters. This column will be used to store a token for users that select the \"remember me\" option when logging into your application. Again, the default `users` table migration that is included in new Laravel applications already contains this column.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":55,"to":61}}}}],["57",{"pageContent":"<a name=\"ecosystem-overview\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":63,"to":63}}}}],["58",{"pageContent":"Ecosystem Overview\n\nLaravel offers several packages related to authentication. Before continuing, we'll review the general authentication ecosystem in Laravel and discuss each package's intended purpose.\n\nFirst, consider how authentication works. When using a web browser, a user will provide their username and password via a login form. If these credentials are correct, the application will store information about the authenticated user in the user's [session](/docs/{{version}}/session). A cookie issued to the browser contains the session ID so that subsequent requests to the application can associate the user with the correct session. After the session cookie is received, the application will retrieve the session data based on the session ID, note that the authentication information has been stored in the session, and will consider the user as \"authenticated\".","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":64,"to":68}}}}],["59",{"pageContent":"When a remote service needs to authenticate to access an API, cookies are not typically used for authentication because there is no web browser. Instead, the remote service sends an API token to the API on each request. The application may validate the incoming token against a table of valid API tokens and \"authenticate\" the request as being performed by the user associated with that API token.\n\n<a name=\"laravels-built-in-browser-authentication-services\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":70,"to":72}}}}],["60",{"pageContent":"Laravel's Built-in Browser Authentication Services\n\nLaravel includes built-in authentication and session services which are typically accessed via the `Auth` and `Session` facades. These features provide cookie-based authentication for requests that are initiated from web browsers. They provide methods that allow you to verify a user's credentials and authenticate the user. In addition, these services will automatically store the proper authentication data in the user's session and issue the user's session cookie. A discussion of how to use these services is contained within this documentation.\n\n**Application Starter Kits**","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":73,"to":77}}}}],["61",{"pageContent":"**Application Starter Kits**\n\nAs discussed in this documentation, you can interact with these authentication services manually to build your application's own authentication layer. However, to help you get started more quickly, we have released [free packages](/docs/{{version}}/starter-kits) that provide robust, modern scaffolding of the entire authentication layer. These packages are [Laravel Breeze](/docs/{{version}}/starter-kits#laravel-breeze), [Laravel Jetstream](/docs/{{version}}/starter-kits#laravel-jetstream), and [Laravel Fortify](/docs/{{version}}/fortify).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":77,"to":79}}}}],["62",{"pageContent":"_Laravel Breeze_ is a simple, minimal implementation of all of Laravel's authentication features, including login, registration, password reset, email verification, and password confirmation. Laravel Breeze's view layer is comprised of simple [Blade templates](/docs/{{version}}/blade) styled with [Tailwind CSS](https://tailwindcss.com). To get started, check out the documentation on Laravel's [application starter kits](/docs/{{version}}/starter-kits).\n\n_Laravel Fortify_ is a headless authentication backend for Laravel that implements many of the features found in this documentation, including cookie-based authentication as well as other features such as two-factor authentication and email verification. Fortify provides the authentication backend for Laravel Jetstream or may be used independently in combination with [Laravel Sanctum](/docs/{{version}}/sanctum) to provide authentication for an SPA that needs to authenticate with Laravel.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":81,"to":83}}}}],["63",{"pageContent":"_[Laravel Jetstream](https://jetstream.laravel.com)_ is a robust application starter kit that consumes and exposes Laravel Fortify's authentication services with a beautiful, modern UI powered by [Tailwind CSS](https://tailwindcss.com), [Livewire](https://livewire.laravel.com), and / or [Inertia](https://inertiajs.com). Laravel Jetstream includes optional support for two-factor authentication, team support, browser session management, profile management, and built-in integration with [Laravel Sanctum](/docs/{{version}}/sanctum) to offer API token authentication. Laravel's API authentication offerings are discussed below.\n\n<a name=\"laravels-api-authentication-services\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":85,"to":87}}}}],["64",{"pageContent":"Laravel's API Authentication Services\n\nLaravel provides two optional packages to assist you in managing API tokens and authenticating requests made with API tokens: [Passport](/docs/{{version}}/passport) and [Sanctum](/docs/{{version}}/sanctum). Please note that these libraries and Laravel's built-in cookie based authentication libraries are not mutually exclusive. These libraries primarily focus on API token authentication while the built-in authentication services focus on cookie based browser authentication. Many applications will use both Laravel's built-in cookie based authentication services and one of Laravel's API authentication packages.\n\n**Passport**","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":88,"to":92}}}}],["65",{"pageContent":"**Passport**\n\nPassport is an OAuth2 authentication provider, offering a variety of OAuth2 \"grant types\" which allow you to issue various types of tokens. In general, this is a robust and complex package for API authentication. However, most applications do not require the complex features offered by the OAuth2 spec, which can be confusing for both users and developers. In addition, developers have been historically confused about how to authenticate SPA applications or mobile applications using OAuth2 authentication providers like Passport.\n\n**Sanctum**","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":92,"to":96}}}}],["66",{"pageContent":"**Sanctum**\n\nIn response to the complexity of OAuth2 and developer confusion, we set out to build a simpler, more streamlined authentication package that could handle both first-party web requests from a web browser and API requests via tokens. This goal was realized with the release of [Laravel Sanctum](/docs/{{version}}/sanctum), which should be considered the preferred and recommended authentication package for applications that will be offering a first-party web UI in addition to an API, or will be powered by a single-page application (SPA) that exists separately from the backend Laravel application, or applications that offer a mobile client.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":96,"to":98}}}}],["67",{"pageContent":"Laravel Sanctum is a hybrid web / API authentication package that can manage your application's entire authentication process. This is possible because when Sanctum based applications receive a request, Sanctum will first determine if the request includes a session cookie that references an authenticated session. Sanctum accomplishes this by calling Laravel's built-in authentication services which we discussed earlier. If the request is not being authenticated via a session cookie, Sanctum will inspect the request for an API token. If an API token is present, Sanctum will authenticate the request using that token. To learn more about this process, please consult Sanctum's [\"how it works\"](/docs/{{version}}/sanctum#how-it-works) documentation.\n\nLaravel Sanctum is the API package we have chosen to include with the [Laravel Jetstream](https://jetstream.laravel.com) application starter kit because we believe it is the best fit for the majority of web application's authentication needs.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":100,"to":102}}}}],["68",{"pageContent":"<a name=\"summary-choosing-your-stack\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":104,"to":104}}}}],["69",{"pageContent":"Summary & Choosing Your Stack\n\nIn summary, if your application will be accessed using a browser and you are building a monolithic Laravel application, your application will use Laravel's built-in authentication services.\n\nNext, if your application offers an API that will be consumed by third parties, you will choose between [Passport](/docs/{{version}}/passport) or [Sanctum](/docs/{{version}}/sanctum) to provide API token authentication for your application. In general, Sanctum should be preferred when possible since it is a simple, complete solution for API authentication, SPA authentication, and mobile authentication, including support for \"scopes\" or \"abilities\".","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":105,"to":109}}}}],["70",{"pageContent":"If you are building a single-page application (SPA) that will be powered by a Laravel backend, you should use [Laravel Sanctum](/docs/{{version}}/sanctum). When using Sanctum, you will either need to [manually implement your own backend authentication routes](#authenticating-users) or utilize [Laravel Fortify](/docs/{{version}}/fortify) as a headless authentication backend service that provides routes and controllers for features such as registration, password reset, email verification, and more.\n\nPassport may be chosen when your application absolutely needs all of the features provided by the OAuth2 specification.\n\nAnd, if you would like to get started quickly, we are pleased to recommend [Laravel Breeze](/docs/{{version}}/starter-kits#laravel-breeze) as a quick way to start a new Laravel application that already uses our preferred authentication stack of Laravel's built-in authentication services and Laravel Sanctum.\n\n<a name=\"authentication-quickstart\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":111,"to":117}}}}],["71",{"pageContent":"Authentication Quickstart\n\n> **Warning**  \n> This portion of the documentation discusses authenticating users via the [Laravel application starter kits](/docs/{{version}}/starter-kits), which includes UI scaffolding to help you get started quickly. If you would like to integrate with Laravel's authentication systems directly, check out the documentation on [manually authenticating users](#authenticating-users).\n\n<a name=\"install-a-starter-kit\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":118,"to":123}}}}],["72",{"pageContent":"Install A Starter Kit\n\nFirst, you should [install a Laravel application starter kit](/docs/{{version}}/starter-kits). Our current starter kits, Laravel Breeze and Laravel Jetstream, offer beautifully designed starting points for incorporating authentication into your fresh Laravel application.\n\nLaravel Breeze is a minimal, simple implementation of all of Laravel's authentication features, including login, registration, password reset, email verification, and password confirmation. Laravel Breeze's view layer is made up of simple [Blade templates](/docs/{{version}}/blade) styled with [Tailwind CSS](https://tailwindcss.com). Additionally, Breeze provides scaffolding options based on [Livewire](https://livewire.laravel.com) or [Inertia](https://inertiajs.com), with the choice of using Vue or React for the Inertia-based scaffolding.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":124,"to":128}}}}],["73",{"pageContent":"[Laravel Jetstream](https://jetstream.laravel.com) is a more robust application starter kit that includes support for scaffolding your application with [Livewire](https://livewire.laravel.com) or [Inertia and Vue](https://inertiajs.com). In addition, Jetstream features optional support for two-factor authentication, teams, profile management, browser session management, API support via [Laravel Sanctum](/docs/{{version}}/sanctum), account deletion, and more.\n\n<a name=\"retrieving-the-authenticated-user\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":130,"to":132}}}}],["74",{"pageContent":"Retrieving The Authenticated User\n\nAfter installing an authentication starter kit and allowing users to register and authenticate with your application, you will often need to interact with the currently authenticated user. While handling an incoming request, you may access the authenticated user via the `Auth` facade's `user` method:\n\n    use Illuminate\\Support\\Facades\\Auth;\n\n    // Retrieve the currently authenticated user...\n    $user = Auth::user();\n\n    // Retrieve the currently authenticated user's ID...\n    $id = Auth::id();\n\nAlternatively, once a user is authenticated, you may access the authenticated user via an `Illuminate\\Http\\Request` instance. Remember, type-hinted classes will automatically be injected into your controller methods. By type-hinting the `Illuminate\\Http\\Request` object, you may gain convenient access to the authenticated user from any controller method in your application via the request's `user` method:\n\n    <?php\n\n    namespace App\\Http\\Controllers;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":133,"to":149}}}}],["75",{"pageContent":"<?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class FlightController extends Controller\n    {\n        /**\n         * Update the flight information for an existing flight.\n         */\n        public function update(Request $request): RedirectResponse\n        {\n            $user = $request->user();\n\n            // ...\n\n            return redirect('/flights');\n        }\n    }\n\n<a name=\"determining-if-the-current-user-is-authenticated\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":149,"to":171}}}}],["76",{"pageContent":"Determining If The Current User Is Authenticated\n\nTo determine if the user making the incoming HTTP request is authenticated, you may use the `check` method on the `Auth` facade. This method will return `true` if the user is authenticated:\n\n    use Illuminate\\Support\\Facades\\Auth;\n\n    if (Auth::check()) {\n        // The user is logged in...\n    }\n\n> **Note**  \n> Even though it is possible to determine if a user is authenticated using the `check` method, you will typically use a middleware to verify that the user is authenticated before allowing the user access to certain routes / controllers. To learn more about this, check out the documentation on [protecting routes](/docs/{{version}}/authentication#protecting-routes).\n\n<a name=\"protecting-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":172,"to":185}}}}],["77",{"pageContent":"Protecting Routes\n\n[Route middleware](/docs/{{version}}/middleware) can be used to only allow authenticated users to access a given route. Laravel ships with an `auth` middleware, which references the `Illuminate\\Auth\\Middleware\\Authenticate` class. Since this middleware is already registered in your application's HTTP kernel, all you need to do is attach the middleware to a route definition:\n\n    Route::get('/flights', function () {\n        // Only authenticated users may access this route...\n    })->middleware('auth');\n\n<a name=\"redirecting-unauthenticated-users\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":186,"to":194}}}}],["78",{"pageContent":"Redirecting Unauthenticated Users\n\nWhen the `auth` middleware detects an unauthenticated user, it will redirect the user to the `login` [named route](/docs/{{version}}/routing#named-routes). You may modify this behavior by updating the `redirectTo` function in your application's `app/Http/Middleware/Authenticate.php` file:\n\n    use Illuminate\\Http\\Request;\n\n    /**\n     * Get the path the user should be redirected to.\n     */\n    protected function redirectTo(Request $request): string\n    {\n        return route('login');\n    }\n\n<a name=\"specifying-a-guard\"></a>\n#### Specifying A Guard\n\nWhen attaching the `auth` middleware to a route, you may also specify which \"guard\" should be used to authenticate the user. The guard specified should correspond to one of the keys in the `guards` array of your `auth.php` configuration file:\n\n    Route::get('/flights', function () {\n        // Only authenticated users may access this route...\n    })->middleware('auth:admin');\n\n<a name=\"login-throttling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":195,"to":218}}}}],["79",{"pageContent":"Login Throttling\n\nIf you are using the Laravel Breeze or Laravel Jetstream [starter kits](/docs/{{version}}/starter-kits), rate limiting will automatically be applied to login attempts. By default, the user will not be able to login for one minute if they fail to provide the correct credentials after several attempts. The throttling is unique to the user's username / email address and their IP address.\n\n> **Note**  \n> If you would like to rate limit other routes in your application, check out the [rate limiting documentation](/docs/{{version}}/routing#rate-limiting).\n\n<a name=\"authenticating-users\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":219,"to":226}}}}],["80",{"pageContent":"Manually Authenticating Users\n\nYou are not required to use the authentication scaffolding included with Laravel's [application starter kits](/docs/{{version}}/starter-kits). If you choose not to use this scaffolding, you will need to manage user authentication using the Laravel authentication classes directly. Don't worry, it's a cinch!\n\nWe will access Laravel's authentication services via the `Auth` [facade](/docs/{{version}}/facades), so we'll need to make sure to import the `Auth` facade at the top of the class. Next, let's check out the `attempt` method. The `attempt` method is normally used to handle authentication attempts from your application's \"login\" form. If authentication is successful, you should regenerate the user's [session](/docs/{{version}}/session) to prevent [session fixation](https://en.wikipedia.org/wiki/Session_fixation):\n\n    <?php\n\n    namespace App\\Http\\Controllers;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":227,"to":235}}}}],["81",{"pageContent":"<?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Support\\Facades\\Auth;\n\n    class LoginController extends Controller\n    {\n        /**\n         * Handle an authentication attempt.\n         */\n        public function authenticate(Request $request): RedirectResponse\n        {\n            $credentials = $request->validate([\n                'email' => ['required', 'email'],\n                'password' => ['required'],\n            ]);\n\n            if (Auth::attempt($credentials)) {\n                $request->session()->regenerate();\n\n                return redirect()->intended('dashboard');\n            }\n\n            return back()->withErrors([\n                'email' => 'The provided credentials do not match our records.',\n            ])->onlyInput('email');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":235,"to":265}}}}],["82",{"pageContent":"return back()->withErrors([\n                'email' => 'The provided credentials do not match our records.',\n            ])->onlyInput('email');\n        }\n    }\n\nThe `attempt` method accepts an array of key / value pairs as its first argument. The values in the array will be used to find the user in your database table. So, in the example above, the user will be retrieved by the value of the `email` column. If the user is found, the hashed password stored in the database will be compared with the `password` value passed to the method via the array. You should not hash the incoming request's `password` value, since the framework will automatically hash the value before comparing it to the hashed password in the database. An authenticated session will be started for the user if the two hashed passwords match.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":265,"to":271}}}}],["83",{"pageContent":"Remember, Laravel's authentication services will retrieve users from your database based on your authentication guard's \"provider\" configuration. In the default `config/auth.php` configuration file, the Eloquent user provider is specified and it is instructed to use the `App\\Models\\User` model when retrieving users. You may change these values within your configuration file based on the needs of your application.\n\nThe `attempt` method will return `true` if authentication was successful. Otherwise, `false` will be returned.\n\nThe `intended` method provided by Laravel's redirector will redirect the user to the URL they were attempting to access before being intercepted by the authentication middleware. A fallback URI may be given to this method in case the intended destination is not available.\n\n<a name=\"specifying-additional-conditions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":273,"to":279}}}}],["84",{"pageContent":"Specifying Additional Conditions\n\nIf you wish, you may also add extra query conditions to the authentication query in addition to the user's email and password. To accomplish this, we may simply add the query conditions to the array passed to the `attempt` method. For example, we may verify that the user is marked as \"active\":\n\n    if (Auth::attempt(['email' => $email, 'password' => $password, 'active' => 1])) {\n        // Authentication was successful...\n    }\n\nFor complex query conditions, you may provide a closure in your array of credentials. This closure will be invoked with the query instance, allowing you to customize the query based on your application's needs:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    if (Auth::attempt([\n        'email' => $email, \n        'password' => $password, \n        fn (Builder $query) => $query->has('activeSubscription'),\n    ])) {\n        // Authentication was successful...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":280,"to":298}}}}],["85",{"pageContent":"> **Warning**  \n> In these examples, `email` is not a required option, it is merely used as an example. You should use whatever column name corresponds to a \"username\" in your database table.\n\nThe `attemptWhen` method, which receives a closure as its second argument, may be used to perform more extensive inspection of the potential user before actually authenticating the user. The closure receives the potential user and should return `true` or `false` to indicate if the user may be authenticated:\n\n    if (Auth::attemptWhen([\n        'email' => $email,\n        'password' => $password,\n    ], function (User $user) {\n        return $user->isNotBanned();\n    })) {\n        // Authentication was successful...\n    }\n\n<a name=\"accessing-specific-guard-instances\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":300,"to":314}}}}],["86",{"pageContent":"Accessing Specific Guard Instances\n\nVia the `Auth` facade's `guard` method, you may specify which guard instance you would like to utilize when authenticating the user. This allows you to manage authentication for separate parts of your application using entirely separate authenticatable models or user tables.\n\nThe guard name passed to the `guard` method should correspond to one of the guards configured in your `auth.php` configuration file:\n\n    if (Auth::guard('admin')->attempt($credentials)) {\n        // ...\n    }\n\n<a name=\"remembering-users\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":315,"to":325}}}}],["87",{"pageContent":"Remembering Users\n\nMany web applications provide a \"remember me\" checkbox on their login form. If you would like to provide \"remember me\" functionality in your application, you may pass a boolean value as the second argument to the `attempt` method.\n\nWhen this value is `true`, Laravel will keep the user authenticated indefinitely or until they manually logout. Your `users` table must include the string `remember_token` column, which will be used to store the \"remember me\" token. The `users` table migration included with new Laravel applications already includes this column:\n\n    use Illuminate\\Support\\Facades\\Auth;\n\n    if (Auth::attempt(['email' => $email, 'password' => $password], $remember)) {\n        // The user is being remembered...\n    }\n\nIf your application offers \"remember me\" functionality, you may use the `viaRemember`  method to determine if the currently authenticated user was authenticated using the \"remember me\" cookie:\n\n    use Illuminate\\Support\\Facades\\Auth;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":326,"to":340}}}}],["88",{"pageContent":"use Illuminate\\Support\\Facades\\Auth;\n\n    if (Auth::viaRemember()) {\n        // ...\n    }\n\n<a name=\"other-authentication-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":340,"to":346}}}}],["89",{"pageContent":"Other Authentication Methods\n\n<a name=\"authenticate-a-user-instance\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":347,"to":349}}}}],["90",{"pageContent":"Authenticate A User Instance\n\nIf you need to set an existing user instance as the currently authenticated user, you may pass the user instance to the `Auth` facade's `login` method. The given user instance must be an implementation of the `Illuminate\\Contracts\\Auth\\Authenticatable` [contract](/docs/{{version}}/contracts). The `App\\Models\\User` model included with Laravel already implements this interface. This method of authentication is useful when you already have a valid user instance, such as directly after a user registers with your application:\n\n    use Illuminate\\Support\\Facades\\Auth;\n\n    Auth::login($user);\n\nYou may pass a boolean value as the second argument to the `login` method. This value indicates if \"remember me\" functionality is desired for the authenticated session. Remember, this means that the session will be authenticated indefinitely or until the user manually logs out of the application:\n\n    Auth::login($user, $remember = true);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":350,"to":360}}}}],["91",{"pageContent":"Auth::login($user, $remember = true);\n\nIf needed, you may specify an authentication guard before calling the `login` method:\n\n    Auth::guard('admin')->login($user);\n\n<a name=\"authenticate-a-user-by-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":360,"to":366}}}}],["92",{"pageContent":"Authenticate A User By ID\n\nTo authenticate a user using their database record's primary key, you may use the `loginUsingId` method. This method accepts the primary key of the user you wish to authenticate:\n\n    Auth::loginUsingId(1);\n\nYou may pass a boolean value as the second argument to the `loginUsingId` method. This value indicates if \"remember me\" functionality is desired for the authenticated session. Remember, this means that the session will be authenticated indefinitely or until the user manually logs out of the application:\n\n    Auth::loginUsingId(1, $remember = true);\n\n<a name=\"authenticate-a-user-once\"></a>\n#### Authenticate A User Once\n\nYou may use the `once` method to authenticate a user with the application for a single request. No sessions or cookies will be utilized when calling this method:\n\n    if (Auth::once($credentials)) {\n        // ...\n    }\n\n<a name=\"http-basic-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":367,"to":386}}}}],["93",{"pageContent":"HTTP Basic Authentication\n\n[HTTP Basic Authentication](https://en.wikipedia.org/wiki/Basic_access_authentication) provides a quick way to authenticate users of your application without setting up a dedicated \"login\" page. To get started, attach the `auth.basic` [middleware](/docs/{{version}}/middleware) to a route. The `auth.basic` middleware is included with the Laravel framework, so you do not need to define it:\n\n    Route::get('/profile', function () {\n        // Only authenticated users may access this route...\n    })->middleware('auth.basic');\n\nOnce the middleware has been attached to the route, you will automatically be prompted for credentials when accessing the route in your browser. By default, the `auth.basic` middleware will assume the `email` column on your `users` database table is the user's \"username\".\n\n<a name=\"a-note-on-fastcgi\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":387,"to":397}}}}],["94",{"pageContent":"A Note On FastCGI\n\nIf you are using PHP FastCGI and Apache to serve your Laravel application, HTTP Basic authentication may not work correctly. To correct these problems, the following lines may be added to your application's `.htaccess` file:\n\n```apache\nRewriteCond %{HTTP:Authorization} ^(.+)$\nRewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]\n```\n\n<a name=\"stateless-http-basic-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":398,"to":407}}}}],["95",{"pageContent":"Stateless HTTP Basic Authentication\n\nYou may also use HTTP Basic Authentication without setting a user identifier cookie in the session. This is primarily helpful if you choose to use HTTP Authentication to authenticate requests to your application's API. To accomplish this, [define a middleware](/docs/{{version}}/middleware) that calls the `onceBasic` method. If no response is returned by the `onceBasic` method, the request may be passed further into the application:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Auth;\n    use Symfony\\Component\\HttpFoundation\\Response;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":408,"to":419}}}}],["96",{"pageContent":"<?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Auth;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class AuthenticateOnceWithBasicAuth\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next): Response\n        {\n            return Auth::onceBasic() ?: $next($request);\n        }\n\n    }\n\nNext, attach the middleware to a route:\n\n    Route::get('/api/user', function () {\n        // Only authenticated users may access this route...\n    })->middleware(AuthenticateOnceWithBasicAuth::class);\n\n<a name=\"logging-out\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":419,"to":448}}}}],["97",{"pageContent":"Logging Out\n\nTo manually log users out of your application, you may use the `logout` method provided by the `Auth` facade. This will remove the authentication information from the user's session so that subsequent requests are not authenticated.\n\nIn addition to calling the `logout` method, it is recommended that you invalidate the user's session and regenerate their [CSRF token](/docs/{{version}}/csrf). After logging the user out, you would typically redirect the user to the root of your application:\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Support\\Facades\\Auth;\n\n    /**\n     * Log the user out of the application.\n     */\n    public function logout(Request $request): RedirectResponse\n    {\n        Auth::logout();\n\n        $request->session()->invalidate();\n\n        $request->session()->regenerateToken();\n\n        return redirect('/');\n    }\n\n<a name=\"invalidating-sessions-on-other-devices\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":449,"to":473}}}}],["98",{"pageContent":"Invalidating Sessions On Other Devices\n\nLaravel also provides a mechanism for invalidating and \"logging out\" a user's sessions that are active on other devices without invalidating the session on their current device. This feature is typically utilized when a user is changing or updating their password and you would like to invalidate sessions on other devices while keeping the current device authenticated.\n\nBefore getting started, you should make sure that the `Illuminate\\Session\\Middleware\\AuthenticateSession` middleware is included on the routes that should receive session authentication. Typically, you should place this middleware on a route group definition so that it can be applied to the majority of your application's routes. By default, the `AuthenticateSession` middleware may be attached to a route using the `auth.session` route middleware alias as defined in your application's HTTP kernel:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":474,"to":478}}}}],["99",{"pageContent":"Route::middleware(['auth', 'auth.session'])->group(function () {\n        Route::get('/', function () {\n            // ...\n        });\n    });\n\nThen, you may use the `logoutOtherDevices` method provided by the `Auth` facade. This method requires the user to confirm their current password, which your application should accept through an input form:\n\n    use Illuminate\\Support\\Facades\\Auth;\n\n    Auth::logoutOtherDevices($currentPassword);\n\nWhen the `logoutOtherDevices` method is invoked, the user's other sessions will be invalidated entirely, meaning they will be \"logged out\" of all guards they were previously authenticated by.\n\n<a name=\"password-confirmation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":480,"to":494}}}}],["100",{"pageContent":"Password Confirmation\n\nWhile building your application, you may occasionally have actions that should require the user to confirm their password before the action is performed or before the user is redirected to a sensitive area of the application. Laravel includes built-in middleware to make this process a breeze. Implementing this feature will require you to define two routes: one route to display a view asking the user to confirm their password and another route to confirm that the password is valid and redirect the user to their intended destination.\n\n> **Note**  \n> The following documentation discusses how to integrate with Laravel's password confirmation features directly; however, if you would like to get started more quickly, the [Laravel application starter kits](/docs/{{version}}/starter-kits) include support for this feature!\n\n<a name=\"password-confirmation-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":495,"to":502}}}}],["101",{"pageContent":"Configuration\n\nAfter confirming their password, a user will not be asked to confirm their password again for three hours. However, you may configure the length of time before the user is re-prompted for their password by changing the value of the `password_timeout` configuration value within your application's `config/auth.php` configuration file.\n\n<a name=\"password-confirmation-routing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":503,"to":507}}}}],["102",{"pageContent":"Routing\n\n<a name=\"the-password-confirmation-form\"></a>\n#### The Password Confirmation Form\n\nFirst, we will define a route to display a view that requests the user to confirm their password:\n\n    Route::get('/confirm-password', function () {\n        return view('auth.confirm-password');\n    })->middleware('auth')->name('password.confirm');\n\nAs you might expect, the view that is returned by this route should have a form containing a `password` field. In addition, feel free to include text within the view that explains that the user is entering a protected area of the application and must confirm their password.\n\n<a name=\"confirming-the-password\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":508,"to":521}}}}],["103",{"pageContent":"Confirming The Password\n\nNext, we will define a route that will handle the form request from the \"confirm password\" view. This route will be responsible for validating the password and redirecting the user to their intended destination:\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Hash;\n    use Illuminate\\Support\\Facades\\Redirect;\n\n    Route::post('/confirm-password', function (Request $request) {\n        if (! Hash::check($request->password, $request->user()->password)) {\n            return back()->withErrors([\n                'password' => ['The provided password does not match our records.']\n            ]);\n        }\n\n        $request->session()->passwordConfirmed();\n\n        return redirect()->intended();\n    })->middleware(['auth', 'throttle:6,1']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":522,"to":540}}}}],["104",{"pageContent":"$request->session()->passwordConfirmed();\n\n        return redirect()->intended();\n    })->middleware(['auth', 'throttle:6,1']);\n\nBefore moving on, let's examine this route in more detail. First, the request's `password` field is determined to actually match the authenticated user's password. If the password is valid, we need to inform Laravel's session that the user has confirmed their password. The `passwordConfirmed` method will set a timestamp in the user's session that Laravel can use to determine when the user last confirmed their password. Finally, we can redirect the user to their intended destination.\n\n<a name=\"password-confirmation-protecting-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":540,"to":547}}}}],["105",{"pageContent":"Protecting Routes\n\nYou should ensure that any route that performs an action which requires recent password confirmation is assigned the `password.confirm` middleware. This middleware is included with the default installation of Laravel and will automatically store the user's intended destination in the session so that the user may be redirected to that location after confirming their password. After storing the user's intended destination in the session, the middleware will redirect the user to the `password.confirm` [named route](/docs/{{version}}/routing#named-routes):\n\n    Route::get('/settings', function () {\n        // ...\n    })->middleware(['password.confirm']);\n\n    Route::post('/settings', function () {\n        // ...\n    })->middleware(['password.confirm']);\n\n<a name=\"adding-custom-guards\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":548,"to":560}}}}],["106",{"pageContent":"Adding Custom Guards\n\nYou may define your own authentication guards using the `extend` method on the `Auth` facade. You should place your call to the `extend` method within a [service provider](/docs/{{version}}/providers). Since Laravel already ships with an `AuthServiceProvider`, we can place the code in that provider:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Services\\Auth\\JwtGuard;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Foundation\\Support\\Providers\\AuthServiceProvider as ServiceProvider;\n    use Illuminate\\Support\\Facades\\Auth;\n\n    class AuthServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application authentication / authorization services.\n         */\n        public function boot(): void\n        {\n            Auth::extend('jwt', function (Application $app, string $name, array $config) {\n                // Return an instance of Illuminate\\Contracts\\Auth\\Guard...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":561,"to":582}}}}],["107",{"pageContent":"return new JwtGuard(Auth::createUserProvider($config['provider']));\n            });\n        }\n    }\n\nAs you can see in the example above, the callback passed to the `extend` method should return an implementation of `Illuminate\\Contracts\\Auth\\Guard`. This interface contains a few methods you will need to implement to define a custom guard. Once your custom guard has been defined, you may reference the guard in the `guards` configuration of your `auth.php` configuration file:\n\n    'guards' => [\n        'api' => [\n            'driver' => 'jwt',\n            'provider' => 'users',\n        ],\n    ],\n\n<a name=\"closure-request-guards\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":584,"to":598}}}}],["108",{"pageContent":"Closure Request Guards\n\nThe simplest way to implement a custom, HTTP request based authentication system is by using the `Auth::viaRequest` method. This method allows you to quickly define your authentication process using a single closure.\n\nTo get started, call the `Auth::viaRequest` method within the `boot` method of your `AuthServiceProvider`. The `viaRequest` method accepts an authentication driver name as its first argument. This name can be any string that describes your custom guard. The second argument passed to the method should be a closure that receives the incoming HTTP request and returns a user instance or, if authentication fails, `null`:\n\n    use App\\Models\\User;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Auth;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":599,"to":607}}}}],["109",{"pageContent":"use App\\Models\\User;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Auth;\n\n    /**\n     * Register any application authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Auth::viaRequest('custom-token', function (Request $request) {\n            return User::where('token', (string) $request->token)->first();\n        });\n    }\n\nOnce your custom authentication driver has been defined, you may configure it as a driver within the `guards` configuration of your `auth.php` configuration file:\n\n    'guards' => [\n        'api' => [\n            'driver' => 'custom-token',\n        ],\n    ],\n\nFinally, you may reference the guard when assigning the authentication middleware to a route:\n\n    Route::middleware('auth:api')->group(function () {\n        // ...\n    });\n\n<a name=\"adding-custom-user-providers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":607,"to":635}}}}],["110",{"pageContent":"Adding Custom User Providers\n\nIf you are not using a traditional relational database to store your users, you will need to extend Laravel with your own authentication user provider. We will use the `provider` method on the `Auth` facade to define a custom user provider. The user provider resolver should return an implementation of `Illuminate\\Contracts\\Auth\\UserProvider`:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Extensions\\MongoUserProvider;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Foundation\\Support\\Providers\\AuthServiceProvider as ServiceProvider;\n    use Illuminate\\Support\\Facades\\Auth;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":636,"to":647}}}}],["111",{"pageContent":"class AuthServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application authentication / authorization services.\n         */\n        public function boot(): void\n        {\n            Auth::provider('mongo', function (Application $app, array $config) {\n                // Return an instance of Illuminate\\Contracts\\Auth\\UserProvider...\n\n                return new MongoUserProvider($app->make('mongo.connection'));\n            });\n        }\n    }\n\nAfter you have registered the provider using the `provider` method, you may switch to the new user provider in your `auth.php` configuration file. First, define a `provider` that uses your new driver:\n\n    'providers' => [\n        'users' => [\n            'driver' => 'mongo',\n        ],\n    ],\n\nFinally, you may reference this provider in your `guards` configuration:\n\n    'guards' => [\n        'web' => [\n            'driver' => 'session',\n            'provider' => 'users',\n        ],\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":649,"to":679}}}}],["112",{"pageContent":"Finally, you may reference this provider in your `guards` configuration:\n\n    'guards' => [\n        'web' => [\n            'driver' => 'session',\n            'provider' => 'users',\n        ],\n    ],\n\n<a name=\"the-user-provider-contract\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":679,"to":688}}}}],["113",{"pageContent":"The User Provider Contract\n\n`Illuminate\\Contracts\\Auth\\UserProvider` implementations are responsible for fetching an `Illuminate\\Contracts\\Auth\\Authenticatable` implementation out of a persistent storage system, such as MySQL, MongoDB, etc. These two interfaces allow the Laravel authentication mechanisms to continue functioning regardless of how the user data is stored or what type of class is used to represent the authenticated user:\n\nLet's take a look at the `Illuminate\\Contracts\\Auth\\UserProvider` contract:\n\n    <?php\n\n    namespace Illuminate\\Contracts\\Auth;\n\n    interface UserProvider\n    {\n        public function retrieveById($identifier);\n        public function retrieveByToken($identifier, $token);\n        public function updateRememberToken(Authenticatable $user, $token);\n        public function retrieveByCredentials(array $credentials);\n        public function validateCredentials(Authenticatable $user, array $credentials);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":689,"to":706}}}}],["114",{"pageContent":"The `retrieveById` function typically receives a key representing the user, such as an auto-incrementing ID from a MySQL database. The `Authenticatable` implementation matching the ID should be retrieved and returned by the method.\n\nThe `retrieveByToken` function retrieves a user by their unique `$identifier` and \"remember me\" `$token`, typically stored in a database column like `remember_token`. As with the previous method, the `Authenticatable` implementation with a matching token value should be returned by this method.\n\nThe `updateRememberToken` method updates the `$user` instance's `remember_token` with the new `$token`. A fresh token is assigned to users on a successful \"remember me\" authentication attempt or when the user is logging out.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":708,"to":712}}}}],["115",{"pageContent":"The `retrieveByCredentials` method receives the array of credentials passed to the `Auth::attempt` method when attempting to authenticate with an application. The method should then \"query\" the underlying persistent storage for the user matching those credentials. Typically, this method will run a query with a \"where\" condition that searches for a user record with a \"username\" matching the value of `$credentials['username']`. The method should return an implementation of `Authenticatable`. **This method should not attempt to do any password validation or authentication.**\n\nThe `validateCredentials` method should compare the given `$user` with the `$credentials` to authenticate the user. For example, this method will typically use the `Hash::check` method to compare the value of `$user->getAuthPassword()` to the value of `$credentials['password']`. This method should return `true` or `false` indicating whether the password is valid.\n\n<a name=\"the-authenticatable-contract\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":714,"to":718}}}}],["116",{"pageContent":"The Authenticatable Contract\n\nNow that we have explored each of the methods on the `UserProvider`, let's take a look at the `Authenticatable` contract. Remember, user providers should return implementations of this interface from the `retrieveById`, `retrieveByToken`, and `retrieveByCredentials` methods:\n\n    <?php\n\n    namespace Illuminate\\Contracts\\Auth;\n\n    interface Authenticatable\n    {\n        public function getAuthIdentifierName();\n        public function getAuthIdentifier();\n        public function getAuthPassword();\n        public function getRememberToken();\n        public function setRememberToken($value);\n        public function getRememberTokenName();\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":719,"to":735}}}}],["117",{"pageContent":"This interface is simple. The `getAuthIdentifierName` method should return the name of the \"primary key\" field of the user and the `getAuthIdentifier` method should return the \"primary key\" of the user. When using a MySQL back-end, this would likely be the auto-incrementing primary key assigned to the user record. The `getAuthPassword` method should return the user's hashed password.\n\nThis interface allows the authentication system to work with any \"user\" class, regardless of what ORM or storage abstraction layer you are using. By default, Laravel includes an `App\\Models\\User` class in the `app/Models` directory which implements this interface.\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":737,"to":741}}}}],["118",{"pageContent":"Events\n\nLaravel dispatches a variety of [events](/docs/{{version}}/events) during the authentication process. You may attach listeners to these events in your `EventServiceProvider`:\n\n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        'Illuminate\\Auth\\Events\\Registered' => [\n            'App\\Listeners\\LogRegisteredUser',\n        ],\n\n        'Illuminate\\Auth\\Events\\Attempting' => [\n            'App\\Listeners\\LogAuthenticationAttempt',\n        ],\n\n        'Illuminate\\Auth\\Events\\Authenticated' => [\n            'App\\Listeners\\LogAuthenticated',\n        ],\n\n        'Illuminate\\Auth\\Events\\Login' => [\n            'App\\Listeners\\LogSuccessfulLogin',\n        ],\n\n        'Illuminate\\Auth\\Events\\Failed' => [\n            'App\\Listeners\\LogFailedLogin',\n        ],\n\n        'Illuminate\\Auth\\Events\\Validated' => [\n            'App\\Listeners\\LogValidated',\n        ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":742,"to":774}}}}],["119",{"pageContent":"'Illuminate\\Auth\\Events\\Failed' => [\n            'App\\Listeners\\LogFailedLogin',\n        ],\n\n        'Illuminate\\Auth\\Events\\Validated' => [\n            'App\\Listeners\\LogValidated',\n        ],\n\n        'Illuminate\\Auth\\Events\\Verified' => [\n            'App\\Listeners\\LogVerified',\n        ],\n\n        'Illuminate\\Auth\\Events\\Logout' => [\n            'App\\Listeners\\LogSuccessfulLogout',\n        ],\n\n        'Illuminate\\Auth\\Events\\CurrentDeviceLogout' => [\n            'App\\Listeners\\LogCurrentDeviceLogout',\n        ],\n\n        'Illuminate\\Auth\\Events\\OtherDeviceLogout' => [\n            'App\\Listeners\\LogOtherDeviceLogout',\n        ],\n\n        'Illuminate\\Auth\\Events\\Lockout' => [\n            'App\\Listeners\\LogLockout',\n        ],\n\n        'Illuminate\\Auth\\Events\\PasswordReset' => [\n            'App\\Listeners\\LogPasswordReset',\n        ],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authentication.md","loc":{"lines":{"from":774,"to":805}}}}],["120",{"pageContent":"# Authorization","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":1,"to":1}}}}],["121",{"pageContent":"- [Introduction](#introduction)\n- [Gates](#gates)\n    - [Writing Gates](#writing-gates)\n    - [Authorizing Actions](#authorizing-actions-via-gates)\n    - [Gate Responses](#gate-responses)\n    - [Intercepting Gate Checks](#intercepting-gate-checks)\n    - [Inline Authorization](#inline-authorization)\n- [Creating Policies](#creating-policies)\n    - [Generating Policies](#generating-policies)\n    - [Registering Policies](#registering-policies)\n- [Writing Policies](#writing-policies)\n    - [Policy Methods](#policy-methods)\n    - [Policy Responses](#policy-responses)\n    - [Methods Without Models](#methods-without-models)\n    - [Guest Users](#guest-users)\n    - [Policy Filters](#policy-filters)\n- [Authorizing Actions Using Policies](#authorizing-actions-using-policies)\n    - [Via The User Model](#via-the-user-model)\n    - [Via Controller Helpers](#via-controller-helpers)\n    - [Via Middleware](#via-middleware)\n    - [Via Blade Templates](#via-blade-templates)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":3,"to":23}}}}],["122",{"pageContent":"- [Via The User Model](#via-the-user-model)\n    - [Via Controller Helpers](#via-controller-helpers)\n    - [Via Middleware](#via-middleware)\n    - [Via Blade Templates](#via-blade-templates)\n    - [Supplying Additional Context](#supplying-additional-context)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":23,"to":27}}}}],["123",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":29,"to":29}}}}],["124",{"pageContent":"Introduction\n\nIn addition to providing built-in [authentication](/docs/{{version}}/authentication) services, Laravel also provides a simple way to authorize user actions against a given resource. For example, even though a user is authenticated, they may not be authorized to update or delete certain Eloquent models or database records managed by your application. Laravel's authorization features provide an easy, organized way of managing these types of authorization checks.\n\nLaravel provides two primary ways of authorizing actions: [gates](#gates) and [policies](#creating-policies). Think of gates and policies like routes and controllers. Gates provide a simple, closure-based approach to authorization while policies, like controllers, group logic around a particular model or resource. In this documentation, we'll explore gates first and then examine policies.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":30,"to":34}}}}],["125",{"pageContent":"You do not need to choose between exclusively using gates or exclusively using policies when building an application. Most applications will most likely contain some mixture of gates and policies, and that is perfectly fine! Gates are most applicable to actions that are not related to any model or resource, such as viewing an administrator dashboard. In contrast, policies should be used when you wish to authorize an action for a particular model or resource.\n\n<a name=\"gates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":36,"to":38}}}}],["126",{"pageContent":"Gates\n\n<a name=\"writing-gates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":39,"to":41}}}}],["127",{"pageContent":"Writing Gates\n\n> **Warning**  \n> Gates are a great way to learn the basics of Laravel's authorization features; however, when building robust Laravel applications you should consider using [policies](#creating-policies) to organize your authorization rules.\n\nGates are simply closures that determine if a user is authorized to perform a given action. Typically, gates are defined within the `boot` method of the `App\\Providers\\AuthServiceProvider` class using the `Gate` facade. Gates always receive a user instance as their first argument and may optionally receive additional arguments such as a relevant Eloquent model.\n\nIn this example, we'll define a gate to determine if a user can update a given `App\\Models\\Post` model. The gate will accomplish this by comparing the user's `id` against the `user_id` of the user that created the post:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Gate;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":42,"to":53}}}}],["128",{"pageContent":"use App\\Models\\Post;\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Gate::define('update-post', function (User $user, Post $post) {\n            return $user->id === $post->user_id;\n        });\n    }\n\nLike controllers, gates may also be defined using a class callback array:\n\n    use App\\Policies\\PostPolicy;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Gate::define('update-post', [PostPolicy::class, 'update']);\n    }\n\n<a name=\"authorizing-actions-via-gates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":53,"to":80}}}}],["129",{"pageContent":"Authorizing Actions\n\nTo authorize an action using gates, you should use the `allows` or `denies` methods provided by the `Gate` facade. Note that you are not required to pass the currently authenticated user to these methods. Laravel will automatically take care of passing the user into the gate closure. It is typical to call the gate authorization methods within your application's controllers before performing an action that requires authorization:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Post;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    class PostController extends Controller\n    {\n        /**\n         * Update the given post.\n         */\n        public function update(Request $request, Post $post): RedirectResponse\n        {\n            if (! Gate::allows('update-post', $post)) {\n                abort(403);\n            }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":81,"to":104}}}}],["130",{"pageContent":"// Update the post...\n\n            return redirect('/posts');\n        }\n    }\n\nIf you would like to determine if a user other than the currently authenticated user is authorized to perform an action, you may use the `forUser` method on the `Gate` facade:\n\n    if (Gate::forUser($user)->allows('update-post', $post)) {\n        // The user can update the post...\n    }\n\n    if (Gate::forUser($user)->denies('update-post', $post)) {\n        // The user can't update the post...\n    }\n\nYou may authorize multiple actions at a time using the `any` or `none` methods:\n\n    if (Gate::any(['update-post', 'delete-post'], $post)) {\n        // The user can update or delete the post...\n    }\n\n    if (Gate::none(['update-post', 'delete-post'], $post)) {\n        // The user can't update or delete the post...\n    }\n\n<a name=\"authorizing-or-throwing-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":106,"to":132}}}}],["131",{"pageContent":"Authorizing Or Throwing Exceptions\n\nIf you would like to attempt to authorize an action and automatically throw an `Illuminate\\Auth\\Access\\AuthorizationException` if the user is not allowed to perform the given action, you may use the `Gate` facade's `authorize` method. Instances of `AuthorizationException` are automatically converted to a 403 HTTP response by Laravel's exception handler:\n\n    Gate::authorize('update-post', $post);\n\n    // The action is authorized...\n\n<a name=\"gates-supplying-additional-context\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":133,"to":141}}}}],["132",{"pageContent":"Supplying Additional Context\n\nThe gate methods for authorizing abilities (`allows`, `denies`, `check`, `any`, `none`, `authorize`, `can`, `cannot`) and the authorization [Blade directives](#via-blade-templates) (`@can`, `@cannot`, `@canany`) can receive an array as their second argument. These array elements are passed as parameters to the gate closure, and can be used for additional context when making authorization decisions:\n\n    use App\\Models\\Category;\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    Gate::define('create-post', function (User $user, Category $category, bool $pinned) {\n        if (! $user->canPublishToGroup($category->group)) {\n            return false;\n        } elseif ($pinned && ! $user->canPinPosts()) {\n            return false;\n        }\n\n        return true;\n    });\n\n    if (Gate::check('create-post', [$category, $pinned])) {\n        // The user can create the post...\n    }\n\n<a name=\"gate-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":142,"to":164}}}}],["133",{"pageContent":"Gate Responses\n\nSo far, we have only examined gates that return simple boolean values. However, sometimes you may wish to return a more detailed response, including an error message. To do so, you may return an `Illuminate\\Auth\\Access\\Response` from your gate:\n\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    Gate::define('edit-settings', function (User $user) {\n        return $user->isAdmin\n                    ? Response::allow()\n                    : Response::deny('You must be an administrator.');\n    });\n\nEven when you return an authorization response from your gate, the `Gate::allows` method will still return a simple boolean value; however, you may use the `Gate::inspect` method to get the full authorization response returned by the gate:\n\n    $response = Gate::inspect('edit-settings');\n\n    if ($response->allowed()) {\n        // The action is authorized...\n    } else {\n        echo $response->message();\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":165,"to":187}}}}],["134",{"pageContent":"$response = Gate::inspect('edit-settings');\n\n    if ($response->allowed()) {\n        // The action is authorized...\n    } else {\n        echo $response->message();\n    }\n\nWhen using the `Gate::authorize` method, which throws an `AuthorizationException` if the action is not authorized, the error message provided by the authorization response will be propagated to the HTTP response:\n\n    Gate::authorize('edit-settings');\n\n    // The action is authorized...\n\n<a name=\"customising-gate-response-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":187,"to":201}}}}],["135",{"pageContent":"Customizing The HTTP Response Status\n\nWhen an action is denied via a Gate, a `403` HTTP response is returned; however, it can sometimes be useful to return an alternative HTTP status code. You may customize the HTTP status code returned for a failed authorization check using the `denyWithStatus` static constructor on the `Illuminate\\Auth\\Access\\Response` class:\n\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    Gate::define('edit-settings', function (User $user) {\n        return $user->isAdmin\n                    ? Response::allow()\n                    : Response::denyWithStatus(404);\n    });\n\nBecause hiding resources via a `404` response is such a common pattern for web applications, the `denyAsNotFound` method is offered for convenience:\n\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;\n    use Illuminate\\Support\\Facades\\Gate;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":202,"to":220}}}}],["136",{"pageContent":"use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    Gate::define('edit-settings', function (User $user) {\n        return $user->isAdmin\n                    ? Response::allow()\n                    : Response::denyAsNotFound();\n    });\n\n<a name=\"intercepting-gate-checks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":220,"to":230}}}}],["137",{"pageContent":"Intercepting Gate Checks\n\nSometimes, you may wish to grant all abilities to a specific user. You may use the `before` method to define a closure that is run before all other authorization checks:\n\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    Gate::before(function (User $user, string $ability) {\n        if ($user->isAdministrator()) {\n            return true;\n        }\n    });\n\nIf the `before` closure returns a non-null result that result will be considered the result of the authorization check.\n\nYou may use the `after` method to define a closure to be executed after all other authorization checks:\n\n    use App\\Models\\User;\n\n    Gate::after(function (User $user, string $ability, bool|null $result, mixed $arguments) {\n        if ($user->isAdministrator()) {\n            return true;\n        }\n    });\n\nSimilar to the `before` method, if the `after` closure returns a non-null result that result will be considered the result of the authorization check.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":231,"to":256}}}}],["138",{"pageContent":"Similar to the `before` method, if the `after` closure returns a non-null result that result will be considered the result of the authorization check.\n\n<a name=\"inline-authorization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":256,"to":258}}}}],["139",{"pageContent":"Inline Authorization\n\nOccasionally, you may wish to determine if the currently authenticated user is authorized to perform a given action without writing a dedicated gate that corresponds to the action. Laravel allows you to perform these types of \"inline\" authorization checks via the `Gate::allowIf` and `Gate::denyIf` methods:\n\n```php\nuse App\\Models\\User;\nuse Illuminate\\Support\\Facades\\Gate;\n\nGate::allowIf(fn (User $user) => $user->isAdministrator());\n\nGate::denyIf(fn (User $user) => $user->banned());\n```\n\nIf the action is not authorized or if no user is currently authenticated, Laravel will automatically throw an `Illuminate\\Auth\\Access\\AuthorizationException` exception. Instances of `AuthorizationException` are automatically converted to a 403 HTTP response by Laravel's exception handler.\n\n<a name=\"creating-policies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":259,"to":274}}}}],["140",{"pageContent":"Creating Policies\n\n<a name=\"generating-policies\"></a>\n### Generating Policies\n\nPolicies are classes that organize authorization logic around a particular model or resource. For example, if your application is a blog, you may have an `App\\Models\\Post` model and a corresponding `App\\Policies\\PostPolicy` to authorize user actions such as creating or updating posts.\n\nYou may generate a policy using the `make:policy` Artisan command. The generated policy will be placed in the `app/Policies` directory. If this directory does not exist in your application, Laravel will create it for you:\n\n```shell\nphp artisan make:policy PostPolicy\n```\n\nThe `make:policy` command will generate an empty policy class. If you would like to generate a class with example policy methods related to viewing, creating, updating, and deleting the resource, you may provide a `--model` option when executing the command:\n\n```shell\nphp artisan make:policy PostPolicy --model=Post\n```\n\n<a name=\"registering-policies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":275,"to":294}}}}],["141",{"pageContent":"Registering Policies\n\nOnce the policy class has been created, it needs to be registered. Registering policies is how we can inform Laravel which policy to use when authorizing actions against a given model type.\n\nThe `App\\Providers\\AuthServiceProvider` included with fresh Laravel applications contains a `policies` property which maps your Eloquent models to their corresponding policies. Registering a policy will instruct Laravel which policy to utilize when authorizing actions against a given Eloquent model:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Models\\Post;\n    use App\\Policies\\PostPolicy;\n    use Illuminate\\Foundation\\Support\\Providers\\AuthServiceProvider as ServiceProvider;\n    use Illuminate\\Support\\Facades\\Gate;\n\n    class AuthServiceProvider extends ServiceProvider\n    {\n        /**\n         * The policy mappings for the application.\n         *\n         * @var array\n         */\n        protected $policies = [\n            Post::class => PostPolicy::class,\n        ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":295,"to":319}}}}],["142",{"pageContent":"/**\n         * Register any application authentication / authorization services.\n         */\n        public function boot(): void\n        {\n            // ...\n        }\n    }\n\n<a name=\"policy-auto-discovery\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":321,"to":330}}}}],["143",{"pageContent":"Policy Auto-Discovery\n\nInstead of manually registering model policies, Laravel can automatically discover policies as long as the model and policy follow standard Laravel naming conventions. Specifically, the policies must be in a `Policies` directory at or above the directory that contains your models. So, for example, the models may be placed in the `app/Models` directory while the policies may be placed in the `app/Policies` directory. In this situation, Laravel will check for policies in `app/Models/Policies` then `app/Policies`. In addition, the policy name must match the model name and have a `Policy` suffix. So, a `User` model would correspond to a `UserPolicy` policy class.\n\nIf you would like to define your own policy discovery logic, you may register a custom policy discovery callback using the `Gate::guessPolicyNamesUsing` method. Typically, this method should be called from the `boot` method of your application's `AuthServiceProvider`:\n\n    use Illuminate\\Support\\Facades\\Gate;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":331,"to":337}}}}],["144",{"pageContent":"use Illuminate\\Support\\Facades\\Gate;\n\n    Gate::guessPolicyNamesUsing(function (string $modelClass) {\n        // Return the name of the policy class for the given model...\n    });\n\n> **Warning**  \n> Any policies that are explicitly mapped in your `AuthServiceProvider` will take precedence over any potentially auto-discovered policies.\n\n<a name=\"writing-policies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":337,"to":346}}}}],["145",{"pageContent":"Writing Policies\n\n<a name=\"policy-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":347,"to":349}}}}],["146",{"pageContent":"Policy Methods\n\nOnce the policy class has been registered, you may add methods for each action it authorizes. For example, let's define an `update` method on our `PostPolicy` which determines if a given `App\\Models\\User` can update a given `App\\Models\\Post` instance.\n\nThe `update` method will receive a `User` and a `Post` instance as its arguments, and should return `true` or `false` indicating whether the user is authorized to update the given `Post`. So, in this example, we will verify that the user's `id` matches the `user_id` on the post:\n\n    <?php\n\n    namespace App\\Policies;\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n\n    class PostPolicy\n    {\n        /**\n         * Determine if the given post can be updated by the user.\n         */\n        public function update(User $user, Post $post): bool\n        {\n            return $user->id === $post->user_id;\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":350,"to":372}}}}],["147",{"pageContent":"You may continue to define additional methods on the policy as needed for the various actions it authorizes. For example, you might define `view` or `delete` methods to authorize various `Post` related actions, but remember you are free to give your policy methods any name you like.\n\nIf you used the `--model` option when generating your policy via the Artisan console, it will already contain methods for the `viewAny`, `view`, `create`, `update`, `delete`, `restore`, and `forceDelete` actions.\n\n> **Note**  \n> All policies are resolved via the Laravel [service container](/docs/{{version}}/container), allowing you to type-hint any needed dependencies in the policy's constructor to have them automatically injected.\n\n<a name=\"policy-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":374,"to":381}}}}],["148",{"pageContent":"Policy Responses\n\nSo far, we have only examined policy methods that return simple boolean values. However, sometimes you may wish to return a more detailed response, including an error message. To do so, you may return an `Illuminate\\Auth\\Access\\Response` instance from your policy method:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;\n\n    /**\n     * Determine if the given post can be updated by the user.\n     */\n    public function update(User $user, Post $post): Response\n    {\n        return $user->id === $post->user_id\n                    ? Response::allow()\n                    : Response::deny('You do not own this post.');\n    }\n\nWhen returning an authorization response from your policy, the `Gate::allows` method will still return a simple boolean value; however, you may use the `Gate::inspect` method to get the full authorization response returned by the gate:\n\n    use Illuminate\\Support\\Facades\\Gate;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":382,"to":402}}}}],["149",{"pageContent":"use Illuminate\\Support\\Facades\\Gate;\n\n    $response = Gate::inspect('update', $post);\n\n    if ($response->allowed()) {\n        // The action is authorized...\n    } else {\n        echo $response->message();\n    }\n\nWhen using the `Gate::authorize` method, which throws an `AuthorizationException` if the action is not authorized, the error message provided by the authorization response will be propagated to the HTTP response:\n\n    Gate::authorize('update', $post);\n\n    // The action is authorized...\n\n<a name=\"customising-policy-response-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":402,"to":418}}}}],["150",{"pageContent":"Customizing The HTTP Response Status\n\nWhen an action is denied via a policy method, a `403` HTTP response is returned; however, it can sometimes be useful to return an alternative HTTP status code. You may customize the HTTP status code returned for a failed authorization check using the `denyWithStatus` static constructor on the `Illuminate\\Auth\\Access\\Response` class:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;\n\n    /**\n     * Determine if the given post can be updated by the user.\n     */\n    public function update(User $user, Post $post): Response\n    {\n        return $user->id === $post->user_id\n                    ? Response::allow()\n                    : Response::denyWithStatus(404);\n    }\n\nBecause hiding resources via a `404` response is such a common pattern for web applications, the `denyAsNotFound` method is offered for convenience:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":419,"to":441}}}}],["151",{"pageContent":"use App\\Models\\Post;\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Access\\Response;\n\n    /**\n     * Determine if the given post can be updated by the user.\n     */\n    public function update(User $user, Post $post): Response\n    {\n        return $user->id === $post->user_id\n                    ? Response::allow()\n                    : Response::denyAsNotFound();\n    }\n\n<a name=\"methods-without-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":441,"to":455}}}}],["152",{"pageContent":"Methods Without Models\n\nSome policy methods only receive an instance of the currently authenticated user. This situation is most common when authorizing `create` actions. For example, if you are creating a blog, you may wish to determine if a user is authorized to create any posts at all. In these situations, your policy method should only expect to receive a user instance:\n\n    /**\n     * Determine if the given user can create posts.\n     */\n    public function create(User $user): bool\n    {\n        return $user->role == 'writer';\n    }\n\n<a name=\"guest-users\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":456,"to":468}}}}],["153",{"pageContent":"Guest Users\n\nBy default, all gates and policies automatically return `false` if the incoming HTTP request was not initiated by an authenticated user. However, you may allow these authorization checks to pass through to your gates and policies by declaring an \"optional\" type-hint or supplying a `null` default value for the user argument definition:\n\n    <?php\n\n    namespace App\\Policies;\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n\n    class PostPolicy\n    {\n        /**\n         * Determine if the given post can be updated by the user.\n         */\n        public function update(?User $user, Post $post): bool\n        {\n            return $user?->id === $post->user_id;\n        }\n    }\n\n<a name=\"policy-filters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":469,"to":491}}}}],["154",{"pageContent":"Policy Filters\n\nFor certain users, you may wish to authorize all actions within a given policy. To accomplish this, define a `before` method on the policy. The `before` method will be executed before any other methods on the policy, giving you an opportunity to authorize the action before the intended policy method is actually called. This feature is most commonly used for authorizing application administrators to perform any action:\n\n    use App\\Models\\User;\n\n    /**\n     * Perform pre-authorization checks.\n     */\n    public function before(User $user, string $ability): bool|null\n    {\n        if ($user->isAdministrator()) {\n            return true;\n        }\n\n        return null;\n    }\n\nIf you would like to deny all authorization checks for a particular type of user then you may return `false` from the `before` method. If `null` is returned, the authorization check will fall through to the policy method.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":492,"to":510}}}}],["155",{"pageContent":"> **Warning**  \n> The `before` method of a policy class will not be called if the class doesn't contain a method with a name matching the name of the ability being checked.\n\n<a name=\"authorizing-actions-using-policies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":512,"to":515}}}}],["156",{"pageContent":"Authorizing Actions Using Policies\n\n<a name=\"via-the-user-model\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":516,"to":518}}}}],["157",{"pageContent":"Via The User Model\n\nThe `App\\Models\\User` model that is included with your Laravel application includes two helpful methods for authorizing actions: `can` and `cannot`. The `can` and `cannot` methods receive the name of the action you wish to authorize and the relevant model. For example, let's determine if a user is authorized to update a given `App\\Models\\Post` model. Typically, this will be done within a controller method:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Post;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PostController extends Controller\n    {\n        /**\n         * Update the given post.\n         */\n        public function update(Request $request, Post $post): RedirectResponse\n        {\n            if ($request->user()->cannot('update', $post)) {\n                abort(403);\n            }\n\n            // Update the post...\n\n            return redirect('/posts');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":519,"to":547}}}}],["158",{"pageContent":"// Update the post...\n\n            return redirect('/posts');\n        }\n    }\n\nIf a [policy is registered](#registering-policies) for the given model, the `can` method will automatically call the appropriate policy and return the boolean result. If no policy is registered for the model, the `can` method will attempt to call the closure-based Gate matching the given action name.\n\n<a name=\"user-model-actions-that-dont-require-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":547,"to":555}}}}],["159",{"pageContent":"Actions That Don't Require Models\n\nRemember, some actions may correspond to policy methods like `create` that do not require a model instance. In these situations, you may pass a class name to the `can` method. The class name will be used to determine which policy to use when authorizing the action:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Post;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PostController extends Controller\n    {\n        /**\n         * Create a post.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            if ($request->user()->cannot('create', Post::class)) {\n                abort(403);\n            }\n\n            // Create the post...\n\n            return redirect('/posts');\n        }\n    }\n\n<a name=\"via-controller-helpers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":556,"to":586}}}}],["160",{"pageContent":"Via Controller Helpers\n\nIn addition to helpful methods provided to the `App\\Models\\User` model, Laravel provides a helpful `authorize` method to any of your controllers which extend the `App\\Http\\Controllers\\Controller` base class.\n\nLike the `can` method, this method accepts the name of the action you wish to authorize and the relevant model. If the action is not authorized, the `authorize` method will throw an `Illuminate\\Auth\\Access\\AuthorizationException` exception which the Laravel exception handler will automatically convert to an HTTP response with a 403 status code:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Post;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":587,"to":600}}}}],["161",{"pageContent":"<?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Post;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PostController extends Controller\n    {\n        /**\n         * Update the given blog post.\n         *\n         * @throws \\Illuminate\\Auth\\Access\\AuthorizationException\n         */\n        public function update(Request $request, Post $post): RedirectResponse\n        {\n            $this->authorize('update', $post);\n\n            // The current user can update the blog post...\n\n            return redirect('/posts');\n        }\n    }\n\n<a name=\"controller-actions-that-dont-require-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":600,"to":626}}}}],["162",{"pageContent":"Actions That Don't Require Models\n\nAs previously discussed, some policy methods like `create` do not require a model instance. In these situations, you should pass a class name to the `authorize` method. The class name will be used to determine which policy to use when authorizing the action:\n\n    use App\\Models\\Post;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    /**\n     * Create a new blog post.\n     *\n     * @throws \\Illuminate\\Auth\\Access\\AuthorizationException\n     */\n    public function create(Request $request): RedirectResponse\n    {\n        $this->authorize('create', Post::class);\n\n        // The current user can create blog posts...\n\n        return redirect('/posts');\n    }\n\n<a name=\"authorizing-resource-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":627,"to":649}}}}],["163",{"pageContent":"Authorizing Resource Controllers\n\nIf you are utilizing [resource controllers](/docs/{{version}}/controllers#resource-controllers), you may make use of the `authorizeResource` method in your controller's constructor. This method will attach the appropriate `can` middleware definitions to the resource controller's methods.\n\nThe `authorizeResource` method accepts the model's class name as its first argument, and the name of the route / request parameter that will contain the model's ID as its second argument. You should ensure your [resource controller](/docs/{{version}}/controllers#resource-controllers) is created using the `--model` flag so that it has the required method signatures and type hints:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Post;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":650,"to":661}}}}],["164",{"pageContent":"<?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Post;\n\n    class PostController extends Controller\n    {\n        /**\n         * Create the controller instance.\n         */\n        public function __construct()\n        {\n            $this->authorizeResource(Post::class, 'post');\n        }\n    }\n\nThe following controller methods will be mapped to their corresponding policy method. When requests are routed to the given controller method, the corresponding policy method will automatically be invoked before the controller method is executed:\n\n<div class=\"overflow-auto\">\n\n| Controller Method | Policy Method |\n| --- | --- |\n| index | viewAny |\n| show | view |\n| create | create |\n| store | create |\n| edit | update |\n| update | update |\n| destroy | delete |\n\n</div>\n\n> **Note**  \n> You may use the `make:policy` command with the `--model` option to quickly generate a policy class for a given model: `php artisan make:policy PostPolicy --model=Post`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":661,"to":696}}}}],["165",{"pageContent":"</div>\n\n> **Note**  \n> You may use the `make:policy` command with the `--model` option to quickly generate a policy class for a given model: `php artisan make:policy PostPolicy --model=Post`.\n\n<a name=\"via-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":696,"to":701}}}}],["166",{"pageContent":"Via Middleware\n\nLaravel includes a middleware that can authorize actions before the incoming request even reaches your routes or controllers. By default, the `Illuminate\\Auth\\Middleware\\Authorize` middleware is assigned the `can` key in your `App\\Http\\Kernel` class. Let's explore an example of using the `can` middleware to authorize that a user can update a post:\n\n    use App\\Models\\Post;\n\n    Route::put('/post/{post}', function (Post $post) {\n        // The current user may update the post...\n    })->middleware('can:update,post');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":702,"to":710}}}}],["167",{"pageContent":"use App\\Models\\Post;\n\n    Route::put('/post/{post}', function (Post $post) {\n        // The current user may update the post...\n    })->middleware('can:update,post');\n\nIn this example, we're passing the `can` middleware two arguments. The first is the name of the action we wish to authorize and the second is the route parameter we wish to pass to the policy method. In this case, since we are using [implicit model binding](/docs/{{version}}/routing#implicit-binding), an `App\\Models\\Post` model will be passed to the policy method. If the user is not authorized to perform the given action, an HTTP response with a 403 status code will be returned by the middleware.\n\nFor convenience, you may also attach the `can` middleware to your route using the `can` method:\n\n    use App\\Models\\Post;\n\n    Route::put('/post/{post}', function (Post $post) {\n        // The current user may update the post...\n    })->can('update', 'post');\n\n<a name=\"middleware-actions-that-dont-require-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":710,"to":726}}}}],["168",{"pageContent":"Actions That Don't Require Models\n\nAgain, some policy methods like `create` do not require a model instance. In these situations, you may pass a class name to the middleware. The class name will be used to determine which policy to use when authorizing the action:\n\n    Route::post('/post', function () {\n        // The current user may create posts...\n    })->middleware('can:create,App\\Models\\Post');\n\nSpecifying the entire class name within a string middleware definition can become cumbersome. For that reason, you may choose to attach the `can` middleware to your route using the `can` method:\n\n    use App\\Models\\Post;\n\n    Route::post('/post', function () {\n        // The current user may create posts...\n    })->can('create', Post::class);\n\n<a name=\"via-blade-templates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":727,"to":743}}}}],["169",{"pageContent":"Via Blade Templates\n\nWhen writing Blade templates, you may wish to display a portion of the page only if the user is authorized to perform a given action. For example, you may wish to show an update form for a blog post only if the user can actually update the post. In this situation, you may use the `@can` and `@cannot` directives:\n\n```blade\n@can('update', $post)\n    <!-- The current user can update the post... -->\n@elsecan('create', App\\Models\\Post::class)\n    <!-- The current user can create new posts... -->\n@else\n    <!-- ... -->\n@endcan\n\n@cannot('update', $post)\n    <!-- The current user cannot update the post... -->\n@elsecannot('create', App\\Models\\Post::class)\n    <!-- The current user cannot create new posts... -->\n@endcannot","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":744,"to":761}}}}],["170",{"pageContent":"These directives are convenient shortcuts for writing `@if` and `@unless` statements. The `@can` and `@cannot` statements above are equivalent to the following statements:\n\n```blade\n@if (Auth::user()->can('update', $post))\n    <!-- The current user can update the post... -->\n@endif\n\n@unless (Auth::user()->can('update', $post))\n    <!-- The current user cannot update the post... -->\n@endunless\n```\n\nYou may also determine if a user is authorized to perform any action from a given array of actions. To accomplish this, use the `@canany` directive:\n\n```blade\n@canany(['update', 'view', 'delete'], $post)\n    <!-- The current user can update, view, or delete the post... -->\n@elsecanany(['create'], \\App\\Models\\Post::class)\n    <!-- The current user can create a post... -->\n@endcanany\n```\n\n<a name=\"blade-actions-that-dont-require-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":764,"to":786}}}}],["171",{"pageContent":"Actions That Don't Require Models\n\nLike most of the other authorization methods, you may pass a class name to the `@can` and `@cannot` directives if the action does not require a model instance:\n\n```blade\n@can('create', App\\Models\\Post::class)\n    <!-- The current user can create posts... -->\n@endcan\n\n@cannot('create', App\\Models\\Post::class)\n    <!-- The current user can't create posts... -->\n@endcannot\n```\n\n<a name=\"supplying-additional-context\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":787,"to":801}}}}],["172",{"pageContent":"Supplying Additional Context\n\nWhen authorizing actions using policies, you may pass an array as the second argument to the various authorization functions and helpers. The first element in the array will be used to determine which policy should be invoked, while the rest of the array elements are passed as parameters to the policy method and can be used for additional context when making authorization decisions. For example, consider the following `PostPolicy` method definition which contains an additional `$category` parameter:\n\n    /**\n     * Determine if the given post can be updated by the user.\n     */\n    public function update(User $user, Post $post, int $category): bool\n    {\n        return $user->id === $post->user_id &&\n               $user->canUpdateCategory($category);\n    }\n\nWhen attempting to determine if the authenticated user can update a given post, we can invoke this policy method like so:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":802,"to":815}}}}],["173",{"pageContent":"When attempting to determine if the authenticated user can update a given post, we can invoke this policy method like so:\n\n    /**\n     * Update the given blog post.\n     *\n     * @throws \\Illuminate\\Auth\\Access\\AuthorizationException\n     */\n    public function update(Request $request, Post $post): RedirectResponse\n    {\n        $this->authorize('update', [$post, $request->category]);\n\n        // The current user can update the blog post...\n\n        return redirect('/posts');\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/authorization.md","loc":{"lines":{"from":815,"to":829}}}}],["174",{"pageContent":"# Laravel Cashier (Stripe)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1,"to":1}}}}],["175",{"pageContent":"- [Introduction](#introduction)\n- [Upgrading Cashier](#upgrading-cashier)\n- [Installation](#installation)\n    - [Database Migrations](#database-migrations)\n- [Configuration](#configuration)\n    - [Billable Model](#billable-model)\n    - [API Keys](#api-keys)\n    - [Currency Configuration](#currency-configuration)\n    - [Tax Configuration](#tax-configuration)\n    - [Logging](#logging)\n    - [Using Custom Models](#using-custom-models)\n- [Customers](#customers)\n    - [Retrieving Customers](#retrieving-customers)\n    - [Creating Customers](#creating-customers)\n    - [Updating Customers](#updating-customers)\n    - [Balances](#balances)\n    - [Tax IDs](#tax-ids)\n    - [Syncing Customer Data With Stripe](#syncing-customer-data-with-stripe)\n    - [Billing Portal](#billing-portal)\n- [Payment Methods](#payment-methods)\n    - [Storing Payment Methods](#storing-payment-methods)\n    - [Retrieving Payment Methods](#retrieving-payment-methods)\n    - [Determining If A User Has A Payment Method](#check-for-a-payment-method)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":3,"to":25}}}}],["176",{"pageContent":"- [Storing Payment Methods](#storing-payment-methods)\n    - [Retrieving Payment Methods](#retrieving-payment-methods)\n    - [Determining If A User Has A Payment Method](#check-for-a-payment-method)\n    - [Updating The Default Payment Method](#updating-the-default-payment-method)\n    - [Adding Payment Methods](#adding-payment-methods)\n    - [Deleting Payment Methods](#deleting-payment-methods)\n- [Subscriptions](#subscriptions)\n    - [Creating Subscriptions](#creating-subscriptions)\n    - [Checking Subscription Status](#checking-subscription-status)\n    - [Changing Prices](#changing-prices)\n    - [Subscription Quantity](#subscription-quantity)\n    - [Subscriptions With Multiple Products](#subscriptions-with-multiple-products)\n    - [Multiple Subscriptions](#multiple-subscriptions)\n    - [Metered Billing](#metered-billing)\n    - [Subscription Taxes](#subscription-taxes)\n    - [Subscription Anchor Date](#subscription-anchor-date)\n    - [Canceling Subscriptions](#cancelling-subscriptions)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":25,"to":41}}}}],["177",{"pageContent":"- [Subscription Taxes](#subscription-taxes)\n    - [Subscription Anchor Date](#subscription-anchor-date)\n    - [Canceling Subscriptions](#cancelling-subscriptions)\n    - [Resuming Subscriptions](#resuming-subscriptions)\n- [Subscription Trials](#subscription-trials)\n    - [With Payment Method Up Front](#with-payment-method-up-front)\n    - [Without Payment Method Up Front](#without-payment-method-up-front)\n    - [Extending Trials](#extending-trials)\n- [Handling Stripe Webhooks](#handling-stripe-webhooks)\n    - [Defining Webhook Event Handlers](#defining-webhook-event-handlers)\n    - [Verifying Webhook Signatures](#verifying-webhook-signatures)\n- [Single Charges](#single-charges)\n    - [Simple Charge](#simple-charge)\n    - [Charge With Invoice](#charge-with-invoice)\n    - [Creating Payment Intents](#creating-payment-intents)\n    - [Refunding Charges](#refunding-charges)\n- [Checkout](#checkout)\n    - [Product Checkouts](#product-checkouts)\n    - [Single Charge Checkouts](#single-charge-checkouts)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":41,"to":59}}}}],["178",{"pageContent":"- [Refunding Charges](#refunding-charges)\n- [Checkout](#checkout)\n    - [Product Checkouts](#product-checkouts)\n    - [Single Charge Checkouts](#single-charge-checkouts)\n    - [Subscription Checkouts](#subscription-checkouts)\n    - [Collecting Tax IDs](#collecting-tax-ids)\n    - [Guest Checkouts](#guest-checkouts)\n- [Invoices](#invoices)\n    - [Retrieving Invoices](#retrieving-invoices)\n    - [Upcoming Invoices](#upcoming-invoices)\n    - [Previewing Subscription Invoices](#previewing-subscription-invoices)\n    - [Generating Invoice PDFs](#generating-invoice-pdfs)\n- [Handling Failed Payments](#handling-failed-payments)\n    - [Confirming Payments](#confirming-payments)\n- [Strong Customer Authentication (SCA)](#strong-customer-authentication)\n    - [Payments Requiring Additional Confirmation](#payments-requiring-additional-confirmation)\n    - [Off-session Payment Notifications](#off-session-payment-notifications)\n- [Stripe SDK](#stripe-sdk)\n- [Testing](#testing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":59,"to":77}}}}],["179",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":79,"to":79}}}}],["180",{"pageContent":"Introduction\n\n[Laravel Cashier Stripe](https://github.com/laravel/cashier-stripe) provides an expressive, fluent interface to [Stripe's](https://stripe.com) subscription billing services. It handles almost all of the boilerplate subscription billing code you are dreading writing. In addition to basic subscription management, Cashier can handle coupons, swapping subscription, subscription \"quantities\", cancellation grace periods, and even generate invoice PDFs.\n\n<a name=\"upgrading-cashier\"></a>\n## Upgrading Cashier\n\nWhen upgrading to a new version of Cashier, it's important that you carefully review [the upgrade guide](https://github.com/laravel/cashier-stripe/blob/master/UPGRADE.md).\n\n> **Warning**  \n> To prevent breaking changes, Cashier uses a fixed Stripe API version. Cashier 14 utilizes Stripe API version `2022-11-15`. The Stripe API version will be updated on minor releases in order to make use of new Stripe features and improvements.\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":80,"to":92}}}}],["181",{"pageContent":"Installation\n\nFirst, install the Cashier package for Stripe using the Composer package manager:\n\n```shell\ncomposer require laravel/cashier\n```\n\n> **Warning**  \n> To ensure Cashier properly handles all Stripe events, remember to [set up Cashier's webhook handling](#handling-stripe-webhooks).\n\n<a name=\"database-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":93,"to":104}}}}],["182",{"pageContent":"Database Migrations\n\nCashier's service provider registers its own database migration directory, so remember to migrate your database after installing the package. The Cashier migrations will add several columns to your `users` table. It will also create a new `subscriptions` table to hold all of your customer's subscriptions and a `subscription_items` table for subscriptions with multiple prices:\n\n```shell\nphp artisan migrate\n```\n\nIf you need to overwrite the migrations that ship with Cashier, you can publish them using the `vendor:publish` Artisan command:\n\n```shell\nphp artisan vendor:publish --tag=\"cashier-migrations\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":105,"to":116}}}}],["183",{"pageContent":"If you would like to prevent Cashier's migrations from running entirely, you may use the `ignoreMigrations` method provided by Cashier. Typically, this method should be called in the `register` method of your `AppServiceProvider`:\n\n    use Laravel\\Cashier\\Cashier;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        Cashier::ignoreMigrations();\n    }\n\n> **Warning**  \n> Stripe recommends that any column used for storing Stripe identifiers should be case-sensitive. Therefore, you should ensure the column collation for the `stripe_id` column is set to `utf8_bin` when using MySQL. More information regarding this can be found in the [Stripe documentation](https://stripe.com/docs/upgrades#what-changes-does-stripe-consider-to-be-backwards-compatible).\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":119,"to":134}}}}],["184",{"pageContent":"Configuration\n\n<a name=\"billable-model\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":135,"to":137}}}}],["185",{"pageContent":"Billable Model\n\nBefore using Cashier, add the `Billable` trait to your billable model definition. Typically, this will be the `App\\Models\\User` model. This trait provides various methods to allow you to perform common billing tasks, such as creating subscriptions, applying coupons, and updating payment method information:\n\n    use Laravel\\Cashier\\Billable;\n\n    class User extends Authenticatable\n    {\n        use Billable;\n    }\n\nCashier assumes your billable model will be the `App\\Models\\User` class that ships with Laravel. If you wish to change this you may specify a different model via the `useCustomerModel` method. This method should typically be called in the `boot` method of your `AppServiceProvider` class:\n\n    use App\\Models\\Cashier\\User;\n    use Laravel\\Cashier\\Cashier;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Cashier::useCustomerModel(User::class);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":138,"to":160}}}}],["186",{"pageContent":"/**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Cashier::useCustomerModel(User::class);\n    }\n\n> **Warning**  \n> If you're using a model other than Laravel's supplied `App\\Models\\User` model, you'll need to publish and alter the [Cashier migrations](#installation) provided to match your alternative model's table name.\n\n<a name=\"api-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":160,"to":171}}}}],["187",{"pageContent":"API Keys\n\nNext, you should configure your Stripe API keys in your application's `.env` file. You can retrieve your Stripe API keys from the Stripe control panel:\n\n```ini\nSTRIPE_KEY=your-stripe-key\nSTRIPE_SECRET=your-stripe-secret\nSTRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret\n```\n\n> **Warning**  \n> You should ensure that the `STRIPE_WEBHOOK_SECRET` environment variable is defined in your application's `.env` file, as this variable is used to ensure that incoming webhooks are actually from Stripe.\n\n<a name=\"currency-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":172,"to":185}}}}],["188",{"pageContent":"Currency Configuration\n\nThe default Cashier currency is United States Dollars (USD). You can change the default currency by setting the `CASHIER_CURRENCY` environment variable within your application's `.env` file:\n\n```ini\nCASHIER_CURRENCY=eur\n```\n\nIn addition to configuring Cashier's currency, you may also specify a locale to be used when formatting money values for display on invoices. Internally, Cashier utilizes [PHP's `NumberFormatter` class](https://www.php.net/manual/en/class.numberformatter.php) to set the currency locale:\n\n```ini\nCASHIER_CURRENCY_LOCALE=nl_BE\n```\n\n> **Warning**  \n> In order to use locales other than `en`, ensure the `ext-intl` PHP extension is installed and configured on your server.\n\n<a name=\"tax-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":186,"to":203}}}}],["189",{"pageContent":"Tax Configuration\n\nThanks to [Stripe Tax](https://stripe.com/tax), it's possible to automatically calculate taxes for all invoices generated by Stripe. You can enable automatic tax calculation by invoking the `calculateTaxes` method in the `boot` method of your application's `App\\Providers\\AppServiceProvider` class:\n\n    use Laravel\\Cashier\\Cashier;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Cashier::calculateTaxes();\n    }\n\nOnce tax calculation has been enabled, any new subscriptions and any one-off invoices that are generated will receive automatic tax calculation.\n\nFor this feature to work properly, your customer's billing details, such as the customer's name, address, and tax ID, need to be synced to Stripe. You may use the [customer data synchronization](#syncing-customer-data-with-stripe) and [Tax ID](#tax-ids) methods offered by Cashier to accomplish this.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":204,"to":220}}}}],["190",{"pageContent":"> **Warning**  \n> No tax is calculated for [single charges](#single-charges) or [single charge checkouts](#single-charge-checkouts).\n\n<a name=\"logging\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":222,"to":225}}}}],["191",{"pageContent":"Logging\n\nCashier allows you to specify the log channel to be used when logging fatal Stripe errors. You may specify the log channel by defining the `CASHIER_LOGGER` environment variable within your application's `.env` file:\n\n```ini\nCASHIER_LOGGER=stack\n```\n\nExceptions that are generated by API calls to Stripe will be logged through your application's default log channel.\n\n<a name=\"using-custom-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":226,"to":236}}}}],["192",{"pageContent":"Using Custom Models\n\nYou are free to extend the models used internally by Cashier by defining your own model and extending the corresponding Cashier model:\n\n    use Laravel\\Cashier\\Subscription as CashierSubscription;\n\n    class Subscription extends CashierSubscription\n    {\n        // ...\n    }\n\nAfter defining your model, you may instruct Cashier to use your custom model via the `Laravel\\Cashier\\Cashier` class. Typically, you should inform Cashier about your custom models in the `boot` method of your application's `App\\Providers\\AppServiceProvider` class:\n\n    use App\\Models\\Cashier\\Subscription;\n    use App\\Models\\Cashier\\SubscriptionItem;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Cashier::useSubscriptionModel(Subscription::class);\n        Cashier::useSubscriptionItemModel(SubscriptionItem::class);\n    }\n\n<a name=\"customers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":237,"to":262}}}}],["193",{"pageContent":"Customers\n\n<a name=\"retrieving-customers\"></a>\n### Retrieving Customers\n\nYou can retrieve a customer by their Stripe ID using the `Cashier::findBillable` method. This method will return an instance of the billable model:\n\n    use Laravel\\Cashier\\Cashier;\n\n    $user = Cashier::findBillable($stripeId);\n\n<a name=\"creating-customers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":263,"to":274}}}}],["194",{"pageContent":"Creating Customers\n\nOccasionally, you may wish to create a Stripe customer without beginning a subscription. You may accomplish this using the `createAsStripeCustomer` method:\n\n    $stripeCustomer = $user->createAsStripeCustomer();\n\nOnce the customer has been created in Stripe, you may begin a subscription at a later date. You may provide an optional `$options` array to pass in any additional [customer creation parameters that are supported by the Stripe API](https://stripe.com/docs/api/customers/create):\n\n    $stripeCustomer = $user->createAsStripeCustomer($options);\n\nYou may use the `asStripeCustomer` method if you want to return the Stripe customer object for a billable model:\n\n    $stripeCustomer = $user->asStripeCustomer();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":275,"to":287}}}}],["195",{"pageContent":"You may use the `asStripeCustomer` method if you want to return the Stripe customer object for a billable model:\n\n    $stripeCustomer = $user->asStripeCustomer();\n\nThe `createOrGetStripeCustomer` method may be used if you would like to retrieve the Stripe customer object for a given billable model but are not sure whether the billable model is already a customer within Stripe. This method will create a new customer in Stripe if one does not already exist:\n\n    $stripeCustomer = $user->createOrGetStripeCustomer();\n\n<a name=\"updating-customers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":287,"to":295}}}}],["196",{"pageContent":"Updating Customers\n\nOccasionally, you may wish to update the Stripe customer directly with additional information. You may accomplish this using the `updateStripeCustomer` method. This method accepts an array of [customer update options supported by the Stripe API](https://stripe.com/docs/api/customers/update):\n\n    $stripeCustomer = $user->updateStripeCustomer($options);\n\n<a name=\"balances\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":296,"to":302}}}}],["197",{"pageContent":"Balances\n\nStripe allows you to credit or debit a customer's \"balance\". Later, this balance will be credited or debited on new invoices. To check the customer's total balance you may use the `balance` method that is available on your billable model. The `balance` method will return a formatted string representation of the balance in the customer's currency:\n\n    $balance = $user->balance();\n\nTo credit a customer's balance, you may provide a value to the `creditBalance` method. If you wish, you may also provide a description:\n\n    $user->creditBalance(500, 'Premium customer top-up.');\n\nProviding a value to the `debitBalance` method will debit the customer's balance:\n\n    $user->debitBalance(300, 'Bad usage penalty.');\n\nThe `applyBalance` method will create new customer balance transactions for the customer. You may retrieve these transaction records using the `balanceTransactions` method, which may be useful in order to provide a log of credits and debits for the customer to review:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":303,"to":317}}}}],["198",{"pageContent":"// Retrieve all transactions...\n    $transactions = $user->balanceTransactions();\n\n    foreach ($transactions as $transaction) {\n        // Transaction amount...\n        $amount = $transaction->amount(); // $2.31\n\n        // Retrieve the related invoice when available...\n        $invoice = $transaction->invoice();\n    }\n\n<a name=\"tax-ids\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":319,"to":330}}}}],["199",{"pageContent":"Tax IDs\n\nCashier offers an easy way to manage a customer's tax IDs. For example, the `taxIds` method may be used to retrieve all of the [tax IDs](https://stripe.com/docs/api/customer_tax_ids/object) that are assigned to a customer as a collection:\n\n    $taxIds = $user->taxIds();\n\nYou can also retrieve a specific tax ID for a customer by its identifier:\n\n    $taxId = $user->findTaxId('txi_belgium');\n\nYou may create a new Tax ID by providing a valid [type](https://stripe.com/docs/api/customer_tax_ids/object#tax_id_object-type) and value to the `createTaxId` method:\n\n    $taxId = $user->createTaxId('eu_vat', 'BE0123456789');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":331,"to":343}}}}],["200",{"pageContent":"$taxId = $user->createTaxId('eu_vat', 'BE0123456789');\n\nThe `createTaxId` method will immediately add the VAT ID to the customer's account. [Verification of VAT IDs is also done by Stripe](https://stripe.com/docs/invoicing/customer/tax-ids#validation); however, this is an asynchronous process. You can be notified of verification updates by subscribing to the `customer.tax_id.updated` webhook event and inspecting [the VAT IDs `verification` parameter](https://stripe.com/docs/api/customer_tax_ids/object#tax_id_object-verification). For more information on handling webhooks, please consult the [documentation on defining webhook handlers](#handling-stripe-webhooks).\n\nYou may delete a tax ID using the `deleteTaxId` method:\n\n    $user->deleteTaxId('txi_belgium');\n\n<a name=\"syncing-customer-data-with-stripe\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":343,"to":351}}}}],["201",{"pageContent":"Syncing Customer Data With Stripe\n\nTypically, when your application's users update their name, email address, or other information that is also stored by Stripe, you should inform Stripe of the updates. By doing so, Stripe's copy of the information will be in sync with your application's.\n\nTo automate this, you may define an event listener on your billable model that reacts to the model's `updated` event. Then, within your event listener, you may invoke the `syncStripeCustomerDetails` method on the model:\n\n    use App\\Models\\User;\n    use function Illuminate\\Events\\queueable;\n\n    /**\n     * The \"booted\" method of the model.\n     */\n    protected static function booted(): void\n    {\n        static::updated(queueable(function (User $customer) {\n            if ($customer->hasStripeId()) {\n                $customer->syncStripeCustomerDetails();\n            }\n        }));\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":352,"to":371}}}}],["202",{"pageContent":"Now, every time your customer model is updated, its information will be synced with Stripe. For convenience, Cashier will automatically sync your customer's information with Stripe on the initial creation of the customer.\n\nYou may customize the columns used for syncing customer information to Stripe by overriding a variety of methods provided by Cashier. For example, you may override the `stripeName` method to customize the attribute that should be considered the customer's \"name\" when Cashier syncs customer information to Stripe:\n\n    /**\n     * Get the customer name that should be synced to Stripe.\n     */\n    public function stripeName(): string|null\n    {\n        return $this->company_name;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":373,"to":383}}}}],["203",{"pageContent":"/**\n     * Get the customer name that should be synced to Stripe.\n     */\n    public function stripeName(): string|null\n    {\n        return $this->company_name;\n    }\n\nSimilarly, you may override the `stripeEmail`, `stripePhone`, `stripeAddress`, and `stripePreferredLocales` methods. These methods will sync information to their corresponding customer parameters when [updating the Stripe customer object](https://stripe.com/docs/api/customers/update). If you wish to take total control over the customer information sync process, you may override the `syncStripeCustomerDetails` method.\n\n<a name=\"billing-portal\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":383,"to":393}}}}],["204",{"pageContent":"Billing Portal\n\nStripe offers [an easy way to set up a billing portal](https://stripe.com/docs/billing/subscriptions/customer-portal) so that your customer can manage their subscription, payment methods, and view their billing history. You can redirect your users to the billing portal by invoking the `redirectToBillingPortal` method on the billable model from a controller or route:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/billing-portal', function (Request $request) {\n        return $request->user()->redirectToBillingPortal();\n    });\n\nBy default, when the user is finished managing their subscription, they will be able to return to the `home` route of your application via a link within the Stripe billing portal. You may provide a custom URL that the user should return to by passing the URL as an argument to the `redirectToBillingPortal` method:\n\n    use Illuminate\\Http\\Request;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":394,"to":406}}}}],["205",{"pageContent":"use Illuminate\\Http\\Request;\n\n    Route::get('/billing-portal', function (Request $request) {\n        return $request->user()->redirectToBillingPortal(route('billing'));\n    });\n\nIf you would like to generate the URL to the billing portal without generating an HTTP redirect response, you may invoke the `billingPortalUrl` method:\n\n    $url = $request->user()->billingPortalUrl(route('billing'));\n\n<a name=\"payment-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":406,"to":416}}}}],["206",{"pageContent":"Payment Methods\n\n<a name=\"storing-payment-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":417,"to":419}}}}],["207",{"pageContent":"Storing Payment Methods\n\nIn order to create subscriptions or perform \"one-off\" charges with Stripe, you will need to store a payment method and retrieve its identifier from Stripe. The approach used to accomplish this differs based on whether you plan to use the payment method for subscriptions or single charges, so we will examine both below.\n\n<a name=\"payment-methods-for-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":420,"to":424}}}}],["208",{"pageContent":"Payment Methods For Subscriptions\n\nWhen storing a customer's credit card information for future use by a subscription, the Stripe \"Setup Intents\" API must be used to securely gather the customer's payment method details. A \"Setup Intent\" indicates to Stripe the intention to charge a customer's payment method. Cashier's `Billable` trait includes the `createSetupIntent` method to easily create a new Setup Intent. You should invoke this method from the route or controller that will render the form which gathers your customer's payment method details:\n\n    return view('update-payment-method', [\n        'intent' => $user->createSetupIntent()\n    ]);\n\nAfter you have created the Setup Intent and passed it to the view, you should attach its secret to the element that will gather the payment method. For example, consider this \"update payment method\" form:\n\n```html\n<input id=\"card-holder-name\" type=\"text\">\n\n<!-- Stripe Elements Placeholder -->\n<div id=\"card-element\"></div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":425,"to":439}}}}],["209",{"pageContent":"```html\n<input id=\"card-holder-name\" type=\"text\">\n\n<!-- Stripe Elements Placeholder -->\n<div id=\"card-element\"></div>\n\n<button id=\"card-button\" data-secret=\"{{ $intent->client_secret }}\">\n    Update Payment Method\n</button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":439,"to":447}}}}],["210",{"pageContent":"Next, the Stripe.js library may be used to attach a [Stripe Element](https://stripe.com/docs/stripe-js) to the form and securely gather the customer's payment details:\n\n```html\n<script src=\"https://js.stripe.com/v3/\"></script>\n\n<script>\n    const stripe = Stripe('stripe-public-key');\n\n    const elements = stripe.elements();\n    const cardElement = elements.create('card');\n\n    cardElement.mount('#card-element');\n</script>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":450,"to":462}}}}],["211",{"pageContent":"Next, the card can be verified and a secure \"payment method identifier\" can be retrieved from Stripe using [Stripe's `confirmCardSetup` method](https://stripe.com/docs/js/setup_intents/confirm_card_setup):\n\n```js\nconst cardHolderName = document.getElementById('card-holder-name');\nconst cardButton = document.getElementById('card-button');\nconst clientSecret = cardButton.dataset.secret;\n\ncardButton.addEventListener('click', async (e) => {\n    const { setupIntent, error } = await stripe.confirmCardSetup(\n        clientSecret, {\n            payment_method: {\n                card: cardElement,\n                billing_details: { name: cardHolderName.value }\n            }\n        }\n    );\n\n    if (error) {\n        // Display \"error.message\" to the user...\n    } else {\n        // The card has been verified successfully...\n    }\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":465,"to":487}}}}],["212",{"pageContent":"After the card has been verified by Stripe, you may pass the resulting `setupIntent.payment_method` identifier to your Laravel application, where it can be attached to the customer. The payment method can either be [added as a new payment method](#adding-payment-methods) or [used to update the default payment method](#updating-the-default-payment-method). You can also immediately use the payment method identifier to [create a new subscription](#creating-subscriptions).\n\n> **Note**  \n> If you would like more information about Setup Intents and gathering customer payment details please [review this overview provided by Stripe](https://stripe.com/docs/payments/save-and-reuse#php).\n\n<a name=\"payment-methods-for-single-charges\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":490,"to":495}}}}],["213",{"pageContent":"Payment Methods For Single Charges\n\nOf course, when making a single charge against a customer's payment method, we will only need to use a payment method identifier once. Due to Stripe limitations, you may not use the stored default payment method of a customer for single charges. You must allow the customer to enter their payment method details using the Stripe.js library. For example, consider the following form:\n\n```html\n<input id=\"card-holder-name\" type=\"text\">\n\n<!-- Stripe Elements Placeholder -->\n<div id=\"card-element\"></div>\n\n<button id=\"card-button\">\n    Process Payment\n</button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":496,"to":508}}}}],["214",{"pageContent":"After defining such a form, the Stripe.js library may be used to attach a [Stripe Element](https://stripe.com/docs/stripe-js) to the form and securely gather the customer's payment details:\n\n```html\n<script src=\"https://js.stripe.com/v3/\"></script>\n\n<script>\n    const stripe = Stripe('stripe-public-key');\n\n    const elements = stripe.elements();\n    const cardElement = elements.create('card');\n\n    cardElement.mount('#card-element');\n</script>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":511,"to":523}}}}],["215",{"pageContent":"Next, the card can be verified and a secure \"payment method identifier\" can be retrieved from Stripe using [Stripe's `createPaymentMethod` method](https://stripe.com/docs/stripe-js/reference#stripe-create-payment-method):\n\n```js\nconst cardHolderName = document.getElementById('card-holder-name');\nconst cardButton = document.getElementById('card-button');\n\ncardButton.addEventListener('click', async (e) => {\n    const { paymentMethod, error } = await stripe.createPaymentMethod(\n        'card', cardElement, {\n            billing_details: { name: cardHolderName.value }\n        }\n    );\n\n    if (error) {\n        // Display \"error.message\" to the user...\n    } else {\n        // The card has been verified successfully...\n    }\n});\n```\n\nIf the card is verified successfully, you may pass the `paymentMethod.id` to your Laravel application and process a [single charge](#simple-charge).\n\n<a name=\"retrieving-payment-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":526,"to":549}}}}],["216",{"pageContent":"Retrieving Payment Methods\n\nThe `paymentMethods` method on the billable model instance returns a collection of `Laravel\\Cashier\\PaymentMethod` instances:\n\n    $paymentMethods = $user->paymentMethods();\n\nBy default, this method will return payment methods of the `card` type. To retrieve payment methods of a different type, you may pass the `type` as an argument to the method:\n\n    $paymentMethods = $user->paymentMethods('sepa_debit');\n\nTo retrieve the customer's default payment method, the `defaultPaymentMethod` method may be used:\n\n    $paymentMethod = $user->defaultPaymentMethod();\n\nYou can retrieve a specific payment method that is attached to the billable model using the `findPaymentMethod` method:\n\n    $paymentMethod = $user->findPaymentMethod($paymentMethodId);\n\n<a name=\"check-for-a-payment-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":550,"to":568}}}}],["217",{"pageContent":"Determining If A User Has A Payment Method\n\nTo determine if a billable model has a default payment method attached to their account, invoke the `hasDefaultPaymentMethod` method:\n\n    if ($user->hasDefaultPaymentMethod()) {\n        // ...\n    }\n\nYou may use the `hasPaymentMethod` method to determine if a billable model has at least one payment method attached to their account:\n\n    if ($user->hasPaymentMethod()) {\n        // ...\n    }\n\nThis method will determine if the billable model has payment methods of the `card` type. To determine if a payment method of another type exists for the model, you may pass the `type` as an argument to the method:\n\n    if ($user->hasPaymentMethod('sepa_debit')) {\n        // ...\n    }\n\n<a name=\"updating-the-default-payment-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":569,"to":589}}}}],["218",{"pageContent":"Updating The Default Payment Method\n\nThe `updateDefaultPaymentMethod` method may be used to update a customer's default payment method information. This method accepts a Stripe payment method identifier and will assign the new payment method as the default billing payment method:\n\n    $user->updateDefaultPaymentMethod($paymentMethod);\n\nTo sync your default payment method information with the customer's default payment method information in Stripe, you may use the `updateDefaultPaymentMethodFromStripe` method:\n\n    $user->updateDefaultPaymentMethodFromStripe();\n\n> **Warning**  \n> The default payment method on a customer can only be used for invoicing and creating new subscriptions. Due to limitations imposed by Stripe, it may not be used for single charges.\n\n<a name=\"adding-payment-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":590,"to":603}}}}],["219",{"pageContent":"Adding Payment Methods\n\nTo add a new payment method, you may call the `addPaymentMethod` method on the billable model, passing the payment method identifier:\n\n    $user->addPaymentMethod($paymentMethod);\n\n> **Note**  \n> To learn how to retrieve payment method identifiers please review the [payment method storage documentation](#storing-payment-methods).\n\n<a name=\"deleting-payment-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":604,"to":613}}}}],["220",{"pageContent":"Deleting Payment Methods\n\nTo delete a payment method, you may call the `delete` method on the `Laravel\\Cashier\\PaymentMethod` instance you wish to delete:\n\n    $paymentMethod->delete();\n\nThe `deletePaymentMethod` method will delete a specific payment method from the billable model:\n\n    $user->deletePaymentMethod('pm_visa');\n\nThe `deletePaymentMethods` method will delete all of the payment method information for the billable model:\n\n    $user->deletePaymentMethods();\n\nBy default, this method will delete payment methods of the `card` type. To delete payment methods of a different type you can pass the `type` as an argument to the method:\n\n    $user->deletePaymentMethods('sepa_debit');\n\n> **Warning**  \n> If a user has an active subscription, your application should not allow them to delete their default payment method.\n\n<a name=\"subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":614,"to":635}}}}],["221",{"pageContent":"Subscriptions\n\nSubscriptions provide a way to set up recurring payments for your customers. Stripe subscriptions managed by Cashier provide support for multiple subscription prices, subscription quantities, trials, and more.\n\n<a name=\"creating-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":636,"to":640}}}}],["222",{"pageContent":"Creating Subscriptions\n\nTo create a subscription, first retrieve an instance of your billable model, which typically will be an instance of `App\\Models\\User`. Once you have retrieved the model instance, you may use the `newSubscription` method to create the model's subscription:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/user/subscribe', function (Request $request) {\n        $request->user()->newSubscription(\n            'default', 'price_monthly'\n        )->create($request->paymentMethodId);\n\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":641,"to":653}}}}],["223",{"pageContent":"// ...\n    });\n\nThe first argument passed to the `newSubscription` method should be the internal name of the subscription. If your application only offers a single subscription, you might call this `default` or `primary`. This subscription name is only for internal application usage and is not meant to be shown to users. In addition, it should not contain spaces and it should never be changed after creating the subscription. The second argument is the specific price the user is subscribing to. This value should correspond to the price's identifier in Stripe.\n\nThe `create` method, which accepts [a Stripe payment method identifier](#storing-payment-methods) or Stripe `PaymentMethod` object, will begin the subscription as well as update your database with the billable model's Stripe customer ID and other relevant billing information.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":653,"to":658}}}}],["224",{"pageContent":"> **Warning**  \n> Passing a payment method identifier directly to the `create` subscription method will also automatically add it to the user's stored payment methods.\n\n<a name=\"collecting-recurring-payments-via-invoice-emails\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":660,"to":663}}}}],["225",{"pageContent":"Collecting Recurring Payments Via Invoice Emails\n\nInstead of collecting a customer's recurring payments automatically, you may instruct Stripe to email an invoice to the customer each time their recurring payment is due. Then, the customer may manually pay the invoice once they receive it. The customer does not need to provide a payment method up front when collecting recurring payments via invoices:\n\n    $user->newSubscription('default', 'price_monthly')->createAndSendInvoice();\n\nThe amount of time a customer has to pay their invoice before their subscription is cancelled is determined by the `days_until_due` option. By default, this is 30 days; however, you may provide a specific value for this option if you wish:\n\n    $user->newSubscription('default', 'price_monthly')->createAndSendInvoice([], [\n        'days_until_due' => 30\n    ]);\n\n<a name=\"subscription-quantities\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":664,"to":676}}}}],["226",{"pageContent":"Quantities\n\nIf you would like to set a specific [quantity](https://stripe.com/docs/billing/subscriptions/quantities) for the price when creating the subscription, you should invoke the `quantity` method on the subscription builder before creating the subscription:\n\n    $user->newSubscription('default', 'price_monthly')\n         ->quantity(5)\n         ->create($paymentMethod);\n\n<a name=\"additional-details\"></a>\n#### Additional Details\n\nIf you would like to specify additional [customer](https://stripe.com/docs/api/customers/create) or [subscription](https://stripe.com/docs/api/subscriptions/create) options supported by Stripe, you may do so by passing them as the second and third arguments to the `create` method:\n\n    $user->newSubscription('default', 'price_monthly')->create($paymentMethod, [\n        'email' => $email,\n    ], [\n        'metadata' => ['note' => 'Some extra information.'],\n    ]);\n\n<a name=\"coupons\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":677,"to":696}}}}],["227",{"pageContent":"Coupons\n\nIf you would like to apply a coupon when creating the subscription, you may use the `withCoupon` method:\n\n    $user->newSubscription('default', 'price_monthly')\n         ->withCoupon('code')\n         ->create($paymentMethod);\n\nOr, if you would like to apply a [Stripe promotion code](https://stripe.com/docs/billing/subscriptions/discounts/codes), you may use the `withPromotionCode` method:\n\n    $user->newSubscription('default', 'price_monthly')\n         ->withPromotionCode('promo_code_id')\n         ->create($paymentMethod);\n\nThe given promotion code ID should be the Stripe API ID assigned to the promotion code and not the customer facing promotion code. If you need to find a promotion code ID based on a given customer facing promotion code, you may use the `findPromotionCode` method:\n\n    // Find a promotion code ID by its customer facing code...\n    $promotionCode = $user->findPromotionCode('SUMMERSALE');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":697,"to":714}}}}],["228",{"pageContent":"// Find a promotion code ID by its customer facing code...\n    $promotionCode = $user->findPromotionCode('SUMMERSALE');\n\n    // Find an active promotion code ID by its customer facing code...\n    $promotionCode = $user->findActivePromotionCode('SUMMERSALE');\n\nIn the example above, the returned `$promotionCode` object is an instance of `Laravel\\Cashier\\PromotionCode`. This class decorates an underlying `Stripe\\PromotionCode` object. You can retrieve the coupon related to the promotion code by invoking the `coupon` method:\n\n    $coupon = $user->findPromotionCode('SUMMERSALE')->coupon();\n\nThe coupon instance allows you to determine the discount amount and whether the coupon represents a fixed discount or percentage based discount:\n\n    if ($coupon->isPercentage()) {\n        return $coupon->percentOff().'%'; // 21.5%\n    } else {\n        return $coupon->amountOff(); // $5.99\n    }\n\nYou can also retrieve the discounts that are currently applied to a customer or subscription:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":714,"to":732}}}}],["229",{"pageContent":"You can also retrieve the discounts that are currently applied to a customer or subscription:\n\n    $discount = $billable->discount();\n\n    $discount = $subscription->discount();\n\nThe returned `Laravel\\Cashier\\Discount` instances decorate an underlying `Stripe\\Discount` object instance. You may retrieve the coupon related to this discount by invoking the `coupon` method:\n\n    $coupon = $subscription->discount()->coupon();\n\nIf you would like to apply a new coupon or promotion code to a customer or subscription, you may do so via the `applyCoupon` or `applyPromotionCode` methods:\n\n    $billable->applyCoupon('coupon_id');\n    $billable->applyPromotionCode('promotion_code_id');\n\n    $subscription->applyCoupon('coupon_id');\n    $subscription->applyPromotionCode('promotion_code_id');\n\nRemember, you should use the Stripe API ID assigned to the promotion code and not the customer facing promotion code. Only one coupon or promotion code can be applied to a customer or subscription at a given time.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":732,"to":750}}}}],["230",{"pageContent":"For more info on this subject, please consult the Stripe documentation regarding [coupons](https://stripe.com/docs/billing/subscriptions/coupons) and [promotion codes](https://stripe.com/docs/billing/subscriptions/coupons/codes).\n\n<a name=\"adding-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":752,"to":754}}}}],["231",{"pageContent":"Adding Subscriptions\n\nIf you would like to add a subscription to a customer who already has a default payment method you may invoke the `add` method on the subscription builder:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->newSubscription('default', 'price_monthly')->add();\n\n<a name=\"creating-subscriptions-from-the-stripe-dashboard\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":755,"to":765}}}}],["232",{"pageContent":"Creating Subscriptions From The Stripe Dashboard\n\nYou may also create subscriptions from the Stripe dashboard itself. When doing so, Cashier will sync newly added subscriptions and assign them a name of `default`. To customize the subscription name that is assigned to dashboard created subscriptions, [extend the `WebhookController`](#defining-webhook-event-handlers) and overwrite the `newSubscriptionName` method.\n\nIn addition, you may only create one type of subscription via the Stripe dashboard. If your application offers multiple subscriptions that use different names, only one type of subscription may be added through the Stripe dashboard.\n\nFinally, you should always make sure to only add one active subscription per type of subscription offered by your application. If a customer has two `default` subscriptions, only the most recently added subscription will be used by Cashier even though both would be synced with your application's database.\n\n<a name=\"checking-subscription-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":766,"to":774}}}}],["233",{"pageContent":"Checking Subscription Status\n\nOnce a customer is subscribed to your application, you may easily check their subscription status using a variety of convenient methods. First, the `subscribed` method returns `true` if the customer has an active subscription, even if the subscription is currently within its trial period. The `subscribed` method accepts the name of the subscription as its first argument:\n\n    if ($user->subscribed('default')) {\n        // ...\n    }\n\nThe `subscribed` method also makes a great candidate for a [route middleware](/docs/{{version}}/middleware), allowing you to filter access to routes and controllers based on the user's subscription status:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":775,"to":791}}}}],["234",{"pageContent":"<?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class EnsureUserIsSubscribed\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next): Response\n        {\n            if ($request->user() && ! $request->user()->subscribed('default')) {\n                // This user is not a paying customer...\n                return redirect('billing');\n            }\n\n            return $next($request);\n        }\n    }\n\nIf you would like to determine if a user is still within their trial period, you may use the `onTrial` method. This method can be useful for determining if you should display a warning to the user that they are still on their trial period:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":791,"to":817}}}}],["235",{"pageContent":"if ($user->subscription('default')->onTrial()) {\n        // ...\n    }\n\nThe `subscribedToProduct` method may be used to determine if the user is subscribed to a given product based on a given Stripe product's identifier. In Stripe, products are collections of prices. In this example, we will determine if the user's `default` subscription is actively subscribed to the application's \"premium\" product. The given Stripe product identifier should correspond to one of your product's identifiers in the Stripe dashboard:\n\n    if ($user->subscribedToProduct('prod_premium', 'default')) {\n        // ...\n    }\n\nBy passing an array to the `subscribedToProduct` method, you may determine if the user's `default` subscription is actively subscribed to the application's \"basic\" or \"premium\" product:\n\n    if ($user->subscribedToProduct(['prod_basic', 'prod_premium'], 'default')) {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":819,"to":833}}}}],["236",{"pageContent":"if ($user->subscribedToProduct(['prod_basic', 'prod_premium'], 'default')) {\n        // ...\n    }\n\nThe `subscribedToPrice` method may be used to determine if a customer's subscription corresponds to a given price ID:\n\n    if ($user->subscribedToPrice('price_basic_monthly', 'default')) {\n        // ...\n    }\n\nThe `recurring` method may be used to determine if the user is currently subscribed and is no longer within their trial period:\n\n    if ($user->subscription('default')->recurring()) {\n        // ...\n    }\n\n> **Warning**  \n> If a user has two subscriptions with the same name, the most recent subscription will always be returned by the `subscription` method. For example, a user might have two subscription records named `default`; however, one of the subscriptions may be an old, expired subscription, while the other is the current, active subscription. The most recent subscription will always be returned while older subscriptions are kept in the database for historical review.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":833,"to":850}}}}],["237",{"pageContent":"<a name=\"cancelled-subscription-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":852,"to":852}}}}],["238",{"pageContent":"Canceled Subscription Status\n\nTo determine if the user was once an active subscriber but has canceled their subscription, you may use the `canceled` method:\n\n    if ($user->subscription('default')->canceled()) {\n        // ...\n    }\n\nYou may also determine if a user has canceled their subscription but are still on their \"grace period\" until the subscription fully expires. For example, if a user cancels a subscription on March 5th that was originally scheduled to expire on March 10th, the user is on their \"grace period\" until March 10th. Note that the `subscribed` method still returns `true` during this time:\n\n    if ($user->subscription('default')->onGracePeriod()) {\n        // ...\n    }\n\nTo determine if the user has canceled their subscription and is no longer within their \"grace period\", you may use the `ended` method:\n\n    if ($user->subscription('default')->ended()) {\n        // ...\n    }\n\n<a name=\"incomplete-and-past-due-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":853,"to":873}}}}],["239",{"pageContent":"Incomplete and Past Due Status\n\nIf a subscription requires a secondary payment action after creation the subscription will be marked as `incomplete`. Subscription statuses are stored in the `stripe_status` column of Cashier's `subscriptions` database table.\n\nSimilarly, if a secondary payment action is required when swapping prices the subscription will be marked as `past_due`. When your subscription is in either of these states it will not be active until the customer has confirmed their payment. Determining if a subscription has an incomplete payment may be accomplished using the `hasIncompletePayment` method on the billable model or a subscription instance:\n\n    if ($user->hasIncompletePayment('default')) {\n        // ...\n    }\n\n    if ($user->subscription('default')->hasIncompletePayment()) {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":874,"to":886}}}}],["240",{"pageContent":"if ($user->hasIncompletePayment('default')) {\n        // ...\n    }\n\n    if ($user->subscription('default')->hasIncompletePayment()) {\n        // ...\n    }\n\nWhen a subscription has an incomplete payment, you should direct the user to Cashier's payment confirmation page, passing the `latestPayment` identifier. You may use the `latestPayment` method available on subscription instance to retrieve this identifier:\n\n```html\n<a href=\"{{ route('cashier.payment', $subscription->latestPayment()->id) }}\">\n    Please confirm your payment.\n</a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":886,"to":899}}}}],["241",{"pageContent":"If you would like the subscription to still be considered active when it's in a `past_due` or `incomplete` state, you may use the `keepPastDueSubscriptionsActive` and `keepIncompleteSubscriptionsActive` methods provided by Cashier. Typically, these methods should be called in the `register` method of your `App\\Providers\\AppServiceProvider`:\n\n    use Laravel\\Cashier\\Cashier;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        Cashier::keepPastDueSubscriptionsActive();\n        Cashier::keepIncompleteSubscriptionsActive();\n    }\n\n> **Warning**  \n> When a subscription is in an `incomplete` state it cannot be changed until the payment is confirmed. Therefore, the `swap` and `updateQuantity` methods will throw an exception when the subscription is in an `incomplete` state.\n\n<a name=\"subscription-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":902,"to":918}}}}],["242",{"pageContent":"Subscription Scopes\n\nMost subscription states are also available as query scopes so that you may easily query your database for subscriptions that are in a given state:\n\n    // Get all active subscriptions...\n    $subscriptions = Subscription::query()->active()->get();\n\n    // Get all of the canceled subscriptions for a user...\n    $subscriptions = $user->subscriptions()->canceled()->get();\n\nA complete list of available scopes is available below:\n\n    Subscription::query()->active();\n    Subscription::query()->canceled();\n    Subscription::query()->ended();\n    Subscription::query()->incomplete();\n    Subscription::query()->notCanceled();\n    Subscription::query()->notOnGracePeriod();\n    Subscription::query()->notOnTrial();\n    Subscription::query()->onGracePeriod();\n    Subscription::query()->onTrial();\n    Subscription::query()->pastDue();\n    Subscription::query()->recurring();\n\n<a name=\"changing-prices\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":919,"to":943}}}}],["243",{"pageContent":"Changing Prices\n\nAfter a customer is subscribed to your application, they may occasionally want to change to a new subscription price. To swap a customer to a new price, pass the Stripe price's identifier to the `swap` method. When swapping prices, it is assumed that the user would like to re-activate their subscription if it was previously canceled. The given price identifier should correspond to a Stripe price identifier available in the Stripe dashboard:\n\n    use App\\Models\\User;\n\n    $user = App\\Models\\User::find(1);\n\n    $user->subscription('default')->swap('price_yearly');\n\nIf the customer is on trial, the trial period will be maintained. Additionally, if a \"quantity\" exists for the subscription, that quantity will also be maintained.\n\nIf you would like to swap prices and cancel any trial period the customer is currently on, you may invoke the `skipTrial` method:\n\n    $user->subscription('default')\n            ->skipTrial()\n            ->swap('price_yearly');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":944,"to":960}}}}],["244",{"pageContent":"$user->subscription('default')\n            ->skipTrial()\n            ->swap('price_yearly');\n\nIf you would like to swap prices and immediately invoice the customer instead of waiting for their next billing cycle, you may use the `swapAndInvoice` method:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->swapAndInvoice('price_yearly');\n\n<a name=\"prorations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":960,"to":970}}}}],["245",{"pageContent":"Prorations\n\nBy default, Stripe prorates charges when swapping between prices. The `noProrate` method may be used to update the subscription's price without prorating the charges:\n\n    $user->subscription('default')->noProrate()->swap('price_yearly');\n\nFor more information on subscription proration, consult the [Stripe documentation](https://stripe.com/docs/billing/subscriptions/prorations).\n\n> **Warning**  \n> Executing the `noProrate` method before the `swapAndInvoice` method will have no effect on proration. An invoice will always be issued.\n\n<a name=\"subscription-quantity\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":971,"to":982}}}}],["246",{"pageContent":"Subscription Quantity\n\nSometimes subscriptions are affected by \"quantity\". For example, a project management application might charge $10 per month per project. You may use the `incrementQuantity` and `decrementQuantity` methods to easily increment or decrement your subscription quantity:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->subscription('default')->incrementQuantity();\n\n    // Add five to the subscription's current quantity...\n    $user->subscription('default')->incrementQuantity(5);\n\n    $user->subscription('default')->decrementQuantity();\n\n    // Subtract five from the subscription's current quantity...\n    $user->subscription('default')->decrementQuantity(5);\n\nAlternatively, you may set a specific quantity using the `updateQuantity` method:\n\n    $user->subscription('default')->updateQuantity(10);\n\nThe `noProrate` method may be used to update the subscription's quantity without prorating the charges:\n\n    $user->subscription('default')->noProrate()->updateQuantity(10);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":983,"to":1007}}}}],["247",{"pageContent":"The `noProrate` method may be used to update the subscription's quantity without prorating the charges:\n\n    $user->subscription('default')->noProrate()->updateQuantity(10);\n\nFor more information on subscription quantities, consult the [Stripe documentation](https://stripe.com/docs/subscriptions/quantities).\n\n<a name=\"quantities-for-subscription-with-multiple-products\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1007,"to":1013}}}}],["248",{"pageContent":"Quantities For Subscriptions With Multiple Products\n\nIf your subscription is a [subscription with multiple products](#subscriptions-with-multiple-products), you should pass the ID of the price whose quantity you wish to increment or decrement as the second argument to the increment / decrement methods:\n\n    $user->subscription('default')->incrementQuantity(1, 'price_chat');\n\n<a name=\"subscriptions-with-multiple-products\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1014,"to":1020}}}}],["249",{"pageContent":"Subscriptions With Multiple Products\n\n[Subscription with multiple products](https://stripe.com/docs/billing/subscriptions/multiple-products) allow you to assign multiple billing products to a single subscription. For example, imagine you are building a customer service \"helpdesk\" application that has a base subscription price of $10 per month but offers a live chat add-on product for an additional $15 per month. Information for subscriptions with multiple products is stored in Cashier's `subscription_items` database table.\n\nYou may specify multiple products for a given subscription by passing an array of prices as the second argument to the `newSubscription` method:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/user/subscribe', function (Request $request) {\n        $request->user()->newSubscription('default', [\n            'price_monthly',\n            'price_chat',\n        ])->create($request->paymentMethodId);\n\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1021,"to":1036}}}}],["250",{"pageContent":"// ...\n    });\n\nIn the example above, the customer will have two prices attached to their `default` subscription. Both prices will be charged on their respective billing intervals. If necessary, you may use the `quantity` method to indicate a specific quantity for each price:\n\n    $user = User::find(1);\n\n    $user->newSubscription('default', ['price_monthly', 'price_chat'])\n        ->quantity(5, 'price_chat')\n        ->create($paymentMethod);\n\nIf you would like to add another price to an existing subscription, you may invoke the subscription's `addPrice` method:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->addPrice('price_chat');\n\nThe example above will add the new price and the customer will be billed for it on their next billing cycle. If you would like to bill the customer immediately you may use the `addPriceAndInvoice` method:\n\n    $user->subscription('default')->addPriceAndInvoice('price_chat');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1036,"to":1055}}}}],["251",{"pageContent":"$user->subscription('default')->addPriceAndInvoice('price_chat');\n\nIf you would like to add a price with a specific quantity, you can pass the quantity as the second argument of the `addPrice` or `addPriceAndInvoice` methods:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->addPrice('price_chat', 5);\n\nYou may remove prices from subscriptions using the `removePrice` method:\n\n    $user->subscription('default')->removePrice('price_chat');\n\n> **Warning**  \n> You may not remove the last price on a subscription. Instead, you should simply cancel the subscription.\n\n<a name=\"swapping-prices\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1055,"to":1070}}}}],["252",{"pageContent":"Swapping Prices\n\nYou may also change the prices attached to a subscription with multiple products. For example, imagine a customer has a `price_basic` subscription with a `price_chat` add-on product and you want to upgrade the customer from the `price_basic` to the `price_pro` price:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->subscription('default')->swap(['price_pro', 'price_chat']);\n\nWhen executing the example above, the underlying subscription item with the `price_basic` is deleted and the one with the `price_chat` is preserved. Additionally, a new subscription item for the `price_pro` is created.\n\nYou can also specify subscription item options by passing an array of key / value pairs to the `swap` method. For example, you may need to specify the subscription price quantities:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->swap([\n        'price_pro' => ['quantity' => 5],\n        'price_chat'\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1071,"to":1090}}}}],["253",{"pageContent":"$user = User::find(1);\n\n    $user->subscription('default')->swap([\n        'price_pro' => ['quantity' => 5],\n        'price_chat'\n    ]);\n\nIf you want to swap a single price on a subscription, you may do so using the `swap` method on the subscription item itself. This approach is particularly useful if you would like to preserve all of the existing metadata on the subscription's other prices:\n\n    $user = User::find(1);\n\n    $user->subscription('default')\n            ->findItemOrFail('price_basic')\n            ->swap('price_pro');\n\n<a name=\"proration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1090,"to":1105}}}}],["254",{"pageContent":"Proration\n\nBy default, Stripe will prorate charges when adding or removing prices from a subscription with multiple products. If you would like to make a price adjustment without proration, you should chain the `noProrate` method onto your price operation:\n\n    $user->subscription('default')->noProrate()->removePrice('price_chat');\n\n<a name=\"swapping-quantities\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1106,"to":1112}}}}],["255",{"pageContent":"Quantities\n\nIf you would like to update quantities on individual subscription prices, you may do so using the [existing quantity methods](#subscription-quantity) by passing the name of the price as an additional argument to the method:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->incrementQuantity(5, 'price_chat');\n\n    $user->subscription('default')->decrementQuantity(3, 'price_chat');\n\n    $user->subscription('default')->updateQuantity(10, 'price_chat');\n\n> **Warning**  \n> When a subscription has multiple prices the `stripe_price` and `quantity` attributes on the `Subscription` model will be `null`. To access the individual price attributes, you should use the `items` relationship available on the `Subscription` model.\n\n<a name=\"subscription-items\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1113,"to":1128}}}}],["256",{"pageContent":"Subscription Items\n\nWhen a subscription has multiple prices, it will have multiple subscription \"items\" stored in your database's `subscription_items` table. You may access these via the `items` relationship on the subscription:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $subscriptionItem = $user->subscription('default')->items->first();\n\n    // Retrieve the Stripe price and quantity for a specific item...\n    $stripePrice = $subscriptionItem->stripe_price;\n    $quantity = $subscriptionItem->quantity;\n\nYou can also retrieve a specific price using the `findItemOrFail` method:\n\n    $user = User::find(1);\n\n    $subscriptionItem = $user->subscription('default')->findItemOrFail('price_chat');\n\n<a name=\"multiple-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1129,"to":1149}}}}],["257",{"pageContent":"Multiple Subscriptions\n\nStripe allows your customers to have multiple subscriptions simultaneously. For example, you may run a gym that offers a swimming subscription and a weight-lifting subscription, and each subscription may have different pricing. Of course, customers should be able to subscribe to either or both plans.\n\nWhen your application creates subscriptions, you may provide the name of the subscription to the `newSubscription` method. The name may be any string that represents the type of subscription the user is initiating:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/swimming/subscribe', function (Request $request) {\n        $request->user()->newSubscription('swimming')\n            ->price('price_swimming_monthly')\n            ->create($request->paymentMethodId);\n\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1150,"to":1164}}}}],["258",{"pageContent":"// ...\n    });\n\nIn this example, we initiated a monthly swimming subscription for the customer. However, they may want to swap to a yearly subscription at a later time. When adjusting the customer's subscription, we can simply swap the price on the `swimming` subscription:\n\n    $user->subscription('swimming')->swap('price_swimming_yearly');\n\nOf course, you may also cancel the subscription entirely:\n\n    $user->subscription('swimming')->cancel();\n\n<a name=\"metered-billing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1164,"to":1175}}}}],["259",{"pageContent":"Metered Billing\n\n[Metered billing](https://stripe.com/docs/billing/subscriptions/metered-billing) allows you to charge customers based on their product usage during a billing cycle. For example, you may charge customers based on the number of text messages or emails they send per month.\n\nTo start using metered billing, you will first need to create a new product in your Stripe dashboard with a metered price. Then, use the `meteredPrice` to add the metered price ID to a customer subscription:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/user/subscribe', function (Request $request) {\n        $request->user()->newSubscription('default')\n            ->meteredPrice('price_metered')\n            ->create($request->paymentMethodId);\n\n        // ...\n    });\n\nYou may also start a metered subscription via [Stripe Checkout](#checkout):\n\n    $checkout = Auth::user()\n            ->newSubscription('default', [])\n            ->meteredPrice('price_metered')\n            ->checkout();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1176,"to":1197}}}}],["260",{"pageContent":"$checkout = Auth::user()\n            ->newSubscription('default', [])\n            ->meteredPrice('price_metered')\n            ->checkout();\n\n    return view('your-checkout-view', [\n        'checkout' => $checkout,\n    ]);\n\n<a name=\"reporting-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1197,"to":1206}}}}],["261",{"pageContent":"Reporting Usage\n\nAs your customer uses your application, you will report their usage to Stripe so that they can be billed accurately. To increment the usage of a metered subscription, you may use the `reportUsage` method:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->reportUsage();\n\nBy default, a \"usage quantity\" of 1 is added to the billing period. Alternatively, you may pass a specific amount of \"usage\" to add to the customer's usage for the billing period:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->reportUsage(15);\n\nIf your application offers multiple prices on a single subscription, you will need to use the `reportUsageFor` method to specify the metered price you want to report usage for:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->reportUsageFor('price_metered', 15);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1207,"to":1225}}}}],["262",{"pageContent":"$user = User::find(1);\n\n    $user->subscription('default')->reportUsageFor('price_metered', 15);\n\nSometimes, you may need to update usage which you have previously reported. To accomplish this, you may pass a timestamp or a `DateTimeInterface` instance as the second parameter to `reportUsage`. When doing so, Stripe will update the usage that was reported at that given time. You can continue to update previous usage records as the given date and time is still within the current billing period:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->reportUsage(5, $timestamp);\n\n<a name=\"retrieving-usage-records\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1225,"to":1235}}}}],["263",{"pageContent":"Retrieving Usage Records\n\nTo retrieve a customer's past usage, you may use a subscription instance's `usageRecords` method:\n\n    $user = User::find(1);\n\n    $usageRecords = $user->subscription('default')->usageRecords();\n\nIf your application offers multiple prices on a single subscription, you may use the `usageRecordsFor` method to specify the metered price that you wish to retrieve usage records for:\n\n    $user = User::find(1);\n\n    $usageRecords = $user->subscription('default')->usageRecordsFor('price_metered');\n\nThe `usageRecords` and `usageRecordsFor` methods return a Collection instance containing an associative array of usage records. You may iterate over this array to display a customer's total usage:\n\n    @foreach ($usageRecords as $usageRecord)\n        - Period Starting: {{ $usageRecord['period']['start'] }}\n        - Period Ending: {{ $usageRecord['period']['end'] }}\n        - Total Usage: {{ $usageRecord['total_usage'] }}\n    @endforeach","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1236,"to":1256}}}}],["264",{"pageContent":"For a full reference of all usage data returned and how to use Stripe's cursor based pagination, please consult [the official Stripe API documentation](https://stripe.com/docs/api/usage_records/subscription_item_summary_list).\n\n<a name=\"subscription-taxes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1258,"to":1260}}}}],["265",{"pageContent":"Subscription Taxes\n\n> **Warning**  \n> Instead of calculating Tax Rates manually, you can [automatically calculate taxes using Stripe Tax](#tax-configuration)\n\nTo specify the tax rates a user pays on a subscription, you should implement the `taxRates` method on your billable model and return an array containing the Stripe tax rate IDs. You can define these tax rates in [your Stripe dashboard](https://dashboard.stripe.com/test/tax-rates):\n\n    /**\n     * The tax rates that should apply to the customer's subscriptions.\n     *\n     * @return array<int, string>\n     */\n    public function taxRates(): array\n    {\n        return ['txr_id'];\n    }\n\nThe `taxRates` method enables you to apply a tax rate on a customer-by-customer basis, which may be helpful for a user base that spans multiple countries and tax rates.\n\nIf you're offering subscriptions with multiple products, you may define different tax rates for each price by implementing a `priceTaxRates` method on your billable model:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1261,"to":1280}}}}],["266",{"pageContent":"If you're offering subscriptions with multiple products, you may define different tax rates for each price by implementing a `priceTaxRates` method on your billable model:\n\n    /**\n     * The tax rates that should apply to the customer's subscriptions.\n     *\n     * @return array<string, array<int, string>>\n     */\n    public function priceTaxRates(): array\n    {\n        return [\n            'price_monthly' => ['txr_id'],\n        ];\n    }\n\n> **Warning**  \n> The `taxRates` method only applies to subscription charges. If you use Cashier to make \"one-off\" charges, you will need to manually specify the tax rate at that time.\n\n<a name=\"syncing-tax-rates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1280,"to":1297}}}}],["267",{"pageContent":"Syncing Tax Rates\n\nWhen changing the hard-coded tax rate IDs returned by the `taxRates` method, the tax settings on any existing subscriptions for the user will remain the same. If you wish to update the tax value for existing subscriptions with the new `taxRates` values, you should call the `syncTaxRates` method on the user's subscription instance:\n\n    $user->subscription('default')->syncTaxRates();\n\nThis will also sync any item tax rates for a subscription with multiple products. If your application is offering subscriptions with multiple products, you should ensure that your billable model implements the `priceTaxRates` method [discussed above](#subscription-taxes).\n\n<a name=\"tax-exemption\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1298,"to":1306}}}}],["268",{"pageContent":"Tax Exemption\n\nCashier also offers the `isNotTaxExempt`, `isTaxExempt`, and `reverseChargeApplies` methods to determine if the customer is tax exempt. These methods will call the Stripe API to determine a customer's tax exemption status:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->isTaxExempt();\n    $user->isNotTaxExempt();\n    $user->reverseChargeApplies();\n\n> **Warning**  \n> These methods are also available on any `Laravel\\Cashier\\Invoice` object. However, when invoked on an `Invoice` object, the methods will determine the exemption status at the time the invoice was created.\n\n<a name=\"subscription-anchor-date\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1307,"to":1322}}}}],["269",{"pageContent":"Subscription Anchor Date\n\nBy default, the billing cycle anchor is the date the subscription was created or, if a trial period is used, the date that the trial ends. If you would like to modify the billing anchor date, you may use the `anchorBillingCycleOn` method:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/user/subscribe', function (Request $request) {\n        $anchor = Carbon::parse('first day of next month');\n\n        $request->user()->newSubscription('default', 'price_monthly')\n                    ->anchorBillingCycleOn($anchor->startOfDay())\n                    ->create($request->paymentMethodId);\n\n        // ...\n    });\n\nFor more information on managing subscription billing cycles, consult the [Stripe billing cycle documentation](https://stripe.com/docs/billing/subscriptions/billing-cycle)\n\n<a name=\"cancelling-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1323,"to":1341}}}}],["270",{"pageContent":"Cancelling Subscriptions\n\nTo cancel a subscription, call the `cancel` method on the user's subscription:\n\n    $user->subscription('default')->cancel();\n\nWhen a subscription is canceled, Cashier will automatically set the `ends_at` column in your `subscriptions` database table. This column is used to know when the `subscribed` method should begin returning `false`.\n\nFor example, if a customer cancels a subscription on March 1st, but the subscription was not scheduled to end until March 5th, the `subscribed` method will continue to return `true` until March 5th. This is done because a user is typically allowed to continue using an application until the end of their billing cycle.\n\nYou may determine if a user has canceled their subscription but are still on their \"grace period\" using the `onGracePeriod` method:\n\n    if ($user->subscription('default')->onGracePeriod()) {\n        // ...\n    }\n\nIf you wish to cancel a subscription immediately, call the `cancelNow` method on the user's subscription:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1342,"to":1358}}}}],["271",{"pageContent":"if ($user->subscription('default')->onGracePeriod()) {\n        // ...\n    }\n\nIf you wish to cancel a subscription immediately, call the `cancelNow` method on the user's subscription:\n\n    $user->subscription('default')->cancelNow();\n\nIf you wish to cancel a subscription immediately and invoice any remaining un-invoiced metered usage or new / pending proration invoice items, call the `cancelNowAndInvoice` method on the user's subscription:\n\n    $user->subscription('default')->cancelNowAndInvoice();\n\nYou may also choose to cancel the subscription at a specific moment in time:\n\n    $user->subscription('default')->cancelAt(\n        now()->addDays(10)\n    );\n\n<a name=\"resuming-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1358,"to":1376}}}}],["272",{"pageContent":"Resuming Subscriptions\n\nIf a customer has canceled their subscription and you wish to resume it, you may invoke the `resume` method on the subscription. The customer must still be within their \"grace period\" in order to resume a subscription:\n\n    $user->subscription('default')->resume();\n\nIf the customer cancels a subscription and then resumes that subscription before the subscription has fully expired the customer will not be billed immediately. Instead, their subscription will be re-activated and they will be billed on the original billing cycle.\n\n<a name=\"subscription-trials\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1377,"to":1385}}}}],["273",{"pageContent":"Subscription Trials\n\n<a name=\"with-payment-method-up-front\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1386,"to":1388}}}}],["274",{"pageContent":"With Payment Method Up Front\n\nIf you would like to offer trial periods to your customers while still collecting payment method information up front, you should use the `trialDays` method when creating your subscriptions:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/user/subscribe', function (Request $request) {\n        $request->user()->newSubscription('default', 'price_monthly')\n                    ->trialDays(10)\n                    ->create($request->paymentMethodId);\n\n        // ...\n    });\n\nThis method will set the trial period ending date on the subscription record within the database and instruct Stripe to not begin billing the customer until after this date. When using the `trialDays` method, Cashier will overwrite any default trial period configured for the price in Stripe.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1389,"to":1403}}}}],["275",{"pageContent":"> **Warning**  \n> If the customer's subscription is not canceled before the trial ending date they will be charged as soon as the trial expires, so you should be sure to notify your users of their trial ending date.\n\nThe `trialUntil` method allows you to provide a `DateTime` instance that specifies when the trial period should end:\n\n    use Carbon\\Carbon;\n\n    $user->newSubscription('default', 'price_monthly')\n                ->trialUntil(Carbon::now()->addDays(10))\n                ->create($paymentMethod);\n\nYou may determine if a user is within their trial period using either the `onTrial` method of the user instance or the `onTrial` method of the subscription instance. The two examples below are equivalent:\n\n    if ($user->onTrial('default')) {\n        // ...\n    }\n\n    if ($user->subscription('default')->onTrial()) {\n        // ...\n    }\n\nYou may use the `endTrial` method to immediately end a subscription trial:\n\n    $user->subscription('default')->endTrial();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1405,"to":1428}}}}],["276",{"pageContent":"if ($user->subscription('default')->onTrial()) {\n        // ...\n    }\n\nYou may use the `endTrial` method to immediately end a subscription trial:\n\n    $user->subscription('default')->endTrial();\n\nTo determine if an existing trial has expired, you may use the `hasExpiredTrial` methods:\n\n    if ($user->hasExpiredTrial('default')) {\n        // ...\n    }\n\n    if ($user->subscription('default')->hasExpiredTrial()) {\n        // ...\n    }\n\n<a name=\"defining-trial-days-in-stripe-cashier\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1428,"to":1446}}}}],["277",{"pageContent":"Defining Trial Days In Stripe / Cashier\n\nYou may choose to define how many trial days your price's receive in the Stripe dashboard or always pass them explicitly using Cashier. If you choose to define your price's trial days in Stripe you should be aware that new subscriptions, including new subscriptions for a customer that had a subscription in the past, will always receive a trial period unless you explicitly call the `skipTrial()` method.\n\n<a name=\"without-payment-method-up-front\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1447,"to":1451}}}}],["278",{"pageContent":"Without Payment Method Up Front\n\nIf you would like to offer trial periods without collecting the user's payment method information up front, you may set the `trial_ends_at` column on the user record to your desired trial ending date. This is typically done during user registration:\n\n    use App\\Models\\User;\n\n    $user = User::create([\n        // ...\n        'trial_ends_at' => now()->addDays(10),\n    ]);\n\n> **Warning**  \n> Be sure to add a [date cast](/docs/{{version}}/eloquent-mutators#date-casting) for the `trial_ends_at` attribute within your billable model's class definition.\n\nCashier refers to this type of trial as a \"generic trial\", since it is not attached to any existing subscription. The `onTrial` method on the billable model instance will return `true` if the current date is not past the value of `trial_ends_at`:\n\n    if ($user->onTrial()) {\n        // User is within their trial period...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1452,"to":1470}}}}],["279",{"pageContent":"if ($user->onTrial()) {\n        // User is within their trial period...\n    }\n\nOnce you are ready to create an actual subscription for the user, you may use the `newSubscription` method as usual:\n\n    $user = User::find(1);\n\n    $user->newSubscription('default', 'price_monthly')->create($paymentMethod);\n\nTo retrieve the user's trial ending date, you may use the `trialEndsAt` method. This method will return a Carbon date instance if a user is on a trial or `null` if they aren't. You may also pass an optional subscription name parameter if you would like to get the trial ending date for a specific subscription other than the default one:\n\n    if ($user->onTrial()) {\n        $trialEndsAt = $user->trialEndsAt('main');\n    }\n\nYou may also use the `onGenericTrial` method if you wish to know specifically that the user is within their \"generic\" trial period and has not yet created an actual subscription:\n\n    if ($user->onGenericTrial()) {\n        // User is within their \"generic\" trial period...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1470,"to":1490}}}}],["280",{"pageContent":"if ($user->onGenericTrial()) {\n        // User is within their \"generic\" trial period...\n    }\n\n<a name=\"extending-trials\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1490,"to":1494}}}}],["281",{"pageContent":"Extending Trials\n\nThe `extendTrial` method allows you to extend the trial period of a subscription after the subscription has been created. If the trial has already expired and the customer is already being billed for the subscription, you can still offer them an extended trial. The time spent within the trial period will be deducted from the customer's next invoice:\n\n    use App\\Models\\User;\n\n    $subscription = User::find(1)->subscription('default');\n\n    // End the trial 7 days from now...\n    $subscription->extendTrial(\n        now()->addDays(7)\n    );\n\n    // Add an additional 5 days to the trial...\n    $subscription->extendTrial(\n        $subscription->trial_ends_at->addDays(5)\n    );\n\n<a name=\"handling-stripe-webhooks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1495,"to":1513}}}}],["282",{"pageContent":"Handling Stripe Webhooks\n\n> **Note**  \n> You may use [the Stripe CLI](https://stripe.com/docs/stripe-cli) to help test webhooks during local development.\n\nStripe can notify your application of a variety of events via webhooks. By default, a route that points to Cashier's webhook controller is automatically registered by the Cashier service provider. This controller will handle all incoming webhook requests.\n\nBy default, the Cashier webhook controller will automatically handle cancelling subscriptions that have too many failed charges (as defined by your Stripe settings), customer updates, customer deletions, subscription updates, and payment method changes; however, as we'll soon discover, you can extend this controller to handle any Stripe webhook event you like.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1514,"to":1521}}}}],["283",{"pageContent":"To ensure your application can handle Stripe webhooks, be sure to configure the webhook URL in the Stripe control panel. By default, Cashier's webhook controller responds to the `/stripe/webhook` URL path. The full list of all webhooks you should enable in the Stripe control panel are:\n\n- `customer.subscription.created`\n- `customer.subscription.updated`\n- `customer.subscription.deleted`\n- `customer.updated`\n- `customer.deleted`\n- `payment_method.automatically_updated`\n- `invoice.payment_action_required`\n- `invoice.payment_succeeded`\n\nFor convenience, Cashier includes a `cashier:webhook` Artisan command. This command will create a webhook in Stripe that listens to all of the events required by Cashier:\n\n```shell\nphp artisan cashier:webhook","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1523,"to":1537}}}}],["284",{"pageContent":"By default, the created webhook will point to the URL defined by the `APP_URL` environment variable and the `cashier.webhook` route that is included with Cashier. You may provide the `--url` option when invoking the command if you would like to use a different URL:\n\n```shell\nphp artisan cashier:webhook --url \"https://example.com/stripe/webhook\"\n```\n\nThe webhook that is created will use the Stripe API version that your version of Cashier is compatible with. If you would like to use a different Stripe version, you may provide the `--api-version` option:\n\n```shell\nphp artisan cashier:webhook --api-version=\"2019-12-03\"\n```\n\nAfter creation, the webhook will be immediately active. If you wish to create the webhook but have it disabled until you're ready, you may provide the `--disabled` option when invoking the command:\n\n```shell\nphp artisan cashier:webhook --disabled","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1540,"to":1555}}}}],["285",{"pageContent":"> **Warning**  \n> Make sure you protect incoming Stripe webhook requests with Cashier's included [webhook signature verification](#verifying-webhook-signatures) middleware.\n\n<a name=\"webhooks-csrf-protection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1558,"to":1561}}}}],["286",{"pageContent":"Webhooks & CSRF Protection\n\nSince Stripe webhooks need to bypass Laravel's [CSRF protection](/docs/{{version}}/csrf), be sure to list the URI as an exception in your application's `App\\Http\\Middleware\\VerifyCsrfToken` middleware or list the route outside of the `web` middleware group:\n\n    protected $except = [\n        'stripe/*',\n    ];\n\n<a name=\"defining-webhook-event-handlers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1562,"to":1570}}}}],["287",{"pageContent":"Defining Webhook Event Handlers\n\nCashier automatically handles subscription cancellations for failed charges and other common Stripe webhook events. However, if you have additional webhook events you would like to handle, you may do so by listening to the following events that are dispatched by Cashier:\n\n- `Laravel\\Cashier\\Events\\WebhookReceived`\n- `Laravel\\Cashier\\Events\\WebhookHandled`\n\nBoth events contain the full payload of the Stripe webhook. For example, if you wish to handle the `invoice.payment_succeeded` webhook, you may register a [listener](/docs/{{version}}/events#defining-listeners) that will handle the event:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use Laravel\\Cashier\\Events\\WebhookReceived;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1571,"to":1584}}}}],["288",{"pageContent":"<?php\n\n    namespace App\\Listeners;\n\n    use Laravel\\Cashier\\Events\\WebhookReceived;\n\n    class StripeEventListener\n    {\n        /**\n         * Handle received Stripe webhooks.\n         */\n        public function handle(WebhookReceived $event): void\n        {\n            if ($event->payload['type'] === 'invoice.payment_succeeded') {\n                // Handle the incoming event...\n            }\n        }\n    }\n\nOnce your listener has been defined, you may register it within your application's `EventServiceProvider`:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Listeners\\StripeEventListener;\n    use Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\n    use Laravel\\Cashier\\Events\\WebhookReceived;\n\n    class EventServiceProvider extends ServiceProvider\n    {\n        protected $listen = [\n            WebhookReceived::class => [\n                StripeEventListener::class,\n            ],\n        ];\n    }\n\n<a name=\"verifying-webhook-signatures\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1584,"to":1622}}}}],["289",{"pageContent":"Verifying Webhook Signatures\n\nTo secure your webhooks, you may use [Stripe's webhook signatures](https://stripe.com/docs/webhooks/signatures). For convenience, Cashier automatically includes a middleware which validates that the incoming Stripe webhook request is valid.\n\nTo enable webhook verification, ensure that the `STRIPE_WEBHOOK_SECRET` environment variable is set in your application's `.env` file. The webhook `secret` may be retrieved from your Stripe account dashboard.\n\n<a name=\"single-charges\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1623,"to":1629}}}}],["290",{"pageContent":"Single Charges\n\n<a name=\"simple-charge\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1630,"to":1632}}}}],["291",{"pageContent":"Simple Charge\n\nIf you would like to make a one-time charge against a customer, you may use the `charge` method on a billable model instance. You will need to [provide a payment method identifier](#payment-methods-for-single-charges) as the second argument to the `charge` method:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/purchase', function (Request $request) {\n        $stripeCharge = $request->user()->charge(\n            100, $request->paymentMethodId\n        );\n\n        // ...\n    });\n\nThe `charge` method accepts an array as its third argument, allowing you to pass any options you wish to the underlying Stripe charge creation. More information regarding the options available to you when creating charges may be found in the [Stripe documentation](https://stripe.com/docs/api/charges/create):\n\n    $user->charge(100, $paymentMethod, [\n        'custom_option' => $value,\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1633,"to":1651}}}}],["292",{"pageContent":"$user->charge(100, $paymentMethod, [\n        'custom_option' => $value,\n    ]);\n\nYou may also use the `charge` method without an underlying customer or user. To accomplish this, invoke the `charge` method on a new instance of your application's billable model:\n\n    use App\\Models\\User;\n\n    $stripeCharge = (new User)->charge(100, $paymentMethod);\n\nThe `charge` method will throw an exception if the charge fails. If the charge is successful, an instance of `Laravel\\Cashier\\Payment` will be returned from the method:\n\n    try {\n        $payment = $user->charge(100, $paymentMethod);\n    } catch (Exception $e) {\n        // ...\n    }\n\n> **Warning**  \n> The `charge` method accepts the payment amount in the lowest denominator of the currency used by your application. For example, if customers are paying in United States Dollars, amounts should be specified in pennies.\n\n<a name=\"charge-with-invoice\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1651,"to":1672}}}}],["293",{"pageContent":"Charge With Invoice\n\nSometimes you may need to make a one-time charge and offer a PDF receipt to your customer. The `invoicePrice` method lets you do just that. For example, let's invoice a customer for five new shirts:\n\n    $user->invoicePrice('price_tshirt', 5);\n\nThe invoice will be immediately charged against the user's default payment method. The `invoicePrice` method also accepts an array as its third argument. This array contains the billing options for the invoice item. The fourth argument accepted by the method is also an array which should contain the billing options for the invoice itself:\n\n    $user->invoicePrice('price_tshirt', 5, [\n        'discounts' => [\n            ['coupon' => 'SUMMER21SALE']\n        ],\n    ], [\n        'default_tax_rates' => ['txr_id'],\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1673,"to":1687}}}}],["294",{"pageContent":"$user->invoicePrice('price_tshirt', 5, [\n        'discounts' => [\n            ['coupon' => 'SUMMER21SALE']\n        ],\n    ], [\n        'default_tax_rates' => ['txr_id'],\n    ]);\n\nSimilarly to `invoicePrice`, you may use the `tabPrice` method to create a one-time charge for multiple items (up to 250 items per invoice) by adding them to the customer's \"tab\" and then invoicing the customer. For example, we may invoice a customer for five shirts and two mugs:\n\n    $user->tabPrice('price_tshirt', 5);\n    $user->tabPrice('price_mug', 2);\n    $user->invoice();\n\nAlternatively, you may use the `invoiceFor` method to make a \"one-off\" charge against the customer's default payment method:\n\n    $user->invoiceFor('One Time Fee', 500);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1687,"to":1703}}}}],["295",{"pageContent":"Alternatively, you may use the `invoiceFor` method to make a \"one-off\" charge against the customer's default payment method:\n\n    $user->invoiceFor('One Time Fee', 500);\n\nAlthough the `invoiceFor` method is available for you to use, it is recommended that you use the `invoicePrice` and `tabPrice` methods with pre-defined prices. By doing so, you will have access to better analytics and data within your Stripe dashboard regarding your sales on a per-product basis.\n\n> **Warning**  \n> The `invoice`, `invoicePrice`, and `invoiceFor` methods will create a Stripe invoice which will retry failed billing attempts. If you do not want invoices to retry failed charges, you will need to close them using the Stripe API after the first failed charge.\n\n<a name=\"creating-payment-intents\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1703,"to":1712}}}}],["296",{"pageContent":"Creating Payment Intents\n\nYou can create a new Stripe payment intent by invoking the `pay` method on a billable model instance. Calling this method will create a payment intent that is wrapped in a `Laravel\\Cashier\\Payment` instance:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/pay', function (Request $request) {\n        $payment = $request->user()->pay(\n            $request->get('amount')\n        );\n\n        return $payment->client_secret;\n    });\n\nAfter creating the payment intent, you can return the client secret to your application's frontend so that the user can complete the payment in their browser. To read more about building entire payment flows using Stripe payment intents, please consult the [Stripe documentation](https://stripe.com/docs/payments/accept-a-payment?platform=web).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1713,"to":1727}}}}],["297",{"pageContent":"When using the `pay` method, the default payment methods that are enabled within your Stripe dashboard will be available to the customer. Alternatively, if you only want to allow for some specific payment methods to be used, you may use the `payWith` method:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/pay', function (Request $request) {\n        $payment = $request->user()->payWith(\n            $request->get('amount'), ['card', 'bancontact']\n        );\n\n        return $payment->client_secret;\n    });\n\n> **Warning**  \n> The `pay` and `payWith` methods accept the payment amount in the lowest denominator of the currency used by your application. For example, if customers are paying in United States Dollars, amounts should be specified in pennies.\n\n<a name=\"refunding-charges\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1729,"to":1744}}}}],["298",{"pageContent":"Refunding Charges\n\nIf you need to refund a Stripe charge, you may use the `refund` method. This method accepts the Stripe [payment intent ID](#payment-methods-for-single-charges) as its first argument:\n\n    $payment = $user->charge(100, $paymentMethodId);\n\n    $user->refund($payment->id);\n\n<a name=\"invoices\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1745,"to":1753}}}}],["299",{"pageContent":"Invoices\n\n<a name=\"retrieving-invoices\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1754,"to":1756}}}}],["300",{"pageContent":"Retrieving Invoices\n\nYou may easily retrieve an array of a billable model's invoices using the `invoices` method. The `invoices` method returns a collection of `Laravel\\Cashier\\Invoice` instances:\n\n    $invoices = $user->invoices();\n\nIf you would like to include pending invoices in the results, you may use the `invoicesIncludingPending` method:\n\n    $invoices = $user->invoicesIncludingPending();\n\nYou may use the `findInvoice` method to retrieve a specific invoice by its ID:\n\n    $invoice = $user->findInvoice($invoiceId);\n\n<a name=\"displaying-invoice-information\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1757,"to":1771}}}}],["301",{"pageContent":"Displaying Invoice Information\n\nWhen listing the invoices for the customer, you may use the invoice's methods to display the relevant invoice information. For example, you may wish to list every invoice in a table, allowing the user to easily download any of them:\n\n    <table>\n        @foreach ($invoices as $invoice)\n            <tr>\n                <td>{{ $invoice->date()->toFormattedDateString() }}</td>\n                <td>{{ $invoice->total() }}</td>\n                <td><a href=\"/user/invoice/{{ $invoice->id }}\">Download</a></td>\n            </tr>\n        @endforeach\n    </table>\n\n<a name=\"upcoming-invoices\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1772,"to":1786}}}}],["302",{"pageContent":"Upcoming Invoices\n\nTo retrieve the upcoming invoice for a customer, you may use the `upcomingInvoice` method:\n\n    $invoice = $user->upcomingInvoice();\n\nSimilarly, if the customer has multiple subscriptions, you can also retrieve the upcoming invoice for a specific subscription:\n\n    $invoice = $user->subscription('default')->upcomingInvoice();\n\n<a name=\"previewing-subscription-invoices\"></a>\n### Previewing Subscription Invoices\n\nUsing the `previewInvoice` method, you can preview an invoice before making price changes. This will allow you to determine what your customer's invoice will look like when a given price change is made:\n\n    $invoice = $user->subscription('default')->previewInvoice('price_yearly');\n\nYou may pass an array of prices to the `previewInvoice` method in order to preview invoices with multiple new prices:\n\n    $invoice = $user->subscription('default')->previewInvoice(['price_yearly', 'price_metered']);\n\n<a name=\"generating-invoice-pdfs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1787,"to":1808}}}}],["303",{"pageContent":"Generating Invoice PDFs\n\nBefore generating invoice PDFs, you should use Composer to install the Dompdf library, which is the default invoice renderer for Cashier:\n\n```php\ncomposer require dompdf/dompdf","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1809,"to":1814}}}}],["304",{"pageContent":"From within a route or controller, you may use the `downloadInvoice` method to generate a PDF download of a given invoice. This method will automatically generate the proper HTTP response needed to download the invoice:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/user/invoice/{invoice}', function (Request $request, string $invoiceId) {\n        return $request->user()->downloadInvoice($invoiceId);\n    });\n\nBy default, all data on the invoice is derived from the customer and invoice data stored in Stripe. The filename is based on your `app.name` config value. However, you can customize some of this data by providing an array as the second argument to the `downloadInvoice` method. This array allows you to customize information such as your company and product details:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1817,"to":1825}}}}],["305",{"pageContent":"return $request->user()->downloadInvoice($invoiceId, [\n        'vendor' => 'Your Company',\n        'product' => 'Your Product',\n        'street' => 'Main Str. 1',\n        'location' => '2000 Antwerp, Belgium',\n        'phone' => '+32 499 00 00 00',\n        'email' => 'info@example.com',\n        'url' => 'https://example.com',\n        'vendorVat' => 'BE123456789',\n    ]);\n\nThe `downloadInvoice` method also allows for a custom filename via its third argument. This filename will automatically be suffixed with `.pdf`:\n\n    return $request->user()->downloadInvoice($invoiceId, [], 'my-invoice');\n\n<a name=\"custom-invoice-render\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1827,"to":1842}}}}],["306",{"pageContent":"Custom Invoice Renderer\n\nCashier also makes it possible to use a custom invoice renderer. By default, Cashier uses the `DompdfInvoiceRenderer` implementation, which utilizes the [dompdf](https://github.com/dompdf/dompdf) PHP library to generate Cashier's invoices. However, you may use any renderer you wish by implementing the `Laravel\\Cashier\\Contracts\\InvoiceRenderer` interface. For example, you may wish to render an invoice PDF using an API call to a third-party PDF rendering service:\n\n    use Illuminate\\Support\\Facades\\Http;\n    use Laravel\\Cashier\\Contracts\\InvoiceRenderer;\n    use Laravel\\Cashier\\Invoice;\n\n    class ApiInvoiceRenderer implements InvoiceRenderer\n    {\n        /**\n         * Render the given invoice and return the raw PDF bytes.\n         */\n        public function render(Invoice $invoice, array $data = [], array $options = []): string\n        {\n            $html = $invoice->view($data)->render();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1843,"to":1858}}}}],["307",{"pageContent":"return Http::get('https://example.com/html-to-pdf', ['html' => $html])->get()->body();\n        }\n    }\n\nOnce you have implemented the invoice renderer contract, you should update the `cashier.invoices.renderer` configuration value in your application's `config/cashier.php` configuration file. This configuration value should be set to the class name of your custom renderer implementation.\n\n<a name=\"checkout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1860,"to":1866}}}}],["308",{"pageContent":"Checkout\n\nCashier Stripe also provides support for [Stripe Checkout](https://stripe.com/payments/checkout). Stripe Checkout takes the pain out of implementing custom pages to accept payments by providing a pre-built, hosted payment page.\n\nThe following documentation contains information on how to get started using Stripe Checkout with Cashier. To learn more about Stripe Checkout, you should also consider reviewing [Stripe's own documentation on Checkout](https://stripe.com/docs/payments/checkout).\n\n<a name=\"product-checkouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1867,"to":1873}}}}],["309",{"pageContent":"Product Checkouts\n\nYou may perform a checkout for an existing product that has been created within your Stripe dashboard using the `checkout` method on a billable model. The `checkout` method will initiate a new Stripe Checkout session. By default, you're required to pass a Stripe Price ID:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/product-checkout', function (Request $request) {\n        return $request->user()->checkout('price_tshirt');\n    });\n\nIf needed, you may also specify a product quantity:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/product-checkout', function (Request $request) {\n        return $request->user()->checkout(['price_tshirt' => 15]);\n    });\n\nWhen a customer visits this route they will be redirected to Stripe's Checkout page. By default, when a user successfully completes or cancels a purchase they will be redirected to your `home` route location, but you may specify custom callback URLs using the `success_url` and `cancel_url` options:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1874,"to":1892}}}}],["310",{"pageContent":"use Illuminate\\Http\\Request;\n\n    Route::get('/product-checkout', function (Request $request) {\n        return $request->user()->checkout(['price_tshirt' => 1], [\n            'success_url' => route('your-success-route'),\n            'cancel_url' => route('your-cancel-route'),\n        ]);\n    });\n\nWhen defining your `success_url` checkout option, you may instruct Stripe to add the checkout session ID as a query string parameter when invoking your URL. To do so, add the literal string `{CHECKOUT_SESSION_ID}` to your `success_url` query string. Stripe will replace this placeholder with the actual checkout session ID:\n\n    use Illuminate\\Http\\Request;\n    use Stripe\\Checkout\\Session;\n    use Stripe\\Customer;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1894,"to":1907}}}}],["311",{"pageContent":"use Illuminate\\Http\\Request;\n    use Stripe\\Checkout\\Session;\n    use Stripe\\Customer;\n\n    Route::get('/product-checkout', function (Request $request) {\n        return $request->user()->checkout(['price_tshirt' => 1], [\n            'success_url' => route('checkout-success').'?session_id={CHECKOUT_SESSION_ID}',\n            'cancel_url' => route('checkout-cancel'),\n        ]);\n    });\n\n    Route::get('/checkout-success', function (Request $request) {\n        $checkoutSession = $request->user()->stripe()->checkout->sessions->retrieve($request->get('session_id'));\n\n        return view('checkout.success', ['checkoutSession' => $checkoutSession]);\n    })->name('checkout-success');\n\n<a name=\"checkout-promotion-codes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1907,"to":1924}}}}],["312",{"pageContent":"Promotion Codes\n\nBy default, Stripe Checkout does not allow [user redeemable promotion codes](https://stripe.com/docs/billing/subscriptions/discounts/codes). Luckily, there's an easy way to enable these for your Checkout page. To do so, you may invoke the `allowPromotionCodes` method:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/product-checkout', function (Request $request) {\n        return $request->user()\n            ->allowPromotionCodes()\n            ->checkout('price_tshirt');\n    });\n\n<a name=\"single-charge-checkouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1925,"to":1937}}}}],["313",{"pageContent":"Single Charge Checkouts\n\nYou can also perform a simple charge for an ad-hoc product that has not been created in your Stripe dashboard. To do so you may use the `checkoutCharge` method on a billable model and pass it a chargeable amount, a product name, and an optional quantity. When a customer visits this route they will be redirected to Stripe's Checkout page:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/charge-checkout', function (Request $request) {\n        return $request->user()->checkoutCharge(1200, 'T-Shirt', 5);\n    });\n\n> **Warning**  \n> When using the `checkoutCharge` method, Stripe will always create a new product and price in your Stripe dashboard. Therefore, we recommend that you create the products up front in your Stripe dashboard and use the `checkout` method instead.\n\n<a name=\"subscription-checkouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1938,"to":1951}}}}],["314",{"pageContent":"Subscription Checkouts\n\n> **Warning**  \n> Using Stripe Checkout for subscriptions requires you to enable the `customer.subscription.created` webhook in your Stripe dashboard. This webhook will create the subscription record in your database and store all of the relevant subscription items.\n\nYou may also use Stripe Checkout to initiate subscriptions. After defining your subscription with Cashier's subscription builder methods, you may call the `checkout `method. When a customer visits this route they will be redirected to Stripe's Checkout page:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/subscription-checkout', function (Request $request) {\n        return $request->user()\n            ->newSubscription('default', 'price_monthly')\n            ->checkout();\n    });\n\nJust as with product checkouts, you may customize the success and cancellation URLs:\n\n    use Illuminate\\Http\\Request;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1952,"to":1969}}}}],["315",{"pageContent":"Just as with product checkouts, you may customize the success and cancellation URLs:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/subscription-checkout', function (Request $request) {\n        return $request->user()\n            ->newSubscription('default', 'price_monthly')\n            ->checkout([\n                'success_url' => route('your-success-route'),\n                'cancel_url' => route('your-cancel-route'),\n            ]);\n    });\n\nOf course, you can also enable promotion codes for subscription checkouts:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/subscription-checkout', function (Request $request) {\n        return $request->user()\n            ->newSubscription('default', 'price_monthly')\n            ->allowPromotionCodes()\n            ->checkout();\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1969,"to":1991}}}}],["316",{"pageContent":"> **Warning**  \n> Unfortunately Stripe Checkout does not support all subscription billing options when starting subscriptions. Using the `anchorBillingCycleOn` method on the subscription builder, setting proration behavior, or setting payment behavior will not have any effect during Stripe Checkout sessions. Please consult [the Stripe Checkout Session API documentation](https://stripe.com/docs/api/checkout/sessions/create) to review which parameters are available.\n\n<a name=\"stripe-checkout-trial-periods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1993,"to":1996}}}}],["317",{"pageContent":"Stripe Checkout & Trial Periods\n\nOf course, you can define a trial period when building a subscription that will be completed using Stripe Checkout:\n\n    $checkout = Auth::user()->newSubscription('default', 'price_monthly')\n        ->trialDays(3)\n        ->checkout();\n\nHowever, the trial period must be at least 48 hours, which is the minimum amount of trial time supported by Stripe Checkout.\n\n<a name=\"stripe-checkout-subscriptions-and-webhooks\"></a>\n#### Subscriptions & Webhooks\n\nRemember, Stripe and Cashier update subscription statuses via webhooks, so there's a possibility a subscription might not yet be active when the customer returns to the application after entering their payment information. To handle this scenario, you may wish to display a message informing the user that their payment or subscription is pending.\n\n<a name=\"collecting-tax-ids\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":1997,"to":2012}}}}],["318",{"pageContent":"Collecting Tax IDs\n\nCheckout also supports collecting a customer's Tax ID. To enable this on a checkout session, invoke the `collectTaxIds` method when creating the session:\n\n    $checkout = $user->collectTaxIds()->checkout('price_tshirt');\n\nWhen this method is invoked, a new checkbox will be available to the customer that allows them to indicate if they're purchasing as a company. If so, they will have the opportunity to provide their Tax ID number.\n\n> **Warning**  \n> If you have already configured [automatic tax collection](#tax-configuration) in your application's service provider then this feature will be enabled automatically and there is no need to invoke the `collectTaxIds` method.\n\n<a name=\"guest-checkouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2013,"to":2024}}}}],["319",{"pageContent":"Guest Checkouts\n\nUsing the `Checkout::guest` method, you may initiate checkout sessions for guests of your application that do not have an \"account\":\n\n    use Illuminate\\Http\\Request;\n    use Laravel\\Cashier\\Checkout;\n\n    Route::get('/product-checkout', function (Request $request) {\n        return Checkout::guest()->create('price_tshirt', [\n            'success_url' => route('your-success-route'),\n            'cancel_url' => route('your-cancel-route'),\n        ]);\n    });\n\nSimilarly to when creating checkout sessions for existing users, you may utilize additional methods available on the `Laravel\\Cashier\\CheckoutBuilder` instance to customize the guest checkout session:\n\n    use Illuminate\\Http\\Request;\n    use Laravel\\Cashier\\Checkout;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2025,"to":2042}}}}],["320",{"pageContent":"use Illuminate\\Http\\Request;\n    use Laravel\\Cashier\\Checkout;\n\n    Route::get('/product-checkout', function (Request $request) {\n        return Checkout::guest()\n            ->withPromotionCode('promo-code')\n            ->create('price_tshirt', [\n                'success_url' => route('your-success-route'),\n                'cancel_url' => route('your-cancel-route'),\n            ]);\n    });\n\nAfter a guest checkout has been completed, Stripe can dispatch a `checkout.session.completed` webhook event, so make sure to [configure your Stripe webhook](https://dashboard.stripe.com/webhooks) to actually send this event to your application. Once the webhook has been enabled within the Stripe dashboard, you may [handle the webhook with Cashier](#handling-stripe-webhooks). The object contained in the webhook payload will be a [`checkout` object](https://stripe.com/docs/api/checkout/sessions/object) that you may inspect in order to fulfill your customer's order.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2042,"to":2054}}}}],["321",{"pageContent":"<a name=\"handling-failed-payments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2056,"to":2056}}}}],["322",{"pageContent":"Handling Failed Payments\n\nSometimes, payments for subscriptions or single charges can fail. When this happens, Cashier will throw an `Laravel\\Cashier\\Exceptions\\IncompletePayment` exception that informs you that this happened. After catching this exception, you have two options on how to proceed.\n\nFirst, you could redirect your customer to the dedicated payment confirmation page which is included with Cashier. This page already has an associated named route that is registered via Cashier's service provider. So, you may catch the `IncompletePayment` exception and redirect the user to the payment confirmation page:\n\n    use Laravel\\Cashier\\Exceptions\\IncompletePayment;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2057,"to":2063}}}}],["323",{"pageContent":"use Laravel\\Cashier\\Exceptions\\IncompletePayment;\n\n    try {\n        $subscription = $user->newSubscription('default', 'price_monthly')\n                                ->create($paymentMethod);\n    } catch (IncompletePayment $exception) {\n        return redirect()->route(\n            'cashier.payment',\n            [$exception->payment->id, 'redirect' => route('home')]\n        );\n    }\n\nOn the payment confirmation page, the customer will be prompted to enter their credit card information again and perform any additional actions required by Stripe, such as \"3D Secure\" confirmation. After confirming their payment, the user will be redirected to the URL provided by the `redirect` parameter specified above. Upon redirection, `message` (string) and `success` (integer) query string variables will be added to the URL. The payment page currently supports the following payment method types:\n\n<div class=\"content-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2063,"to":2077}}}}],["324",{"pageContent":"<div class=\"content-list\" markdown=\"1\">\n\n- Credit Cards\n- Alipay\n- Bancontact\n- BECS Direct Debit\n- EPS\n- Giropay\n- iDEAL\n- SEPA Direct Debit\n\n</div>\n\nAlternatively, you could allow Stripe to handle the payment confirmation for you. In this case, instead of redirecting to the payment confirmation page, you may [setup Stripe's automatic billing emails](https://dashboard.stripe.com/account/billing/automatic) in your Stripe dashboard. However, if an `IncompletePayment` exception is caught, you should still inform the user they will receive an email with further payment confirmation instructions.\n\nPayment exceptions may be thrown for the following methods: `charge`, `invoiceFor`, and `invoice` on models using the `Billable` trait. When interacting with subscriptions, the `create` method on the `SubscriptionBuilder`, and the `incrementAndInvoice` and `swapAndInvoice` methods on the `Subscription` and `SubscriptionItem` models may throw incomplete payment exceptions.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2077,"to":2092}}}}],["325",{"pageContent":"Determining if an existing subscription has an incomplete payment may be accomplished using the `hasIncompletePayment` method on the billable model or a subscription instance:\n\n    if ($user->hasIncompletePayment('default')) {\n        // ...\n    }\n\n    if ($user->subscription('default')->hasIncompletePayment()) {\n        // ...\n    }\n\nYou can derive the specific status of an incomplete payment by inspecting the `payment` property on the exception instance:\n\n    use Laravel\\Cashier\\Exceptions\\IncompletePayment;\n\n    try {\n        $user->charge(1000, 'pm_card_threeDSecure2Required');\n    } catch (IncompletePayment $exception) {\n        // Get the payment intent status...\n        $exception->payment->status;\n\n        // Check specific conditions...\n        if ($exception->payment->requiresPaymentMethod()) {\n            // ...\n        } elseif ($exception->payment->requiresConfirmation()) {\n            // ...\n        }\n    }\n\n<a name=\"confirming-payments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2094,"to":2122}}}}],["326",{"pageContent":"Confirming Payments\n\nSome payment methods require additional data in order to confirm payments. For example, SEPA payment methods require additional \"mandate\" data during the payment process. You may provide this data to Cashier using the `withPaymentConfirmationOptions` method:\n\n    $subscription->withPaymentConfirmationOptions([\n        'mandate_data' => '...',\n    ])->swap('price_xxx');\n    \nYou may consult the [Stripe API documentation](https://stripe.com/docs/api/payment_intents/confirm) to review all of the options accepted when confirming payments.\n\n<a name=\"strong-customer-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2123,"to":2133}}}}],["327",{"pageContent":"Strong Customer Authentication\n\nIf your business or one of your customers is based in Europe you will need to abide by the EU's Strong Customer Authentication (SCA) regulations. These regulations were imposed in September 2019 by the European Union to prevent payment fraud. Luckily, Stripe and Cashier are prepared for building SCA compliant applications.\n\n> **Warning**  \n> Before getting started, review [Stripe's guide on PSD2 and SCA](https://stripe.com/guides/strong-customer-authentication) as well as their [documentation on the new SCA APIs](https://stripe.com/docs/strong-customer-authentication).\n\n<a name=\"payments-requiring-additional-confirmation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2134,"to":2141}}}}],["328",{"pageContent":"Payments Requiring Additional Confirmation\n\nSCA regulations often require extra verification in order to confirm and process a payment. When this happens, Cashier will throw a `Laravel\\Cashier\\Exceptions\\IncompletePayment` exception that informs you that extra verification is needed. More information on how to handle these exceptions be found can be found in the documentation on [handling failed payments](#handling-failed-payments).\n\nPayment confirmation screens presented by Stripe or Cashier may be tailored to a specific bank or card issuer's payment flow and can include additional card confirmation, a temporary small charge, separate device authentication, or other forms of verification.\n\n<a name=\"incomplete-and-past-due-state\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2142,"to":2148}}}}],["329",{"pageContent":"Incomplete and Past Due State\n\nWhen a payment needs additional confirmation, the subscription will remain in an `incomplete` or `past_due` state as indicated by its `stripe_status` database column. Cashier will automatically activate the customer's subscription as soon as payment confirmation is complete and your application is notified by Stripe via webhook of its completion.\n\nFor more information on `incomplete` and `past_due` states, please refer to [our additional documentation on these states](#incomplete-and-past-due-status).\n\n<a name=\"off-session-payment-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2149,"to":2155}}}}],["330",{"pageContent":"Off-Session Payment Notifications\n\nSince SCA regulations require customers to occasionally verify their payment details even while their subscription is active, Cashier can send a notification to the customer when off-session payment confirmation is required. For example, this may occur when a subscription is renewing. Cashier's payment notification can be enabled by setting the `CASHIER_PAYMENT_NOTIFICATION` environment variable to a notification class. By default, this notification is disabled. Of course, Cashier includes a notification class you may use for this purpose, but you are free to provide your own notification class if desired:\n\n```ini\nCASHIER_PAYMENT_NOTIFICATION=Laravel\\Cashier\\Notifications\\ConfirmPayment","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2156,"to":2161}}}}],["331",{"pageContent":"To ensure that off-session payment confirmation notifications are delivered, verify that [Stripe webhooks are configured](#handling-stripe-webhooks) for your application and the `invoice.payment_action_required` webhook is enabled in your Stripe dashboard. In addition, your `Billable` model should also use Laravel's `Illuminate\\Notifications\\Notifiable` trait.\n\n> **Warning**  \n> Notifications will be sent even when customers are manually making a payment that requires additional confirmation. Unfortunately, there is no way for Stripe to know that the payment was done manually or \"off-session\". But, a customer will simply see a \"Payment Successful\" message if they visit the payment page after already confirming their payment. The customer will not be allowed to accidentally confirm the same payment twice and incur an accidental second charge.\n\n<a name=\"stripe-sdk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2164,"to":2169}}}}],["332",{"pageContent":"Stripe SDK\n\nMany of Cashier's objects are wrappers around Stripe SDK objects. If you would like to interact with the Stripe objects directly, you may conveniently retrieve them using the `asStripe` method:\n\n    $stripeSubscription = $subscription->asStripeSubscription();\n\n    $stripeSubscription->application_fee_percent = 5;\n\n    $stripeSubscription->save();\n\nYou may also use the `updateStripeSubscription` method to update a Stripe subscription directly:\n\n    $subscription->updateStripeSubscription(['application_fee_percent' => 5]);\n\nYou may invoke the `stripe` method on the `Cashier` class if you would like to use the `Stripe\\StripeClient` client directly. For example, you could use this method to access the `StripeClient` instance and retrieve a list of prices from your Stripe account:\n\n    use Laravel\\Cashier\\Cashier;\n\n    $prices = Cashier::stripe()->prices->all();\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2170,"to":2190}}}}],["333",{"pageContent":"Testing\n\nWhen testing an application that uses Cashier, you may mock the actual HTTP requests to the Stripe API; however, this requires you to partially re-implement Cashier's own behavior. Therefore, we recommend allowing your tests to hit the actual Stripe API. While this is slower, it provides more confidence that your application is working as expected and any slow tests may be placed within their own PHPUnit testing group.\n\nWhen testing, remember that Cashier itself already has a great test suite, so you should only focus on testing the subscription and payment flow of your own application and not every underlying Cashier behavior.\n\nTo get started, add the **testing** version of your Stripe secret to your `phpunit.xml` file:\n\n    <env name=\"STRIPE_SECRET\" value=\"sk_test_<your-key>\"/>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2191,"to":2199}}}}],["334",{"pageContent":"To get started, add the **testing** version of your Stripe secret to your `phpunit.xml` file:\n\n    <env name=\"STRIPE_SECRET\" value=\"sk_test_<your-key>\"/>\n\nNow, whenever you interact with Cashier while testing, it will send actual API requests to your Stripe testing environment. For convenience, you should pre-fill your Stripe testing account with subscriptions / prices that you may use during testing.\n\n> **Note**  \n> In order to test a variety of billing scenarios, such as credit card denials and failures, you may use the vast range of [testing card numbers and tokens](https://stripe.com/docs/testing) provided by Stripe.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/billing.md","loc":{"lines":{"from":2199,"to":2206}}}}],["335",{"pageContent":"# Blade Templates","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1,"to":1}}}}],["336",{"pageContent":"- [Introduction](#introduction)\n    - [Supercharging Blade With Livewire](#supercharging-blade-with-livewire)\n- [Displaying Data](#displaying-data)\n    - [HTML Entity Encoding](#html-entity-encoding)\n    - [Blade & JavaScript Frameworks](#blade-and-javascript-frameworks)\n- [Blade Directives](#blade-directives)\n    - [If Statements](#if-statements)\n    - [Switch Statements](#switch-statements)\n    - [Loops](#loops)\n    - [The Loop Variable](#the-loop-variable)\n    - [Conditional Classes](#conditional-classes)\n    - [Additional Attributes](#additional-attributes)\n    - [Including Subviews](#including-subviews)\n    - [The `@once` Directive](#the-once-directive)\n    - [Raw PHP](#raw-php)\n    - [Comments](#comments)\n- [Components](#components)\n    - [Rendering Components](#rendering-components)\n    - [Passing Data To Components](#passing-data-to-components)\n    - [Component Attributes](#component-attributes)\n    - [Reserved Keywords](#reserved-keywords)\n    - [Slots](#slots)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":3,"to":24}}}}],["337",{"pageContent":"- [Passing Data To Components](#passing-data-to-components)\n    - [Component Attributes](#component-attributes)\n    - [Reserved Keywords](#reserved-keywords)\n    - [Slots](#slots)\n    - [Inline Component Views](#inline-component-views)\n    - [Dynamic Components](#dynamic-components)\n    - [Manually Registering Components](#manually-registering-components)\n- [Anonymous Components](#anonymous-components)\n    - [Anonymous Index Components](#anonymous-index-components)\n    - [Data Properties / Attributes](#data-properties-attributes)\n    - [Accessing Parent Data](#accessing-parent-data)\n    - [Anonymous Components Paths](#anonymous-component-paths)\n- [Building Layouts](#building-layouts)\n    - [Layouts Using Components](#layouts-using-components)\n    - [Layouts Using Template Inheritance](#layouts-using-template-inheritance)\n- [Forms](#forms)\n    - [CSRF Field](#csrf-field)\n    - [Method Field](#method-field)\n    - [Validation Errors](#validation-errors)\n- [Stacks](#stacks)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":24,"to":43}}}}],["338",{"pageContent":"- [Forms](#forms)\n    - [CSRF Field](#csrf-field)\n    - [Method Field](#method-field)\n    - [Validation Errors](#validation-errors)\n- [Stacks](#stacks)\n- [Service Injection](#service-injection)\n- [Rendering Inline Blade Templates](#rendering-inline-blade-templates)\n- [Rendering Blade Fragments](#rendering-blade-fragments)\n- [Extending Blade](#extending-blade)\n    - [Custom Echo Handlers](#custom-echo-handlers)\n    - [Custom If Statements](#custom-if-statements)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":43,"to":53}}}}],["339",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":55,"to":55}}}}],["340",{"pageContent":"Introduction\n\nBlade is the simple, yet powerful templating engine that is included with Laravel. Unlike some PHP templating engines, Blade does not restrict you from using plain PHP code in your templates. In fact, all Blade templates are compiled into plain PHP code and cached until they are modified, meaning Blade adds essentially zero overhead to your application. Blade template files use the `.blade.php` file extension and are typically stored in the `resources/views` directory.\n\nBlade views may be returned from routes or controllers using the global `view` helper. Of course, as mentioned in the documentation on [views](/docs/{{version}}/views), data may be passed to the Blade view using the `view` helper's second argument:\n\n    Route::get('/', function () {\n        return view('greeting', ['name' => 'Finn']);\n    });\n\n<a name=\"supercharging-blade-with-livewire\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":56,"to":66}}}}],["341",{"pageContent":"Supercharging Blade With Livewire\n\nWant to take your Blade templates to the next level and build dynamic interfaces with ease? Check out [Laravel Livewire](https://livewire.laravel.com). Livewire allows you to write Blade components that are augmented with dynamic functionality that would typically only be possible via frontend frameworks like React or Vue, providing a great approach to building modern, reactive frontends without the complexities, client-side rendering, or build steps of many JavaScript frameworks.\n\n<a name=\"displaying-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":67,"to":71}}}}],["342",{"pageContent":"Displaying Data\n\nYou may display data that is passed to your Blade views by wrapping the variable in curly braces. For example, given the following route:\n\n    Route::get('/', function () {\n        return view('welcome', ['name' => 'Samantha']);\n    });\n\nYou may display the contents of the `name` variable like so:\n\n```blade\nHello, {{ $name }}.\n```\n\n> **Note**  \n> Blade's `{{ }}` echo statements are automatically sent through PHP's `htmlspecialchars` function to prevent XSS attacks.\n\nYou are not limited to displaying the contents of the variables passed to the view. You may also echo the results of any PHP function. In fact, you can put any PHP code you wish inside of a Blade echo statement:\n\n```blade\nThe current UNIX timestamp is {{ time() }}.\n```\n\n<a name=\"html-entity-encoding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":72,"to":95}}}}],["343",{"pageContent":"HTML Entity Encoding\n\nBy default, Blade (and the Laravel `e` function) will double encode HTML entities. If you would like to disable double encoding, call the `Blade::withoutDoubleEncoding` method from the `boot` method of your `AppServiceProvider`:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\Blade;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Blade::withoutDoubleEncoding();\n        }\n    }\n\n<a name=\"displaying-unescaped-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":96,"to":118}}}}],["344",{"pageContent":"Displaying Unescaped Data\n\nBy default, Blade `{{ }}` statements are automatically sent through PHP's `htmlspecialchars` function to prevent XSS attacks. If you do not want your data to be escaped, you may use the following syntax:\n\n```blade\nHello, {!! $name !!}.\n```\n\n> **Warning**  \n> Be very careful when echoing content that is supplied by users of your application. You should typically use the escaped, double curly brace syntax to prevent XSS attacks when displaying user supplied data.\n\n<a name=\"blade-and-javascript-frameworks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":119,"to":130}}}}],["345",{"pageContent":"Blade & JavaScript Frameworks\n\nSince many JavaScript frameworks also use \"curly\" braces to indicate a given expression should be displayed in the browser, you may use the `@` symbol to inform the Blade rendering engine an expression should remain untouched. For example:\n\n```blade\n<h1>Laravel</h1>\n\nHello, @{{ name }}.\n```\n\nIn this example, the `@` symbol will be removed by Blade; however, `{{ name }}` expression will remain untouched by the Blade engine, allowing it to be rendered by your JavaScript framework.\n\nThe `@` symbol may also be used to escape Blade directives:\n\n```blade\n{{-- Blade template --}}\n@@if()\n\n<!-- HTML output -->\n@if()\n```\n\n<a name=\"rendering-json\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":131,"to":153}}}}],["346",{"pageContent":"Rendering JSON\n\nSometimes you may pass an array to your view with the intention of rendering it as JSON in order to initialize a JavaScript variable. For example:\n\n```blade\n<script>\n    var app = <?php echo json_encode($array); ?>;\n</script>\n```\n\nHowever, instead of manually calling `json_encode`, you may use the `Illuminate\\Support\\Js::from` method directive. The `from` method accepts the same arguments as PHP's `json_encode` function; however, it will ensure that the resulting JSON is properly escaped for inclusion within HTML quotes. The `from` method will return a string `JSON.parse` JavaScript statement that will convert the given object or array into a valid JavaScript object:\n\n```blade\n<script>\n    var app = {{ Illuminate\\Support\\Js::from($array) }};\n</script>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":154,"to":169}}}}],["347",{"pageContent":"The latest versions of the Laravel application skeleton include a `Js` facade, which provides convenient access to this functionality within your Blade templates:\n\n```blade\n<script>\n    var app = {{ Js::from($array) }};\n</script>\n```\n\n> **Warning**  \n> You should only use the `Js::from` method to render existing variables as JSON. The Blade templating is based on regular expressions and attempts to pass a complex expression to the directive may cause unexpected failures.\n\n<a name=\"the-at-verbatim-directive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":172,"to":183}}}}],["348",{"pageContent":"The `@verbatim` Directive\n\nIf you are displaying JavaScript variables in a large portion of your template, you may wrap the HTML in the `@verbatim` directive so that you do not have to prefix each Blade echo statement with an `@` symbol:\n\n```blade\n@verbatim\n    <div class=\"container\">\n        Hello, {{ name }}.\n    </div>\n@endverbatim\n```\n\n<a name=\"blade-directives\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":184,"to":196}}}}],["349",{"pageContent":"Blade Directives\n\nIn addition to template inheritance and displaying data, Blade also provides convenient shortcuts for common PHP control structures, such as conditional statements and loops. These shortcuts provide a very clean, terse way of working with PHP control structures while also remaining familiar to their PHP counterparts.\n\n<a name=\"if-statements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":197,"to":201}}}}],["350",{"pageContent":"If Statements\n\nYou may construct `if` statements using the `@if`, `@elseif`, `@else`, and `@endif` directives. These directives function identically to their PHP counterparts:\n\n```blade\n@if (count($records) === 1)\n    I have one record!\n@elseif (count($records) > 1)\n    I have multiple records!\n@else\n    I don't have any records!\n@endif\n```\n\nFor convenience, Blade also provides an `@unless` directive:\n\n```blade\n@unless (Auth::check())\n    You are not signed in.\n@endunless\n```\n\nIn addition to the conditional directives already discussed, the `@isset` and `@empty` directives may be used as convenient shortcuts for their respective PHP functions:\n\n```blade\n@isset($records)\n    // $records is defined and is not null...\n@endisset\n\n@empty($records)\n    // $records is \"empty\"...\n@endempty\n```\n\n<a name=\"authentication-directives\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":202,"to":236}}}}],["351",{"pageContent":"Authentication Directives\n\nThe `@auth` and `@guest` directives may be used to quickly determine if the current user is [authenticated](/docs/{{version}}/authentication) or is a guest:\n\n```blade\n@auth\n    // The user is authenticated...\n@endauth\n\n@guest\n    // The user is not authenticated...\n@endguest\n```\n\nIf needed, you may specify the authentication guard that should be checked when using the `@auth` and `@guest` directives:\n\n```blade\n@auth('admin')\n    // The user is authenticated...\n@endauth\n\n@guest('admin')\n    // The user is not authenticated...\n@endguest\n```\n\n<a name=\"environment-directives\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":237,"to":263}}}}],["352",{"pageContent":"Environment Directives\n\nYou may check if the application is running in the production environment using the `@production` directive:\n\n```blade\n@production\n    // Production specific content...\n@endproduction\n```\n\nOr, you may determine if the application is running in a specific environment using the `@env` directive:\n\n```blade\n@env('staging')\n    // The application is running in \"staging\"...\n@endenv\n\n@env(['staging', 'production'])\n    // The application is running in \"staging\" or \"production\"...\n@endenv\n```\n\n<a name=\"section-directives\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":264,"to":286}}}}],["353",{"pageContent":"Section Directives\n\nYou may determine if a template inheritance section has content using the `@hasSection` directive:\n\n```blade\n@hasSection('navigation')\n    <div class=\"pull-right\">\n        @yield('navigation')\n    </div>\n\n    <div class=\"clearfix\"></div>\n@endif\n```\n\nYou may use the `sectionMissing` directive to determine if a section does not have content:\n\n```blade\n@sectionMissing('navigation')\n    <div class=\"pull-right\">\n        @include('default-navigation')\n    </div>\n@endif\n```\n\n<a name=\"switch-statements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":287,"to":311}}}}],["354",{"pageContent":"Switch Statements\n\nSwitch statements can be constructed using the `@switch`, `@case`, `@break`, `@default` and `@endswitch` directives:\n\n```blade\n@switch($i)\n    @case(1)\n        First case...\n        @break\n\n    @case(2)\n        Second case...\n        @break\n\n    @default\n        Default case...\n@endswitch\n```\n\n<a name=\"loops\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":312,"to":331}}}}],["355",{"pageContent":"Loops\n\nIn addition to conditional statements, Blade provides simple directives for working with PHP's loop structures. Again, each of these directives functions identically to their PHP counterparts:\n\n```blade\n@for ($i = 0; $i < 10; $i++)\n    The current value is {{ $i }}\n@endfor\n\n@foreach ($users as $user)\n    <p>This is user {{ $user->id }}</p>\n@endforeach\n\n@forelse ($users as $user)\n    <li>{{ $user->name }}</li>\n@empty\n    <p>No users</p>\n@endforelse\n\n@while (true)\n    <p>I'm looping forever.</p>\n@endwhile","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":332,"to":353}}}}],["356",{"pageContent":"> **Note**  \n> While iterating through a `foreach` loop, you may use the [loop variable](#the-loop-variable) to gain valuable information about the loop, such as whether you are in the first or last iteration through the loop.\n\nWhen using loops you may also skip the current iteration or end the loop using the `@continue` and `@break` directives:\n\n```blade\n@foreach ($users as $user)\n    @if ($user->type == 1)\n        @continue\n    @endif\n\n    <li>{{ $user->name }}</li>\n\n    @if ($user->number == 5)\n        @break\n    @endif\n@endforeach\n```\n\nYou may also include the continuation or break condition within the directive declaration:\n\n```blade\n@foreach ($users as $user)\n    @continue($user->type == 1)\n\n    <li>{{ $user->name }}</li>\n\n    @break($user->number == 5)\n@endforeach\n```\n\n<a name=\"the-loop-variable\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":356,"to":387}}}}],["357",{"pageContent":"The Loop Variable\n\nWhile iterating through a `foreach` loop, a `$loop` variable will be available inside of your loop. This variable provides access to some useful bits of information such as the current loop index and whether this is the first or last iteration through the loop:\n\n```blade\n@foreach ($users as $user)\n    @if ($loop->first)\n        This is the first iteration.\n    @endif\n\n    @if ($loop->last)\n        This is the last iteration.\n    @endif\n\n    <p>This is user {{ $user->id }}</p>\n@endforeach\n```\n\nIf you are in a nested loop, you may access the parent loop's `$loop` variable via the `parent` property:\n\n```blade\n@foreach ($users as $user)\n    @foreach ($user->posts as $post)\n        @if ($loop->parent->first)\n            This is the first iteration of the parent loop.\n        @endif\n    @endforeach\n@endforeach","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":388,"to":415}}}}],["358",{"pageContent":"The `$loop` variable also contains a variety of other useful properties:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":418,"to":418}}}}],["359",{"pageContent":"| Property           | Description                                            |\n|--------------------|--------------------------------------------------------|\n| `$loop->index`     | The index of the current loop iteration (starts at 0). |\n| `$loop->iteration` | The current loop iteration (starts at 1).              |\n| `$loop->remaining` | The iterations remaining in the loop.                  |\n| `$loop->count`     | The total number of items in the array being iterated. |\n| `$loop->first`     | Whether this is the first iteration through the loop.  |\n| `$loop->last`      | Whether this is the last iteration through the loop.   |\n| `$loop->even`      | Whether this is an even iteration through the loop.    |\n| `$loop->odd`       | Whether this is an odd iteration through the loop.     |\n| `$loop->depth`     | The nesting level of the current loop.                 |\n| `$loop->parent`    | When in a nested loop, the parent's loop variable.     |\n\n<a name=\"conditional-classes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":420,"to":433}}}}],["360",{"pageContent":"Conditional Classes & Styles\n\nThe `@class` directive conditionally compiles a CSS class string. The directive accepts an array of classes where the array key contains the class or classes you wish to add, while the value is a boolean expression. If the array element has a numeric key, it will always be included in the rendered class list:\n\n```blade\n@php\n    $isActive = false;\n    $hasError = true;\n@endphp\n\n<span @class([\n    'p-4',\n    'font-bold' => $isActive,\n    'text-gray-500' => ! $isActive,\n    'bg-red' => $hasError,\n])></span>\n\n<span class=\"p-4 text-gray-500 bg-red\"></span>\n```\n\nLikewise, the `@style` directive may be used to conditionally add inline CSS styles to an HTML element:\n\n```blade\n@php\n    $isActive = true;\n@endphp\n\n<span @style([\n    'background-color: red',\n    'font-weight: bold' => $isActive,\n])></span>\n\n<span style=\"background-color: red; font-weight: bold;\"></span>\n```\n\n<a name=\"additional-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":434,"to":469}}}}],["361",{"pageContent":"Additional Attributes\n\nFor convenience, you may use the `@checked` directive to easily indicate if a given HTML checkbox input is \"checked\". This directive will echo `checked` if the provided condition evaluates to `true`:\n\n```blade\n<input type=\"checkbox\"\n        name=\"active\"\n        value=\"active\"\n        @checked(old('active', $user->active)) />\n```\n\nLikewise, the `@selected` directive may be used to indicate if a given select option should be \"selected\":\n\n```blade\n<select name=\"version\">\n    @foreach ($product->versions as $version)\n        <option value=\"{{ $version }}\" @selected(old('version') == $version)>\n            {{ $version }}\n        </option>\n    @endforeach\n</select>\n```\n\nAdditionally, the `@disabled` directive may be used to indicate if a given element should be \"disabled\":\n\n```blade\n<button type=\"submit\" @disabled($errors->isNotEmpty())>Submit</button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":470,"to":496}}}}],["362",{"pageContent":"Additionally, the `@disabled` directive may be used to indicate if a given element should be \"disabled\":\n\n```blade\n<button type=\"submit\" @disabled($errors->isNotEmpty())>Submit</button>\n```\n\nMoreover, the `@readonly` directive may be used to indicate if a given element should be \"readonly\":\n\n```blade\n<input type=\"email\"\n        name=\"email\"\n        value=\"email@laravel.com\"\n        @readonly($user->isNotAdmin()) />\n```\n\nIn addition, the `@required` directive may be used to indicate if a given element should be \"required\":\n\n```blade\n<input type=\"text\"\n        name=\"title\"\n        value=\"title\"\n        @required($user->isAdmin()) />\n```\n\n<a name=\"including-subviews\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":496,"to":520}}}}],["363",{"pageContent":"Including Subviews\n\n> **Note**  \n> While you're free to use the `@include` directive, Blade [components](#components) provide similar functionality and offer several benefits over the `@include` directive such as data and attribute binding.\n\nBlade's `@include` directive allows you to include a Blade view from within another view. All variables that are available to the parent view will be made available to the included view:\n\n```blade\n<div>\n    @include('shared.errors')\n\n    <form>\n        <!-- Form Contents -->\n    </form>\n</div>\n```\n\nEven though the included view will inherit all data available in the parent view, you may also pass an array of additional data that should be made available to the included view:\n\n```blade\n@include('view.name', ['status' => 'complete'])","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":521,"to":541}}}}],["364",{"pageContent":"If you attempt to `@include` a view which does not exist, Laravel will throw an error. If you would like to include a view that may or may not be present, you should use the `@includeIf` directive:\n\n```blade\n@includeIf('view.name', ['status' => 'complete'])\n```\n\nIf you would like to `@include` a view if a given boolean expression evaluates to `true` or `false`, you may use the `@includeWhen` and `@includeUnless` directives:\n\n```blade\n@includeWhen($boolean, 'view.name', ['status' => 'complete'])\n\n@includeUnless($boolean, 'view.name', ['status' => 'complete'])\n```\n\nTo include the first view that exists from a given array of views, you may use the `includeFirst` directive:\n\n```blade\n@includeFirst(['custom.admin', 'admin'], ['status' => 'complete'])\n```\n\n> **Warning**  \n> You should avoid using the `__DIR__` and `__FILE__` constants in your Blade views, since they will refer to the location of the cached, compiled view.\n\n<a name=\"rendering-views-for-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":544,"to":567}}}}],["365",{"pageContent":"Rendering Views For Collections\n\nYou may combine loops and includes into one line with Blade's `@each` directive:\n\n```blade\n@each('view.name', $jobs, 'job')\n```\n\nThe `@each` directive's first argument is the view to render for each element in the array or collection. The second argument is the array or collection you wish to iterate over, while the third argument is the variable name that will be assigned to the current iteration within the view. So, for example, if you are iterating over an array of `jobs`, typically you will want to access each job as a `job` variable within the view. The array key for the current iteration will be available as the `key` variable within the view.\n\nYou may also pass a fourth argument to the `@each` directive. This argument determines the view that will be rendered if the given array is empty.\n\n```blade\n@each('view.name', $jobs, 'job', 'view.empty')","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":568,"to":581}}}}],["366",{"pageContent":"> **Warning**  \n> Views rendered via `@each` do not inherit the variables from the parent view. If the child view requires these variables, you should use the `@foreach` and `@include` directives instead.\n\n<a name=\"the-once-directive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":584,"to":587}}}}],["367",{"pageContent":"The `@once` Directive\n\nThe `@once` directive allows you to define a portion of the template that will only be evaluated once per rendering cycle. This may be useful for pushing a given piece of JavaScript into the page's header using [stacks](#stacks). For example, if you are rendering a given [component](#components) within a loop, you may wish to only push the JavaScript to the header the first time the component is rendered:\n\n```blade\n@once\n    @push('scripts')\n        <script>\n            // Your custom JavaScript...\n        </script>\n    @endpush\n@endonce\n```\n\nSince the `@once` directive is often used in conjunction with the `@push` or `@prepend` directives, the `@pushOnce` and `@prependOnce` directives are available for your convenience:\n\n```blade\n@pushOnce('scripts')\n    <script>\n        // Your custom JavaScript...\n    </script>\n@endPushOnce\n```\n\n<a name=\"raw-php\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":588,"to":612}}}}],["368",{"pageContent":"Raw PHP\n\nIn some situations, it's useful to embed PHP code into your views. You can use the Blade `@php` directive to execute a block of plain PHP within your template:\n\n```blade\n@php\n    $counter = 1;\n@endphp\n```\n\n<a name=\"comments\"></a>\n### Comments\n\nBlade also allows you to define comments in your views. However, unlike HTML comments, Blade comments are not included in the HTML returned by your application:\n\n```blade\n{{-- This comment will not be present in the rendered HTML --}}\n```\n\n<a name=\"components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":613,"to":632}}}}],["369",{"pageContent":"Components\n\nComponents and slots provide similar benefits to sections, layouts, and includes; however, some may find the mental model of components and slots easier to understand. There are two approaches to writing components: class based components and anonymous components.\n\nTo create a class based component, you may use the `make:component` Artisan command. To illustrate how to use components, we will create a simple `Alert` component. The `make:component` command will place the component in the `app/View/Components` directory:\n\n```shell\nphp artisan make:component Alert","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":633,"to":640}}}}],["370",{"pageContent":"The `make:component` command will also create a view template for the component. The view will be placed in the `resources/views/components` directory. When writing components for your own application, components are automatically discovered within the `app/View/Components` directory and `resources/views/components` directory, so no further component registration is typically required.\n\nYou may also create components within subdirectories:\n\n```shell\nphp artisan make:component Forms/Input\n```\n\nThe command above will create an `Input` component in the `app/View/Components/Forms` directory and the view will be placed in the `resources/views/components/forms` directory.\n\nIf you would like to create an anonymous component (a component with only a Blade template and no class), you may use the `--view` flag when invoking the `make:component` command:\n\n```shell\nphp artisan make:component forms.input --view","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":643,"to":656}}}}],["371",{"pageContent":"The command above will create a Blade file at `resources/views/components/forms/input.blade.php` which can be rendered as a component via `<x-forms.input />`.\n\n<a name=\"manually-registering-package-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":659,"to":661}}}}],["372",{"pageContent":"Manually Registering Package Components\n\nWhen writing components for your own application, components are automatically discovered within the `app/View/Components` directory and `resources/views/components` directory.\n\nHowever, if you are building a package that utilizes Blade components, you will need to manually register your component class and its HTML tag alias. You should typically register your components in the `boot` method of your package's service provider:\n\n    use Illuminate\\Support\\Facades\\Blade;\n\n    /**\n     * Bootstrap your package's services.\n     */\n    public function boot(): void\n    {\n        Blade::component('package-alert', Alert::class);\n    }\n\nOnce your component has been registered, it may be rendered using its tag alias:\n\n```blade\n<x-package-alert/>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":662,"to":681}}}}],["373",{"pageContent":"Alternatively, you may use the `componentNamespace` method to autoload component classes by convention. For example, a `Nightshade` package might have `Calendar` and `ColorPicker` components that reside within the `Package\\Views\\Components` namespace:\n\n    use Illuminate\\Support\\Facades\\Blade;\n\n    /**\n     * Bootstrap your package's services.\n     */\n    public function boot(): void\n    {\n        Blade::componentNamespace('Nightshade\\\\Views\\\\Components', 'nightshade');\n    }\n\nThis will allow the usage of package components by their vendor namespace using the `package-name::` syntax:\n\n```blade\n<x-nightshade::calendar />\n<x-nightshade::color-picker />\n```\n\nBlade will automatically detect the class that's linked to this component by pascal-casing the component name. Subdirectories are also supported using \"dot\" notation.\n\n<a name=\"rendering-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":684,"to":705}}}}],["374",{"pageContent":"Rendering Components\n\nTo display a component, you may use a Blade component tag within one of your Blade templates. Blade component tags start with the string `x-` followed by the kebab case name of the component class:\n\n```blade\n<x-alert/>\n\n<x-user-profile/>\n```\n\nIf the component class is nested deeper within the `app/View/Components` directory, you may use the `.` character to indicate directory nesting. For example, if we assume a component is located at `app/View/Components/Inputs/Button.php`, we may render it like so:\n\n```blade\n<x-inputs.button/>\n```\n\nIf you would like to conditionally render your component, you may define a `shouldRender` method on your component class. If the `shouldRender` method returns `false` the component will not be rendered:\n\n    use Illuminate\\Support\\Str;\n\n    /**\n     * Whether the component should be rendered\n     */\n    public function shouldRender(): bool\n    {\n        return Str::length($this->message) > 0;\n    }\n\n<a name=\"passing-data-to-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":706,"to":734}}}}],["375",{"pageContent":"Passing Data To Components\n\nYou may pass data to Blade components using HTML attributes. Hard-coded, primitive values may be passed to the component using simple HTML attribute strings. PHP expressions and variables should be passed to the component via attributes that use the `:` character as a prefix:\n\n```blade\n<x-alert type=\"error\" :message=\"$message\"/>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":735,"to":740}}}}],["376",{"pageContent":"You should define all of the component's data attributes in its class constructor. All public properties on a component will automatically be made available to the component's view. It is not necessary to pass the data to the view from the component's `render` method:\n\n    <?php\n\n    namespace App\\View\\Components;\n\n    use Illuminate\\View\\Component;\n    use Illuminate\\View\\View;\n\n    class Alert extends Component\n    {\n        /**\n         * Create the component instance.\n         */\n        public function __construct(\n            public string $type,\n            public string $message,\n        ) {}\n\n        /**\n         * Get the view / contents that represent the component.\n         */\n        public function render(): View\n        {\n            return view('components.alert');\n        }\n    }\n\nWhen your component is rendered, you may display the contents of your component's public variables by echoing the variables by name:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":743,"to":771}}}}],["377",{"pageContent":"When your component is rendered, you may display the contents of your component's public variables by echoing the variables by name:\n\n```blade\n<div class=\"alert alert-{{ $type }}\">\n    {{ $message }}\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":771,"to":776}}}}],["378",{"pageContent":"<a name=\"casing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":779,"to":779}}}}],["379",{"pageContent":"Casing\n\nComponent constructor arguments should be specified using `camelCase`, while `kebab-case` should be used when referencing the argument names in your HTML attributes. For example, given the following component constructor:\n\n    /**\n     * Create the component instance.\n     */\n    public function __construct(\n        public string $alertType,\n    ) {}\n\nThe `$alertType` argument may be provided to the component like so:\n\n```blade\n<x-alert alert-type=\"danger\" />\n```\n\n<a name=\"short-attribute-syntax\"></a>\n#### Short Attribute Syntax\n\nWhen passing attributes to components, you may also use a \"short attribute\" syntax. This is often convenient since attribute names frequently match the variable names they correspond to:\n\n```blade\n{{-- Short attribute syntax... --}}\n<x-profile :$userId :$name />\n\n{{-- Is equivalent to... --}}\n<x-profile :user-id=\"$userId\" :name=\"$name\" />\n```\n\n<a name=\"escaping-attribute-rendering\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":780,"to":810}}}}],["380",{"pageContent":"Escaping Attribute Rendering\n\nSince some JavaScript frameworks such as Alpine.js also use colon-prefixed attributes, you may use a double colon (`::`) prefix to inform Blade that the attribute is not a PHP expression. For example, given the following component:\n\n```blade\n<x-button ::class=\"{ danger: isDeleting }\">\n    Submit\n</x-button>\n```\n\nThe following HTML will be rendered by Blade:\n\n```blade\n<button :class=\"{ danger: isDeleting }\">\n    Submit\n</button>\n```\n\n<a name=\"component-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":811,"to":829}}}}],["381",{"pageContent":"Component Methods\n\nIn addition to public variables being available to your component template, any public methods on the component may be invoked. For example, imagine a component that has an `isSelected` method:\n\n    /**\n     * Determine if the given option is the currently selected option.\n     */\n    public function isSelected(string $option): bool\n    {\n        return $option === $this->selected;\n    }\n\nYou may execute this method from your component template by invoking the variable matching the name of the method:\n\n```blade\n<option {{ $isSelected($value) ? 'selected' : '' }} value=\"{{ $value }}\">\n    {{ $label }}\n</option>\n```\n\n<a name=\"using-attributes-slots-within-component-class\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":830,"to":850}}}}],["382",{"pageContent":"Accessing Attributes & Slots Within Component Classes\n\nBlade components also allow you to access the component name, attributes, and slot inside the class's render method. However, in order to access this data, you should return a closure from your component's `render` method. The closure will receive a `$data` array as its only argument. This array will contain several elements that provide information about the component:\n\n    use Closure;\n\n    /**\n     * Get the view / contents that represent the component.\n     */\n    public function render(): Closure\n    {\n        return function (array $data) {\n            // $data['componentName'];\n            // $data['attributes'];\n            // $data['slot'];\n\n            return '<div>Components content</div>';\n        };\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":851,"to":869}}}}],["383",{"pageContent":"return '<div>Components content</div>';\n        };\n    }\n\nThe `componentName` is equal to the name used in the HTML tag after the `x-` prefix. So `<x-alert />`'s `componentName` will be `alert`. The `attributes` element will contain all of the attributes that were present on the HTML tag. The `slot` element is an `Illuminate\\Support\\HtmlString` instance with the contents of the component's slot.\n\nThe closure should return a string. If the returned string corresponds to an existing view, that view will be rendered; otherwise, the returned string will be evaluated as an inline Blade view.\n\n<a name=\"additional-dependencies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":869,"to":877}}}}],["384",{"pageContent":"Additional Dependencies\n\nIf your component requires dependencies from Laravel's [service container](/docs/{{version}}/container), you may list them before any of the component's data attributes and they will automatically be injected by the container:\n\n```php\nuse App\\Services\\AlertCreator;\n\n/**\n * Create the component instance.\n */\npublic function __construct(\n    public AlertCreator $creator,\n    public string $type,\n    public string $message,\n) {}\n```\n\n<a name=\"hiding-attributes-and-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":878,"to":895}}}}],["385",{"pageContent":"Hiding Attributes / Methods\n\nIf you would like to prevent some public methods or properties from being exposed as variables to your component template, you may add them to an `$except` array property on your component:\n\n    <?php\n\n    namespace App\\View\\Components;\n\n    use Illuminate\\View\\Component;\n\n    class Alert extends Component\n    {\n        /**\n         * The properties / methods that should not be exposed to the component template.\n         *\n         * @var array\n         */\n        protected $except = ['type'];\n\n        /**\n         * Create the component instance.\n         */\n        public function __construct(\n            public string $type,\n        ) {}\n    }\n\n<a name=\"component-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":896,"to":923}}}}],["386",{"pageContent":"Component Attributes\n\nWe've already examined how to pass data attributes to a component; however, sometimes you may need to specify additional HTML attributes, such as `class`, that are not part of the data required for a component to function. Typically, you want to pass these additional attributes down to the root element of the component template. For example, imagine we want to render an `alert` component like so:\n\n```blade\n<x-alert type=\"error\" :message=\"$message\" class=\"mt-4\"/>\n```\n\nAll of the attributes that are not part of the component's constructor will automatically be added to the component's \"attribute bag\". This attribute bag is automatically made available to the component via the `$attributes` variable. All of the attributes may be rendered within the component by echoing this variable:\n\n```blade\n<div {{ $attributes }}>\n    <!-- Component content -->\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":924,"to":937}}}}],["387",{"pageContent":"> **Warning**  \n> Using directives such as `@env` within component tags is not supported at this time. For example, `<x-alert :live=\"@env('production')\"/>` will not be compiled.\n\n<a name=\"default-merged-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":940,"to":943}}}}],["388",{"pageContent":"Default / Merged Attributes\n\nSometimes you may need to specify default values for attributes or merge additional values into some of the component's attributes. To accomplish this, you may use the attribute bag's `merge` method. This method is particularly useful for defining a set of default CSS classes that should always be applied to a component:\n\n```blade\n<div {{ $attributes->merge(['class' => 'alert alert-'.$type]) }}>\n    {{ $message }}\n</div>\n```\n\nIf we assume this component is utilized like so:\n\n```blade\n<x-alert type=\"error\" :message=\"$message\" class=\"mb-4\"/>\n```\n\nThe final, rendered HTML of the component will appear like the following:\n\n```blade\n<div class=\"alert alert-error mb-4\">\n    <!-- Contents of the $message variable -->\n</div>\n```\n\n<a name=\"conditionally-merge-classes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":944,"to":968}}}}],["389",{"pageContent":"Conditionally Merge Classes\n\nSometimes you may wish to merge classes if a given condition is `true`. You can accomplish this via the `class` method, which accepts an array of classes where the array key contains the class or classes you wish to add, while the value is a boolean expression. If the array element has a numeric key, it will always be included in the rendered class list:\n\n```blade\n<div {{ $attributes->class(['p-4', 'bg-red' => $hasError]) }}>\n    {{ $message }}\n</div>\n```\n\nIf you need to merge other attributes onto your component, you can chain the `merge` method onto the `class` method:\n\n```blade\n<button {{ $attributes->class(['p-4'])->merge(['type' => 'button']) }}>\n    {{ $slot }}\n</button>\n```\n\n> **Note**  \n> If you need to conditionally compile classes on other HTML elements that shouldn't receive merged attributes, you can use the [`@class` directive](#conditional-classes).\n\n<a name=\"non-class-attribute-merging\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":969,"to":990}}}}],["390",{"pageContent":"Non-Class Attribute Merging\n\nWhen merging attributes that are not `class` attributes, the values provided to the `merge` method will be considered the \"default\" values of the attribute. However, unlike the `class` attribute, these attributes will not be merged with injected attribute values. Instead, they will be overwritten. For example, a `button` component's implementation may look like the following:\n\n```blade\n<button {{ $attributes->merge(['type' => 'button']) }}>\n    {{ $slot }}\n</button>\n```\n\nTo render the button component with a custom `type`, it may be specified when consuming the component. If no type is specified, the `button` type will be used:\n\n```blade\n<x-button type=\"submit\">\n    Submit\n</x-button>\n```\n\nThe rendered HTML of the `button` component in this example would be:\n\n```blade\n<button type=\"submit\">\n    Submit\n</button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":991,"to":1014}}}}],["391",{"pageContent":"The rendered HTML of the `button` component in this example would be:\n\n```blade\n<button type=\"submit\">\n    Submit\n</button>\n```\n\nIf you would like an attribute other than `class` to have its default value and injected values joined together, you may use the `prepends` method. In this example, the `data-controller` attribute will always begin with `profile-controller` and any additional injected `data-controller` values will be placed after this default value:\n\n```blade\n<div {{ $attributes->merge(['data-controller' => $attributes->prepends('profile-controller')]) }}>\n    {{ $slot }}\n</div>\n```\n\n<a name=\"filtering-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1014,"to":1030}}}}],["392",{"pageContent":"Retrieving & Filtering Attributes\n\nYou may filter attributes using the `filter` method. This method accepts a closure which should return `true` if you wish to retain the attribute in the attribute bag:\n\n```blade\n{{ $attributes->filter(fn (string $value, string $key) => $key == 'foo') }}\n```\n\nFor convenience, you may use the `whereStartsWith` method to retrieve all attributes whose keys begin with a given string:\n\n```blade\n{{ $attributes->whereStartsWith('wire:model') }}\n```\n\nConversely, the `whereDoesntStartWith` method may be used to exclude all attributes whose keys begin with a given string:\n\n```blade\n{{ $attributes->whereDoesntStartWith('wire:model') }}\n```\n\nUsing the `first` method, you may render the first attribute in a given attribute bag:\n\n```blade\n{{ $attributes->whereStartsWith('wire:model')->first() }}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1031,"to":1054}}}}],["393",{"pageContent":"Using the `first` method, you may render the first attribute in a given attribute bag:\n\n```blade\n{{ $attributes->whereStartsWith('wire:model')->first() }}\n```\n\nIf you would like to check if an attribute is present on the component, you may use the `has` method. This method accepts the attribute name as its only argument and returns a boolean indicating whether or not the attribute is present:\n\n```blade\n@if ($attributes->has('class'))\n    <div>Class attribute is present</div>\n@endif\n```\n\nIf an array is passed to the `has` method, the method will determine if all of the given attributes are present on the component:\n\n```blade\n@if ($attributes->has(['name', 'class']))\n    <div>All of the attributes are present</div>\n@endif\n```\n\nThe `hasAny` method may be used to determine if any of the given attributes are present on the component:\n\n```blade\n@if ($attributes->hasAny(['href', ':href', 'v-bind:href']))\n    <div>One of the attributes is present</div>\n@endif","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1054,"to":1081}}}}],["394",{"pageContent":"You may retrieve a specific attribute's value using the `get` method:\n\n```blade\n{{ $attributes->get('class') }}\n```\n\n<a name=\"reserved-keywords\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1084,"to":1090}}}}],["395",{"pageContent":"Reserved Keywords\n\nBy default, some keywords are reserved for Blade's internal use in order to render components. The following keywords cannot be defined as public properties or method names within your components:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- `data`\n- `render`\n- `resolveView`\n- `shouldRender`\n- `view`\n- `withAttributes`\n- `withName`\n\n</div>\n\n<a name=\"slots\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1091,"to":1107}}}}],["396",{"pageContent":"Slots\n\nYou will often need to pass additional content to your component via \"slots\". Component slots are rendered by echoing the `$slot` variable. To explore this concept, let's imagine that an `alert` component has the following markup:\n\n```blade\n<!-- /resources/views/components/alert.blade.php -->\n\n<div class=\"alert alert-danger\">\n    {{ $slot }}\n</div>\n```\n\nWe may pass content to the `slot` by injecting content into the component:\n\n```blade\n<x-alert>\n    <strong>Whoops!</strong> Something went wrong!\n</x-alert>\n```\n\nSometimes a component may need to render multiple different slots in different locations within the component. Let's modify our alert component to allow for the injection of a \"title\" slot:\n\n```blade\n<!-- /resources/views/components/alert.blade.php -->\n\n<span class=\"alert-title\">{{ $title }}</span>\n\n<div class=\"alert alert-danger\">\n    {{ $slot }}\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1108,"to":1137}}}}],["397",{"pageContent":"You may define the content of the named slot using the `x-slot` tag. Any content not within an explicit `x-slot` tag will be passed to the component in the `$slot` variable:\n\n```xml\n<x-alert>\n    <x-slot:title>\n        Server Error\n    </x-slot>\n\n    <strong>Whoops!</strong> Something went wrong!\n</x-alert>\n```\n\n<a name=\"scoped-slots\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1140,"to":1152}}}}],["398",{"pageContent":"Scoped Slots\n\nIf you have used a JavaScript framework such as Vue, you may be familiar with \"scoped slots\", which allow you to access data or methods from the component within your slot. You may achieve similar behavior in Laravel by defining public methods or properties on your component and accessing the component within your slot via the `$component` variable. In this example, we will assume that the `x-alert` component has a public `formatAlert` method defined on its component class:\n\n```blade\n<x-alert>\n    <x-slot:title>\n        {{ $component->formatAlert('Server Error') }}\n    </x-slot>\n\n    <strong>Whoops!</strong> Something went wrong!\n</x-alert>\n```\n\n<a name=\"slot-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1153,"to":1167}}}}],["399",{"pageContent":"Slot Attributes\n\nLike Blade components, you may assign additional [attributes](#component-attributes) to slots such as CSS class names:\n\n```xml\n<x-card class=\"shadow-sm\">\n    <x-slot:heading class=\"font-bold\">\n        Heading\n    </x-slot>\n\n    Content\n\n    <x-slot:footer class=\"text-sm\">\n        Footer\n    </x-slot>\n</x-card>\n```\n\nTo interact with slot attributes, you may access the `attributes` property of the slot's variable. For more information on how to interact with attributes, please consult the documentation on [component attributes](#component-attributes):\n\n```blade\n@props([\n    'heading',\n    'footer',\n])\n\n<div {{ $attributes->class(['border']) }}>\n    <h1 {{ $heading->attributes->class(['text-lg']) }}>\n        {{ $heading }}\n    </h1>\n\n    {{ $slot }}\n\n    <footer {{ $footer->attributes->class(['text-gray-700']) }}>\n        {{ $footer }}\n    </footer>\n</div>\n```\n\n<a name=\"inline-component-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1168,"to":1207}}}}],["400",{"pageContent":"Inline Component Views\n\nFor very small components, it may feel cumbersome to manage both the component class and the component's view template. For this reason, you may return the component's markup directly from the `render` method:\n\n    /**\n     * Get the view / contents that represent the component.\n     */\n    public function render(): string\n    {\n        return <<<'blade'\n            <div class=\"alert alert-danger\">\n                {{ $slot }}\n            </div>\n        blade;\n    }\n\n<a name=\"generating-inline-view-components\"></a>\n#### Generating Inline View Components\n\nTo create a component that renders an inline view, you may use the `inline` option when executing the `make:component` command:\n\n```shell\nphp artisan make:component Alert --inline\n```\n\n<a name=\"dynamic-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1208,"to":1233}}}}],["401",{"pageContent":"Dynamic Components\n\nSometimes you may need to render a component but not know which component should be rendered until runtime. In this situation, you may use Laravel's built-in `dynamic-component` component to render the component based on a runtime value or variable:\n\n```blade\n// $componentName = \"secondary-button\";\n\n<x-dynamic-component :component=\"$componentName\" class=\"mt-4\" />\n```\n\n<a name=\"manually-registering-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1234,"to":1244}}}}],["402",{"pageContent":"Manually Registering Components\n\n> **Warning**  \n> The following documentation on manually registering components is primarily applicable to those who are writing Laravel packages that include view components. If you are not writing a package, this portion of the component documentation may not be relevant to you.\n\nWhen writing components for your own application, components are automatically discovered within the `app/View/Components` directory and `resources/views/components` directory.\n\nHowever, if you are building a package that utilizes Blade components or placing components in non-conventional directories, you will need to manually register your component class and its HTML tag alias so that Laravel knows where to find the component. You should typically register your components in the `boot` method of your package's service provider:\n\n    use Illuminate\\Support\\Facades\\Blade;\n    use VendorPackage\\View\\Components\\AlertComponent;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1245,"to":1255}}}}],["403",{"pageContent":"use Illuminate\\Support\\Facades\\Blade;\n    use VendorPackage\\View\\Components\\AlertComponent;\n\n    /**\n     * Bootstrap your package's services.\n     */\n    public function boot(): void\n    {\n        Blade::component('package-alert', AlertComponent::class);\n    }\n\nOnce your component has been registered, it may be rendered using its tag alias:\n\n```blade\n<x-package-alert/>\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1255,"to":1270}}}}],["404",{"pageContent":"Autoloading Package Components\n\nAlternatively, you may use the `componentNamespace` method to autoload component classes by convention. For example, a `Nightshade` package might have `Calendar` and `ColorPicker` components that reside within the `Package\\Views\\Components` namespace:\n\n    use Illuminate\\Support\\Facades\\Blade;\n\n    /**\n     * Bootstrap your package's services.\n     */\n    public function boot(): void\n    {\n        Blade::componentNamespace('Nightshade\\\\Views\\\\Components', 'nightshade');\n    }\n\nThis will allow the usage of package components by their vendor namespace using the `package-name::` syntax:\n\n```blade\n<x-nightshade::calendar />\n<x-nightshade::color-picker />\n```\n\nBlade will automatically detect the class that's linked to this component by pascal-casing the component name. Subdirectories are also supported using \"dot\" notation.\n\n<a name=\"anonymous-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1272,"to":1295}}}}],["405",{"pageContent":"Anonymous Components\n\nSimilar to inline components, anonymous components provide a mechanism for managing a component via a single file. However, anonymous components utilize a single view file and have no associated class. To define an anonymous component, you only need to place a Blade template within your `resources/views/components` directory. For example, assuming you have defined a component at `resources/views/components/alert.blade.php`, you may simply render it like so:\n\n```blade\n<x-alert/>\n```\n\nYou may use the `.` character to indicate if a component is nested deeper inside the `components` directory. For example, assuming the component is defined at `resources/views/components/inputs/button.blade.php`, you may render it like so:\n\n```blade\n<x-inputs.button/>\n```\n\n<a name=\"anonymous-index-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1296,"to":1310}}}}],["406",{"pageContent":"Anonymous Index Components\n\nSometimes, when a component is made up of many Blade templates, you may wish to group the given component's templates within a single directory. For example, imagine an \"accordion\" component with the following directory structure:\n\n```none\n/resources/views/components/accordion.blade.php\n/resources/views/components/accordion/item.blade.php\n```\n\nThis directory structure allows you to render the accordion component and its item like so:\n\n```blade\n<x-accordion>\n    <x-accordion.item>\n        ...\n    </x-accordion.item>\n</x-accordion>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1311,"to":1327}}}}],["407",{"pageContent":"This directory structure allows you to render the accordion component and its item like so:\n\n```blade\n<x-accordion>\n    <x-accordion.item>\n        ...\n    </x-accordion.item>\n</x-accordion>\n```\n\nHowever, in order to render the accordion component via `x-accordion`, we were forced to place the \"index\" accordion component template in the `resources/views/components` directory instead of nesting it within the `accordion` directory with the other accordion related templates.\n\nThankfully, Blade allows you to place an `index.blade.php` file within a component's template directory. When an `index.blade.php` template exists for the component, it will be rendered as the \"root\" node of the component. So, we can continue to use the same Blade syntax given in the example above; however, we will adjust our directory structure like so:\n\n```none\n/resources/views/components/accordion/index.blade.php\n/resources/views/components/accordion/item.blade.php\n```\n\n<a name=\"data-properties-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1327,"to":1346}}}}],["408",{"pageContent":"Data Properties / Attributes\n\nSince anonymous components do not have any associated class, you may wonder how you may differentiate which data should be passed to the component as variables and which attributes should be placed in the component's [attribute bag](#component-attributes).\n\nYou may specify which attributes should be considered data variables using the `@props` directive at the top of your component's Blade template. All other attributes on the component will be available via the component's attribute bag. If you wish to give a data variable a default value, you may specify the variable's name as the array key and the default value as the array value:\n\n```blade\n<!-- /resources/views/components/alert.blade.php -->\n\n@props(['type' => 'info', 'message'])\n\n<div {{ $attributes->merge(['class' => 'alert alert-'.$type]) }}>\n    {{ $message }}\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1347,"to":1360}}}}],["409",{"pageContent":"Given the component definition above, we may render the component like so:\n\n```blade\n<x-alert type=\"error\" :message=\"$message\" class=\"mb-4\"/>\n```\n\n<a name=\"accessing-parent-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1363,"to":1369}}}}],["410",{"pageContent":"Accessing Parent Data\n\nSometimes you may want to access data from a parent component inside a child component. In these cases, you may use the `@aware` directive. For example, imagine we are building a complex menu component consisting of a parent `<x-menu>` and child `<x-menu.item>`:\n\n```blade\n<x-menu color=\"purple\">\n    <x-menu.item>...</x-menu.item>\n    <x-menu.item>...</x-menu.item>\n</x-menu>\n```\n\nThe `<x-menu>` component may have an implementation like the following:\n\n```blade\n<!-- /resources/views/components/menu/index.blade.php -->\n\n@props(['color' => 'gray'])\n\n<ul {{ $attributes->merge(['class' => 'bg-'.$color.'-200']) }}>\n    {{ $slot }}\n</ul>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1370,"to":1390}}}}],["411",{"pageContent":"Because the `color` prop was only passed into the parent (`<x-menu>`), it won't be available inside `<x-menu.item>`. However, if we use the `@aware` directive, we can make it available inside `<x-menu.item>` as well:\n\n```blade\n<!-- /resources/views/components/menu/item.blade.php -->\n\n@aware(['color' => 'gray'])\n\n<li {{ $attributes->merge(['class' => 'text-'.$color.'-800']) }}>\n    {{ $slot }}\n</li>\n```\n\n> **Warning**  \n> The `@aware` directive can not access parent data that is not explicitly passed to the parent component via HTML attributes. Default `@props` values that are not explicitly passed to the parent component can not be accessed by the `@aware` directive.\n\n<a name=\"anonymous-component-paths\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1393,"to":1408}}}}],["412",{"pageContent":"Anonymous Component Paths\n\nAs previously discussed, anonymous components are typically defined by placing a Blade template within your `resources/views/components` directory. However, you may occasionally want to register other anonymous component paths with Laravel in addition to the default path.\n\nThe `anonymousComponentPath` method accepts the \"path\" to the anonymous component location as its first argument and an optional \"namespace\" that components should be placed under as its second argument. Typically, this method should be called from the `boot` method of one of your application's [service providers](/docs/{{version}}/providers):\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Blade::anonymousComponentPath(__DIR__.'/../components');\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1409,"to":1421}}}}],["413",{"pageContent":"/**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Blade::anonymousComponentPath(__DIR__.'/../components');\n    }\n\nWhen component paths are registered without a specified prefix as in the example above, they may be rendered in your Blade components without a corresponding prefix as well. For example, if a `panel.blade.php` component exists in the path registered above, it may be rendered like so:\n\n```blade\n<x-panel />","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1421,"to":1432}}}}],["414",{"pageContent":"Prefix \"namespaces\" may be provided as the second argument to the `anonymousComponentPath` method:\n\n    Blade::anonymousComponentPath(__DIR__.'/../components', 'dashboard');\n\nWhen a prefix is provided, components within that \"namespace\" may be rendered by prefixing to the component's namespace to the component name when the component is rendered:\n\n```blade\n<x-dashboard::panel />\n```\n\n<a name=\"building-layouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1435,"to":1445}}}}],["415",{"pageContent":"Building Layouts\n\n<a name=\"layouts-using-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1446,"to":1448}}}}],["416",{"pageContent":"Layouts Using Components\n\nMost web applications maintain the same general layout across various pages. It would be incredibly cumbersome and hard to maintain our application if we had to repeat the entire layout HTML in every view we create. Thankfully, it's convenient to define this layout as a single [Blade component](#components) and then use it throughout our application.\n\n<a name=\"defining-the-layout-component\"></a>\n#### Defining The Layout Component\n\nFor example, imagine we are building a \"todo\" list application. We might define a `layout` component that looks like the following:\n\n```blade\n<!-- resources/views/components/layout.blade.php -->\n\n<html>\n    <head>\n        <title>{{ $title ?? 'Todo Manager' }}</title>\n    </head>\n    <body>\n        <h1>Todos</h1>\n        <hr/>\n        {{ $slot }}\n    </body>\n</html>\n```\n\n<a name=\"applying-the-layout-component\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1449,"to":1473}}}}],["417",{"pageContent":"Applying The Layout Component\n\nOnce the `layout` component has been defined, we may create a Blade view that utilizes the component. In this example, we will define a simple view that displays our task list:\n\n```blade\n<!-- resources/views/tasks.blade.php -->\n\n<x-layout>\n    @foreach ($tasks as $task)\n        {{ $task }}\n    @endforeach\n</x-layout>\n```\n\nRemember, content that is injected into a component will be supplied to the default `$slot` variable within our `layout` component. As you may have noticed, our `layout` also respects a `$title` slot if one is provided; otherwise, a default title is shown. We may inject a custom title from our task list view using the standard slot syntax discussed in the [component documentation](#components):\n\n```blade\n<!-- resources/views/tasks.blade.php -->\n\n<x-layout>\n    <x-slot:title>\n        Custom Title\n    </x-slot>\n\n    @foreach ($tasks as $task)\n        {{ $task }}\n    @endforeach\n</x-layout>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1474,"to":1501}}}}],["418",{"pageContent":"Now that we have defined our layout and task list views, we just need to return the `task` view from a route:\n\n    use App\\Models\\Task;\n\n    Route::get('/tasks', function () {\n        return view('tasks', ['tasks' => Task::all()]);\n    });\n\n<a name=\"layouts-using-template-inheritance\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1504,"to":1512}}}}],["419",{"pageContent":"Layouts Using Template Inheritance\n\n<a name=\"defining-a-layout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1513,"to":1515}}}}],["420",{"pageContent":"Defining A Layout\n\nLayouts may also be created via \"template inheritance\". This was the primary way of building applications prior to the introduction of [components](#components).\n\nTo get started, let's take a look at a simple example. First, we will examine a page layout. Since most web applications maintain the same general layout across various pages, it's convenient to define this layout as a single Blade view:\n\n```blade\n<!-- resources/views/layouts/app.blade.php -->\n\n<html>\n    <head>\n        <title>App Name - @yield('title')</title>\n    </head>\n    <body>\n        @section('sidebar')\n            This is the master sidebar.\n        @show\n\n        <div class=\"container\">\n            @yield('content')\n        </div>\n    </body>\n</html>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1516,"to":1538}}}}],["421",{"pageContent":"As you can see, this file contains typical HTML mark-up. However, take note of the `@section` and `@yield` directives. The `@section` directive, as the name implies, defines a section of content, while the `@yield` directive is used to display the contents of a given section.\n\nNow that we have defined a layout for our application, let's define a child page that inherits the layout.\n\n<a name=\"extending-a-layout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1541,"to":1545}}}}],["422",{"pageContent":"Extending A Layout\n\nWhen defining a child view, use the `@extends` Blade directive to specify which layout the child view should \"inherit\". Views which extend a Blade layout may inject content into the layout's sections using `@section` directives. Remember, as seen in the example above, the contents of these sections will be displayed in the layout using `@yield`:\n\n```blade\n<!-- resources/views/child.blade.php -->\n\n@extends('layouts.app')\n\n@section('title', 'Page Title')\n\n@section('sidebar')\n    @@parent\n\n    <p>This is appended to the master sidebar.</p>\n@endsection\n\n@section('content')\n    <p>This is my body content.</p>\n@endsection","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1546,"to":1565}}}}],["423",{"pageContent":"In this example, the `sidebar` section is utilizing the `@@parent` directive to append (rather than overwriting) content to the layout's sidebar. The `@@parent` directive will be replaced by the content of the layout when the view is rendered.\n\n> **Note**  \n> Contrary to the previous example, this `sidebar` section ends with `@endsection` instead of `@show`. The `@endsection` directive will only define a section while `@show` will define and **immediately yield** the section.\n\nThe `@yield` directive also accepts a default value as its second parameter. This value will be rendered if the section being yielded is undefined:\n\n```blade\n@yield('content', 'Default content')\n```\n\n<a name=\"forms\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1568,"to":1579}}}}],["424",{"pageContent":"Forms\n\n<a name=\"csrf-field\"></a>\n### CSRF Field\n\nAnytime you define an HTML form in your application, you should include a hidden CSRF token field in the form so that [the CSRF protection](/docs/{{version}}/csrf) middleware can validate the request. You may use the `@csrf` Blade directive to generate the token field:\n\n```blade\n<form method=\"POST\" action=\"/profile\">\n    @csrf\n\n    ...\n</form>\n```\n\n<a name=\"method-field\"></a>\n### Method Field\n\nSince HTML forms can't make `PUT`, `PATCH`, or `DELETE` requests, you will need to add a hidden `_method` field to spoof these HTTP verbs. The `@method` Blade directive can create this field for you:\n\n```blade\n<form action=\"/foo/bar\" method=\"POST\">\n    @method('PUT')\n\n    ...\n</form>\n```\n\n<a name=\"validation-errors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1580,"to":1608}}}}],["425",{"pageContent":"Validation Errors\n\nThe `@error` directive may be used to quickly check if [validation error messages](/docs/{{version}}/validation#quick-displaying-the-validation-errors) exist for a given attribute. Within an `@error` directive, you may echo the `$message` variable to display the error message:\n\n```blade\n<!-- /resources/views/post/create.blade.php -->\n\n<label for=\"title\">Post Title</label>\n\n<input id=\"title\"\n    type=\"text\"\n    class=\"@error('title') is-invalid @enderror\">\n\n@error('title')\n    <div class=\"alert alert-danger\">{{ $message }}</div>\n@enderror\n```\n\nSince the `@error` directive compiles to an \"if\" statement, you may use the `@else` directive to render content when there is not an error for an attribute:\n\n```blade\n<!-- /resources/views/auth.blade.php -->\n\n<label for=\"email\">Email address</label>\n\n<input id=\"email\"\n    type=\"email\"\n    class=\"@error('email') is-invalid @else is-valid @enderror\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1609,"to":1636}}}}],["426",{"pageContent":"You may pass [the name of a specific error bag](/docs/{{version}}/validation#named-error-bags) as the second parameter to the `@error` directive to retrieve validation error messages on pages containing multiple forms:\n\n```blade\n<!-- /resources/views/auth.blade.php -->\n\n<label for=\"email\">Email address</label>\n\n<input id=\"email\"\n    type=\"email\"\n    class=\"@error('email', 'login') is-invalid @enderror\">\n\n@error('email', 'login')\n    <div class=\"alert alert-danger\">{{ $message }}</div>\n@enderror\n```\n\n<a name=\"stacks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1639,"to":1655}}}}],["427",{"pageContent":"Stacks\n\nBlade allows you to push to named stacks which can be rendered somewhere else in another view or layout. This can be particularly useful for specifying any JavaScript libraries required by your child views:\n\n```blade\n@push('scripts')\n    <script src=\"/example.js\"></script>\n@endpush\n```\n\nIf you would like to `@push` content if a given boolean expression evaluates to `true`, you may use the `@pushIf` directive:\n\n```blade\n@pushIf($shouldPush, 'scripts')\n    <script src=\"/example.js\"></script>\n@endPushIf\n```\n\nYou may push to a stack as many times as needed. To render the complete stack contents, pass the name of the stack to the `@stack` directive:\n\n```blade\n<head>\n    <!-- Head Contents -->\n\n    @stack('scripts')\n</head>\n```\n\nIf you would like to prepend content onto the beginning of a stack, you should use the `@prepend` directive:\n\n```blade\n@push('scripts')\n    This will be second...\n@endpush\n\n// Later...\n\n@prepend('scripts')\n    This will be first...\n@endprepend","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1656,"to":1695}}}}],["428",{"pageContent":"<a name=\"service-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1698,"to":1698}}}}],["429",{"pageContent":"Service Injection\n\nThe `@inject` directive may be used to retrieve a service from the Laravel [service container](/docs/{{version}}/container). The first argument passed to `@inject` is the name of the variable the service will be placed into, while the second argument is the class or interface name of the service you wish to resolve:\n\n```blade\n@inject('metrics', 'App\\Services\\MetricsService')\n\n<div>\n    Monthly Revenue: {{ $metrics->monthlyRevenue() }}.\n</div>\n```\n\n<a name=\"rendering-inline-blade-templates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1699,"to":1711}}}}],["430",{"pageContent":"Rendering Inline Blade Templates\n\nSometimes you may need to transform a raw Blade template string into valid HTML. You may accomplish this using the `render` method provided by the `Blade` facade. The `render` method accepts the Blade template string and an optional array of data to provide to the template:\n\n```php\nuse Illuminate\\Support\\Facades\\Blade;\n\nreturn Blade::render('Hello, {{ $name }}', ['name' => 'Julian Bashir']);\n```\n\nLaravel renders inline Blade templates by writing them to the `storage/framework/views` directory. If you would like Laravel to remove these temporary files after rendering the Blade template, you may provide the `deleteCachedView` argument to the method:\n\n```php\nreturn Blade::render(\n    'Hello, {{ $name }}',\n    ['name' => 'Julian Bashir'],\n    deleteCachedView: true\n);\n```\n\n<a name=\"rendering-blade-fragments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1712,"to":1732}}}}],["431",{"pageContent":"Rendering Blade Fragments\n\nWhen using frontend frameworks such as [Turbo](https://turbo.hotwired.dev/) and [htmx](https://htmx.org/), you may occasionally need to only return a portion of a Blade template within your HTTP response. Blade \"fragments\" allow you to do just that. To get started, place a portion of your Blade template within `@fragment` and `@endfragment` directives:\n\n```blade\n@fragment('user-list')\n    <ul>\n        @foreach ($users as $user)\n            <li>{{ $user->name }}</li>\n        @endforeach\n    </ul>\n@endfragment\n```\n\nThen, when rendering the view that utilizes this template, you may invoke the `fragment` method to specify that only the specified fragment should be included in the outgoing HTTP response:\n\n```php\nreturn view('dashboard', ['users' => $users])->fragment('user-list');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1733,"to":1750}}}}],["432",{"pageContent":"The `fragmentIf` method allows you to conditionally return a fragment of a view based on a given condition. Otherwise, the entire view will be returned:\n\n```php\nreturn view('dashboard', ['users' => $users])\n    ->fragmentIf($request->hasHeader('HX-Request'), 'user-list');\n```\n\nThe `fragments` and `fragmentsIf` methods allow you to return multiple view fragments in the response. The fragments will be concatenated together:\n\n```php\nview('dashboard', ['users' => $users])\n    ->fragments(['user-list', 'comment-list']);\n\nview('dashboard', ['users' => $users])\n    ->fragmentsIf(\n        $request->hasHeader('HX-Request'),\n        ['user-list', 'comment-list']\n    );\n```\n\n<a name=\"extending-blade\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1753,"to":1773}}}}],["433",{"pageContent":"Extending Blade\n\nBlade allows you to define your own custom directives using the `directive` method. When the Blade compiler encounters the custom directive, it will call the provided callback with the expression that the directive contains.\n\nThe following example creates a `@datetime($var)` directive which formats a given `$var`, which should be an instance of `DateTime`:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\Blade;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }\n\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Blade::directive('datetime', function (string $expression) {\n                return \"<?php echo ($expression)->format('m/d/Y H:i'); ?>\";\n            });\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1774,"to":1806}}}}],["434",{"pageContent":"As you can see, we will chain the `format` method onto whatever expression is passed into the directive. So, in this example, the final PHP generated by this directive will be:\n\n    <?php echo ($var)->format('m/d/Y H:i'); ?>\n\n> **Warning**  \n> After updating the logic of a Blade directive, you will need to delete all of the cached Blade views. The cached Blade views may be removed using the `view:clear` Artisan command.\n\n<a name=\"custom-echo-handlers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1808,"to":1815}}}}],["435",{"pageContent":"Custom Echo Handlers\n\nIf you attempt to \"echo\" an object using Blade, the object's `__toString` method will be invoked. The [`__toString`](https://www.php.net/manual/en/language.oop5.magic.php#object.tostring) method is one of PHP's built-in \"magic methods\". However, sometimes you may not have control over the `__toString` method of a given class, such as when the class that you are interacting with belongs to a third-party library.\n\nIn these cases, Blade allows you to register a custom echo handler for that particular type of object. To accomplish this, you should invoke Blade's `stringable` method. The `stringable` method accepts a closure. This closure should type-hint the type of object that it is responsible for rendering. Typically, the `stringable` method should be invoked within the `boot` method of your application's `AppServiceProvider` class:\n\n    use Illuminate\\Support\\Facades\\Blade;\n    use Money\\Money;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1816,"to":1823}}}}],["436",{"pageContent":"use Illuminate\\Support\\Facades\\Blade;\n    use Money\\Money;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Blade::stringable(function (Money $money) {\n            return $money->formatTo('en_GB');\n        });\n    }\n\nOnce your custom echo handler has been defined, you may simply echo the object in your Blade template:\n\n```blade\nCost: {{ $money }}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1823,"to":1839}}}}],["437",{"pageContent":"<a name=\"custom-if-statements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1842,"to":1842}}}}],["438",{"pageContent":"Custom If Statements\n\nProgramming a custom directive is sometimes more complex than necessary when defining simple, custom conditional statements. For that reason, Blade provides a `Blade::if` method which allows you to quickly define custom conditional directives using closures. For example, let's define a custom conditional that checks the configured default \"disk\" for the application. We may do this in the `boot` method of our `AppServiceProvider`:\n\n    use Illuminate\\Support\\Facades\\Blade;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Blade::if('disk', function (string $value) {\n            return config('filesystems.default') === $value;\n        });\n    }\n\nOnce the custom conditional has been defined, you can use it within your templates:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1843,"to":1859}}}}],["439",{"pageContent":"Once the custom conditional has been defined, you can use it within your templates:\n\n```blade\n@disk('local')\n    <!-- The application is using the local disk... -->\n@elsedisk('s3')\n    <!-- The application is using the s3 disk... -->\n@else\n    <!-- The application is using some other disk... -->\n@enddisk\n\n@unlessdisk('local')\n    <!-- The application is not using the local disk... -->\n@enddisk\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/blade.md","loc":{"lines":{"from":1859,"to":1873}}}}],["440",{"pageContent":"# Broadcasting","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1,"to":1}}}}],["441",{"pageContent":"- [Introduction](#introduction)\n- [Server Side Installation](#server-side-installation)\n    - [Configuration](#configuration)\n    - [Pusher Channels](#pusher-channels)\n    - [Ably](#ably)\n    - [Open Source Alternatives](#open-source-alternatives)\n- [Client Side Installation](#client-side-installation)\n    - [Pusher Channels](#client-pusher-channels)\n    - [Ably](#client-ably)\n- [Concept Overview](#concept-overview)\n    - [Using An Example Application](#using-example-application)\n- [Defining Broadcast Events](#defining-broadcast-events)\n    - [Broadcast Name](#broadcast-name)\n    - [Broadcast Data](#broadcast-data)\n    - [Broadcast Queue](#broadcast-queue)\n    - [Broadcast Conditions](#broadcast-conditions)\n    - [Broadcasting & Database Transactions](#broadcasting-and-database-transactions)\n- [Authorizing Channels](#authorizing-channels)\n    - [Defining Authorization Routes](#defining-authorization-routes)\n    - [Defining Authorization Callbacks](#defining-authorization-callbacks)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":3,"to":22}}}}],["442",{"pageContent":"- [Authorizing Channels](#authorizing-channels)\n    - [Defining Authorization Routes](#defining-authorization-routes)\n    - [Defining Authorization Callbacks](#defining-authorization-callbacks)\n    - [Defining Channel Classes](#defining-channel-classes)\n- [Broadcasting Events](#broadcasting-events)\n    - [Only To Others](#only-to-others)\n    - [Customizing The Connection](#customizing-the-connection)\n- [Receiving Broadcasts](#receiving-broadcasts)\n    - [Listening For Events](#listening-for-events)\n    - [Leaving A Channel](#leaving-a-channel)\n    - [Namespaces](#namespaces)\n- [Presence Channels](#presence-channels)\n    - [Authorizing Presence Channels](#authorizing-presence-channels)\n    - [Joining Presence Channels](#joining-presence-channels)\n    - [Broadcasting To Presence Channels](#broadcasting-to-presence-channels)\n- [Model Broadcasting](#model-broadcasting)\n    - [Model Broadcasting Conventions](#model-broadcasting-conventions)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":22,"to":38}}}}],["443",{"pageContent":"- [Broadcasting To Presence Channels](#broadcasting-to-presence-channels)\n- [Model Broadcasting](#model-broadcasting)\n    - [Model Broadcasting Conventions](#model-broadcasting-conventions)\n    - [Listening For Model Broadcasts](#listening-for-model-broadcasts)\n- [Client Events](#client-events)\n- [Notifications](#notifications)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":38,"to":43}}}}],["444",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":45,"to":45}}}}],["445",{"pageContent":"Introduction\n\nIn many modern web applications, WebSockets are used to implement realtime, live-updating user interfaces. When some data is updated on the server, a message is typically sent over a WebSocket connection to be handled by the client. WebSockets provide a more efficient alternative to continually polling your application's server for data changes that should be reflected in your UI.\n\nFor example, imagine your application is able to export a user's data to a CSV file and email it to them. However, creating this CSV file takes several minutes so you choose to create and mail the CSV within a [queued job](/docs/{{version}}/queues). When the CSV has been created and mailed to the user, we can use event broadcasting to dispatch an `App\\Events\\UserDataExported` event that is received by our application's JavaScript. Once the event is received, we can display a message to the user that their CSV has been emailed to them without them ever needing to refresh the page.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":46,"to":50}}}}],["446",{"pageContent":"To assist you in building these types of features, Laravel makes it easy to \"broadcast\" your server-side Laravel [events](/docs/{{version}}/events) over a WebSocket connection. Broadcasting your Laravel events allows you to share the same event names and data between your server-side Laravel application and your client-side JavaScript application.\n\nThe core concepts behind broadcasting are simple: clients connect to named channels on the frontend, while your Laravel application broadcasts events to these channels on the backend. These events can contain any additional data you wish to make available to the frontend.\n\n<a name=\"supported-drivers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":52,"to":56}}}}],["447",{"pageContent":"Supported Drivers\n\nBy default, Laravel includes two server-side broadcasting drivers for you to choose from: [Pusher Channels](https://pusher.com/channels) and [Ably](https://ably.com). However, community driven packages such as [laravel-websockets](https://beyondco.de/docs/laravel-websockets/getting-started/introduction) and [soketi](https://docs.soketi.app/) provide additional broadcasting drivers that do not require commercial broadcasting providers.\n\n> **Note**  \n> Before diving into event broadcasting, make sure you have read Laravel's documentation on [events and listeners](/docs/{{version}}/events).\n\n<a name=\"server-side-installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":57,"to":64}}}}],["448",{"pageContent":"Server Side Installation\n\nTo get started using Laravel's event broadcasting, we need to do some configuration within the Laravel application as well as install a few packages.\n\nEvent broadcasting is accomplished by a server-side broadcasting driver that broadcasts your Laravel events so that Laravel Echo (a JavaScript library) can receive them within the browser client. Don't worry - we'll walk through each part of the installation process step-by-step.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":65,"to":71}}}}],["449",{"pageContent":"Configuration\n\nAll of your application's event broadcasting configuration is stored in the `config/broadcasting.php` configuration file. Laravel supports several broadcast drivers out of the box: [Pusher Channels](https://pusher.com/channels), [Redis](/docs/{{version}}/redis), and a `log` driver for local development and debugging. Additionally, a `null` driver is included which allows you to totally disable broadcasting during testing. A configuration example is included for each of these drivers in the `config/broadcasting.php` configuration file.\n\n<a name=\"broadcast-service-provider\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":72,"to":76}}}}],["450",{"pageContent":"Broadcast Service Provider\n\nBefore broadcasting any events, you will first need to register the `App\\Providers\\BroadcastServiceProvider`. In new Laravel applications, you only need to uncomment this provider in the `providers` array of your `config/app.php` configuration file. This `BroadcastServiceProvider` contains the code necessary to register the broadcast authorization routes and callbacks.\n\n<a name=\"queue-configuration\"></a>\n#### Queue Configuration\n\nYou will also need to configure and run a [queue worker](/docs/{{version}}/queues). All event broadcasting is done via queued jobs so that the response time of your application is not seriously affected by events being broadcast.\n\n<a name=\"pusher-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":77,"to":86}}}}],["451",{"pageContent":"Pusher Channels\n\nIf you plan to broadcast your events using [Pusher Channels](https://pusher.com/channels), you should install the Pusher Channels PHP SDK using the Composer package manager:\n\n```shell\ncomposer require pusher/pusher-php-server\n```\n\nNext, you should configure your Pusher Channels credentials in the `config/broadcasting.php` configuration file. An example Pusher Channels configuration is already included in this file, allowing you to quickly specify your key, secret, and application ID. Typically, these values should be set via the `PUSHER_APP_KEY`, `PUSHER_APP_SECRET`, and `PUSHER_APP_ID` [environment variables](/docs/{{version}}/configuration#environment-configuration):\n\n```ini\nPUSHER_APP_ID=your-pusher-app-id\nPUSHER_APP_KEY=your-pusher-key\nPUSHER_APP_SECRET=your-pusher-secret\nPUSHER_APP_CLUSTER=mt1","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":87,"to":101}}}}],["452",{"pageContent":"The `config/broadcasting.php` file's `pusher` configuration also allows you to specify additional `options` that are supported by Channels, such as the cluster.\n\nNext, you will need to change your broadcast driver to `pusher` in your `.env` file:\n\n```ini\nBROADCAST_DRIVER=pusher\n```\n\nFinally, you are ready to install and configure [Laravel Echo](#client-side-installation), which will receive the broadcast events on the client-side.\n\n<a name=\"pusher-compatible-open-source-alternatives\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":104,"to":114}}}}],["453",{"pageContent":"Open Source Pusher Alternatives\n\nThe [laravel-websockets](https://github.com/beyondcode/laravel-websockets) and [soketi](https://docs.soketi.app/) packages provide Pusher compatible WebSocket servers for Laravel. These packages allow you to leverage the full power of Laravel broadcasting without a commercial WebSocket provider. For more information on installing and using these packages, please consult our documentation on [open source alternatives](#open-source-alternatives).\n\n<a name=\"ably\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":115,"to":119}}}}],["454",{"pageContent":"Ably\n\n> **Note**\n> The documentation below discusses how to use Ably in \"Pusher compatibility\" mode. However, the Ably team recommends and maintains a broadcaster and Echo client that is able to take advantage of the unique capabilities offered by Ably. For more information on using the Ably maintained drivers, please [consult Ably's Laravel broadcaster documentation](https://github.com/ably/laravel-broadcaster).\n\nIf you plan to broadcast your events using [Ably](https://ably.com), you should install the Ably PHP SDK using the Composer package manager:\n\n```shell\ncomposer require ably/ably-php\n```\n\nNext, you should configure your Ably credentials in the `config/broadcasting.php` configuration file. An example Ably configuration is already included in this file, allowing you to quickly specify your key. Typically, this value should be set via the `ABLY_KEY` [environment variable](/docs/{{version}}/configuration#environment-configuration):\n\n```ini\nABLY_KEY=your-ably-key","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":120,"to":134}}}}],["455",{"pageContent":"Next, you will need to change your broadcast driver to `ably` in your `.env` file:\n\n```ini\nBROADCAST_DRIVER=ably\n```\n\nFinally, you are ready to install and configure [Laravel Echo](#client-side-installation), which will receive the broadcast events on the client-side.\n\n<a name=\"open-source-alternatives\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":137,"to":145}}}}],["456",{"pageContent":"Open Source Alternatives\n\n<a name=\"open-source-alternatives-php\"></a>\n#### PHP\n\nThe [laravel-websockets](https://github.com/beyondcode/laravel-websockets) package is a pure PHP, Pusher compatible WebSocket package for Laravel. This package allows you to leverage the full power of Laravel broadcasting without a commercial WebSocket provider. For more information on installing and using this package, please consult its [official documentation](https://beyondco.de/docs/laravel-websockets).\n\n<a name=\"open-source-alternatives-node\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":146,"to":153}}}}],["457",{"pageContent":"Node\n\n[Soketi](https://github.com/soketi/soketi) is a Node based, Pusher compatible WebSocket server for Laravel. Under the hood, Soketi utilizes µWebSockets.js for extreme scalability and speed. This package allows you to leverage the full power of Laravel broadcasting without a commercial WebSocket provider. For more information on installing and using this package, please consult its [official documentation](https://docs.soketi.app/).\n\n<a name=\"client-side-installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":154,"to":158}}}}],["458",{"pageContent":"Client Side Installation\n\n<a name=\"client-pusher-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":159,"to":161}}}}],["459",{"pageContent":"Pusher Channels\n\n[Laravel Echo](https://github.com/laravel/echo) is a JavaScript library that makes it painless to subscribe to channels and listen for events broadcast by your server-side broadcasting driver. You may install Echo via the NPM package manager. In this example, we will also install the `pusher-js` package since we will be using the Pusher Channels broadcaster:\n\n```shell\nnpm install --save-dev laravel-echo pusher-js","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":162,"to":167}}}}],["460",{"pageContent":"Once Echo is installed, you are ready to create a fresh Echo instance in your application's JavaScript. A great place to do this is at the bottom of the `resources/js/bootstrap.js` file that is included with the Laravel framework. By default, an example Echo configuration is already included in this file - you simply need to uncomment it:\n\n```js\nimport Echo from 'laravel-echo';\nimport Pusher from 'pusher-js';\n\nwindow.Pusher = Pusher;\n\nwindow.Echo = new Echo({\n    broadcaster: 'pusher',\n    key: import.meta.env.VITE_PUSHER_APP_KEY,\n    cluster: import.meta.env.VITE_PUSHER_APP_CLUSTER,\n    forceTLS: true\n});\n```\n\nOnce you have uncommented and adjusted the Echo configuration according to your needs, you may compile your application's assets:\n\n```shell\nnpm run dev\n```\n\n> **Note**  \n> To learn more about compiling your application's JavaScript assets, please consult the documentation on [Vite](/docs/{{version}}/vite).\n\n<a name=\"using-an-existing-client-instance\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":170,"to":195}}}}],["461",{"pageContent":"Using An Existing Client Instance\n\nIf you already have a pre-configured Pusher Channels client instance that you would like Echo to utilize, you may pass it to Echo via the `client` configuration option:\n\n```js\nimport Echo from 'laravel-echo';\nimport Pusher from 'pusher-js';\n\nconst options = {\n    broadcaster: 'pusher',\n    key: 'your-pusher-channels-key'\n}\n\nwindow.Echo = new Echo({\n    ...options,\n    client: new Pusher(options.key, options)\n});\n```\n\n<a name=\"client-ably\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":196,"to":215}}}}],["462",{"pageContent":"Ably\n\n> **Note**\n> The documentation below discusses how to use Ably in \"Pusher compatibility\" mode. However, the Ably team recommends and maintains a broadcaster and Echo client that is able to take advantage of the unique capabilities offered by Ably. For more information on using the Ably maintained drivers, please [consult Ably's Laravel broadcaster documentation](https://github.com/ably/laravel-broadcaster).\n\n[Laravel Echo](https://github.com/laravel/echo) is a JavaScript library that makes it painless to subscribe to channels and listen for events broadcast by your server-side broadcasting driver. You may install Echo via the NPM package manager. In this example, we will also install the `pusher-js` package.\n\nYou may wonder why we would install the `pusher-js` JavaScript library even though we are using Ably to broadcast our events. Thankfully, Ably includes a Pusher compatibility mode which lets us use the Pusher protocol when listening for events in our client-side application:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":216,"to":223}}}}],["463",{"pageContent":"```shell\nnpm install --save-dev laravel-echo pusher-js","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":223,"to":224}}}}],["464",{"pageContent":"**Before continuing, you should enable Pusher protocol support in your Ably application settings. You may enable this feature within the \"Protocol Adapter Settings\" portion of your Ably application's settings dashboard.**\n\nOnce Echo is installed, you are ready to create a fresh Echo instance in your application's JavaScript. A great place to do this is at the bottom of the `resources/js/bootstrap.js` file that is included with the Laravel framework. By default, an example Echo configuration is already included in this file; however, the default configuration in the `bootstrap.js` file is intended for Pusher. You may copy the configuration below to transition your configuration to Ably:\n\n```js\nimport Echo from 'laravel-echo';\nimport Pusher from 'pusher-js';\n\nwindow.Pusher = Pusher;\n\nwindow.Echo = new Echo({\n    broadcaster: 'pusher',\n    key: import.meta.env.VITE_ABLY_PUBLIC_KEY,\n    wsHost: 'realtime-pusher.ably.io',\n    wsPort: 443,\n    disableStats: true,\n    encrypted: true,\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":286,"to":303}}}}],["465",{"pageContent":"Note that our Ably Echo configuration references a `VITE_ABLY_PUBLIC_KEY` environment variable. This variable's value should be your Ably public key. Your public key is the portion of your Ably key that occurs before the `:` character.\n\nOnce you have uncommented and adjusted the Echo configuration according to your needs, you may compile your application's assets:\n\n```shell\nnpm run dev\n```\n\n> **Note**  \n> To learn more about compiling your application's JavaScript assets, please consult the documentation on [Vite](/docs/{{version}}/vite).\n\n<a name=\"concept-overview\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":306,"to":317}}}}],["466",{"pageContent":"Concept Overview\n\nLaravel's event broadcasting allows you to broadcast your server-side Laravel events to your client-side JavaScript application using a driver-based approach to WebSockets. Currently, Laravel ships with [Pusher Channels](https://pusher.com/channels) and [Ably](https://ably.com) drivers. The events may be easily consumed on the client-side using the [Laravel Echo](#client-side-installation) JavaScript package.\n\nEvents are broadcast over \"channels\", which may be specified as public or private. Any visitor to your application may subscribe to a public channel without any authentication or authorization; however, in order to subscribe to a private channel, a user must be authenticated and authorized to listen on that channel.\n\n> **Note**  \n> If you would like to explore open source alternatives to Pusher, check out the [open source alternatives](#open-source-alternatives).\n\n<a name=\"using-example-application\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":318,"to":327}}}}],["467",{"pageContent":"Using An Example Application\n\nBefore diving into each component of event broadcasting, let's take a high level overview using an e-commerce store as an example.\n\nIn our application, let's assume we have a page that allows users to view the shipping status for their orders. Let's also assume that a `OrderShipmentStatusUpdated` event is fired when a shipping status update is processed by the application:\n\n    use App\\Events\\OrderShipmentStatusUpdated;\n\n    OrderShipmentStatusUpdated::dispatch($order);\n\n<a name=\"the-shouldbroadcast-interface\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":328,"to":338}}}}],["468",{"pageContent":"The `ShouldBroadcast` Interface\n\nWhen a user is viewing one of their orders, we don't want them to have to refresh the page to view status updates. Instead, we want to broadcast the updates to the application as they are created. So, we need to mark the `OrderShipmentStatusUpdated` event with the `ShouldBroadcast` interface. This will instruct Laravel to broadcast the event when it is fired:\n\n    <?php\n\n    namespace App\\Events;\n\n    use App\\Models\\Order;\n    use Illuminate\\Broadcasting\\Channel;\n    use Illuminate\\Broadcasting\\InteractsWithSockets;\n    use Illuminate\\Broadcasting\\PresenceChannel;\n    use Illuminate\\Contracts\\Broadcasting\\ShouldBroadcast;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class OrderShipmentStatusUpdated implements ShouldBroadcast\n    {\n        /**\n         * The order instance.\n         *\n         * @var \\App\\Order\n         */\n        public $order;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":339,"to":362}}}}],["469",{"pageContent":"class OrderShipmentStatusUpdated implements ShouldBroadcast\n    {\n        /**\n         * The order instance.\n         *\n         * @var \\App\\Order\n         */\n        public $order;\n    }\n\nThe `ShouldBroadcast` interface requires our event to define a `broadcastOn` method. This method is responsible for returning the channels that the event should broadcast on. An empty stub of this method is already defined on generated event classes, so we only need to fill in its details. We only want the creator of the order to be able to view status updates, so we will broadcast the event on a private channel that is tied to the order:\n\n    use Illuminate\\Broadcasting\\Channel;\n    use Illuminate\\Broadcasting\\PrivateChannel;\n\n    /**\n     * Get the channel the event should broadcast on.\n     */\n    public function broadcastOn(): Channel\n    {\n        return new PrivateChannel('orders.'.$this->order->id);\n    }\n\nIf you wish the event to broadcast on multiple channels, you may return an `array` instead:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":362,"to":385}}}}],["470",{"pageContent":"If you wish the event to broadcast on multiple channels, you may return an `array` instead:\n\n    use Illuminate\\Broadcasting\\PrivateChannel;\n\n    /**\n     * Get the channels the event should broadcast on.\n     *\n     * @return array<int, \\Illuminate\\Broadcasting\\Channel>\n     */\n    public function broadcastOn(): array\n    {\n        return [\n            new PrivateChannel('orders.'.$this->order->id),\n            // ...\n        ];\n    }\n\n<a name=\"example-application-authorizing-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":385,"to":402}}}}],["471",{"pageContent":"Authorizing Channels\n\nRemember, users must be authorized to listen on private channels. We may define our channel authorization rules in our application's `routes/channels.php` file. In this example, we need to verify that any user attempting to listen on the private `orders.1` channel is actually the creator of the order:\n\n    use App\\Models\\Order;\n    use App\\Models\\User;\n\n    Broadcast::channel('orders.{orderId}', function (User $user, int $orderId) {\n        return $user->id === Order::findOrNew($orderId)->user_id;\n    });\n\nThe `channel` method accepts two arguments: the name of the channel and a callback which returns `true` or `false` indicating whether the user is authorized to listen on the channel.\n\nAll authorization callbacks receive the currently authenticated user as their first argument and any additional wildcard parameters as their subsequent arguments. In this example, we are using the `{orderId}` placeholder to indicate that the \"ID\" portion of the channel name is a wildcard.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":403,"to":416}}}}],["472",{"pageContent":"<a name=\"listening-for-event-broadcasts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":418,"to":418}}}}],["473",{"pageContent":"Listening For Event Broadcasts\n\nNext, all that remains is to listen for the event in our JavaScript application. We can do this using [Laravel Echo](#client-side-installation). First, we'll use the `private` method to subscribe to the private channel. Then, we may use the `listen` method to listen for the `OrderShipmentStatusUpdated` event. By default, all of the event's public properties will be included on the broadcast event:\n\n```js\nEcho.private(`orders.${orderId}`)\n    .listen('OrderShipmentStatusUpdated', (e) => {\n        console.log(e.order);\n    });\n```\n\n<a name=\"defining-broadcast-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":419,"to":430}}}}],["474",{"pageContent":"Defining Broadcast Events\n\nTo inform Laravel that a given event should be broadcast, you must implement the `Illuminate\\Contracts\\Broadcasting\\ShouldBroadcast` interface on the event class. This interface is already imported into all event classes generated by the framework so you may easily add it to any of your events.\n\nThe `ShouldBroadcast` interface requires you to implement a single method: `broadcastOn`. The `broadcastOn` method should return a channel or array of channels that the event should broadcast on. The channels should be instances of `Channel`, `PrivateChannel`, or `PresenceChannel`. Instances of `Channel` represent public channels that any user may subscribe to, while `PrivateChannels` and `PresenceChannels` represent private channels that require [channel authorization](#authorizing-channels):\n\n    <?php\n\n    namespace App\\Events;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":431,"to":439}}}}],["475",{"pageContent":"<?php\n\n    namespace App\\Events;\n\n    use App\\Models\\User;\n    use Illuminate\\Broadcasting\\Channel;\n    use Illuminate\\Broadcasting\\InteractsWithSockets;\n    use Illuminate\\Broadcasting\\PresenceChannel;\n    use Illuminate\\Broadcasting\\PrivateChannel;\n    use Illuminate\\Contracts\\Broadcasting\\ShouldBroadcast;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class ServerCreated implements ShouldBroadcast\n    {\n        use SerializesModels;\n\n        /**\n         * Create a new event instance.\n         */\n        public function __construct(\n            public User $user,\n        ) {}\n\n        /**\n         * Get the channels the event should broadcast on.\n         *\n         * @return array<int, \\Illuminate\\Broadcasting\\Channel>\n         */\n        public function broadcastOn(): array\n        {\n            return [\n                new PrivateChannel('user.'.$this->user->id),\n            ];\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":439,"to":473}}}}],["476",{"pageContent":"After implementing the `ShouldBroadcast` interface, you only need to [fire the event](/docs/{{version}}/events) as you normally would. Once the event has been fired, a [queued job](/docs/{{version}}/queues) will automatically broadcast the event using your specified broadcast driver.\n\n<a name=\"broadcast-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":475,"to":477}}}}],["477",{"pageContent":"Broadcast Name\n\nBy default, Laravel will broadcast the event using the event's class name. However, you may customize the broadcast name by defining a `broadcastAs` method on the event:\n\n    /**\n     * The event's broadcast name.\n     */\n    public function broadcastAs(): string\n    {\n        return 'server.created';\n    }\n\nIf you customize the broadcast name using the `broadcastAs` method, you should make sure to register your listener with a leading `.` character. This will instruct Echo to not prepend the application's namespace to the event:\n\n    .listen('.server.created', function (e) {\n        ....\n    });\n\n<a name=\"broadcast-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":478,"to":496}}}}],["478",{"pageContent":"Broadcast Data\n\nWhen an event is broadcast, all of its `public` properties are automatically serialized and broadcast as the event's payload, allowing you to access any of its public data from your JavaScript application. So, for example, if your event has a single public `$user` property that contains an Eloquent model, the event's broadcast payload would be:\n\n```json\n{\n    \"user\": {\n        \"id\": 1,\n        \"name\": \"Patrick Stewart\"\n        ...\n    }\n}\n```\n\nHowever, if you wish to have more fine-grained control over your broadcast payload, you may add a `broadcastWith` method to your event. This method should return the array of data that you wish to broadcast as the event payload:\n\n    /**\n     * Get the data to broadcast.\n     *\n     * @return array<string, mixed>\n     */\n    public function broadcastWith(): array\n    {\n        return ['id' => $this->user->id];\n    }\n\n<a name=\"broadcast-queue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":497,"to":523}}}}],["479",{"pageContent":"Broadcast Queue\n\nBy default, each broadcast event is placed on the default queue for the default queue connection specified in your `queue.php` configuration file. You may customize the queue connection and name used by the broadcaster by defining `connection` and `queue` properties on your event class:\n\n    /**\n     * The name of the queue connection to use when broadcasting the event.\n     *\n     * @var string\n     */\n    public $connection = 'redis';\n\n    /**\n     * The name of the queue on which to place the broadcasting job.\n     *\n     * @var string\n     */\n    public $queue = 'default';\n\nAlternatively, you may customize the queue name by defining a `broadcastQueue` method on your event:\n\n    /**\n     * The name of the queue on which to place the broadcasting job.\n     */\n    public function broadcastQueue(): string\n    {\n        return 'default';\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":524,"to":550}}}}],["480",{"pageContent":"/**\n     * The name of the queue on which to place the broadcasting job.\n     */\n    public function broadcastQueue(): string\n    {\n        return 'default';\n    }\n\nIf you would like to broadcast your event using the `sync` queue instead of the default queue driver, you can implement the `ShouldBroadcastNow` interface instead of `ShouldBroadcast`:\n\n    <?php\n\n    use Illuminate\\Contracts\\Broadcasting\\ShouldBroadcastNow;\n\n    class OrderShipmentStatusUpdated implements ShouldBroadcastNow\n    {\n        // ...\n    }\n\n<a name=\"broadcast-conditions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":550,"to":569}}}}],["481",{"pageContent":"Broadcast Conditions\n\nSometimes you want to broadcast your event only if a given condition is true. You may define these conditions by adding a `broadcastWhen` method to your event class:\n\n    /**\n     * Determine if this event should broadcast.\n     */\n    public function broadcastWhen(): bool\n    {\n        return $this->order->value > 100;\n    }\n\n<a name=\"broadcasting-and-database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":570,"to":582}}}}],["482",{"pageContent":"Broadcasting & Database Transactions\n\nWhen broadcast events are dispatched within database transactions, they may be processed by the queue before the database transaction has committed. When this happens, any updates you have made to models or database records during the database transaction may not yet be reflected in the database. In addition, any models or database records created within the transaction may not exist in the database. If your event depends on these models, unexpected errors can occur when the job that broadcasts the event is processed.\n\nIf your queue connection's `after_commit` configuration option is set to `false`, you may still indicate that a particular broadcast event should be dispatched after all open database transactions have been committed by implementing the `ShouldDispatchAfterCommit` interface on the event class:\n\n    <?php\n\n    namespace App\\Events;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":583,"to":591}}}}],["483",{"pageContent":"<?php\n\n    namespace App\\Events;\n\n    use Illuminate\\Contracts\\Broadcasting\\ShouldBroadcast;\n    use Illuminate\\Contracts\\Events\\ShouldDispatchAfterCommit;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class ServerCreated implements ShouldBroadcast, ShouldDispatchAfterCommit\n    {\n        use SerializesModels;\n    }\n\n> **Note**  \n> To learn more about working around these issues, please review the documentation regarding [queued jobs and database transactions](/docs/{{version}}/queues#jobs-and-database-transactions).\n\n<a name=\"authorizing-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":591,"to":607}}}}],["484",{"pageContent":"Authorizing Channels\n\nPrivate channels require you to authorize that the currently authenticated user can actually listen on the channel. This is accomplished by making an HTTP request to your Laravel application with the channel name and allowing your application to determine if the user can listen on that channel. When using [Laravel Echo](#client-side-installation), the HTTP request to authorize subscriptions to private channels will be made automatically; however, you do need to define the proper routes to respond to these requests.\n\n<a name=\"defining-authorization-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":608,"to":612}}}}],["485",{"pageContent":"Defining Authorization Routes\n\nThankfully, Laravel makes it easy to define the routes to respond to channel authorization requests. In the `App\\Providers\\BroadcastServiceProvider` included with your Laravel application, you will see a call to the `Broadcast::routes` method. This method will register the `/broadcasting/auth` route to handle authorization requests:\n\n    Broadcast::routes();\n\nThe `Broadcast::routes` method will automatically place its routes within the `web` middleware group; however, you may pass an array of route attributes to the method if you would like to customize the assigned attributes:\n\n    Broadcast::routes($attributes);\n\n<a name=\"customizing-the-authorization-endpoint\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":613,"to":623}}}}],["486",{"pageContent":"Customizing The Authorization Endpoint\n\nBy default, Echo will use the `/broadcasting/auth` endpoint to authorize channel access. However, you may specify your own authorization endpoint by passing the `authEndpoint` configuration option to your Echo instance:\n\n```js\nwindow.Echo = new Echo({\n    broadcaster: 'pusher',\n    // ...\n    authEndpoint: '/custom/endpoint/auth'\n});\n```\n\n<a name=\"customizing-the-authorization-request\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":624,"to":636}}}}],["487",{"pageContent":"Customizing The Authorization Request\n\nYou can customize how Laravel Echo performs authorization requests by providing a custom authorizer when initializing Echo:\n\n```js\nwindow.Echo = new Echo({\n    // ...\n    authorizer: (channel, options) => {\n        return {\n            authorize: (socketId, callback) => {\n                axios.post('/api/broadcasting/auth', {\n                    socket_id: socketId,\n                    channel_name: channel.name\n                })\n                .then(response => {\n                    callback(null, response.data);\n                })\n                .catch(error => {\n                    callback(error);\n                });\n            }\n        };\n    },\n})\n```\n\n<a name=\"defining-authorization-callbacks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":637,"to":663}}}}],["488",{"pageContent":"Defining Authorization Callbacks\n\nNext, we need to define the logic that will actually determine if the currently authenticated user can listen to a given channel. This is done in the `routes/channels.php` file that is included with your application. In this file, you may use the `Broadcast::channel` method to register channel authorization callbacks:\n\n    use App\\Models\\User;\n\n    Broadcast::channel('orders.{orderId}', function (User $user, int $orderId) {\n        return $user->id === Order::findOrNew($orderId)->user_id;\n    });\n\nThe `channel` method accepts two arguments: the name of the channel and a callback which returns `true` or `false` indicating whether the user is authorized to listen on the channel.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":664,"to":674}}}}],["489",{"pageContent":"The `channel` method accepts two arguments: the name of the channel and a callback which returns `true` or `false` indicating whether the user is authorized to listen on the channel.\n\nAll authorization callbacks receive the currently authenticated user as their first argument and any additional wildcard parameters as their subsequent arguments. In this example, we are using the `{orderId}` placeholder to indicate that the \"ID\" portion of the channel name is a wildcard.\n\nYou may view a list of your application's broadcast authorization callbacks using the `channel:list` Artisan command:\n\n```shell\nphp artisan channel:list","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":674,"to":681}}}}],["490",{"pageContent":"<a name=\"authorization-callback-model-binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":684,"to":684}}}}],["491",{"pageContent":"Authorization Callback Model Binding\n\nJust like HTTP routes, channel routes may also take advantage of implicit and explicit [route model binding](/docs/{{version}}/routing#route-model-binding). For example, instead of receiving a string or numeric order ID, you may request an actual `Order` model instance:\n\n    use App\\Models\\Order;\n    use App\\Models\\User;\n\n    Broadcast::channel('orders.{order}', function (User $user, Order $order) {\n        return $user->id === $order->user_id;\n    });\n\n> **Warning**  \n> Unlike HTTP route model binding, channel model binding does not support automatic [implicit model binding scoping](/docs/{{version}}/routing#implicit-model-binding-scoping). However, this is rarely a problem because most channels can be scoped based on a single model's unique, primary key.\n\n<a name=\"authorization-callback-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":685,"to":699}}}}],["492",{"pageContent":"Authorization Callback Authentication\n\nPrivate and presence broadcast channels authenticate the current user via your application's default authentication guard. If the user is not authenticated, channel authorization is automatically denied and the authorization callback is never executed. However, you may assign multiple, custom guards that should authenticate the incoming request if necessary:\n\n    Broadcast::channel('channel', function () {\n        // ...\n    }, ['guards' => ['web', 'admin']]);\n\n<a name=\"defining-channel-classes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":700,"to":708}}}}],["493",{"pageContent":"Defining Channel Classes\n\nIf your application is consuming many different channels, your `routes/channels.php` file could become bulky. So, instead of using closures to authorize channels, you may use channel classes. To generate a channel class, use the `make:channel` Artisan command. This command will place a new channel class in the `App/Broadcasting` directory.\n\n```shell\nphp artisan make:channel OrderChannel","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":709,"to":714}}}}],["494",{"pageContent":"Next, register your channel in your `routes/channels.php` file:\n\n    use App\\Broadcasting\\OrderChannel;\n\n    Broadcast::channel('orders.{order}', OrderChannel::class);\n\nFinally, you may place the authorization logic for your channel in the channel class' `join` method. This `join` method will house the same logic you would have typically placed in your channel authorization closure. You may also take advantage of channel model binding:\n\n    <?php\n\n    namespace App\\Broadcasting;\n\n    use App\\Models\\Order;\n    use App\\Models\\User;\n\n    class OrderChannel\n    {\n        /**\n         * Create a new channel instance.\n         */\n        public function __construct()\n        {\n            // ...\n        }\n\n        /**\n         * Authenticate the user's access to the channel.\n         */\n        public function join(User $user, Order $order): array|bool\n        {\n            return $user->id === $order->user_id;\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":717,"to":749}}}}],["495",{"pageContent":"> **Note**  \n> Like many other classes in Laravel, channel classes will automatically be resolved by the [service container](/docs/{{version}}/container). So, you may type-hint any dependencies required by your channel in its constructor.\n\n<a name=\"broadcasting-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":751,"to":754}}}}],["496",{"pageContent":"Broadcasting Events\n\nOnce you have defined an event and marked it with the `ShouldBroadcast` interface, you only need to fire the event using the event's dispatch method. The event dispatcher will notice that the event is marked with the `ShouldBroadcast` interface and will queue the event for broadcasting:\n\n    use App\\Events\\OrderShipmentStatusUpdated;\n\n    OrderShipmentStatusUpdated::dispatch($order);\n\n<a name=\"only-to-others\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":755,"to":763}}}}],["497",{"pageContent":"Only To Others\n\nWhen building an application that utilizes event broadcasting, you may occasionally need to broadcast an event to all subscribers to a given channel except for the current user. You may accomplish this using the `broadcast` helper and the `toOthers` method:\n\n    use App\\Events\\OrderShipmentStatusUpdated;\n\n    broadcast(new OrderShipmentStatusUpdated($update))->toOthers();\n\nTo better understand when you may want to use the `toOthers` method, let's imagine a task list application where a user may create a new task by entering a task name. To create a task, your application might make a request to a `/task` URL which broadcasts the task's creation and returns a JSON representation of the new task. When your JavaScript application receives the response from the end-point, it might directly insert the new task into its task list like so:\n\n```js\naxios.post('/task', task)\n    .then((response) => {\n        this.tasks.push(response.data);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":764,"to":778}}}}],["498",{"pageContent":"However, remember that we also broadcast the task's creation. If your JavaScript application is also listening for this event in order to add tasks to the task list, you will have duplicate tasks in your list: one from the end-point and one from the broadcast. You may solve this by using the `toOthers` method to instruct the broadcaster to not broadcast the event to the current user.\n\n> **Warning**  \n> Your event must use the `Illuminate\\Broadcasting\\InteractsWithSockets` trait in order to call the `toOthers` method.\n\n<a name=\"only-to-others-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":781,"to":786}}}}],["499",{"pageContent":"Configuration\n\nWhen you initialize a Laravel Echo instance, a socket ID is assigned to the connection. If you are using a global [Axios](https://github.com/mzabriskie/axios) instance to make HTTP requests from your JavaScript application, the socket ID will automatically be attached to every outgoing request as a `X-Socket-ID` header. Then, when you call the `toOthers` method, Laravel will extract the socket ID from the header and instruct the broadcaster to not broadcast to any connections with that socket ID.\n\nIf you are not using a global Axios instance, you will need to manually configure your JavaScript application to send the `X-Socket-ID` header with all outgoing requests. You may retrieve the socket ID using the `Echo.socketId` method:\n\n```js\nvar socketId = Echo.socketId();\n```\n\n<a name=\"customizing-the-connection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":787,"to":797}}}}],["500",{"pageContent":"Customizing The Connection\n\nIf your application interacts with multiple broadcast connections and you want to broadcast an event using a broadcaster other than your default, you may specify which connection to push an event to using the `via` method:\n\n    use App\\Events\\OrderShipmentStatusUpdated;\n\n    broadcast(new OrderShipmentStatusUpdated($update))->via('pusher');\n\nAlternatively, you may specify the event's broadcast connection by calling the `broadcastVia` method within the event's constructor. However, before doing so, you should ensure that the event class uses the `InteractsWithBroadcasting` trait:\n\n    <?php\n\n    namespace App\\Events;\n\n    use Illuminate\\Broadcasting\\Channel;\n    use Illuminate\\Broadcasting\\InteractsWithBroadcasting;\n    use Illuminate\\Broadcasting\\InteractsWithSockets;\n    use Illuminate\\Broadcasting\\PresenceChannel;\n    use Illuminate\\Broadcasting\\PrivateChannel;\n    use Illuminate\\Contracts\\Broadcasting\\ShouldBroadcast;\n    use Illuminate\\Queue\\SerializesModels;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":798,"to":818}}}}],["501",{"pageContent":"class OrderShipmentStatusUpdated implements ShouldBroadcast\n    {\n        use InteractsWithBroadcasting;\n\n        /**\n         * Create a new event instance.\n         */\n        public function __construct()\n        {\n            $this->broadcastVia('pusher');\n        }\n    }\n\n<a name=\"receiving-broadcasts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":820,"to":833}}}}],["502",{"pageContent":"Receiving Broadcasts\n\n<a name=\"listening-for-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":834,"to":836}}}}],["503",{"pageContent":"Listening For Events\n\nOnce you have [installed and instantiated Laravel Echo](#client-side-installation), you are ready to start listening for events that are broadcast from your Laravel application. First, use the `channel` method to retrieve an instance of a channel, then call the `listen` method to listen for a specified event:\n\n```js\nEcho.channel(`orders.${this.order.id}`)\n    .listen('OrderShipmentStatusUpdated', (e) => {\n        console.log(e.order.name);\n    });\n```\n\nIf you would like to listen for events on a private channel, use the `private` method instead. You may continue to chain calls to the `listen` method to listen for multiple events on a single channel:\n\n```js\nEcho.private(`orders.${this.order.id}`)\n    .listen(/* ... */)\n    .listen(/* ... */)\n    .listen(/* ... */);\n```\n\n<a name=\"stop-listening-for-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":837,"to":857}}}}],["504",{"pageContent":"Stop Listening For Events\n\nIf you would like to stop listening to a given event without [leaving the channel](#leaving-a-channel), you may use the `stopListening` method:\n\n```js\nEcho.private(`orders.${this.order.id}`)\n    .stopListening('OrderShipmentStatusUpdated')\n```\n\n<a name=\"leaving-a-channel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":858,"to":867}}}}],["505",{"pageContent":"Leaving A Channel\n\nTo leave a channel, you may call the `leaveChannel` method on your Echo instance:\n\n```js\nEcho.leaveChannel(`orders.${this.order.id}`);\n```\n\nIf you would like to leave a channel and also its associated private and presence channels, you may call the `leave` method:\n\n```js\nEcho.leave(`orders.${this.order.id}`);\n```\n<a name=\"namespaces\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":868,"to":881}}}}],["506",{"pageContent":"Namespaces\n\nYou may have noticed in the examples above that we did not specify the full `App\\Events` namespace for the event classes. This is because Echo will automatically assume the events are located in the `App\\Events` namespace. However, you may configure the root namespace when you instantiate Echo by passing a `namespace` configuration option:\n\n```js\nwindow.Echo = new Echo({\n    broadcaster: 'pusher',\n    // ...\n    namespace: 'App.Other.Namespace'\n});\n```\n\nAlternatively, you may prefix event classes with a `.` when subscribing to them using Echo. This will allow you to always specify the fully-qualified class name:\n\n```js\nEcho.channel('orders')\n    .listen('.Namespace\\\\Event\\\\Class', (e) => {\n        // ...\n    });\n```\n\n<a name=\"presence-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":882,"to":903}}}}],["507",{"pageContent":"Presence Channels\n\nPresence channels build on the security of private channels while exposing the additional feature of awareness of who is subscribed to the channel. This makes it easy to build powerful, collaborative application features such as notifying users when another user is viewing the same page or listing the inhabitants of a chat room.\n\n<a name=\"authorizing-presence-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":904,"to":908}}}}],["508",{"pageContent":"Authorizing Presence Channels\n\nAll presence channels are also private channels; therefore, users must be [authorized to access them](#authorizing-channels). However, when defining authorization callbacks for presence channels, you will not return `true` if the user is authorized to join the channel. Instead, you should return an array of data about the user.\n\nThe data returned by the authorization callback will be made available to the presence channel event listeners in your JavaScript application. If the user is not authorized to join the presence channel, you should return `false` or `null`:\n\n    use App\\Models\\User;\n\n    Broadcast::channel('chat.{roomId}', function (User $user, int $roomId) {\n        if ($user->canJoinRoom($roomId)) {\n            return ['id' => $user->id, 'name' => $user->name];\n        }\n    });\n\n<a name=\"joining-presence-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":909,"to":923}}}}],["509",{"pageContent":"Joining Presence Channels\n\nTo join a presence channel, you may use Echo's `join` method. The `join` method will return a `PresenceChannel` implementation which, along with exposing the `listen` method, allows you to subscribe to the `here`, `joining`, and `leaving` events.\n\n```js\nEcho.join(`chat.${roomId}`)\n    .here((users) => {\n        // ...\n    })\n    .joining((user) => {\n        console.log(user.name);\n    })\n    .leaving((user) => {\n        console.log(user.name);\n    })\n    .error((error) => {\n        console.error(error);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":924,"to":941}}}}],["510",{"pageContent":"The `here` callback will be executed immediately once the channel is joined successfully, and will receive an array containing the user information for all of the other users currently subscribed to the channel. The `joining` method will be executed when a new user joins a channel, while the `leaving` method will be executed when a user leaves the channel. The `error` method will be executed when the authentication endpoint returns a HTTP status code other than 200 or if there is a problem parsing the returned JSON.\n\n<a name=\"broadcasting-to-presence-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":944,"to":946}}}}],["511",{"pageContent":"Broadcasting To Presence Channels\n\nPresence channels may receive events just like public or private channels. Using the example of a chatroom, we may want to broadcast `NewMessage` events to the room's presence channel. To do so, we'll return an instance of `PresenceChannel` from the event's `broadcastOn` method:\n\n    /**\n     * Get the channels the event should broadcast on.\n     *\n     * @return array<int, \\Illuminate\\Broadcasting\\Channel>\n     */\n    public function broadcastOn(): array\n    {\n        return [\n            new PresenceChannel('chat.'.$this->message->room_id),\n        ];\n    }\n\nAs with other events, you may use the `broadcast` helper and the `toOthers` method to exclude the current user from receiving the broadcast:\n\n    broadcast(new NewMessage($message));\n\n    broadcast(new NewMessage($message))->toOthers();\n\nAs typical of other types of events, you may listen for events sent to presence channels using Echo's `listen` method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":947,"to":969}}}}],["512",{"pageContent":"broadcast(new NewMessage($message))->toOthers();\n\nAs typical of other types of events, you may listen for events sent to presence channels using Echo's `listen` method:\n\n```js\nEcho.join(`chat.${roomId}`)\n    .here(/* ... */)\n    .joining(/* ... */)\n    .leaving(/* ... */)\n    .listen('NewMessage', (e) => {\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":969,"to":980}}}}],["513",{"pageContent":"<a name=\"model-broadcasting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":983,"to":983}}}}],["514",{"pageContent":"Model Broadcasting\n\n> **Warning**  \n> Before reading the following documentation about model broadcasting, we recommend you become familiar with the general concepts of Laravel's model broadcasting services as well as how to manually create and listen to broadcast events.\n\nIt is common to broadcast events when your application's [Eloquent models](/docs/{{version}}/eloquent) are created, updated, or deleted. Of course, this can easily be accomplished by manually [defining custom events for Eloquent model state changes](/docs/{{version}}/eloquent#events) and marking those events with the `ShouldBroadcast` interface.\n\nHowever, if you are not using these events for any other purposes in your application, it can be cumbersome to create event classes for the sole purpose of broadcasting them. To remedy this, Laravel allows you to indicate that an Eloquent model should automatically broadcast its state changes.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":984,"to":991}}}}],["515",{"pageContent":"To get started, your Eloquent model should use the `Illuminate\\Database\\Eloquent\\BroadcastsEvents` trait. In addition, the model should define a `broadcastOn` method, which will return an array of channels that the model's events should broadcast on:\n\n```php\n<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Broadcasting\\Channel;\nuse Illuminate\\Broadcasting\\PrivateChannel;\nuse Illuminate\\Database\\Eloquent\\BroadcastsEvents;\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\nclass Post extends Model\n{\n    use BroadcastsEvents, HasFactory;\n\n    /**\n     * Get the user that the post belongs to.\n     */\n    public function user(): BelongsTo\n    {\n        return $this->belongsTo(User::class);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":993,"to":1017}}}}],["516",{"pageContent":"/**\n     * Get the user that the post belongs to.\n     */\n    public function user(): BelongsTo\n    {\n        return $this->belongsTo(User::class);\n    }\n\n    /**\n     * Get the channels that model events should broadcast on.\n     *\n     * @return array<int, \\Illuminate\\Broadcasting\\Channel|\\Illuminate\\Database\\Eloquent\\Model>\n     */\n    public function broadcastOn(string $event): array\n    {\n        return [$this, $this->user];\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1017,"to":1034}}}}],["517",{"pageContent":"Once your model includes this trait and defines its broadcast channels, it will begin automatically broadcasting events when a model instance is created, updated, deleted, trashed, or restored.\n\nIn addition, you may have noticed that the `broadcastOn` method receives a string `$event` argument. This argument contains the type of event that has occurred on the model and will have a value of `created`, `updated`, `deleted`, `trashed`, or `restored`. By inspecting the value of this variable, you may determine which channels (if any) the model should broadcast to for a particular event:\n\n```php\n/**\n * Get the channels that model events should broadcast on.\n *\n * @return array<string, array<int, \\Illuminate\\Broadcasting\\Channel|\\Illuminate\\Database\\Eloquent\\Model>>\n */\npublic function broadcastOn(string $event): array\n{\n    return match ($event) {\n        'deleted' => [],\n        default => [$this, $this->user],\n    };\n}\n```\n\n<a name=\"customizing-model-broadcasting-event-creation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1037,"to":1056}}}}],["518",{"pageContent":"Customizing Model Broadcasting Event Creation\n\nOccasionally, you may wish to customize how Laravel creates the underlying model broadcasting event. You may accomplish this by defining a `newBroadcastableEvent` method on your Eloquent model. This method should return an `Illuminate\\Database\\Eloquent\\BroadcastableModelEventOccurred` instance:\n\n```php\nuse Illuminate\\Database\\Eloquent\\BroadcastableModelEventOccurred;\n\n/**\n * Create a new broadcastable model event for the model.\n */\nprotected function newBroadcastableEvent(string $event): BroadcastableModelEventOccurred\n{\n    return (new BroadcastableModelEventOccurred(\n        $this, $event\n    ))->dontBroadcastToCurrentUser();\n}\n```\n\n<a name=\"model-broadcasting-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1057,"to":1075}}}}],["519",{"pageContent":"Model Broadcasting Conventions\n\n<a name=\"model-broadcasting-channel-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1076,"to":1078}}}}],["520",{"pageContent":"Channel Conventions\n\nAs you may have noticed, the `broadcastOn` method in the model example above did not return `Channel` instances. Instead, Eloquent models were returned directly. If an Eloquent model instance is returned by your model's `broadcastOn` method (or is contained in an array returned by the method), Laravel will automatically instantiate a private channel instance for the model using the model's class name and primary key identifier as the channel name.\n\nSo, an `App\\Models\\User` model with an `id` of `1` would be converted into a `Illuminate\\Broadcasting\\PrivateChannel` instance with a name of `App.Models.User.1`. Of course, in addition to returning Eloquent model instances from your model's `broadcastOn` method, you may return complete `Channel` instances in order to have full control over the model's channel names:\n\n```php\nuse Illuminate\\Broadcasting\\PrivateChannel;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1079,"to":1086}}}}],["521",{"pageContent":"```php\nuse Illuminate\\Broadcasting\\PrivateChannel;\n\n/**\n * Get the channels that model events should broadcast on.\n *\n * @return array<int, \\Illuminate\\Broadcasting\\Channel>\n */\npublic function broadcastOn(string $event): array\n{\n    return [\n        new PrivateChannel('user.'.$this->id)\n    ];\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1086,"to":1099}}}}],["522",{"pageContent":"If you plan to explicitly return a channel instance from your model's `broadcastOn` method, you may pass an Eloquent model instance to the channel's constructor. When doing so, Laravel will use the model channel conventions discussed above to convert the Eloquent model into a channel name string:\n\n```php\nreturn [new Channel($this->user)];\n```\n\nIf you need to determine the channel name of a model, you may call the `broadcastChannel` method on any model instance. For example, this method returns the string `App.Models.User.1` for an `App\\Models\\User` model with an `id` of `1`:\n\n```php\n$user->broadcastChannel()\n```\n\n<a name=\"model-broadcasting-event-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1102,"to":1114}}}}],["523",{"pageContent":"Event Conventions\n\nSince model broadcast events are not associated with an \"actual\" event within your application's `App\\Events` directory, they are assigned a name and a payload based on conventions. Laravel's convention is to broadcast the event using the class name of the model (not including the namespace) and the name of the model event that triggered the broadcast.\n\nSo, for example, an update to the `App\\Models\\Post` model would broadcast an event to your client-side application as `PostUpdated` with the following payload:\n\n```json\n{\n    \"model\": {\n        \"id\": 1,\n        \"title\": \"My first post\"\n        ...\n    },\n    ...\n    \"socket\": \"someSocketId\",\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1115,"to":1130}}}}],["524",{"pageContent":"The deletion of the `App\\Models\\User` model would broadcast an event named `UserDeleted`.\n\nIf you would like, you may define a custom broadcast name and payload by adding a `broadcastAs` and `broadcastWith` method to your model. These methods receive the name of the model event / operation that is occurring, allowing you to customize the event's name and payload for each model operation. If `null` is returned from the `broadcastAs` method, Laravel will use the model broadcasting event name conventions discussed above when broadcasting the event:\n\n```php\n/**\n * The model event's broadcast name.\n */\npublic function broadcastAs(string $event): string|null\n{\n    return match ($event) {\n        'created' => 'post.created',\n        default => null,\n    };\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1133,"to":1147}}}}],["525",{"pageContent":"/**\n * Get the data to broadcast for the model.\n *\n * @return array<string, mixed>\n */\npublic function broadcastWith(string $event): array\n{\n    return match ($event) {\n        'created' => ['title' => $this->title],\n        default => ['model' => $this],\n    };\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1149,"to":1160}}}}],["526",{"pageContent":"<a name=\"listening-for-model-broadcasts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1163,"to":1163}}}}],["527",{"pageContent":"Listening For Model Broadcasts\n\nOnce you have added the `BroadcastsEvents` trait to your model and defined your model's `broadcastOn` method, you are ready to start listening for broadcasted model events within your client-side application. Before getting started, you may wish to consult the complete documentation on [listening for events](#listening-for-events).\n\nFirst, use the `private` method to retrieve an instance of a channel, then call the `listen` method to listen for a specified event. Typically, the channel name given to the `private` method should correspond to Laravel's [model broadcasting conventions](#model-broadcasting-conventions).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1164,"to":1168}}}}],["528",{"pageContent":"Once you have obtained a channel instance, you may use the `listen` method to listen for a particular event. Since model broadcast events are not associated with an \"actual\" event within your application's `App\\Events` directory, the [event name](#model-broadcasting-event-conventions) must be prefixed with a `.` to indicate it does not belong to a particular namespace. Each model broadcast event has a `model` property which contains all of the broadcastable properties of the model:\n\n```js\nEcho.private(`App.Models.User.${this.user.id}`)\n    .listen('.PostUpdated', (e) => {\n        console.log(e.model);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1170,"to":1176}}}}],["529",{"pageContent":"<a name=\"client-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1179,"to":1179}}}}],["530",{"pageContent":"Client Events\n\n> **Note**  \n> When using [Pusher Channels](https://pusher.com/channels), you must enable the \"Client Events\" option in the \"App Settings\" section of your [application dashboard](https://dashboard.pusher.com/) in order to send client events.\n\nSometimes you may wish to broadcast an event to other connected clients without hitting your Laravel application at all. This can be particularly useful for things like \"typing\" notifications, where you want to alert users of your application that another user is typing a message on a given screen.\n\nTo broadcast client events, you may use Echo's `whisper` method:\n\n```js\nEcho.private(`chat.${roomId}`)\n    .whisper('typing', {\n        name: this.user.name\n    });\n```\n\nTo listen for client events, you may use the `listenForWhisper` method:\n\n```js\nEcho.private(`chat.${roomId}`)\n    .listenForWhisper('typing', (e) => {\n        console.log(e.name);\n    });\n```\n\n<a name=\"notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1180,"to":1205}}}}],["531",{"pageContent":"Notifications\n\nBy pairing event broadcasting with [notifications](/docs/{{version}}/notifications), your JavaScript application may receive new notifications as they occur without needing to refresh the page. Before getting started, be sure to read over the documentation on using [the broadcast notification channel](/docs/{{version}}/notifications#broadcast-notifications).\n\nOnce you have configured a notification to use the broadcast channel, you may listen for the broadcast events using Echo's `notification` method. Remember, the channel name should match the class name of the entity receiving the notifications:\n\n```js\nEcho.private(`App.Models.User.${userId}`)\n    .notification((notification) => {\n        console.log(notification.type);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1206,"to":1216}}}}],["532",{"pageContent":"In this example, all notifications sent to `App\\Models\\User` instances via the `broadcast` channel would be received by the callback. A channel authorization callback for the `App.Models.User.{id}` channel is included in the default `BroadcastServiceProvider` that ships with the Laravel framework.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/broadcasting.md","loc":{"lines":{"from":1219,"to":1219}}}}],["533",{"pageContent":"# Cache\n\n- [Introduction](#introduction)\n- [Configuration](#configuration)\n    - [Driver Prerequisites](#driver-prerequisites)\n- [Cache Usage](#cache-usage)\n    - [Obtaining A Cache Instance](#obtaining-a-cache-instance)\n    - [Retrieving Items From The Cache](#retrieving-items-from-the-cache)\n    - [Storing Items In The Cache](#storing-items-in-the-cache)\n    - [Removing Items From The Cache](#removing-items-from-the-cache)\n    - [The Cache Helper](#the-cache-helper)\n- [Atomic Locks](#atomic-locks)\n    - [Driver Prerequisites](#lock-driver-prerequisites)\n    - [Managing Locks](#managing-locks)\n    - [Managing Locks Across Processes](#managing-locks-across-processes)\n- [Adding Custom Cache Drivers](#adding-custom-cache-drivers)\n    - [Writing The Driver](#writing-the-driver)\n    - [Registering The Driver](#registering-the-driver)\n- [Events](#events)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":1,"to":21}}}}],["534",{"pageContent":"Introduction\n\nSome of the data retrieval or processing tasks performed by your application could be CPU intensive or take several seconds to complete. When this is the case, it is common to cache the retrieved data for a time so it can be retrieved quickly on subsequent requests for the same data. The cached data is usually stored in a very fast data store such as [Memcached](https://memcached.org) or [Redis](https://redis.io).\n\nThankfully, Laravel provides an expressive, unified API for various cache backends, allowing you to take advantage of their blazing fast data retrieval and speed up your web application.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":22,"to":28}}}}],["535",{"pageContent":"Configuration\n\nYour application's cache configuration file is located at `config/cache.php`. In this file, you may specify which cache driver you would like to be used by default throughout your application. Laravel supports popular caching backends like [Memcached](https://memcached.org), [Redis](https://redis.io), [DynamoDB](https://aws.amazon.com/dynamodb), and relational databases out of the box. In addition, a file based cache driver is available, while `array` and \"null\" cache drivers provide convenient cache backends for your automated tests.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":29,"to":31}}}}],["536",{"pageContent":"The cache configuration file also contains various other options, which are documented within the file, so make sure to read over these options. By default, Laravel is configured to use the `file` cache driver, which stores the serialized, cached objects on the server's filesystem. For larger applications, it is recommended that you use a more robust driver such as Memcached or Redis. You may even configure multiple cache configurations for the same driver.\n\n<a name=\"driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":33,"to":35}}}}],["537",{"pageContent":"Driver Prerequisites\n\n<a name=\"prerequisites-database\"></a>\n#### Database\n\nWhen using the `database` cache driver, you will need to set up a table to contain the cache items. You'll find an example `Schema` declaration for the table below:\n\n    Schema::create('cache', function (Blueprint $table) {\n        $table->string('key')->unique();\n        $table->text('value');\n        $table->integer('expiration');\n    });\n\n> **Note**  \n> You may also use the `php artisan cache:table` Artisan command to generate a migration with the proper schema.\n\n<a name=\"memcached\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":36,"to":52}}}}],["538",{"pageContent":"Memcached\n\nUsing the Memcached driver requires the [Memcached PECL package](https://pecl.php.net/package/memcached) to be installed. You may list all of your Memcached servers in the `config/cache.php` configuration file. This file already contains a `memcached.servers` entry to get you started:\n\n    'memcached' => [\n        'servers' => [\n            [\n                'host' => env('MEMCACHED_HOST', '127.0.0.1'),\n                'port' => env('MEMCACHED_PORT', 11211),\n                'weight' => 100,\n            ],\n        ],\n    ],\n\nIf needed, you may set the `host` option to a UNIX socket path. If you do this, the `port` option should be set to `0`:\n\n    'memcached' => [\n        [\n            'host' => '/var/run/memcached/memcached.sock',\n            'port' => 0,\n            'weight' => 100\n        ],\n    ],\n\n<a name=\"redis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":53,"to":77}}}}],["539",{"pageContent":"Redis\n\nBefore using a Redis cache with Laravel, you will need to either install the PhpRedis PHP extension via PECL or install the `predis/predis` package (~1.0) via Composer. [Laravel Sail](/docs/{{version}}/sail) already includes this extension. In addition, official Laravel deployment platforms such as [Laravel Forge](https://forge.laravel.com) and [Laravel Vapor](https://vapor.laravel.com) have the PhpRedis extension installed by default.\n\nFor more information on configuring Redis, consult its [Laravel documentation page](/docs/{{version}}/redis#configuration).\n\n<a name=\"dynamodb\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":78,"to":84}}}}],["540",{"pageContent":"DynamoDB\n\nBefore using the [DynamoDB](https://aws.amazon.com/dynamodb) cache driver, you must create a DynamoDB table to store all of the cached data. Typically, this table should be named `cache`. However, you should name the table based on the value of the `stores.dynamodb.table` configuration value within your application's `cache` configuration file.\n\nThis table should also have a string partition key with a name that corresponds to the value of the `stores.dynamodb.attributes.key` configuration item within your application's `cache` configuration file. By default, the partition key should be named `key`.\n\n<a name=\"cache-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":85,"to":91}}}}],["541",{"pageContent":"Cache Usage\n\n<a name=\"obtaining-a-cache-instance\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":92,"to":94}}}}],["542",{"pageContent":"Obtaining A Cache Instance\n\nTo obtain a cache store instance, you may use the `Cache` facade, which is what we will use throughout this documentation. The `Cache` facade provides convenient, terse access to the underlying implementations of the Laravel cache contracts:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Support\\Facades\\Cache;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show a list of all users of the application.\n         */\n        public function index(): array\n        {\n            $value = Cache::get('key');\n\n            return [\n                // ...\n            ];\n        }\n    }\n\n<a name=\"accessing-multiple-cache-stores\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":95,"to":120}}}}],["543",{"pageContent":"Accessing Multiple Cache Stores\n\nUsing the `Cache` facade, you may access various cache stores via the `store` method. The key passed to the `store` method should correspond to one of the stores listed in the `stores` configuration array in your `cache` configuration file:\n\n    $value = Cache::store('file')->get('foo');\n\n    Cache::store('redis')->put('bar', 'baz', 600); // 10 Minutes\n\n<a name=\"retrieving-items-from-the-cache\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":121,"to":129}}}}],["544",{"pageContent":"Retrieving Items From The Cache\n\nThe `Cache` facade's `get` method is used to retrieve items from the cache. If the item does not exist in the cache, `null` will be returned. If you wish, you may pass a second argument to the `get` method specifying the default value you wish to be returned if the item doesn't exist:\n\n    $value = Cache::get('key');\n\n    $value = Cache::get('key', 'default');\n\nYou may even pass a closure as the default value. The result of the closure will be returned if the specified item does not exist in the cache. Passing a closure allows you to defer the retrieval of default values from a database or other external service:\n\n    $value = Cache::get('key', function () {\n        return DB::table(/* ... */)->get();\n    });\n\n<a name=\"checking-for-item-existence\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":130,"to":144}}}}],["545",{"pageContent":"Checking For Item Existence\n\nThe `has` method may be used to determine if an item exists in the cache. This method will also return `false` if the item exists but its value is `null`:\n\n    if (Cache::has('key')) {\n        // ...\n    }\n\n<a name=\"incrementing-decrementing-values\"></a>\n#### Incrementing / Decrementing Values\n\nThe `increment` and `decrement` methods may be used to adjust the value of integer items in the cache. Both of these methods accept an optional second argument indicating the amount by which to increment or decrement the item's value:\n\n    // Initialize the value if it does not exist...\n    Cache::add('key', 0, now()->addHours(4));\n\n    // Increment or decrement the value...\n    Cache::increment('key');\n    Cache::increment('key', $amount);\n    Cache::decrement('key');\n    Cache::decrement('key', $amount);\n\n<a name=\"retrieve-store\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":145,"to":167}}}}],["546",{"pageContent":"Retrieve & Store\n\nSometimes you may wish to retrieve an item from the cache, but also store a default value if the requested item doesn't exist. For example, you may wish to retrieve all users from the cache or, if they don't exist, retrieve them from the database and add them to the cache. You may do this using the `Cache::remember` method:\n\n    $value = Cache::remember('users', $seconds, function () {\n        return DB::table('users')->get();\n    });\n\nIf the item does not exist in the cache, the closure passed to the `remember` method will be executed and its result will be placed in the cache.\n\nYou may use the `rememberForever` method to retrieve an item from the cache or store it forever if it does not exist:\n\n    $value = Cache::rememberForever('users', function () {\n        return DB::table('users')->get();\n    });\n\n<a name=\"retrieve-delete\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":168,"to":184}}}}],["547",{"pageContent":"Retrieve & Delete\n\nIf you need to retrieve an item from the cache and then delete the item, you may use the `pull` method. Like the `get` method, `null` will be returned if the item does not exist in the cache:\n\n    $value = Cache::pull('key');\n\n<a name=\"storing-items-in-the-cache\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":185,"to":191}}}}],["548",{"pageContent":"Storing Items In The Cache\n\nYou may use the `put` method on the `Cache` facade to store items in the cache:\n\n    Cache::put('key', 'value', $seconds = 10);\n\nIf the storage time is not passed to the `put` method, the item will be stored indefinitely:\n\n    Cache::put('key', 'value');\n\nInstead of passing the number of seconds as an integer, you may also pass a `DateTime` instance representing the desired expiration time of the cached item:\n\n    Cache::put('key', 'value', now()->addMinutes(10));\n\n<a name=\"store-if-not-present\"></a>\n#### Store If Not Present\n\nThe `add` method will only add the item to the cache if it does not already exist in the cache store. The method will return `true` if the item is actually added to the cache. Otherwise, the method will return `false`. The `add` method is an atomic operation:\n\n    Cache::add('key', 'value', $seconds);\n\n<a name=\"storing-items-forever\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":192,"to":213}}}}],["549",{"pageContent":"Storing Items Forever\n\nThe `forever` method may be used to store an item in the cache permanently. Since these items will not expire, they must be manually removed from the cache using the `forget` method:\n\n    Cache::forever('key', 'value');\n\n> **Note**  \n> If you are using the Memcached driver, items that are stored \"forever\" may be removed when the cache reaches its size limit.\n\n<a name=\"removing-items-from-the-cache\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":214,"to":223}}}}],["550",{"pageContent":"Removing Items From The Cache\n\nYou may remove items from the cache using the `forget` method:\n\n    Cache::forget('key');\n\nYou may also remove items by providing a zero or negative number of expiration seconds:\n\n    Cache::put('key', 'value', 0);\n\n    Cache::put('key', 'value', -5);\n\nYou may clear the entire cache using the `flush` method:\n\n    Cache::flush();\n\n> **Warning**  \n> Flushing the cache does not respect your configured cache \"prefix\" and will remove all entries from the cache. Consider this carefully when clearing a cache which is shared by other applications.\n\n<a name=\"the-cache-helper\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":224,"to":243}}}}],["551",{"pageContent":"The Cache Helper\n\nIn addition to using the `Cache` facade, you may also use the global `cache` function to retrieve and store data via the cache. When the `cache` function is called with a single, string argument, it will return the value of the given key:\n\n    $value = cache('key');\n\nIf you provide an array of key / value pairs and an expiration time to the function, it will store values in the cache for the specified duration:\n\n    cache(['key' => 'value'], $seconds);\n\n    cache(['key' => 'value'], now()->addMinutes(10));\n\nWhen the `cache` function is called without any arguments, it returns an instance of the `Illuminate\\Contracts\\Cache\\Factory` implementation, allowing you to call other caching methods:\n\n    cache()->remember('users', $seconds, function () {\n        return DB::table('users')->get();\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":244,"to":260}}}}],["552",{"pageContent":"cache()->remember('users', $seconds, function () {\n        return DB::table('users')->get();\n    });\n\n> **Note**  \n> When testing call to the global `cache` function, you may use the `Cache::shouldReceive` method just as if you were [testing the facade](/docs/{{version}}/mocking#mocking-facades).\n\n<a name=\"atomic-locks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":260,"to":267}}}}],["553",{"pageContent":"Atomic Locks\n\n> **Warning**  \n> To utilize this feature, your application must be using the `memcached`, `redis`, `dynamodb`, `database`, `file`, or `array` cache driver as your application's default cache driver. In addition, all servers must be communicating with the same central cache server.\n\n<a name=\"lock-driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":268,"to":273}}}}],["554",{"pageContent":"Driver Prerequisites\n\n<a name=\"atomic-locks-prerequisites-database\"></a>\n#### Database\n\nWhen using the `database` cache driver, you will need to setup a table to contain your application's cache locks. You'll find an example `Schema` declaration for the table below:\n\n    Schema::create('cache_locks', function (Blueprint $table) {\n        $table->string('key')->primary();\n        $table->string('owner');\n        $table->integer('expiration');\n    });\n\n> **Note**\n> If you used the `cache:table` Artisan command to create the database driver's cache table, the migration created by that command already includes a definition for the `cache_locks` table.\n\n<a name=\"managing-locks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":274,"to":290}}}}],["555",{"pageContent":"Managing Locks\n\nAtomic locks allow for the manipulation of distributed locks without worrying about race conditions. For example, [Laravel Forge](https://forge.laravel.com) uses atomic locks to ensure that only one remote task is being executed on a server at a time. You may create and manage locks using the `Cache::lock` method:\n\n    use Illuminate\\Support\\Facades\\Cache;\n\n    $lock = Cache::lock('foo', 10);\n\n    if ($lock->get()) {\n        // Lock acquired for 10 seconds...\n\n        $lock->release();\n    }\n\nThe `get` method also accepts a closure. After the closure is executed, Laravel will automatically release the lock:\n\n    Cache::lock('foo', 10)->get(function () {\n        // Lock acquired for 10 seconds and automatically released...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":291,"to":309}}}}],["556",{"pageContent":"Cache::lock('foo', 10)->get(function () {\n        // Lock acquired for 10 seconds and automatically released...\n    });\n\nIf the lock is not available at the moment you request it, you may instruct Laravel to wait for a specified number of seconds. If the lock can not be acquired within the specified time limit, an `Illuminate\\Contracts\\Cache\\LockTimeoutException` will be thrown:\n\n    use Illuminate\\Contracts\\Cache\\LockTimeoutException;\n\n    $lock = Cache::lock('foo', 10);\n\n    try {\n        $lock->block(5);\n\n        // Lock acquired after waiting a maximum of 5 seconds...\n    } catch (LockTimeoutException $e) {\n        // Unable to acquire lock...\n    } finally {\n        $lock?->release();\n    }\n\nThe example above may be simplified by passing a closure to the `block` method. When a closure is passed to this method, Laravel will attempt to acquire the lock for the specified number of seconds and will automatically release the lock once the closure has been executed:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":309,"to":329}}}}],["557",{"pageContent":"Cache::lock('foo', 10)->block(5, function () {\n        // Lock acquired after waiting a maximum of 5 seconds...\n    });\n\n<a name=\"managing-locks-across-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":331,"to":335}}}}],["558",{"pageContent":"Managing Locks Across Processes\n\nSometimes, you may wish to acquire a lock in one process and release it in another process. For example, you may acquire a lock during a web request and wish to release the lock at the end of a queued job that is triggered by that request. In this scenario, you should pass the lock's scoped \"owner token\" to the queued job so that the job can re-instantiate the lock using the given token.\n\nIn the example below, we will dispatch a queued job if a lock is successfully acquired. In addition, we will pass the lock's owner token to the queued job via the lock's `owner` method:\n\n    $podcast = Podcast::find($id);\n\n    $lock = Cache::lock('processing', 120);\n\n    if ($lock->get()) {\n        ProcessPodcast::dispatch($podcast, $lock->owner());\n    }\n\nWithin our application's `ProcessPodcast` job, we can restore and release the lock using the owner token:\n\n    Cache::restoreLock('processing', $this->owner)->release();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":336,"to":352}}}}],["559",{"pageContent":"Within our application's `ProcessPodcast` job, we can restore and release the lock using the owner token:\n\n    Cache::restoreLock('processing', $this->owner)->release();\n\nIf you would like to release a lock without respecting its current owner, you may use the `forceRelease` method:\n\n    Cache::lock('processing')->forceRelease();\n\n<a name=\"adding-custom-cache-drivers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":352,"to":360}}}}],["560",{"pageContent":"Adding Custom Cache Drivers\n\n<a name=\"writing-the-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":361,"to":363}}}}],["561",{"pageContent":"Writing The Driver\n\nTo create our custom cache driver, we first need to implement the `Illuminate\\Contracts\\Cache\\Store` [contract](/docs/{{version}}/contracts). So, a MongoDB cache implementation might look something like this:\n\n    <?php\n\n    namespace App\\Extensions;\n\n    use Illuminate\\Contracts\\Cache\\Store;\n\n    class MongoStore implements Store\n    {\n        public function get($key) {}\n        public function many(array $keys) {}\n        public function put($key, $value, $seconds) {}\n        public function putMany(array $values, $seconds) {}\n        public function increment($key, $value = 1) {}\n        public function decrement($key, $value = 1) {}\n        public function forever($key, $value) {}\n        public function forget($key) {}\n        public function flush() {}\n        public function getPrefix() {}\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":364,"to":386}}}}],["562",{"pageContent":"We just need to implement each of these methods using a MongoDB connection. For an example of how to implement each of these methods, take a look at the `Illuminate\\Cache\\MemcachedStore` in the [Laravel framework source code](https://github.com/laravel/framework). Once our implementation is complete, we can finish our custom driver registration by calling the `Cache` facade's `extend` method:\n\n    Cache::extend('mongo', function (Application $app) {\n        return Cache::repository(new MongoStore);\n    });\n\n> **Note**  \n> If you're wondering where to put your custom cache driver code, you could create an `Extensions` namespace within your `app` directory. However, keep in mind that Laravel does not have a rigid application structure and you are free to organize your application according to your preferences.\n\n<a name=\"registering-the-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":388,"to":397}}}}],["563",{"pageContent":"Registering The Driver\n\nTo register the custom cache driver with Laravel, we will use the `extend` method on the `Cache` facade. Since other service providers may attempt to read cached values within their `boot` method, we will register our custom driver within a `booting` callback. By using the `booting` callback, we can ensure that the custom driver is registered just before the `boot` method is called on our application's service providers but after the `register` method is called on all of the service providers. We will register our `booting` callback within the `register` method of our application's `App\\Providers\\AppServiceProvider` class:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Extensions\\MongoStore;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Support\\Facades\\Cache;\n    use Illuminate\\Support\\ServiceProvider;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":398,"to":409}}}}],["564",{"pageContent":"use App\\Extensions\\MongoStore;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Support\\Facades\\Cache;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            $this->app->booting(function () {\n                 Cache::extend('mongo', function (Application $app) {\n                     return Cache::repository(new MongoStore);\n                 });\n             });\n        }\n\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":409,"to":435}}}}],["565",{"pageContent":"/**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            // ...\n        }\n    }\n\nThe first argument passed to the `extend` method is the name of the driver. This will correspond to your `driver` option in the `config/cache.php` configuration file. The second argument is a closure that should return an `Illuminate\\Cache\\Repository` instance. The closure will be passed an `$app` instance, which is an instance of the [service container](/docs/{{version}}/container).\n\nOnce your extension is registered, update your `config/cache.php` configuration file's `driver` option to the name of your extension.\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":435,"to":448}}}}],["566",{"pageContent":"Events\n\nTo execute code on every cache operation, you may listen for the [events](/docs/{{version}}/events) fired by the cache. Typically, you should place these event listeners within your application's `App\\Providers\\EventServiceProvider` class:\n    \n    use App\\Listeners\\LogCacheHit;\n    use App\\Listeners\\LogCacheMissed;\n    use App\\Listeners\\LogKeyForgotten;\n    use App\\Listeners\\LogKeyWritten;\n    use Illuminate\\Cache\\Events\\CacheHit;\n    use Illuminate\\Cache\\Events\\CacheMissed;\n    use Illuminate\\Cache\\Events\\KeyForgotten;\n    use Illuminate\\Cache\\Events\\KeyWritten;\n    \n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        CacheHit::class => [\n            LogCacheHit::class,\n        ],\n\n        CacheMissed::class => [\n            LogCacheMissed::class,\n        ],\n\n        KeyForgotten::class => [\n            LogKeyForgotten::class,\n        ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":449,"to":478}}}}],["567",{"pageContent":"CacheMissed::class => [\n            LogCacheMissed::class,\n        ],\n\n        KeyForgotten::class => [\n            LogKeyForgotten::class,\n        ],\n\n        KeyWritten::class => [\n            LogKeyWritten::class,\n        ],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cache.md","loc":{"lines":{"from":478,"to":489}}}}],["568",{"pageContent":"# Laravel Cashier (Paddle)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1,"to":1}}}}],["569",{"pageContent":"- [Introduction](#introduction)\n- [Upgrading Cashier](#upgrading-cashier)\n- [Installation](#installation)\n    - [Paddle Sandbox](#paddle-sandbox)\n    - [Database Migrations](#database-migrations)\n- [Configuration](#configuration)\n    - [Billable Model](#billable-model)\n    - [API Keys](#api-keys)\n    - [Paddle JS](#paddle-js)\n    - [Currency Configuration](#currency-configuration)\n    - [Overriding Default Models](#overriding-default-models)\n- [Core Concepts](#core-concepts)\n    - [Pay Links](#pay-links)\n    - [Inline Checkout](#inline-checkout)\n    - [User Identification](#user-identification)\n- [Prices](#prices)\n- [Customers](#customers)\n    - [Customer Defaults](#customer-defaults)\n- [Subscriptions](#subscriptions)\n    - [Creating Subscriptions](#creating-subscriptions)\n    - [Checking Subscription Status](#checking-subscription-status)\n    - [Subscription Single Charges](#subscription-single-charges)\n    - [Updating Payment Information](#updating-payment-information)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":3,"to":25}}}}],["570",{"pageContent":"- [Checking Subscription Status](#checking-subscription-status)\n    - [Subscription Single Charges](#subscription-single-charges)\n    - [Updating Payment Information](#updating-payment-information)\n    - [Changing Plans](#changing-plans)\n    - [Subscription Quantity](#subscription-quantity)\n    - [Subscription Modifiers](#subscription-modifiers)\n    - [Multiple Subscriptions](#multiple-subscriptions)\n    - [Pausing Subscriptions](#pausing-subscriptions)\n    - [Cancelling Subscriptions](#cancelling-subscriptions)\n- [Subscription Trials](#subscription-trials)\n    - [With Payment Method Up Front](#with-payment-method-up-front)\n    - [Without Payment Method Up Front](#without-payment-method-up-front)\n- [Handling Paddle Webhooks](#handling-paddle-webhooks)\n    - [Defining Webhook Event Handlers](#defining-webhook-event-handlers)\n    - [Verifying Webhook Signatures](#verifying-webhook-signatures)\n- [Single Charges](#single-charges)\n    - [Simple Charge](#simple-charge)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":25,"to":41}}}}],["571",{"pageContent":"- [Verifying Webhook Signatures](#verifying-webhook-signatures)\n- [Single Charges](#single-charges)\n    - [Simple Charge](#simple-charge)\n    - [Charging Products](#charging-products)\n    - [Refunding Orders](#refunding-orders)\n- [Receipts](#receipts)\n    - [Past & Upcoming Payments](#past-and-upcoming-payments)\n- [Handling Failed Payments](#handling-failed-payments)\n- [Testing](#testing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":41,"to":49}}}}],["572",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":51,"to":51}}}}],["573",{"pageContent":"Introduction\n\n> **Warning**\n> At this time, Cashier Paddle only supports Paddle Classic, which is not available to new Paddle customers unless you contact Paddle support.\n\n[Laravel Cashier Paddle](https://github.com/laravel/cashier-paddle) provides an expressive, fluent interface to [Paddle's](https://paddle.com) subscription billing services. It handles almost all of the boilerplate subscription billing code you are dreading. In addition to basic subscription management, Cashier can handle: coupons, swapping subscription, subscription \"quantities\", cancellation grace periods, and more.\n\nWhile working with Cashier we recommend you also review Paddle's [user guides](https://developer.paddle.com/guides) and [API documentation](https://developer.paddle.com/api-reference).\n\n<a name=\"upgrading-cashier\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":52,"to":61}}}}],["574",{"pageContent":"Upgrading Cashier\n\nWhen upgrading to a new version of Cashier, it's important that you carefully review [the upgrade guide](https://github.com/laravel/cashier-paddle/blob/master/UPGRADE.md).\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":62,"to":66}}}}],["575",{"pageContent":"Installation\n\nFirst, install the Cashier package for Paddle using the Composer package manager:\n\n```shell\ncomposer require laravel/cashier-paddle\n```\n\n> **Warning**  \n> To ensure Cashier properly handles all Paddle events, remember to [set up Cashier's webhook handling](#handling-paddle-webhooks).\n\n<a name=\"paddle-sandbox\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":67,"to":78}}}}],["576",{"pageContent":"Paddle Sandbox\n\nDuring local and staging development, you should [register a Paddle Sandbox account](https://developer.paddle.com/getting-started/sandbox). This account will give you a sandboxed environment to test and develop your applications without making actual payments. You may use Paddle's [test card numbers](https://developer.paddle.com/getting-started/sandbox#test-cards) to simulate various payment scenarios.\n\nWhen using the Paddle Sandbox environment, you should set the `PADDLE_SANDBOX` environment variable to `true` within your application's `.env` file:\n\n```ini\nPADDLE_SANDBOX=true\n```\n\nAfter you have finished developing your application you may [apply for a Paddle vendor account](https://paddle.com). Before your application is placed into production, Paddle will need to approve your application's domain.\n\n<a name=\"database-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":79,"to":91}}}}],["577",{"pageContent":"Database Migrations\n\nThe Cashier service provider registers its own database migration directory, so remember to migrate your database after installing the package. The Cashier migrations will create a new `customers` table. In addition, a new `subscriptions` table will be created to store all of your customer's subscriptions. Finally, a new `receipts` table will be created to store all of your application's receipt information:\n\n```shell\nphp artisan migrate\n```\n\nIf you need to overwrite the migrations that are included with Cashier, you can publish them using the `vendor:publish` Artisan command:\n\n```shell\nphp artisan vendor:publish --tag=\"cashier-migrations\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":92,"to":103}}}}],["578",{"pageContent":"If you would like to prevent Cashier's migrations from running entirely, you may use the `ignoreMigrations` provided by Cashier. Typically, this method should be called in the `register` method of your `AppServiceProvider`:\n\n    use Laravel\\Paddle\\Cashier;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        Cashier::ignoreMigrations();\n    }\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":106,"to":118}}}}],["579",{"pageContent":"Configuration\n\n<a name=\"billable-model\"></a>\n### Billable Model\n\nBefore using Cashier, you must add the `Billable` trait to your user model definition. This trait provides various methods to allow you to perform common billing tasks, such as creating subscriptions, applying coupons and updating payment method information:\n\n    use Laravel\\Paddle\\Billable;\n\n    class User extends Authenticatable\n    {\n        use Billable;\n    }\n\nIf you have billable entities that are not users, you may also add the trait to those classes:\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Laravel\\Paddle\\Billable;\n\n    class Team extends Model\n    {\n        use Billable;\n    }\n\n<a name=\"api-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":119,"to":143}}}}],["580",{"pageContent":"API Keys\n\nNext, you should configure your Paddle keys in your application's `.env` file. You can retrieve your Paddle API keys from the Paddle control panel:\n\n```ini\nPADDLE_VENDOR_ID=your-paddle-vendor-id\nPADDLE_VENDOR_AUTH_CODE=your-paddle-vendor-auth-code\nPADDLE_PUBLIC_KEY=\"your-paddle-public-key\"\nPADDLE_SANDBOX=true\n```\n\nThe `PADDLE_SANDBOX` environment variable should be set to `true` when you are using [Paddle's Sandbox environment](#paddle-sandbox). The `PADDLE_SANDBOX` variable should be set to `false` if you are deploying your application to production and are using Paddle's live vendor environment.\n\n<a name=\"paddle-js\"></a>\n### Paddle JS\n\nPaddle relies on its own JavaScript library to initiate the Paddle checkout widget. You can load the JavaScript library by placing the `@paddleJS` Blade directive right before your application layout's closing `</head>` tag:\n\n```blade\n<head>\n    ...\n\n    @paddleJS\n</head>\n```\n\n<a name=\"currency-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":144,"to":170}}}}],["581",{"pageContent":"Currency Configuration\n\nThe default Cashier currency is United States Dollars (USD). You can change the default currency by defining a `CASHIER_CURRENCY` environment variable within your application's `.env` file:\n\n```ini\nCASHIER_CURRENCY=EUR\n```\n\nIn addition to configuring Cashier's currency, you may also specify a locale to be used when formatting money values for display on invoices. Internally, Cashier utilizes [PHP's `NumberFormatter` class](https://www.php.net/manual/en/class.numberformatter.php) to set the currency locale:\n\n```ini\nCASHIER_CURRENCY_LOCALE=nl_BE\n```\n\n> **Warning**  \n> In order to use locales other than `en`, ensure the `ext-intl` PHP extension is installed and configured on your server.\n\n<a name=\"overriding-default-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":171,"to":188}}}}],["582",{"pageContent":"Overriding Default Models\n\nYou are free to extend the models used internally by Cashier by defining your own model and extending the corresponding Cashier model:\n\n    use Laravel\\Paddle\\Subscription as CashierSubscription;\n\n    class Subscription extends CashierSubscription\n    {\n        // ...\n    }\n\nAfter defining your model, you may instruct Cashier to use your custom model via the `Laravel\\Paddle\\Cashier` class. Typically, you should inform Cashier about your custom models in the `boot` method of your application's `App\\Providers\\AppServiceProvider` class:\n\n    use App\\Models\\Cashier\\Receipt;\n    use App\\Models\\Cashier\\Subscription;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Cashier::useReceiptModel(Receipt::class);\n        Cashier::useSubscriptionModel(Subscription::class);\n    }\n\n<a name=\"core-concepts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":189,"to":214}}}}],["583",{"pageContent":"Core Concepts\n\n<a name=\"pay-links\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":215,"to":217}}}}],["584",{"pageContent":"Pay Links\n\nPaddle lacks an extensive CRUD API to perform subscription state changes. Therefore, most interactions with Paddle are done through its [checkout widget](https://developer.paddle.com/guides/how-tos/checkout/paddle-checkout). Before we can display the checkout widget, we must generate a \"pay link\" using Cashier. A \"pay link\" will inform the checkout widget of the billing operation we wish to perform:\n\n    use App\\Models\\User;\n    use Illuminate\\Http\\Request;\n\n    Route::get('/user/subscribe', function (Request $request) {\n        $payLink = $request->user()->newSubscription('default', $premium = 34567)\n            ->returnTo(route('home'))\n            ->create();\n\n        return view('billing', ['payLink' => $payLink]);\n    });\n\nCashier includes a `paddle-button` [Blade component](/docs/{{version}}/blade#components). We may pass the pay link URL to this component as a \"prop\". When this button is clicked, Paddle's checkout widget will be displayed:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":218,"to":233}}}}],["585",{"pageContent":"```html\n<x-paddle-button :url=\"$payLink\" class=\"px-8 py-4\">\n    Subscribe\n</x-paddle-button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":235,"to":238}}}}],["586",{"pageContent":"By default, this will display a button with the standard Paddle styling. You can remove all Paddle styling by adding the `data-theme=\"none\"` attribute to the component:\n\n```html\n<x-paddle-button :url=\"$payLink\" class=\"px-8 py-4\" data-theme=\"none\">\n    Subscribe\n</x-paddle-button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":241,"to":246}}}}],["587",{"pageContent":"The Paddle checkout widget is asynchronous. Once the user creates or updates a subscription within the widget, Paddle will send your application webhooks so that you may properly update the subscription state in our own database. Therefore, it's important that you properly [set up webhooks](#handling-paddle-webhooks) to accommodate for state changes from Paddle.\n\nFor more information on pay links, you may review [the Paddle API documentation on pay link generation](https://developer.paddle.com/api-reference/product-api/pay-links/createpaylink).\n\n> **Warning**  \n> After a subscription state change, the delay for receiving the corresponding webhook is typically minimal but you should account for this in your application by considering that your user's subscription might not be immediately available after completing the checkout.\n\n<a name=\"manually-rendering-pay-links\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":249,"to":256}}}}],["588",{"pageContent":"Manually Rendering Pay Links\n\nYou may also manually render a pay link without using Laravel's built-in Blade components. To get started, generate the pay link URL as demonstrated in previous examples:\n\n    $payLink = $request->user()->newSubscription('default', $premium = 34567)\n        ->returnTo(route('home'))\n        ->create();\n\nNext, simply attach the pay link URL to an `a` element in your HTML:\n\n    <a href=\"#!\" class=\"ml-4 paddle_button\" data-override=\"{{ $payLink }}\">\n        Paddle Checkout\n    </a>\n\n<a name=\"payments-requiring-additional-confirmation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":257,"to":271}}}}],["589",{"pageContent":"Payments Requiring Additional Confirmation\n\nSometimes additional verification is required in order to confirm and process a payment. When this happens, Paddle will present a payment confirmation screen. Payment confirmation screens presented by Paddle or Cashier may be tailored to a specific bank or card issuer's payment flow and can include additional card confirmation, a temporary small charge, separate device authentication, or other forms of verification.\n\n<a name=\"inline-checkout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":272,"to":276}}}}],["590",{"pageContent":"Inline Checkout\n\nIf you don't want to make use of Paddle's \"overlay\" style checkout widget, Paddle also provides the option to display the widget inline. While this approach does not allow you to adjust any of the checkout's HTML fields, it allows you to embed the widget within your application.\n\nTo make it easy for you to get started with inline checkout, Cashier includes a `paddle-checkout` Blade component. To get started, you should [generate a pay link](#pay-links) and pass the pay link to the component's `override` attribute:\n\n```blade\n<x-paddle-checkout :override=\"$payLink\" class=\"w-full\" />\n```\n\nTo adjust the height of the inline checkout component, you may pass the `height` attribute to the Blade component:\n\n```blade\n<x-paddle-checkout :override=\"$payLink\" class=\"w-full\" height=\"500\" />\n```\n\n<a name=\"inline-checkout-without-pay-links\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":277,"to":293}}}}],["591",{"pageContent":"Inline Checkout Without Pay Links\n\nAlternatively, you may customize the widget with custom options instead of using a pay link:\n\n```blade\n@php\n$options = [\n    'product' => $productId,\n    'title' => 'Product Title',\n];\n@endphp\n\n<x-paddle-checkout :options=\"$options\" class=\"w-full\" />\n```\n\nPlease consult Paddle's [guide on Inline Checkout](https://developer.paddle.com/guides/how-tos/checkout/inline-checkout) as well as their [parameter reference](https://developer.paddle.com/reference/paddle-js/parameters) for further details on the inline checkout's available options.\n\n> **Warning**  \n> If you would like to also use the `passthrough` option when specifying custom options, you should provide a key / value array as its value. Cashier will automatically handle converting the array to a JSON string. In addition, the `customer_id` passthrough option is reserved for internal Cashier usage.\n\n<a name=\"manually-rendering-an-inline-checkout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":294,"to":314}}}}],["592",{"pageContent":"Manually Rendering An Inline Checkout\n\nYou may also manually render an inline checkout without using Laravel's built-in Blade components. To get started, generate the pay link URL [as demonstrated in previous examples](#pay-links).\n\nNext, you may use Paddle.js to initialize the checkout. To keep this example simple, we will demonstrate this using [Alpine.js](https://github.com/alpinejs/alpine); however, you are free to translate this example to your own frontend stack:\n\n```alpine\n<div class=\"paddle-checkout\" x-data=\"{}\" x-init=\"\n    Paddle.Checkout.open({\n        override: {{ $payLink }},\n        method: 'inline',\n        frameTarget: 'paddle-checkout',\n        frameInitialHeight: 366,\n        frameStyle: 'width: 100%; background-color: transparent; border: none;'\n    });\n\">\n</div>\n```\n\n<a name=\"user-identification\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":315,"to":334}}}}],["593",{"pageContent":"User Identification\n\nIn contrast to Stripe, Paddle users are unique across all of Paddle, not unique per Paddle account. Because of this, Paddle's API's do not currently provide a method to update a user's details such as their email address. When generating pay links, Paddle identifies users using the `customer_email` parameter. When creating a subscription, Paddle will try to match the user provided email to an existing Paddle user.\n\nIn light of this behavior, there are some important things to keep in mind when using Cashier and Paddle. First, you should be aware that even though subscriptions in Cashier are tied to the same application user, **they could be tied to different users within Paddle's internal systems**. Secondly, each subscription has its own connected payment method information and could also have different email addresses within Paddle's internal systems (depending on which email was assigned to the user when the subscription was created).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":335,"to":339}}}}],["594",{"pageContent":"Therefore, when displaying subscriptions you should always inform the user which email address or payment method information is connected to the subscription on a per-subscription basis. Retrieving this information can be done with the following methods provided by the `Laravel\\Paddle\\Subscription` model:\n\n    $subscription = $user->subscription('default');\n\n    $subscription->paddleEmail();\n    $subscription->paymentMethod();\n    $subscription->cardBrand();\n    $subscription->cardLastFour();\n    $subscription->cardExpirationDate();\n\nThere is currently no way to modify a user's email address through the Paddle API. When a user wants to update their email address within Paddle, the only way for them to do so is to contact Paddle customer support. When communicating with Paddle, they need to provide the `paddleEmail` value of the subscription to assist Paddle in updating the correct user.\n\n<a name=\"prices\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":341,"to":353}}}}],["595",{"pageContent":"Prices\n\nPaddle allows you to customize prices per currency, essentially allowing you to configure different prices for different countries. Cashier Paddle allows you to retrieve all of the prices for a given product using the `productPrices` method. This method accepts the product IDs of the products you wish to retrieve prices for:\n\n    use Laravel\\Paddle\\Cashier;\n\n    $prices = Cashier::productPrices([123, 456]);\n\nThe currency will be determined based on the IP address of the request; however, you may optionally provide a specific country to retrieve prices for:\n\n    use Laravel\\Paddle\\Cashier;\n\n    $prices = Cashier::productPrices([123, 456], ['customer_country' => 'BE']);\n\nAfter retrieving the prices you may display them however you wish:\n\n```blade\n<ul>\n    @foreach ($prices as $price)\n        <li>{{ $price->product_title }} - {{ $price->price()->gross() }}</li>\n    @endforeach\n</ul>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":354,"to":375}}}}],["596",{"pageContent":"You may also display the net price (excludes tax) and display the tax amount separately:\n\n```blade\n<ul>\n    @foreach ($prices as $price)\n        <li>{{ $price->product_title }} - {{ $price->price()->net() }} (+ {{ $price->price()->tax() }} tax)</li>\n    @endforeach\n</ul>\n```\n\nIf you retrieved prices for subscription plans you can display their initial and recurring price separately:\n\n```blade\n<ul>\n    @foreach ($prices as $price)\n        <li>{{ $price->product_title }} - Initial: {{ $price->initialPrice()->gross() }} - Recurring: {{ $price->recurringPrice()->gross() }}</li>\n    @endforeach\n</ul>\n```\n\nFor more information, [check Paddle's API documentation on prices](https://developer.paddle.com/api-reference/checkout-api/prices/getprices).\n\n<a name=\"prices-customers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":378,"to":400}}}}],["597",{"pageContent":"Customers\n\nIf a user is already a customer and you would like to display the prices that apply to that customer, you may do so by retrieving the prices directly from the customer instance:\n\n    use App\\Models\\User;\n\n    $prices = User::find(1)->productPrices([123, 456]);\n\nInternally, Cashier will use the user's [`paddleCountry` method](#customer-defaults) to retrieve the prices in their currency. So, for example, a user living in the United States will see prices in USD while a user in Belgium will see prices in EUR. If no matching currency can be found the default currency of the product will be used. You can customize all prices of a product or subscription plan in the Paddle control panel.\n\n<a name=\"prices-coupons\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":401,"to":411}}}}],["598",{"pageContent":"Coupons\n\nYou may also choose to display prices after a coupon reduction. When calling the `productPrices` method, coupons may be passed as a comma delimited string:\n\n    use Laravel\\Paddle\\Cashier;\n\n    $prices = Cashier::productPrices([123, 456], [\n        'coupons' => 'SUMMERSALE,20PERCENTOFF'\n    ]);\n\nThen, display the calculated prices using the `price` method:\n\n```blade\n<ul>\n    @foreach ($prices as $price)\n        <li>{{ $price->product_title }} - {{ $price->price()->gross() }}</li>\n    @endforeach\n</ul>\n```\n\nYou may display the original listed prices (without coupon discounts) using the `listPrice` method:\n\n```blade\n<ul>\n    @foreach ($prices as $price)\n        <li>{{ $price->product_title }} - {{ $price->listPrice()->gross() }}</li>\n    @endforeach\n</ul>\n```\n\n> **Warning**  \n> When using the prices API, Paddle only allows applying coupons to one-time purchase products and not to subscription plans.\n\n<a name=\"customers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":412,"to":445}}}}],["599",{"pageContent":"Customers\n\n<a name=\"customer-defaults\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":446,"to":448}}}}],["600",{"pageContent":"Customer Defaults\n\nCashier allows you to define some useful defaults for your customers when creating pay links. Setting these defaults allow you to pre-fill a customer's email address, country, and postal code so that they can immediately move on to the payment portion of the checkout widget. You can set these defaults by overriding the following methods on your billable model:\n\n    /**\n     * Get the customer's email address to associate with Paddle.\n     */\n    public function paddleEmail(): string|null\n    {\n        return $this->email;\n    }\n\n    /**\n     * Get the customer's country to associate with Paddle.\n     *\n     * This needs to be a 2 letter code. See the link below for supported countries.\n     *\n     * @link https://developer.paddle.com/reference/platform-parameters/supported-countries\n     */\n    public function paddleCountry(): string|null\n    {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":449,"to":471}}}}],["601",{"pageContent":"/**\n     * Get the customer's postal code to associate with Paddle.\n     *\n     * See the link below for countries which require this.\n     *\n     * @link https://developer.paddle.com/reference/platform-parameters/supported-countries#countries-requiring-postcode\n     */\n    public function paddlePostcode(): string|null\n    {\n        // ...\n    }\n\nThese defaults will be used for every action in Cashier that generates a [pay link](#pay-links).\n\n<a name=\"subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":473,"to":487}}}}],["602",{"pageContent":"Subscriptions\n\n<a name=\"creating-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":488,"to":490}}}}],["603",{"pageContent":"Creating Subscriptions\n\nTo create a subscription, first retrieve an instance of your billable model from your database, which typically will be an instance of `App\\Models\\User`. Once you have retrieved the model instance, you may use the `newSubscription` method to create the model's subscription pay link:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/user/subscribe', function (Request $request) {\n        $payLink = $request->user()->newSubscription('default', $premium = 12345)\n            ->returnTo(route('home'))\n            ->create();\n\n        return view('billing', ['payLink' => $payLink]);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":491,"to":503}}}}],["604",{"pageContent":"return view('billing', ['payLink' => $payLink]);\n    });\n\nThe first argument passed to the `newSubscription` method should be the internal name of the subscription. If your application only offers a single subscription, you might call this `default` or `primary`. This subscription name is only for internal application usage and is not meant to be shown to users. In addition, it should not contain spaces and it should never be changed after creating the subscription. The second argument given to the `newSubscription` method is the specific plan the user is subscribing to. This value should correspond to the plan's identifier in Paddle. The `returnTo` method accepts a URL that your user will be redirected to after they successfully complete the checkout.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":503,"to":506}}}}],["605",{"pageContent":"The `create` method will create a pay link which you can use to generate a payment button. The payment button can be generated using the `paddle-button` [Blade component](/docs/{{version}}/blade#components) that is included with Cashier Paddle:\n\n```blade\n<x-paddle-button :url=\"$payLink\" class=\"px-8 py-4\">\n    Subscribe\n</x-paddle-button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":508,"to":513}}}}],["606",{"pageContent":"After the user has finished their checkout, a `subscription_created` webhook will be dispatched from Paddle. Cashier will receive this webhook and setup the subscription for your customer. In order to make sure all webhooks are properly received and handled by your application, ensure you have properly [setup webhook handling](#handling-paddle-webhooks).\n\n<a name=\"additional-details\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":516,"to":518}}}}],["607",{"pageContent":"Additional Details\n\nIf you would like to specify additional customer or subscription details, you may do so by passing them as an array of key / value pairs to the `create` method. To learn more about the additional fields supported by Paddle, check out Paddle's documentation on [generating pay links](https://developer.paddle.com/api-reference/product-api/pay-links/createpaylink):\n\n    $payLink = $user->newSubscription('default', $monthly = 12345)\n        ->returnTo(route('home'))\n        ->create([\n            'vat_number' => $vatNumber,\n        ]);\n\n<a name=\"subscriptions-coupons\"></a>\n#### Coupons\n\nIf you would like to apply a coupon when creating the subscription, you may use the `withCoupon` method:\n\n    $payLink = $user->newSubscription('default', $monthly = 12345)\n        ->returnTo(route('home'))\n        ->withCoupon('code')\n        ->create();\n\n<a name=\"metadata\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":519,"to":539}}}}],["608",{"pageContent":"Metadata\n\nYou can also pass an array of metadata using the `withMetadata` method:\n\n    $payLink = $user->newSubscription('default', $monthly = 12345)\n        ->returnTo(route('home'))\n        ->withMetadata(['key' => 'value'])\n        ->create();\n\n> **Warning**  \n> When providing metadata, please avoid using `subscription_name` as a metadata key. This key is reserved for internal use by Cashier.\n\n<a name=\"checking-subscription-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":540,"to":552}}}}],["609",{"pageContent":"Checking Subscription Status\n\nOnce a user is subscribed to your application, you may check their subscription status using a variety of convenient methods. First, the `subscribed` method returns `true` if the user has an active subscription, even if the subscription is currently within its trial period:\n\n    if ($user->subscribed('default')) {\n        // ...\n    }\n\nThe `subscribed` method also makes a great candidate for a [route middleware](/docs/{{version}}/middleware), allowing you to filter access to routes and controllers based on the user's subscription status:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":553,"to":569}}}}],["610",{"pageContent":"<?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class EnsureUserIsSubscribed\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next): Response\n        {\n            if ($request->user() && ! $request->user()->subscribed('default')) {\n                // This user is not a paying customer...\n                return redirect('billing');\n            }\n\n            return $next($request);\n        }\n    }\n\nIf you would like to determine if a user is still within their trial period, you may use the `onTrial` method. This method can be useful for determining if you should display a warning to the user that they are still on their trial period:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":569,"to":595}}}}],["611",{"pageContent":"if ($user->subscription('default')->onTrial()) {\n        // ...\n    }\n\nThe `subscribedToPlan` method may be used to determine if the user is subscribed to a given plan based on a given Paddle plan ID. In this example, we will determine if the user's `default` subscription is actively subscribed to the monthly plan:\n\n    if ($user->subscribedToPlan($monthly = 12345, 'default')) {\n        // ...\n    }\n\nThe `recurring` method may be used to determine if the user is currently subscribed and is no longer within their trial period:\n\n    if ($user->subscription('default')->recurring()) {\n        // ...\n    }\n\n<a name=\"cancelled-subscription-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":597,"to":613}}}}],["612",{"pageContent":"Cancelled Subscription Status\n\nTo determine if the user was once an active subscriber but has cancelled their subscription, you may use the `cancelled` method:\n\n    if ($user->subscription('default')->cancelled()) {\n        // ...\n    }\n\nYou may also determine if a user has cancelled their subscription, but are still on their \"grace period\" until the subscription fully expires. For example, if a user cancels a subscription on March 5th that was originally scheduled to expire on March 10th, the user is on their \"grace period\" until March 10th. Note that the `subscribed` method still returns `true` during this time:\n\n    if ($user->subscription('default')->onGracePeriod()) {\n        // ...\n    }\n\nTo determine if the user has cancelled their subscription and is no longer within their \"grace period\", you may use the `ended` method:\n\n    if ($user->subscription('default')->ended()) {\n        // ...\n    }\n\n<a name=\"past-due-status\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":614,"to":634}}}}],["613",{"pageContent":"Past Due Status\n\nIf a payment fails for a subscription, it will be marked as `past_due`. When your subscription is in this state it will not be active until the customer has updated their payment information. You may determine if a subscription is past due using the `pastDue` method on the subscription instance:\n\n    if ($user->subscription('default')->pastDue()) {\n        // ...\n    }\n\nWhen a subscription is past due, you should instruct the user to [update their payment information](#updating-payment-information). You may configure how past due subscriptions are handled in your [Paddle subscription settings](https://vendors.paddle.com/subscription-settings).\n\nIf you would like subscriptions to still be considered active when they are `past_due`, you may use the `keepPastDueSubscriptionsActive` method provided by Cashier. Typically, this method should be called in the `register` method of your `AppServiceProvider`:\n\n    use Laravel\\Paddle\\Cashier;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":635,"to":647}}}}],["614",{"pageContent":"use Laravel\\Paddle\\Cashier;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        Cashier::keepPastDueSubscriptionsActive();\n    }\n\n> **Warning**  \n> When a subscription is in a `past_due` state it cannot be changed until payment information has been updated. Therefore, the `swap` and `updateQuantity` methods will throw an exception when the subscription is in a `past_due` state.\n\n<a name=\"subscription-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":647,"to":660}}}}],["615",{"pageContent":"Subscription Scopes\n\nMost subscription states are also available as query scopes so that you may easily query your database for subscriptions that are in a given state:\n\n    // Get all active subscriptions...\n    $subscriptions = Subscription::query()->active()->get();\n\n    // Get all of the cancelled subscriptions for a user...\n    $subscriptions = $user->subscriptions()->cancelled()->get();\n\nA complete list of available scopes is available below:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":661,"to":671}}}}],["616",{"pageContent":"// Get all of the cancelled subscriptions for a user...\n    $subscriptions = $user->subscriptions()->cancelled()->get();\n\nA complete list of available scopes is available below:\n\n    Subscription::query()->active();\n    Subscription::query()->onTrial();\n    Subscription::query()->notOnTrial();\n    Subscription::query()->pastDue();\n    Subscription::query()->recurring();\n    Subscription::query()->ended();\n    Subscription::query()->paused();\n    Subscription::query()->notPaused();\n    Subscription::query()->onPausedGracePeriod();\n    Subscription::query()->notOnPausedGracePeriod();\n    Subscription::query()->cancelled();\n    Subscription::query()->notCancelled();\n    Subscription::query()->onGracePeriod();\n    Subscription::query()->notOnGracePeriod();\n\n<a name=\"subscription-single-charges\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":671,"to":691}}}}],["617",{"pageContent":"Subscription Single Charges\n\nSubscription single charges allow you to charge subscribers with a one-time charge on top of their subscriptions:\n\n    $response = $user->subscription('default')->charge(12.99, 'Support Add-on');\n\nIn contrast to [single charges](#single-charges), this method will immediately charge the customer's stored payment method for the subscription. The charge amount should always be defined in the currency of the subscription.\n\n<a name=\"updating-payment-information\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":692,"to":700}}}}],["618",{"pageContent":"Updating Payment Information\n\nPaddle always saves a payment method per subscription. If you want to update the default payment method for a subscription, you should first generate a subscription \"update URL\" using the `updateUrl` method on the subscription model:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $updateUrl = $user->subscription('default')->updateUrl();\n\nThen, you may use the generated URL in combination with Cashier's provided `paddle-button` Blade component to allow the user to initiate the Paddle widget and update their payment information:\n\n```html\n<x-paddle-button :url=\"$updateUrl\" class=\"px-8 py-4\">\n    Update Card\n</x-paddle-button>\n```\n\nWhen a user has finished updating their information, a `subscription_updated` webhook will be dispatched by Paddle and the subscription details will be updated in your application's database.\n\n<a name=\"changing-plans\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":701,"to":721}}}}],["619",{"pageContent":"Changing Plans\n\nAfter a user has subscribed to your application, they may occasionally want to change to a new subscription plan. To update the subscription plan for a user, you should pass the Paddle plan's identifier to the subscription's `swap` method:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->subscription('default')->swap($premium = 34567);\n\nIf you would like to swap plans and immediately invoice the user instead of waiting for their next billing cycle, you may use the `swapAndInvoice` method:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->swapAndInvoice($premium = 34567);\n\n> **Warning**  \n> Plans may not be swapped when a trial is active. For additional information regarding this limitation, please see the [Paddle documentation](https://developer.paddle.com/api-reference/subscription-api/users/updateuser#usage-notes).\n\n<a name=\"prorations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":722,"to":741}}}}],["620",{"pageContent":"Prorations\n\nBy default, Paddle prorates charges when swapping between plans. The `noProrate` method may be used to update the subscriptions without prorating the charges:\n\n    $user->subscription('default')->noProrate()->swap($premium = 34567);\n\n<a name=\"subscription-quantity\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":742,"to":748}}}}],["621",{"pageContent":"Subscription Quantity\n\nSometimes subscriptions are affected by \"quantity\". For example, a project management application might charge $10 per month per project. To easily increment or decrement your subscription's quantity, use the `incrementQuantity` and `decrementQuantity` methods:\n\n    $user = User::find(1);\n\n    $user->subscription('default')->incrementQuantity();\n\n    // Add five to the subscription's current quantity...\n    $user->subscription('default')->incrementQuantity(5);\n\n    $user->subscription('default')->decrementQuantity();\n\n    // Subtract five from the subscription's current quantity...\n    $user->subscription('default')->decrementQuantity(5);\n\nAlternatively, you may set a specific quantity using the `updateQuantity` method:\n\n    $user->subscription('default')->updateQuantity(10);\n\nThe `noProrate` method may be used to update the subscription's quantity without prorating the charges:\n\n    $user->subscription('default')->noProrate()->updateQuantity(10);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":749,"to":771}}}}],["622",{"pageContent":"The `noProrate` method may be used to update the subscription's quantity without prorating the charges:\n\n    $user->subscription('default')->noProrate()->updateQuantity(10);\n\n<a name=\"subscription-modifiers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":771,"to":775}}}}],["623",{"pageContent":"Subscription Modifiers\n\nSubscription modifiers allow you to implement [metered billing](https://developer.paddle.com/guides/how-tos/subscriptions/metered-billing#using-subscription-price-modifiers) or extend subscriptions with add-ons.\n\nFor example, you might want to offer a \"Premium Support\" add-on with your standard subscription. You can create this modifier like so:\n\n    $modifier = $user->subscription('default')->newModifier(12.99)->create();\n\nThe example above will add a $12.99 add-on to the subscription. By default, this charge will recur on every interval you have configured for the subscription. If you would like, you can add a readable description to the modifier using the modifier's `description` method:\n\n    $modifier = $user->subscription('default')->newModifier(12.99)\n        ->description('Premium Support')\n        ->create();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":776,"to":788}}}}],["624",{"pageContent":"$modifier = $user->subscription('default')->newModifier(12.99)\n        ->description('Premium Support')\n        ->create();\n\nTo illustrate how to implement metered billing using modifiers, imagine your application charges per SMS message sent by the user. First, you should create a $0 plan in your Paddle dashboard. Once the user has been subscribed to this plan, you can add modifiers representing each individual charge to the subscription:\n\n    $modifier = $user->subscription('default')->newModifier(0.99)\n        ->description('New text message')\n        ->oneTime()\n        ->create();\n\nAs you can see, we invoked the `oneTime` method when creating this modifier. This method will ensure the modifier is only charged once and does not recur every billing interval.\n\n<a name=\"retrieving-modifiers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":788,"to":801}}}}],["625",{"pageContent":"Retrieving Modifiers\n\nYou may retrieve a list of all modifiers for a subscription via the `modifiers` method:\n\n    $modifiers = $user->subscription('default')->modifiers();\n\n    foreach ($modifiers as $modifier) {\n        $modifier->amount(); // $0.99\n        $modifier->description; // New text message.\n    }\n\n<a name=\"deleting-modifiers\"></a>\n#### Deleting Modifiers\n\nModifiers may be deleted by invoking the `delete` method on a `Laravel\\Paddle\\Modifier` instance:\n\n    $modifier->delete();\n\n<a name=\"multiple-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":802,"to":820}}}}],["626",{"pageContent":"Multiple Subscriptions\n\nPaddle allows your customers to have multiple subscriptions simultaneously. For example, you may run a gym that offers a swimming subscription and a weight-lifting subscription, and each subscription may have different pricing. Of course, customers should be able to subscribe to either or both plans.\n\nWhen your application creates subscriptions, you may provide the name of the subscription to the `newSubscription` method. The name may be any string that represents the type of subscription the user is initiating:\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/swimming/subscribe', function (Request $request) {\n        $request->user()\n            ->newSubscription('swimming', $swimmingMonthly = 12345)\n            ->create($request->paymentMethodId);\n\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":821,"to":835}}}}],["627",{"pageContent":"// ...\n    });\n\nIn this example, we initiated a monthly swimming subscription for the customer. However, they may want to swap to a yearly subscription at a later time. When adjusting the customer's subscription, we can simply swap the price on the `swimming` subscription:\n\n    $user->subscription('swimming')->swap($swimmingYearly = 34567);\n\nOf course, you may also cancel the subscription entirely:\n\n    $user->subscription('swimming')->cancel();\n\n<a name=\"pausing-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":835,"to":846}}}}],["628",{"pageContent":"Pausing Subscriptions\n\nTo pause a subscription, call the `pause` method on the user's subscription:\n\n    $user->subscription('default')->pause();\n\nWhen a subscription is paused, Cashier will automatically set the `paused_from` column in your database. This column is used to know when the `paused` method should begin returning `true`. For example, if a customer pauses a subscription on March 1st, but the subscription was not scheduled to recur until March 5th, the `paused` method will continue to return `false` until March 5th. This is done because a user is typically allowed to continue using an application until the end of their billing cycle.\n\nYou may determine if a user has paused their subscription but are still on their \"grace period\" using the `onPausedGracePeriod` method:\n\n    if ($user->subscription('default')->onPausedGracePeriod()) {\n        // ...\n    }\n\nTo resume a paused a subscription, you may call the `unpause` method on the user's subscription:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":847,"to":861}}}}],["629",{"pageContent":"if ($user->subscription('default')->onPausedGracePeriod()) {\n        // ...\n    }\n\nTo resume a paused a subscription, you may call the `unpause` method on the user's subscription:\n\n    $user->subscription('default')->unpause();\n\n> **Warning**  \n> A subscription cannot be modified while it is paused. If you want to swap to a different plan or update quantities you must resume the subscription first.\n\n<a name=\"cancelling-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":861,"to":872}}}}],["630",{"pageContent":"Cancelling Subscriptions\n\nTo cancel a subscription, call the `cancel` method on the user's subscription:\n\n    $user->subscription('default')->cancel();\n\nWhen a subscription is cancelled, Cashier will automatically set the `ends_at` column in your database. This column is used to know when the `subscribed` method should begin returning `false`. For example, if a customer cancels a subscription on March 1st, but the subscription was not scheduled to end until March 5th, the `subscribed` method will continue to return `true` until March 5th. This is done because a user is typically allowed to continue using an application until the end of their billing cycle.\n\nYou may determine if a user has cancelled their subscription but are still on their \"grace period\" using the `onGracePeriod` method:\n\n    if ($user->subscription('default')->onGracePeriod()) {\n        // ...\n    }\n\nIf you wish to cancel a subscription immediately, you may call the `cancelNow` method on the user's subscription:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":873,"to":887}}}}],["631",{"pageContent":"if ($user->subscription('default')->onGracePeriod()) {\n        // ...\n    }\n\nIf you wish to cancel a subscription immediately, you may call the `cancelNow` method on the user's subscription:\n\n    $user->subscription('default')->cancelNow();\n\n> **Warning**  \n> Paddle's subscriptions cannot be resumed after cancellation. If your customer wishes to resume their subscription, they will have to subscribe to a new subscription.\n\n<a name=\"subscription-trials\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":887,"to":898}}}}],["632",{"pageContent":"Subscription Trials\n\n<a name=\"with-payment-method-up-front\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":899,"to":901}}}}],["633",{"pageContent":"With Payment Method Up Front\n\n> **Warning**  \n> While trialing and collecting payment method details up front, Paddle prevents any subscription changes such as swapping plans or updating quantities. If you want to allow a customer to swap plans during a trial the subscription must be cancelled and recreated.\n\nIf you would like to offer trial periods to your customers while still collecting payment method information up front, you should use the `trialDays` method when creating your subscription pay links:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/user/subscribe', function (Request $request) {\n        $payLink = $request->user()->newSubscription('default', $monthly = 12345)\n                    ->returnTo(route('home'))\n                    ->trialDays(10)\n                    ->create();\n\n        return view('billing', ['payLink' => $payLink]);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":902,"to":918}}}}],["634",{"pageContent":"return view('billing', ['payLink' => $payLink]);\n    });\n\nThis method will set the trial period ending date on the subscription record within your application's database, as well as instruct Paddle to not begin billing the customer until after this date.\n\n> **Warning**  \n> If the customer's subscription is not cancelled before the trial ending date they will be charged as soon as the trial expires, so you should be sure to notify your users of their trial ending date.\n\nYou may determine if the user is within their trial period using either the `onTrial` method of the user instance or the `onTrial` method of the subscription instance. The two examples below are equivalent:\n\n    if ($user->onTrial('default')) {\n        // ...\n    }\n\n    if ($user->subscription('default')->onTrial()) {\n        // ...\n    }\n\nTo determine if an existing trial has expired, you may use the `hasExpiredTrial` methods:\n\n    if ($user->hasExpiredTrial('default')) {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":918,"to":940}}}}],["635",{"pageContent":"To determine if an existing trial has expired, you may use the `hasExpiredTrial` methods:\n\n    if ($user->hasExpiredTrial('default')) {\n        // ...\n    }\n\n    if ($user->subscription('default')->hasExpiredTrial()) {\n        // ...\n    }\n\n<a name=\"defining-trial-days-in-paddle-cashier\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":940,"to":950}}}}],["636",{"pageContent":"Defining Trial Days In Paddle / Cashier\n\nYou may choose to define how many trial days your plan's receive in the Paddle dashboard or always pass them explicitly using Cashier. If you choose to define your plan's trial days in Paddle you should be aware that new subscriptions, including new subscriptions for a customer that had a subscription in the past, will always receive a trial period unless you explicitly call the `trialDays(0)` method.\n\n<a name=\"without-payment-method-up-front\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":951,"to":955}}}}],["637",{"pageContent":"Without Payment Method Up Front\n\nIf you would like to offer trial periods without collecting the user's payment method information up front, you may set the `trial_ends_at` column on the customer record attached to your user to your desired trial ending date. This is typically done during user registration:\n\n    use App\\Models\\User;\n\n    $user = User::create([\n        // ...\n    ]);\n\n    $user->createAsCustomer([\n        'trial_ends_at' => now()->addDays(10)\n    ]);\n\nCashier refers to this type of trial as a \"generic trial\", since it is not attached to any existing subscription. The `onTrial` method on the `User` instance will return `true` if the current date is not past the value of `trial_ends_at`:\n\n    if ($user->onTrial()) {\n        // User is within their trial period...\n    }\n\nOnce you are ready to create an actual subscription for the user, you may use the `newSubscription` method as usual:\n\n    use Illuminate\\Http\\Request;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":956,"to":978}}}}],["638",{"pageContent":"Once you are ready to create an actual subscription for the user, you may use the `newSubscription` method as usual:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/user/subscribe', function (Request $request) {\n        $payLink = $user->newSubscription('default', $monthly = 12345)\n            ->returnTo(route('home'))\n            ->create();\n\n        return view('billing', ['payLink' => $payLink]);\n    });\n\nTo retrieve the user's trial ending date, you may use the `trialEndsAt` method. This method will return a Carbon date instance if a user is on a trial or `null` if they aren't. You may also pass an optional subscription name parameter if you would like to get the trial ending date for a specific subscription other than the default one:\n\n    if ($user->onTrial()) {\n        $trialEndsAt = $user->trialEndsAt('main');\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":978,"to":994}}}}],["639",{"pageContent":"if ($user->onTrial()) {\n        $trialEndsAt = $user->trialEndsAt('main');\n    }\n\nYou may use the `onGenericTrial` method if you wish to know specifically that the user is within their \"generic\" trial period and has not created an actual subscription yet:\n\n    if ($user->onGenericTrial()) {\n        // User is within their \"generic\" trial period...\n    }\n\n> **Warning**  \n> There is no way to extend or modify a trial period on a Paddle subscription after it has been created.\n\n<a name=\"handling-paddle-webhooks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":994,"to":1007}}}}],["640",{"pageContent":"Handling Paddle Webhooks\n\nPaddle can notify your application of a variety of events via webhooks. By default, a route that points to Cashier's webhook controller is registered by the Cashier service provider. This controller will handle all incoming webhook requests.\n\nBy default, this controller will automatically handle cancelling subscriptions that have too many failed charges ([as defined by your Paddle dunning settings](https://vendors.paddle.com/recover-settings#dunning-form-id)), subscription updates, and payment method changes; however, as we'll soon discover, you can extend this controller to handle any Paddle webhook event you like.\n\nTo ensure your application can handle Paddle webhooks, be sure to [configure the webhook URL in the Paddle control panel](https://vendors.paddle.com/alerts-webhooks). By default, Cashier's webhook controller responds to the `/paddle/webhook` URL path. The full list of all webhooks you should enable in the Paddle control panel are:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1008,"to":1014}}}}],["641",{"pageContent":"- Subscription Created\n- Subscription Updated\n- Subscription Cancelled\n- Payment Succeeded\n- Subscription Payment Succeeded\n\n> **Warning**  \n> Make sure you protect incoming requests with Cashier's included [webhook signature verification](/docs/{{version}}/cashier-paddle#verifying-webhook-signatures) middleware.\n\n<a name=\"webhooks-csrf-protection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1016,"to":1025}}}}],["642",{"pageContent":"Webhooks & CSRF Protection\n\nSince Paddle webhooks need to bypass Laravel's [CSRF protection](/docs/{{version}}/csrf), be sure to list the URI as an exception in your `App\\Http\\Middleware\\VerifyCsrfToken` middleware or list the route outside of the `web` middleware group:\n\n    protected $except = [\n        'paddle/*',\n    ];\n\n<a name=\"webhooks-local-development\"></a>\n#### Webhooks & Local Development\n\nFor Paddle to be able to send your application webhooks during local development, you will need to expose your application via a site sharing service such as [Ngrok](https://ngrok.com/) or [Expose](https://expose.dev/docs/introduction). If you are developing your application locally using [Laravel Sail](/docs/{{version}}/sail), you may use Sail's [site sharing command](/docs/{{version}}/sail#sharing-your-site).\n\n<a name=\"defining-webhook-event-handlers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1026,"to":1039}}}}],["643",{"pageContent":"Defining Webhook Event Handlers\n\nCashier automatically handles subscription cancellation on failed charges and other common Paddle webhooks. However, if you have additional webhook events you would like to handle, you may do so by listening to the following events that are dispatched by Cashier:\n\n- `Laravel\\Paddle\\Events\\WebhookReceived`\n- `Laravel\\Paddle\\Events\\WebhookHandled`\n\nBoth events contain the full payload of the Paddle webhook. For example, if you wish to handle the `invoice.payment_succeeded` webhook, you may register a [listener](/docs/{{version}}/events#defining-listeners) that will handle the event:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use Laravel\\Paddle\\Events\\WebhookReceived;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1040,"to":1053}}}}],["644",{"pageContent":"<?php\n\n    namespace App\\Listeners;\n\n    use Laravel\\Paddle\\Events\\WebhookReceived;\n\n    class PaddleEventListener\n    {\n        /**\n         * Handle received Paddle webhooks.\n         */\n        public function handle(WebhookReceived $event): void\n        {\n            if ($event->payload['alert_name'] === 'payment_succeeded') {\n                // Handle the incoming event...\n            }\n        }\n    }\n\nOnce your listener has been defined, you may register it within your application's `EventServiceProvider`:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Listeners\\PaddleEventListener;\n    use Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\n    use Laravel\\Paddle\\Events\\WebhookReceived;\n\n    class EventServiceProvider extends ServiceProvider\n    {\n        protected $listen = [\n            WebhookReceived::class => [\n                PaddleEventListener::class,\n            ],\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1053,"to":1089}}}}],["645",{"pageContent":"Cashier also emit events dedicated to the type of the received webhook. In addition to the full payload from Paddle, they also contain the relevant models that were used to process the webhook such as the billable model, the subscription, or the receipt:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- `Laravel\\Paddle\\Events\\PaymentSucceeded`\n- `Laravel\\Paddle\\Events\\SubscriptionPaymentSucceeded`\n- `Laravel\\Paddle\\Events\\SubscriptionCreated`\n- `Laravel\\Paddle\\Events\\SubscriptionUpdated`\n- `Laravel\\Paddle\\Events\\SubscriptionCancelled`\n\n</div>\n\nYou can also override the default, built-in webhook route by defining the `CASHIER_WEBHOOK` environment variable in your application's `.env` file. This value should be the full URL to your webhook route and needs to match the URL set in your Paddle control panel:\n\n```ini\nCASHIER_WEBHOOK=https://example.com/my-paddle-webhook-url","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1091,"to":1106}}}}],["646",{"pageContent":"<a name=\"verifying-webhook-signatures\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1109,"to":1109}}}}],["647",{"pageContent":"Verifying Webhook Signatures\n\nTo secure your webhooks, you may use [Paddle's webhook signatures](https://developer.paddle.com/webhook-reference/verifying-webhooks). For convenience, Cashier automatically includes a middleware which validates that the incoming Paddle webhook request is valid.\n\nTo enable webhook verification, ensure that the `PADDLE_PUBLIC_KEY` environment variable is defined in your application's `.env` file. The public key may be retrieved from your Paddle account dashboard.\n\n<a name=\"single-charges\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1110,"to":1116}}}}],["648",{"pageContent":"Single Charges\n\n<a name=\"simple-charge\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1117,"to":1119}}}}],["649",{"pageContent":"Simple Charge\n\nIf you would like to make a one-time charge against a customer, you may use the `charge` method on a billable model instance to generate a pay link for the charge. The `charge` method accepts the charge amount (float) as its first argument and a charge description as its second argument:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/store', function (Request $request) {\n        return view('store', [\n            'payLink' => $user->charge(12.99, 'Action Figure')\n        ]);\n    });\n\nAfter generating the pay link, you may use Cashier's provided `paddle-button` Blade component to allow the user to initiate the Paddle widget and complete the charge:\n\n```blade\n<x-paddle-button :url=\"$payLink\" class=\"px-8 py-4\">\n    Buy\n</x-paddle-button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1120,"to":1137}}}}],["650",{"pageContent":"The `charge` method accepts an array as its third argument, allowing you to pass any options you wish to the underlying Paddle pay link creation. Please consult [the Paddle documentation](https://developer.paddle.com/api-reference/product-api/pay-links/createpaylink) to learn more about the options available to you when creating charges:\n\n    $payLink = $user->charge(12.99, 'Action Figure', [\n        'custom_option' => $value,\n    ]);\n\nCharges happen in the currency specified in the `cashier.currency` configuration option. By default, this is set to USD. You may override the default currency by defining the `CASHIER_CURRENCY` environment variable in your application's `.env` file:\n\n```ini\nCASHIER_CURRENCY=EUR","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1140,"to":1149}}}}],["651",{"pageContent":"You can also [override prices per currency](https://developer.paddle.com/api-reference/product-api/pay-links/createpaylink#price-overrides) using Paddle's dynamic pricing matching system. To do so, pass an array of prices instead of a fixed amount:\n\n    $payLink = $user->charge([\n        'USD:19.99',\n        'EUR:15.99',\n    ], 'Action Figure');\n\n<a name=\"charging-products\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1152,"to":1159}}}}],["652",{"pageContent":"Charging Products\n\nIf you would like to make a one-time charge against a specific product configured within Paddle, you may use the `chargeProduct` method on a billable model instance to generate a pay link:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/store', function (Request $request) {\n        return view('store', [\n            'payLink' => $request->user()->chargeProduct($productId = 123)\n        ]);\n    });\n\nThen, you may provide the pay link to the `paddle-button` component to allow the user to initialize the Paddle widget:\n\n```blade\n<x-paddle-button :url=\"$payLink\" class=\"px-8 py-4\">\n    Buy\n</x-paddle-button>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1160,"to":1177}}}}],["653",{"pageContent":"The `chargeProduct` method accepts an array as its second argument, allowing you to pass any options you wish to the underlying Paddle pay link creation. Please consult [the Paddle documentation](https://developer.paddle.com/api-reference/product-api/pay-links/createpaylink) regarding the options that are available to you when creating charges:\n\n    $payLink = $user->chargeProduct($productId, [\n        'custom_option' => $value,\n    ]);\n\n<a name=\"refunding-orders\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1180,"to":1186}}}}],["654",{"pageContent":"Refunding Orders\n\nIf you need to refund a Paddle order, you may use the `refund` method. This method accepts the Paddle order ID as its first argument. You may retrieve the receipts for a given billable model using the `receipts` method:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $receipt = $user->receipts()->first();\n\n    $refundRequestId = $user->refund($receipt->order_id);\n\nYou may optionally specify a specific amount to refund as well as a reason for the refund:\n\n    $receipt = $user->receipts()->first();\n\n    $refundRequestId = $user->refund(\n        $receipt->order_id, 5.00, 'Unused product time'\n    );\n\n> **Note**  \n> You can use the `$refundRequestId` as a reference for the refund when contacting Paddle support.\n\n<a name=\"receipts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1187,"to":1210}}}}],["655",{"pageContent":"Receipts\n\nYou may easily retrieve an array of a billable model's receipts via the `receipts` property:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $receipts = $user->receipts;\n\nWhen listing the receipts for the customer, you may use the receipt instance's methods to display the relevant receipt information. For example, you may wish to list every receipt in a table, allowing the user to easily download any of the receipts:\n\n```html\n<table>\n    @foreach ($receipts as $receipt)\n        <tr>\n            <td>{{ $receipt->paid_at->toFormattedDateString() }}</td>\n            <td>{{ $receipt->amount() }}</td>\n            <td><a href=\"{{ $receipt->receipt_url }}\" target=\"_blank\">Download</a></td>\n        </tr>\n    @endforeach\n</table>\n```\n\n<a name=\"past-and-upcoming-payments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1211,"to":1235}}}}],["656",{"pageContent":"Past & Upcoming Payments\n\nYou may use the `lastPayment` and `nextPayment` methods to retrieve and display a customer's past or upcoming payments for recurring subscriptions:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $subscription = $user->subscription('default');\n\n    $lastPayment = $subscription->lastPayment();\n    $nextPayment = $subscription->nextPayment();\n\nBoth of these methods will return an instance of `Laravel\\Paddle\\Payment`; however, `nextPayment` will return `null` when the billing cycle has ended (such as when a subscription has been cancelled):\n\n```blade\nNext payment: {{ $nextPayment->amount() }} due on {{ $nextPayment->date()->format('d/m/Y') }}\n```\n\n<a name=\"handling-failed-payments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1236,"to":1255}}}}],["657",{"pageContent":"Handling Failed Payments\n\nSubscription payments fail for various reasons, such as expired cards or a card having insufficient funds. When this happens, we recommend that you let Paddle handle payment failures for you. Specifically, you may [setup Paddle's automatic billing emails](https://vendors.paddle.com/subscription-settings) in your Paddle dashboard.\n\nAlternatively, you can perform more precise customization by [listening](/docs/{{version}}/events) for the `subscription_payment_failed` Paddle event via the `WebhookReceived` event dispatched by Cashier. You should also ensure the \"Subscription Payment Failed\" option is enabled in the Webhook settings of your Paddle dashboard:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use Laravel\\Paddle\\Events\\WebhookReceived;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1256,"to":1266}}}}],["658",{"pageContent":"<?php\n\n    namespace App\\Listeners;\n\n    use Laravel\\Paddle\\Events\\WebhookReceived;\n\n    class PaddleEventListener\n    {\n        /**\n         * Handle received Paddle webhooks.\n         */\n        public function handle(WebhookReceived $event): void\n        {\n            if ($event->payload['alert_name'] === 'subscription_payment_failed') {\n                // Handle the failed subscription payment...\n            }\n        }\n    }\n\nOnce your listener has been defined, you should register it within your application's `EventServiceProvider`:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Listeners\\PaddleEventListener;\n    use Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\n    use Laravel\\Paddle\\Events\\WebhookReceived;\n\n    class EventServiceProvider extends ServiceProvider\n    {\n        protected $listen = [\n            WebhookReceived::class => [\n                PaddleEventListener::class,\n            ],\n        ];\n    }\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1266,"to":1304}}}}],["659",{"pageContent":"Testing\n\nWhile testing, you should manually test your billing flow to make sure your integration works as expected.\n\nFor automated tests, including those executed within a CI environment, you may use [Laravel's HTTP Client](/docs/{{version}}/http-client#testing) to fake HTTP calls made to Paddle. Although this does not test the actual responses from Paddle, it does provide a way to test your application without actually calling Paddle's API.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/cashier-paddle.md","loc":{"lines":{"from":1305,"to":1309}}}}],["660",{"pageContent":"# Collections\n\n- [Introduction](#introduction)\n    - [Creating Collections](#creating-collections)\n    - [Extending Collections](#extending-collections)\n- [Available Methods](#available-methods)\n- [Higher Order Messages](#higher-order-messages)\n- [Lazy Collections](#lazy-collections)\n    - [Introduction](#lazy-collection-introduction)\n    - [Creating Lazy Collections](#creating-lazy-collections)\n    - [The Enumerable Contract](#the-enumerable-contract)\n    - [Lazy Collection Methods](#lazy-collection-methods)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1,"to":14}}}}],["661",{"pageContent":"Introduction\n\nThe `Illuminate\\Support\\Collection` class provides a fluent, convenient wrapper for working with arrays of data. For example, check out the following code. We'll use the `collect` helper to create a new collection instance from the array, run the `strtoupper` function on each element, and then remove all empty elements:\n\n    $collection = collect(['taylor', 'abigail', null])->map(function (string $name) {\n        return strtoupper($name);\n    })->reject(function (string $name) {\n        return empty($name);\n    });\n\nAs you can see, the `Collection` class allows you to chain its methods to perform fluent mapping and reducing of the underlying array. In general, collections are immutable, meaning every `Collection` method returns an entirely new `Collection` instance.\n\n<a name=\"creating-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":15,"to":27}}}}],["662",{"pageContent":"Creating Collections\n\nAs mentioned above, the `collect` helper returns a new `Illuminate\\Support\\Collection` instance for the given array. So, creating a collection is as simple as:\n\n    $collection = collect([1, 2, 3]);\n\n> **Note**  \n> The results of [Eloquent](/docs/{{version}}/eloquent) queries are always returned as `Collection` instances.\n\n<a name=\"extending-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":28,"to":37}}}}],["663",{"pageContent":"Extending Collections\n\nCollections are \"macroable\", which allows you to add additional methods to the `Collection` class at run time. The `Illuminate\\Support\\Collection` class' `macro` method accepts a closure that will be executed when your macro is called. The macro closure may access the collection's other methods via `$this`, just as if it were a real method of the collection class. For example, the following code adds a `toUpper` method to the `Collection` class:\n\n    use Illuminate\\Support\\Collection;\n    use Illuminate\\Support\\Str;\n\n    Collection::macro('toUpper', function () {\n        return $this->map(function (string $value) {\n            return Str::upper($value);\n        });\n    });\n\n    $collection = collect(['first', 'second']);\n\n    $upper = $collection->toUpper();\n\n    // ['FIRST', 'SECOND']\n\nTypically, you should declare collection macros in the `boot` method of a [service provider](/docs/{{version}}/providers).\n\n<a name=\"macro-arguments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":38,"to":59}}}}],["664",{"pageContent":"Macro Arguments\n\nIf necessary, you may define macros that accept additional arguments:\n\n    use Illuminate\\Support\\Collection;\n    use Illuminate\\Support\\Facades\\Lang;\n\n    Collection::macro('toLocale', function (string $locale) {\n        return $this->map(function (string $value) use ($locale) {\n            return Lang::get($value, [], $locale);\n        });\n    });\n\n    $collection = collect(['first', 'second']);\n\n    $translated = $collection->toLocale('es');\n\n<a name=\"available-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":60,"to":77}}}}],["665",{"pageContent":"Available Methods\n\nFor the majority of the remaining collection documentation, we'll discuss each method available on the `Collection` class. Remember, all of these methods may be chained to fluently manipulate the underlying array. Furthermore, almost every method returns a new `Collection` instance, allowing you to preserve the original copy of the collection when necessary:\n\n<style>\n    .collection-method-list > p {\n        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n</style>\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":78,"to":95}}}}],["666",{"pageContent":"[all](#method-all)\n[average](#method-average)\n[avg](#method-avg)\n[chunk](#method-chunk)\n[chunkWhile](#method-chunkwhile)\n[collapse](#method-collapse)\n[collect](#method-collect)\n[combine](#method-combine)\n[concat](#method-concat)\n[contains](#method-contains)\n[containsOneItem](#method-containsoneitem)\n[containsStrict](#method-containsstrict)\n[count](#method-count)\n[countBy](#method-countBy)\n[crossJoin](#method-crossjoin)\n[dd](#method-dd)\n[diff](#method-diff)\n[diffAssoc](#method-diffassoc)\n[diffAssocUsing](#method-diffassocusing)\n[diffKeys](#method-diffkeys)\n[doesntContain](#method-doesntcontain)\n[dot](#method-dot)\n[dump](#method-dump)\n[duplicates](#method-duplicates)\n[duplicatesStrict](#method-duplicatesstrict)\n[each](#method-each)\n[eachSpread](#method-eachspread)\n[ensure](#method-ensure)\n[every](#method-every)\n[except](#method-except)\n[filter](#method-filter)\n[first](#method-first)\n[firstOrFail](#method-first-or-fail)\n[firstWhere](#method-first-where)\n[flatMap](#method-flatmap)\n[flatten](#method-flatten)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":97,"to":132}}}}],["667",{"pageContent":"[except](#method-except)\n[filter](#method-filter)\n[first](#method-first)\n[firstOrFail](#method-first-or-fail)\n[firstWhere](#method-first-where)\n[flatMap](#method-flatmap)\n[flatten](#method-flatten)\n[flip](#method-flip)\n[forget](#method-forget)\n[forPage](#method-forpage)\n[get](#method-get)\n[groupBy](#method-groupby)\n[has](#method-has)\n[hasAny](#method-hasany)\n[implode](#method-implode)\n[intersect](#method-intersect)\n[intersectAssoc](#method-intersectAssoc)\n[intersectByKeys](#method-intersectbykeys)\n[isEmpty](#method-isempty)\n[isNotEmpty](#method-isnotempty)\n[join](#method-join)\n[keyBy](#method-keyby)\n[keys](#method-keys)\n[last](#method-last)\n[lazy](#method-lazy)\n[macro](#method-macro)\n[make](#method-make)\n[map](#method-map)\n[mapInto](#method-mapinto)\n[mapSpread](#method-mapspread)\n[mapToGroups](#method-maptogroups)\n[mapWithKeys](#method-mapwithkeys)\n[max](#method-max)\n[median](#method-median)\n[merge](#method-merge)\n[mergeRecursive](#method-mergerecursive)\n[min](#method-min)\n[mode](#method-mode)\n[nth](#method-nth)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":132,"to":170}}}}],["668",{"pageContent":"[mapWithKeys](#method-mapwithkeys)\n[max](#method-max)\n[median](#method-median)\n[merge](#method-merge)\n[mergeRecursive](#method-mergerecursive)\n[min](#method-min)\n[mode](#method-mode)\n[nth](#method-nth)\n[only](#method-only)\n[pad](#method-pad)\n[partition](#method-partition)\n[percentage](#method-percentage)\n[pipe](#method-pipe)\n[pipeInto](#method-pipeinto)\n[pipeThrough](#method-pipethrough)\n[pluck](#method-pluck)\n[pop](#method-pop)\n[prepend](#method-prepend)\n[pull](#method-pull)\n[push](#method-push)\n[put](#method-put)\n[random](#method-random)\n[range](#method-range)\n[reduce](#method-reduce)\n[reduceSpread](#method-reduce-spread)\n[reject](#method-reject)\n[replace](#method-replace)\n[replaceRecursive](#method-replacerecursive)\n[reverse](#method-reverse)\n[search](#method-search)\n[shift](#method-shift)\n[shuffle](#method-shuffle)\n[skip](#method-skip)\n[skipUntil](#method-skipuntil)\n[skipWhile](#method-skipwhile)\n[slice](#method-slice)\n[sliding](#method-sliding)\n[sole](#method-sole)\n[some](#method-some)\n[sort](#method-sort)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":170,"to":209}}}}],["669",{"pageContent":"[skip](#method-skip)\n[skipUntil](#method-skipuntil)\n[skipWhile](#method-skipwhile)\n[slice](#method-slice)\n[sliding](#method-sliding)\n[sole](#method-sole)\n[some](#method-some)\n[sort](#method-sort)\n[sortBy](#method-sortby)\n[sortByDesc](#method-sortbydesc)\n[sortDesc](#method-sortdesc)\n[sortKeys](#method-sortkeys)\n[sortKeysDesc](#method-sortkeysdesc)\n[sortKeysUsing](#method-sortkeysusing)\n[splice](#method-splice)\n[split](#method-split)\n[splitIn](#method-splitin)\n[sum](#method-sum)\n[take](#method-take)\n[takeUntil](#method-takeuntil)\n[takeWhile](#method-takewhile)\n[tap](#method-tap)\n[times](#method-times)\n[toArray](#method-toarray)\n[toJson](#method-tojson)\n[transform](#method-transform)\n[undot](#method-undot)\n[union](#method-union)\n[unique](#method-unique)\n[uniqueStrict](#method-uniquestrict)\n[unless](#method-unless)\n[unlessEmpty](#method-unlessempty)\n[unlessNotEmpty](#method-unlessnotempty)\n[unwrap](#method-unwrap)\n[value](#method-value)\n[values](#method-values)\n[when](#method-when)\n[whenEmpty](#method-whenempty)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":209,"to":246}}}}],["670",{"pageContent":"[unlessEmpty](#method-unlessempty)\n[unlessNotEmpty](#method-unlessnotempty)\n[unwrap](#method-unwrap)\n[value](#method-value)\n[values](#method-values)\n[when](#method-when)\n[whenEmpty](#method-whenempty)\n[whenNotEmpty](#method-whennotempty)\n[where](#method-where)\n[whereStrict](#method-wherestrict)\n[whereBetween](#method-wherebetween)\n[whereIn](#method-wherein)\n[whereInStrict](#method-whereinstrict)\n[whereInstanceOf](#method-whereinstanceof)\n[whereNotBetween](#method-wherenotbetween)\n[whereNotIn](#method-wherenotin)\n[whereNotInStrict](#method-wherenotinstrict)\n[whereNotNull](#method-wherenotnull)\n[whereNull](#method-wherenull)\n[wrap](#method-wrap)\n[zip](#method-zip)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":246,"to":266}}}}],["671",{"pageContent":"</div>\n\n<a name=\"method-listing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":268,"to":270}}}}],["672",{"pageContent":"Method Listing\n\n<style>\n    .collection-method code {\n        font-size: 14px;\n    }\n\n    .collection-method:not(.first-collection-method) {\n        margin-top: 50px;\n    }\n</style>\n\n<a name=\"method-all\"></a>\n#### `all()` {.collection-method .first-collection-method}\n\nThe `all` method returns the underlying array represented by the collection:\n\n    collect([1, 2, 3])->all();\n\n    // [1, 2, 3]\n\n<a name=\"method-average\"></a>\n#### `average()` {.collection-method}\n\nAlias for the [`avg`](#method-avg) method.\n\n<a name=\"method-avg\"></a>\n#### `avg()` {.collection-method}\n\nThe `avg` method returns the [average value](https://en.wikipedia.org/wiki/Average) of a given key:\n\n    $average = collect([\n        ['foo' => 10],\n        ['foo' => 10],\n        ['foo' => 20],\n        ['foo' => 40]\n    ])->avg('foo');\n\n    // 20\n\n    $average = collect([1, 1, 2, 4])->avg();\n\n    // 2\n\n<a name=\"method-chunk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":271,"to":315}}}}],["673",{"pageContent":"`chunk()` {.collection-method}\n\nThe `chunk` method breaks the collection into multiple, smaller collections of a given size:\n\n    $collection = collect([1, 2, 3, 4, 5, 6, 7]);\n\n    $chunks = $collection->chunk(4);\n\n    $chunks->all();\n\n    // [[1, 2, 3, 4], [5, 6, 7]]\n\nThis method is especially useful in [views](/docs/{{version}}/views) when working with a grid system such as [Bootstrap](https://getbootstrap.com/docs/4.1/layout/grid/). For example, imagine you have a collection of [Eloquent](/docs/{{version}}/eloquent) models you want to display in a grid:\n\n```blade\n@foreach ($products->chunk(3) as $chunk)\n    <div class=\"row\">\n        @foreach ($chunk as $product)\n            <div class=\"col-xs-4\">{{ $product->name }}</div>\n        @endforeach\n    </div>\n@endforeach\n```\n\n<a name=\"method-chunkwhile\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":316,"to":340}}}}],["674",{"pageContent":"`chunkWhile()` {.collection-method}\n\nThe `chunkWhile` method breaks the collection into multiple, smaller collections based on the evaluation of the given callback. The `$chunk` variable passed to the closure may be used to inspect the previous element:\n\n    $collection = collect(str_split('AABBCCCD'));\n\n    $chunks = $collection->chunkWhile(function (string $value, int $key, Collection $chunk) {\n        return $value === $chunk->last();\n    });\n\n    $chunks->all();\n\n    // [['A', 'A'], ['B', 'B'], ['C', 'C', 'C'], ['D']]\n\n<a name=\"method-collapse\"></a>\n#### `collapse()` {.collection-method}\n\nThe `collapse` method collapses a collection of arrays into a single, flat collection:\n\n    $collection = collect([\n        [1, 2, 3],\n        [4, 5, 6],\n        [7, 8, 9],\n    ]);\n\n    $collapsed = $collection->collapse();\n\n    $collapsed->all();\n\n    // [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n<a name=\"method-collect\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":341,"to":372}}}}],["675",{"pageContent":"`collect()` {.collection-method}\n\nThe `collect` method returns a new `Collection` instance with the items currently in the collection:\n\n    $collectionA = collect([1, 2, 3]);\n\n    $collectionB = $collectionA->collect();\n\n    $collectionB->all();\n\n    // [1, 2, 3]\n\nThe `collect` method is primarily useful for converting [lazy collections](#lazy-collections) into standard `Collection` instances:\n\n    $lazyCollection = LazyCollection::make(function () {\n        yield 1;\n        yield 2;\n        yield 3;\n    });\n\n    $collection = $lazyCollection->collect();\n\n    $collection::class;\n\n    // 'Illuminate\\Support\\Collection'\n\n    $collection->all();\n\n    // [1, 2, 3]\n\n> **Note**  \n> The `collect` method is especially useful when you have an instance of `Enumerable` and need a non-lazy collection instance. Since `collect()` is part of the `Enumerable` contract, you can safely use it to get a `Collection` instance.\n\n<a name=\"method-combine\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":373,"to":406}}}}],["676",{"pageContent":"`combine()` {.collection-method}\n\nThe `combine` method combines the values of the collection, as keys, with the values of another array or collection:\n\n    $collection = collect(['name', 'age']);\n\n    $combined = $collection->combine(['George', 29]);\n\n    $combined->all();\n\n    // ['name' => 'George', 'age' => 29]\n\n<a name=\"method-concat\"></a>\n#### `concat()` {.collection-method}\n\nThe `concat` method appends the given `array` or collection's values onto the end of another collection:\n\n    $collection = collect(['John Doe']);\n\n    $concatenated = $collection->concat(['Jane Doe'])->concat(['name' => 'Johnny Doe']);\n\n    $concatenated->all();\n\n    // ['John Doe', 'Jane Doe', 'Johnny Doe']\n\nThe `concat` method numerically reindexes keys for items concatenated onto the original collection. To maintain keys in associative collections, see the [merge](#method-merge) method.\n\n<a name=\"method-contains\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":407,"to":434}}}}],["677",{"pageContent":"`contains()` {.collection-method}\n\nThe `contains` method determines whether the collection contains a given item. You may pass a closure to the `contains` method to determine if an element exists in the collection matching a given truth test:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->contains(function (int $value, int $key) {\n        return $value > 5;\n    });\n\n    // false\n\nAlternatively, you may pass a string to the `contains` method to determine whether the collection contains a given item value:\n\n    $collection = collect(['name' => 'Desk', 'price' => 100]);\n\n    $collection->contains('Desk');\n\n    // true\n\n    $collection->contains('New York');\n\n    // false\n\nYou may also pass a key / value pair to the `contains` method, which will determine if the given pair exists in the collection:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n    ]);\n\n    $collection->contains('product', 'Bookcase');\n\n    // false","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":435,"to":468}}}}],["678",{"pageContent":"$collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n    ]);\n\n    $collection->contains('product', 'Bookcase');\n\n    // false\n\nThe `contains` method uses \"loose\" comparisons when checking item values, meaning a string with an integer value will be considered equal to an integer of the same value. Use the [`containsStrict`](#method-containsstrict) method to filter using \"strict\" comparisons.\n\nFor the inverse of `contains`, see the [doesntContain](#method-doesntcontain) method.\n\n<a name=\"method-containsoneitem\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":468,"to":481}}}}],["679",{"pageContent":"`containsOneItem()` {.collection-method}\n\nThe `containsOneItem` method determines whether the collection contains a single item:\n\n    collect([])->containsOneItem();\n\n    // false\n\n    collect(['1'])->containsOneItem();\n\n    // true\n\n    collect(['1', '2'])->containsOneItem();\n\n    // false\n\n<a name=\"method-containsstrict\"></a>\n#### `containsStrict()` {.collection-method}\n\nThis method has the same signature as the [`contains`](#method-contains) method; however, all values are compared using \"strict\" comparisons.\n\n> **Note**  \n> This method's behavior is modified when using [Eloquent Collections](/docs/{{version}}/eloquent-collections#method-contains).\n\n<a name=\"method-count\"></a>\n#### `count()` {.collection-method}\n\nThe `count` method returns the total number of items in the collection:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $collection->count();\n\n    // 4\n\n<a name=\"method-countBy\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":482,"to":517}}}}],["680",{"pageContent":"`countBy()` {.collection-method}\n\nThe `countBy` method counts the occurrences of values in the collection. By default, the method counts the occurrences of every element, allowing you to count certain \"types\" of elements in the collection:\n\n    $collection = collect([1, 2, 2, 2, 3]);\n\n    $counted = $collection->countBy();\n\n    $counted->all();\n\n    // [1 => 1, 2 => 3, 3 => 1]\n\nYou pass a closure to the `countBy` method to count all items by a custom value:\n\n    $collection = collect(['alice@gmail.com', 'bob@yahoo.com', 'carlos@gmail.com']);\n\n    $counted = $collection->countBy(function (string $email) {\n        return substr(strrchr($email, \"@\"), 1);\n    });\n\n    $counted->all();\n\n    // ['gmail.com' => 2, 'yahoo.com' => 1]\n\n<a name=\"method-crossjoin\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":518,"to":542}}}}],["681",{"pageContent":"`crossJoin()` {.collection-method}\n\nThe `crossJoin` method cross joins the collection's values among the given arrays or collections, returning a Cartesian product with all possible permutations:\n\n    $collection = collect([1, 2]);\n\n    $matrix = $collection->crossJoin(['a', 'b']);\n\n    $matrix->all();\n\n    /*\n        [\n            [1, 'a'],\n            [1, 'b'],\n            [2, 'a'],\n            [2, 'b'],\n        ]\n    */\n\n    $collection = collect([1, 2]);\n\n    $matrix = $collection->crossJoin(['a', 'b'], ['I', 'II']);\n\n    $matrix->all();\n\n    /*\n        [\n            [1, 'a', 'I'],\n            [1, 'a', 'II'],\n            [1, 'b', 'I'],\n            [1, 'b', 'II'],\n            [2, 'a', 'I'],\n            [2, 'a', 'II'],\n            [2, 'b', 'I'],\n            [2, 'b', 'II'],\n        ]\n    */\n\n<a name=\"method-dd\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":543,"to":581}}}}],["682",{"pageContent":"`dd()` {.collection-method}\n\nThe `dd` method dumps the collection's items and ends execution of the script:\n\n    $collection = collect(['John Doe', 'Jane Doe']);\n\n    $collection->dd();\n\n    /*\n        Collection {\n            #items: array:2 [\n                0 => \"John Doe\"\n                1 => \"Jane Doe\"\n            ]\n        }\n    */\n\nIf you do not want to stop executing the script, use the [`dump`](#method-dump) method instead.\n\n<a name=\"method-diff\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":582,"to":601}}}}],["683",{"pageContent":"`diff()` {.collection-method}\n\nThe `diff` method compares the collection against another collection or a plain PHP `array` based on its values. This method will return the values in the original collection that are not present in the given collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $diff = $collection->diff([2, 4, 6, 8]);\n\n    $diff->all();\n\n    // [1, 3, 5]\n\n> **Note**  \n> This method's behavior is modified when using [Eloquent Collections](/docs/{{version}}/eloquent-collections#method-diff).\n\n<a name=\"method-diffassoc\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":602,"to":617}}}}],["684",{"pageContent":"`diffAssoc()` {.collection-method}\n\nThe `diffAssoc` method compares the collection against another collection or a plain PHP `array` based on its keys and values. This method will return the key / value pairs in the original collection that are not present in the given collection:\n\n    $collection = collect([\n        'color' => 'orange',\n        'type' => 'fruit',\n        'remain' => 6,\n    ]);\n\n    $diff = $collection->diffAssoc([\n        'color' => 'yellow',\n        'type' => 'fruit',\n        'remain' => 3,\n        'used' => 6,\n    ]);\n\n    $diff->all();\n\n    // ['color' => 'orange', 'remain' => 6]\n\n<a name=\"method-diffassocusing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":618,"to":639}}}}],["685",{"pageContent":"`diffAssocUsing()` {.collection-method}\n\nUnlike `diffAssoc`, `diffAssocUsing` accepts a user supplied callback function for the indices comparison:\n\n    $collection = collect([\n        'color' => 'orange',\n        'type' => 'fruit',\n        'remain' => 6,\n    ]);\n\n    $diff = $collection->diffAssocUsing([\n        'Color' => 'yellow',\n        'Type' => 'fruit',\n        'Remain' => 3,\n    ], 'strnatcasecmp');\n\n    $diff->all();\n\n    // ['color' => 'orange', 'remain' => 6]\n\nThe callback must be a comparison function that returns an integer less than, equal to, or greater than zero. For more information, refer to the PHP documentation on [`array_diff_uassoc`](https://www.php.net/array_diff_uassoc#refsect1-function.array-diff-uassoc-parameters), which is the PHP function that the `diffAssocUsing` method utilizes internally.\n\n<a name=\"method-diffkeys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":640,"to":662}}}}],["686",{"pageContent":"`diffKeys()` {.collection-method}\n\nThe `diffKeys` method compares the collection against another collection or a plain PHP `array` based on its keys. This method will return the key / value pairs in the original collection that are not present in the given collection:\n\n    $collection = collect([\n        'one' => 10,\n        'two' => 20,\n        'three' => 30,\n        'four' => 40,\n        'five' => 50,\n    ]);\n\n    $diff = $collection->diffKeys([\n        'two' => 2,\n        'four' => 4,\n        'six' => 6,\n        'eight' => 8,\n    ]);\n\n    $diff->all();\n\n    // ['one' => 10, 'three' => 30, 'five' => 50]\n\n<a name=\"method-doesntcontain\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":663,"to":686}}}}],["687",{"pageContent":"`doesntContain()` {.collection-method}\n\nThe `doesntContain` method determines whether the collection does not contain a given item. You may pass a closure to the `doesntContain` method to determine if an element does not exist in the collection matching a given truth test:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->doesntContain(function (int $value, int $key) {\n        return $value < 5;\n    });\n\n    // false\n\nAlternatively, you may pass a string to the `doesntContain` method to determine whether the collection does not contain a given item value:\n\n    $collection = collect(['name' => 'Desk', 'price' => 100]);\n\n    $collection->doesntContain('Table');\n\n    // true\n\n    $collection->doesntContain('Desk');\n\n    // false\n\nYou may also pass a key / value pair to the `doesntContain` method, which will determine if the given pair does not exist in the collection:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":687,"to":716}}}}],["688",{"pageContent":"$collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n    ]);\n\n    $collection->doesntContain('product', 'Bookcase');\n\n    // true\n\nThe `doesntContain` method uses \"loose\" comparisons when checking item values, meaning a string with an integer value will be considered equal to an integer of the same value.\n\n<a name=\"method-dot\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":716,"to":727}}}}],["689",{"pageContent":"`dot()` {.collection-method}\n\nThe `dot` method flattens a multi-dimensional collection into a single level collection that uses \"dot\" notation to indicate depth:\n\n    $collection = collect(['products' => ['desk' => ['price' => 100]]]);\n\n    $flattened = $collection->dot();\n\n    $flattened->all();\n\n    // ['products.desk.price' => 100]\n\n<a name=\"method-dump\"></a>\n#### `dump()` {.collection-method}\n\nThe `dump` method dumps the collection's items:\n\n    $collection = collect(['John Doe', 'Jane Doe']);\n\n    $collection->dump();\n\n    /*\n        Collection {\n            #items: array:2 [\n                0 => \"John Doe\"\n                1 => \"Jane Doe\"\n            ]\n        }\n    */\n\nIf you want to stop executing the script after dumping the collection, use the [`dd`](#method-dd) method instead.\n\n<a name=\"method-duplicates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":728,"to":760}}}}],["690",{"pageContent":"`duplicates()` {.collection-method}\n\nThe `duplicates` method retrieves and returns duplicate values from the collection:\n\n    $collection = collect(['a', 'b', 'a', 'c', 'b']);\n\n    $collection->duplicates();\n\n    // [2 => 'a', 4 => 'b']\n\nIf the collection contains arrays or objects, you can pass the key of the attributes that you wish to check for duplicate values:\n\n    $employees = collect([\n        ['email' => 'abigail@example.com', 'position' => 'Developer'],\n        ['email' => 'james@example.com', 'position' => 'Designer'],\n        ['email' => 'victoria@example.com', 'position' => 'Developer'],\n    ]);\n\n    $employees->duplicates('position');\n\n    // [2 => 'Developer']\n\n<a name=\"method-duplicatesstrict\"></a>\n#### `duplicatesStrict()` {.collection-method}\n\nThis method has the same signature as the [`duplicates`](#method-duplicates) method; however, all values are compared using \"strict\" comparisons.\n\n<a name=\"method-each\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":761,"to":788}}}}],["691",{"pageContent":"`each()` {.collection-method}\n\nThe `each` method iterates over the items in the collection and passes each item to a closure:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $collection->each(function (int $item, int $key) {\n        // ...\n    });\n\nIf you would like to stop iterating through the items, you may return `false` from your closure:\n\n    $collection->each(function (int $item, int $key) {\n        if (/* condition */) {\n            return false;\n        }\n    });\n\n<a name=\"method-eachspread\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":789,"to":807}}}}],["692",{"pageContent":"`eachSpread()` {.collection-method}\n\nThe `eachSpread` method iterates over the collection's items, passing each nested item value into the given callback:\n\n    $collection = collect([['John Doe', 35], ['Jane Doe', 33]]);\n\n    $collection->eachSpread(function (string $name, int $age) {\n        // ...\n    });\n\nYou may stop iterating through the items by returning `false` from the callback:\n\n    $collection->eachSpread(function (string $name, int $age) {\n        return false;\n    });\n\n<a name=\"method-ensure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":808,"to":824}}}}],["693",{"pageContent":"`ensure()` {.collection-method}\n\nThe `ensure` method may be used to verify that all elements of a collection are of a given type. Otherwise, an `UnexpectedValueException` will be thrown:\n\n    return $collection->ensure(User::class);\n\nPrimitive types such as `string`, `int`, `float`, `bool`, and `array` may also be specified:\n\n    return $collection->ensure('int');\n\n> **Warning**\n> The `ensure` method does not guarantee that elements of different types will not be added to the collection at a later time.\n\n<a name=\"method-every\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":825,"to":838}}}}],["694",{"pageContent":"`every()` {.collection-method}\n\nThe `every` method may be used to verify that all elements of a collection pass a given truth test:\n\n    collect([1, 2, 3, 4])->every(function (int $value, int $key) {\n        return $value > 2;\n    });\n\n    // false\n\nIf the collection is empty, the `every` method will return true:\n\n    $collection = collect([]);\n\n    $collection->every(function (int $value, int $key) {\n        return $value > 2;\n    });\n\n    // true\n\n<a name=\"method-except\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":839,"to":859}}}}],["695",{"pageContent":"`except()` {.collection-method}\n\nThe `except` method returns all items in the collection except for those with the specified keys:\n\n    $collection = collect(['product_id' => 1, 'price' => 100, 'discount' => false]);\n\n    $filtered = $collection->except(['price', 'discount']);\n\n    $filtered->all();\n\n    // ['product_id' => 1]\n\nFor the inverse of `except`, see the [only](#method-only) method.\n\n> **Note**  \n> This method's behavior is modified when using [Eloquent Collections](/docs/{{version}}/eloquent-collections#method-except).\n\n<a name=\"method-filter\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":860,"to":877}}}}],["696",{"pageContent":"`filter()` {.collection-method}\n\nThe `filter` method filters the collection using the given callback, keeping only those items that pass a given truth test:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $filtered = $collection->filter(function (int $value, int $key) {\n        return $value > 2;\n    });\n\n    $filtered->all();\n\n    // [3, 4]\n\nIf no callback is supplied, all entries of the collection that are equivalent to `false` will be removed:\n\n    $collection = collect([1, 2, 3, null, false, '', 0, []]);\n\n    $collection->filter()->all();\n\n    // [1, 2, 3]\n\nFor the inverse of `filter`, see the [reject](#method-reject) method.\n\n<a name=\"method-first\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":878,"to":902}}}}],["697",{"pageContent":"`first()` {.collection-method}\n\nThe `first` method returns the first element in the collection that passes a given truth test:\n\n    collect([1, 2, 3, 4])->first(function (int $value, int $key) {\n        return $value > 2;\n    });\n\n    // 3\n\nYou may also call the `first` method with no arguments to get the first element in the collection. If the collection is empty, `null` is returned:\n\n    collect([1, 2, 3, 4])->first();\n\n    // 1\n\n<a name=\"method-first-or-fail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":903,"to":919}}}}],["698",{"pageContent":"`firstOrFail()` {.collection-method}\n\nThe `firstOrFail` method is identical to the `first` method; however, if no result is found, an `Illuminate\\Support\\ItemNotFoundException` exception will be thrown:\n\n    collect([1, 2, 3, 4])->firstOrFail(function (int $value, int $key) {\n        return $value > 5;\n    });\n\n    // Throws ItemNotFoundException...\n\nYou may also call the `firstOrFail` method with no arguments to get the first element in the collection. If the collection is empty, an `Illuminate\\Support\\ItemNotFoundException` exception will be thrown:\n\n    collect([])->firstOrFail();\n\n    // Throws ItemNotFoundException...\n\n<a name=\"method-first-where\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":920,"to":936}}}}],["699",{"pageContent":"`firstWhere()` {.collection-method}\n\nThe `firstWhere` method returns the first element in the collection with the given key / value pair:\n\n    $collection = collect([\n        ['name' => 'Regena', 'age' => null],\n        ['name' => 'Linda', 'age' => 14],\n        ['name' => 'Diego', 'age' => 23],\n        ['name' => 'Linda', 'age' => 84],\n    ]);\n\n    $collection->firstWhere('name', 'Linda');\n\n    // ['name' => 'Linda', 'age' => 14]\n\nYou may also call the `firstWhere` method with a comparison operator:\n\n    $collection->firstWhere('age', '>=', 18);\n\n    // ['name' => 'Diego', 'age' => 23]\n\nLike the [where](#method-where) method, you may pass one argument to the `firstWhere` method. In this scenario, the `firstWhere` method will return the first item where the given item key's value is \"truthy\":\n\n    $collection->firstWhere('age');\n\n    // ['name' => 'Linda', 'age' => 14]\n\n<a name=\"method-flatmap\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":937,"to":964}}}}],["700",{"pageContent":"`flatMap()` {.collection-method}\n\nThe `flatMap` method iterates through the collection and passes each value to the given closure. The closure is free to modify the item and return it, thus forming a new collection of modified items. Then, the array is flattened by one level:\n\n    $collection = collect([\n        ['name' => 'Sally'],\n        ['school' => 'Arkansas'],\n        ['age' => 28]\n    ]);\n\n    $flattened = $collection->flatMap(function (array $values) {\n        return array_map('strtoupper', $values);\n    });\n\n    $flattened->all();\n\n    // ['name' => 'SALLY', 'school' => 'ARKANSAS', 'age' => '28'];\n\n<a name=\"method-flatten\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":965,"to":983}}}}],["701",{"pageContent":"`flatten()` {.collection-method}\n\nThe `flatten` method flattens a multi-dimensional collection into a single dimension:\n\n    $collection = collect([\n        'name' => 'taylor',\n        'languages' => [\n            'php', 'javascript'\n        ]\n    ]);\n\n    $flattened = $collection->flatten();\n\n    $flattened->all();\n\n    // ['taylor', 'php', 'javascript'];\n\nIf necessary, you may pass the `flatten` method a \"depth\" argument:\n\n    $collection = collect([\n        'Apple' => [\n            [\n                'name' => 'iPhone 6S',\n                'brand' => 'Apple'\n            ],\n        ],\n        'Samsung' => [\n            [\n                'name' => 'Galaxy S7',\n                'brand' => 'Samsung'\n            ],\n        ],\n    ]);\n\n    $products = $collection->flatten(1);\n\n    $products->values()->all();\n\n    /*\n        [\n            ['name' => 'iPhone 6S', 'brand' => 'Apple'],\n            ['name' => 'Galaxy S7', 'brand' => 'Samsung'],\n        ]\n    */","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":984,"to":1027}}}}],["702",{"pageContent":"$products->values()->all();\n\n    /*\n        [\n            ['name' => 'iPhone 6S', 'brand' => 'Apple'],\n            ['name' => 'Galaxy S7', 'brand' => 'Samsung'],\n        ]\n    */\n\nIn this example, calling `flatten` without providing the depth would have also flattened the nested arrays, resulting in `['iPhone 6S', 'Apple', 'Galaxy S7', 'Samsung']`. Providing a depth allows you to specify the number of levels nested arrays will be flattened.\n\n<a name=\"method-flip\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1027,"to":1038}}}}],["703",{"pageContent":"`flip()` {.collection-method}\n\nThe `flip` method swaps the collection's keys with their corresponding values:\n\n    $collection = collect(['name' => 'taylor', 'framework' => 'laravel']);\n\n    $flipped = $collection->flip();\n\n    $flipped->all();\n\n    // ['taylor' => 'name', 'laravel' => 'framework']\n\n<a name=\"method-forget\"></a>\n#### `forget()` {.collection-method}\n\nThe `forget` method removes an item from the collection by its key:\n\n    $collection = collect(['name' => 'taylor', 'framework' => 'laravel']);\n\n    $collection->forget('name');\n\n    $collection->all();\n\n    // ['framework' => 'laravel']\n\n> **Warning**  \n> Unlike most other collection methods, `forget` does not return a new modified collection; it modifies the collection it is called on.\n\n<a name=\"method-forpage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1039,"to":1067}}}}],["704",{"pageContent":"`forPage()` {.collection-method}\n\nThe `forPage` method returns a new collection containing the items that would be present on a given page number. The method accepts the page number as its first argument and the number of items to show per page as its second argument:\n\n    $collection = collect([1, 2, 3, 4, 5, 6, 7, 8, 9]);\n\n    $chunk = $collection->forPage(2, 3);\n\n    $chunk->all();\n\n    // [4, 5, 6]\n\n<a name=\"method-get\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1068,"to":1080}}}}],["705",{"pageContent":"`get()` {.collection-method}\n\nThe `get` method returns the item at a given key. If the key does not exist, `null` is returned:\n\n    $collection = collect(['name' => 'taylor', 'framework' => 'laravel']);\n\n    $value = $collection->get('name');\n\n    // taylor\n\nYou may optionally pass a default value as the second argument:\n\n    $collection = collect(['name' => 'taylor', 'framework' => 'laravel']);\n\n    $value = $collection->get('age', 34);\n\n    // 34\n\nYou may even pass a callback as the method's default value. The result of the callback will be returned if the specified key does not exist:\n\n    $collection->get('email', function () {\n        return 'taylor@example.com';\n    });\n\n    // taylor@example.com\n\n<a name=\"method-groupby\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1081,"to":1107}}}}],["706",{"pageContent":"`groupBy()` {.collection-method}\n\nThe `groupBy` method groups the collection's items by a given key:\n\n    $collection = collect([\n        ['account_id' => 'account-x10', 'product' => 'Chair'],\n        ['account_id' => 'account-x10', 'product' => 'Bookcase'],\n        ['account_id' => 'account-x11', 'product' => 'Desk'],\n    ]);\n\n    $grouped = $collection->groupBy('account_id');\n\n    $grouped->all();\n\n    /*\n        [\n            'account-x10' => [\n                ['account_id' => 'account-x10', 'product' => 'Chair'],\n                ['account_id' => 'account-x10', 'product' => 'Bookcase'],\n            ],\n            'account-x11' => [\n                ['account_id' => 'account-x11', 'product' => 'Desk'],\n            ],\n        ]\n    */\n\nInstead of passing a string `key`, you may pass a callback. The callback should return the value you wish to key the group by:\n\n    $grouped = $collection->groupBy(function (array $item, int $key) {\n        return substr($item['account_id'], -3);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1108,"to":1138}}}}],["707",{"pageContent":"$grouped = $collection->groupBy(function (array $item, int $key) {\n        return substr($item['account_id'], -3);\n    });\n\n    $grouped->all();\n\n    /*\n        [\n            'x10' => [\n                ['account_id' => 'account-x10', 'product' => 'Chair'],\n                ['account_id' => 'account-x10', 'product' => 'Bookcase'],\n            ],\n            'x11' => [\n                ['account_id' => 'account-x11', 'product' => 'Desk'],\n            ],\n        ]\n    */\n\nMultiple grouping criteria may be passed as an array. Each array element will be applied to the corresponding level within a multi-dimensional array:\n\n    $data = new Collection([\n        10 => ['user' => 1, 'skill' => 1, 'roles' => ['Role_1', 'Role_3']],\n        20 => ['user' => 2, 'skill' => 1, 'roles' => ['Role_1', 'Role_2']],\n        30 => ['user' => 3, 'skill' => 2, 'roles' => ['Role_1']],\n        40 => ['user' => 4, 'skill' => 2, 'roles' => ['Role_2']],\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1138,"to":1163}}}}],["708",{"pageContent":"$result = $data->groupBy(['skill', function (array $item) {\n        return $item['roles'];\n    }], preserveKeys: true);\n\n    /*\n    [\n        1 => [\n            'Role_1' => [\n                10 => ['user' => 1, 'skill' => 1, 'roles' => ['Role_1', 'Role_3']],\n                20 => ['user' => 2, 'skill' => 1, 'roles' => ['Role_1', 'Role_2']],\n            ],\n            'Role_2' => [\n                20 => ['user' => 2, 'skill' => 1, 'roles' => ['Role_1', 'Role_2']],\n            ],\n            'Role_3' => [\n                10 => ['user' => 1, 'skill' => 1, 'roles' => ['Role_1', 'Role_3']],\n            ],\n        ],\n        2 => [\n            'Role_1' => [\n                30 => ['user' => 3, 'skill' => 2, 'roles' => ['Role_1']],\n            ],\n            'Role_2' => [\n                40 => ['user' => 4, 'skill' => 2, 'roles' => ['Role_2']],\n            ],\n        ],\n    ];\n    */\n\n<a name=\"method-has\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1165,"to":1194}}}}],["709",{"pageContent":"`has()` {.collection-method}\n\nThe `has` method determines if a given key exists in the collection:\n\n    $collection = collect(['account_id' => 1, 'product' => 'Desk', 'amount' => 5]);\n\n    $collection->has('product');\n\n    // true\n\n    $collection->has(['product', 'amount']);\n\n    // true\n\n    $collection->has(['amount', 'price']);\n\n    // false\n\n<a name=\"method-hasany\"></a>\n#### `hasAny()` {.collection-method}\n\nThe `hasAny` method determines whether any of the given keys exist in the collection:\n\n    $collection = collect(['account_id' => 1, 'product' => 'Desk', 'amount' => 5]);\n\n    $collection->hasAny(['product', 'price']);\n\n    // true\n\n    $collection->hasAny(['name', 'price']);\n\n    // false\n\n<a name=\"method-implode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1195,"to":1228}}}}],["710",{"pageContent":"`implode()` {.collection-method}\n\nThe `implode` method joins items in a collection. Its arguments depend on the type of items in the collection. If the collection contains arrays or objects, you should pass the key of the attributes you wish to join, and the \"glue\" string you wish to place between the values:\n\n    $collection = collect([\n        ['account_id' => 1, 'product' => 'Desk'],\n        ['account_id' => 2, 'product' => 'Chair'],\n    ]);\n\n    $collection->implode('product', ', ');\n\n    // Desk, Chair\n\nIf the collection contains simple strings or numeric values, you should pass the \"glue\" as the only argument to the method:\n\n    collect([1, 2, 3, 4, 5])->implode('-');\n\n    // '1-2-3-4-5'\n\nYou may pass a closure to the `implode` method if you would like to format the values being imploded:\n\n    $collection->implode(function (array $item, int $key) {\n        return strtoupper($item['product']);\n    }, ', ');\n\n    // DESK, CHAIR\n\n<a name=\"method-intersect\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1229,"to":1256}}}}],["711",{"pageContent":"`intersect()` {.collection-method}\n\nThe `intersect` method removes any values from the original collection that are not present in the given `array` or collection. The resulting collection will preserve the original collection's keys:\n\n    $collection = collect(['Desk', 'Sofa', 'Chair']);\n\n    $intersect = $collection->intersect(['Desk', 'Chair', 'Bookcase']);\n\n    $intersect->all();\n\n    // [0 => 'Desk', 2 => 'Chair']\n\n> **Note**  \n> This method's behavior is modified when using [Eloquent Collections](/docs/{{version}}/eloquent-collections#method-intersect).\n\n<a name=\"method-intersectAssoc\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1257,"to":1272}}}}],["712",{"pageContent":"`intersectAssoc()` {.collection-method}\n\nThe `intersectAssoc` method compares the original collection against another collection or `array`, returning the key / value pairs that are present in all of the given collections:\n\n    $collection = collect([\n        'color' => 'red',\n        'size' => 'M',\n        'material' => 'cotton'\n    ]);\n\n    $intersect = $collection->intersectAssoc([\n        'color' => 'blue',\n        'size' => 'M',\n        'material' => 'polyester'\n    ]);\n\n    $intersect->all();\n\n    // ['size' => 'M']\n\n<a name=\"method-intersectbykeys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1273,"to":1293}}}}],["713",{"pageContent":"`intersectByKeys()` {.collection-method}\n\nThe `intersectByKeys` method removes any keys and their corresponding values from the original collection that are not present in the given `array` or collection:\n\n    $collection = collect([\n        'serial' => 'UX301', 'type' => 'screen', 'year' => 2009,\n    ]);\n\n    $intersect = $collection->intersectByKeys([\n        'reference' => 'UX404', 'type' => 'tab', 'year' => 2011,\n    ]);\n\n    $intersect->all();\n\n    // ['type' => 'screen', 'year' => 2009]\n\n<a name=\"method-isempty\"></a>\n#### `isEmpty()` {.collection-method}\n\nThe `isEmpty` method returns `true` if the collection is empty; otherwise, `false` is returned:\n\n    collect([])->isEmpty();\n\n    // true\n\n<a name=\"method-isnotempty\"></a>\n#### `isNotEmpty()` {.collection-method}\n\nThe `isNotEmpty` method returns `true` if the collection is not empty; otherwise, `false` is returned:\n\n    collect([])->isNotEmpty();\n\n    // false\n\n<a name=\"method-join\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1294,"to":1328}}}}],["714",{"pageContent":"`join()` {.collection-method}\n\nThe `join` method joins the collection's values with a string. Using this method's second argument, you may also specify how the final element should be appended to the string:\n\n    collect(['a', 'b', 'c'])->join(', '); // 'a, b, c'\n    collect(['a', 'b', 'c'])->join(', ', ', and '); // 'a, b, and c'\n    collect(['a', 'b'])->join(', ', ' and '); // 'a and b'\n    collect(['a'])->join(', ', ' and '); // 'a'\n    collect([])->join(', ', ' and '); // ''\n\n<a name=\"method-keyby\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1329,"to":1339}}}}],["715",{"pageContent":"`keyBy()` {.collection-method}\n\nThe `keyBy` method keys the collection by the given key. If multiple items have the same key, only the last one will appear in the new collection:\n\n    $collection = collect([\n        ['product_id' => 'prod-100', 'name' => 'Desk'],\n        ['product_id' => 'prod-200', 'name' => 'Chair'],\n    ]);\n\n    $keyed = $collection->keyBy('product_id');\n\n    $keyed->all();\n\n    /*\n        [\n            'prod-100' => ['product_id' => 'prod-100', 'name' => 'Desk'],\n            'prod-200' => ['product_id' => 'prod-200', 'name' => 'Chair'],\n        ]\n    */\n\nYou may also pass a callback to the method. The callback should return the value to key the collection by:\n\n    $keyed = $collection->keyBy(function (array $item, int $key) {\n        return strtoupper($item['product_id']);\n    });\n\n    $keyed->all();\n\n    /*\n        [\n            'PROD-100' => ['product_id' => 'prod-100', 'name' => 'Desk'],\n            'PROD-200' => ['product_id' => 'prod-200', 'name' => 'Chair'],\n        ]\n    */","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1340,"to":1373}}}}],["716",{"pageContent":"$keyed->all();\n\n    /*\n        [\n            'PROD-100' => ['product_id' => 'prod-100', 'name' => 'Desk'],\n            'PROD-200' => ['product_id' => 'prod-200', 'name' => 'Chair'],\n        ]\n    */\n\n<a name=\"method-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1373,"to":1382}}}}],["717",{"pageContent":"`keys()` {.collection-method}\n\nThe `keys` method returns all of the collection's keys:\n\n    $collection = collect([\n        'prod-100' => ['product_id' => 'prod-100', 'name' => 'Desk'],\n        'prod-200' => ['product_id' => 'prod-200', 'name' => 'Chair'],\n    ]);\n\n    $keys = $collection->keys();\n\n    $keys->all();\n\n    // ['prod-100', 'prod-200']\n\n<a name=\"method-last\"></a>\n#### `last()` {.collection-method}\n\nThe `last` method returns the last element in the collection that passes a given truth test:\n\n    collect([1, 2, 3, 4])->last(function (int $value, int $key) {\n        return $value < 3;\n    });\n\n    // 2\n\nYou may also call the `last` method with no arguments to get the last element in the collection. If the collection is empty, `null` is returned:\n\n    collect([1, 2, 3, 4])->last();\n\n    // 4\n\n<a name=\"method-lazy\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1383,"to":1415}}}}],["718",{"pageContent":"`lazy()` {.collection-method}\n\nThe `lazy` method returns a new [`LazyCollection`](#lazy-collections) instance from the underlying array of items:\n\n    $lazyCollection = collect([1, 2, 3, 4])->lazy();\n\n    $lazyCollection::class;\n\n    // Illuminate\\Support\\LazyCollection\n\n    $lazyCollection->all();\n\n    // [1, 2, 3, 4]\n\nThis is especially useful when you need to perform transformations on a huge `Collection` that contains many items:\n\n    $count = $hugeCollection\n        ->lazy()\n        ->where('country', 'FR')\n        ->where('balance', '>', '100')\n        ->count();\n\nBy converting the collection to a `LazyCollection`, we avoid having to allocate a ton of additional memory. Though the original collection still keeps _its_ values in memory, the subsequent filters will not. Therefore, virtually no additional memory will be allocated when filtering the collection's results.\n\n<a name=\"method-macro\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1416,"to":1440}}}}],["719",{"pageContent":"`macro()` {.collection-method}\n\nThe static `macro` method allows you to add methods to the `Collection` class at run time. Refer to the documentation on [extending collections](#extending-collections) for more information.\n\n<a name=\"method-make\"></a>\n#### `make()` {.collection-method}\n\nThe static `make` method creates a new collection instance. See the [Creating Collections](#creating-collections) section.\n\n<a name=\"method-map\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1441,"to":1450}}}}],["720",{"pageContent":"`make()` {.collection-method}\n\nThe static `make` method creates a new collection instance. See the [Creating Collections](#creating-collections) section.\n\n<a name=\"method-map\"></a>\n#### `map()` {.collection-method}\n\nThe `map` method iterates through the collection and passes each value to the given callback. The callback is free to modify the item and return it, thus forming a new collection of modified items:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $multiplied = $collection->map(function (int $item, int $key) {\n        return $item * 2;\n    });\n\n    $multiplied->all();\n\n    // [2, 4, 6, 8, 10]\n\n> **Warning**  \n> Like most other collection methods, `map` returns a new collection instance; it does not modify the collection it is called on. If you want to transform the original collection, use the [`transform`](#method-transform) method.\n\n<a name=\"method-mapinto\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1450,"to":1472}}}}],["721",{"pageContent":"`mapInto()` {.collection-method}\n\nThe `mapInto()` method iterates over the collection, creating a new instance of the given class by passing the value into the constructor:\n\n    class Currency\n    {\n        /**\n         * Create a new currency instance.\n         */\n        function __construct(\n            public string $code\n        ) {}\n    }\n\n    $collection = collect(['USD', 'EUR', 'GBP']);\n\n    $currencies = $collection->mapInto(Currency::class);\n\n    $currencies->all();\n\n    // [Currency('USD'), Currency('EUR'), Currency('GBP')]\n\n<a name=\"method-mapspread\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1473,"to":1495}}}}],["722",{"pageContent":"`mapSpread()` {.collection-method}\n\nThe `mapSpread` method iterates over the collection's items, passing each nested item value into the given closure. The closure is free to modify the item and return it, thus forming a new collection of modified items:\n\n    $collection = collect([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]);\n\n    $chunks = $collection->chunk(2);\n\n    $sequence = $chunks->mapSpread(function (int $even, int $odd) {\n        return $even + $odd;\n    });\n\n    $sequence->all();\n\n    // [1, 5, 9, 13, 17]\n\n<a name=\"method-maptogroups\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1496,"to":1512}}}}],["723",{"pageContent":"`mapToGroups()` {.collection-method}\n\nThe `mapToGroups` method groups the collection's items by the given closure. The closure should return an associative array containing a single key / value pair, thus forming a new collection of grouped values:\n\n    $collection = collect([\n        [\n            'name' => 'John Doe',\n            'department' => 'Sales',\n        ],\n        [\n            'name' => 'Jane Doe',\n            'department' => 'Sales',\n        ],\n        [\n            'name' => 'Johnny Doe',\n            'department' => 'Marketing',\n        ]\n    ]);\n\n    $grouped = $collection->mapToGroups(function (array $item, int $key) {\n        return [$item['department'] => $item['name']];\n    });\n\n    $grouped->all();\n\n    /*\n        [\n            'Sales' => ['John Doe', 'Jane Doe'],\n            'Marketing' => ['Johnny Doe'],\n        ]\n    */\n\n    $grouped->get('Sales')->all();\n\n    // ['John Doe', 'Jane Doe']\n\n<a name=\"method-mapwithkeys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1513,"to":1549}}}}],["724",{"pageContent":"`mapWithKeys()` {.collection-method}\n\nThe `mapWithKeys` method iterates through the collection and passes each value to the given callback. The callback should return an associative array containing a single key / value pair:\n\n    $collection = collect([\n        [\n            'name' => 'John',\n            'department' => 'Sales',\n            'email' => 'john@example.com',\n        ],\n        [\n            'name' => 'Jane',\n            'department' => 'Marketing',\n            'email' => 'jane@example.com',\n        ]\n    ]);\n\n    $keyed = $collection->mapWithKeys(function (array $item, int $key) {\n        return [$item['email'] => $item['name']];\n    });\n\n    $keyed->all();\n\n    /*\n        [\n            'john@example.com' => 'John',\n            'jane@example.com' => 'Jane',\n        ]\n    */\n\n<a name=\"method-max\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1550,"to":1580}}}}],["725",{"pageContent":"`max()` {.collection-method}\n\nThe `max` method returns the maximum value of a given key:\n\n    $max = collect([\n        ['foo' => 10],\n        ['foo' => 20]\n    ])->max('foo');\n\n    // 20\n\n    $max = collect([1, 2, 3, 4, 5])->max();\n\n    // 5\n\n<a name=\"method-median\"></a>\n#### `median()` {.collection-method}\n\nThe `median` method returns the [median value](https://en.wikipedia.org/wiki/Median) of a given key:\n\n    $median = collect([\n        ['foo' => 10],\n        ['foo' => 10],\n        ['foo' => 20],\n        ['foo' => 40]\n    ])->median('foo');\n\n    // 15\n\n    $median = collect([1, 1, 2, 4])->median();\n\n    // 1.5\n\n<a name=\"method-merge\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1581,"to":1614}}}}],["726",{"pageContent":"`merge()` {.collection-method}\n\nThe `merge` method merges the given array or collection with the original collection. If a string key in the given items matches a string key in the original collection, the given item's value will overwrite the value in the original collection:\n\n    $collection = collect(['product_id' => 1, 'price' => 100]);\n\n    $merged = $collection->merge(['price' => 200, 'discount' => false]);\n\n    $merged->all();\n\n    // ['product_id' => 1, 'price' => 200, 'discount' => false]\n\nIf the given item's keys are numeric, the values will be appended to the end of the collection:\n\n    $collection = collect(['Desk', 'Chair']);\n\n    $merged = $collection->merge(['Bookcase', 'Door']);\n\n    $merged->all();\n\n    // ['Desk', 'Chair', 'Bookcase', 'Door']\n\n<a name=\"method-mergerecursive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1615,"to":1637}}}}],["727",{"pageContent":"`mergeRecursive()` {.collection-method}\n\nThe `mergeRecursive` method merges the given array or collection recursively with the original collection. If a string key in the given items matches a string key in the original collection, then the values for these keys are merged together into an array, and this is done recursively:\n\n    $collection = collect(['product_id' => 1, 'price' => 100]);\n\n    $merged = $collection->mergeRecursive([\n        'product_id' => 2,\n        'price' => 200,\n        'discount' => false\n    ]);\n\n    $merged->all();\n\n    // ['product_id' => [1, 2], 'price' => [100, 200], 'discount' => false]\n\n<a name=\"method-min\"></a>\n#### `min()` {.collection-method}\n\nThe `min` method returns the minimum value of a given key:\n\n    $min = collect([['foo' => 10], ['foo' => 20]])->min('foo');\n\n    // 10\n\n    $min = collect([1, 2, 3, 4, 5])->min();\n\n    // 1\n\n<a name=\"method-mode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1638,"to":1667}}}}],["728",{"pageContent":"`mode()` {.collection-method}\n\nThe `mode` method returns the [mode value](https://en.wikipedia.org/wiki/Mode_(statistics)) of a given key:\n\n    $mode = collect([\n        ['foo' => 10],\n        ['foo' => 10],\n        ['foo' => 20],\n        ['foo' => 40]\n    ])->mode('foo');\n\n    // [10]\n\n    $mode = collect([1, 1, 2, 4])->mode();\n\n    // [1]\n\n    $mode = collect([1, 1, 2, 2])->mode();\n\n    // [1, 2]\n\n<a name=\"method-nth\"></a>\n#### `nth()` {.collection-method}\n\nThe `nth` method creates a new collection consisting of every n-th element:\n\n    $collection = collect(['a', 'b', 'c', 'd', 'e', 'f']);\n\n    $collection->nth(4);\n\n    // ['a', 'e']\n\nYou may optionally pass a starting offset as the second argument:\n\n    $collection->nth(4, 1);\n\n    // ['b', 'f']\n\n<a name=\"method-only\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1668,"to":1706}}}}],["729",{"pageContent":"`only()` {.collection-method}\n\nThe `only` method returns the items in the collection with the specified keys:\n\n    $collection = collect([\n        'product_id' => 1,\n        'name' => 'Desk',\n        'price' => 100,\n        'discount' => false\n    ]);\n\n    $filtered = $collection->only(['product_id', 'name']);\n\n    $filtered->all();\n\n    // ['product_id' => 1, 'name' => 'Desk']\n\nFor the inverse of `only`, see the [except](#method-except) method.\n\n> **Note**  \n> This method's behavior is modified when using [Eloquent Collections](/docs/{{version}}/eloquent-collections#method-only).\n\n<a name=\"method-pad\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1707,"to":1729}}}}],["730",{"pageContent":"`pad()` {.collection-method}\n\nThe `pad` method will fill the array with the given value until the array reaches the specified size. This method behaves like the [array_pad](https://secure.php.net/manual/en/function.array-pad.php) PHP function.\n\nTo pad to the left, you should specify a negative size. No padding will take place if the absolute value of the given size is less than or equal to the length of the array:\n\n    $collection = collect(['A', 'B', 'C']);\n\n    $filtered = $collection->pad(5, 0);\n\n    $filtered->all();\n\n    // ['A', 'B', 'C', 0, 0]\n\n    $filtered = $collection->pad(-5, 0);\n\n    $filtered->all();\n\n    // [0, 0, 'A', 'B', 'C']\n\n<a name=\"method-partition\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1730,"to":1750}}}}],["731",{"pageContent":"`partition()` {.collection-method}\n\nThe `partition` method may be combined with PHP array destructuring to separate elements that pass a given truth test from those that do not:\n\n    $collection = collect([1, 2, 3, 4, 5, 6]);\n\n    [$underThree, $equalOrAboveThree] = $collection->partition(function (int $i) {\n        return $i < 3;\n    });\n\n    $underThree->all();\n\n    // [1, 2]\n\n    $equalOrAboveThree->all();\n\n    // [3, 4, 5, 6]\n\n<a name=\"method-percentage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1751,"to":1769}}}}],["732",{"pageContent":"`percentage()` {.collection-method}\n\nThe `percentage` method may be used to quickly determine the percentage of items in the collection that pass a given truth test:\n\n```php\n$collection = collect([1, 1, 2, 2, 2, 3]);\n\n$percentage = $collection->percentage(fn ($value) => $value === 1);\n\n// 33.33\n```\n\nBy default, the percentage will be rounded to two decimal places. However, you may customize this behavior by providing a second argument to the method:\n\n```php\n$percentage = $collection->percentage(fn ($value) => $value === 1, precision: 3);\n\n// 33.333\n```\n\n<a name=\"method-pipe\"></a>\n#### `pipe()` {.collection-method}\n\nThe `pipe` method passes the collection to the given closure and returns the result of the executed closure:\n\n    $collection = collect([1, 2, 3]);\n\n    $piped = $collection->pipe(function (Collection $collection) {\n        return $collection->sum();\n    });\n\n    // 6\n\n<a name=\"method-pipeinto\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1770,"to":1803}}}}],["733",{"pageContent":"`pipeInto()` {.collection-method}\n\nThe `pipeInto` method creates a new instance of the given class and passes the collection into the constructor:\n\n    class ResourceCollection\n    {\n        /**\n         * Create a new ResourceCollection instance.\n         */\n        public function __construct(\n          public Collection $collection,\n        ) {}\n    }\n\n    $collection = collect([1, 2, 3]);\n\n    $resource = $collection->pipeInto(ResourceCollection::class);\n\n    $resource->collection->all();\n\n    // [1, 2, 3]\n\n<a name=\"method-pipethrough\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1804,"to":1826}}}}],["734",{"pageContent":"`pipeThrough()` {.collection-method}\n\nThe `pipeThrough` method passes the collection to the given array of closures and returns the result of the executed closures:\n\n    use Illuminate\\Support\\Collection;\n\n    $collection = collect([1, 2, 3]);\n\n    $result = $collection->pipeThrough([\n        function (Collection $collection) {\n            return $collection->merge([4, 5]);\n        },\n        function (Collection $collection) {\n            return $collection->sum();\n        },\n    ]);\n\n    // 15\n\n<a name=\"method-pluck\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1827,"to":1846}}}}],["735",{"pageContent":"`pluck()` {.collection-method}\n\nThe `pluck` method retrieves all of the values for a given key:\n\n    $collection = collect([\n        ['product_id' => 'prod-100', 'name' => 'Desk'],\n        ['product_id' => 'prod-200', 'name' => 'Chair'],\n    ]);\n\n    $plucked = $collection->pluck('name');\n\n    $plucked->all();\n\n    // ['Desk', 'Chair']\n\nYou may also specify how you wish the resulting collection to be keyed:\n\n    $plucked = $collection->pluck('name', 'product_id');\n\n    $plucked->all();\n\n    // ['prod-100' => 'Desk', 'prod-200' => 'Chair']\n\nThe `pluck` method also supports retrieving nested values using \"dot\" notation:\n\n    $collection = collect([\n        [\n            'name' => 'Laracon',\n            'speakers' => [\n                'first_day' => ['Rosa', 'Judith'],\n            ],\n        ],\n        [\n            'name' => 'VueConf',\n            'speakers' => [\n                'first_day' => ['Abigail', 'Joey'],\n            ],\n        ],\n    ]);\n\n    $plucked = $collection->pluck('speakers.first_day');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1847,"to":1887}}}}],["736",{"pageContent":"$plucked = $collection->pluck('speakers.first_day');\n\n    $plucked->all();\n\n    // [['Rosa', 'Judith'], ['Abigail', 'Joey']]\n\nIf duplicate keys exist, the last matching element will be inserted into the plucked collection:\n\n    $collection = collect([\n        ['brand' => 'Tesla',  'color' => 'red'],\n        ['brand' => 'Pagani', 'color' => 'white'],\n        ['brand' => 'Tesla',  'color' => 'black'],\n        ['brand' => 'Pagani', 'color' => 'orange'],\n    ]);\n\n    $plucked = $collection->pluck('color', 'brand');\n\n    $plucked->all();\n\n    // ['Tesla' => 'black', 'Pagani' => 'orange']\n\n<a name=\"method-pop\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1887,"to":1908}}}}],["737",{"pageContent":"`pop()` {.collection-method}\n\nThe `pop` method removes and returns the last item from the collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->pop();\n\n    // 5\n\n    $collection->all();\n\n    // [1, 2, 3, 4]\n\nYou may pass an integer to the `pop` method to remove and return multiple items from the end of a collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->pop(3);\n\n    // collect([5, 4, 3])\n\n    $collection->all();\n\n    // [1, 2]\n\n<a name=\"method-prepend\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1909,"to":1935}}}}],["738",{"pageContent":"`prepend()` {.collection-method}\n\nThe `prepend` method adds an item to the beginning of the collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->prepend(0);\n\n    $collection->all();\n\n    // [0, 1, 2, 3, 4, 5]\n\nYou may also pass a second argument to specify the key of the prepended item:\n\n    $collection = collect(['one' => 1, 'two' => 2]);\n\n    $collection->prepend(0, 'zero');\n\n    $collection->all();\n\n    // ['zero' => 0, 'one' => 1, 'two' => 2]\n\n<a name=\"method-pull\"></a>\n#### `pull()` {.collection-method}\n\nThe `pull` method removes and returns an item from the collection by its key:\n\n    $collection = collect(['product_id' => 'prod-100', 'name' => 'Desk']);\n\n    $collection->pull('name');\n\n    // 'Desk'\n\n    $collection->all();\n\n    // ['product_id' => 'prod-100']\n\n<a name=\"method-push\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1936,"to":1973}}}}],["739",{"pageContent":"`push()` {.collection-method}\n\nThe `push` method appends an item to the end of the collection:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $collection->push(5);\n\n    $collection->all();\n\n    // [1, 2, 3, 4, 5]\n\n<a name=\"method-put\"></a>\n#### `put()` {.collection-method}\n\nThe `put` method sets the given key and value in the collection:\n\n    $collection = collect(['product_id' => 1, 'name' => 'Desk']);\n\n    $collection->put('price', 100);\n\n    $collection->all();\n\n    // ['product_id' => 1, 'name' => 'Desk', 'price' => 100]\n\n<a name=\"method-random\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":1974,"to":1999}}}}],["740",{"pageContent":"`random()` {.collection-method}\n\nThe `random` method returns a random item from the collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->random();\n\n    // 4 - (retrieved randomly)\n\nYou may pass an integer to `random` to specify how many items you would like to randomly retrieve. A collection of items is always returned when explicitly passing the number of items you wish to receive:\n\n    $random = $collection->random(3);\n\n    $random->all();\n\n    // [2, 4, 5] - (retrieved randomly)\n\nIf the collection instance has fewer items than requested, the `random` method will throw an `InvalidArgumentException`.\n\nThe `random` method also accepts a closure, which will receive the current collection instance:\n\n    use Illuminate\\Support\\Collection;\n\n    $random = $collection->random(fn (Collection $items) => min(10, count($items)));\n\n    $random->all();\n\n    // [1, 2, 3, 4, 5] - (retrieved randomly)\n\n<a name=\"method-range\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2000,"to":2030}}}}],["741",{"pageContent":"`range()` {.collection-method}\n\nThe `range` method returns a collection containing integers between the specified range:\n\n    $collection = collect()->range(3, 6);\n\n    $collection->all();\n\n    // [3, 4, 5, 6]\n\n<a name=\"method-reduce\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2031,"to":2041}}}}],["742",{"pageContent":"`reduce()` {.collection-method}\n\nThe `reduce` method reduces the collection to a single value, passing the result of each iteration into the subsequent iteration:\n\n    $collection = collect([1, 2, 3]);\n\n    $total = $collection->reduce(function (?int $carry, int $item) {\n        return $carry + $item;\n    });\n\n    // 6\n\nThe value for `$carry` on the first iteration is `null`; however, you may specify its initial value by passing a second argument to `reduce`:\n\n    $collection->reduce(function (int $carry, int $item) {\n        return $carry + $item;\n    }, 4);\n\n    // 10\n\nThe `reduce` method also passes array keys in associative collections to the given callback:\n\n    $collection = collect([\n        'usd' => 1400,\n        'gbp' => 1200,\n        'eur' => 1000,\n    ]);\n\n    $ratio = [\n        'usd' => 1,\n        'gbp' => 1.37,\n        'eur' => 1.22,\n    ];\n\n    $collection->reduce(function (int $carry, int $value, int $key) use ($ratio) {\n        return $carry + ($value * $ratio[$key]);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2042,"to":2078}}}}],["743",{"pageContent":"$collection->reduce(function (int $carry, int $value, int $key) use ($ratio) {\n        return $carry + ($value * $ratio[$key]);\n    });\n\n    // 4264\n    \n<a name=\"method-reduce-spread\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2078,"to":2084}}}}],["744",{"pageContent":"`reduceSpread()` {.collection-method}\n\nThe `reduceSpread` method reduces the collection to an array of values, passing the results of each iteration into the subsequent iteration. This method is similar to the `reduce` method; however, it can accept multiple initial values:\n\n    [$creditsRemaining, $batch] = Image::where('status', 'unprocessed')\n        ->get()\n        ->reduceSpread(function (int $creditsRemaining, Collection $batch, Image $image) {\n            if ($creditsRemaining >= $image->creditsRequired()) {\n                $batch->push($image);\n\n                $creditsRemaining -= $image->creditsRequired();\n            }\n\n            return [$creditsRemaining, $batch];\n        }, $creditsAvailable, collect());\n\n<a name=\"method-reject\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2085,"to":2101}}}}],["745",{"pageContent":"`reject()` {.collection-method}\n\nThe `reject` method filters the collection using the given closure. The closure should return `true` if the item should be removed from the resulting collection:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $filtered = $collection->reject(function (int $value, int $key) {\n        return $value > 2;\n    });\n\n    $filtered->all();\n\n    // [1, 2]\n\nFor the inverse of the `reject` method, see the [`filter`](#method-filter) method.\n\n<a name=\"method-replace\"></a>\n#### `replace()` {.collection-method}\n\nThe `replace` method behaves similarly to `merge`; however, in addition to overwriting matching items that have string keys, the `replace` method will also overwrite items in the collection that have matching numeric keys:\n\n    $collection = collect(['Taylor', 'Abigail', 'James']);\n\n    $replaced = $collection->replace([1 => 'Victoria', 3 => 'Finn']);\n\n    $replaced->all();\n\n    // ['Taylor', 'Victoria', 'James', 'Finn']\n\n<a name=\"method-replacerecursive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2102,"to":2131}}}}],["746",{"pageContent":"`replaceRecursive()` {.collection-method}\n\nThis method works like `replace`, but it will recur into arrays and apply the same replacement process to the inner values:\n\n    $collection = collect([\n        'Taylor',\n        'Abigail',\n        [\n            'James',\n            'Victoria',\n            'Finn'\n        ]\n    ]);\n\n    $replaced = $collection->replaceRecursive([\n        'Charlie',\n        2 => [1 => 'King']\n    ]);\n\n    $replaced->all();\n\n    // ['Charlie', 'Abigail', ['James', 'King', 'Finn']]\n\n<a name=\"method-reverse\"></a>\n#### `reverse()` {.collection-method}\n\nThe `reverse` method reverses the order of the collection's items, preserving the original keys:\n\n    $collection = collect(['a', 'b', 'c', 'd', 'e']);\n\n    $reversed = $collection->reverse();\n\n    $reversed->all();\n\n    /*\n        [\n            4 => 'e',\n            3 => 'd',\n            2 => 'c',\n            1 => 'b',\n            0 => 'a',\n        ]\n    */\n\n<a name=\"method-search\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2132,"to":2176}}}}],["747",{"pageContent":"`search()` {.collection-method}\n\nThe `search` method searches the collection for the given value and returns its key if found. If the item is not found, `false` is returned:\n\n    $collection = collect([2, 4, 6, 8]);\n\n    $collection->search(4);\n\n    // 1\n\nThe search is done using a \"loose\" comparison, meaning a string with an integer value will be considered equal to an integer of the same value. To use \"strict\" comparison, pass `true` as the second argument to the method:\n\n    collect([2, 4, 6, 8])->search('4', $strict = true);\n\n    // false\n\nAlternatively, you may provide your own closure to search for the first item that passes a given truth test:\n\n    collect([2, 4, 6, 8])->search(function (int $item, int $key) {\n        return $item > 5;\n    });\n\n    // 2\n\n<a name=\"method-shift\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2177,"to":2201}}}}],["748",{"pageContent":"`shift()` {.collection-method}\n\nThe `shift` method removes and returns the first item from the collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->shift();\n\n    // 1\n\n    $collection->all();\n\n    // [2, 3, 4, 5]\n\nYou may pass an integer to the `shift` method to remove and return multiple items from the beginning of a collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->shift(3);\n\n    // collect([1, 2, 3])\n\n    $collection->all();\n\n    // [4, 5]\n\n<a name=\"method-shuffle\"></a>\n#### `shuffle()` {.collection-method}\n\nThe `shuffle` method randomly shuffles the items in the collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $shuffled = $collection->shuffle();\n\n    $shuffled->all();\n\n    // [3, 2, 5, 1, 4] - (generated randomly)\n\n<a name=\"method-skip\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2202,"to":2241}}}}],["749",{"pageContent":"`skip()` {.collection-method}\n\nThe `skip` method returns a new collection, with the given number of elements removed from the beginning of the collection:\n\n    $collection = collect([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n    $collection = $collection->skip(4);\n\n    $collection->all();\n\n    // [5, 6, 7, 8, 9, 10]\n\n<a name=\"method-skipuntil\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2242,"to":2254}}}}],["750",{"pageContent":"`skipUntil()` {.collection-method}\n\nThe `skipUntil` method skips over items from the collection until the given callback returns `true` and then returns the remaining items in the collection as a new collection instance:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $subset = $collection->skipUntil(function (int $item) {\n        return $item >= 3;\n    });\n\n    $subset->all();\n\n    // [3, 4]\n\nYou may also pass a simple value to the `skipUntil` method to skip all items until the given value is found:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $subset = $collection->skipUntil(3);\n\n    $subset->all();\n\n    // [3, 4]\n\n> **Warning**  \n> If the given value is not found or the callback never returns `true`, the `skipUntil` method will return an empty collection.\n\n<a name=\"method-skipwhile\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2255,"to":2282}}}}],["751",{"pageContent":"`skipWhile()` {.collection-method}\n\nThe `skipWhile` method skips over items from the collection while the given callback returns `true` and then returns the remaining items in the collection as a new collection:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $subset = $collection->skipWhile(function (int $item) {\n        return $item <= 3;\n    });\n\n    $subset->all();\n\n    // [4]\n\n> **Warning**  \n> If the callback never returns `false`, the `skipWhile` method will return an empty collection.\n\n<a name=\"method-slice\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2283,"to":2300}}}}],["752",{"pageContent":"`slice()` {.collection-method}\n\nThe `slice` method returns a slice of the collection starting at the given index:\n\n    $collection = collect([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n    $slice = $collection->slice(4);\n\n    $slice->all();\n\n    // [5, 6, 7, 8, 9, 10]\n\nIf you would like to limit the size of the returned slice, pass the desired size as the second argument to the method:\n\n    $slice = $collection->slice(4, 2);\n\n    $slice->all();\n\n    // [5, 6]\n\nThe returned slice will preserve keys by default. If you do not wish to preserve the original keys, you can use the [`values`](#method-values) method to reindex them.\n\n<a name=\"method-sliding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2301,"to":2323}}}}],["753",{"pageContent":"`sliding()` {.collection-method}\n\nThe `sliding` method returns a new collection of chunks representing a \"sliding window\" view of the items in the collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $chunks = $collection->sliding(2);\n\n    $chunks->toArray();\n\n    // [[1, 2], [2, 3], [3, 4], [4, 5]]\n\nThis is especially useful in conjunction with the [`eachSpread`](#method-eachspread) method:\n\n    $transactions->sliding(2)->eachSpread(function (Collection $previous, Collection $current) {\n        $current->total = $previous->total + $current->amount;\n    });\n\nYou may optionally pass a second \"step\" value, which determines the distance between the first item of every chunk:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $chunks = $collection->sliding(3, step: 2);\n\n    $chunks->toArray();\n\n    // [[1, 2, 3], [3, 4, 5]]\n\n<a name=\"method-sole\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2324,"to":2352}}}}],["754",{"pageContent":"`sole()` {.collection-method}\n\nThe `sole` method returns the first element in the collection that passes a given truth test, but only if the truth test matches exactly one element:\n\n    collect([1, 2, 3, 4])->sole(function (int $value, int $key) {\n        return $value === 2;\n    });\n\n    // 2\n\nYou may also pass a key / value pair to the `sole` method, which will return the first element in the collection that matches the given pair, but only if it exactly one element matches:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n    ]);\n\n    $collection->sole('product', 'Chair');\n\n    // ['product' => 'Chair', 'price' => 100]\n\nAlternatively, you may also call the `sole` method with no argument to get the first element in the collection if there is only one element:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n    ]);\n\n    $collection->sole();\n\n    // ['product' => 'Desk', 'price' => 200]","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2353,"to":2382}}}}],["755",{"pageContent":"$collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n    ]);\n\n    $collection->sole();\n\n    // ['product' => 'Desk', 'price' => 200]\n\nIf there are no elements in the collection that should be returned by the `sole` method, an `\\Illuminate\\Collections\\ItemNotFoundException` exception will be thrown. If there is more than one element that should be returned, an `\\Illuminate\\Collections\\MultipleItemsFoundException` will be thrown.\n\n<a name=\"method-some\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2382,"to":2392}}}}],["756",{"pageContent":"`some()` {.collection-method}\n\nAlias for the [`contains`](#method-contains) method.\n\n<a name=\"method-sort\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2393,"to":2397}}}}],["757",{"pageContent":"`sort()` {.collection-method}\n\nThe `sort` method sorts the collection. The sorted collection keeps the original array keys, so in the following example we will use the [`values`](#method-values) method to reset the keys to consecutively numbered indexes:\n\n    $collection = collect([5, 3, 1, 2, 4]);\n\n    $sorted = $collection->sort();\n\n    $sorted->values()->all();\n\n    // [1, 2, 3, 4, 5]\n\nIf your sorting needs are more advanced, you may pass a callback to `sort` with your own algorithm. Refer to the PHP documentation on [`uasort`](https://secure.php.net/manual/en/function.uasort.php#refsect1-function.uasort-parameters), which is what the collection's `sort` method calls utilizes internally.\n\n> **Note**  \n> If you need to sort a collection of nested arrays or objects, see the [`sortBy`](#method-sortby) and [`sortByDesc`](#method-sortbydesc) methods.\n\n<a name=\"method-sortby\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2398,"to":2415}}}}],["758",{"pageContent":"`sortBy()` {.collection-method}\n\nThe `sortBy` method sorts the collection by the given key. The sorted collection keeps the original array keys, so in the following example we will use the [`values`](#method-values) method to reset the keys to consecutively numbered indexes:\n\n    $collection = collect([\n        ['name' => 'Desk', 'price' => 200],\n        ['name' => 'Chair', 'price' => 100],\n        ['name' => 'Bookcase', 'price' => 150],\n    ]);\n\n    $sorted = $collection->sortBy('price');\n\n    $sorted->values()->all();\n\n    /*\n        [\n            ['name' => 'Chair', 'price' => 100],\n            ['name' => 'Bookcase', 'price' => 150],\n            ['name' => 'Desk', 'price' => 200],\n        ]\n    */\n\nThe `sortBy` method accepts [sort flags](https://www.php.net/manual/en/function.sort.php) as its second argument:\n\n    $collection = collect([\n        ['title' => 'Item 1'],\n        ['title' => 'Item 12'],\n        ['title' => 'Item 3'],\n    ]);\n\n    $sorted = $collection->sortBy('title', SORT_NATURAL);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2416,"to":2446}}}}],["759",{"pageContent":"$collection = collect([\n        ['title' => 'Item 1'],\n        ['title' => 'Item 12'],\n        ['title' => 'Item 3'],\n    ]);\n\n    $sorted = $collection->sortBy('title', SORT_NATURAL);\n\n    $sorted->values()->all();\n\n    /*\n        [\n            ['title' => 'Item 1'],\n            ['title' => 'Item 3'],\n            ['title' => 'Item 12'],\n        ]\n    */\n\nAlternatively, you may pass your own closure to determine how to sort the collection's values:\n\n    $collection = collect([\n        ['name' => 'Desk', 'colors' => ['Black', 'Mahogany']],\n        ['name' => 'Chair', 'colors' => ['Black']],\n        ['name' => 'Bookcase', 'colors' => ['Red', 'Beige', 'Brown']],\n    ]);\n\n    $sorted = $collection->sortBy(function (array $product, int $key) {\n        return count($product['colors']);\n    });\n\n    $sorted->values()->all();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2446,"to":2476}}}}],["760",{"pageContent":"$sorted = $collection->sortBy(function (array $product, int $key) {\n        return count($product['colors']);\n    });\n\n    $sorted->values()->all();\n\n    /*\n        [\n            ['name' => 'Chair', 'colors' => ['Black']],\n            ['name' => 'Desk', 'colors' => ['Black', 'Mahogany']],\n            ['name' => 'Bookcase', 'colors' => ['Red', 'Beige', 'Brown']],\n        ]\n    */\n\nIf you would like to sort your collection by multiple attributes, you may pass an array of sort operations to the `sortBy` method. Each sort operation should be an array consisting of the attribute that you wish to sort by and the direction of the desired sort:\n\n    $collection = collect([\n        ['name' => 'Taylor Otwell', 'age' => 34],\n        ['name' => 'Abigail Otwell', 'age' => 30],\n        ['name' => 'Taylor Otwell', 'age' => 36],\n        ['name' => 'Abigail Otwell', 'age' => 32],\n    ]);\n\n    $sorted = $collection->sortBy([\n        ['name', 'asc'],\n        ['age', 'desc'],\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2476,"to":2502}}}}],["761",{"pageContent":"$sorted = $collection->sortBy([\n        ['name', 'asc'],\n        ['age', 'desc'],\n    ]);\n\n    $sorted->values()->all();\n\n    /*\n        [\n            ['name' => 'Abigail Otwell', 'age' => 32],\n            ['name' => 'Abigail Otwell', 'age' => 30],\n            ['name' => 'Taylor Otwell', 'age' => 36],\n            ['name' => 'Taylor Otwell', 'age' => 34],\n        ]\n    */\n\nWhen sorting a collection by multiple attributes, you may also provide closures that define each sort operation:\n\n    $collection = collect([\n        ['name' => 'Taylor Otwell', 'age' => 34],\n        ['name' => 'Abigail Otwell', 'age' => 30],\n        ['name' => 'Taylor Otwell', 'age' => 36],\n        ['name' => 'Abigail Otwell', 'age' => 32],\n    ]);\n\n    $sorted = $collection->sortBy([\n        fn (array $a, array $b) => $a['name'] <=> $b['name'],\n        fn (array $a, array $b) => $b['age'] <=> $a['age'],\n    ]);\n\n    $sorted->values()->all();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2502,"to":2532}}}}],["762",{"pageContent":"$sorted = $collection->sortBy([\n        fn (array $a, array $b) => $a['name'] <=> $b['name'],\n        fn (array $a, array $b) => $b['age'] <=> $a['age'],\n    ]);\n\n    $sorted->values()->all();\n\n    /*\n        [\n            ['name' => 'Abigail Otwell', 'age' => 32],\n            ['name' => 'Abigail Otwell', 'age' => 30],\n            ['name' => 'Taylor Otwell', 'age' => 36],\n            ['name' => 'Taylor Otwell', 'age' => 34],\n        ]\n    */\n\n<a name=\"method-sortbydesc\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2532,"to":2548}}}}],["763",{"pageContent":"`sortByDesc()` {.collection-method}\n\nThis method has the same signature as the [`sortBy`](#method-sortby) method, but will sort the collection in the opposite order.\n\n<a name=\"method-sortdesc\"></a>\n#### `sortDesc()` {.collection-method}\n\nThis method will sort the collection in the opposite order as the [`sort`](#method-sort) method:\n\n    $collection = collect([5, 3, 1, 2, 4]);\n\n    $sorted = $collection->sortDesc();\n\n    $sorted->values()->all();\n\n    // [5, 4, 3, 2, 1]\n\nUnlike `sort`, you may not pass a closure to `sortDesc`. Instead, you should use the [`sort`](#method-sort) method and invert your comparison.\n\n<a name=\"method-sortkeys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2549,"to":2568}}}}],["764",{"pageContent":"`sortKeys()` {.collection-method}\n\nThe `sortKeys` method sorts the collection by the keys of the underlying associative array:\n\n    $collection = collect([\n        'id' => 22345,\n        'first' => 'John',\n        'last' => 'Doe',\n    ]);\n\n    $sorted = $collection->sortKeys();\n\n    $sorted->all();\n\n    /*\n        [\n            'first' => 'John',\n            'id' => 22345,\n            'last' => 'Doe',\n        ]\n    */\n\n<a name=\"method-sortkeysdesc\"></a>\n#### `sortKeysDesc()` {.collection-method}\n\nThis method has the same signature as the [`sortKeys`](#method-sortkeys) method, but will sort the collection in the opposite order.\n\n<a name=\"method-sortkeysusing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2569,"to":2596}}}}],["765",{"pageContent":"`sortKeysUsing()` {.collection-method}\n\nThe `sortKeysUsing` method sorts the collection by the keys of the underlying associative array using a callback:\n\n    $collection = collect([\n        'ID' => 22345,\n        'first' => 'John',\n        'last' => 'Doe',\n    ]);\n\n    $sorted = $collection->sortKeysUsing('strnatcasecmp');\n\n    $sorted->all();\n\n    /*\n        [\n            'first' => 'John',\n            'ID' => 22345,\n            'last' => 'Doe',\n        ]\n    */\n\nThe callback must be a comparison function that returns an integer less than, equal to, or greater than zero. For more information, refer to the PHP documentation on [`uksort`](https://www.php.net/manual/en/function.uksort.php#refsect1-function.uksort-parameters), which is the PHP function that `sortKeysUsing` method utilizes internally.\n\n<a name=\"method-splice\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2597,"to":2621}}}}],["766",{"pageContent":"`splice()` {.collection-method}\n\nThe `splice` method removes and returns a slice of items starting at the specified index:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $chunk = $collection->splice(2);\n\n    $chunk->all();\n\n    // [3, 4, 5]\n\n    $collection->all();\n\n    // [1, 2]\n\nYou may pass a second argument to limit the size of the resulting collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $chunk = $collection->splice(2, 1);\n\n    $chunk->all();\n\n    // [3]\n\n    $collection->all();\n\n    // [1, 2, 4, 5]\n\nIn addition, you may pass a third argument containing the new items to replace the items removed from the collection:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $chunk = $collection->splice(2, 1, [10, 11]);\n\n    $chunk->all();\n\n    // [3]\n\n    $collection->all();\n\n    // [1, 2, 10, 11, 4, 5]\n\n<a name=\"method-split\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2622,"to":2666}}}}],["767",{"pageContent":"`split()` {.collection-method}\n\nThe `split` method breaks a collection into the given number of groups:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $groups = $collection->split(3);\n\n    $groups->all();\n\n    // [[1, 2], [3, 4], [5]]\n\n<a name=\"method-splitin\"></a>\n#### `splitIn()` {.collection-method}\n\nThe `splitIn` method breaks a collection into the given number of groups, filling non-terminal groups completely before allocating the remainder to the final group:\n\n    $collection = collect([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n    $groups = $collection->splitIn(3);\n\n    $groups->all();\n\n    // [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10]]\n\n<a name=\"method-sum\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2667,"to":2692}}}}],["768",{"pageContent":"`sum()` {.collection-method}\n\nThe `sum` method returns the sum of all items in the collection:\n\n    collect([1, 2, 3, 4, 5])->sum();\n\n    // 15\n\nIf the collection contains nested arrays or objects, you should pass a key that will be used to determine which values to sum:\n\n    $collection = collect([\n        ['name' => 'JavaScript: The Good Parts', 'pages' => 176],\n        ['name' => 'JavaScript: The Definitive Guide', 'pages' => 1096],\n    ]);\n\n    $collection->sum('pages');\n\n    // 1272\n\nIn addition, you may pass your own closure to determine which values of the collection to sum:\n\n    $collection = collect([\n        ['name' => 'Chair', 'colors' => ['Black']],\n        ['name' => 'Desk', 'colors' => ['Black', 'Mahogany']],\n        ['name' => 'Bookcase', 'colors' => ['Red', 'Beige', 'Brown']],\n    ]);\n\n    $collection->sum(function (array $product) {\n        return count($product['colors']);\n    });\n\n    // 6\n\n<a name=\"method-take\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2693,"to":2726}}}}],["769",{"pageContent":"`take()` {.collection-method}\n\nThe `take` method returns a new collection with the specified number of items:\n\n    $collection = collect([0, 1, 2, 3, 4, 5]);\n\n    $chunk = $collection->take(3);\n\n    $chunk->all();\n\n    // [0, 1, 2]\n\nYou may also pass a negative integer to take the specified number of items from the end of the collection:\n\n    $collection = collect([0, 1, 2, 3, 4, 5]);\n\n    $chunk = $collection->take(-2);\n\n    $chunk->all();\n\n    // [4, 5]\n\n<a name=\"method-takeuntil\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2727,"to":2749}}}}],["770",{"pageContent":"`takeUntil()` {.collection-method}\n\nThe `takeUntil` method returns items in the collection until the given callback returns `true`:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $subset = $collection->takeUntil(function (int $item) {\n        return $item >= 3;\n    });\n\n    $subset->all();\n\n    // [1, 2]\n\nYou may also pass a simple value to the `takeUntil` method to get the items until the given value is found:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $subset = $collection->takeUntil(3);\n\n    $subset->all();\n\n    // [1, 2]\n\n> **Warning**  \n> If the given value is not found or the callback never returns `true`, the `takeUntil` method will return all items in the collection.\n\n<a name=\"method-takewhile\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2750,"to":2777}}}}],["771",{"pageContent":"`takeWhile()` {.collection-method}\n\nThe `takeWhile` method returns items in the collection until the given callback returns `false`:\n\n    $collection = collect([1, 2, 3, 4]);\n\n    $subset = $collection->takeWhile(function (int $item) {\n        return $item < 3;\n    });\n\n    $subset->all();\n\n    // [1, 2]\n\n> **Warning**  \n> If the callback never returns `false`, the `takeWhile` method will return all items in the collection.\n\n<a name=\"method-tap\"></a>\n#### `tap()` {.collection-method}\n\nThe `tap` method passes the collection to the given callback, allowing you to \"tap\" into the collection at a specific point and do something with the items while not affecting the collection itself. The collection is then returned by the `tap` method:\n\n    collect([2, 4, 3, 1, 5])\n        ->sort()\n        ->tap(function (Collection $collection) {\n            Log::debug('Values after sorting', $collection->values()->all());\n        })\n        ->shift();\n\n    // 1\n\n<a name=\"method-times\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2778,"to":2809}}}}],["772",{"pageContent":"`times()` {.collection-method}\n\nThe static `times` method creates a new collection by invoking the given closure a specified number of times:\n\n    $collection = Collection::times(10, function (int $number) {\n        return $number * 9;\n    });\n\n    $collection->all();\n\n    // [9, 18, 27, 36, 45, 54, 63, 72, 81, 90]\n\n<a name=\"method-toarray\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2810,"to":2822}}}}],["773",{"pageContent":"`toArray()` {.collection-method}\n\nThe `toArray` method converts the collection into a plain PHP `array`. If the collection's values are [Eloquent](/docs/{{version}}/eloquent) models, the models will also be converted to arrays:\n\n    $collection = collect(['name' => 'Desk', 'price' => 200]);\n\n    $collection->toArray();\n\n    /*\n        [\n            ['name' => 'Desk', 'price' => 200],\n        ]\n    */\n\n> **Warning**  \n> `toArray` also converts all of the collection's nested objects that are an instance of `Arrayable` to an array. If you want to get the raw array underlying the collection, use the [`all`](#method-all) method instead.\n\n<a name=\"method-tojson\"></a>\n#### `toJson()` {.collection-method}\n\nThe `toJson` method converts the collection into a JSON serialized string:\n\n    $collection = collect(['name' => 'Desk', 'price' => 200]);\n\n    $collection->toJson();\n\n    // '{\"name\":\"Desk\", \"price\":200}'\n\n<a name=\"method-transform\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2823,"to":2851}}}}],["774",{"pageContent":"`transform()` {.collection-method}\n\nThe `transform` method iterates over the collection and calls the given callback with each item in the collection. The items in the collection will be replaced by the values returned by the callback:\n\n    $collection = collect([1, 2, 3, 4, 5]);\n\n    $collection->transform(function (int $item, int $key) {\n        return $item * 2;\n    });\n\n    $collection->all();\n\n    // [2, 4, 6, 8, 10]\n\n> **Warning**  \n> Unlike most other collection methods, `transform` modifies the collection itself. If you wish to create a new collection instead, use the [`map`](#method-map) method.\n\n<a name=\"method-undot\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2852,"to":2869}}}}],["775",{"pageContent":"`undot()` {.collection-method}\n\nThe `undot` method expands a single-dimensional collection that uses \"dot\" notation into a multi-dimensional collection:\n\n    $person = collect([\n        'name.first_name' => 'Marie',\n        'name.last_name' => 'Valentine',\n        'address.line_1' => '2992 Eagle Drive',\n        'address.line_2' => '',\n        'address.suburb' => 'Detroit',\n        'address.state' => 'MI',\n        'address.postcode' => '48219'\n    ]);\n\n    $person = $person->undot();\n\n    $person->toArray();\n\n    /*\n        [\n            \"name\" => [\n                \"first_name\" => \"Marie\",\n                \"last_name\" => \"Valentine\",\n            ],\n            \"address\" => [\n                \"line_1\" => \"2992 Eagle Drive\",\n                \"line_2\" => \"\",\n                \"suburb\" => \"Detroit\",\n                \"state\" => \"MI\",\n                \"postcode\" => \"48219\",\n            ],\n        ]\n    */\n\n<a name=\"method-union\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2870,"to":2904}}}}],["776",{"pageContent":"`union()` {.collection-method}\n\nThe `union` method adds the given array to the collection. If the given array contains keys that are already in the original collection, the original collection's values will be preferred:\n\n    $collection = collect([1 => ['a'], 2 => ['b']]);\n\n    $union = $collection->union([3 => ['c'], 1 => ['d']]);\n\n    $union->all();\n\n    // [1 => ['a'], 2 => ['b'], 3 => ['c']]\n\n<a name=\"method-unique\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2905,"to":2917}}}}],["777",{"pageContent":"`unique()` {.collection-method}\n\nThe `unique` method returns all of the unique items in the collection. The returned collection keeps the original array keys, so in the following example we will use the [`values`](#method-values) method to reset the keys to consecutively numbered indexes:\n\n    $collection = collect([1, 1, 2, 2, 3, 4, 2]);\n\n    $unique = $collection->unique();\n\n    $unique->values()->all();\n\n    // [1, 2, 3, 4]\n\nWhen dealing with nested arrays or objects, you may specify the key used to determine uniqueness:\n\n    $collection = collect([\n        ['name' => 'iPhone 6', 'brand' => 'Apple', 'type' => 'phone'],\n        ['name' => 'iPhone 5', 'brand' => 'Apple', 'type' => 'phone'],\n        ['name' => 'Apple Watch', 'brand' => 'Apple', 'type' => 'watch'],\n        ['name' => 'Galaxy S6', 'brand' => 'Samsung', 'type' => 'phone'],\n        ['name' => 'Galaxy Gear', 'brand' => 'Samsung', 'type' => 'watch'],\n    ]);\n\n    $unique = $collection->unique('brand');\n\n    $unique->values()->all();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2918,"to":2942}}}}],["778",{"pageContent":"$unique = $collection->unique('brand');\n\n    $unique->values()->all();\n\n    /*\n        [\n            ['name' => 'iPhone 6', 'brand' => 'Apple', 'type' => 'phone'],\n            ['name' => 'Galaxy S6', 'brand' => 'Samsung', 'type' => 'phone'],\n        ]\n    */\n\nFinally, you may also pass your own closure to the `unique` method to specify which value should determine an item's uniqueness:\n\n    $unique = $collection->unique(function (array $item) {\n        return $item['brand'].$item['type'];\n    });\n\n    $unique->values()->all();\n\n    /*\n        [\n            ['name' => 'iPhone 6', 'brand' => 'Apple', 'type' => 'phone'],\n            ['name' => 'Apple Watch', 'brand' => 'Apple', 'type' => 'watch'],\n            ['name' => 'Galaxy S6', 'brand' => 'Samsung', 'type' => 'phone'],\n            ['name' => 'Galaxy Gear', 'brand' => 'Samsung', 'type' => 'watch'],\n        ]\n    */","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2942,"to":2968}}}}],["779",{"pageContent":"The `unique` method uses \"loose\" comparisons when checking item values, meaning a string with an integer value will be considered equal to an integer of the same value. Use the [`uniqueStrict`](#method-uniquestrict) method to filter using \"strict\" comparisons.\n\n> **Note**  \n> This method's behavior is modified when using [Eloquent Collections](/docs/{{version}}/eloquent-collections#method-unique).\n\n<a name=\"method-uniquestrict\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2970,"to":2975}}}}],["780",{"pageContent":"`uniqueStrict()` {.collection-method}\n\nThis method has the same signature as the [`unique`](#method-unique) method; however, all values are compared using \"strict\" comparisons.\n\n<a name=\"method-unless\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2976,"to":2980}}}}],["781",{"pageContent":"`unless()` {.collection-method}\n\nThe `unless` method will execute the given callback unless the first argument given to the method evaluates to `true`:\n\n    $collection = collect([1, 2, 3]);\n\n    $collection->unless(true, function (Collection $collection) {\n        return $collection->push(4);\n    });\n\n    $collection->unless(false, function (Collection $collection) {\n        return $collection->push(5);\n    });\n\n    $collection->all();\n\n    // [1, 2, 3, 5]\n\nA second callback may be passed to the `unless` method. The second callback will be executed when the first argument given to the `unless` method evaluates to `true`:\n\n    $collection = collect([1, 2, 3]);\n\n    $collection->unless(true, function (Collection $collection) {\n        return $collection->push(4);\n    }, function (Collection $collection) {\n        return $collection->push(5);\n    });\n\n    $collection->all();\n\n    // [1, 2, 3, 5]\n\nFor the inverse of `unless`, see the [`when`](#method-when) method.\n\n<a name=\"method-unlessempty\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":2981,"to":3015}}}}],["782",{"pageContent":"`unlessEmpty()` {.collection-method}\n\nAlias for the [`whenNotEmpty`](#method-whennotempty) method.\n\n<a name=\"method-unlessnotempty\"></a>\n#### `unlessNotEmpty()` {.collection-method}\n\nAlias for the [`whenEmpty`](#method-whenempty) method.\n\n<a name=\"method-unwrap\"></a>\n#### `unwrap()` {.collection-method}\n\nThe static `unwrap` method returns the collection's underlying items from the given value when applicable:\n\n    Collection::unwrap(collect('John Doe'));\n\n    // ['John Doe']\n\n    Collection::unwrap(['John Doe']);\n\n    // ['John Doe']\n\n    Collection::unwrap('John Doe');\n\n    // 'John Doe'\n\n<a name=\"method-value\"></a>\n#### `value()` {.collection-method}\n\nThe `value` method retrieves a given value from the first element of the collection:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Speaker', 'price' => 400],\n    ]);\n\n    $value = $collection->value('price');\n\n    // 200\n\n<a name=\"method-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3016,"to":3056}}}}],["783",{"pageContent":"`values()` {.collection-method}\n\nThe `values` method returns a new collection with the keys reset to consecutive integers:\n\n    $collection = collect([\n        10 => ['product' => 'Desk', 'price' => 200],\n        11 => ['product' => 'Desk', 'price' => 200],\n    ]);\n\n    $values = $collection->values();\n\n    $values->all();\n\n    /*\n        [\n            0 => ['product' => 'Desk', 'price' => 200],\n            1 => ['product' => 'Desk', 'price' => 200],\n        ]\n    */\n\n<a name=\"method-when\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3057,"to":3077}}}}],["784",{"pageContent":"`when()` {.collection-method}\n\nThe `when` method will execute the given callback when the first argument given to the method evaluates to `true`. The collection instance and the first argument given to the `when` method will be provided to the closure:\n\n    $collection = collect([1, 2, 3]);\n\n    $collection->when(true, function (Collection $collection, int $value) {\n        return $collection->push(4);\n    });\n\n    $collection->when(false, function (Collection $collection, int $value) {\n        return $collection->push(5);\n    });\n\n    $collection->all();\n\n    // [1, 2, 3, 4]\n\nA second callback may be passed to the `when` method. The second callback will be executed when the first argument given to the `when` method evaluates to `false`:\n\n    $collection = collect([1, 2, 3]);\n\n    $collection->when(false, function (Collection $collection, int $value) {\n        return $collection->push(4);\n    }, function (Collection $collection) {\n        return $collection->push(5);\n    });\n\n    $collection->all();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3078,"to":3106}}}}],["785",{"pageContent":"$collection->all();\n\n    // [1, 2, 3, 5]\n\nFor the inverse of `when`, see the [`unless`](#method-unless) method.\n\n<a name=\"method-whenempty\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3106,"to":3112}}}}],["786",{"pageContent":"`whenEmpty()` {.collection-method}\n\nThe `whenEmpty` method will execute the given callback when the collection is empty:\n\n    $collection = collect(['Michael', 'Tom']);\n\n    $collection->whenEmpty(function (Collection $collection) {\n        return $collection->push('Adam');\n    });\n\n    $collection->all();\n\n    // ['Michael', 'Tom']\n\n\n    $collection = collect();\n\n    $collection->whenEmpty(function (Collection $collection) {\n        return $collection->push('Adam');\n    });\n\n    $collection->all();\n\n    // ['Adam']\n\nA second closure may be passed to the `whenEmpty` method that will be executed when the collection is not empty:\n\n    $collection = collect(['Michael', 'Tom']);\n\n    $collection->whenEmpty(function (Collection $collection) {\n        return $collection->push('Adam');\n    }, function (Collection $collection) {\n        return $collection->push('Taylor');\n    });\n\n    $collection->all();\n\n    // ['Michael', 'Tom', 'Taylor']","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3113,"to":3150}}}}],["787",{"pageContent":"$collection->all();\n\n    // ['Michael', 'Tom', 'Taylor']\n\nFor the inverse of `whenEmpty`, see the [`whenNotEmpty`](#method-whennotempty) method.\n\n<a name=\"method-whennotempty\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3150,"to":3156}}}}],["788",{"pageContent":"`whenNotEmpty()` {.collection-method}\n\nThe `whenNotEmpty` method will execute the given callback when the collection is not empty:\n\n    $collection = collect(['michael', 'tom']);\n\n    $collection->whenNotEmpty(function (Collection $collection) {\n        return $collection->push('adam');\n    });\n\n    $collection->all();\n\n    // ['michael', 'tom', 'adam']\n\n\n    $collection = collect();\n\n    $collection->whenNotEmpty(function (Collection $collection) {\n        return $collection->push('adam');\n    });\n\n    $collection->all();\n\n    // []\n\nA second closure may be passed to the `whenNotEmpty` method that will be executed when the collection is empty:\n\n    $collection = collect();\n\n    $collection->whenNotEmpty(function (Collection $collection) {\n        return $collection->push('adam');\n    }, function (Collection $collection) {\n        return $collection->push('taylor');\n    });\n\n    $collection->all();\n\n    // ['taylor']\n\nFor the inverse of `whenNotEmpty`, see the [`whenEmpty`](#method-whenempty) method.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3157,"to":3196}}}}],["789",{"pageContent":"$collection->all();\n\n    // ['taylor']\n\nFor the inverse of `whenNotEmpty`, see the [`whenEmpty`](#method-whenempty) method.\n\n<a name=\"method-where\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3196,"to":3202}}}}],["790",{"pageContent":"`where()` {.collection-method}\n\nThe `where` method filters the collection by a given key / value pair:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n        ['product' => 'Bookcase', 'price' => 150],\n        ['product' => 'Door', 'price' => 100],\n    ]);\n\n    $filtered = $collection->where('price', 100);\n\n    $filtered->all();\n\n    /*\n        [\n            ['product' => 'Chair', 'price' => 100],\n            ['product' => 'Door', 'price' => 100],\n        ]\n    */\n\nThe `where` method uses \"loose\" comparisons when checking item values, meaning a string with an integer value will be considered equal to an integer of the same value. Use the [`whereStrict`](#method-wherestrict) method to filter using \"strict\" comparisons.\n\nOptionally, you may pass a comparison operator as the second parameter. Supported operators are: '===', '!==', '!=', '==', '=', '<>', '>', '<', '>=', and '<=':","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3203,"to":3227}}}}],["791",{"pageContent":"Optionally, you may pass a comparison operator as the second parameter. Supported operators are: '===', '!==', '!=', '==', '=', '<>', '>', '<', '>=', and '<=':\n\n    $collection = collect([\n        ['name' => 'Jim', 'deleted_at' => '2019-01-01 00:00:00'],\n        ['name' => 'Sally', 'deleted_at' => '2019-01-02 00:00:00'],\n        ['name' => 'Sue', 'deleted_at' => null],\n    ]);\n\n    $filtered = $collection->where('deleted_at', '!=', null);\n\n    $filtered->all();\n\n    /*\n        [\n            ['name' => 'Jim', 'deleted_at' => '2019-01-01 00:00:00'],\n            ['name' => 'Sally', 'deleted_at' => '2019-01-02 00:00:00'],\n        ]\n    */\n\n<a name=\"method-wherestrict\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3227,"to":3246}}}}],["792",{"pageContent":"`whereStrict()` {.collection-method}\n\nThis method has the same signature as the [`where`](#method-where) method; however, all values are compared using \"strict\" comparisons.\n\n<a name=\"method-wherebetween\"></a>\n#### `whereBetween()` {.collection-method}\n\nThe `whereBetween` method filters the collection by determining if a specified item value is within a given range:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 80],\n        ['product' => 'Bookcase', 'price' => 150],\n        ['product' => 'Pencil', 'price' => 30],\n        ['product' => 'Door', 'price' => 100],\n    ]);\n\n    $filtered = $collection->whereBetween('price', [100, 200]);\n\n    $filtered->all();\n\n    /*\n        [\n            ['product' => 'Desk', 'price' => 200],\n            ['product' => 'Bookcase', 'price' => 150],\n            ['product' => 'Door', 'price' => 100],\n        ]\n    */\n\n<a name=\"method-wherein\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3247,"to":3276}}}}],["793",{"pageContent":"`whereIn()` {.collection-method}\n\nThe `whereIn` method removes elements from the collection that do not have a specified item value that is contained within the given array:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n        ['product' => 'Bookcase', 'price' => 150],\n        ['product' => 'Door', 'price' => 100],\n    ]);\n\n    $filtered = $collection->whereIn('price', [150, 200]);\n\n    $filtered->all();\n\n    /*\n        [\n            ['product' => 'Desk', 'price' => 200],\n            ['product' => 'Bookcase', 'price' => 150],\n        ]\n    */\n\nThe `whereIn` method uses \"loose\" comparisons when checking item values, meaning a string with an integer value will be considered equal to an integer of the same value. Use the [`whereInStrict`](#method-whereinstrict) method to filter using \"strict\" comparisons.\n\n<a name=\"method-whereinstrict\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3277,"to":3301}}}}],["794",{"pageContent":"`whereInStrict()` {.collection-method}\n\nThis method has the same signature as the [`whereIn`](#method-wherein) method; however, all values are compared using \"strict\" comparisons.\n\n<a name=\"method-whereinstanceof\"></a>\n#### `whereInstanceOf()` {.collection-method}\n\nThe `whereInstanceOf` method filters the collection by a given class type:\n\n    use App\\Models\\User;\n    use App\\Models\\Post;\n\n    $collection = collect([\n        new User,\n        new User,\n        new Post,\n    ]);\n\n    $filtered = $collection->whereInstanceOf(User::class);\n\n    $filtered->all();\n\n    // [App\\Models\\User, App\\Models\\User]\n\n<a name=\"method-wherenotbetween\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3302,"to":3326}}}}],["795",{"pageContent":"`whereNotBetween()` {.collection-method}\n\nThe `whereNotBetween` method filters the collection by determining if a specified item value is outside of a given range:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 80],\n        ['product' => 'Bookcase', 'price' => 150],\n        ['product' => 'Pencil', 'price' => 30],\n        ['product' => 'Door', 'price' => 100],\n    ]);\n\n    $filtered = $collection->whereNotBetween('price', [100, 200]);\n\n    $filtered->all();\n\n    /*\n        [\n            ['product' => 'Chair', 'price' => 80],\n            ['product' => 'Pencil', 'price' => 30],\n        ]\n    */\n\n<a name=\"method-wherenotin\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3327,"to":3350}}}}],["796",{"pageContent":"`whereNotIn()` {.collection-method}\n\nThe `whereNotIn` method removes elements from the collection that have a specified item value that is contained within the given array:\n\n    $collection = collect([\n        ['product' => 'Desk', 'price' => 200],\n        ['product' => 'Chair', 'price' => 100],\n        ['product' => 'Bookcase', 'price' => 150],\n        ['product' => 'Door', 'price' => 100],\n    ]);\n\n    $filtered = $collection->whereNotIn('price', [150, 200]);\n\n    $filtered->all();\n\n    /*\n        [\n            ['product' => 'Chair', 'price' => 100],\n            ['product' => 'Door', 'price' => 100],\n        ]\n    */\n\nThe `whereNotIn` method uses \"loose\" comparisons when checking item values, meaning a string with an integer value will be considered equal to an integer of the same value. Use the [`whereNotInStrict`](#method-wherenotinstrict) method to filter using \"strict\" comparisons.\n\n<a name=\"method-wherenotinstrict\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3351,"to":3375}}}}],["797",{"pageContent":"`whereNotInStrict()` {.collection-method}\n\nThis method has the same signature as the [`whereNotIn`](#method-wherenotin) method; however, all values are compared using \"strict\" comparisons.\n\n<a name=\"method-wherenotnull\"></a>\n#### `whereNotNull()` {.collection-method}\n\nThe `whereNotNull` method returns items from the collection where the given key is not `null`:\n\n    $collection = collect([\n        ['name' => 'Desk'],\n        ['name' => null],\n        ['name' => 'Bookcase'],\n    ]);\n\n    $filtered = $collection->whereNotNull('name');\n\n    $filtered->all();\n\n    /*\n        [\n            ['name' => 'Desk'],\n            ['name' => 'Bookcase'],\n        ]\n    */\n\n<a name=\"method-wherenull\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3376,"to":3402}}}}],["798",{"pageContent":"`whereNull()` {.collection-method}\n\nThe `whereNull` method returns items from the collection where the given key is `null`:\n\n    $collection = collect([\n        ['name' => 'Desk'],\n        ['name' => null],\n        ['name' => 'Bookcase'],\n    ]);\n\n    $filtered = $collection->whereNull('name');\n\n    $filtered->all();\n\n    /*\n        [\n            ['name' => null],\n        ]\n    */\n\n\n<a name=\"method-wrap\"></a>\n#### `wrap()` {.collection-method}\n\nThe static `wrap` method wraps the given value in a collection when applicable:\n\n    use Illuminate\\Support\\Collection;\n\n    $collection = Collection::wrap('John Doe');\n\n    $collection->all();\n\n    // ['John Doe']\n\n    $collection = Collection::wrap(['John Doe']);\n\n    $collection->all();\n\n    // ['John Doe']\n\n    $collection = Collection::wrap(collect('John Doe'));\n\n    $collection->all();\n\n    // ['John Doe']\n\n<a name=\"method-zip\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3403,"to":3449}}}}],["799",{"pageContent":"`zip()` {.collection-method}\n\nThe `zip` method merges together the values of the given array with the values of the original collection at their corresponding index:\n\n    $collection = collect(['Chair', 'Desk']);\n\n    $zipped = $collection->zip([100, 200]);\n\n    $zipped->all();\n\n    // [['Chair', 100], ['Desk', 200]]\n\n<a name=\"higher-order-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3450,"to":3462}}}}],["800",{"pageContent":"Higher Order Messages\n\nCollections also provide support for \"higher order messages\", which are short-cuts for performing common actions on collections. The collection methods that provide higher order messages are: [`average`](#method-average), [`avg`](#method-avg), [`contains`](#method-contains), [`each`](#method-each), [`every`](#method-every), [`filter`](#method-filter), [`first`](#method-first), [`flatMap`](#method-flatmap), [`groupBy`](#method-groupby), [`keyBy`](#method-keyby), [`map`](#method-map), [`max`](#method-max), [`min`](#method-min), [`partition`](#method-partition), [`reject`](#method-reject), [`skipUntil`](#method-skipuntil), [`skipWhile`](#method-skipwhile), [`some`](#method-some), [`sortBy`](#method-sortby), [`sortByDesc`](#method-sortbydesc), [`sum`](#method-sum), [`takeUntil`](#method-takeuntil), [`takeWhile`](#method-takewhile), and [`unique`](#method-unique).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3463,"to":3465}}}}],["801",{"pageContent":"Each higher order message can be accessed as a dynamic property on a collection instance. For instance, let's use the `each` higher order message to call a method on each object within a collection:\n\n    use App\\Models\\User;\n\n    $users = User::where('votes', '>', 500)->get();\n\n    $users->each->markAsVip();\n\nLikewise, we can use the `sum` higher order message to gather the total number of \"votes\" for a collection of users:\n\n    $users = User::where('group', 'Development')->get();\n\n    return $users->sum->votes;\n\n<a name=\"lazy-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3467,"to":3481}}}}],["802",{"pageContent":"Lazy Collections\n\n<a name=\"lazy-collection-introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3482,"to":3484}}}}],["803",{"pageContent":"Introduction\n\n> **Warning**  \n> Before learning more about Laravel's lazy collections, take some time to familiarize yourself with [PHP generators](https://www.php.net/manual/en/language.generators.overview.php).\n\nTo supplement the already powerful `Collection` class, the `LazyCollection` class leverages PHP's [generators](https://www.php.net/manual/en/language.generators.overview.php) to allow you to work with very large datasets while keeping memory usage low.\n\nFor example, imagine your application needs to process a multi-gigabyte log file while taking advantage of Laravel's collection methods to parse the logs. Instead of reading the entire file into memory at once, lazy collections may be used to keep only a small part of the file in memory at a given time:\n\n    use App\\Models\\LogEntry;\n    use Illuminate\\Support\\LazyCollection;\n\n    LazyCollection::make(function () {\n        $handle = fopen('log.txt', 'r');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3485,"to":3498}}}}],["804",{"pageContent":"use App\\Models\\LogEntry;\n    use Illuminate\\Support\\LazyCollection;\n\n    LazyCollection::make(function () {\n        $handle = fopen('log.txt', 'r');\n\n        while (($line = fgets($handle)) !== false) {\n            yield $line;\n        }\n    })->chunk(4)->map(function (array $lines) {\n        return LogEntry::fromLines($lines);\n    })->each(function (LogEntry $logEntry) {\n        // Process the log entry...\n    });\n\nOr, imagine you need to iterate through 10,000 Eloquent models. When using traditional Laravel collections, all 10,000 Eloquent models must be loaded into memory at the same time:\n\n    use App\\Models\\User;\n\n    $users = User::all()->filter(function (User $user) {\n        return $user->id > 500;\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3498,"to":3519}}}}],["805",{"pageContent":"use App\\Models\\User;\n\n    $users = User::all()->filter(function (User $user) {\n        return $user->id > 500;\n    });\n\nHowever, the query builder's `cursor` method returns a `LazyCollection` instance. This allows you to still only run a single query against the database but also only keep one Eloquent model loaded in memory at a time. In this example, the `filter` callback is not executed until we actually iterate over each user individually, allowing for a drastic reduction in memory usage:\n\n    use App\\Models\\User;\n\n    $users = User::cursor()->filter(function (User $user) {\n        return $user->id > 500;\n    });\n\n    foreach ($users as $user) {\n        echo $user->id;\n    }\n\n<a name=\"creating-lazy-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3519,"to":3537}}}}],["806",{"pageContent":"Creating Lazy Collections\n\nTo create a lazy collection instance, you should pass a PHP generator function to the collection's `make` method:\n\n    use Illuminate\\Support\\LazyCollection;\n\n    LazyCollection::make(function () {\n        $handle = fopen('log.txt', 'r');\n\n        while (($line = fgets($handle)) !== false) {\n            yield $line;\n        }\n    });\n\n<a name=\"the-enumerable-contract\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3538,"to":3552}}}}],["807",{"pageContent":"The Enumerable Contract\n\nAlmost all methods available on the `Collection` class are also available on the `LazyCollection` class. Both of these classes implement the `Illuminate\\Support\\Enumerable` contract, which defines the following methods:\n\n<style>\n    .collection-method-list > p {\n        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n</style>\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3553,"to":3570}}}}],["808",{"pageContent":"[all](#method-all)\n[average](#method-average)\n[avg](#method-avg)\n[chunk](#method-chunk)\n[chunkWhile](#method-chunkwhile)\n[collapse](#method-collapse)\n[collect](#method-collect)\n[combine](#method-combine)\n[concat](#method-concat)\n[contains](#method-contains)\n[containsStrict](#method-containsstrict)\n[count](#method-count)\n[countBy](#method-countBy)\n[crossJoin](#method-crossjoin)\n[dd](#method-dd)\n[diff](#method-diff)\n[diffAssoc](#method-diffassoc)\n[diffKeys](#method-diffkeys)\n[dump](#method-dump)\n[duplicates](#method-duplicates)\n[duplicatesStrict](#method-duplicatesstrict)\n[each](#method-each)\n[eachSpread](#method-eachspread)\n[every](#method-every)\n[except](#method-except)\n[filter](#method-filter)\n[first](#method-first)\n[firstOrFail](#method-first-or-fail)\n[firstWhere](#method-first-where)\n[flatMap](#method-flatmap)\n[flatten](#method-flatten)\n[flip](#method-flip)\n[forPage](#method-forpage)\n[get](#method-get)\n[groupBy](#method-groupby)\n[has](#method-has)\n[implode](#method-implode)\n[intersect](#method-intersect)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3572,"to":3609}}}}],["809",{"pageContent":"[flatten](#method-flatten)\n[flip](#method-flip)\n[forPage](#method-forpage)\n[get](#method-get)\n[groupBy](#method-groupby)\n[has](#method-has)\n[implode](#method-implode)\n[intersect](#method-intersect)\n[intersectAssoc](#method-intersectAssoc)\n[intersectByKeys](#method-intersectbykeys)\n[isEmpty](#method-isempty)\n[isNotEmpty](#method-isnotempty)\n[join](#method-join)\n[keyBy](#method-keyby)\n[keys](#method-keys)\n[last](#method-last)\n[macro](#method-macro)\n[make](#method-make)\n[map](#method-map)\n[mapInto](#method-mapinto)\n[mapSpread](#method-mapspread)\n[mapToGroups](#method-maptogroups)\n[mapWithKeys](#method-mapwithkeys)\n[max](#method-max)\n[median](#method-median)\n[merge](#method-merge)\n[mergeRecursive](#method-mergerecursive)\n[min](#method-min)\n[mode](#method-mode)\n[nth](#method-nth)\n[only](#method-only)\n[pad](#method-pad)\n[partition](#method-partition)\n[pipe](#method-pipe)\n[pluck](#method-pluck)\n[random](#method-random)\n[reduce](#method-reduce)\n[reject](#method-reject)\n[replace](#method-replace)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3609,"to":3647}}}}],["810",{"pageContent":"[pad](#method-pad)\n[partition](#method-partition)\n[pipe](#method-pipe)\n[pluck](#method-pluck)\n[random](#method-random)\n[reduce](#method-reduce)\n[reject](#method-reject)\n[replace](#method-replace)\n[replaceRecursive](#method-replacerecursive)\n[reverse](#method-reverse)\n[search](#method-search)\n[shuffle](#method-shuffle)\n[skip](#method-skip)\n[slice](#method-slice)\n[sole](#method-sole)\n[some](#method-some)\n[sort](#method-sort)\n[sortBy](#method-sortby)\n[sortByDesc](#method-sortbydesc)\n[sortKeys](#method-sortkeys)\n[sortKeysDesc](#method-sortkeysdesc)\n[split](#method-split)\n[sum](#method-sum)\n[take](#method-take)\n[tap](#method-tap)\n[times](#method-times)\n[toArray](#method-toarray)\n[toJson](#method-tojson)\n[union](#method-union)\n[unique](#method-unique)\n[uniqueStrict](#method-uniquestrict)\n[unless](#method-unless)\n[unlessEmpty](#method-unlessempty)\n[unlessNotEmpty](#method-unlessnotempty)\n[unwrap](#method-unwrap)\n[values](#method-values)\n[when](#method-when)\n[whenEmpty](#method-whenempty)\n[whenNotEmpty](#method-whennotempty)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3647,"to":3685}}}}],["811",{"pageContent":"[unlessNotEmpty](#method-unlessnotempty)\n[unwrap](#method-unwrap)\n[values](#method-values)\n[when](#method-when)\n[whenEmpty](#method-whenempty)\n[whenNotEmpty](#method-whennotempty)\n[where](#method-where)\n[whereStrict](#method-wherestrict)\n[whereBetween](#method-wherebetween)\n[whereIn](#method-wherein)\n[whereInStrict](#method-whereinstrict)\n[whereInstanceOf](#method-whereinstanceof)\n[whereNotBetween](#method-wherenotbetween)\n[whereNotIn](#method-wherenotin)\n[whereNotInStrict](#method-wherenotinstrict)\n[wrap](#method-wrap)\n[zip](#method-zip)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3685,"to":3701}}}}],["812",{"pageContent":"</div>\n\n> **Warning**  \n> Methods that mutate the collection (such as `shift`, `pop`, `prepend` etc.) are **not** available on the `LazyCollection` class.\n\n<a name=\"lazy-collection-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3703,"to":3708}}}}],["813",{"pageContent":"Lazy Collection Methods\n\nIn addition to the methods defined in the `Enumerable` contract, the `LazyCollection` class contains the following methods:\n\n<a name=\"method-takeUntilTimeout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3709,"to":3713}}}}],["814",{"pageContent":"`takeUntilTimeout()` {.collection-method}\n\nThe `takeUntilTimeout` method returns a new lazy collection that will enumerate values until the specified time. After that time, the collection will then stop enumerating:\n\n    $lazyCollection = LazyCollection::times(INF)\n        ->takeUntilTimeout(now()->addMinute());\n\n    $lazyCollection->each(function (int $number) {\n        dump($number);\n\n        sleep(1);\n    });\n\n    // 1\n    // 2\n    // ...\n    // 58\n    // 59\n\nTo illustrate the usage of this method, imagine an application that submits invoices from the database using a cursor. You could define a [scheduled task](/docs/{{version}}/scheduling) that runs every 15 minutes and only processes invoices for a maximum of 14 minutes:\n\n    use App\\Models\\Invoice;\n    use Illuminate\\Support\\Carbon;\n\n    Invoice::pending()->cursor()\n        ->takeUntilTimeout(\n            Carbon::createFromTimestamp(LARAVEL_START)->add(14, 'minutes')\n        )\n        ->each(fn (Invoice $invoice) => $invoice->submit());","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3714,"to":3742}}}}],["815",{"pageContent":"<a name=\"method-tapEach\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3744,"to":3744}}}}],["816",{"pageContent":"`tapEach()` {.collection-method}\n\nWhile the `each` method calls the given callback for each item in the collection right away, the `tapEach` method only calls the given callback as the items are being pulled out of the list one by one:\n\n    // Nothing has been dumped so far...\n    $lazyCollection = LazyCollection::times(INF)->tapEach(function (int $value) {\n        dump($value);\n    });\n\n    // Three items are dumped...\n    $array = $lazyCollection->take(3)->all();\n\n    // 1\n    // 2\n    // 3\n\n<a name=\"method-remember\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3745,"to":3761}}}}],["817",{"pageContent":"`remember()` {.collection-method}\n\nThe `remember` method returns a new lazy collection that will remember any values that have already been enumerated and will not retrieve them again on subsequent collection enumerations:\n\n    // No query has been executed yet...\n    $users = User::cursor()->remember();\n\n    // The query is executed...\n    // The first 5 users are hydrated from the database...\n    $users->take(5)->all();\n\n    // First 5 users come from the collection's cache...\n    // The rest are hydrated from the database...\n    $users->take(20)->all();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/collections.md","loc":{"lines":{"from":3762,"to":3775}}}}],["818",{"pageContent":"# Configuration\n\n- [Introduction](#introduction)\n- [Environment Configuration](#environment-configuration)\n    - [Environment Variable Types](#environment-variable-types)\n    - [Retrieving Environment Configuration](#retrieving-environment-configuration)\n    - [Determining The Current Environment](#determining-the-current-environment)\n    - [Encrypting Environment Files](#encrypting-environment-files)\n- [Accessing Configuration Values](#accessing-configuration-values)\n- [Configuration Caching](#configuration-caching)\n- [Debug Mode](#debug-mode)\n- [Maintenance Mode](#maintenance-mode)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":1,"to":14}}}}],["819",{"pageContent":"Introduction\n\nAll of the configuration files for the Laravel framework are stored in the `config` directory. Each option is documented, so feel free to look through the files and get familiar with the options available to you.\n\nThese configuration files allow you to configure things like your database connection information, your mail server information, as well as various other core configuration values such as your application timezone and encryption key.\n\n<a name=\"application-overview\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":15,"to":21}}}}],["820",{"pageContent":"Application Overview\n\nIn a hurry? You can get a quick overview of your application's configuration, drivers, and environment via the `about` Artisan command:\n\n```shell\nphp artisan about\n```\n\nIf you're only interested in a particular section of the application overview output, you may filter for that section using the `--only` option:\n\n```shell\nphp artisan about --only=environment\n```\n\nOr, to explore a specific configuration file's values in detail, you may use the `config:show` Artisan command:\n\n```shell\nphp artisan config:show database\n```\n\n<a name=\"environment-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":22,"to":42}}}}],["821",{"pageContent":"Environment Configuration\n\nIt is often helpful to have different configuration values based on the environment where the application is running. For example, you may wish to use a different cache driver locally than you do on your production server.\n\nTo make this a cinch, Laravel utilizes the [DotEnv](https://github.com/vlucas/phpdotenv) PHP library. In a fresh Laravel installation, the root directory of your application will contain a `.env.example` file that defines many common environment variables. During the Laravel installation process, this file will automatically be copied to `.env`.\n\nLaravel's default `.env` file contains some common configuration values that may differ based on whether your application is running locally or on a production web server. These values are then retrieved from various Laravel configuration files within the `config` directory using Laravel's `env` function.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":43,"to":49}}}}],["822",{"pageContent":"If you are developing with a team, you may wish to continue including a `.env.example` file with your application. By putting placeholder values in the example configuration file, other developers on your team can clearly see which environment variables are needed to run your application.\n\n> **Note**  \n> Any variable in your `.env` file can be overridden by external environment variables such as server-level or system-level environment variables.\n\n<a name=\"environment-file-security\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":51,"to":56}}}}],["823",{"pageContent":"Environment File Security\n\nYour `.env` file should not be committed to your application's source control, since each developer / server using your application could require a different environment configuration. Furthermore, this would be a security risk in the event an intruder gains access to your source control repository, since any sensitive credentials would get exposed.\n\nHowever, it is possible to encrypt your environment file using Laravel's built-in [environment encryption](#encrypting-environment-files). Encrypted environment files may be placed in source control safely.\n\n<a name=\"additional-environment-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":57,"to":63}}}}],["824",{"pageContent":"Additional Environment Files\n\nBefore loading your application's environment variables, Laravel determines if an `APP_ENV` environment variable has been externally provided or if the `--env` CLI argument has been specified. If so, Laravel will attempt to load an `.env.[APP_ENV]` file if it exists. If it does not exist, the default `.env` file will be loaded.\n\n<a name=\"environment-variable-types\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":64,"to":68}}}}],["825",{"pageContent":"Environment Variable Types\n\nAll variables in your `.env` files are typically parsed as strings, so some reserved values have been created to allow you to return a wider range of types from the `env()` function:\n\n| `.env` Value | `env()` Value |\n|--------------|---------------|\n| true         | (bool) true   |\n| (true)       | (bool) true   |\n| false        | (bool) false  |\n| (false)      | (bool) false  |\n| empty        | (string) ''   |\n| (empty)      | (string) ''   |\n| null         | (null) null   |\n| (null)       | (null) null   |\n\nIf you need to define an environment variable with a value that contains spaces, you may do so by enclosing the value in double quotes:\n\n```ini\nAPP_NAME=\"My Application\"\n```\n\n<a name=\"retrieving-environment-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":69,"to":90}}}}],["826",{"pageContent":"Retrieving Environment Configuration\n\nAll of the variables listed in the `.env` file will be loaded into the `$_ENV` PHP super-global when your application receives a request. However, you may use the `env` function to retrieve values from these variables in your configuration files. In fact, if you review the Laravel configuration files, you will notice many of the options are already using this function:\n\n    'debug' => env('APP_DEBUG', false),\n\nThe second value passed to the `env` function is the \"default value\". This value will be returned if no environment variable exists for the given key.\n\n<a name=\"determining-the-current-environment\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":91,"to":99}}}}],["827",{"pageContent":"Determining The Current Environment\n\nThe current application environment is determined via the `APP_ENV` variable from your `.env` file. You may access this value via the `environment` method on the `App` [facade](/docs/{{version}}/facades):\n\n    use Illuminate\\Support\\Facades\\App;\n\n    $environment = App::environment();\n\nYou may also pass arguments to the `environment` method to determine if the environment matches a given value. The method will return `true` if the environment matches any of the given values:\n\n    if (App::environment('local')) {\n        // The environment is local\n    }\n\n    if (App::environment(['local', 'staging'])) {\n        // The environment is either local OR staging...\n    }\n\n> **Note**  \n> The current application environment detection can be overridden by defining a server-level `APP_ENV` environment variable.\n\n<a name=\"encrypting-environment-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":100,"to":121}}}}],["828",{"pageContent":"Encrypting Environment Files\n\nUnencrypted environment files should never be stored in source control. However, Laravel allows you to encrypt your environment files so that they may safely be added to source control with the rest of your application.\n\n<a name=\"encryption\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":122,"to":126}}}}],["829",{"pageContent":"Encryption\n\nTo encrypt an environment file, you may use the `env:encrypt` command:\n\n```shell\nphp artisan env:encrypt\n```\n\nRunning the `env:encrypt` command will encrypt your `.env` file and place the encrypted contents in an `.env.encrypted` file. The decryption key is presented in the output of the command and should be stored in a secure password manager. If you would like to provide your own encryption key you may use the `--key` option when invoking the command:\n\n```shell\nphp artisan env:encrypt --key=3UVsEgGVK36XN82KKeyLFMhvosbZN1aF","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":127,"to":138}}}}],["830",{"pageContent":"> **Note**  \n> The length of the key provided should match the key length required by the encryption cipher being used. By default, Laravel will use the `AES-256-CBC` cipher which requires a 32 character key. You are free to use any cipher supported by Laravel's [encrypter](/docs/{{version}}/encryption) by passing the `--cipher` option when invoking the command.\n\nIf your application has multiple environment files, such as `.env` and `.env.staging`, you may specify the environment file that should be encrypted by providing the environment name via the `--env` option:\n\n```shell\nphp artisan env:encrypt --env=staging\n```\n\n<a name=\"decryption\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":141,"to":150}}}}],["831",{"pageContent":"Decryption\n\nTo decrypt an environment file, you may use the `env:decrypt` command. This command requires a decryption key, which Laravel will retrieve from the `LARAVEL_ENV_ENCRYPTION_KEY` environment variable:\n\n```shell\nphp artisan env:decrypt\n```\n\nOr, the key may be provided directly to the command via the `--key` option:\n\n```shell\nphp artisan env:decrypt --key=3UVsEgGVK36XN82KKeyLFMhvosbZN1aF\n```\n\nWhen the `env:decrypt` command is invoked, Laravel will decrypt the contents of the `.env.encrypted` file and place the decrypted contents in the `.env` file.\n\nThe `--cipher` option may be provided to the `env:decrypt` command in order to use a custom encryption cipher:\n\n```shell\nphp artisan env:decrypt --key=qUWuNRdfuImXcKxZ --cipher=AES-128-CBC\n```\n\nIf your application has multiple environment files, such as `.env` and `.env.staging`, you may specify the environment file that should be decrypted by providing the environment name via the `--env` option:\n\n```shell\nphp artisan env:decrypt --env=staging","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":151,"to":176}}}}],["832",{"pageContent":"In order to overwrite an existing environment file, you may provide the `--force` option to the `env:decrypt` command:\n\n```shell\nphp artisan env:decrypt --force\n```\n\n<a name=\"accessing-configuration-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":179,"to":185}}}}],["833",{"pageContent":"Accessing Configuration Values\n\nYou may easily access your configuration values using the global `config` function from anywhere in your application. The configuration values may be accessed using \"dot\" syntax, which includes the name of the file and option you wish to access. A default value may also be specified and will be returned if the configuration option does not exist:\n\n    $value = config('app.timezone');\n\n    // Retrieve a default value if the configuration value does not exist...\n    $value = config('app.timezone', 'Asia/Seoul');\n\nTo set configuration values at runtime, pass an array to the `config` function:\n\n    config(['app.timezone' => 'America/Chicago']);\n\n<a name=\"configuration-caching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":186,"to":199}}}}],["834",{"pageContent":"Configuration Caching\n\nTo give your application a speed boost, you should cache all of your configuration files into a single file using the `config:cache` Artisan command. This will combine all of the configuration options for your application into a single file which can be quickly loaded by the framework.\n\nYou should typically run the `php artisan config:cache` command as part of your production deployment process. The command should not be run during local development as configuration options will frequently need to be changed during the course of your application's development.\n\nOnce the configuration has been cached, your application's `.env` file will not be loaded by the framework during requests or Artisan commands; therefore, the `env` function will only return external, system level environment variables.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":200,"to":206}}}}],["835",{"pageContent":"For this reason, you should ensure you are only calling the `env` function from within your application's configuration (`config`) files. You can see many examples of this by examining Laravel's default configuration files. Configuration values may be accessed from anywhere in your application using the `config` function [described above](#accessing-configuration-values).\n\nThe `config:clear` command may be used to purge the cached configuration:\n\n```shell\nphp artisan config:clear","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":208,"to":213}}}}],["836",{"pageContent":"> **Warning**\n> If you execute the `config:cache` command during your deployment process, you should be sure that you are only calling the `env` function from within your configuration files. Once the configuration has been cached, the `.env` file will not be loaded; therefore, the `env` function will only return external, system level environment variables.\n\n<a name=\"debug-mode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":216,"to":219}}}}],["837",{"pageContent":"Debug Mode\n\nThe `debug` option in your `config/app.php` configuration file determines how much information about an error is actually displayed to the user. By default, this option is set to respect the value of the `APP_DEBUG` environment variable, which is stored in your `.env` file.\n\n> **Warning**\n> For local development, you should set the `APP_DEBUG` environment variable to `true`. **In your production environment, this value should always be `false`. If the variable is set to `true` in production, you risk exposing sensitive configuration values to your application's end users.**\n\n<a name=\"maintenance-mode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":220,"to":227}}}}],["838",{"pageContent":"Maintenance Mode\n\nWhen your application is in maintenance mode, a custom view will be displayed for all requests into your application. This makes it easy to \"disable\" your application while it is updating or when you are performing maintenance. A maintenance mode check is included in the default middleware stack for your application. If the application is in maintenance mode, a `Symfony\\Component\\HttpKernel\\Exception\\HttpException` instance will be thrown with a status code of 503.\n\nTo enable maintenance mode, execute the `down` Artisan command:\n\n```shell\nphp artisan down\n```\n\nIf you would like the `Refresh` HTTP header to be sent with all maintenance mode responses, you may provide the `refresh` option when invoking the `down` command. The `Refresh` header will instruct the browser to automatically refresh the page after the specified number of seconds:\n\n```shell\nphp artisan down --refresh=15","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":228,"to":241}}}}],["839",{"pageContent":"You may also provide a `retry` option to the `down` command, which will be set as the `Retry-After` HTTP header's value, although browsers generally ignore this header:\n\n```shell\nphp artisan down --retry=60\n```\n\n<a name=\"bypassing-maintenance-mode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":244,"to":250}}}}],["840",{"pageContent":"Bypassing Maintenance Mode\n\nTo allow maintenance mode to be bypassed using a secret token, you may use the `secret` option to specify a maintenance mode bypass token:\n\n```shell\nphp artisan down --secret=\"1630542a-246b-4b66-afa1-dd72a4c43515\"\n```\n\nAfter placing the application in maintenance mode, you may navigate to the application URL matching this token and Laravel will issue a maintenance mode bypass cookie to your browser:\n\n```shell\nhttps://example.com/1630542a-246b-4b66-afa1-dd72a4c43515\n```\n\nWhen accessing this hidden route, you will then be redirected to the `/` route of the application. Once the cookie has been issued to your browser, you will be able to browse the application normally as if it was not in maintenance mode.\n\n> **Note**  \n> Your maintenance mode secret should typically consist of alpha-numeric characters and, optionally, dashes. You should avoid using characters that have special meaning in URLs such as `?` or `&`.\n\n<a name=\"pre-rendering-the-maintenance-mode-view\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":251,"to":270}}}}],["841",{"pageContent":"Pre-Rendering The Maintenance Mode View\n\nIf you utilize the `php artisan down` command during deployment, your users may still occasionally encounter errors if they access the application while your Composer dependencies or other infrastructure components are updating. This occurs because a significant part of the Laravel framework must boot in order to determine your application is in maintenance mode and render the maintenance mode view using the templating engine.\n\nFor this reason, Laravel allows you to pre-render a maintenance mode view that will be returned at the very beginning of the request cycle. This view is rendered before any of your application's dependencies have loaded. You may pre-render a template of your choice using the `down` command's `render` option:\n\n```shell\nphp artisan down --render=\"errors::503\"\n```\n\n<a name=\"redirecting-maintenance-mode-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":271,"to":281}}}}],["842",{"pageContent":"Redirecting Maintenance Mode Requests\n\nWhile in maintenance mode, Laravel will display the maintenance mode view for all application URLs the user attempts to access. If you wish, you may instruct Laravel to redirect all requests to a specific URL. This may be accomplished using the `redirect` option. For example, you may wish to redirect all requests to the `/` URI:\n\n```shell\nphp artisan down --redirect=/\n```\n\n<a name=\"disabling-maintenance-mode\"></a>\n#### Disabling Maintenance Mode\n\nTo disable maintenance mode, use the `up` command:\n\n```shell\nphp artisan up\n```\n\n> **Note**  \n> You may customize the default maintenance mode template by defining your own template at `resources/views/errors/503.blade.php`.\n\n<a name=\"maintenance-mode-queues\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":282,"to":302}}}}],["843",{"pageContent":"Maintenance Mode & Queues\n\nWhile your application is in maintenance mode, no [queued jobs](/docs/{{version}}/queues) will be handled. The jobs will continue to be handled as normal once the application is out of maintenance mode.\n\n<a name=\"alternatives-to-maintenance-mode\"></a>\n#### Alternatives To Maintenance Mode\n\nSince maintenance mode requires your application to have several seconds of downtime, consider alternatives like [Laravel Vapor](https://vapor.laravel.com) and [Envoyer](https://envoyer.io) to accomplish zero-downtime deployment with Laravel.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/configuration.md","loc":{"lines":{"from":303,"to":310}}}}],["844",{"pageContent":"# Console Tests\n\n- [Introduction](#introduction)\n- [Success / Failure Expectations](#success-failure-expectations)\n- [Input / Output Expectations](#input-output-expectations)\n- [Console Events](#console-events)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nIn addition to simplifying HTTP testing, Laravel provides a simple API for testing your application's [custom console commands](/docs/{{version}}/artisan).\n\n<a name=\"success-failure-expectations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/console-tests.md","loc":{"lines":{"from":1,"to":13}}}}],["845",{"pageContent":"Success / Failure Expectations\n\nTo get started, let's explore how to make assertions regarding an Artisan command's exit code. To accomplish this, we will use the `artisan` method to invoke an Artisan command from our test. Then, we will use the `assertExitCode` method to assert that the command completed with a given exit code:\n\n    /**\n     * Test a console command.\n     */\n    public function test_console_command(): void\n    {\n        $this->artisan('inspire')->assertExitCode(0);\n    }\n\nYou may use the `assertNotExitCode` method to assert that the command did not exit with a given exit code:\n\n    $this->artisan('inspire')->assertNotExitCode(1);\n\nOf course, all terminal commands typically exit with a status code of `0` when they are successful and a non-zero exit code when they are not successful. Therefore, for convenience, you may utilize the `assertSuccessful` and `assertFailed` assertions to assert that a given command exited with a successful exit code or not:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/console-tests.md","loc":{"lines":{"from":14,"to":30}}}}],["846",{"pageContent":"$this->artisan('inspire')->assertSuccessful();\n\n    $this->artisan('inspire')->assertFailed();\n\n<a name=\"input-output-expectations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/console-tests.md","loc":{"lines":{"from":32,"to":36}}}}],["847",{"pageContent":"Input / Output Expectations\n\nLaravel allows you to easily \"mock\" user input for your console commands using the `expectsQuestion` method. In addition, you may specify the exit code and text that you expect to be output by the console command using the `assertExitCode` and `expectsOutput` methods. For example, consider the following console command:\n\n    Artisan::command('question', function () {\n        $name = $this->ask('What is your name?');\n\n        $language = $this->choice('Which language do you prefer?', [\n            'PHP',\n            'Ruby',\n            'Python',\n        ]);\n\n        $this->line('Your name is '.$name.' and you prefer '.$language.'.');\n    });\n\nYou may test this command with the following test which utilizes the `expectsQuestion`, `expectsOutput`, `doesntExpectOutput`, `expectsOutputToContain`, `doesntExpectOutputToContain`, and `assertExitCode` methods:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/console-tests.md","loc":{"lines":{"from":37,"to":53}}}}],["848",{"pageContent":"/**\n     * Test a console command.\n     */\n    public function test_console_command(): void\n    {\n        $this->artisan('question')\n             ->expectsQuestion('What is your name?', 'Taylor Otwell')\n             ->expectsQuestion('Which language do you prefer?', 'PHP')\n             ->expectsOutput('Your name is Taylor Otwell and you prefer PHP.')\n             ->doesntExpectOutput('Your name is Taylor Otwell and you prefer Ruby.')\n             ->expectsOutputToContain('Taylor Otwell')\n             ->doesntExpectOutputToContain('you prefer Ruby')\n             ->assertExitCode(0);\n    }\n\n<a name=\"confirmation-expectations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/console-tests.md","loc":{"lines":{"from":55,"to":70}}}}],["849",{"pageContent":"Confirmation Expectations\n\nWhen writing a command which expects confirmation in the form of a \"yes\" or \"no\" answer, you may utilize the `expectsConfirmation` method:\n\n    $this->artisan('module:import')\n        ->expectsConfirmation('Do you really wish to run this command?', 'no')\n        ->assertExitCode(1);\n\n<a name=\"table-expectations\"></a>\n#### Table Expectations\n\nIf your command displays a table of information using Artisan's `table` method, it can be cumbersome to write output expectations for the entire table. Instead, you may use the `expectsTable` method. This method accepts the table's headers as its first argument and the table's data as its second argument:\n\n    $this->artisan('users:all')\n        ->expectsTable([\n            'ID',\n            'Email',\n        ], [\n            [1, 'taylor@example.com'],\n            [2, 'abigail@example.com'],\n        ]);\n\n<a name=\"console-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/console-tests.md","loc":{"lines":{"from":71,"to":93}}}}],["850",{"pageContent":"Console Events\n\nBy default, the `Illuminate\\Console\\Events\\CommandStarting` and `Illuminate\\Console\\Events\\CommandFinished` events are not dispatched while running your application's tests. However, you can enable these events for a given test class by adding the `Illuminate\\Foundation\\Testing\\WithConsoleEvents` trait to the class:\n\n    <?php\n    \n    namespace Tests\\Feature;\n\n    use Illuminate\\Foundation\\Testing\\WithConsoleEvents;\n    use Tests\\TestCase;\n    \n    class ConsoleEventTest extends TestCase\n    {\n        use WithConsoleEvents;\n    \n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/console-tests.md","loc":{"lines":{"from":94,"to":110}}}}],["851",{"pageContent":"# Service Container\n\n- [Introduction](#introduction)\n    - [Zero Configuration Resolution](#zero-configuration-resolution)\n    - [When To Use The Container](#when-to-use-the-container)\n- [Binding](#binding)\n    - [Binding Basics](#binding-basics)\n    - [Binding Interfaces To Implementations](#binding-interfaces-to-implementations)\n    - [Contextual Binding](#contextual-binding)\n    - [Binding Primitives](#binding-primitives)\n    - [Binding Typed Variadics](#binding-typed-variadics)\n    - [Tagging](#tagging)\n    - [Extending Bindings](#extending-bindings)\n- [Resolving](#resolving)\n    - [The Make Method](#the-make-method)\n    - [Automatic Injection](#automatic-injection)\n- [Method Invocation & Injection](#method-invocation-and-injection)\n- [Container Events](#container-events)\n- [PSR-11](#psr-11)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":1,"to":21}}}}],["852",{"pageContent":"Introduction\n\nThe Laravel service container is a powerful tool for managing class dependencies and performing dependency injection. Dependency injection is a fancy phrase that essentially means this: class dependencies are \"injected\" into the class via the constructor or, in some cases, \"setter\" methods.\n\nLet's look at a simple example:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Repositories\\UserRepository;\n    use App\\Models\\User;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Create a new controller instance.\n         */\n        public function __construct(\n            protected UserRepository $users,\n        ) {}\n\n        /**\n         * Show the profile for the given user.\n         */\n        public function show(string $id): View\n        {\n            $user = $this->users->find($id);\n\n            return view('user.profile', ['user' => $user]);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":22,"to":55}}}}],["853",{"pageContent":"return view('user.profile', ['user' => $user]);\n        }\n    }\n\nIn this example, the `UserController` needs to retrieve users from a data source. So, we will **inject** a service that is able to retrieve users. In this context, our `UserRepository` most likely uses [Eloquent](/docs/{{version}}/eloquent) to retrieve user information from the database. However, since the repository is injected, we are able to easily swap it out with another implementation. We are also able to easily \"mock\", or create a dummy implementation of the `UserRepository` when testing our application.\n\nA deep understanding of the Laravel service container is essential to building a powerful, large application, as well as for contributing to the Laravel core itself.\n\n<a name=\"zero-configuration-resolution\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":55,"to":63}}}}],["854",{"pageContent":"Zero Configuration Resolution\n\nIf a class has no dependencies or only depends on other concrete classes (not interfaces), the container does not need to be instructed on how to resolve that class. For example, you may place the following code in your `routes/web.php` file:\n\n    <?php\n\n    class Service\n    {\n        // ...\n    }\n\n    Route::get('/', function (Service $service) {\n        die($service::class);\n    });\n\nIn this example, hitting your application's `/` route will automatically resolve the `Service` class and inject it into your route's handler. This is game changing. It means you can develop your application and take advantage of dependency injection without worrying about bloated configuration files.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":64,"to":79}}}}],["855",{"pageContent":"Thankfully, many of the classes you will be writing when building a Laravel application automatically receive their dependencies via the container, including [controllers](/docs/{{version}}/controllers), [event listeners](/docs/{{version}}/events), [middleware](/docs/{{version}}/middleware), and more. Additionally, you may type-hint dependencies in the `handle` method of [queued jobs](/docs/{{version}}/queues). Once you taste the power of automatic and zero configuration dependency injection it feels impossible to develop without it.\n\n<a name=\"when-to-use-the-container\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":81,"to":83}}}}],["856",{"pageContent":"When To Use The Container\n\nThanks to zero configuration resolution, you will often type-hint dependencies on routes, controllers, event listeners, and elsewhere without ever manually interacting with the container. For example, you might type-hint the `Illuminate\\Http\\Request` object on your route definition so that you can easily access the current request. Even though we never have to interact with the container to write this code, it is managing the injection of these dependencies behind the scenes:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/', function (Request $request) {\n        // ...\n    });\n\nIn many cases, thanks to automatic dependency injection and [facades](/docs/{{version}}/facades), you can build Laravel applications without **ever** manually binding or resolving anything from the container. **So, when would you ever manually interact with the container?** Let's examine two situations.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":84,"to":94}}}}],["857",{"pageContent":"First, if you write a class that implements an interface and you wish to type-hint that interface on a route or class constructor, you must [tell the container how to resolve that interface](#binding-interfaces-to-implementations). Secondly, if you are [writing a Laravel package](/docs/{{version}}/packages) that you plan to share with other Laravel developers, you may need to bind your package's services into the container.\n\n<a name=\"binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":96,"to":98}}}}],["858",{"pageContent":"Binding\n\n<a name=\"binding-basics\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":99,"to":101}}}}],["859",{"pageContent":"Binding Basics\n\n<a name=\"simple-bindings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":102,"to":104}}}}],["860",{"pageContent":"Simple Bindings\n\nAlmost all of your service container bindings will be registered within [service providers](/docs/{{version}}/providers), so most of these examples will demonstrate using the container in that context.\n\nWithin a service provider, you always have access to the container via the `$this->app` property. We can register a binding using the `bind` method, passing the class or interface name that we wish to register along with a closure that returns an instance of the class:\n\n    use App\\Services\\Transistor;\n    use App\\Services\\PodcastParser;\n    use Illuminate\\Contracts\\Foundation\\Application;\n\n    $this->app->bind(Transistor::class, function (Application $app) {\n        return new Transistor($app->make(PodcastParser::class));\n    });\n\nNote that we receive the container itself as an argument to the resolver. We can then use the container to resolve sub-dependencies of the object we are building.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":105,"to":119}}}}],["861",{"pageContent":"Note that we receive the container itself as an argument to the resolver. We can then use the container to resolve sub-dependencies of the object we are building.\n\nAs mentioned, you will typically be interacting with the container within service providers; however, if you would like to interact with the container outside of a service provider, you may do so via the `App` [facade](/docs/{{version}}/facades):\n\n    use App\\Services\\Transistor;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Support\\Facades\\App;\n\n    App::bind(Transistor::class, function (Application $app) {\n        // ...\n    });\n\nYou may use the `bindIf` method to register a container binding only if a binding has not already been registered for the given type:\n\n```php\n$this->app->bindIf(Transistor::class, function (Application $app) {\n    return new Transistor($app->make(PodcastParser::class));\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":119,"to":136}}}}],["862",{"pageContent":"> **Note**  \n> There is no need to bind classes into the container if they do not depend on any interfaces. The container does not need to be instructed on how to build these objects, since it can automatically resolve these objects using reflection.\n\n<a name=\"binding-a-singleton\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":139,"to":142}}}}],["863",{"pageContent":"Binding A Singleton\n\nThe `singleton` method binds a class or interface into the container that should only be resolved one time. Once a singleton binding is resolved, the same object instance will be returned on subsequent calls into the container:\n\n    use App\\Services\\Transistor;\n    use App\\Services\\PodcastParser;\n    use Illuminate\\Contracts\\Foundation\\Application;\n\n    $this->app->singleton(Transistor::class, function (Application $app) {\n        return new Transistor($app->make(PodcastParser::class));\n    });\n\nYou may use the `singletonIf` method to register a singleton container binding only if a binding has not already been registered for the given type:\n\n```php\n$this->app->singletonIf(Transistor::class, function (Application $app) {\n    return new Transistor($app->make(PodcastParser::class));\n});\n```\n\n<a name=\"binding-scoped\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":143,"to":163}}}}],["864",{"pageContent":"Binding Scoped Singletons\n\nThe `scoped` method binds a class or interface into the container that should only be resolved one time within a given Laravel request / job lifecycle. While this method is similar to the `singleton` method, instances registered using the `scoped` method will be flushed whenever the Laravel application starts a new \"lifecycle\", such as when a [Laravel Octane](/docs/{{version}}/octane) worker processes a new request or when a Laravel [queue worker](/docs/{{version}}/queues) processes a new job:\n\n    use App\\Services\\Transistor;\n    use App\\Services\\PodcastParser;\n    use Illuminate\\Contracts\\Foundation\\Application;\n\n    $this->app->scoped(Transistor::class, function (Application $app) {\n        return new Transistor($app->make(PodcastParser::class));\n    });\n\n<a name=\"binding-instances\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":164,"to":176}}}}],["865",{"pageContent":"Binding Instances\n\nYou may also bind an existing object instance into the container using the `instance` method. The given instance will always be returned on subsequent calls into the container:\n\n    use App\\Services\\Transistor;\n    use App\\Services\\PodcastParser;\n\n    $service = new Transistor(new PodcastParser);\n\n    $this->app->instance(Transistor::class, $service);\n\n<a name=\"binding-interfaces-to-implementations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":177,"to":188}}}}],["866",{"pageContent":"Binding Interfaces To Implementations\n\nA very powerful feature of the service container is its ability to bind an interface to a given implementation. For example, let's assume we have an `EventPusher` interface and a `RedisEventPusher` implementation. Once we have coded our `RedisEventPusher` implementation of this interface, we can register it with the service container like so:\n\n    use App\\Contracts\\EventPusher;\n    use App\\Services\\RedisEventPusher;\n\n    $this->app->bind(EventPusher::class, RedisEventPusher::class);\n\nThis statement tells the container that it should inject the `RedisEventPusher` when a class needs an implementation of `EventPusher`. Now we can type-hint the `EventPusher` interface in the constructor of a class that is resolved by the container. Remember, controllers, event listeners, middleware, and various other types of classes within Laravel applications are always resolved using the container:\n\n    use App\\Contracts\\EventPusher;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":189,"to":200}}}}],["867",{"pageContent":"use App\\Contracts\\EventPusher;\n\n    /**\n     * Create a new class instance.\n     */\n    public function __construct(\n        protected EventPusher $pusher\n    ) {}\n\n<a name=\"contextual-binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":200,"to":209}}}}],["868",{"pageContent":"Contextual Binding\n\nSometimes you may have two classes that utilize the same interface, but you wish to inject different implementations into each class. For example, two controllers may depend on different implementations of the `Illuminate\\Contracts\\Filesystem\\Filesystem` [contract](/docs/{{version}}/contracts). Laravel provides a simple, fluent interface for defining this behavior:\n\n    use App\\Http\\Controllers\\PhotoController;\n    use App\\Http\\Controllers\\UploadController;\n    use App\\Http\\Controllers\\VideoController;\n    use Illuminate\\Contracts\\Filesystem\\Filesystem;\n    use Illuminate\\Support\\Facades\\Storage;\n\n    $this->app->when(PhotoController::class)\n              ->needs(Filesystem::class)\n              ->give(function () {\n                  return Storage::disk('local');\n              });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":210,"to":224}}}}],["869",{"pageContent":"$this->app->when(PhotoController::class)\n              ->needs(Filesystem::class)\n              ->give(function () {\n                  return Storage::disk('local');\n              });\n\n    $this->app->when([VideoController::class, UploadController::class])\n              ->needs(Filesystem::class)\n              ->give(function () {\n                  return Storage::disk('s3');\n              });\n\n<a name=\"binding-primitives\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":224,"to":236}}}}],["870",{"pageContent":"Binding Primitives\n\nSometimes you may have a class that receives some injected classes, but also needs an injected primitive value such as an integer. You may easily use contextual binding to inject any value your class may need:\n\n    use App\\Http\\Controllers\\UserController;\n    \n    $this->app->when(UserController::class)\n              ->needs('$variableName')\n              ->give($value);\n\nSometimes a class may depend on an array of [tagged](#tagging) instances. Using the `giveTagged` method, you may easily inject all of the container bindings with that tag:\n\n    $this->app->when(ReportAggregator::class)\n        ->needs('$reports')\n        ->giveTagged('reports');\n\nIf you need to inject a value from one of your application's configuration files, you may use the `giveConfig` method:\n\n    $this->app->when(ReportAggregator::class)\n        ->needs('$timezone')\n        ->giveConfig('app.timezone');\n\n<a name=\"binding-typed-variadics\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":237,"to":259}}}}],["871",{"pageContent":"Binding Typed Variadics\n\nOccasionally, you may have a class that receives an array of typed objects using a variadic constructor argument:\n\n    <?php\n\n    use App\\Models\\Filter;\n    use App\\Services\\Logger;\n\n    class Firewall\n    {\n        /**\n         * The filter instances.\n         *\n         * @var array\n         */\n        protected $filters;\n\n        /**\n         * Create a new class instance.\n         */\n        public function __construct(\n            protected Logger $logger,\n            Filter ...$filters,\n        ) {\n            $this->filters = $filters;\n        }\n    }\n\nUsing contextual binding, you may resolve this dependency by providing the `give` method with a closure that returns an array of resolved `Filter` instances:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":260,"to":289}}}}],["872",{"pageContent":"Using contextual binding, you may resolve this dependency by providing the `give` method with a closure that returns an array of resolved `Filter` instances:\n\n    $this->app->when(Firewall::class)\n              ->needs(Filter::class)\n              ->give(function (Application $app) {\n                    return [\n                        $app->make(NullFilter::class),\n                        $app->make(ProfanityFilter::class),\n                        $app->make(TooLongFilter::class),\n                    ];\n              });\n\nFor convenience, you may also just provide an array of class names to be resolved by the container whenever `Firewall` needs `Filter` instances:\n\n    $this->app->when(Firewall::class)\n              ->needs(Filter::class)\n              ->give([\n                  NullFilter::class,\n                  ProfanityFilter::class,\n                  TooLongFilter::class,\n              ]);\n\n<a name=\"variadic-tag-dependencies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":289,"to":311}}}}],["873",{"pageContent":"Variadic Tag Dependencies\n\nSometimes a class may have a variadic dependency that is type-hinted as a given class (`Report ...$reports`). Using the `needs` and `giveTagged` methods, you may easily inject all of the container bindings with that [tag](#tagging) for the given dependency:\n\n    $this->app->when(ReportAggregator::class)\n        ->needs(Report::class)\n        ->giveTagged('reports');\n\n<a name=\"tagging\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":312,"to":320}}}}],["874",{"pageContent":"Tagging\n\nOccasionally, you may need to resolve all of a certain \"category\" of binding. For example, perhaps you are building a report analyzer that receives an array of many different `Report` interface implementations. After registering the `Report` implementations, you can assign them a tag using the `tag` method:\n\n    $this->app->bind(CpuReport::class, function () {\n        // ...\n    });\n\n    $this->app->bind(MemoryReport::class, function () {\n        // ...\n    });\n\n    $this->app->tag([CpuReport::class, MemoryReport::class], 'reports');\n\nOnce the services have been tagged, you may easily resolve them all via the container's `tagged` method:\n\n    $this->app->bind(ReportAnalyzer::class, function (Application $app) {\n        return new ReportAnalyzer($app->tagged('reports'));\n    });\n\n<a name=\"extending-bindings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":321,"to":341}}}}],["875",{"pageContent":"Extending Bindings\n\nThe `extend` method allows the modification of resolved services. For example, when a service is resolved, you may run additional code to decorate or configure the service. The `extend` method accepts two arguments, the service class you're extending and a closure that should return the modified service. The closure receives the service being resolved and the container instance:\n\n    $this->app->extend(Service::class, function (Service $service, Application $app) {\n        return new DecoratedService($service);\n    });\n\n<a name=\"resolving\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":342,"to":350}}}}],["876",{"pageContent":"Resolving\n\n<a name=\"the-make-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":351,"to":353}}}}],["877",{"pageContent":"The `make` Method\n\nYou may use the `make` method to resolve a class instance from the container. The `make` method accepts the name of the class or interface you wish to resolve:\n\n    use App\\Services\\Transistor;\n\n    $transistor = $this->app->make(Transistor::class);\n\nIf some of your class's dependencies are not resolvable via the container, you may inject them by passing them as an associative array into the `makeWith` method. For example, we may manually pass the `$id` constructor argument required by the `Transistor` service:\n\n    use App\\Services\\Transistor;\n\n    $transistor = $this->app->makeWith(Transistor::class, ['id' => 1]);\n\nThe `bound` method may be used to determine if a class or interface has been explicitly bound in the container:\n\n    if ($this->app->bound(Transistor::class)) {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":354,"to":372}}}}],["878",{"pageContent":"The `bound` method may be used to determine if a class or interface has been explicitly bound in the container:\n\n    if ($this->app->bound(Transistor::class)) {\n        // ...\n    }\n\nIf you are outside of a service provider in a location of your code that does not have access to the `$app` variable, you may use the `App` [facade](/docs/{{version}}/facades) or the `app` [helper](/docs/{{version}}/helpers#method-app) to resolve a class instance from the container:\n\n    use App\\Services\\Transistor;\n    use Illuminate\\Support\\Facades\\App;\n\n    $transistor = App::make(Transistor::class);\n\n    $transistor = app(Transistor::class);\n\nIf you would like to have the Laravel container instance itself injected into a class that is being resolved by the container, you may type-hint the `Illuminate\\Container\\Container` class on your class's constructor:\n\n    use Illuminate\\Container\\Container;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":372,"to":389}}}}],["879",{"pageContent":"use Illuminate\\Container\\Container;\n\n    /**\n     * Create a new class instance.\n     */\n    public function __construct(\n        protected Container $container\n    ) {}\n\n<a name=\"automatic-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":389,"to":398}}}}],["880",{"pageContent":"Automatic Injection\n\nAlternatively, and importantly, you may type-hint the dependency in the constructor of a class that is resolved by the container, including [controllers](/docs/{{version}}/controllers), [event listeners](/docs/{{version}}/events), [middleware](/docs/{{version}}/middleware), and more. Additionally, you may type-hint dependencies in the `handle` method of [queued jobs](/docs/{{version}}/queues). In practice, this is how most of your objects should be resolved by the container.\n\nFor example, you may type-hint a repository defined by your application in a controller's constructor. The repository will automatically be resolved and injected into the class:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Repositories\\UserRepository;\n    use App\\Models\\User;\n\n    class UserController extends Controller\n    {\n        /**\n         * Create a new controller instance.\n         */\n        public function __construct(\n            protected UserRepository $users,\n        ) {}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":399,"to":419}}}}],["881",{"pageContent":"/**\n         * Show the user with the given ID.\n         */\n        public function show(string $id): User\n        {\n            $user = $this->users->findOrFail($id);\n\n            return $user;\n        }\n    }\n\n<a name=\"method-invocation-and-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":421,"to":432}}}}],["882",{"pageContent":"Method Invocation & Injection\n\nSometimes you may wish to invoke a method on an object instance while allowing the container to automatically inject that method's dependencies. For example, given the following class:\n\n    <?php\n\n    namespace App;\n\n    use App\\Repositories\\UserRepository;\n\n    class UserReport\n    {\n        /**\n         * Generate a new user report.\n         */\n        public function generate(UserRepository $repository): array\n        {\n            return [\n                // ...\n            ];\n        }\n    }\n\nYou may invoke the `generate` method via the container like so:\n\n    use App\\UserReport;\n    use Illuminate\\Support\\Facades\\App;\n\n    $report = App::call([new UserReport, 'generate']);\n\nThe `call` method accepts any PHP callable. The container's `call` method may even be used to invoke a closure while automatically injecting its dependencies:\n\n    use App\\Repositories\\UserRepository;\n    use Illuminate\\Support\\Facades\\App;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":433,"to":466}}}}],["883",{"pageContent":"use App\\Repositories\\UserRepository;\n    use Illuminate\\Support\\Facades\\App;\n\n    $result = App::call(function (UserRepository $repository) {\n        // ...\n    });\n\n<a name=\"container-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":466,"to":473}}}}],["884",{"pageContent":"Container Events\n\nThe service container fires an event each time it resolves an object. You may listen to this event using the `resolving` method:\n\n    use App\\Services\\Transistor;\n    use Illuminate\\Contracts\\Foundation\\Application;\n\n    $this->app->resolving(Transistor::class, function (Transistor $transistor, Application $app) {\n        // Called when container resolves objects of type \"Transistor\"...\n    });\n\n    $this->app->resolving(function (mixed $object, Application $app) {\n        // Called when container resolves object of any type...\n    });\n\nAs you can see, the object being resolved will be passed to the callback, allowing you to set any additional properties on the object before it is given to its consumer.\n\n<a name=\"psr-11\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":474,"to":491}}}}],["885",{"pageContent":"PSR-11\n\nLaravel's service container implements the [PSR-11](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-11-container.md) interface. Therefore, you may type-hint the PSR-11 container interface to obtain an instance of the Laravel container:\n\n    use App\\Services\\Transistor;\n    use Psr\\Container\\ContainerInterface;\n\n    Route::get('/', function (ContainerInterface $container) {\n        $service = $container->get(Transistor::class);\n\n        // ...\n    });\n\nAn exception is thrown if the given identifier can't be resolved. The exception will be an instance of `Psr\\Container\\NotFoundExceptionInterface` if the identifier was never bound. If the identifier was bound but was unable to be resolved, an instance of `Psr\\Container\\ContainerExceptionInterface` will be thrown.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/container.md","loc":{"lines":{"from":492,"to":505}}}}],["886",{"pageContent":"# Contracts\n\n- [Introduction](#introduction)\n    - [Contracts Vs. Facades](#contracts-vs-facades)\n- [When To Use Contracts](#when-to-use-contracts)\n- [How To Use Contracts](#how-to-use-contracts)\n- [Contract Reference](#contract-reference)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":1,"to":9}}}}],["887",{"pageContent":"Introduction\n\nLaravel's \"contracts\" are a set of interfaces that define the core services provided by the framework. For example, an `Illuminate\\Contracts\\Queue\\Queue` contract defines the methods needed for queueing jobs, while the `Illuminate\\Contracts\\Mail\\Mailer` contract defines the methods needed for sending e-mail.\n\nEach contract has a corresponding implementation provided by the framework. For example, Laravel provides a queue implementation with a variety of drivers, and a mailer implementation that is powered by [Symfony Mailer](https://symfony.com/doc/6.0/mailer.html).\n\nAll of the Laravel contracts live in [their own GitHub repository](https://github.com/illuminate/contracts). This provides a quick reference point for all available contracts, as well as a single, decoupled package that may be utilized when building packages that interact with Laravel services.\n\n<a name=\"contracts-vs-facades\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":10,"to":18}}}}],["888",{"pageContent":"Contracts Vs. Facades\n\nLaravel's [facades](/docs/{{version}}/facades) and helper functions provide a simple way of utilizing Laravel's services without needing to type-hint and resolve contracts out of the service container. In most cases, each facade has an equivalent contract.\n\nUnlike facades, which do not require you to require them in your class' constructor, contracts allow you to define explicit dependencies for your classes. Some developers prefer to explicitly define their dependencies in this way and therefore prefer to use contracts, while other developers enjoy the convenience of facades. **In general, most applications can use facades without issue during development.**\n\n<a name=\"when-to-use-contracts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":19,"to":25}}}}],["889",{"pageContent":"When To Use Contracts\n\nThe decision to use contracts or facades will come down to personal taste and the tastes of your development team. Both contracts and facades can be used to create robust, well-tested Laravel applications. Contracts and facades are not mutually exclusive. Some parts of your applications may use facades while others depend on contracts. As long as you are keeping your class' responsibilities focused, you will notice very few practical differences between using contracts and facades.\n\nIn general, most applications can use facades without issue during development. If you are building a package that integrates with multiple PHP frameworks you may wish to use the `illuminate/contracts` package to define your integration with Laravel's services without the need to require Laravel's concrete implementations in your package's `composer.json` file.\n\n<a name=\"how-to-use-contracts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":26,"to":32}}}}],["890",{"pageContent":"How To Use Contracts\n\nSo, how do you get an implementation of a contract? It's actually quite simple.\n\nMany types of classes in Laravel are resolved through the [service container](/docs/{{version}}/container), including controllers, event listeners, middleware, queued jobs, and even route closures. So, to get an implementation of a contract, you can just \"type-hint\" the interface in the constructor of the class being resolved.\n\nFor example, take a look at this event listener:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderWasPlaced;\n    use App\\Models\\User;\n    use Illuminate\\Contracts\\Redis\\Factory;\n\n    class CacheOrderInformation\n    {\n        /**\n         * Create a new event handler instance.\n         */\n        public function __construct(\n            protected Factory $redis,\n        ) {}\n\n        /**\n         * Handle the event.\n         */\n        public function handle(OrderWasPlaced $event): void\n        {\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":33,"to":65}}}}],["891",{"pageContent":"/**\n         * Handle the event.\n         */\n        public function handle(OrderWasPlaced $event): void\n        {\n            // ...\n        }\n    }\n\nWhen the event listener is resolved, the service container will read the type-hints on the constructor of the class, and inject the appropriate value. To learn more about registering things in the service container, check out [its documentation](/docs/{{version}}/container).\n\n<a name=\"contract-reference\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":65,"to":76}}}}],["892",{"pageContent":"Contract Reference\n\nThis table provides a quick reference to all of the Laravel contracts and their equivalent facades:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":77,"to":79}}}}],["893",{"pageContent":"| Contract                                                                                                                                               | References Facade         |\n|--------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n| [Illuminate\\Contracts\\Auth\\Access\\Authorizable](https://github.com/illuminate/contracts/blob/{{version}}/Auth/Access/Authorizable.php)                 |  &nbsp;                   |\n| [Illuminate\\Contracts\\Auth\\Access\\Gate](https://github.com/illuminate/contracts/blob/{{version}}/Auth/Access/Gate.php)                                 | `Gate`                    |\n| [Illuminate\\Contracts\\Auth\\Authenticatable](https://github.com/illuminate/contracts/blob/{{version}}/Auth/Authenticatable.php)                         |  &nbsp;                   |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":81,"to":85}}}}],["894",{"pageContent":"| [Illuminate\\Contracts\\Auth\\Authenticatable](https://github.com/illuminate/contracts/blob/{{version}}/Auth/Authenticatable.php)                         |  &nbsp;                   |\n| [Illuminate\\Contracts\\Auth\\CanResetPassword](https://github.com/illuminate/contracts/blob/{{version}}/Auth/CanResetPassword.php)                       | &nbsp;                    |\n| [Illuminate\\Contracts\\Auth\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Auth/Factory.php)                                         | `Auth`                    |\n| [Illuminate\\Contracts\\Auth\\Guard](https://github.com/illuminate/contracts/blob/{{version}}/Auth/Guard.php)                                             | `Auth::guard()`           |\n| [Illuminate\\Contracts\\Auth\\PasswordBroker](https://github.com/illuminate/contracts/blob/{{version}}/Auth/PasswordBroker.php)                           | `Password::broker()`      |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":85,"to":89}}}}],["895",{"pageContent":"| [Illuminate\\Contracts\\Auth\\PasswordBroker](https://github.com/illuminate/contracts/blob/{{version}}/Auth/PasswordBroker.php)                           | `Password::broker()`      |\n| [Illuminate\\Contracts\\Auth\\PasswordBrokerFactory](https://github.com/illuminate/contracts/blob/{{version}}/Auth/PasswordBrokerFactory.php)             | `Password`                |\n| [Illuminate\\Contracts\\Auth\\StatefulGuard](https://github.com/illuminate/contracts/blob/{{version}}/Auth/StatefulGuard.php)                             | &nbsp;                    |\n| [Illuminate\\Contracts\\Auth\\SupportsBasicAuth](https://github.com/illuminate/contracts/blob/{{version}}/Auth/SupportsBasicAuth.php)                     | &nbsp;                    |\n| [Illuminate\\Contracts\\Auth\\UserProvider](https://github.com/illuminate/contracts/blob/{{version}}/Auth/UserProvider.php)                               | &nbsp;                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":89,"to":93}}}}],["896",{"pageContent":"| [Illuminate\\Contracts\\Auth\\UserProvider](https://github.com/illuminate/contracts/blob/{{version}}/Auth/UserProvider.php)                               | &nbsp;                    |\n| [Illuminate\\Contracts\\Bus\\Dispatcher](https://github.com/illuminate/contracts/blob/{{version}}/Bus/Dispatcher.php)                                     | `Bus`                     |\n| [Illuminate\\Contracts\\Bus\\QueueingDispatcher](https://github.com/illuminate/contracts/blob/{{version}}/Bus/QueueingDispatcher.php)                     | `Bus::dispatchToQueue()`  |\n| [Illuminate\\Contracts\\Broadcasting\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Broadcasting/Factory.php)                         | `Broadcast`               |\n| [Illuminate\\Contracts\\Broadcasting\\Broadcaster](https://github.com/illuminate/contracts/blob/{{version}}/Broadcasting/Broadcaster.php)                 | `Broadcast::connection()` |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":93,"to":97}}}}],["897",{"pageContent":"| [Illuminate\\Contracts\\Broadcasting\\Broadcaster](https://github.com/illuminate/contracts/blob/{{version}}/Broadcasting/Broadcaster.php)                 | `Broadcast::connection()` |\n| [Illuminate\\Contracts\\Broadcasting\\ShouldBroadcast](https://github.com/illuminate/contracts/blob/{{version}}/Broadcasting/ShouldBroadcast.php)         | &nbsp;                    |\n| [Illuminate\\Contracts\\Broadcasting\\ShouldBroadcastNow](https://github.com/illuminate/contracts/blob/{{version}}/Broadcasting/ShouldBroadcastNow.php)   | &nbsp;                    |\n| [Illuminate\\Contracts\\Cache\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Cache/Factory.php)                                       | `Cache`                   |\n| [Illuminate\\Contracts\\Cache\\Lock](https://github.com/illuminate/contracts/blob/{{version}}/Cache/Lock.php)                                             | &nbsp;                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":97,"to":101}}}}],["898",{"pageContent":"| [Illuminate\\Contracts\\Cache\\Lock](https://github.com/illuminate/contracts/blob/{{version}}/Cache/Lock.php)                                             | &nbsp;                    |\n| [Illuminate\\Contracts\\Cache\\LockProvider](https://github.com/illuminate/contracts/blob/{{version}}/Cache/LockProvider.php)                             | &nbsp;                    |\n| [Illuminate\\Contracts\\Cache\\Repository](https://github.com/illuminate/contracts/blob/{{version}}/Cache/Repository.php)                                 | `Cache::driver()`         |\n| [Illuminate\\Contracts\\Cache\\Store](https://github.com/illuminate/contracts/blob/{{version}}/Cache/Store.php)                                           | &nbsp;                    |\n| [Illuminate\\Contracts\\Config\\Repository](https://github.com/illuminate/contracts/blob/{{version}}/Config/Repository.php)                               | `Config`                  |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":101,"to":105}}}}],["899",{"pageContent":"| [Illuminate\\Contracts\\Config\\Repository](https://github.com/illuminate/contracts/blob/{{version}}/Config/Repository.php)                               | `Config`                  |\n| [Illuminate\\Contracts\\Console\\Application](https://github.com/illuminate/contracts/blob/{{version}}/Console/Application.php)                           | &nbsp;                    |\n| [Illuminate\\Contracts\\Console\\Kernel](https://github.com/illuminate/contracts/blob/{{version}}/Console/Kernel.php)                                     | `Artisan`                 |\n| [Illuminate\\Contracts\\Container\\Container](https://github.com/illuminate/contracts/blob/{{version}}/Container/Container.php)                           | `App`                     |\n| [Illuminate\\Contracts\\Cookie\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Cookie/Factory.php)                                     | `Cookie`                  |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":105,"to":109}}}}],["900",{"pageContent":"| [Illuminate\\Contracts\\Cookie\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Cookie/Factory.php)                                     | `Cookie`                  |\n| [Illuminate\\Contracts\\Cookie\\QueueingFactory](https://github.com/illuminate/contracts/blob/{{version}}/Cookie/QueueingFactory.php)                     | `Cookie::queue()`         |\n| [Illuminate\\Contracts\\Database\\ModelIdentifier](https://github.com/illuminate/contracts/blob/{{version}}/Database/ModelIdentifier.php)                 | &nbsp;                    |\n| [Illuminate\\Contracts\\Debug\\ExceptionHandler](https://github.com/illuminate/contracts/blob/{{version}}/Debug/ExceptionHandler.php)                     | &nbsp;                    |\n| [Illuminate\\Contracts\\Encryption\\Encrypter](https://github.com/illuminate/contracts/blob/{{version}}/Encryption/Encrypter.php)                         | `Crypt`                   |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":109,"to":113}}}}],["901",{"pageContent":"| [Illuminate\\Contracts\\Encryption\\Encrypter](https://github.com/illuminate/contracts/blob/{{version}}/Encryption/Encrypter.php)                         | `Crypt`                   |\n| [Illuminate\\Contracts\\Events\\Dispatcher](https://github.com/illuminate/contracts/blob/{{version}}/Events/Dispatcher.php)                               | `Event`                   |\n| [Illuminate\\Contracts\\Filesystem\\Cloud](https://github.com/illuminate/contracts/blob/{{version}}/Filesystem/Cloud.php)                                 | `Storage::cloud()`        |\n| [Illuminate\\Contracts\\Filesystem\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Filesystem/Factory.php)                             | `Storage`                 |\n| [Illuminate\\Contracts\\Filesystem\\Filesystem](https://github.com/illuminate/contracts/blob/{{version}}/Filesystem/Filesystem.php)                       | `Storage::disk()`         |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":113,"to":117}}}}],["902",{"pageContent":"| [Illuminate\\Contracts\\Filesystem\\Filesystem](https://github.com/illuminate/contracts/blob/{{version}}/Filesystem/Filesystem.php)                       | `Storage::disk()`         |\n| [Illuminate\\Contracts\\Foundation\\Application](https://github.com/illuminate/contracts/blob/{{version}}/Foundation/Application.php)                     | `App`                     |\n| [Illuminate\\Contracts\\Hashing\\Hasher](https://github.com/illuminate/contracts/blob/{{version}}/Hashing/Hasher.php)                                     | `Hash`                    |\n| [Illuminate\\Contracts\\Http\\Kernel](https://github.com/illuminate/contracts/blob/{{version}}/Http/Kernel.php)                                           | &nbsp;                    |\n| [Illuminate\\Contracts\\Mail\\MailQueue](https://github.com/illuminate/contracts/blob/{{version}}/Mail/MailQueue.php)                                     | `Mail::queue()`           |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":117,"to":121}}}}],["903",{"pageContent":"| [Illuminate\\Contracts\\Mail\\MailQueue](https://github.com/illuminate/contracts/blob/{{version}}/Mail/MailQueue.php)                                     | `Mail::queue()`           |\n| [Illuminate\\Contracts\\Mail\\Mailable](https://github.com/illuminate/contracts/blob/{{version}}/Mail/Mailable.php)                                       | &nbsp;                    |\n| [Illuminate\\Contracts\\Mail\\Mailer](https://github.com/illuminate/contracts/blob/{{version}}/Mail/Mailer.php)                                           | `Mail`                    |\n| [Illuminate\\Contracts\\Notifications\\Dispatcher](https://github.com/illuminate/contracts/blob/{{version}}/Notifications/Dispatcher.php)                 | `Notification`            |\n| [Illuminate\\Contracts\\Notifications\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Notifications/Factory.php)                       | `Notification`            |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":121,"to":125}}}}],["904",{"pageContent":"| [Illuminate\\Contracts\\Notifications\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Notifications/Factory.php)                       | `Notification`            |\n| [Illuminate\\Contracts\\Pagination\\LengthAwarePaginator](https://github.com/illuminate/contracts/blob/{{version}}/Pagination/LengthAwarePaginator.php)   | &nbsp;                    |\n| [Illuminate\\Contracts\\Pagination\\Paginator](https://github.com/illuminate/contracts/blob/{{version}}/Pagination/Paginator.php)                         | &nbsp;                    |\n| [Illuminate\\Contracts\\Pipeline\\Hub](https://github.com/illuminate/contracts/blob/{{version}}/Pipeline/Hub.php)                                         | &nbsp;                    |\n| [Illuminate\\Contracts\\Pipeline\\Pipeline](https://github.com/illuminate/contracts/blob/{{version}}/Pipeline/Pipeline.php)                               | `Pipeline`;                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":125,"to":129}}}}],["905",{"pageContent":"| [Illuminate\\Contracts\\Pipeline\\Pipeline](https://github.com/illuminate/contracts/blob/{{version}}/Pipeline/Pipeline.php)                               | `Pipeline`;                    |\n| [Illuminate\\Contracts\\Queue\\EntityResolver](https://github.com/illuminate/contracts/blob/{{version}}/Queue/EntityResolver.php)                         | &nbsp;                    |\n| [Illuminate\\Contracts\\Queue\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Queue/Factory.php)                                       | `Queue`                   |\n| [Illuminate\\Contracts\\Queue\\Job](https://github.com/illuminate/contracts/blob/{{version}}/Queue/Job.php)                                               | &nbsp;                    |\n| [Illuminate\\Contracts\\Queue\\Monitor](https://github.com/illuminate/contracts/blob/{{version}}/Queue/Monitor.php)                                       | `Queue`                   |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":129,"to":133}}}}],["906",{"pageContent":"| [Illuminate\\Contracts\\Queue\\Monitor](https://github.com/illuminate/contracts/blob/{{version}}/Queue/Monitor.php)                                       | `Queue`                   |\n| [Illuminate\\Contracts\\Queue\\Queue](https://github.com/illuminate/contracts/blob/{{version}}/Queue/Queue.php)                                           | `Queue::connection()`     |\n| [Illuminate\\Contracts\\Queue\\QueueableCollection](https://github.com/illuminate/contracts/blob/{{version}}/Queue/QueueableCollection.php)               | &nbsp;                    |\n| [Illuminate\\Contracts\\Queue\\QueueableEntity](https://github.com/illuminate/contracts/blob/{{version}}/Queue/QueueableEntity.php)                       | &nbsp;                    |\n| [Illuminate\\Contracts\\Queue\\ShouldQueue](https://github.com/illuminate/contracts/blob/{{version}}/Queue/ShouldQueue.php)                               | &nbsp;                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":133,"to":137}}}}],["907",{"pageContent":"| [Illuminate\\Contracts\\Queue\\ShouldQueue](https://github.com/illuminate/contracts/blob/{{version}}/Queue/ShouldQueue.php)                               | &nbsp;                    |\n| [Illuminate\\Contracts\\Redis\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Redis/Factory.php)                                       | `Redis`                   |\n| [Illuminate\\Contracts\\Routing\\BindingRegistrar](https://github.com/illuminate/contracts/blob/{{version}}/Routing/BindingRegistrar.php)                 | `Route`                   |\n| [Illuminate\\Contracts\\Routing\\Registrar](https://github.com/illuminate/contracts/blob/{{version}}/Routing/Registrar.php)                               | `Route`                   |\n| [Illuminate\\Contracts\\Routing\\ResponseFactory](https://github.com/illuminate/contracts/blob/{{version}}/Routing/ResponseFactory.php)                   | `Response`                |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":137,"to":141}}}}],["908",{"pageContent":"| [Illuminate\\Contracts\\Routing\\ResponseFactory](https://github.com/illuminate/contracts/blob/{{version}}/Routing/ResponseFactory.php)                   | `Response`                |\n| [Illuminate\\Contracts\\Routing\\UrlGenerator](https://github.com/illuminate/contracts/blob/{{version}}/Routing/UrlGenerator.php)                         | `URL`                     |\n| [Illuminate\\Contracts\\Routing\\UrlRoutable](https://github.com/illuminate/contracts/blob/{{version}}/Routing/UrlRoutable.php)                           | &nbsp;                    |\n| [Illuminate\\Contracts\\Session\\Session](https://github.com/illuminate/contracts/blob/{{version}}/Session/Session.php)                                   | `Session::driver()`       |\n| [Illuminate\\Contracts\\Support\\Arrayable](https://github.com/illuminate/contracts/blob/{{version}}/Support/Arrayable.php)                               | &nbsp;                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":141,"to":145}}}}],["909",{"pageContent":"| [Illuminate\\Contracts\\Support\\Arrayable](https://github.com/illuminate/contracts/blob/{{version}}/Support/Arrayable.php)                               | &nbsp;                    |\n| [Illuminate\\Contracts\\Support\\Htmlable](https://github.com/illuminate/contracts/blob/{{version}}/Support/Htmlable.php)                                 | &nbsp;                    |\n| [Illuminate\\Contracts\\Support\\Jsonable](https://github.com/illuminate/contracts/blob/{{version}}/Support/Jsonable.php)                                 | &nbsp;                    |\n| [Illuminate\\Contracts\\Support\\MessageBag](https://github.com/illuminate/contracts/blob/{{version}}/Support/MessageBag.php)                             | &nbsp;                    |\n| [Illuminate\\Contracts\\Support\\MessageProvider](https://github.com/illuminate/contracts/blob/{{version}}/Support/MessageProvider.php)                   | &nbsp;                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":145,"to":149}}}}],["910",{"pageContent":"| [Illuminate\\Contracts\\Support\\MessageProvider](https://github.com/illuminate/contracts/blob/{{version}}/Support/MessageProvider.php)                   | &nbsp;                    |\n| [Illuminate\\Contracts\\Support\\Renderable](https://github.com/illuminate/contracts/blob/{{version}}/Support/Renderable.php)                             | &nbsp;                    |\n| [Illuminate\\Contracts\\Support\\Responsable](https://github.com/illuminate/contracts/blob/{{version}}/Support/Responsable.php)                           | &nbsp;                    |\n| [Illuminate\\Contracts\\Translation\\Loader](https://github.com/illuminate/contracts/blob/{{version}}/Translation/Loader.php)                             | &nbsp;                    |\n| [Illuminate\\Contracts\\Translation\\Translator](https://github.com/illuminate/contracts/blob/{{version}}/Translation/Translator.php)                     | `Lang`                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":149,"to":153}}}}],["911",{"pageContent":"| [Illuminate\\Contracts\\Translation\\Translator](https://github.com/illuminate/contracts/blob/{{version}}/Translation/Translator.php)                     | `Lang`                    |\n| [Illuminate\\Contracts\\Validation\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/Validation/Factory.php)                             | `Validator`               |\n| [Illuminate\\Contracts\\Validation\\ImplicitRule](https://github.com/illuminate/contracts/blob/{{version}}/Validation/ImplicitRule.php)                   | &nbsp;                    |\n| [Illuminate\\Contracts\\Validation\\Rule](https://github.com/illuminate/contracts/blob/{{version}}/Validation/Rule.php)                                   | &nbsp;                    |\n| [Illuminate\\Contracts\\Validation\\ValidatesWhenResolved](https://github.com/illuminate/contracts/blob/{{version}}/Validation/ValidatesWhenResolved.php) | &nbsp;                    |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":153,"to":157}}}}],["912",{"pageContent":"| [Illuminate\\Contracts\\Validation\\ValidatesWhenResolved](https://github.com/illuminate/contracts/blob/{{version}}/Validation/ValidatesWhenResolved.php) | &nbsp;                    |\n| [Illuminate\\Contracts\\Validation\\Validator](https://github.com/illuminate/contracts/blob/{{version}}/Validation/Validator.php)                         | `Validator::make()`       |\n| [Illuminate\\Contracts\\View\\Engine](https://github.com/illuminate/contracts/blob/{{version}}/View/Engine.php)                                           | &nbsp;                    |\n| [Illuminate\\Contracts\\View\\Factory](https://github.com/illuminate/contracts/blob/{{version}}/View/Factory.php)                                         | `View`                    |\n| [Illuminate\\Contracts\\View\\View](https://github.com/illuminate/contracts/blob/{{version}}/View/View.php)                                               | `View::make()`            |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contracts.md","loc":{"lines":{"from":157,"to":161}}}}],["913",{"pageContent":"# Contribution Guide\n\n- [Bug Reports](#bug-reports)\n- [Support Questions](#support-questions)\n- [Core Development Discussion](#core-development-discussion)\n- [Which Branch?](#which-branch)\n- [Compiled Assets](#compiled-assets)\n- [Security Vulnerabilities](#security-vulnerabilities)\n- [Coding Style](#coding-style)\n    - [PHPDoc](#phpdoc)\n    - [StyleCI](#styleci)\n- [Code of Conduct](#code-of-conduct)\n\n<a name=\"bug-reports\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":1,"to":14}}}}],["914",{"pageContent":"Bug Reports\n\nTo encourage active collaboration, Laravel strongly encourages pull requests, not just bug reports. Pull requests will only be reviewed when marked as \"ready for review\" (not in the \"draft\" state) and all tests for new features are passing. Lingering, non-active pull requests left in the \"draft\" state will be closed after a few days.\n\nHowever, if you file a bug report, your issue should contain a title and a clear description of the issue. You should also include as much relevant information as possible and a code sample that demonstrates the issue. The goal of a bug report is to make it easy for yourself - and others - to replicate the bug and develop a fix.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":15,"to":19}}}}],["915",{"pageContent":"Remember, bug reports are created in the hope that others with the same problem will be able to collaborate with you on solving it. Do not expect that the bug report will automatically see any activity or that others will jump to fix it. Creating a bug report serves to help yourself and others start on the path of fixing the problem. If you want to chip in, you can help out by fixing [any bugs listed in our issue trackers](https://github.com/issues?q=is%3Aopen+is%3Aissue+label%3Abug+user%3Alaravel). You must be authenticated with GitHub to view all of Laravel's issues.\n\nIf you notice improper DocBlock, PHPStan, or IDE warnings while using Laravel, do not create a GitHub issue. Instead, please submit a pull request to fix the problem.\n\nThe Laravel source code is managed on GitHub, and there are repositories for each of the Laravel projects:\n\n<div class=\"content-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":21,"to":27}}}}],["916",{"pageContent":"- [Laravel Application](https://github.com/laravel/laravel)\n- [Laravel Art](https://github.com/laravel/art)\n- [Laravel Documentation](https://github.com/laravel/docs)\n- [Laravel Dusk](https://github.com/laravel/dusk)\n- [Laravel Cashier Stripe](https://github.com/laravel/cashier)\n- [Laravel Cashier Paddle](https://github.com/laravel/cashier-paddle)\n- [Laravel Echo](https://github.com/laravel/echo)\n- [Laravel Envoy](https://github.com/laravel/envoy)\n- [Laravel Folio](https://github.com/laravel/folio)\n- [Laravel Framework](https://github.com/laravel/framework)\n- [Laravel Homestead](https://github.com/laravel/homestead)\n- [Laravel Homestead Build Scripts](https://github.com/laravel/settler)\n- [Laravel Horizon](https://github.com/laravel/horizon)\n- [Laravel Jetstream](https://github.com/laravel/jetstream)\n- [Laravel Passport](https://github.com/laravel/passport)\n- [Laravel Pennant](https://github.com/laravel/pennant)\n- [Laravel Pint](https://github.com/laravel/pint)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":29,"to":45}}}}],["917",{"pageContent":"- [Laravel Passport](https://github.com/laravel/passport)\n- [Laravel Pennant](https://github.com/laravel/pennant)\n- [Laravel Pint](https://github.com/laravel/pint)\n- [Laravel Prompts](https://github.com/laravel/prompts)\n- [Laravel Sail](https://github.com/laravel/sail)\n- [Laravel Sanctum](https://github.com/laravel/sanctum)\n- [Laravel Scout](https://github.com/laravel/scout)\n- [Laravel Socialite](https://github.com/laravel/socialite)\n- [Laravel Telescope](https://github.com/laravel/telescope)\n- [Laravel Website](https://github.com/laravel/laravel.com-next)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":45,"to":54}}}}],["918",{"pageContent":"</div>\n\n<a name=\"support-questions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":56,"to":58}}}}],["919",{"pageContent":"Support Questions\n\nLaravel's GitHub issue trackers are not intended to provide Laravel help or support. Instead, use one of the following channels:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- [GitHub Discussions](https://github.com/laravel/framework/discussions)\n- [Laracasts Forums](https://laracasts.com/discuss)\n- [Laravel.io Forums](https://laravel.io/forum)\n- [StackOverflow](https://stackoverflow.com/questions/tagged/laravel)\n- [Discord](https://discord.gg/laravel)\n- [Larachat](https://larachat.co)\n- [IRC](https://web.libera.chat/?nick=artisan&channels=#laravel)\n\n</div>\n\n<a name=\"core-development-discussion\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":59,"to":75}}}}],["920",{"pageContent":"Core Development Discussion\n\nYou may propose new features or improvements of existing Laravel behavior in the Laravel framework repository's [GitHub discussion board](https://github.com/laravel/framework/discussions). If you propose a new feature, please be willing to implement at least some of the code that would be needed to complete the feature.\n\nInformal discussion regarding bugs, new features, and implementation of existing features takes place in the `#internals` channel of the [Laravel Discord server](https://discord.gg/laravel). Taylor Otwell, the maintainer of Laravel, is typically present in the channel on weekdays from 8am-5pm (UTC-06:00 or America/Chicago), and sporadically present in the channel at other times.\n\n<a name=\"which-branch\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":76,"to":82}}}}],["921",{"pageContent":"Which Branch?\n\n**All** bug fixes should be sent to the latest version that supports bug fixes (currently `10.x`). Bug fixes should **never** be sent to the `master` branch unless they fix features that exist only in the upcoming release.\n\n**Minor** features that are **fully backward compatible** with the current release may be sent to the latest stable branch (currently `10.x`).\n\n**Major** new features or features with breaking changes should always be sent to the `master` branch, which contains the upcoming release.\n\n<a name=\"compiled-assets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":83,"to":91}}}}],["922",{"pageContent":"Compiled Assets\n\nIf you are submitting a change that will affect a compiled file, such as most of the files in `resources/css` or `resources/js` of the `laravel/laravel` repository, do not commit the compiled files. Due to their large size, they cannot realistically be reviewed by a maintainer. This could be exploited as a way to inject malicious code into Laravel. In order to defensively prevent this, all compiled files will be generated and committed by Laravel maintainers.\n\n<a name=\"security-vulnerabilities\"></a>\n## Security Vulnerabilities\n\nIf you discover a security vulnerability within Laravel, please send an email to Taylor Otwell at <a href=\"mailto:taylor@laravel.com\">taylor@laravel.com</a>. All security vulnerabilities will be promptly addressed.\n\n<a name=\"coding-style\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":92,"to":101}}}}],["923",{"pageContent":"Coding Style\n\nLaravel follows the [PSR-2](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md) coding standard and the [PSR-4](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md) autoloading standard.\n\n<a name=\"phpdoc\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":102,"to":106}}}}],["924",{"pageContent":"PHPDoc\n\nBelow is an example of a valid Laravel documentation block. Note that the `@param` attribute is followed by two spaces, the argument type, two more spaces, and finally the variable name:\n\n    /**\n     * Register a binding with the container.\n     *\n     * @param  string|array  $abstract\n     * @param  \\Closure|string|null  $concrete\n     * @param  bool  $shared\n     * @return void\n     *\n     * @throws \\Exception\n     */\n    public function bind($abstract, $concrete = null, $shared = false)\n    {\n        // ...\n    }\n\nWhen the `@param` or `@return` attributes are redundant due to the use of native types, they can be removed:\n\n    /**\n     * Execute the job.\n     */\n    public function handle(AudioProcessor $processor): void\n    {\n        //\n    }\n\nHowever, when the native type is generic, please specify the generic type through the use of the `@param` or `@return` attributes:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":107,"to":136}}}}],["925",{"pageContent":"However, when the native type is generic, please specify the generic type through the use of the `@param` or `@return` attributes:\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [\n            Attachment::fromStorage('/path/to/file'),\n        ];\n    }\n\n<a name=\"styleci\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":136,"to":150}}}}],["926",{"pageContent":"StyleCI\n\nDon't worry if your code styling isn't perfect! [StyleCI](https://styleci.io/) will automatically merge any style fixes into the Laravel repository after pull requests are merged. This allows us to focus on the content of the contribution and not the code style.\n\n<a name=\"code-of-conduct\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":151,"to":155}}}}],["927",{"pageContent":"Code of Conduct\n\nThe Laravel code of conduct is derived from the Ruby code of conduct. Any violations of the code of conduct may be reported to Taylor Otwell (taylor@laravel.com):\n\n<div class=\"content-list\" markdown=\"1\">\n\n- Participants will be tolerant of opposing views.\n- Participants must ensure that their language and actions are free of personal attacks and disparaging personal remarks.\n- When interpreting the words and actions of others, participants should always assume good intentions.\n- Behavior that can be reasonably considered harassment will not be tolerated.\n\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/contributions.md","loc":{"lines":{"from":156,"to":167}}}}],["928",{"pageContent":"# Controllers\n\n- [Introduction](#introduction)\n- [Writing Controllers](#writing-controllers)\n    - [Basic Controllers](#basic-controllers)\n    - [Single Action Controllers](#single-action-controllers)\n- [Controller Middleware](#controller-middleware)\n- [Resource Controllers](#resource-controllers)\n    - [Partial Resource Routes](#restful-partial-resource-routes)\n    - [Nested Resources](#restful-nested-resources)\n    - [Naming Resource Routes](#restful-naming-resource-routes)\n    - [Naming Resource Route Parameters](#restful-naming-resource-route-parameters)\n    - [Scoping Resource Routes](#restful-scoping-resource-routes)\n    - [Localizing Resource URIs](#restful-localizing-resource-uris)\n    - [Supplementing Resource Controllers](#restful-supplementing-resource-controllers)\n    - [Singleton Resource Controllers](#singleton-resource-controllers)\n- [Dependency Injection & Controllers](#dependency-injection-and-controllers)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":1,"to":19}}}}],["929",{"pageContent":"Introduction\n\nInstead of defining all of your request handling logic as closures in your route files, you may wish to organize this behavior using \"controller\" classes. Controllers can group related request handling logic into a single class. For example, a `UserController` class might handle all incoming requests related to users, including showing, creating, updating, and deleting users. By default, controllers are stored in the `app/Http/Controllers` directory.\n\n<a name=\"writing-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":20,"to":24}}}}],["930",{"pageContent":"Writing Controllers\n\n<a name=\"basic-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":25,"to":27}}}}],["931",{"pageContent":"Basic Controllers\n\nTo quickly generate a new controller, you may run the `make:controller` Artisan command. By default, all of the controllers for your application are stored in the `app/Http/Controllers` directory:\n\n```shell\nphp artisan make:controller UserController","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":28,"to":33}}}}],["932",{"pageContent":"Let's take a look at an example of a basic controller. A controller may have any number of public methods which will respond to incoming HTTP requests:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n    \n    use App\\Models\\User;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show the profile for a given user.\n         */\n        public function show(string $id): View\n        {\n            return view('user.profile', [\n                'user' => User::findOrFail($id)\n            ]);\n        }\n    }\n\nOnce you have written a controller class and method, you may define a route to the controller method like so:\n\n    use App\\Http\\Controllers\\UserController;\n\n    Route::get('/user/{id}', [UserController::class, 'show']);\n\nWhen an incoming request matches the specified route URI, the `show` method on the `App\\Http\\Controllers\\UserController` class will be invoked and the route parameters will be passed to the method.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":36,"to":64}}}}],["933",{"pageContent":"When an incoming request matches the specified route URI, the `show` method on the `App\\Http\\Controllers\\UserController` class will be invoked and the route parameters will be passed to the method.\n\n> **Note**  \n> Controllers are not **required** to extend a base class. However, you will not have access to convenient features such as the `middleware` and `authorize` methods.\n\n<a name=\"single-action-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":64,"to":69}}}}],["934",{"pageContent":"Single Action Controllers\n\nIf a controller action is particularly complex, you might find it convenient to dedicate an entire controller class to that single action. To accomplish this, you may define a single `__invoke` method within the controller:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    class ProvisionServer extends Controller\n    {\n        /**\n         * Provision a new web server.\n         */\n        public function __invoke()\n        {\n            // ...\n        }\n    }\n\nWhen registering routes for single action controllers, you do not need to specify a controller method. Instead, you may simply pass the name of the controller to the router:\n\n    use App\\Http\\Controllers\\ProvisionServer;\n\n    Route::post('/server', ProvisionServer::class);\n\nYou may generate an invokable controller by using the `--invokable` option of the `make:controller` Artisan command:\n\n```shell\nphp artisan make:controller ProvisionServer --invokable","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":70,"to":98}}}}],["935",{"pageContent":"> **Note**  \n> Controller stubs may be customized using [stub publishing](/docs/{{version}}/artisan#stub-customization).\n\n<a name=\"controller-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":101,"to":104}}}}],["936",{"pageContent":"Controller Middleware\n\n[Middleware](/docs/{{version}}/middleware) may be assigned to the controller's routes in your route files:\n\n    Route::get('profile', [UserController::class, 'show'])->middleware('auth');\n\nOr, you may find it convenient to specify middleware within your controller's constructor. Using the `middleware` method within your controller's constructor, you can assign middleware to the controller's actions:\n\n    class UserController extends Controller\n    {\n        /**\n         * Instantiate a new controller instance.\n         */\n        public function __construct()\n        {\n            $this->middleware('auth');\n            $this->middleware('log')->only('index');\n            $this->middleware('subscribed')->except('store');\n        }\n    }\n\nControllers also allow you to register middleware using a closure. This provides a convenient way to define an inline middleware for a single controller without defining an entire middleware class:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":105,"to":126}}}}],["937",{"pageContent":"Controllers also allow you to register middleware using a closure. This provides a convenient way to define an inline middleware for a single controller without defining an entire middleware class:\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n\n    $this->middleware(function (Request $request, Closure $next) {\n        return $next($request);\n    });\n\n<a name=\"resource-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":126,"to":135}}}}],["938",{"pageContent":"Resource Controllers\n\nIf you think of each Eloquent model in your application as a \"resource\", it is typical to perform the same sets of actions against each resource in your application. For example, imagine your application contains a `Photo` model and a `Movie` model. It is likely that users can create, read, update, or delete these resources.\n\nBecause of this common use case, Laravel resource routing assigns the typical create, read, update, and delete (\"CRUD\") routes to a controller with a single line of code. To get started, we can use the `make:controller` Artisan command's `--resource` option to quickly create a controller to handle these actions:\n\n```shell\nphp artisan make:controller PhotoController --resource","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":136,"to":143}}}}],["939",{"pageContent":"This command will generate a controller at `app/Http/Controllers/PhotoController.php`. The controller will contain a method for each of the available resource operations. Next, you may register a resource route that points to the controller:\n\n    use App\\Http\\Controllers\\PhotoController;\n\n    Route::resource('photos', PhotoController::class);\n\nThis single route declaration creates multiple routes to handle a variety of actions on the resource. The generated controller will already have methods stubbed for each of these actions. Remember, you can always get a quick overview of your application's routes by running the `route:list` Artisan command.\n\nYou may even register many resource controllers at once by passing an array to the `resources` method:\n\n    Route::resources([\n        'photos' => PhotoController::class,\n        'posts' => PostController::class,\n    ]);\n\n<a name=\"actions-handled-by-resource-controller\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":146,"to":161}}}}],["940",{"pageContent":"Actions Handled By Resource Controller\n\nVerb      | URI                    | Action       | Route Name\n----------|------------------------|--------------|---------------------\nGET       | `/photos`              | index        | photos.index\nGET       | `/photos/create`       | create       | photos.create\nPOST      | `/photos`              | store        | photos.store\nGET       | `/photos/{photo}`      | show         | photos.show\nGET       | `/photos/{photo}/edit` | edit         | photos.edit\nPUT/PATCH | `/photos/{photo}`      | update       | photos.update\nDELETE    | `/photos/{photo}`      | destroy      | photos.destroy\n\n<a name=\"customizing-missing-model-behavior\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":162,"to":174}}}}],["941",{"pageContent":"Customizing Missing Model Behavior\n\nTypically, a 404 HTTP response will be generated if an implicitly bound resource model is not found. However, you may customize this behavior by calling the `missing` method when defining your resource route. The `missing` method accepts a closure that will be invoked if an implicitly bound model can not be found for any of the resource's routes:\n\n    use App\\Http\\Controllers\\PhotoController;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Redirect;\n\n    Route::resource('photos', PhotoController::class)\n            ->missing(function (Request $request) {\n                return Redirect::route('photos.index');\n            });\n\n<a name=\"soft-deleted-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":175,"to":188}}}}],["942",{"pageContent":"Soft Deleted Models\n\nTypically, implicit model binding will not retrieve models that have been [soft deleted](/docs/{{version}}/eloquent#soft-deleting), and will instead return a 404 HTTP response. However, you can instruct the framework to allow soft deleted models by invoking the `withTrashed` method when defining your resource route:\n\n    use App\\Http\\Controllers\\PhotoController;\n\n    Route::resource('photos', PhotoController::class)->withTrashed();\n\nCalling `withTrashed` with no arguments will allow soft deleted models for the `show`, `edit`, and `update` resource routes. You may specify a subset of these routes by passing an array to the `withTrashed` method:\n\n    Route::resource('photos', PhotoController::class)->withTrashed(['show']);\n\n<a name=\"specifying-the-resource-model\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":189,"to":201}}}}],["943",{"pageContent":"Specifying The Resource Model\n\nIf you are using [route model binding](/docs/{{version}}/routing#route-model-binding) and would like the resource controller's methods to type-hint a model instance, you may use the `--model` option when generating the controller:\n\n```shell\nphp artisan make:controller PhotoController --model=Photo --resource\n```\n\n<a name=\"generating-form-requests\"></a>\n#### Generating Form Requests\n\nYou may provide the `--requests` option when generating a resource controller to instruct Artisan to generate [form request classes](/docs/{{version}}/validation#form-request-validation) for the controller's storage and update methods:\n\n```shell\nphp artisan make:controller PhotoController --model=Photo --resource --requests\n```\n\n<a name=\"restful-partial-resource-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":202,"to":219}}}}],["944",{"pageContent":"Partial Resource Routes\n\nWhen declaring a resource route, you may specify a subset of actions the controller should handle instead of the full set of default actions:\n\n    use App\\Http\\Controllers\\PhotoController;\n\n    Route::resource('photos', PhotoController::class)->only([\n        'index', 'show'\n    ]);\n\n    Route::resource('photos', PhotoController::class)->except([\n        'create', 'store', 'update', 'destroy'\n    ]);\n\n<a name=\"api-resource-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":220,"to":234}}}}],["945",{"pageContent":"API Resource Routes\n\nWhen declaring resource routes that will be consumed by APIs, you will commonly want to exclude routes that present HTML templates such as `create` and `edit`. For convenience, you may use the `apiResource` method to automatically exclude these two routes:\n\n    use App\\Http\\Controllers\\PhotoController;\n\n    Route::apiResource('photos', PhotoController::class);\n\nYou may register many API resource controllers at once by passing an array to the `apiResources` method:\n\n    use App\\Http\\Controllers\\PhotoController;\n    use App\\Http\\Controllers\\PostController;\n\n    Route::apiResources([\n        'photos' => PhotoController::class,\n        'posts' => PostController::class,\n    ]);\n\nTo quickly generate an API resource controller that does not include the `create` or `edit` methods, use the `--api` switch when executing the `make:controller` command:\n\n```shell\nphp artisan make:controller PhotoController --api\n```\n\n<a name=\"restful-nested-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":235,"to":259}}}}],["946",{"pageContent":"Nested Resources\n\nSometimes you may need to define routes to a nested resource. For example, a photo resource may have multiple comments that may be attached to the photo. To nest the resource controllers, you may use \"dot\" notation in your route declaration:\n\n    use App\\Http\\Controllers\\PhotoCommentController;\n\n    Route::resource('photos.comments', PhotoCommentController::class);\n\nThis route will register a nested resource that may be accessed with URIs like the following:\n\n    /photos/{photo}/comments/{comment}\n\n<a name=\"scoping-nested-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":260,"to":272}}}}],["947",{"pageContent":"Scoping Nested Resources\n\nLaravel's [implicit model binding](/docs/{{version}}/routing#implicit-model-binding-scoping) feature can automatically scope nested bindings such that the resolved child model is confirmed to belong to the parent model. By using the `scoped` method when defining your nested resource, you may enable automatic scoping as well as instruct Laravel which field the child resource should be retrieved by. For more information on how to accomplish this, please see the documentation on [scoping resource routes](#restful-scoping-resource-routes).\n\n<a name=\"shallow-nesting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":273,"to":277}}}}],["948",{"pageContent":"Shallow Nesting\n\nOften, it is not entirely necessary to have both the parent and the child IDs within a URI since the child ID is already a unique identifier. When using unique identifiers such as auto-incrementing primary keys to identify your models in URI segments, you may choose to use \"shallow nesting\":\n\n    use App\\Http\\Controllers\\CommentController;\n\n    Route::resource('photos.comments', CommentController::class)->shallow();\n\nThis route definition will define the following routes:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":278,"to":286}}}}],["949",{"pageContent":"use App\\Http\\Controllers\\CommentController;\n\n    Route::resource('photos.comments', CommentController::class)->shallow();\n\nThis route definition will define the following routes:\n\nVerb      | URI                               | Action       | Route Name\n----------|-----------------------------------|--------------|---------------------\nGET       | `/photos/{photo}/comments`        | index        | photos.comments.index\nGET       | `/photos/{photo}/comments/create` | create       | photos.comments.create\nPOST      | `/photos/{photo}/comments`        | store        | photos.comments.store\nGET       | `/comments/{comment}`             | show         | comments.show\nGET       | `/comments/{comment}/edit`        | edit         | comments.edit\nPUT/PATCH | `/comments/{comment}`             | update       | comments.update\nDELETE    | `/comments/{comment}`             | destroy      | comments.destroy\n\n<a name=\"restful-naming-resource-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":286,"to":302}}}}],["950",{"pageContent":"Naming Resource Routes\n\nBy default, all resource controller actions have a route name; however, you can override these names by passing a `names` array with your desired route names:\n\n    use App\\Http\\Controllers\\PhotoController;\n\n    Route::resource('photos', PhotoController::class)->names([\n        'create' => 'photos.build'\n    ]);\n\n<a name=\"restful-naming-resource-route-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":303,"to":313}}}}],["951",{"pageContent":"Naming Resource Route Parameters\n\nBy default, `Route::resource` will create the route parameters for your resource routes based on the \"singularized\" version of the resource name. You can easily override this on a per resource basis using the `parameters` method. The array passed into the `parameters` method should be an associative array of resource names and parameter names:\n\n    use App\\Http\\Controllers\\AdminUserController;\n\n    Route::resource('users', AdminUserController::class)->parameters([\n        'users' => 'admin_user'\n    ]);\n\n The example above generates the following URI for the resource's `show` route:\n\n    /users/{admin_user}\n\n<a name=\"restful-scoping-resource-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":314,"to":328}}}}],["952",{"pageContent":"Scoping Resource Routes\n\nLaravel's [scoped implicit model binding](/docs/{{version}}/routing#implicit-model-binding-scoping) feature can automatically scope nested bindings such that the resolved child model is confirmed to belong to the parent model. By using the `scoped` method when defining your nested resource, you may enable automatic scoping as well as instruct Laravel which field the child resource should be retrieved by:\n\n    use App\\Http\\Controllers\\PhotoCommentController;\n\n    Route::resource('photos.comments', PhotoCommentController::class)->scoped([\n        'comment' => 'slug',\n    ]);\n\nThis route will register a scoped nested resource that may be accessed with URIs like the following:\n\n    /photos/{photo}/comments/{comment:slug}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":329,"to":341}}}}],["953",{"pageContent":"This route will register a scoped nested resource that may be accessed with URIs like the following:\n\n    /photos/{photo}/comments/{comment:slug}\n\nWhen using a custom keyed implicit binding as a nested route parameter, Laravel will automatically scope the query to retrieve the nested model by its parent using conventions to guess the relationship name on the parent. In this case, it will be assumed that the `Photo` model has a relationship named `comments` (the plural of the route parameter name) which can be used to retrieve the `Comment` model.\n\n<a name=\"restful-localizing-resource-uris\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":341,"to":347}}}}],["954",{"pageContent":"Localizing Resource URIs\n\nBy default, `Route::resource` will create resource URIs using English verbs and plural rules. If you need to localize the `create` and `edit` action verbs, you may use the `Route::resourceVerbs` method. This may be done at the beginning of the `boot` method within your application's `App\\Providers\\RouteServiceProvider`:\n\n    /**\n     * Define your route model bindings, pattern filters, etc.\n     */\n    public function boot(): void\n    {\n        Route::resourceVerbs([\n            'create' => 'crear',\n            'edit' => 'editar',\n        ]);\n\n        // ...\n    }\n\nLaravel's pluralizer supports [several different languages which you may configure based on your needs](/docs/{{version}}/localization#pluralization-language). Once the verbs and pluralization language have been customized, a resource route registration such as `Route::resource('publicacion', PublicacionController::class)` will produce the following URIs:\n\n    /publicacion/crear","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":348,"to":367}}}}],["955",{"pageContent":"/publicacion/crear\n\n    /publicacion/{publicaciones}/editar\n\n<a name=\"restful-supplementing-resource-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":367,"to":371}}}}],["956",{"pageContent":"Supplementing Resource Controllers\n\nIf you need to add additional routes to a resource controller beyond the default set of resource routes, you should define those routes before your call to the `Route::resource` method; otherwise, the routes defined by the `resource` method may unintentionally take precedence over your supplemental routes:\n\n    use App\\Http\\Controller\\PhotoController;\n\n    Route::get('/photos/popular', [PhotoController::class, 'popular']);\n    Route::resource('photos', PhotoController::class);\n\n> **Note**  \n> Remember to keep your controllers focused. If you find yourself routinely needing methods outside of the typical set of resource actions, consider splitting your controller into two, smaller controllers.\n\n<a name=\"singleton-resource-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":372,"to":384}}}}],["957",{"pageContent":"Singleton Resource Controllers\n\nSometimes, your application will have resources that may only have a single instance. For example, a user's \"profile\" can be edited or updated, but a user may not have more than one \"profile\". Likewise, an image may have a single \"thumbnail\". These resources are called \"singleton resources\", meaning one and only one instance of the resource may exist. In these scenarios, you may register a \"singleton\" resource controller:\n\n```php\nuse App\\Http\\Controllers\\ProfileController;\nuse Illuminate\\Support\\Facades\\Route;\n\nRoute::singleton('profile', ProfileController::class);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":385,"to":393}}}}],["958",{"pageContent":"The singleton resource definition above will register the following routes. As you can see, \"creation\" routes are not registered for singleton resources, and the registered routes do not accept an identifier since only one instance of the resource may exist:\n\nVerb      | URI                               | Action       | Route Name\n----------|-----------------------------------|--------------|---------------------\nGET       | `/profile`                        | show         | profile.show\nGET       | `/profile/edit`                   | edit         | profile.edit\nPUT/PATCH | `/profile`                        | update       | profile.update\n\nSingleton resources may also be nested within a standard resource:\n\n```php\nRoute::singleton('photos.thumbnail', ThumbnailController::class);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":396,"to":407}}}}],["959",{"pageContent":"In this example, the `photos` resource would receive all of the [standard resource routes](#actions-handled-by-resource-controller); however, the `thumbnail` resource would be a singleton resource with the following routes:\n\n| Verb      | URI                              | Action  | Route Name               |\n|-----------|----------------------------------|---------|--------------------------|\n| GET       | `/photos/{photo}/thumbnail`      | show    | photos.thumbnail.show    |\n| GET       | `/photos/{photo}/thumbnail/edit` | edit    | photos.thumbnail.edit    |\n| PUT/PATCH | `/photos/{photo}/thumbnail`      | update  | photos.thumbnail.update  |\n\n<a name=\"creatable-singleton-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":410,"to":418}}}}],["960",{"pageContent":"Creatable Singleton Resources\n\nOccasionally, you may want to define creation and storage routes for a singleton resource. To accomplish this, you may invoke the `creatable` method when registering the singleton resource route:\n\n```php\nRoute::singleton('photos.thumbnail', ThumbnailController::class)->creatable();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":419,"to":424}}}}],["961",{"pageContent":"In this example, the following routes will be registered. As you can see, a `DELETE` route will also be registered for creatable singleton resources:\n\n| Verb      | URI                                | Action  | Route Name               |\n|-----------|------------------------------------|---------|--------------------------|\n| GET       | `/photos/{photo}/thumbnail/create` | create  | photos.thumbnail.create  |\n| POST      | `/photos/{photo}/thumbnail`        | store   | photos.thumbnail.store   |\n| GET       | `/photos/{photo}/thumbnail`        | show    | photos.thumbnail.show    |\n| GET       | `/photos/{photo}/thumbnail/edit`   | edit    | photos.thumbnail.edit    |\n| PUT/PATCH | `/photos/{photo}/thumbnail`        | update  | photos.thumbnail.update  |\n| DELETE    | `/photos/{photo}/thumbnail`        | destroy | photos.thumbnail.destroy |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":427,"to":436}}}}],["962",{"pageContent":"If you would like Laravel to register the `DELETE` route for a singleton resource but not register the creation or storage routes, you may utilize the `destroyable` method:\n\n```php\nRoute::singleton(...)->destroyable();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":438,"to":441}}}}],["963",{"pageContent":"<a name=\"api-singleton-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":444,"to":444}}}}],["964",{"pageContent":"API Singleton Resources\n\nThe `apiSingleton` method may be used to register a singleton resource that will be manipulated via an API, thus rendering the `create` and `edit` routes unnecessary:\n\n```php\nRoute::apiSingleton('profile', ProfileController::class);\n```\n\nOf course, API singleton resources may also be `creatable`, which will register `store` and `destroy` routes for the resource:\n\n```php\nRoute::apiSingleton('photos.thumbnail', ProfileController::class)->creatable();\n```\n\n<a name=\"dependency-injection-and-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":445,"to":459}}}}],["965",{"pageContent":"Dependency Injection & Controllers\n\n<a name=\"constructor-injection\"></a>\n#### Constructor Injection\n\nThe Laravel [service container](/docs/{{version}}/container) is used to resolve all Laravel controllers. As a result, you are able to type-hint any dependencies your controller may need in its constructor. The declared dependencies will automatically be resolved and injected into the controller instance:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Repositories\\UserRepository;\n\n    class UserController extends Controller\n    {\n        /**\n         * Create a new controller instance.\n         */\n        public function __construct(\n            protected UserRepository $users,\n        ) {}\n    }\n\n<a name=\"method-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":460,"to":483}}}}],["966",{"pageContent":"Method Injection\n\nIn addition to constructor injection, you may also type-hint dependencies on your controller's methods. A common use-case for method injection is injecting the `Illuminate\\Http\\Request` instance into your controller methods:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class UserController extends Controller\n    {\n        /**\n         * Store a new user.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $name = $request->name;\n\n            // Store the user...\n\n            return redirect('/users');\n        }\n    }\n\nIf your controller method is also expecting input from a route parameter, list your route arguments after your other dependencies. For example, if your route is defined like so:\n\n    use App\\Http\\Controllers\\UserController;\n\n    Route::put('/user/{id}', [UserController::class, 'update']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":484,"to":514}}}}],["967",{"pageContent":"use App\\Http\\Controllers\\UserController;\n\n    Route::put('/user/{id}', [UserController::class, 'update']);\n\nYou may still type-hint the `Illuminate\\Http\\Request` and access your `id` parameter by defining your controller method as follows:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class UserController extends Controller\n    {\n        /**\n         * Update the given user.\n         */\n        public function update(Request $request, string $id): RedirectResponse\n        {\n            // Update the user...\n\n            return redirect('/users');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/controllers.md","loc":{"lines":{"from":514,"to":538}}}}],["968",{"pageContent":"# CSRF Protection\n\n- [Introduction](#csrf-introduction)\n- [Preventing CSRF Requests](#preventing-csrf-requests)\n    - [Excluding URIs](#csrf-excluding-uris)\n- [X-CSRF-Token](#csrf-x-csrf-token)\n- [X-XSRF-Token](#csrf-x-xsrf-token)\n\n<a name=\"csrf-introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":1,"to":9}}}}],["969",{"pageContent":"Introduction\n\nCross-site request forgeries are a type of malicious exploit whereby unauthorized commands are performed on behalf of an authenticated user. Thankfully, Laravel makes it easy to protect your application from [cross-site request forgery](https://en.wikipedia.org/wiki/Cross-site_request_forgery) (CSRF) attacks.\n\n<a name=\"csrf-explanation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":10,"to":14}}}}],["970",{"pageContent":"An Explanation Of The Vulnerability\n\nIn case you're not familiar with cross-site request forgeries, let's discuss an example of how this vulnerability can be exploited. Imagine your application has a `/user/email` route that accepts a `POST` request to change the authenticated user's email address. Most likely, this route expects an `email` input field to contain the email address the user would like to begin using.\n\nWithout CSRF protection, a malicious website could create an HTML form that points to your application's `/user/email` route and submits the malicious user's own email address:\n\n```blade\n<form action=\"https://your-application.com/user/email\" method=\"POST\">\n    <input type=\"email\" value=\"malicious-email@example.com\">\n</form>\n\n<script>\n    document.forms[0].submit();\n</script>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":15,"to":28}}}}],["971",{"pageContent":"If the malicious website automatically submits the form when the page is loaded, the malicious user only needs to lure an unsuspecting user of your application to visit their website and their email address will be changed in your application.\n\n To prevent this vulnerability, we need to inspect every incoming `POST`, `PUT`, `PATCH`, or `DELETE` request for a secret session value that the malicious application is unable to access.\n\n<a name=\"preventing-csrf-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":31,"to":35}}}}],["972",{"pageContent":"Preventing CSRF Requests\n\nLaravel automatically generates a CSRF \"token\" for each active [user session](/docs/{{version}}/session) managed by the application. This token is used to verify that the authenticated user is the person actually making the requests to the application. Since this token is stored in the user's session and changes each time the session is regenerated, a malicious application is unable to access it.\n\nThe current session's CSRF token can be accessed via the request's session or via the `csrf_token` helper function:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/token', function (Request $request) {\n        $token = $request->session()->token();\n\n        $token = csrf_token();\n\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":36,"to":50}}}}],["973",{"pageContent":"use Illuminate\\Http\\Request;\n\n    Route::get('/token', function (Request $request) {\n        $token = $request->session()->token();\n\n        $token = csrf_token();\n\n        // ...\n    });\n\nAnytime you define a \"POST\", \"PUT\", \"PATCH\", or \"DELETE\" HTML form in your application, you should include a hidden CSRF `_token` field in the form so that the CSRF protection middleware can validate the request. For convenience, you may use the `@csrf` Blade directive to generate the hidden token input field:\n\n```blade\n<form method=\"POST\" action=\"/profile\">\n    @csrf\n\n    <!-- Equivalent to... -->\n    <input type=\"hidden\" name=\"_token\" value=\"{{ csrf_token() }}\" />\n</form>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":50,"to":68}}}}],["974",{"pageContent":"The `App\\Http\\Middleware\\VerifyCsrfToken` [middleware](/docs/{{version}}/middleware), which is included in the `web` middleware group by default, will automatically verify that the token in the request input matches the token stored in the session. When these two tokens match, we know that the authenticated user is the one initiating the request.\n\n<a name=\"csrf-tokens-and-spas\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":71,"to":73}}}}],["975",{"pageContent":"CSRF Tokens & SPAs\n\nIf you are building a SPA that is utilizing Laravel as an API backend, you should consult the [Laravel Sanctum documentation](/docs/{{version}}/sanctum) for information on authenticating with your API and protecting against CSRF vulnerabilities.\n\n<a name=\"csrf-excluding-uris\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":74,"to":78}}}}],["976",{"pageContent":"Excluding URIs From CSRF Protection\n\nSometimes you may wish to exclude a set of URIs from CSRF protection. For example, if you are using [Stripe](https://stripe.com) to process payments and are utilizing their webhook system, you will need to exclude your Stripe webhook handler route from CSRF protection since Stripe will not know what CSRF token to send to your routes.\n\nTypically, you should place these kinds of routes outside of the `web` middleware group that the `App\\Providers\\RouteServiceProvider` applies to all routes in the `routes/web.php` file. However, you may also exclude the routes by adding their URIs to the `$except` property of the `VerifyCsrfToken` middleware:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken as Middleware;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":79,"to":89}}}}],["977",{"pageContent":"<?php\n\n    namespace App\\Http\\Middleware;\n\n    use Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken as Middleware;\n\n    class VerifyCsrfToken extends Middleware\n    {\n        /**\n         * The URIs that should be excluded from CSRF verification.\n         *\n         * @var array\n         */\n        protected $except = [\n            'stripe/*',\n            'http://example.com/foo/bar',\n            'http://example.com/foo/*',\n        ];\n    }\n\n> **Note**  \n> For convenience, the CSRF middleware is automatically disabled for all routes when [running tests](/docs/{{version}}/testing).\n\n<a name=\"csrf-x-csrf-token\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":89,"to":112}}}}],["978",{"pageContent":"X-CSRF-TOKEN\n\nIn addition to checking for the CSRF token as a POST parameter, the `App\\Http\\Middleware\\VerifyCsrfToken` middleware will also check for the `X-CSRF-TOKEN` request header. You could, for example, store the token in an HTML `meta` tag:\n\n```blade\n<meta name=\"csrf-token\" content=\"{{ csrf_token() }}\">\n```\n\nThen, you can instruct a library like jQuery to automatically add the token to all request headers. This provides simple, convenient CSRF protection for your AJAX based applications using legacy JavaScript technology:\n\n```js\n$.ajaxSetup({\n    headers: {\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n    }\n});\n```\n\n<a name=\"csrf-x-xsrf-token\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":113,"to":131}}}}],["979",{"pageContent":"X-XSRF-TOKEN\n\nLaravel stores the current CSRF token in an encrypted `XSRF-TOKEN` cookie that is included with each response generated by the framework. You can use the cookie value to set the `X-XSRF-TOKEN` request header.\n\nThis cookie is primarily sent as a developer convenience since some JavaScript frameworks and libraries, like Angular and Axios, automatically place its value in the `X-XSRF-TOKEN` header on same-origin requests.\n\n> **Note**  \n> By default, the `resources/js/bootstrap.js` file includes the Axios HTTP library which will automatically send the `X-XSRF-TOKEN` header for you.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/csrf.md","loc":{"lines":{"from":132,"to":139}}}}],["980",{"pageContent":"# Database Testing\n\n- [Introduction](#introduction)\n    - [Resetting The Database After Each Test](#resetting-the-database-after-each-test)\n- [Model Factories](#model-factories)\n- [Running Seeders](#running-seeders)\n- [Available Assertions](#available-assertions)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":1,"to":9}}}}],["981",{"pageContent":"Introduction\n\nLaravel provides a variety of helpful tools and assertions to make it easier to test your database driven applications. In addition, Laravel model factories and seeders make it painless to create test database records using your application's Eloquent models and relationships. We'll discuss all of these powerful features in the following documentation.\n\n<a name=\"resetting-the-database-after-each-test\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":10,"to":14}}}}],["982",{"pageContent":"Resetting The Database After Each Test\n\nBefore proceeding much further, let's discuss how to reset your database after each of your tests so that data from a previous test does not interfere with subsequent tests. Laravel's included `Illuminate\\Foundation\\Testing\\RefreshDatabase` trait will take care of this for you. Simply use the trait on your test class:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Illuminate\\Foundation\\Testing\\RefreshDatabase;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        use RefreshDatabase;\n\n        /**\n         * A basic functional test example.\n         */\n        public function test_basic_example(): void\n        {\n            $response = $this->get('/');\n\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":15,"to":39}}}}],["983",{"pageContent":"// ...\n        }\n    }\n\nThe `Illuminate\\Foundation\\Testing\\RefreshDatabase` trait does not migrate your database if your schema is up to date. Instead, it will only execute the test within a database transaction. Therefore, any records added to the database by test cases that do not use this trait may still exist in the database.\n\nIf you would like to totally reset the database, you may use the `Illuminate\\Foundation\\Testing\\DatabaseMigrations` or `Illuminate\\Foundation\\Testing\\DatabaseTruncation` traits instead. However, both of these options are significantly slower than the `RefreshDatabase` trait.\n\n<a name=\"model-factories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":39,"to":47}}}}],["984",{"pageContent":"Model Factories\n\nWhen testing, you may need to insert a few records into your database before executing your test. Instead of manually specifying the value of each column when you create this test data, Laravel allows you to define a set of default attributes for each of your [Eloquent models](/docs/{{version}}/eloquent) using [model factories](/docs/{{version}}/eloquent-factories).\n\nTo learn more about creating and utilizing model factories to create models, please consult the complete [model factory documentation](/docs/{{version}}/eloquent-factories). Once you have defined a model factory, you may utilize the factory within your test to create models:\n\n    use App\\Models\\User;\n\n    public function test_models_can_be_instantiated(): void\n    {\n        $user = User::factory()->create();\n\n        // ...\n    }\n\n<a name=\"running-seeders\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":48,"to":63}}}}],["985",{"pageContent":"Running Seeders\n\nIf you would like to use [database seeders](/docs/{{version}}/seeding) to populate your database during a feature test, you may invoke the `seed` method. By default, the `seed` method will execute the `DatabaseSeeder`, which should execute all of your other seeders. Alternatively, you pass a specific seeder class name to the `seed` method:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Database\\Seeders\\OrderStatusSeeder;\n    use Database\\Seeders\\TransactionStatusSeeder;\n    use Illuminate\\Foundation\\Testing\\RefreshDatabase;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        use RefreshDatabase;\n\n        /**\n         * Test creating a new order.\n         */\n        public function test_orders_can_be_created(): void\n        {\n            // Run the DatabaseSeeder...\n            $this->seed();\n\n            // Run a specific seeder...\n            $this->seed(OrderStatusSeeder::class);\n\n            // ...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":64,"to":92}}}}],["986",{"pageContent":"// Run a specific seeder...\n            $this->seed(OrderStatusSeeder::class);\n\n            // ...\n\n            // Run an array of specific seeders...\n            $this->seed([\n                OrderStatusSeeder::class,\n                TransactionStatusSeeder::class,\n                // ...\n            ]);\n        }\n    }\n\nAlternatively, you may instruct Laravel to automatically seed the database before each test that uses the `RefreshDatabase` trait. You may accomplish this by defining a `$seed` property on your base test class:\n\n    <?php\n\n    namespace Tests;\n\n    use Illuminate\\Foundation\\Testing\\TestCase as BaseTestCase;\n\n    abstract class TestCase extends BaseTestCase\n    {\n        use CreatesApplication;\n\n        /**\n         * Indicates whether the default seeder should run before each test.\n         *\n         * @var bool\n         */\n        protected $seed = true;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":92,"to":124}}}}],["987",{"pageContent":"/**\n         * Indicates whether the default seeder should run before each test.\n         *\n         * @var bool\n         */\n        protected $seed = true;\n    }\n\nWhen the `$seed` property is `true`, the test will run the `Database\\Seeders\\DatabaseSeeder` class before each test that uses the `RefreshDatabase` trait. However, you may specify a specific seeder that should be executed by defining a `$seeder` property on your test class:\n\n    use Database\\Seeders\\OrderStatusSeeder;\n\n    /**\n     * Run a specific seeder before each test.\n     *\n     * @var string\n     */\n    protected $seeder = OrderStatusSeeder::class;\n\n<a name=\"available-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":124,"to":143}}}}],["988",{"pageContent":"Available Assertions\n\nLaravel provides several database assertions for your [PHPUnit](https://phpunit.de/) feature tests. We'll discuss each of these assertions below.\n\n<a name=\"assert-database-count\"></a>\n#### assertDatabaseCount\n\nAssert that a table in the database contains the given number of records:\n\n    $this->assertDatabaseCount('users', 5);\n\n<a name=\"assert-database-has\"></a>\n#### assertDatabaseHas\n\nAssert that a table in the database contains records matching the given key / value query constraints:\n\n    $this->assertDatabaseHas('users', [\n        'email' => 'sally@example.com',\n    ]);\n\n<a name=\"assert-database-missing\"></a>\n#### assertDatabaseMissing\n\nAssert that a table in the database does not contain records matching the given key / value query constraints:\n\n    $this->assertDatabaseMissing('users', [\n        'email' => 'sally@example.com',\n    ]);\n\n<a name=\"assert-deleted\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":144,"to":173}}}}],["989",{"pageContent":"assertSoftDeleted\n\nThe `assertSoftDeleted` method may be used to assert a given Eloquent model has been \"soft deleted\":\n\n    $this->assertSoftDeleted($user);\n    \n<a name=\"assert-not-deleted\"></a>\n#### assertNotSoftDeleted\n\nThe `assertNotSoftDeleted` method may be used to assert a given Eloquent model hasn't been \"soft deleted\":\n\n    $this->assertNotSoftDeleted($user);\n\n<a name=\"assert-model-exists\"></a>\n#### assertModelExists\n\nAssert that a given model exists in the database:\n\n    use App\\Models\\User;\n\n    $user = User::factory()->create();\n\n    $this->assertModelExists($user);\n\n<a name=\"assert-model-missing\"></a>\n#### assertModelMissing\n\nAssert that a given model does not exist in the database:\n\n    use App\\Models\\User;\n\n    $user = User::factory()->create();\n\n    $user->delete();\n\n    $this->assertModelMissing($user);\n\n<a name=\"expects-database-query-count\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":174,"to":211}}}}],["990",{"pageContent":"expectsDatabaseQueryCount\n\nThe `expectsDatabaseQueryCount` method may be invoked at the beginning of your test to specify the total number of database queries that you expect to be run during the test. If the actual number of executed queries does not exactly match this expectation, the test will fail:\n\n    $this->expectsDatabaseQueryCount(5);\n\n    // Test...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database-testing.md","loc":{"lines":{"from":212,"to":218}}}}],["991",{"pageContent":"# Database: Getting Started\n\n- [Introduction](#introduction)\n    - [Configuration](#configuration)\n    - [Read & Write Connections](#read-and-write-connections)\n- [Running SQL Queries](#running-queries)\n    - [Using Multiple Database Connections](#using-multiple-database-connections)\n    - [Listening For Query Events](#listening-for-query-events)\n    - [Monitoring Cumulative Query Time](#monitoring-cumulative-query-time)\n- [Database Transactions](#database-transactions)\n- [Connecting To The Database CLI](#connecting-to-the-database-cli)\n- [Inspecting Your Databases](#inspecting-your-databases)\n- [Monitoring Your Databases](#monitoring-your-databases)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":1,"to":15}}}}],["992",{"pageContent":"Introduction\n\nAlmost every modern web application interacts with a database. Laravel makes interacting with databases extremely simple across a variety of supported databases using raw SQL, a [fluent query builder](/docs/{{version}}/queries), and the [Eloquent ORM](/docs/{{version}}/eloquent). Currently, Laravel provides first-party support for five databases:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- MariaDB 10.10+ ([Version Policy](https://mariadb.org/about/#maintenance-policy))\n- MySQL 5.7+ ([Version Policy](https://en.wikipedia.org/wiki/MySQL#Release_history))\n- PostgreSQL 11.0+ ([Version Policy](https://www.postgresql.org/support/versioning/))\n- SQLite 3.8.8+\n- SQL Server 2017+ ([Version Policy](https://docs.microsoft.com/en-us/lifecycle/products/?products=sql-server))\n\n</div>\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":16,"to":30}}}}],["993",{"pageContent":"Configuration\n\nThe configuration for Laravel's database services is located in your application's `config/database.php` configuration file. In this file, you may define all of your database connections, as well as specify which connection should be used by default. Most of the configuration options within this file are driven by the values of your application's environment variables. Examples for most of Laravel's supported database systems are provided in this file.\n\nBy default, Laravel's sample [environment configuration](/docs/{{version}}/configuration#environment-configuration) is ready to use with [Laravel Sail](/docs/{{version}}/sail), which is a Docker configuration for developing Laravel applications on your local machine. However, you are free to modify your database configuration as needed for your local database.\n\n<a name=\"sqlite-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":31,"to":37}}}}],["994",{"pageContent":"SQLite Configuration\n\nSQLite databases are contained within a single file on your filesystem. You can create a new SQLite database using the `touch` command in your terminal: `touch database/database.sqlite`. After the database has been created, you may easily configure your environment variables to point to this database by placing the absolute path to the database in the `DB_DATABASE` environment variable:\n\n```ini\nDB_CONNECTION=sqlite\nDB_DATABASE=/absolute/path/to/database.sqlite\n```\n\nTo enable foreign key constraints for SQLite connections, you should set the `DB_FOREIGN_KEYS` environment variable to `true`:\n\n```ini\nDB_FOREIGN_KEYS=true\n```\n\n<a name=\"mssql-configuration\"></a>\n#### Microsoft SQL Server Configuration\n\nTo use a Microsoft SQL Server database, you should ensure that you have the `sqlsrv` and `pdo_sqlsrv` PHP extensions installed as well as any dependencies they may require such as the Microsoft SQL ODBC driver.\n\n<a name=\"configuration-using-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":38,"to":58}}}}],["995",{"pageContent":"Configuration Using URLs\n\nTypically, database connections are configured using multiple configuration values such as `host`, `database`, `username`, `password`, etc. Each of these configuration values has its own corresponding environment variable. This means that when configuring your database connection information on a production server, you need to manage several environment variables.\n\nSome managed database providers such as AWS and Heroku provide a single database \"URL\" that contains all of the connection information for the database in a single string. An example database URL may look something like the following:\n\n```html\nmysql://root:password@127.0.0.1/forge?charset=UTF-8\n```\n\nThese URLs typically follow a standard schema convention:\n\n```html\ndriver://username:password@host:port/database?options","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":59,"to":72}}}}],["996",{"pageContent":"These URLs typically follow a standard schema convention:\n\n```html\ndriver://username:password@host:port/database?options\n```\n\nFor convenience, Laravel supports these URLs as an alternative to configuring your database with multiple configuration options. If the `url` (or corresponding `DATABASE_URL` environment variable) configuration option is present, it will be used to extract the database connection and credential information.\n\n<a name=\"read-and-write-connections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":72,"to":80}}}}],["997",{"pageContent":"Read & Write Connections\n\nSometimes you may wish to use one database connection for SELECT statements, and another for INSERT, UPDATE, and DELETE statements. Laravel makes this a breeze, and the proper connections will always be used whether you are using raw queries, the query builder, or the Eloquent ORM.\n\nTo see how read / write connections should be configured, let's look at this example:\n\n    'mysql' => [\n        'read' => [\n            'host' => [\n                '192.168.1.1',\n                '196.168.1.2',\n            ],\n        ],\n        'write' => [\n            'host' => [\n                '196.168.1.3',\n            ],\n        ],\n        'sticky' => true,\n        'driver' => 'mysql',\n        'database' => 'database',\n        'username' => 'root',\n        'password' => '',\n        'charset' => 'utf8mb4',\n        'collation' => 'utf8mb4_unicode_ci',\n        'prefix' => '',\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":81,"to":107}}}}],["998",{"pageContent":"Note that three keys have been added to the configuration array: `read`, `write` and `sticky`. The `read` and `write` keys have array values containing a single key: `host`. The rest of the database options for the `read` and `write` connections will be merged from the main `mysql` configuration array.\n\nYou only need to place items in the `read` and `write` arrays if you wish to override the values from the main `mysql` array. So, in this case, `192.168.1.1` will be used as the host for the \"read\" connection, while `192.168.1.3` will be used for the \"write\" connection. The database credentials, prefix, character set, and all other options in the main `mysql` array will be shared across both connections. When multiple values exist in the `host` configuration array, a database host will be randomly chosen for each request.\n\n<a name=\"the-sticky-option\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":109,"to":113}}}}],["999",{"pageContent":"The `sticky` Option\n\nThe `sticky` option is an *optional* value that can be used to allow the immediate reading of records that have been written to the database during the current request cycle. If the `sticky` option is enabled and a \"write\" operation has been performed against the database during the current request cycle, any further \"read\" operations will use the \"write\" connection. This ensures that any data written during the request cycle can be immediately read back from the database during that same request. It is up to you to decide if this is the desired behavior for your application.\n\n<a name=\"running-queries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":114,"to":118}}}}],["1000",{"pageContent":"Running SQL Queries\n\nOnce you have configured your database connection, you may run queries using the `DB` facade. The `DB` facade provides methods for each type of query: `select`, `update`, `insert`, `delete`, and `statement`.\n\n<a name=\"running-a-select-query\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":119,"to":123}}}}],["1001",{"pageContent":"Running A Select Query\n\nTo run a basic SELECT query, you may use the `select` method on the `DB` facade:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show a list of all of the application's users.\n         */\n        public function index(): View\n        {\n            $users = DB::select('select * from users where active = ?', [1]);\n\n            return view('user.index', ['users' => $users]);\n        }\n    }\n\nThe first argument passed to the `select` method is the SQL query, while the second argument is any parameter bindings that need to be bound to the query. Typically, these are the values of the `where` clause constraints. Parameter binding provides protection against SQL injection.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":124,"to":149}}}}],["1002",{"pageContent":"The `select` method will always return an `array` of results. Each result within the array will be a PHP `stdClass` object representing a record from the database:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $users = DB::select('select * from users');\n\n    foreach ($users as $user) {\n        echo $user->name;\n    }\n\n<a name=\"selecting-scalar-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":151,"to":161}}}}],["1003",{"pageContent":"Selecting Scalar Values\n\nSometimes your database query may result in a single, scalar value. Instead of being required to retrieve the query's scalar result from a record object, Laravel allows you to retrieve this value directly using the `scalar` method:\n\n    $burgers = DB::scalar(\n        \"select count(case when food = 'burger' then 1 end) as burgers from menu\"\n    );\n\n<a name=\"selecting-multiple-result-sets\"></a>\n#### Selecting Multiple Result Sets\n\nIf your application calls stored procedures that return multiple result sets, you may use the `selectResultSets` method to retrieve all of the result sets returned by the stored procedure:\n\n    [$options, $notifications] = DB::selectResultSets(\n        \"CALL get_user_options_and_notifications(?)\", $request->user()->id\n    );\n\n<a name=\"using-named-bindings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":162,"to":179}}}}],["1004",{"pageContent":"Using Named Bindings\n\nInstead of using `?` to represent your parameter bindings, you may execute a query using named bindings:\n\n    $results = DB::select('select * from users where id = :id', ['id' => 1]);\n\n<a name=\"running-an-insert-statement\"></a>\n#### Running An Insert Statement\n\nTo execute an `insert` statement, you may use the `insert` method on the `DB` facade. Like `select`, this method accepts the SQL query as its first argument and bindings as its second argument:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    DB::insert('insert into users (id, name) values (?, ?)', [1, 'Marc']);\n\n<a name=\"running-an-update-statement\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":180,"to":195}}}}],["1005",{"pageContent":"Running An Update Statement\n\nThe `update` method should be used to update existing records in the database. The number of rows affected by the statement is returned by the method:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $affected = DB::update(\n        'update users set votes = 100 where name = ?',\n        ['Anita']\n    );\n\n<a name=\"running-a-delete-statement\"></a>\n#### Running A Delete Statement\n\nThe `delete` method should be used to delete records from the database. Like `update`, the number of rows affected will be returned by the method:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $deleted = DB::delete('delete from users');\n\n<a name=\"running-a-general-statement\"></a>\n#### Running A General Statement\n\nSome database statements do not return any value. For these types of operations, you may use the `statement` method on the `DB` facade:\n\n    DB::statement('drop table users');\n\n<a name=\"running-an-unprepared-statement\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":196,"to":223}}}}],["1006",{"pageContent":"Running An Unprepared Statement\n\nSometimes you may want to execute an SQL statement without binding any values. You may use the `DB` facade's `unprepared` method to accomplish this:\n\n    DB::unprepared('update users set votes = 100 where name = \"Dries\"');\n\n> **Warning**  \n> Since unprepared statements do not bind parameters, they may be vulnerable to SQL injection. You should never allow user controlled values within an unprepared statement.\n\n<a name=\"implicit-commits-in-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":224,"to":233}}}}],["1007",{"pageContent":"Implicit Commits\n\nWhen using the `DB` facade's `statement` and `unprepared` methods within transactions you must be careful to avoid statements that cause [implicit commits](https://dev.mysql.com/doc/refman/8.0/en/implicit-commit.html). These statements will cause the database engine to indirectly commit the entire transaction, leaving Laravel unaware of the database's transaction level. An example of such a statement is creating a database table:\n\n    DB::unprepared('create table a (col varchar(1) null)');\n\nPlease refer to the MySQL manual for [a list of all statements](https://dev.mysql.com/doc/refman/8.0/en/implicit-commit.html) that trigger implicit commits.\n\n<a name=\"using-multiple-database-connections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":234,"to":242}}}}],["1008",{"pageContent":"Using Multiple Database Connections\n\nIf your application defines multiple connections in your `config/database.php` configuration file, you may access each connection via the `connection` method provided by the `DB` facade. The connection name passed to the `connection` method should correspond to one of the connections listed in your `config/database.php` configuration file or configured at runtime using the `config` helper:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $users = DB::connection('sqlite')->select(/* ... */);\n\nYou may access the raw, underlying PDO instance of a connection using the `getPdo` method on a connection instance:\n\n    $pdo = DB::connection()->getPdo();\n\n<a name=\"listening-for-query-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":243,"to":255}}}}],["1009",{"pageContent":"Listening For Query Events\n\nIf you would like to specify a closure that is invoked for each SQL query executed by your application, you may use the `DB` facade's `listen` method. This method can be useful for logging queries or debugging. You may register your query listener closure in the `boot` method of a [service provider](/docs/{{version}}/providers):\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Database\\Events\\QueryExecuted;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":256,"to":276}}}}],["1010",{"pageContent":"/**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            DB::listen(function (QueryExecuted $query) {\n                // $query->sql;\n                // $query->bindings;\n                // $query->time;\n            });\n        }\n    }\n\n<a name=\"monitoring-cumulative-query-time\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":278,"to":291}}}}],["1011",{"pageContent":"Monitoring Cumulative Query Time\n\nA common performance bottleneck of modern web applications is the amount of time they spend querying databases. Thankfully, Laravel can invoke a closure or callback of your choice when it spends too much time querying the database during a single request. To get started, provide a query time threshold (in milliseconds) and closure to the `whenQueryingForLongerThan` method. You may invoke this method in the `boot` method of a [service provider](/docs/{{version}}/providers):\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Database\\Connection;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\Support\\ServiceProvider;\n    use Illuminate\\Database\\Events\\QueryExecuted;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":292,"to":313}}}}],["1012",{"pageContent":"/**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            DB::whenQueryingForLongerThan(500, function (Connection $connection, QueryExecuted $event) {\n                // Notify development team...\n            });\n        }\n    }\n\n<a name=\"database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":315,"to":326}}}}],["1013",{"pageContent":"Database Transactions\n\nYou may use the `transaction` method provided by the `DB` facade to run a set of operations within a database transaction. If an exception is thrown within the transaction closure, the transaction will automatically be rolled back and the exception is re-thrown. If the closure executes successfully, the transaction will automatically be committed. You don't need to worry about manually rolling back or committing while using the `transaction` method:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    DB::transaction(function () {\n        DB::update('update users set votes = 1');\n\n        DB::delete('delete from posts');\n    });\n\n<a name=\"handling-deadlocks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":327,"to":339}}}}],["1014",{"pageContent":"Handling Deadlocks\n\nThe `transaction` method accepts an optional second argument which defines the number of times a transaction should be retried when a deadlock occurs. Once these attempts have been exhausted, an exception will be thrown:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    DB::transaction(function () {\n        DB::update('update users set votes = 1');\n\n        DB::delete('delete from posts');\n    }, 5);\n\n<a name=\"manually-using-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":340,"to":352}}}}],["1015",{"pageContent":"Manually Using Transactions\n\nIf you would like to begin a transaction manually and have complete control over rollbacks and commits, you may use the `beginTransaction` method provided by the `DB` facade:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    DB::beginTransaction();\n\nYou can rollback the transaction via the `rollBack` method:\n\n    DB::rollBack();\n\nLastly, you can commit a transaction via the `commit` method:\n\n    DB::commit();\n\n> **Note**  \n> The `DB` facade's transaction methods control the transactions for both the [query builder](/docs/{{version}}/queries) and [Eloquent ORM](/docs/{{version}}/eloquent).\n\n<a name=\"connecting-to-the-database-cli\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":353,"to":372}}}}],["1016",{"pageContent":"Connecting To The Database CLI\n\nIf you would like to connect to your database's CLI, you may use the `db` Artisan command:\n\n```shell\nphp artisan db\n```\n\nIf needed, you may specify a database connection name to connect to a database connection that is not the default connection:\n\n```shell\nphp artisan db mysql\n```\n\n<a name=\"inspecting-your-databases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":373,"to":387}}}}],["1017",{"pageContent":"Inspecting Your Databases\n\nUsing the `db:show` and `db:table` Artisan commands, you can get valuable insight into your database and its associated tables. To see an overview of your database, including its size, type, number of open connections, and a summary of its tables, you may use the `db:show` command:\n\n```shell\nphp artisan db:show\n```\n\nYou may specify which database connection should be inspected by providing the database connection name to the command via the `--database` option:\n\n```shell\nphp artisan db:show --database=pgsql\n```\n\nIf you would like to include table row counts and database view details within the output of the command, you may provide the `--counts` and `--views` options, respectively. On large databases, retrieving row counts and view details can be slow:\n\n```shell\nphp artisan db:show --counts --views\n```\n\n<a name=\"table-overview\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":388,"to":408}}}}],["1018",{"pageContent":"Table Overview\n\nIf you would like to get an overview of an individual table within your database, you may execute the `db:table` Artisan command. This command provides a general overview of a database table, including its columns, types, attributes, keys, and indexes:\n\n```shell\nphp artisan db:table users\n```\n\n<a name=\"monitoring-your-databases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":409,"to":417}}}}],["1019",{"pageContent":"Monitoring Your Databases\n\nUsing the `db:monitor` Artisan command, you can instruct Laravel to dispatch an `Illuminate\\Database\\Events\\DatabaseBusy` event if your database is managing more than a specified number of open connections.\n\nTo get started, you should schedule the `db:monitor` command to [run every minute](/docs/{{version}}/scheduling). The command accepts the names of the database connection configurations that you wish to monitor as well as the maximum number of open connections that should be tolerated before dispatching an event:\n\n```shell\nphp artisan db:monitor --databases=mysql,pgsql --max=100","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":418,"to":425}}}}],["1020",{"pageContent":"Scheduling this command alone is not enough to trigger a notification alerting you of the number of open connections. When the command encounters a database that has an open connection count that exceeds your threshold, a `DatabaseBusy` event will be dispatched. You should listen for this event within your application's `EventServiceProvider` in order to send a notification to you or your development team:\n\n```php\nuse App\\Notifications\\DatabaseApproachingMaxConnections;\nuse Illuminate\\Database\\Events\\DatabaseBusy;\nuse Illuminate\\Support\\Facades\\Event;\nuse Illuminate\\Support\\Facades\\Notification;\n\n/**\n * Register any other events for your application.\n */\npublic function boot(): void\n{\n    Event::listen(function (DatabaseBusy $event) {\n        Notification::route('mail', 'dev@example.com')\n                ->notify(new DatabaseApproachingMaxConnections(\n                    $event->connectionName,\n                    $event->connections\n                ));\n    });\n}\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/database.md","loc":{"lines":{"from":428,"to":449}}}}],["1021",{"pageContent":"# Deployment\n\n- [Introduction](#introduction)\n- [Server Requirements](#server-requirements)\n- [Server Configuration](#server-configuration)\n    - [Nginx](#nginx)\n- [Optimization](#optimization)\n    - [Autoloader Optimization](#autoloader-optimization)\n    - [Caching Configuration](#optimizing-configuration-loading)\n    - [Caching Events](#caching-events)\n    - [Caching Routes](#optimizing-route-loading)\n    - [Caching Views](#optimizing-view-loading)\n- [Debug Mode](#debug-mode)\n- [Easy Deployment With Forge / Vapor](#deploying-with-forge-or-vapor)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nWhen you're ready to deploy your Laravel application to production, there are some important things you can do to make sure your application is running as efficiently as possible. In this document, we'll cover some great starting points for making sure your Laravel application is deployed properly.\n\n<a name=\"server-requirements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":1,"to":21}}}}],["1022",{"pageContent":"Server Requirements\n\nThe Laravel framework has a few system requirements. You should ensure that your web server has the following minimum PHP version and extensions:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- PHP >= 8.1\n- Ctype PHP Extension\n- cURL PHP Extension\n- DOM PHP Extension\n- Fileinfo PHP Extension\n- Filter PHP Extension\n- Hash PHP Extension\n- Mbstring PHP Extension\n- OpenSSL PHP Extension\n- PCRE PHP Extension\n- PDO PHP Extension\n- Session PHP Extension\n- Tokenizer PHP Extension\n- XML PHP Extension\n\n</div>\n\n<a name=\"server-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":22,"to":45}}}}],["1023",{"pageContent":"Server Configuration\n\n<a name=\"nginx\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":46,"to":48}}}}],["1024",{"pageContent":"Nginx\n\nIf you are deploying your application to a server that is running Nginx, you may use the following configuration file as a starting point for configuring your web server. Most likely, this file will need to be customized depending on your server's configuration. **If you would like assistance in managing your server, consider using a first-party Laravel server management and deployment service such as [Laravel Forge](https://forge.laravel.com).**\n\nPlease ensure, like the configuration below, your web server directs all requests to your application's `public/index.php` file. You should never attempt to move the `index.php` file to your project's root, as serving the application from the project root will expose many sensitive configuration files to the public Internet:\n\n```nginx\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name example.com;\n    root /srv/example.com/public;\n\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-Content-Type-Options \"nosniff\";","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":49,"to":63}}}}],["1025",{"pageContent":"add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-Content-Type-Options \"nosniff\";\n\n    index index.php;\n\n    charset utf-8;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location = /robots.txt  { access_log off; log_not_found off; }\n\n    error_page 404 /index.php;\n\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":63,"to":88}}}}],["1026",{"pageContent":"<a name=\"optimization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":91,"to":91}}}}],["1027",{"pageContent":"Optimization\n\n<a name=\"autoloader-optimization\"></a>\n### Autoloader Optimization\n\nWhen deploying to production, make sure that you are optimizing Composer's class autoloader map so Composer can quickly find the proper file to load for a given class:\n\n```shell\ncomposer install --optimize-autoloader --no-dev\n```\n\n> **Note**  \n> In addition to optimizing the autoloader, you should always be sure to include a `composer.lock` file in your project's source control repository. Your project's dependencies can be installed much faster when a `composer.lock` file is present.\n\n<a name=\"optimizing-configuration-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":92,"to":106}}}}],["1028",{"pageContent":"Caching Configuration\n\nWhen deploying your application to production, you should make sure that you run the `config:cache` Artisan command during your deployment process:\n\n```shell\nphp artisan config:cache\n```\n\nThis command will combine all of Laravel's configuration files into a single, cached file, which greatly reduces the number of trips the framework must make to the filesystem when loading your configuration values.\n\n> **Warning**  \n> If you execute the `config:cache` command during your deployment process, you should be sure that you are only calling the `env` function from within your configuration files. Once the configuration has been cached, the `.env` file will not be loaded and all calls to the `env` function for `.env` variables will return `null`.\n\n<a name=\"caching-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":107,"to":120}}}}],["1029",{"pageContent":"Caching Events\n\nIf your application is utilizing [event discovery](/docs/{{version}}/events#event-discovery), you should cache your application's event to listener mappings during your deployment process. This can be accomplished by invoking the `event:cache` Artisan command during deployment:\n\n```shell\nphp artisan event:cache\n```\n\n<a name=\"optimizing-route-loading\"></a>\n### Caching Routes\n\nIf you are building a large application with many routes, you should make sure that you are running the `route:cache` Artisan command during your deployment process:\n\n```shell\nphp artisan route:cache\n```\n\nThis command reduces all of your route registrations into a single method call within a cached file, improving the performance of route registration when registering hundreds of routes.\n\n<a name=\"optimizing-view-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":121,"to":140}}}}],["1030",{"pageContent":"Caching Views\n\nWhen deploying your application to production, you should make sure that you run the `view:cache` Artisan command during your deployment process:\n\n```shell\nphp artisan view:cache\n```\n\nThis command precompiles all your Blade views so they are not compiled on demand, improving the performance of each request that returns a view.\n\n<a name=\"debug-mode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":141,"to":151}}}}],["1031",{"pageContent":"Debug Mode\n\nThe debug option in your config/app.php configuration file determines how much information about an error is actually displayed to the user. By default, this option is set to respect the value of the `APP_DEBUG` environment variable, which is stored in your application's `.env` file.\n\n> **Warning**\n> **In your production environment, this value should always be `false`. If the `APP_DEBUG` variable is set to `true` in production, you risk exposing sensitive configuration values to your application's end users.**\n\n<a name=\"deploying-with-forge-or-vapor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":152,"to":159}}}}],["1032",{"pageContent":"Easy Deployment With Forge / Vapor\n\n<a name=\"laravel-forge\"></a>\n#### Laravel Forge\n\nIf you aren't quite ready to manage your own server configuration or aren't comfortable configuring all of the various services needed to run a robust Laravel application, [Laravel Forge](https://forge.laravel.com) is a wonderful alternative.\n\nLaravel Forge can create servers on various infrastructure providers such as DigitalOcean, Linode, AWS, and more. In addition, Forge installs and manages all of the tools needed to build robust Laravel applications, such as Nginx, MySQL, Redis, Memcached, Beanstalk, and more.\n\n> **Note**\n> Want a full guide to deploying with Laravel Forge? Check out the [Laravel Bootcamp](https://bootcamp.laravel.com/deploying) and the Forge [video series available on Laracasts](https://laracasts.com/series/learn-laravel-forge-2022-edition).\n\n<a name=\"laravel-vapor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":160,"to":172}}}}],["1033",{"pageContent":"Laravel Vapor\n\nIf you would like a totally serverless, auto-scaling deployment platform tuned for Laravel, check out [Laravel Vapor](https://vapor.laravel.com). Laravel Vapor is a serverless deployment platform for Laravel, powered by AWS. Launch your Laravel infrastructure on Vapor and fall in love with the scalable simplicity of serverless. Laravel Vapor is fine-tuned by Laravel's creators to work seamlessly with the framework so you can keep writing your Laravel applications exactly like you're used to.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/deployment.md","loc":{"lines":{"from":173,"to":175}}}}],["1034",{"pageContent":"- ## Prologue\n    - [Release Notes](/docs/{{version}}/releases)\n    - [Upgrade Guide](/docs/{{version}}/upgrade)\n    - [Contribution Guide](/docs/{{version}}/contributions)\n- ## Getting Started\n    - [Installation](/docs/{{version}}/installation)\n    - [Configuration](/docs/{{version}}/configuration)\n    - [Directory Structure](/docs/{{version}}/structure)\n    - [Frontend](/docs/{{version}}/frontend)\n    - [Starter Kits](/docs/{{version}}/starter-kits)\n    - [Deployment](/docs/{{version}}/deployment)\n- ## Architecture Concepts\n    - [Request Lifecycle](/docs/{{version}}/lifecycle)\n    - [Service Container](/docs/{{version}}/container)\n    - [Service Providers](/docs/{{version}}/providers)\n    - [Facades](/docs/{{version}}/facades)\n- ## The Basics\n    - [Routing](/docs/{{version}}/routing)\n    - [Middleware](/docs/{{version}}/middleware)\n    - [CSRF Protection](/docs/{{version}}/csrf)\n    - [Controllers](/docs/{{version}}/controllers)\n    - [Requests](/docs/{{version}}/requests)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/documentation.md","loc":{"lines":{"from":1,"to":22}}}}],["1035",{"pageContent":"- [Middleware](/docs/{{version}}/middleware)\n    - [CSRF Protection](/docs/{{version}}/csrf)\n    - [Controllers](/docs/{{version}}/controllers)\n    - [Requests](/docs/{{version}}/requests)\n    - [Responses](/docs/{{version}}/responses)\n    - [Views](/docs/{{version}}/views)\n    - [Blade Templates](/docs/{{version}}/blade)\n    - [Asset Bundling](/docs/{{version}}/vite)\n    - [URL Generation](/docs/{{version}}/urls)\n    - [Session](/docs/{{version}}/session)\n    - [Validation](/docs/{{version}}/validation)\n    - [Error Handling](/docs/{{version}}/errors)\n    - [Logging](/docs/{{version}}/logging)\n- ## Digging Deeper\n    - [Artisan Console](/docs/{{version}}/artisan)\n    - [Broadcasting](/docs/{{version}}/broadcasting)\n    - [Cache](/docs/{{version}}/cache)\n    - [Collections](/docs/{{version}}/collections)\n    - [Contracts](/docs/{{version}}/contracts)\n    - [Events](/docs/{{version}}/events)\n    - [File Storage](/docs/{{version}}/filesystem)\n    - [Helpers](/docs/{{version}}/helpers)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/documentation.md","loc":{"lines":{"from":22,"to":43}}}}],["1036",{"pageContent":"- [Contracts](/docs/{{version}}/contracts)\n    - [Events](/docs/{{version}}/events)\n    - [File Storage](/docs/{{version}}/filesystem)\n    - [Helpers](/docs/{{version}}/helpers)\n    - [HTTP Client](/docs/{{version}}/http-client)\n    - [Localization](/docs/{{version}}/localization)\n    - [Mail](/docs/{{version}}/mail)\n    - [Notifications](/docs/{{version}}/notifications)\n    - [Package Development](/docs/{{version}}/packages)\n    - [Processes](/docs/{{version}}/processes)\n    - [Queues](/docs/{{version}}/queues)\n    - [Rate Limiting](/docs/{{version}}/rate-limiting)\n    - [Strings](/docs/{{version}}/strings)\n    - [Task Scheduling](/docs/{{version}}/scheduling)\n- ## Security\n    - [Authentication](/docs/{{version}}/authentication)\n    - [Authorization](/docs/{{version}}/authorization)\n    - [Email Verification](/docs/{{version}}/verification)\n    - [Encryption](/docs/{{version}}/encryption)\n    - [Hashing](/docs/{{version}}/hashing)\n    - [Password Reset](/docs/{{version}}/passwords)\n- ## Database","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/documentation.md","loc":{"lines":{"from":43,"to":64}}}}],["1037",{"pageContent":"- [Encryption](/docs/{{version}}/encryption)\n    - [Hashing](/docs/{{version}}/hashing)\n    - [Password Reset](/docs/{{version}}/passwords)\n- ## Database\n    - [Getting Started](/docs/{{version}}/database)\n    - [Query Builder](/docs/{{version}}/queries)\n    - [Pagination](/docs/{{version}}/pagination)\n    - [Migrations](/docs/{{version}}/migrations)\n    - [Seeding](/docs/{{version}}/seeding)\n    - [Redis](/docs/{{version}}/redis)\n- ## Eloquent ORM\n    - [Getting Started](/docs/{{version}}/eloquent)\n    - [Relationships](/docs/{{version}}/eloquent-relationships)\n    - [Collections](/docs/{{version}}/eloquent-collections)\n    - [Mutators / Casts](/docs/{{version}}/eloquent-mutators)\n    - [API Resources](/docs/{{version}}/eloquent-resources)\n    - [Serialization](/docs/{{version}}/eloquent-serialization)\n    - [Factories](/docs/{{version}}/eloquent-factories)\n- ## Testing\n    - [Getting Started](/docs/{{version}}/testing)\n    - [HTTP Tests](/docs/{{version}}/http-tests)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/documentation.md","loc":{"lines":{"from":64,"to":84}}}}],["1038",{"pageContent":"- [Factories](/docs/{{version}}/eloquent-factories)\n- ## Testing\n    - [Getting Started](/docs/{{version}}/testing)\n    - [HTTP Tests](/docs/{{version}}/http-tests)\n    - [Console Tests](/docs/{{version}}/console-tests)\n    - [Browser Tests](/docs/{{version}}/dusk)\n    - [Database](/docs/{{version}}/database-testing)\n    - [Mocking](/docs/{{version}}/mocking)\n- ## Packages\n    - [Breeze](/docs/{{version}}/starter-kits#laravel-breeze)\n    - [Cashier (Stripe)](/docs/{{version}}/billing)\n    - [Cashier (Paddle)](/docs/{{version}}/cashier-paddle)\n    - [Dusk](/docs/{{version}}/dusk)\n    - [Envoy](/docs/{{version}}/envoy)\n    - [Fortify](/docs/{{version}}/fortify)\n    - [Folio](/docs/{{version}}/folio)\n    - [Homestead](/docs/{{version}}/homestead)\n    - [Horizon](/docs/{{version}}/horizon)\n    - [Jetstream](https://jetstream.laravel.com)\n    - [Mix](/docs/{{version}}/mix)\n    - [Octane](/docs/{{version}}/octane)\n    - [Passport](/docs/{{version}}/passport)\n    - [Pennant](/docs/{{version}}/pennant)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/documentation.md","loc":{"lines":{"from":84,"to":106}}}}],["1039",{"pageContent":"- [Mix](/docs/{{version}}/mix)\n    - [Octane](/docs/{{version}}/octane)\n    - [Passport](/docs/{{version}}/passport)\n    - [Pennant](/docs/{{version}}/pennant)\n    - [Pint](/docs/{{version}}/pint)\n    - [Precognition](/docs/{{version}}/precognition)\n    - [Prompts](/docs/{{version}}/prompts)\n    - [Sail](/docs/{{version}}/sail)\n    - [Sanctum](/docs/{{version}}/sanctum)\n    - [Scout](/docs/{{version}}/scout)\n    - [Socialite](/docs/{{version}}/socialite)\n    - [Telescope](/docs/{{version}}/telescope)\n    - [Valet](/docs/{{version}}/valet)\n- [API Documentation](/api/10.x)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/documentation.md","loc":{"lines":{"from":106,"to":119}}}}],["1040",{"pageContent":"# Laravel Dusk","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1,"to":1}}}}],["1041",{"pageContent":"- [Introduction](#introduction)\n- [Installation](#installation)\n    - [Managing ChromeDriver Installations](#managing-chromedriver-installations)\n    - [Using Other Browsers](#using-other-browsers)\n- [Getting Started](#getting-started)\n    - [Generating Tests](#generating-tests)\n    - [Resetting The Database After Each Test](#resetting-the-database-after-each-test)\n    - [Running Tests](#running-tests)\n    - [Environment Handling](#environment-handling)\n- [Browser Basics](#browser-basics)\n    - [Creating Browsers](#creating-browsers)\n    - [Navigation](#navigation)\n    - [Resizing Browser Windows](#resizing-browser-windows)\n    - [Browser Macros](#browser-macros)\n    - [Authentication](#authentication)\n    - [Cookies](#cookies)\n    - [Executing JavaScript](#executing-javascript)\n    - [Taking A Screenshot](#taking-a-screenshot)\n    - [Storing Console Output To Disk](#storing-console-output-to-disk)\n    - [Storing Page Source To Disk](#storing-page-source-to-disk)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":3,"to":22}}}}],["1042",{"pageContent":"- [Taking A Screenshot](#taking-a-screenshot)\n    - [Storing Console Output To Disk](#storing-console-output-to-disk)\n    - [Storing Page Source To Disk](#storing-page-source-to-disk)\n- [Interacting With Elements](#interacting-with-elements)\n    - [Dusk Selectors](#dusk-selectors)\n    - [Text, Values, & Attributes](#text-values-and-attributes)\n    - [Interacting With Forms](#interacting-with-forms)\n    - [Attaching Files](#attaching-files)\n    - [Pressing Buttons](#pressing-buttons)\n    - [Clicking Links](#clicking-links)\n    - [Using The Keyboard](#using-the-keyboard)\n    - [Using The Mouse](#using-the-mouse)\n    - [JavaScript Dialogs](#javascript-dialogs)\n    - [Interacting With Inline Frames](#interacting-with-iframes)\n    - [Scoping Selectors](#scoping-selectors)\n    - [Waiting For Elements](#waiting-for-elements)\n    - [Scrolling An Element Into View](#scrolling-an-element-into-view)\n- [Available Assertions](#available-assertions)\n- [Pages](#pages)\n    - [Generating Pages](#generating-pages)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":22,"to":41}}}}],["1043",{"pageContent":"- [Scrolling An Element Into View](#scrolling-an-element-into-view)\n- [Available Assertions](#available-assertions)\n- [Pages](#pages)\n    - [Generating Pages](#generating-pages)\n    - [Configuring Pages](#configuring-pages)\n    - [Navigating To Pages](#navigating-to-pages)\n    - [Shorthand Selectors](#shorthand-selectors)\n    - [Page Methods](#page-methods)\n- [Components](#components)\n    - [Generating Components](#generating-components)\n    - [Using Components](#using-components)\n- [Continuous Integration](#continuous-integration)\n    - [Heroku CI](#running-tests-on-heroku-ci)\n    - [Travis CI](#running-tests-on-travis-ci)\n    - [GitHub Actions](#running-tests-on-github-actions)\n    - [Chipper CI](#running-tests-on-chipper-ci)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":41,"to":56}}}}],["1044",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":58,"to":58}}}}],["1045",{"pageContent":"Introduction\n\n[Laravel Dusk](https://github.com/laravel/dusk) provides an expressive, easy-to-use browser automation and testing API. By default, Dusk does not require you to install JDK or Selenium on your local computer. Instead, Dusk uses a standalone [ChromeDriver](https://sites.google.com/chromium.org/driver) installation. However, you are free to utilize any other Selenium compatible driver you wish.\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":59,"to":63}}}}],["1046",{"pageContent":"Installation\n\nTo get started, you should install [Google Chrome](https://www.google.com/chrome) and add the `laravel/dusk` Composer dependency to your project:\n\n```shell\ncomposer require --dev laravel/dusk\n```\n\n> **Warning**\n> If you are manually registering Dusk's service provider, you should **never** register it in your production environment, as doing so could lead to arbitrary users being able to authenticate with your application.\n\nAfter installing the Dusk package, execute the `dusk:install` Artisan command. The `dusk:install` command will create a `tests/Browser` directory, an example Dusk test, and install the Chrome Driver binary for your operating system:\n\n```shell\nphp artisan dusk:install","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":64,"to":78}}}}],["1047",{"pageContent":"Next, set the `APP_URL` environment variable in your application's `.env` file. This value should match the URL you use to access your application in a browser.\n\n> **Note**\n> If you are using [Laravel Sail](/docs/{{version}}/sail) to manage your local development environment, please also consult the Sail documentation on [configuring and running Dusk tests](/docs/{{version}}/sail#laravel-dusk).\n\n<a name=\"managing-chromedriver-installations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":81,"to":86}}}}],["1048",{"pageContent":"Managing ChromeDriver Installations\n\nIf you would like to install a different version of ChromeDriver than what is installed by Laravel Dusk via the `dusk:install` command, you may use the `dusk:chrome-driver` command:\n\n```shell\n# Install the latest version of ChromeDriver for your OS...\nphp artisan dusk:chrome-driver\n\n# Install a given version of ChromeDriver for your OS...\nphp artisan dusk:chrome-driver 86\n\n# Install a given version of ChromeDriver for all supported OSs...\nphp artisan dusk:chrome-driver --all\n\n# Install the version of ChromeDriver that matches the detected version of Chrome / Chromium for your OS...\nphp artisan dusk:chrome-driver --detect\n```\n\n> **Warning**\n> Dusk requires the `chromedriver` binaries to be executable. If you're having problems running Dusk, you should ensure the binaries are executable using the following command: `chmod -R 0755 vendor/laravel/dusk/bin/`.\n\n<a name=\"using-other-browsers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":87,"to":108}}}}],["1049",{"pageContent":"Using Other Browsers\n\nBy default, Dusk uses Google Chrome and a standalone [ChromeDriver](https://sites.google.com/chromium.org/driver) installation to run your browser tests. However, you may start your own Selenium server and run your tests against any browser you wish.\n\nTo get started, open your `tests/DuskTestCase.php` file, which is the base Dusk test case for your application. Within this file, you can remove the call to the `startChromeDriver` method. This will stop Dusk from automatically starting the ChromeDriver:\n\n    /**\n     * Prepare for Dusk test execution.\n     *\n     * @beforeClass\n     */\n    public static function prepare(): void\n    {\n        // static::startChromeDriver();\n    }\n\nNext, you may modify the `driver` method to connect to the URL and port of your choice. In addition, you may modify the \"desired capabilities\" that should be passed to the WebDriver:\n\n    use Facebook\\WebDriver\\Remote\\RemoteWebDriver;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":109,"to":127}}}}],["1050",{"pageContent":"use Facebook\\WebDriver\\Remote\\RemoteWebDriver;\n\n    /**\n     * Create the RemoteWebDriver instance.\n     */\n    protected function driver(): RemoteWebDriver\n    {\n        return RemoteWebDriver::create(\n            'http://localhost:4444/wd/hub', DesiredCapabilities::phantomjs()\n        );\n    }\n\n<a name=\"getting-started\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":127,"to":139}}}}],["1051",{"pageContent":"Getting Started\n\n<a name=\"generating-tests\"></a>\n### Generating Tests\n\nTo generate a Dusk test, use the `dusk:make` Artisan command. The generated test will be placed in the `tests/Browser` directory:\n\n```shell\nphp artisan dusk:make LoginTest\n```\n\n<a name=\"resetting-the-database-after-each-test\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":140,"to":151}}}}],["1052",{"pageContent":"Resetting The Database After Each Test\n\nMost of the tests you write will interact with pages that retrieve data from your application's database; however, your Dusk tests should never use the `RefreshDatabase` trait. The `RefreshDatabase` trait leverages database transactions which will not be applicable or available across HTTP requests. Instead, you have two options: the `DatabaseMigrations` trait and the `DatabaseTruncation` trait.\n\n<a name=\"reset-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":152,"to":156}}}}],["1053",{"pageContent":"Using Database Migrations\n\nThe `DatabaseMigrations` trait will run your database migrations before each test. However, dropping and re-creating your database tables for each test is typically slower than truncating the tables:\n\n    <?php\n\n    namespace Tests\\Browser;\n\n    use App\\Models\\User;\n    use Illuminate\\Foundation\\Testing\\DatabaseMigrations;\n    use Laravel\\Dusk\\Chrome;\n    use Tests\\DuskTestCase;\n\n    class ExampleTest extends DuskTestCase\n    {\n        use DatabaseMigrations;\n    }\n\n> **Warning**\n> SQLite in-memory databases may not be used when executing Dusk tests. Since the browser executes within its own process, it will not be able to access the in-memory databases of other processes.\n\n<a name=\"reset-truncation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":157,"to":178}}}}],["1054",{"pageContent":"Using Database Truncation\n\nBefore using the `DatabaseTruncation` trait, you must install the `doctrine/dbal` package using the Composer package manager:\n\n```shell\ncomposer require --dev doctrine/dbal","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":179,"to":184}}}}],["1055",{"pageContent":"The `DatabaseTruncation` trait will migrate your database on the first test in order to ensure your database tables have been properly created. However, on subsequent tests, the database's tables will simply be truncated - providing a speed boost over re-running all of your database migrations:\n\n    <?php\n\n    namespace Tests\\Browser;\n\n    use App\\Models\\User;\n    use Illuminate\\Foundation\\Testing\\DatabaseTruncation;\n    use Laravel\\Dusk\\Chrome;\n    use Tests\\DuskTestCase;\n\n    class ExampleTest extends DuskTestCase\n    {\n        use DatabaseTruncation;\n    }\n\nBy default, this trait will truncate all tables except the `migrations` table. If you would like to customize the tables that should be truncated, you may define a `$tablesToTruncate` property on your test class:\n\n    /**\n     * Indicates which tables should be truncated.\n     *\n     * @var array\n     */\n    protected $tablesToTruncate = ['users'];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":187,"to":210}}}}],["1056",{"pageContent":"/**\n     * Indicates which tables should be truncated.\n     *\n     * @var array\n     */\n    protected $tablesToTruncate = ['users'];\n\nAlternatively, you may define an `$exceptTables` property on your test class to specify which tables should be excluded from truncation:\n\n    /**\n     * Indicates which tables should be excluded from truncation.\n     *\n     * @var array\n     */\n    protected $exceptTables = ['users'];\n\nTo specify the database connections that should have their tables truncated, you may define a `$connectionsToTruncate` property on your test class:\n\n    /**\n     * Indicates which connections should have their tables truncated.\n     *\n     * @var array\n     */\n    protected $connectionsToTruncate = ['mysql'];\n\nIf you would like to execute code before or after database truncation is performed, you may define `beforeTruncatingDatabase` or `afterTruncatingDatabase` methods on your test class:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":210,"to":235}}}}],["1057",{"pageContent":"If you would like to execute code before or after database truncation is performed, you may define `beforeTruncatingDatabase` or `afterTruncatingDatabase` methods on your test class:\n\n    /**\n     * Perform any work that should take place before the database has started truncating.\n     */\n    protected function beforeTruncatingDatabase(): void\n    {\n        //\n    }\n\n    /**\n     * Perform any work that should take place after the database has finished truncating.\n     */\n    protected function afterTruncatingDatabase(): void\n    {\n        //\n    }\n\n<a name=\"running-tests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":235,"to":253}}}}],["1058",{"pageContent":"Running Tests\n\nTo run your browser tests, execute the `dusk` Artisan command:\n\n```shell\nphp artisan dusk\n```\n\nIf you had test failures the last time you ran the `dusk` command, you may save time by re-running the failing tests first using the `dusk:fails` command:\n\n```shell\nphp artisan dusk:fails\n```\n\nThe `dusk` command accepts any argument that is normally accepted by the PHPUnit test runner, such as allowing you to only run the tests for a given [group](https://phpunit.readthedocs.io/en/10.1/annotations.html#group):\n\n```shell\nphp artisan dusk --group=foo\n```\n\n> **Note**\n> If you are using [Laravel Sail](/docs/{{version}}/sail) to manage your local development environment, please consult the Sail documentation on [configuring and running Dusk tests](/docs/{{version}}/sail#laravel-dusk).\n\n<a name=\"manually-starting-chromedriver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":254,"to":277}}}}],["1059",{"pageContent":"Manually Starting ChromeDriver\n\nBy default, Dusk will automatically attempt to start ChromeDriver. If this does not work for your particular system, you may manually start ChromeDriver before running the `dusk` command. If you choose to start ChromeDriver manually, you should comment out the following line of your `tests/DuskTestCase.php` file:\n\n    /**\n     * Prepare for Dusk test execution.\n     *\n     * @beforeClass\n     */\n    public static function prepare(): void\n    {\n        // static::startChromeDriver();\n    }\n\nIn addition, if you start ChromeDriver on a port other than 9515, you should modify the `driver` method of the same class to reflect the correct port:\n\n    use Facebook\\WebDriver\\Remote\\RemoteWebDriver;\n\n    /**\n     * Create the RemoteWebDriver instance.\n     */\n    protected function driver(): RemoteWebDriver\n    {\n        return RemoteWebDriver::create(\n            'http://localhost:9515', DesiredCapabilities::chrome()\n        );\n    }\n\n<a name=\"environment-handling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":278,"to":306}}}}],["1060",{"pageContent":"Environment Handling\n\nTo force Dusk to use its own environment file when running tests, create a `.env.dusk.{environment}` file in the root of your project. For example, if you will be initiating the `dusk` command from your `local` environment, you should create a `.env.dusk.local` file.\n\nWhen running tests, Dusk will back-up your `.env` file and rename your Dusk environment to `.env`. Once the tests have completed, your `.env` file will be restored.\n\n<a name=\"browser-basics\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":307,"to":313}}}}],["1061",{"pageContent":"Browser Basics\n\n<a name=\"creating-browsers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":314,"to":316}}}}],["1062",{"pageContent":"Creating Browsers\n\nTo get started, let's write a test that verifies we can log into our application. After generating a test, we can modify it to navigate to the login page, enter some credentials, and click the \"Login\" button. To create a browser instance, you may call the `browse` method from within your Dusk test:\n\n    <?php\n\n    namespace Tests\\Browser;\n\n    use App\\Models\\User;\n    use Illuminate\\Foundation\\Testing\\DatabaseMigrations;\n    use Laravel\\Dusk\\Browser;\n    use Laravel\\Dusk\\Chrome;\n    use Tests\\DuskTestCase;\n\n    class ExampleTest extends DuskTestCase\n    {\n        use DatabaseMigrations;\n\n        /**\n         * A basic browser test example.\n         */\n        public function test_basic_example(): void\n        {\n            $user = User::factory()->create([\n                'email' => 'taylor@laravel.com',\n            ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":317,"to":342}}}}],["1063",{"pageContent":"$this->browse(function (Browser $browser) use ($user) {\n                $browser->visit('/login')\n                        ->type('email', $user->email)\n                        ->type('password', 'password')\n                        ->press('Login')\n                        ->assertPathIs('/home');\n            });\n        }\n    }\n\nAs you can see in the example above, the `browse` method accepts a closure. A browser instance will automatically be passed to this closure by Dusk and is the main object used to interact with and make assertions against your application.\n\n<a name=\"creating-multiple-browsers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":344,"to":356}}}}],["1064",{"pageContent":"Creating Multiple Browsers\n\nSometimes you may need multiple browsers in order to properly carry out a test. For example, multiple browsers may be needed to test a chat screen that interacts with websockets. To create multiple browsers, simply add more browser arguments to the signature of the closure given to the `browse` method:\n\n    $this->browse(function (Browser $first, Browser $second) {\n        $first->loginAs(User::find(1))\n              ->visit('/home')\n              ->waitForText('Message');\n\n        $second->loginAs(User::find(2))\n               ->visit('/home')\n               ->waitForText('Message')\n               ->type('message', 'Hey Taylor')\n               ->press('Send');\n\n        $first->waitForText('Hey Taylor')\n              ->assertSee('Jeffrey Way');\n    });\n\n<a name=\"navigation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":357,"to":376}}}}],["1065",{"pageContent":"Navigation\n\nThe `visit` method may be used to navigate to a given URI within your application:\n\n    $browser->visit('/login');\n\nYou may use the `visitRoute` method to navigate to a [named route](/docs/{{version}}/routing#named-routes):\n\n    $browser->visitRoute('login');\n\nYou may navigate \"back\" and \"forward\" using the `back` and `forward` methods:\n\n    $browser->back();\n\n    $browser->forward();\n\nYou may use the `refresh` method to refresh the page:\n\n    $browser->refresh();\n\n<a name=\"resizing-browser-windows\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":377,"to":397}}}}],["1066",{"pageContent":"Resizing Browser Windows\n\nYou may use the `resize` method to adjust the size of the browser window:\n\n    $browser->resize(1920, 1080);\n\nThe `maximize` method may be used to maximize the browser window:\n\n    $browser->maximize();\n\nThe `fitContent` method will resize the browser window to match the size of its content:\n\n    $browser->fitContent();\n\nWhen a test fails, Dusk will automatically resize the browser to fit the content prior to taking a screenshot. You may disable this feature by calling the `disableFitOnFailure` method within your test:\n\n    $browser->disableFitOnFailure();\n\nYou may use the `move` method to move the browser window to a different position on your screen:\n\n    $browser->move($x = 100, $y = 100);\n\n<a name=\"browser-macros\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":398,"to":420}}}}],["1067",{"pageContent":"Browser Macros\n\nIf you would like to define a custom browser method that you can re-use in a variety of your tests, you may use the `macro` method on the `Browser` class. Typically, you should call this method from a [service provider's](/docs/{{version}}/providers) `boot` method:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\ServiceProvider;\n    use Laravel\\Dusk\\Browser;\n\n    class DuskServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register Dusk's browser macros.\n         */\n        public function boot(): void\n        {\n            Browser::macro('scrollToElement', function (string $element = null) {\n                $this->script(\"$('html, body').animate({ scrollTop: $('$element').offset().top }, 0);\");\n\n                return $this;\n            });\n        }\n    }\n\nThe `macro` function accepts a name as its first argument, and a closure as its second. The macro's closure will be executed when calling the macro as a method on a `Browser` instance:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":421,"to":447}}}}],["1068",{"pageContent":"The `macro` function accepts a name as its first argument, and a closure as its second. The macro's closure will be executed when calling the macro as a method on a `Browser` instance:\n\n    $this->browse(function (Browser $browser) use ($user) {\n        $browser->visit('/pay')\n                ->scrollToElement('#credit-card-details')\n                ->assertSee('Enter Credit Card Details');\n    });\n\n<a name=\"authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":447,"to":455}}}}],["1069",{"pageContent":"Authentication\n\nOften, you will be testing pages that require authentication. You can use Dusk's `loginAs` method in order to avoid interacting with your application's login screen during every test. The `loginAs` method accepts a primary key associated with your authenticatable model or an authenticatable model instance:\n\n    use App\\Models\\User;\n    use Laravel\\Dusk\\Browser;\n\n    $this->browse(function (Browser $browser) {\n        $browser->loginAs(User::find(1))\n              ->visit('/home');\n    });\n\n> **Warning**\n> After using the `loginAs` method, the user session will be maintained for all tests within the file.\n\n<a name=\"cookies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":456,"to":471}}}}],["1070",{"pageContent":"Cookies\n\nYou may use the `cookie` method to get or set an encrypted cookie's value. By default, all of the cookies created by Laravel are encrypted:\n\n    $browser->cookie('name');\n\n    $browser->cookie('name', 'Taylor');\n\nYou may use the `plainCookie` method to get or set an unencrypted cookie's value:\n\n    $browser->plainCookie('name');\n\n    $browser->plainCookie('name', 'Taylor');\n\nYou may use the `deleteCookie` method to delete the given cookie:\n\n    $browser->deleteCookie('name');\n\n<a name=\"executing-javascript\"></a>\n### Executing JavaScript\n\nYou may use the `script` method to execute arbitrary JavaScript statements within the browser:\n\n    $browser->script('document.documentElement.scrollTop = 0');\n\n    $browser->script([\n        'document.body.scrollTop = 0',\n        'document.documentElement.scrollTop = 0',\n    ]);\n\n    $output = $browser->script('return window.location.pathname');\n\n<a name=\"taking-a-screenshot\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":472,"to":504}}}}],["1071",{"pageContent":"Taking A Screenshot\n\nYou may use the `screenshot` method to take a screenshot and store it with the given filename. All screenshots will be stored within the `tests/Browser/screenshots` directory:\n\n    $browser->screenshot('filename');\n\nThe `responsiveScreenshots` method may be used to take a series of screenshots at various breakpoints:\n\n    $browser->responsiveScreenshots('filename');\n\n<a name=\"storing-console-output-to-disk\"></a>\n### Storing Console Output To Disk\n\nYou may use the `storeConsoleLog` method to write the current browser's console output to disk with the given filename. Console output will be stored within the `tests/Browser/console` directory:\n\n    $browser->storeConsoleLog('filename');\n\n<a name=\"storing-page-source-to-disk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":505,"to":522}}}}],["1072",{"pageContent":"Storing Page Source To Disk\n\nYou may use the `storeSource` method to write the current page's source to disk with the given filename. The page source will be stored within the `tests/Browser/source` directory:\n\n    $browser->storeSource('filename');\n\n<a name=\"interacting-with-elements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":523,"to":529}}}}],["1073",{"pageContent":"Interacting With Elements\n\n<a name=\"dusk-selectors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":530,"to":532}}}}],["1074",{"pageContent":"Dusk Selectors\n\nChoosing good CSS selectors for interacting with elements is one of the hardest parts of writing Dusk tests. Over time, frontend changes can cause CSS selectors like the following to break your tests:\n\n    // HTML...\n\n    <button>Login</button>\n\n    // Test...\n\n    $browser->click('.login-page .container div > button');\n\nDusk selectors allow you to focus on writing effective tests rather than remembering CSS selectors. To define a selector, add a `dusk` attribute to your HTML element. Then, when interacting with a Dusk browser, prefix the selector with `@` to manipulate the attached element within your test:\n\n    // HTML...\n\n    <button dusk=\"login-button\">Login</button>\n\n    // Test...\n\n    $browser->click('@login-button');\n\nIf desired, you may customize the HTML attribute that the Dusk selector utilizes via the `selectorHtmlAttribute` method. Typically, this method should be called from the `boot` method of your application's `AppServiceProvider`:\n\n    use Laravel\\Dusk\\Dusk;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":533,"to":557}}}}],["1075",{"pageContent":"use Laravel\\Dusk\\Dusk;\n\n    Dusk::selectorHtmlAttribute('data-dusk');\n\n<a name=\"text-values-and-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":557,"to":561}}}}],["1076",{"pageContent":"Text, Values, & Attributes\n\n<a name=\"retrieving-setting-values\"></a>\n#### Retrieving & Setting Values\n\nDusk provides several methods for interacting with the current value, display text, and attributes of elements on the page. For example, to get the \"value\" of an element that matches a given CSS or Dusk selector, use the `value` method:\n\n    // Retrieve the value...\n    $value = $browser->value('selector');\n\n    // Set the value...\n    $browser->value('selector', 'value');\n\nYou may use the `inputValue` method to get the \"value\" of an input element that has a given field name:\n\n    $value = $browser->inputValue('field');\n\n<a name=\"retrieving-text\"></a>\n#### Retrieving Text\n\nThe `text` method may be used to retrieve the display text of an element that matches the given selector:\n\n    $text = $browser->text('selector');\n\n<a name=\"retrieving-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":562,"to":586}}}}],["1077",{"pageContent":"Retrieving Attributes\n\nFinally, the `attribute` method may be used to retrieve the value of an attribute of an element matching the given selector:\n\n    $attribute = $browser->attribute('selector', 'value');\n\n<a name=\"interacting-with-forms\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":587,"to":593}}}}],["1078",{"pageContent":"Interacting With Forms\n\n<a name=\"typing-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":594,"to":596}}}}],["1079",{"pageContent":"Typing Values\n\nDusk provides a variety of methods for interacting with forms and input elements. First, let's take a look at an example of typing text into an input field:\n\n    $browser->type('email', 'taylor@laravel.com');\n\nNote that, although the method accepts one if necessary, we are not required to pass a CSS selector into the `type` method. If a CSS selector is not provided, Dusk will search for an `input` or `textarea` field with the given `name` attribute.\n\nTo append text to a field without clearing its content, you may use the `append` method:\n\n    $browser->type('tags', 'foo')\n            ->append('tags', ', bar, baz');\n\nYou may clear the value of an input using the `clear` method:\n\n    $browser->clear('email');\n\nYou can instruct Dusk to type slowly using the `typeSlowly` method. By default, Dusk will pause for 100 milliseconds between key presses. To customize the amount of time between key presses, you may pass the appropriate number of milliseconds as the third argument to the method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":597,"to":614}}}}],["1080",{"pageContent":"$browser->typeSlowly('mobile', '+1 (202) 555-5555');\n\n    $browser->typeSlowly('mobile', '+1 (202) 555-5555', 300);\n\nYou may use the `appendSlowly` method to append text slowly:\n\n    $browser->type('tags', 'foo')\n            ->appendSlowly('tags', ', bar, baz');\n\n<a name=\"dropdowns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":616,"to":625}}}}],["1081",{"pageContent":"Dropdowns\n\nTo select a value available on a `select` element, you may use the `select` method. Like the `type` method, the `select` method does not require a full CSS selector. When passing a value to the `select` method, you should pass the underlying option value instead of the display text:\n\n    $browser->select('size', 'Large');\n\nYou may select a random option by omitting the second argument:\n\n    $browser->select('size');\n\nBy providing an array as the second argument to the `select` method, you can instruct the method to select multiple options:\n\n    $browser->select('categories', ['Art', 'Music']);\n\n<a name=\"checkboxes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":626,"to":640}}}}],["1082",{"pageContent":"Checkboxes\n\nTo \"check\" a checkbox input, you may use the `check` method. Like many other input related methods, a full CSS selector is not required. If a CSS selector match can't be found, Dusk will search for a checkbox with a matching `name` attribute:\n\n    $browser->check('terms');\n\nThe `uncheck` method may be used to \"uncheck\" a checkbox input:\n\n    $browser->uncheck('terms');\n\n<a name=\"radio-buttons\"></a>\n#### Radio Buttons\n\nTo \"select\" a `radio` input option, you may use the `radio` method. Like many other input related methods, a full CSS selector is not required. If a CSS selector match can't be found, Dusk will search for a `radio` input with matching `name` and `value` attributes:\n\n    $browser->radio('size', 'large');\n\n<a name=\"attaching-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":641,"to":658}}}}],["1083",{"pageContent":"Attaching Files\n\nThe `attach` method may be used to attach a file to a `file` input element. Like many other input related methods, a full CSS selector is not required. If a CSS selector match can't be found, Dusk will search for a `file` input with a matching `name` attribute:\n\n    $browser->attach('photo', __DIR__.'/photos/mountains.png');\n\n> **Warning**\n> The attach function requires the `Zip` PHP extension to be installed and enabled on your server.\n\n<a name=\"pressing-buttons\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":659,"to":668}}}}],["1084",{"pageContent":"Pressing Buttons\n\nThe `press` method may be used to click a button element on the page. The argument given to the `press` method may be either the display text of the button or a CSS / Dusk selector:\n\n    $browser->press('Login');\n\nWhen submitting forms, many applications disable the form's submission button after it is pressed and then re-enable the button when the form submission's HTTP request is complete. To press a button and wait for the button to be re-enabled, you may use the `pressAndWaitFor` method:\n\n    // Press the button and wait a maximum of 5 seconds for it to be enabled...\n    $browser->pressAndWaitFor('Save');\n\n    // Press the button and wait a maximum of 1 second for it to be enabled...\n    $browser->pressAndWaitFor('Save', 1);\n\n<a name=\"clicking-links\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":669,"to":683}}}}],["1085",{"pageContent":"Clicking Links\n\nTo click a link, you may use the `clickLink` method on the browser instance. The `clickLink` method will click the link that has the given display text:\n\n    $browser->clickLink($linkText);\n\nYou may use the `seeLink` method to determine if a link with the given display text is visible on the page:\n\n    if ($browser->seeLink($linkText)) {\n        // ...\n    }\n\n> **Warning**\n> These methods interact with jQuery. If jQuery is not available on the page, Dusk will automatically inject it into the page so it is available for the test's duration.\n\n<a name=\"using-the-keyboard\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":684,"to":699}}}}],["1086",{"pageContent":"Using The Keyboard\n\nThe `keys` method allows you to provide more complex input sequences to a given element than normally allowed by the `type` method. For example, you may instruct Dusk to hold modifier keys while entering values. In this example, the `shift` key will be held while `taylor` is entered into the element matching the given selector. After `taylor` is typed, `swift` will be typed without any modifier keys:\n\n    $browser->keys('selector', ['{shift}', 'taylor'], 'swift');\n\nAnother valuable use case for the `keys` method is sending a \"keyboard shortcut\" combination to the primary CSS selector for your application:\n\n    $browser->keys('.app', ['{command}', 'j']);\n\n> **Note**\n> All modifier keys such as `{command}` are wrapped in `{}` characters, and match the constants defined in the `Facebook\\WebDriver\\WebDriverKeys` class, which can be [found on GitHub](https://github.com/php-webdriver/php-webdriver/blob/master/lib/WebDriverKeys.php).\n\n<a name=\"fluent-keyboard-interactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":700,"to":713}}}}],["1087",{"pageContent":"Fluent Keyboard Interactions\n\nDusk also provides a `withKeyboard` method, allowing you to fluently perform complex keyboard interactions via the `Laravel\\Dusk\\Keyboard` class. The `Keyboard` class provides `press`, `release`, `type`, and `pause` methods:\n\n    use Laravel\\Dusk\\Keyboard;\n\n    $browser->withKeyboard(function (Keyboard $keyboard) {\n        $keyboard->press('c')\n            ->pause(1000)\n            ->release('c')\n            ->type(['c', 'e', 'o']);\n    });\n\n<a name=\"keyboard-macros\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":714,"to":727}}}}],["1088",{"pageContent":"Keyboard Macros\n\nIf you would like to define custom keyboard interactions that you can easily re-use throughout your test suite, you may use the `macro` method provided by the `Keyboard` class. Typically, you should call this method from a [service provider's](/docs/{{version}}/providers) `boot` method:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Facebook\\WebDriver\\WebDriverKeys;\n    use Illuminate\\Support\\ServiceProvider;\n    use Laravel\\Dusk\\Keyboard;\n    use Laravel\\Dusk\\OperatingSystem;\n\n    class DuskServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register Dusk's browser macros.\n         */\n        public function boot(): void\n        {\n            Keyboard::macro('copy', function (string $element = null) {\n                $this->type([\n                    OperatingSystem::onMac() ? WebDriverKeys::META : WebDriverKeys::CONTROL, 'c',\n                ]);\n\n                return $this;\n            });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":728,"to":754}}}}],["1089",{"pageContent":"return $this;\n            });\n\n            Keyboard::macro('paste', function (string $element = null) {\n                $this->type([\n                    OperatingSystem::onMac() ? WebDriverKeys::META : WebDriverKeys::CONTROL, 'v',\n                ]);\n\n                return $this;\n            });\n        }\n    }\n\nThe `macro` function accepts a name as its first argument and a closure as its second. The macro's closure will be executed when calling the macro as a method on a `Keyboard` instance:\n\n    $browser->click('@textarea')\n        ->withKeyboard(fn (Keyboard $keyboard) => $keyboard->copy())\n        ->click('@another-textarea')\n        ->withKeyboard(fn (Keyboard $keyboard) => $keyboard->paste());\n\n<a name=\"using-the-mouse\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":754,"to":774}}}}],["1090",{"pageContent":"Using The Mouse\n\n<a name=\"clicking-on-elements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":775,"to":777}}}}],["1091",{"pageContent":"Clicking On Elements\n\nThe `click` method may be used to click on an element matching the given CSS or Dusk selector:\n\n    $browser->click('.selector');\n\nThe `clickAtXPath` method may be used to click on an element matching the given XPath expression:\n\n    $browser->clickAtXPath('//div[@class = \"selector\"]');\n\nThe `clickAtPoint` method may be used to click on the topmost element at a given pair of coordinates relative to the viewable area of the browser:\n\n    $browser->clickAtPoint($x = 0, $y = 0);\n\nThe `doubleClick` method may be used to simulate the double click of a mouse:\n\n    $browser->doubleClick();\n\nThe `rightClick` method may be used to simulate the right click of a mouse:\n\n    $browser->rightClick();\n\n    $browser->rightClick('.selector');\n\nThe `clickAndHold` method may be used to simulate a mouse button being clicked and held down. A subsequent call to the `releaseMouse` method will undo this behavior and release the mouse button:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":778,"to":802}}}}],["1092",{"pageContent":"The `clickAndHold` method may be used to simulate a mouse button being clicked and held down. A subsequent call to the `releaseMouse` method will undo this behavior and release the mouse button:\n\n    $browser->clickAndHold()\n            ->pause(1000)\n            ->releaseMouse();\n\nThe `controlClick` method may be used to simulate the `ctrl+click` event within the browser:\n\n    $browser->controlClick();\n\n<a name=\"mouseover\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":802,"to":812}}}}],["1093",{"pageContent":"Mouseover\n\nThe `mouseover` method may be used when you need to move the mouse over an element matching the given CSS or Dusk selector:\n\n    $browser->mouseover('.selector');\n\n<a name=\"drag-drop\"></a>\n#### Drag & Drop\n\nThe `drag` method may be used to drag an element matching the given selector to another element:\n\n    $browser->drag('.from-selector', '.to-selector');\n\nOr, you may drag an element in a single direction:\n\n    $browser->dragLeft('.selector', $pixels = 10);\n    $browser->dragRight('.selector', $pixels = 10);\n    $browser->dragUp('.selector', $pixels = 10);\n    $browser->dragDown('.selector', $pixels = 10);\n\nFinally, you may drag an element by a given offset:\n\n    $browser->dragOffset('.selector', $x = 10, $y = 10);\n\n<a name=\"javascript-dialogs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":813,"to":837}}}}],["1094",{"pageContent":"JavaScript Dialogs\n\nDusk provides various methods to interact with JavaScript Dialogs. For example, you may use the `waitForDialog` method to wait for a JavaScript dialog to appear. This method accepts an optional argument indicating how many seconds to wait for the dialog to appear:\n\n    $browser->waitForDialog($seconds = null);\n\nThe `assertDialogOpened` method may be used to assert that a dialog has been displayed and contains the given message:\n\n    $browser->assertDialogOpened('Dialog message');\n\nIf the JavaScript dialog contains a prompt, you may use the `typeInDialog` method to type a value into the prompt:\n\n    $browser->typeInDialog('Hello World');\n\nTo close an open JavaScript dialog by clicking the \"OK\" button, you may invoke the `acceptDialog` method:\n\n    $browser->acceptDialog();\n\nTo close an open JavaScript dialog by clicking the \"Cancel\" button, you may invoke the `dismissDialog` method:\n\n    $browser->dismissDialog();\n\n<a name=\"interacting-with-iframes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":838,"to":860}}}}],["1095",{"pageContent":"Interacting With Inline Frames\n\nIf you need to interact with elements within an iframe, you may use the `withinFrame` method. All element interactions that take place within the closure provided to the `withinFrame` method will be scoped to the context of the specified iframe:\n\n    $browser->withinFrame('#credit-card-details', function ($browser) {\n        $browser->type('input[name=\"cardnumber\"]', '4242424242424242')\n            ->type('input[name=\"exp-date\"]', '12/24')\n            ->type('input[name=\"cvc\"]', '123');\n        })->press('Pay');\n    });\n\n<a name=\"scoping-selectors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":861,"to":872}}}}],["1096",{"pageContent":"Scoping Selectors\n\nSometimes you may wish to perform several operations while scoping all of the operations within a given selector. For example, you may wish to assert that some text exists only within a table and then click a button within that table. You may use the `with` method to accomplish this. All operations performed within the closure given to the `with` method will be scoped to the original selector:\n\n    $browser->with('.table', function (Browser $table) {\n        $table->assertSee('Hello World')\n              ->clickLink('Delete');\n    });\n\nYou may occasionally need to execute assertions outside of the current scope. You may use the `elsewhere` and `elsewhereWhenAvailable` methods to accomplish this:\n\n     $browser->with('.table', function (Browser $table) {\n        // Current scope is `body .table`...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":873,"to":885}}}}],["1097",{"pageContent":"$browser->with('.table', function (Browser $table) {\n        // Current scope is `body .table`...\n\n        $browser->elsewhere('.page-title', function (Browser $title) {\n            // Current scope is `body .page-title`...\n            $title->assertSee('Hello World');\n        });\n\n        $browser->elsewhereWhenAvailable('.page-title', function (Browser $title) {\n            // Current scope is `body .page-title`...\n            $title->assertSee('Hello World');\n        });\n     });\n\n<a name=\"waiting-for-elements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":885,"to":899}}}}],["1098",{"pageContent":"Waiting For Elements\n\nWhen testing applications that use JavaScript extensively, it often becomes necessary to \"wait\" for certain elements or data to be available before proceeding with a test. Dusk makes this a cinch. Using a variety of methods, you may wait for elements to become visible on the page or even wait until a given JavaScript expression evaluates to `true`.\n\n<a name=\"waiting\"></a>\n#### Waiting\n\nIf you just need to pause the test for a given number of milliseconds, use the `pause` method:\n\n    $browser->pause(1000);\n\nIf you need to pause the test only if a given condition is `true`, use the `pauseIf` method:\n\n    $browser->pauseIf(App::environment('production'), 1000);\n\nLikewise, if you need to pause the test unless a given condition is `true`, you may use the `pauseUnless` method:\n\n    $browser->pauseUnless(App::environment('testing'), 1000);\n\n<a name=\"waiting-for-selectors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":900,"to":919}}}}],["1099",{"pageContent":"Waiting For Selectors\n\nThe `waitFor` method may be used to pause the execution of the test until the element matching the given CSS or Dusk selector is displayed on the page. By default, this will pause the test for a maximum of five seconds before throwing an exception. If necessary, you may pass a custom timeout threshold as the second argument to the method:\n\n    // Wait a maximum of five seconds for the selector...\n    $browser->waitFor('.selector');\n\n    // Wait a maximum of one second for the selector...\n    $browser->waitFor('.selector', 1);\n\nYou may also wait until the element matching the given selector contains the given text:\n\n    // Wait a maximum of five seconds for the selector to contain the given text...\n    $browser->waitForTextIn('.selector', 'Hello World');\n\n    // Wait a maximum of one second for the selector to contain the given text...\n    $browser->waitForTextIn('.selector', 'Hello World', 1);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":920,"to":936}}}}],["1100",{"pageContent":"// Wait a maximum of one second for the selector to contain the given text...\n    $browser->waitForTextIn('.selector', 'Hello World', 1);\n\nYou may also wait until the element matching the given selector is missing from the page:\n\n    // Wait a maximum of five seconds until the selector is missing...\n    $browser->waitUntilMissing('.selector');\n\n    // Wait a maximum of one second until the selector is missing...\n    $browser->waitUntilMissing('.selector', 1);\n\nOr, you may wait until the element matching the given selector is enabled or disabled:\n\n    // Wait a maximum of five seconds until the selector is enabled...\n    $browser->waitUntilEnabled('.selector');\n\n    // Wait a maximum of one second until the selector is enabled...\n    $browser->waitUntilEnabled('.selector', 1);\n\n    // Wait a maximum of five seconds until the selector is disabled...\n    $browser->waitUntilDisabled('.selector');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":936,"to":956}}}}],["1101",{"pageContent":"// Wait a maximum of five seconds until the selector is disabled...\n    $browser->waitUntilDisabled('.selector');\n\n    // Wait a maximum of one second until the selector is disabled...\n    $browser->waitUntilDisabled('.selector', 1);\n\n<a name=\"scoping-selectors-when-available\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":956,"to":962}}}}],["1102",{"pageContent":"Scoping Selectors When Available\n\nOccasionally, you may wish to wait for an element to appear that matches a given selector and then interact with the element. For example, you may wish to wait until a modal window is available and then press the \"OK\" button within the modal. The `whenAvailable` method may be used to accomplish this. All element operations performed within the given closure will be scoped to the original selector:\n\n    $browser->whenAvailable('.modal', function (Browser $modal) {\n        $modal->assertSee('Hello World')\n              ->press('OK');\n    });\n\n<a name=\"waiting-for-text\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":963,"to":972}}}}],["1103",{"pageContent":"Waiting For Text\n\nThe `waitForText` method may be used to wait until the given text is displayed on the page:\n\n    // Wait a maximum of five seconds for the text...\n    $browser->waitForText('Hello World');\n\n    // Wait a maximum of one second for the text...\n    $browser->waitForText('Hello World', 1);\n\nYou may use the `waitUntilMissingText` method to wait until the displayed text has been removed from the page:\n\n    // Wait a maximum of five seconds for the text to be removed...\n    $browser->waitUntilMissingText('Hello World');\n\n    // Wait a maximum of one second for the text to be removed...\n    $browser->waitUntilMissingText('Hello World', 1);\n\n<a name=\"waiting-for-links\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":973,"to":991}}}}],["1104",{"pageContent":"Waiting For Links\n\nThe `waitForLink` method may be used to wait until the given link text is displayed on the page:\n\n    // Wait a maximum of five seconds for the link...\n    $browser->waitForLink('Create');\n\n    // Wait a maximum of one second for the link...\n    $browser->waitForLink('Create', 1);\n\n<a name=\"waiting-for-inputs\"></a>\n#### Waiting For Inputs\n\nThe `waitForInput` method may be used to wait until the given input field is visible on the page:\n\n    // Wait a maximum of five seconds for the input...\n    $browser->waitForInput($field);\n\n    // Wait a maximum of one second for the input...\n    $browser->waitForInput($field, 1);\n\n<a name=\"waiting-on-the-page-location\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":992,"to":1013}}}}],["1105",{"pageContent":"Waiting On The Page Location\n\nWhen making a path assertion such as `$browser->assertPathIs('/home')`, the assertion can fail if `window.location.pathname` is being updated asynchronously. You may use the `waitForLocation` method to wait for the location to be a given value:\n\n    $browser->waitForLocation('/secret');\n\nThe `waitForLocation` method can also be used to wait for the current window location to be a fully qualified URL:\n\n    $browser->waitForLocation('https://example.com/path');\n\nYou may also wait for a [named route's](/docs/{{version}}/routing#named-routes) location:\n\n    $browser->waitForRoute($routeName, $parameters);\n\n<a name=\"waiting-for-page-reloads\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1014,"to":1028}}}}],["1106",{"pageContent":"Waiting For Page Reloads\n\nIf you need to wait for a page to reload after performing an action, use the `waitForReload` method:\n\n    use Laravel\\Dusk\\Browser;\n\n    $browser->waitForReload(function (Browser $browser) {\n        $browser->press('Submit');\n    })\n    ->assertSee('Success!');\n\nSince the need to wait for the page to reload typically occurs after clicking a button, you may use the `clickAndWaitForReload` method for convenience:\n\n    $browser->clickAndWaitForReload('.selector')\n            ->assertSee('something');\n\n<a name=\"waiting-on-javascript-expressions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1029,"to":1045}}}}],["1107",{"pageContent":"Waiting On JavaScript Expressions\n\nSometimes you may wish to pause the execution of a test until a given JavaScript expression evaluates to `true`. You may easily accomplish this using the `waitUntil` method. When passing an expression to this method, you do not need to include the `return` keyword or an ending semi-colon:\n\n    // Wait a maximum of five seconds for the expression to be true...\n    $browser->waitUntil('App.data.servers.length > 0');\n\n    // Wait a maximum of one second for the expression to be true...\n    $browser->waitUntil('App.data.servers.length > 0', 1);\n\n<a name=\"waiting-on-vue-expressions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1046,"to":1056}}}}],["1108",{"pageContent":"Waiting On Vue Expressions\n\nThe `waitUntilVue` and `waitUntilVueIsNot` methods may be used to wait until a [Vue component](https://vuejs.org) attribute has a given value:\n\n    // Wait until the component attribute contains the given value...\n    $browser->waitUntilVue('user.name', 'Taylor', '@user');\n\n    // Wait until the component attribute doesn't contain the given value...\n    $browser->waitUntilVueIsNot('user.name', null, '@user');\n\n<a name=\"waiting-for-javascript-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1057,"to":1067}}}}],["1109",{"pageContent":"Waiting For JavaScript Events\n\nThe `waitForEvent` method can be used to pause the execution of a test until a JavaScript event occurs:\n\n    $browser->waitForEvent('load');\n\nThe event listener is attached to the current scope, which is the `body` element by default. When using a scoped selector, the event listener will be attached to the matching element:\n\n    $browser->with('iframe', function (Browser $iframe) {\n        // Wait for the iframe's load event...\n        $iframe->waitForEvent('load');\n    });\n\nYou may also provide a selector as the second argument to the `waitForEvent` method to attach the event listener to a specific element:\n\n    $browser->waitForEvent('load', '.selector');\n\nYou may also wait for events on the `document` and `window` objects:\n\n    // Wait until the document is scrolled...\n    $browser->waitForEvent('scroll', 'document');\n\n    // Wait a maximum of five seconds until the window is resized...\n    $browser->waitForEvent('resize', 'window', 5);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1068,"to":1091}}}}],["1110",{"pageContent":"// Wait a maximum of five seconds until the window is resized...\n    $browser->waitForEvent('resize', 'window', 5);\n\n<a name=\"waiting-with-a-callback\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1091,"to":1094}}}}],["1111",{"pageContent":"Waiting With A Callback\n\nMany of the \"wait\" methods in Dusk rely on the underlying `waitUsing` method. You may use this method directly to wait for a given closure to return `true`. The `waitUsing` method accepts the maximum number of seconds to wait, the interval at which the closure should be evaluated, the closure, and an optional failure message:\n\n    $browser->waitUsing(10, 1, function () use ($something) {\n        return $something->isReady();\n    }, \"Something wasn't ready in time.\");\n\n<a name=\"scrolling-an-element-into-view\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1095,"to":1103}}}}],["1112",{"pageContent":"Scrolling An Element Into View\n\nSometimes you may not be able to click on an element because it is outside of the viewable area of the browser. The `scrollIntoView` method will scroll the browser window until the element at the given selector is within the view:\n\n    $browser->scrollIntoView('.selector')\n            ->click('.selector');\n\n<a name=\"available-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1104,"to":1111}}}}],["1113",{"pageContent":"Available Assertions\n\nDusk provides a variety of assertions that you may make against your application. All of the available assertions are documented in the list below:\n\n<style>\n    .collection-method-list > p {\n        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n</style>\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1112,"to":1129}}}}],["1114",{"pageContent":"[assertTitle](#assert-title)\n[assertTitleContains](#assert-title-contains)\n[assertUrlIs](#assert-url-is)\n[assertSchemeIs](#assert-scheme-is)\n[assertSchemeIsNot](#assert-scheme-is-not)\n[assertHostIs](#assert-host-is)\n[assertHostIsNot](#assert-host-is-not)\n[assertPortIs](#assert-port-is)\n[assertPortIsNot](#assert-port-is-not)\n[assertPathBeginsWith](#assert-path-begins-with)\n[assertPathIs](#assert-path-is)\n[assertPathIsNot](#assert-path-is-not)\n[assertRouteIs](#assert-route-is)\n[assertQueryStringHas](#assert-query-string-has)\n[assertQueryStringMissing](#assert-query-string-missing)\n[assertFragmentIs](#assert-fragment-is)\n[assertFragmentBeginsWith](#assert-fragment-begins-with)\n[assertFragmentIsNot](#assert-fragment-is-not)\n[assertHasCookie](#assert-has-cookie)\n[assertHasPlainCookie](#assert-has-plain-cookie)\n[assertCookieMissing](#assert-cookie-missing)\n[assertPlainCookieMissing](#assert-plain-cookie-missing)\n[assertCookieValue](#assert-cookie-value)\n[assertPlainCookieValue](#assert-plain-cookie-value)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1131,"to":1154}}}}],["1115",{"pageContent":"[assertCookieMissing](#assert-cookie-missing)\n[assertPlainCookieMissing](#assert-plain-cookie-missing)\n[assertCookieValue](#assert-cookie-value)\n[assertPlainCookieValue](#assert-plain-cookie-value)\n[assertSee](#assert-see)\n[assertDontSee](#assert-dont-see)\n[assertSeeIn](#assert-see-in)\n[assertDontSeeIn](#assert-dont-see-in)\n[assertSeeAnythingIn](#assert-see-anything-in)\n[assertSeeNothingIn](#assert-see-nothing-in)\n[assertScript](#assert-script)\n[assertSourceHas](#assert-source-has)\n[assertSourceMissing](#assert-source-missing)\n[assertSeeLink](#assert-see-link)\n[assertDontSeeLink](#assert-dont-see-link)\n[assertInputValue](#assert-input-value)\n[assertInputValueIsNot](#assert-input-value-is-not)\n[assertChecked](#assert-checked)\n[assertNotChecked](#assert-not-checked)\n[assertIndeterminate](#assert-indeterminate)\n[assertRadioSelected](#assert-radio-selected)\n[assertRadioNotSelected](#assert-radio-not-selected)\n[assertSelected](#assert-selected)\n[assertNotSelected](#assert-not-selected)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1154,"to":1177}}}}],["1116",{"pageContent":"[assertRadioSelected](#assert-radio-selected)\n[assertRadioNotSelected](#assert-radio-not-selected)\n[assertSelected](#assert-selected)\n[assertNotSelected](#assert-not-selected)\n[assertSelectHasOptions](#assert-select-has-options)\n[assertSelectMissingOptions](#assert-select-missing-options)\n[assertSelectHasOption](#assert-select-has-option)\n[assertSelectMissingOption](#assert-select-missing-option)\n[assertValue](#assert-value)\n[assertValueIsNot](#assert-value-is-not)\n[assertAttribute](#assert-attribute)\n[assertAttributeContains](#assert-attribute-contains)\n[assertAriaAttribute](#assert-aria-attribute)\n[assertDataAttribute](#assert-data-attribute)\n[assertVisible](#assert-visible)\n[assertPresent](#assert-present)\n[assertNotPresent](#assert-not-present)\n[assertMissing](#assert-missing)\n[assertInputPresent](#assert-input-present)\n[assertInputMissing](#assert-input-missing)\n[assertDialogOpened](#assert-dialog-opened)\n[assertEnabled](#assert-enabled)\n[assertDisabled](#assert-disabled)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1177,"to":1199}}}}],["1117",{"pageContent":"[assertInputPresent](#assert-input-present)\n[assertInputMissing](#assert-input-missing)\n[assertDialogOpened](#assert-dialog-opened)\n[assertEnabled](#assert-enabled)\n[assertDisabled](#assert-disabled)\n[assertButtonEnabled](#assert-button-enabled)\n[assertButtonDisabled](#assert-button-disabled)\n[assertFocused](#assert-focused)\n[assertNotFocused](#assert-not-focused)\n[assertAuthenticated](#assert-authenticated)\n[assertGuest](#assert-guest)\n[assertAuthenticatedAs](#assert-authenticated-as)\n[assertVue](#assert-vue)\n[assertVueIsNot](#assert-vue-is-not)\n[assertVueContains](#assert-vue-contains)\n[assertVueDoesNotContain](#assert-vue-does-not-contain)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1199,"to":1214}}}}],["1118",{"pageContent":"</div>\n\n<a name=\"assert-title\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1216,"to":1218}}}}],["1119",{"pageContent":"assertTitle\n\nAssert that the page title matches the given text:\n\n    $browser->assertTitle($title);\n\n<a name=\"assert-title-contains\"></a>\n#### assertTitleContains\n\nAssert that the page title contains the given text:\n\n    $browser->assertTitleContains($title);\n\n<a name=\"assert-url-is\"></a>\n#### assertUrlIs\n\nAssert that the current URL (without the query string) matches the given string:\n\n    $browser->assertUrlIs($url);\n\n<a name=\"assert-scheme-is\"></a>\n#### assertSchemeIs\n\nAssert that the current URL scheme matches the given scheme:\n\n    $browser->assertSchemeIs($scheme);\n\n<a name=\"assert-scheme-is-not\"></a>\n#### assertSchemeIsNot\n\nAssert that the current URL scheme does not match the given scheme:\n\n    $browser->assertSchemeIsNot($scheme);\n\n<a name=\"assert-host-is\"></a>\n#### assertHostIs\n\nAssert that the current URL host matches the given host:\n\n    $browser->assertHostIs($host);\n\n<a name=\"assert-host-is-not\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1219,"to":1260}}}}],["1120",{"pageContent":"assertHostIs\n\nAssert that the current URL host matches the given host:\n\n    $browser->assertHostIs($host);\n\n<a name=\"assert-host-is-not\"></a>\n#### assertHostIsNot\n\nAssert that the current URL host does not match the given host:\n\n    $browser->assertHostIsNot($host);\n\n<a name=\"assert-port-is\"></a>\n#### assertPortIs\n\nAssert that the current URL port matches the given port:\n\n    $browser->assertPortIs($port);\n\n<a name=\"assert-port-is-not\"></a>\n#### assertPortIsNot\n\nAssert that the current URL port does not match the given port:\n\n    $browser->assertPortIsNot($port);\n\n<a name=\"assert-path-begins-with\"></a>\n#### assertPathBeginsWith\n\nAssert that the current URL path begins with the given path:\n\n    $browser->assertPathBeginsWith('/home');\n\n<a name=\"assert-path-is\"></a>\n#### assertPathIs\n\nAssert that the current path matches the given path:\n\n    $browser->assertPathIs('/home');\n\n<a name=\"assert-path-is-not\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1260,"to":1301}}}}],["1121",{"pageContent":"assertPathIs\n\nAssert that the current path matches the given path:\n\n    $browser->assertPathIs('/home');\n\n<a name=\"assert-path-is-not\"></a>\n#### assertPathIsNot\n\nAssert that the current path does not match the given path:\n\n    $browser->assertPathIsNot('/home');\n\n<a name=\"assert-route-is\"></a>\n#### assertRouteIs\n\nAssert that the current URL matches the given [named route's](/docs/{{version}}/routing#named-routes) URL:\n\n    $browser->assertRouteIs($name, $parameters);\n\n<a name=\"assert-query-string-has\"></a>\n#### assertQueryStringHas\n\nAssert that the given query string parameter is present:\n\n    $browser->assertQueryStringHas($name);\n\nAssert that the given query string parameter is present and has a given value:\n\n    $browser->assertQueryStringHas($name, $value);\n\n<a name=\"assert-query-string-missing\"></a>\n#### assertQueryStringMissing\n\nAssert that the given query string parameter is missing:\n\n    $browser->assertQueryStringMissing($name);\n\n<a name=\"assert-fragment-is\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1301,"to":1339}}}}],["1122",{"pageContent":"assertQueryStringMissing\n\nAssert that the given query string parameter is missing:\n\n    $browser->assertQueryStringMissing($name);\n\n<a name=\"assert-fragment-is\"></a>\n#### assertFragmentIs\n\nAssert that the URL's current hash fragment matches the given fragment:\n\n    $browser->assertFragmentIs('anchor');\n\n<a name=\"assert-fragment-begins-with\"></a>\n#### assertFragmentBeginsWith\n\nAssert that the URL's current hash fragment begins with the given fragment:\n\n    $browser->assertFragmentBeginsWith('anchor');\n\n<a name=\"assert-fragment-is-not\"></a>\n#### assertFragmentIsNot\n\nAssert that the URL's current hash fragment does not match the given fragment:\n\n    $browser->assertFragmentIsNot('anchor');\n\n<a name=\"assert-has-cookie\"></a>\n#### assertHasCookie\n\nAssert that the given encrypted cookie is present:\n\n    $browser->assertHasCookie($name);\n\n<a name=\"assert-has-plain-cookie\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1339,"to":1373}}}}],["1123",{"pageContent":"assertHasCookie\n\nAssert that the given encrypted cookie is present:\n\n    $browser->assertHasCookie($name);\n\n<a name=\"assert-has-plain-cookie\"></a>\n#### assertHasPlainCookie\n\nAssert that the given unencrypted cookie is present:\n\n    $browser->assertHasPlainCookie($name);\n\n<a name=\"assert-cookie-missing\"></a>\n#### assertCookieMissing\n\nAssert that the given encrypted cookie is not present:\n\n    $browser->assertCookieMissing($name);\n\n<a name=\"assert-plain-cookie-missing\"></a>\n#### assertPlainCookieMissing\n\nAssert that the given unencrypted cookie is not present:\n\n    $browser->assertPlainCookieMissing($name);\n\n<a name=\"assert-cookie-value\"></a>\n#### assertCookieValue\n\nAssert that an encrypted cookie has a given value:\n\n    $browser->assertCookieValue($name, $value);\n\n<a name=\"assert-plain-cookie-value\"></a>\n#### assertPlainCookieValue\n\nAssert that an unencrypted cookie has a given value:\n\n    $browser->assertPlainCookieValue($name, $value);\n\n<a name=\"assert-see\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1373,"to":1414}}}}],["1124",{"pageContent":"assertPlainCookieValue\n\nAssert that an unencrypted cookie has a given value:\n\n    $browser->assertPlainCookieValue($name, $value);\n\n<a name=\"assert-see\"></a>\n#### assertSee\n\nAssert that the given text is present on the page:\n\n    $browser->assertSee($text);\n\n<a name=\"assert-dont-see\"></a>\n#### assertDontSee\n\nAssert that the given text is not present on the page:\n\n    $browser->assertDontSee($text);\n\n<a name=\"assert-see-in\"></a>\n#### assertSeeIn\n\nAssert that the given text is present within the selector:\n\n    $browser->assertSeeIn($selector, $text);\n\n<a name=\"assert-dont-see-in\"></a>\n#### assertDontSeeIn\n\nAssert that the given text is not present within the selector:\n\n    $browser->assertDontSeeIn($selector, $text);\n\n<a name=\"assert-see-anything-in\"></a>\n#### assertSeeAnythingIn\n\nAssert that any text is present within the selector:\n\n    $browser->assertSeeAnythingIn($selector);\n\n<a name=\"assert-see-nothing-in\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1414,"to":1455}}}}],["1125",{"pageContent":"assertSeeAnythingIn\n\nAssert that any text is present within the selector:\n\n    $browser->assertSeeAnythingIn($selector);\n\n<a name=\"assert-see-nothing-in\"></a>\n#### assertSeeNothingIn\n\nAssert that no text is present within the selector:\n\n    $browser->assertSeeNothingIn($selector);\n\n<a name=\"assert-script\"></a>\n#### assertScript\n\nAssert that the given JavaScript expression evaluates to the given value:\n\n    $browser->assertScript('window.isLoaded')\n            ->assertScript('document.readyState', 'complete');\n\n<a name=\"assert-source-has\"></a>\n#### assertSourceHas\n\nAssert that the given source code is present on the page:\n\n    $browser->assertSourceHas($code);\n\n<a name=\"assert-source-missing\"></a>\n#### assertSourceMissing\n\nAssert that the given source code is not present on the page:\n\n    $browser->assertSourceMissing($code);\n\n<a name=\"assert-see-link\"></a>\n#### assertSeeLink\n\nAssert that the given link is present on the page:\n\n    $browser->assertSeeLink($linkText);\n\n<a name=\"assert-dont-see-link\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1455,"to":1497}}}}],["1126",{"pageContent":"assertSeeLink\n\nAssert that the given link is present on the page:\n\n    $browser->assertSeeLink($linkText);\n\n<a name=\"assert-dont-see-link\"></a>\n#### assertDontSeeLink\n\nAssert that the given link is not present on the page:\n\n    $browser->assertDontSeeLink($linkText);\n\n<a name=\"assert-input-value\"></a>\n#### assertInputValue\n\nAssert that the given input field has the given value:\n\n    $browser->assertInputValue($field, $value);\n\n<a name=\"assert-input-value-is-not\"></a>\n#### assertInputValueIsNot\n\nAssert that the given input field does not have the given value:\n\n    $browser->assertInputValueIsNot($field, $value);\n\n<a name=\"assert-checked\"></a>\n#### assertChecked\n\nAssert that the given checkbox is checked:\n\n    $browser->assertChecked($field);\n\n<a name=\"assert-not-checked\"></a>\n#### assertNotChecked\n\nAssert that the given checkbox is not checked:\n\n    $browser->assertNotChecked($field);\n\n<a name=\"assert-indeterminate\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1497,"to":1538}}}}],["1127",{"pageContent":"assertNotChecked\n\nAssert that the given checkbox is not checked:\n\n    $browser->assertNotChecked($field);\n\n<a name=\"assert-indeterminate\"></a>\n#### assertIndeterminate\n\nAssert that the given checkbox is in an indeterminate state:\n\n    $browser->assertIndeterminate($field);\n\n<a name=\"assert-radio-selected\"></a>\n#### assertRadioSelected\n\nAssert that the given radio field is selected:\n\n    $browser->assertRadioSelected($field, $value);\n\n<a name=\"assert-radio-not-selected\"></a>\n#### assertRadioNotSelected\n\nAssert that the given radio field is not selected:\n\n    $browser->assertRadioNotSelected($field, $value);\n\n<a name=\"assert-selected\"></a>\n#### assertSelected\n\nAssert that the given dropdown has the given value selected:\n\n    $browser->assertSelected($field, $value);\n\n<a name=\"assert-not-selected\"></a>\n#### assertNotSelected\n\nAssert that the given dropdown does not have the given value selected:\n\n    $browser->assertNotSelected($field, $value);\n\n<a name=\"assert-select-has-options\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1538,"to":1579}}}}],["1128",{"pageContent":"assertNotSelected\n\nAssert that the given dropdown does not have the given value selected:\n\n    $browser->assertNotSelected($field, $value);\n\n<a name=\"assert-select-has-options\"></a>\n#### assertSelectHasOptions\n\nAssert that the given array of values are available to be selected:\n\n    $browser->assertSelectHasOptions($field, $values);\n\n<a name=\"assert-select-missing-options\"></a>\n#### assertSelectMissingOptions\n\nAssert that the given array of values are not available to be selected:\n\n    $browser->assertSelectMissingOptions($field, $values);\n\n<a name=\"assert-select-has-option\"></a>\n#### assertSelectHasOption\n\nAssert that the given value is available to be selected on the given field:\n\n    $browser->assertSelectHasOption($field, $value);\n\n<a name=\"assert-select-missing-option\"></a>\n#### assertSelectMissingOption\n\nAssert that the given value is not available to be selected:\n\n    $browser->assertSelectMissingOption($field, $value);\n\n<a name=\"assert-value\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1579,"to":1613}}}}],["1129",{"pageContent":"assertSelectMissingOption\n\nAssert that the given value is not available to be selected:\n\n    $browser->assertSelectMissingOption($field, $value);\n\n<a name=\"assert-value\"></a>\n#### assertValue\n\nAssert that the element matching the given selector has the given value:\n\n    $browser->assertValue($selector, $value);\n\n<a name=\"assert-value-is-not\"></a>\n#### assertValueIsNot\n\nAssert that the element matching the given selector does not have the given value:\n\n    $browser->assertValueIsNot($selector, $value);\n\n<a name=\"assert-attribute\"></a>\n#### assertAttribute\n\nAssert that the element matching the given selector has the given value in the provided attribute:\n\n    $browser->assertAttribute($selector, $attribute, $value);\n\n<a name=\"assert-attribute-contains\"></a>\n#### assertAttributeContains\n\nAssert that the element matching the given selector contains the given value in the provided attribute:\n\n    $browser->assertAttributeContains($selector, $attribute, $value);\n\n<a name=\"assert-aria-attribute\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1613,"to":1647}}}}],["1130",{"pageContent":"assertAriaAttribute\n\nAssert that the element matching the given selector has the given value in the provided aria attribute:\n\n    $browser->assertAriaAttribute($selector, $attribute, $value);\n\nFor example, given the markup `<button aria-label=\"Add\"></button>`, you may assert against the `aria-label` attribute like so:\n\n    $browser->assertAriaAttribute('button', 'label', 'Add')\n\n<a name=\"assert-data-attribute\"></a>\n#### assertDataAttribute\n\nAssert that the element matching the given selector has the given value in the provided data attribute:\n\n    $browser->assertDataAttribute($selector, $attribute, $value);\n\nFor example, given the markup `<tr id=\"row-1\" data-content=\"attendees\"></tr>`, you may assert against the `data-label` attribute like so:\n\n    $browser->assertDataAttribute('#row-1', 'content', 'attendees')\n\n<a name=\"assert-visible\"></a>\n#### assertVisible\n\nAssert that the element matching the given selector is visible:\n\n    $browser->assertVisible($selector);\n\n<a name=\"assert-present\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1648,"to":1676}}}}],["1131",{"pageContent":"assertVisible\n\nAssert that the element matching the given selector is visible:\n\n    $browser->assertVisible($selector);\n\n<a name=\"assert-present\"></a>\n#### assertPresent\n\nAssert that the element matching the given selector is present in the source:\n\n    $browser->assertPresent($selector);\n\n<a name=\"assert-not-present\"></a>\n#### assertNotPresent\n\nAssert that the element matching the given selector is not present in the source:\n\n    $browser->assertNotPresent($selector);\n\n<a name=\"assert-missing\"></a>\n#### assertMissing\n\nAssert that the element matching the given selector is not visible:\n\n    $browser->assertMissing($selector);\n\n<a name=\"assert-input-present\"></a>\n#### assertInputPresent\n\nAssert that an input with the given name is present:\n\n    $browser->assertInputPresent($name);\n\n<a name=\"assert-input-missing\"></a>\n#### assertInputMissing\n\nAssert that an input with the given name is not present in the source:\n\n    $browser->assertInputMissing($name);\n\n<a name=\"assert-dialog-opened\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1676,"to":1717}}}}],["1132",{"pageContent":"assertInputMissing\n\nAssert that an input with the given name is not present in the source:\n\n    $browser->assertInputMissing($name);\n\n<a name=\"assert-dialog-opened\"></a>\n#### assertDialogOpened\n\nAssert that a JavaScript dialog with the given message has been opened:\n\n    $browser->assertDialogOpened($message);\n\n<a name=\"assert-enabled\"></a>\n#### assertEnabled\n\nAssert that the given field is enabled:\n\n    $browser->assertEnabled($field);\n\n<a name=\"assert-disabled\"></a>\n#### assertDisabled\n\nAssert that the given field is disabled:\n\n    $browser->assertDisabled($field);\n\n<a name=\"assert-button-enabled\"></a>\n#### assertButtonEnabled\n\nAssert that the given button is enabled:\n\n    $browser->assertButtonEnabled($button);\n\n<a name=\"assert-button-disabled\"></a>\n#### assertButtonDisabled\n\nAssert that the given button is disabled:\n\n    $browser->assertButtonDisabled($button);\n\n<a name=\"assert-focused\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1717,"to":1758}}}}],["1133",{"pageContent":"assertButtonDisabled\n\nAssert that the given button is disabled:\n\n    $browser->assertButtonDisabled($button);\n\n<a name=\"assert-focused\"></a>\n#### assertFocused\n\nAssert that the given field is focused:\n\n    $browser->assertFocused($field);\n\n<a name=\"assert-not-focused\"></a>\n#### assertNotFocused\n\nAssert that the given field is not focused:\n\n    $browser->assertNotFocused($field);\n\n<a name=\"assert-authenticated\"></a>\n#### assertAuthenticated\n\nAssert that the user is authenticated:\n\n    $browser->assertAuthenticated();\n\n<a name=\"assert-guest\"></a>\n#### assertGuest\n\nAssert that the user is not authenticated:\n\n    $browser->assertGuest();\n\n<a name=\"assert-authenticated-as\"></a>\n#### assertAuthenticatedAs\n\nAssert that the user is authenticated as the given user:\n\n    $browser->assertAuthenticatedAs($user);\n\n<a name=\"assert-vue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1758,"to":1799}}}}],["1134",{"pageContent":"assertVue\n\nDusk even allows you to make assertions on the state of [Vue component](https://vuejs.org) data. For example, imagine your application contains the following Vue component:\n\n    // HTML...\n\n    <profile dusk=\"profile-component\"></profile>\n\n    // Component Definition...\n\n    Vue.component('profile', {\n        template: '<div>{{ user.name }}</div>',\n\n        data: function () {\n            return {\n                user: {\n                    name: 'Taylor'\n                }\n            };\n        }\n    });\n\nYou may assert on the state of the Vue component like so:\n\n    /**\n     * A basic Vue test example.\n     */\n    public function test_vue(): void\n    {\n        $this->browse(function (Browser $browser) {\n            $browser->visit('/')\n                    ->assertVue('user.name', 'Taylor', '@profile-component');\n        });\n    }\n\n<a name=\"assert-vue-is-not\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1800,"to":1835}}}}],["1135",{"pageContent":"assertVueIsNot\n\nAssert that a given Vue component data property does not match the given value:\n\n    $browser->assertVueIsNot($property, $value, $componentSelector = null);\n\n<a name=\"assert-vue-contains\"></a>\n#### assertVueContains\n\nAssert that a given Vue component data property is an array and contains the given value:\n\n    $browser->assertVueContains($property, $value, $componentSelector = null);\n\n<a name=\"assert-vue-does-not-contain\"></a>\n#### assertVueDoesNotContain\n\nAssert that a given Vue component data property is an array and does not contain the given value:\n\n    $browser->assertVueDoesNotContain($property, $value, $componentSelector = null);\n\n<a name=\"pages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1836,"to":1856}}}}],["1136",{"pageContent":"Pages\n\nSometimes, tests require several complicated actions to be performed in sequence. This can make your tests harder to read and understand. Dusk Pages allow you to define expressive actions that may then be performed on a given page via a single method. Pages also allow you to define short-cuts to common selectors for your application or for a single page.\n\n<a name=\"generating-pages\"></a>\n### Generating Pages\n\nTo generate a page object, execute the `dusk:page` Artisan command. All page objects will be placed in your application's `tests/Browser/Pages` directory:\n\n    php artisan dusk:page Login\n\n<a name=\"configuring-pages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1857,"to":1868}}}}],["1137",{"pageContent":"Configuring Pages\n\nBy default, pages have three methods: `url`, `assert`, and `elements`. We will discuss the `url` and `assert` methods now. The `elements` method will be [discussed in more detail below](#shorthand-selectors).\n\n<a name=\"the-url-method\"></a>\n#### The `url` Method\n\nThe `url` method should return the path of the URL that represents the page. Dusk will use this URL when navigating to the page in the browser:\n\n    /**\n     * Get the URL for the page.\n     */\n    public function url(): string\n    {\n        return '/login';\n    }\n\n<a name=\"the-assert-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1869,"to":1886}}}}],["1138",{"pageContent":"The `assert` Method\n\nThe `assert` method may make any assertions necessary to verify that the browser is actually on the given page. It is not actually necessary to place anything within this method; however, you are free to make these assertions if you wish. These assertions will be run automatically when navigating to the page:\n\n    /**\n     * Assert that the browser is on the page.\n     */\n    public function assert(Browser $browser): void\n    {\n        $browser->assertPathIs($this->url());\n    }\n\n<a name=\"navigating-to-pages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1887,"to":1899}}}}],["1139",{"pageContent":"Navigating To Pages\n\nOnce a page has been defined, you may navigate to it using the `visit` method:\n\n    use Tests\\Browser\\Pages\\Login;\n\n    $browser->visit(new Login);\n\nSometimes you may already be on a given page and need to \"load\" the page's selectors and methods into the current test context. This is common when pressing a button and being redirected to a given page without explicitly navigating to it. In this situation, you may use the `on` method to load the page:\n\n    use Tests\\Browser\\Pages\\CreatePlaylist;\n\n    $browser->visit('/dashboard')\n            ->clickLink('Create Playlist')\n            ->on(new CreatePlaylist)\n            ->assertSee('@create');\n\n<a name=\"shorthand-selectors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1900,"to":1917}}}}],["1140",{"pageContent":"Shorthand Selectors\n\nThe `elements` method within page classes allows you to define quick, easy-to-remember shortcuts for any CSS selector on your page. For example, let's define a shortcut for the \"email\" input field of the application's login page:\n\n    /**\n     * Get the element shortcuts for the page.\n     *\n     * @return array<string, string>\n     */\n    public function elements(): array\n    {\n        return [\n            '@email' => 'input[name=email]',\n        ];\n    }\n\nOnce the shortcut has been defined, you may use the shorthand selector anywhere you would typically use a full CSS selector:\n\n    $browser->type('@email', 'taylor@laravel.com');\n\n<a name=\"global-shorthand-selectors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1918,"to":1938}}}}],["1141",{"pageContent":"Global Shorthand Selectors\n\nAfter installing Dusk, a base `Page` class will be placed in your `tests/Browser/Pages` directory. This class contains a `siteElements` method which may be used to define global shorthand selectors that should be available on every page throughout your application:\n\n    /**\n     * Get the global element shortcuts for the site.\n     *\n     * @return array<string, string>\n     */\n    public static function siteElements(): array\n    {\n        return [\n            '@element' => '#selector',\n        ];\n    }\n\n<a name=\"page-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1939,"to":1955}}}}],["1142",{"pageContent":"Page Methods\n\nIn addition to the default methods defined on pages, you may define additional methods which may be used throughout your tests. For example, let's imagine we are building a music management application. A common action for one page of the application might be to create a playlist. Instead of re-writing the logic to create a playlist in each test, you may define a `createPlaylist` method on a page class:\n\n    <?php\n\n    namespace Tests\\Browser\\Pages;\n\n    use Laravel\\Dusk\\Browser;\n\n    class Dashboard extends Page\n    {\n        // Other page methods...\n\n        /**\n         * Create a new playlist.\n         */\n        public function createPlaylist(Browser $browser, string $name): void\n        {\n            $browser->type('name', $name)\n                    ->check('share')\n                    ->press('Create Playlist');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1956,"to":1979}}}}],["1143",{"pageContent":"Once the method has been defined, you may use it within any test that utilizes the page. The browser instance will automatically be passed as the first argument to custom page methods:\n\n    use Tests\\Browser\\Pages\\Dashboard;\n\n    $browser->visit(new Dashboard)\n            ->createPlaylist('My Playlist')\n            ->assertSee('My Playlist');\n\n<a name=\"components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1981,"to":1989}}}}],["1144",{"pageContent":"Components\n\nComponents are similar to Dusk’s “page objects”, but are intended for pieces of UI and functionality that are re-used throughout your application, such as a navigation bar or notification window. As such, components are not bound to specific URLs.\n\n<a name=\"generating-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1990,"to":1994}}}}],["1145",{"pageContent":"Generating Components\n\nTo generate a component, execute the `dusk:component` Artisan command. New components are placed in the `tests/Browser/Components` directory:\n\n    php artisan dusk:component DatePicker\n\nAs shown above, a \"date picker\" is an example of a component that might exist throughout your application on a variety of pages. It can become cumbersome to manually write the browser automation logic to select a date in dozens of tests throughout your test suite. Instead, we can define a Dusk component to represent the date picker, allowing us to encapsulate that logic within the component:\n\n    <?php\n\n    namespace Tests\\Browser\\Components;\n\n    use Laravel\\Dusk\\Browser;\n    use Laravel\\Dusk\\Component as BaseComponent;\n\n    class DatePicker extends BaseComponent\n    {\n        /**\n         * Get the root selector for the component.\n         */\n        public function selector(): string\n        {\n            return '.date-picker';\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":1995,"to":2018}}}}],["1146",{"pageContent":"/**\n         * Assert that the browser page contains the component.\n         */\n        public function assert(Browser $browser): void\n        {\n            $browser->assertVisible($this->selector());\n        }\n\n        /**\n         * Get the element shortcuts for the component.\n         *\n         * @return array<string, string>\n         */\n        public function elements(): array\n        {\n            return [\n                '@date-field' => 'input.datepicker-input',\n                '@year-list' => 'div > div.datepicker-years',\n                '@month-list' => 'div > div.datepicker-months',\n                '@day-list' => 'div > div.datepicker-days',\n            ];\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2020,"to":2041}}}}],["1147",{"pageContent":"/**\n         * Select the given date.\n         */\n        public function selectDate(Browser $browser, int $year, int $month, int $day): void\n        {\n            $browser->click('@date-field')\n                    ->within('@year-list', function (Browser $browser) use ($year) {\n                        $browser->click($year);\n                    })\n                    ->within('@month-list', function (Browser $browser) use ($month) {\n                        $browser->click($month);\n                    })\n                    ->within('@day-list', function (Browser $browser) use ($day) {\n                        $browser->click($day);\n                    });\n        }\n    }\n\n<a name=\"using-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2043,"to":2061}}}}],["1148",{"pageContent":"Using Components\n\nOnce the component has been defined, we can easily select a date within the date picker from any test. And, if the logic necessary to select a date changes, we only need to update the component:\n\n    <?php\n\n    namespace Tests\\Browser;\n\n    use Illuminate\\Foundation\\Testing\\DatabaseMigrations;\n    use Laravel\\Dusk\\Browser;\n    use Tests\\Browser\\Components\\DatePicker;\n    use Tests\\DuskTestCase;\n\n    class ExampleTest extends DuskTestCase\n    {\n        /**\n         * A basic component test example.\n         */\n        public function test_basic_example(): void\n        {\n            $this->browse(function (Browser $browser) {\n                $browser->visit('/')\n                        ->within(new DatePicker, function (Browser $browser) {\n                            $browser->selectDate(2019, 1, 30);\n                        })\n                        ->assertSee('January');\n            });\n        }\n    }\n\n<a name=\"continuous-integration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2062,"to":2092}}}}],["1149",{"pageContent":"Continuous Integration\n\n> **Warning**\n> Most Dusk continuous integration configurations expect your Laravel application to be served using the built-in PHP development server on port 8000. Therefore, before continuing, you should ensure that your continuous integration environment has an `APP_URL` environment variable value of `http://127.0.0.1:8000`.\n\n<a name=\"running-tests-on-heroku-ci\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2093,"to":2098}}}}],["1150",{"pageContent":"Heroku CI\n\nTo run Dusk tests on [Heroku CI](https://www.heroku.com/continuous-integration), add the following Google Chrome buildpack and scripts to your Heroku `app.json` file:\n\n    {\n      \"environments\": {\n        \"test\": {\n          \"buildpacks\": [\n            { \"url\": \"heroku/php\" },\n            { \"url\": \"https://github.com/heroku/heroku-buildpack-google-chrome\" }\n          ],\n          \"scripts\": {\n            \"test-setup\": \"cp .env.testing .env\",\n            \"test\": \"nohup bash -c './vendor/laravel/dusk/bin/chromedriver-linux > /dev/null 2>&1 &' && nohup bash -c 'php artisan serve --no-reload > /dev/null 2>&1 &' && php artisan dusk\"\n          }\n        }\n      }\n    }\n\n<a name=\"running-tests-on-travis-ci\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2099,"to":2118}}}}],["1151",{"pageContent":"Travis CI\n\nTo run your Dusk tests on [Travis CI](https://travis-ci.org), use the following `.travis.yml` configuration. Since Travis CI is not a graphical environment, we will need to take some extra steps in order to launch a Chrome browser. In addition, we will use `php artisan serve` to launch PHP's built-in web server:\n\n```yaml\nlanguage: php\n\nphp:\n  - 7.3\n\naddons:\n  chrome: stable\n\ninstall:\n  - cp .env.testing .env\n  - travis_retry composer install --no-interaction --prefer-dist\n  - php artisan key:generate\n  - php artisan dusk:chrome-driver\n\nbefore_script:\n  - google-chrome-stable --headless --disable-gpu --remote-debugging-port=9222 http://localhost &\n  - php artisan serve --no-reload &\n\nscript:\n  - php artisan dusk\n```\n\n<a name=\"running-tests-on-github-actions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2119,"to":2146}}}}],["1152",{"pageContent":"GitHub Actions\n\nIf you are using [GitHub Actions](https://github.com/features/actions) to run your Dusk tests, you may use the following configuration file as a starting point. Like TravisCI, we will use the `php artisan serve` command to launch PHP's built-in web server:\n\n```yaml\nname: CI\non: [push]\njobs:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2147,"to":2154}}}}],["1153",{"pageContent":"dusk-php:\n    runs-on: ubuntu-latest\n    env:\n      APP_URL: \"http://127.0.0.1:8000\"\n      DB_USERNAME: root\n      DB_PASSWORD: root\n      MAIL_MAILER: log\n    steps:\n      - uses: actions/checkout@v4\n      - name: Prepare The Environment\n        run: cp .env.example .env\n      - name: Create Database\n        run: |\n          sudo systemctl start mysql\n          mysql --user=\"root\" --password=\"root\" -e \"CREATE DATABASE \\`my-database\\` character set UTF8mb4 collate utf8mb4_bin;\"\n      - name: Install Composer Dependencies\n        run: composer install --no-progress --prefer-dist --optimize-autoloader\n      - name: Generate Application Key\n        run: php artisan key:generate\n      - name: Upgrade Chrome Driver\n        run: php artisan dusk:chrome-driver --detect\n      - name: Start Chrome Driver\n        run: ./vendor/laravel/dusk/bin/chromedriver-linux &\n      - name: Run Laravel Server\n        run: php artisan serve --no-reload &\n      - name: Run Dusk Tests\n        run: php artisan dusk","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2156,"to":2182}}}}],["1154",{"pageContent":"run: ./vendor/laravel/dusk/bin/chromedriver-linux &\n      - name: Run Laravel Server\n        run: php artisan serve --no-reload &\n      - name: Run Dusk Tests\n        run: php artisan dusk\n      - name: Upload Screenshots\n        if: failure()\n        uses: actions/upload-artifact@v2\n        with:\n          name: screenshots\n          path: tests/Browser/screenshots\n      - name: Upload Console Logs\n        if: failure()\n        uses: actions/upload-artifact@v2\n        with:\n          name: console\n          path: tests/Browser/console","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2182,"to":2198}}}}],["1155",{"pageContent":"<a name=\"running-tests-on-chipper-ci\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2201,"to":2201}}}}],["1156",{"pageContent":"Chipper CI\n\nIf you are using [Chipper CI](https://chipperci.com) to run your Dusk tests, you may use the following configuration file as a starting point. We will use PHP's built-in server to run Laravel so we can listen for requests:\n\n```yaml\n# file .chipperci.yml\nversion: 1\n\nenvironment:\n  php: 8.2\n  node: 16\n\n# Include Chrome in the build environment\nservices:\n  - dusk\n\n# Build all commits\non:\n   push:\n      branches: .*\n\npipeline:\n  - name: Setup\n    cmd: |\n      cp -v .env.example .env\n      composer install --no-interaction --prefer-dist --optimize-autoloader\n      php artisan key:generate\n      \n      # Create a dusk env file, ensuring APP_URL uses BUILD_HOST\n      cp -v .env .env.dusk.ci\n      sed -i \"s@APP_URL=.*@APP_URL=http://$BUILD_HOST:8000@g\" .env.dusk.ci\n\n  - name: Compile Assets\n    cmd: |\n      npm ci --no-audit\n      npm run build","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2202,"to":2237}}}}],["1157",{"pageContent":"- name: Compile Assets\n    cmd: |\n      npm ci --no-audit\n      npm run build\n\n  - name: Browser Tests\n    cmd: |\n      php -S [::0]:8000 -t public 2>server.log &\n      sleep 2\n      php artisan dusk:chrome-driver $CHROME_DRIVER\n      php artisan dusk --env=ci","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2237,"to":2247}}}}],["1158",{"pageContent":"To learn more about running Dusk tests on Chipper CI, including how to use databases, consult the [official Chipper CI documentation](https://chipperci.com/docs/testing/laravel-dusk-new/).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/dusk.md","loc":{"lines":{"from":2250,"to":2250}}}}],["1159",{"pageContent":"# Eloquent: Collections\n\n- [Introduction](#introduction)\n- [Available Methods](#available-methods)\n- [Custom Collections](#custom-collections)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":1,"to":7}}}}],["1160",{"pageContent":"Introduction\n\nAll Eloquent methods that return more than one model result will return instances of the `Illuminate\\Database\\Eloquent\\Collection` class, including results retrieved via the `get` method or accessed via a relationship. The Eloquent collection object extends Laravel's [base collection](/docs/{{version}}/collections), so it naturally inherits dozens of methods used to fluently work with the underlying array of Eloquent models. Be sure to review the Laravel collection documentation to learn all about these helpful methods!\n\nAll collections also serve as iterators, allowing you to loop over them as if they were simple PHP arrays:\n\n    use App\\Models\\User;\n\n    $users = User::where('active', 1)->get();\n\n    foreach ($users as $user) {\n        echo $user->name;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":8,"to":20}}}}],["1161",{"pageContent":"use App\\Models\\User;\n\n    $users = User::where('active', 1)->get();\n\n    foreach ($users as $user) {\n        echo $user->name;\n    }\n\nHowever, as previously mentioned, collections are much more powerful than arrays and expose a variety of map / reduce operations that may be chained using an intuitive interface. For example, we may remove all inactive models and then gather the first name for each remaining user:\n\n    $names = User::all()->reject(function (User $user) {\n        return $user->active === false;\n    })->map(function (User $user) {\n        return $user->name;\n    });\n\n<a name=\"eloquent-collection-conversion\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":20,"to":36}}}}],["1162",{"pageContent":"Eloquent Collection Conversion\n\nWhile most Eloquent collection methods return a new instance of an Eloquent collection, the `collapse`, `flatten`, `flip`, `keys`, `pluck`, and `zip` methods return a [base collection](/docs/{{version}}/collections) instance. Likewise, if a `map` operation returns a collection that does not contain any Eloquent models, it will be converted to a base collection instance.\n\n<a name=\"available-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":37,"to":41}}}}],["1163",{"pageContent":"Available Methods\n\nAll Eloquent collections extend the base [Laravel collection](/docs/{{version}}/collections#available-methods) object; therefore, they inherit all of the powerful methods provided by the base collection class.\n\nIn addition, the `Illuminate\\Database\\Eloquent\\Collection` class provides a superset of methods to aid with managing your model collections. Most methods return `Illuminate\\Database\\Eloquent\\Collection` instances; however, some methods, like `modelKeys`, return an `Illuminate\\Support\\Collection` instance.\n\n<style>\n    .collection-method-list > p {\n        columns: 14.4em 1; -moz-columns: 14.4em 1; -webkit-columns: 14.4em 1;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n\n    .collection-method code {\n        font-size: 14px;\n    }\n\n    .collection-method:not(.first-collection-method) {\n        margin-top: 50px;\n    }\n</style>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":42,"to":67}}}}],["1164",{"pageContent":".collection-method code {\n        font-size: 14px;\n    }\n\n    .collection-method:not(.first-collection-method) {\n        margin-top: 50px;\n    }\n</style>\n\n<div class=\"collection-method-list\" markdown=\"1\">\n\n[append](#method-append)\n[contains](#method-contains)\n[diff](#method-diff)\n[except](#method-except)\n[find](#method-find)\n[fresh](#method-fresh)\n[intersect](#method-intersect)\n[load](#method-load)\n[loadMissing](#method-loadMissing)\n[modelKeys](#method-modelKeys)\n[makeVisible](#method-makeVisible)\n[makeHidden](#method-makeHidden)\n[only](#method-only)\n[setVisible](#method-setVisible)\n[setHidden](#method-setHidden)\n[toQuery](#method-toquery)\n[unique](#method-unique)\n\n</div>\n\n<a name=\"method-append\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":67,"to":98}}}}],["1165",{"pageContent":"`append($attributes)` {.collection-method .first-collection-method}\n\nThe `append` method may be used to indicate that an attribute should be [appended](/docs/{{version}}/eloquent-serialization#appending-values-to-json) for every model in the collection. This method accepts an array of attributes or a single attribute:\n\n    $users->append('team');\n    \n    $users->append(['team', 'is_admin']);\n\n<a name=\"method-contains\"></a>\n#### `contains($key, $operator = null, $value = null)` {.collection-method}\n\nThe `contains` method may be used to determine if a given model instance is contained by the collection. This method accepts a primary key or a model instance:\n\n    $users->contains(1);\n\n    $users->contains(User::find(1));\n\n<a name=\"method-diff\"></a>\n#### `diff($items)` {.collection-method}\n\nThe `diff` method returns all of the models that are not present in the given collection:\n\n    use App\\Models\\User;\n\n    $users = $users->diff(User::whereIn('id', [1, 2, 3])->get());\n\n<a name=\"method-except\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":99,"to":125}}}}],["1166",{"pageContent":"`except($keys)` {.collection-method}\n\nThe `except` method returns all of the models that do not have the given primary keys:\n\n    $users = $users->except([1, 2, 3]);\n\n<a name=\"method-find\"></a>\n#### `find($key)` {.collection-method}\n\nThe `find` method returns the model that has a primary key matching the given key. If `$key` is a model instance, `find` will attempt to return a model matching the primary key. If `$key` is an array of keys, `find` will return all models which have a primary key in the given array:\n\n    $users = User::all();\n\n    $user = $users->find(1);\n\n<a name=\"method-fresh\"></a>\n#### `fresh($with = [])` {.collection-method}\n\nThe `fresh` method retrieves a fresh instance of each model in the collection from the database. In addition, any specified relationships will be eager loaded:\n\n    $users = $users->fresh();\n\n    $users = $users->fresh('comments');\n\n<a name=\"method-intersect\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":126,"to":150}}}}],["1167",{"pageContent":"`intersect($items)` {.collection-method}\n\nThe `intersect` method returns all of the models that are also present in the given collection:\n\n    use App\\Models\\User;\n\n    $users = $users->intersect(User::whereIn('id', [1, 2, 3])->get());\n\n<a name=\"method-load\"></a>\n#### `load($relations)` {.collection-method}\n\nThe `load` method eager loads the given relationships for all models in the collection:\n\n    $users->load(['comments', 'posts']);\n\n    $users->load('comments.author');\n    \n    $users->load(['comments', 'posts' => fn ($query) => $query->where('active', 1)]);\n\n<a name=\"method-loadMissing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":151,"to":170}}}}],["1168",{"pageContent":"`loadMissing($relations)` {.collection-method}\n\nThe `loadMissing` method eager loads the given relationships for all models in the collection if the relationships are not already loaded:\n\n    $users->loadMissing(['comments', 'posts']);\n\n    $users->loadMissing('comments.author');\n    \n    $users->loadMissing(['comments', 'posts' => fn ($query) => $query->where('active', 1)]);\n\n<a name=\"method-modelKeys\"></a>\n#### `modelKeys()` {.collection-method}\n\nThe `modelKeys` method returns the primary keys for all models in the collection:\n\n    $users->modelKeys();\n\n    // [1, 2, 3, 4, 5]\n\n<a name=\"method-makeVisible\"></a>\n#### `makeVisible($attributes)` {.collection-method}\n\nThe `makeVisible` method [makes attributes visible](/docs/{{version}}/eloquent-serialization#hiding-attributes-from-json) that are typically \"hidden\" on each model in the collection:\n\n    $users = $users->makeVisible(['address', 'phone_number']);\n\n<a name=\"method-makeHidden\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":171,"to":197}}}}],["1169",{"pageContent":"`makeHidden($attributes)` {.collection-method}\n\nThe `makeHidden` method [hides attributes](/docs/{{version}}/eloquent-serialization#hiding-attributes-from-json) that are typically \"visible\" on each model in the collection:\n\n    $users = $users->makeHidden(['address', 'phone_number']);\n\n<a name=\"method-only\"></a>\n#### `only($keys)` {.collection-method}\n\nThe `only` method returns all of the models that have the given primary keys:\n\n    $users = $users->only([1, 2, 3]);\n\n<a name=\"method-setVisible\"></a>\n#### `setVisible($attributes)` {.collection-method}\n\nThe `setVisible` method [temporarily overrides](/docs/{{version}}/eloquent-serialization#temporarily-modifying-attribute-visibility) all of the visible attributes on each model in the collection:\n\n    $users = $users->setVisible(['id', 'name']);\n\n<a name=\"method-setHidden\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":198,"to":218}}}}],["1170",{"pageContent":"`setHidden($attributes)` {.collection-method}\n\nThe `setHidden` method [temporarily overrides](/docs/{{version}}/eloquent-serialization#temporarily-modifying-attribute-visibility) all of the hidden attributes on each model in the collection:\n\n    $users = $users->setHidden(['email', 'password', 'remember_token']);\n\n<a name=\"method-toquery\"></a>\n#### `toQuery()` {.collection-method}\n\nThe `toQuery` method returns an Eloquent query builder instance containing a `whereIn` constraint on the collection model's primary keys:\n\n    use App\\Models\\User;\n\n    $users = User::where('status', 'VIP')->get();\n\n    $users->toQuery()->update([\n        'status' => 'Administrator',\n    ]);\n\n<a name=\"method-unique\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":219,"to":238}}}}],["1171",{"pageContent":"`unique($key = null, $strict = false)` {.collection-method}\n\nThe `unique` method returns all of the unique models in the collection. Any models of the same type with the same primary key as another model in the collection are removed:\n\n    $users = $users->unique();\n\n<a name=\"custom-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":239,"to":245}}}}],["1172",{"pageContent":"Custom Collections\n\nIf you would like to use a custom `Collection` object when interacting with a given model, you may define a `newCollection` method on your model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use App\\Support\\UserCollection;\n    use Illuminate\\Database\\Eloquent\\Collection;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * Create a new Eloquent Collection instance.\n         *\n         * @param  array<int, \\Illuminate\\Database\\Eloquent\\Model>  $models\n         * @return \\Illuminate\\Database\\Eloquent\\Collection<int, \\Illuminate\\Database\\Eloquent\\Model>\n         */\n        public function newCollection(array $models = []): Collection\n        {\n            return new UserCollection($models);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":246,"to":270}}}}],["1173",{"pageContent":"Once you have defined a `newCollection` method, you will receive an instance of your custom collection anytime Eloquent would normally return an `Illuminate\\Database\\Eloquent\\Collection` instance. If you would like to use a custom collection for every model in your application, you should define the `newCollection` method on a base model class that is extended by all of your application's models.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-collections.md","loc":{"lines":{"from":272,"to":272}}}}],["1174",{"pageContent":"# Eloquent: Factories\n\n- [Introduction](#introduction)\n- [Defining Model Factories](#defining-model-factories)\n    - [Generating Factories](#generating-factories)\n    - [Factory States](#factory-states)\n    - [Factory Callbacks](#factory-callbacks)\n- [Creating Models Using Factories](#creating-models-using-factories)\n    - [Instantiating Models](#instantiating-models)\n    - [Persisting Models](#persisting-models)\n    - [Sequences](#sequences)\n- [Factory Relationships](#factory-relationships)\n    - [Has Many Relationships](#has-many-relationships)\n    - [Belongs To Relationships](#belongs-to-relationships)\n    - [Many To Many Relationships](#many-to-many-relationships)\n    - [Polymorphic Relationships](#polymorphic-relationships)\n    - [Defining Relationships Within Factories](#defining-relationships-within-factories)\n    - [Recycling An Existing Model For Relationships](#recycling-an-existing-model-for-relationships)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":1,"to":20}}}}],["1175",{"pageContent":"Introduction\n\nWhen testing your application or seeding your database, you may need to insert a few records into your database. Instead of manually specifying the value of each column, Laravel allows you to define a set of default attributes for each of your [Eloquent models](/docs/{{version}}/eloquent) using model factories.\n\nTo see an example of how to write a factory, take a look at the `database/factories/UserFactory.php` file in your application. This factory is included with all new Laravel applications and contains the following factory definition:\n\n    namespace Database\\Factories;\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Database\\Eloquent\\Factories\\Factory;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":21,"to":30}}}}],["1176",{"pageContent":"namespace Database\\Factories;\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Database\\Eloquent\\Factories\\Factory;\n\n    class UserFactory extends Factory\n    {\n        /**\n         * Define the model's default state.\n         *\n         * @return array<string, mixed>\n         */\n        public function definition(): array\n        {\n            return [\n                'name' => fake()->name(),\n                'email' => fake()->unique()->safeEmail(),\n                'email_verified_at' => now(),\n                'password' => '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', // password\n                'remember_token' => Str::random(10),\n            ];\n        }\n    }\n\nAs you can see, in their most basic form, factories are classes that extend Laravel's base factory class and define a `definition` method. The `definition` method returns the default set of attribute values that should be applied when creating a model using the factory.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":30,"to":54}}}}],["1177",{"pageContent":"Via the `fake` helper, factories have access to the [Faker](https://github.com/FakerPHP/Faker) PHP library, which allows you to conveniently generate various kinds of random data for testing and seeding.\n\n> **Note**  \n> You can set your application's Faker locale by adding a `faker_locale` option to your `config/app.php` configuration file.\n\n<a name=\"defining-model-factories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":56,"to":61}}}}],["1178",{"pageContent":"Defining Model Factories\n\n<a name=\"generating-factories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":62,"to":64}}}}],["1179",{"pageContent":"Generating Factories\n\nTo create a factory, execute the `make:factory` [Artisan command](/docs/{{version}}/artisan):\n\n```shell\nphp artisan make:factory PostFactory\n```\n\nThe new factory class will be placed in your `database/factories` directory.\n\n<a name=\"factory-and-model-discovery-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":65,"to":75}}}}],["1180",{"pageContent":"Model & Factory Discovery Conventions\n\nOnce you have defined your factories, you may use the static `factory` method provided to your models by the `Illuminate\\Database\\Eloquent\\Factories\\HasFactory` trait in order to instantiate a factory instance for that model.\n\nThe `HasFactory` trait's `factory` method will use conventions to determine the proper factory for the model the trait is assigned to. Specifically, the method will look for a factory in the `Database\\Factories` namespace that has a class name matching the model name and is suffixed with `Factory`. If these conventions do not apply to your particular application or factory, you may overwrite the `newFactory` method on your model to return an instance of the model's corresponding factory directly:\n\n    use Illuminate\\Database\\Eloquent\\Factories\\Factory;\n    use Database\\Factories\\Administration\\FlightFactory;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":76,"to":83}}}}],["1181",{"pageContent":"use Illuminate\\Database\\Eloquent\\Factories\\Factory;\n    use Database\\Factories\\Administration\\FlightFactory;\n\n    /**\n     * Create a new factory instance for the model.\n     */\n    protected static function newFactory(): Factory\n    {\n        return FlightFactory::new();\n    }\n\nThen, define a `model` property on the corresponding factory:\n\n    use App\\Administration\\Flight;\n    use Illuminate\\Database\\Eloquent\\Factories\\Factory;\n\n    class FlightFactory extends Factory\n    {\n        /**\n         * The name of the factory's corresponding model.\n         *\n         * @var class-string<\\Illuminate\\Database\\Eloquent\\Model>\n         */\n        protected $model = Flight::class;\n    }\n\n<a name=\"factory-states\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":83,"to":109}}}}],["1182",{"pageContent":"Factory States\n\nState manipulation methods allow you to define discrete modifications that can be applied to your model factories in any combination. For example, your `Database\\Factories\\UserFactory` factory might contain a `suspended` state method that modifies one of its default attribute values.\n\nState transformation methods typically call the `state` method provided by Laravel's base factory class. The `state` method accepts a closure which will receive the array of raw attributes defined for the factory and should return an array of attributes to modify:\n\n    use Illuminate\\Database\\Eloquent\\Factories\\Factory;\n\n    /**\n     * Indicate that the user is suspended.\n     */\n    public function suspended(): Factory\n    {\n        return $this->state(function (array $attributes) {\n            return [\n                'account_status' => 'suspended',\n            ];\n        });\n    }\n\n<a name=\"trashed-state\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":110,"to":130}}}}],["1183",{"pageContent":"\"Trashed\" State\n\nIf your Eloquent model can be [soft deleted](/docs/{{version}}/eloquent#soft-deleting), you may invoke the built-in `trashed` state method to indicate that the created model should already be \"soft deleted\". You do not need to manually define the `trashed` state as it is automatically available to all factories:\n\n    use App\\Models\\User;\n\n    $user = User::factory()->trashed()->create();\n\n<a name=\"factory-callbacks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":131,"to":139}}}}],["1184",{"pageContent":"Factory Callbacks\n\nFactory callbacks are registered using the `afterMaking` and `afterCreating` methods and allow you to perform additional tasks after making or creating a model. You should register these callbacks by defining a `configure` method on your factory class. This method will be automatically called by Laravel when the factory is instantiated:\n\n    namespace Database\\Factories;\n\n    use App\\Models\\User;\n    use Illuminate\\Database\\Eloquent\\Factories\\Factory;\n\n    class UserFactory extends Factory\n    {\n        /**\n         * Configure the model factory.\n         */\n        public function configure(): static\n        {\n            return $this->afterMaking(function (User $user) {\n                // ...\n            })->afterCreating(function (User $user) {\n                // ...\n            });\n        }\n\n        // ...\n    }\n\nYou may also register factory callbacks within state methods to perform additional tasks that are specific to a given state:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":140,"to":166}}}}],["1185",{"pageContent":"// ...\n    }\n\nYou may also register factory callbacks within state methods to perform additional tasks that are specific to a given state:\n\n    use App\\Models\\User;\n    use Illuminate\\Database\\Eloquent\\Factories\\Factory;\n\n    /**\n     * Indicate that the user is suspended.\n     */\n    public function suspended(): Factory\n    {\n        return $this->state(function (array $attributes) {\n            return [\n                'account_status' => 'suspended',\n            ];\n        })->afterMaking(function (User $user) {\n            // ...\n        })->afterCreating(function (User $user) {\n            // ...\n        });\n    }\n\n<a name=\"creating-models-using-factories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":166,"to":190}}}}],["1186",{"pageContent":"Creating Models Using Factories\n\n<a name=\"instantiating-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":191,"to":193}}}}],["1187",{"pageContent":"Instantiating Models\n\nOnce you have defined your factories, you may use the static `factory` method provided to your models by the `Illuminate\\Database\\Eloquent\\Factories\\HasFactory` trait in order to instantiate a factory instance for that model. Let's take a look at a few examples of creating models. First, we'll use the `make` method to create models without persisting them to the database:\n\n    use App\\Models\\User;\n\n    $user = User::factory()->make();\n\nYou may create a collection of many models using the `count` method:\n\n    $users = User::factory()->count(3)->make();\n\n<a name=\"applying-states\"></a>\n#### Applying States\n\nYou may also apply any of your [states](#factory-states) to the models. If you would like to apply multiple state transformations to the models, you may simply call the state transformation methods directly:\n\n    $users = User::factory()->count(5)->suspended()->make();\n\n<a name=\"overriding-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":194,"to":213}}}}],["1188",{"pageContent":"Overriding Attributes\n\nIf you would like to override some of the default values of your models, you may pass an array of values to the `make` method. Only the specified attributes will be replaced while the rest of the attributes remain set to their default values as specified by the factory:\n\n    $user = User::factory()->make([\n        'name' => 'Abigail Otwell',\n    ]);\n\nAlternatively, the `state` method may be called directly on the factory instance to perform an inline state transformation:\n\n    $user = User::factory()->state([\n        'name' => 'Abigail Otwell',\n    ])->make();\n\n> **Note**  \n> [Mass assignment protection](/docs/{{version}}/eloquent#mass-assignment) is automatically disabled when creating models using factories.\n\n<a name=\"persisting-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":214,"to":231}}}}],["1189",{"pageContent":"Persisting Models\n\nThe `create` method instantiates model instances and persists them to the database using Eloquent's `save` method:\n\n    use App\\Models\\User;\n\n    // Create a single App\\Models\\User instance...\n    $user = User::factory()->create();\n\n    // Create three App\\Models\\User instances...\n    $users = User::factory()->count(3)->create();\n\nYou may override the factory's default model attributes by passing an array of attributes to the `create` method:\n\n    $user = User::factory()->create([\n        'name' => 'Abigail',\n    ]);\n\n<a name=\"sequences\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":232,"to":250}}}}],["1190",{"pageContent":"Sequences\n\nSometimes you may wish to alternate the value of a given model attribute for each created model. You may accomplish this by defining a state transformation as a sequence. For example, you may wish to alternate the value of an `admin` column between `Y` and `N` for each created user:\n\n    use App\\Models\\User;\n    use Illuminate\\Database\\Eloquent\\Factories\\Sequence;\n\n    $users = User::factory()\n                    ->count(10)\n                    ->state(new Sequence(\n                        ['admin' => 'Y'],\n                        ['admin' => 'N'],\n                    ))\n                    ->create();\n\nIn this example, five users will be created with an `admin` value of `Y` and five users will be created with an `admin` value of `N`.\n\nIf necessary, you may include a closure as a sequence value. The closure will be invoked each time the sequence needs a new value:\n\n    use Illuminate\\Database\\Eloquent\\Factories\\Sequence;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":251,"to":270}}}}],["1191",{"pageContent":"If necessary, you may include a closure as a sequence value. The closure will be invoked each time the sequence needs a new value:\n\n    use Illuminate\\Database\\Eloquent\\Factories\\Sequence;\n\n    $users = User::factory()\n                    ->count(10)\n                    ->state(new Sequence(\n                        fn (Sequence $sequence) => ['role' => UserRoles::all()->random()],\n                    ))\n                    ->create();\n\nWithin a sequence closure, you may access the `$index` or `$count` properties on the sequence instance that is injected into the closure. The `$index` property contains the number of iterations through the sequence that have occurred thus far, while the `$count` property contains the total number of times the sequence will be invoked:\n\n    $users = User::factory()\n                    ->count(10)\n                    ->sequence(fn (Sequence $sequence) => ['name' => 'Name '.$sequence->index])\n                    ->create();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":270,"to":286}}}}],["1192",{"pageContent":"$users = User::factory()\n                    ->count(10)\n                    ->sequence(fn (Sequence $sequence) => ['name' => 'Name '.$sequence->index])\n                    ->create();\n\nFor convenience, sequences may also be applied using the `sequence` method, which simply invokes the `state` method internally. The `sequence` method accepts a closure or arrays of sequenced attributes:\n\n    $users = User::factory()\n                    ->count(2)\n                    ->sequence(\n                        ['name' => 'First User'],\n                        ['name' => 'Second User'],\n                    )\n                    ->create();\n\n<a name=\"factory-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":286,"to":301}}}}],["1193",{"pageContent":"Factory Relationships\n\n<a name=\"has-many-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":302,"to":304}}}}],["1194",{"pageContent":"Has Many Relationships\n\nNext, let's explore building Eloquent model relationships using Laravel's fluent factory methods. First, let's assume our application has an `App\\Models\\User` model and an `App\\Models\\Post` model. Also, let's assume that the `User` model defines a `hasMany` relationship with `Post`. We can create a user that has three posts using the `has` method provided by the Laravel's factories. The `has` method accepts a factory instance:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n\n    $user = User::factory()\n                ->has(Post::factory()->count(3))\n                ->create();\n\nBy convention, when passing a `Post` model to the `has` method, Laravel will assume that the `User` model must have a `posts` method that defines the relationship. If necessary, you may explicitly specify the name of the relationship that you would like to manipulate:\n\n    $user = User::factory()\n                ->has(Post::factory()->count(3), 'posts')\n                ->create();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":305,"to":320}}}}],["1195",{"pageContent":"$user = User::factory()\n                ->has(Post::factory()->count(3), 'posts')\n                ->create();\n\nOf course, you may perform state manipulations on the related models. In addition, you may pass a closure based state transformation if your state change requires access to the parent model:\n\n    $user = User::factory()\n                ->has(\n                    Post::factory()\n                            ->count(3)\n                            ->state(function (array $attributes, User $user) {\n                                return ['user_type' => $user->type];\n                            })\n                )\n                ->create();\n\n<a name=\"has-many-relationships-using-magic-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":320,"to":336}}}}],["1196",{"pageContent":"Using Magic Methods\n\nFor convenience, you may use Laravel's magic factory relationship methods to build relationships. For example, the following example will use convention to determine that the related models should be created via a `posts` relationship method on the `User` model:\n\n    $user = User::factory()\n                ->hasPosts(3)\n                ->create();\n\nWhen using magic methods to create factory relationships, you may pass an array of attributes to override on the related models:\n\n    $user = User::factory()\n                ->hasPosts(3, [\n                    'published' => false,\n                ])\n                ->create();\n\nYou may provide a closure based state transformation if your state change requires access to the parent model:\n\n    $user = User::factory()\n                ->hasPosts(3, function (array $attributes, User $user) {\n                    return ['user_type' => $user->type];\n                })\n                ->create();\n\n<a name=\"belongs-to-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":337,"to":361}}}}],["1197",{"pageContent":"Belongs To Relationships\n\nNow that we have explored how to build \"has many\" relationships using factories, let's explore the inverse of the relationship. The `for` method may be used to define the parent model that factory created models belong to. For example, we can create three `App\\Models\\Post` model instances that belong to a single user:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n\n    $posts = Post::factory()\n                ->count(3)\n                ->for(User::factory()->state([\n                    'name' => 'Jessica Archer',\n                ]))\n                ->create();\n\nIf you already have a parent model instance that should be associated with the models you are creating, you may pass the model instance to the `for` method:\n\n    $user = User::factory()->create();\n\n    $posts = Post::factory()\n                ->count(3)\n                ->for($user)\n                ->create();\n\n<a name=\"belongs-to-relationships-using-magic-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":362,"to":385}}}}],["1198",{"pageContent":"Using Magic Methods\n\nFor convenience, you may use Laravel's magic factory relationship methods to define \"belongs to\" relationships. For example, the following example will use convention to determine that the three posts should belong to the `user` relationship on the `Post` model:\n\n    $posts = Post::factory()\n                ->count(3)\n                ->forUser([\n                    'name' => 'Jessica Archer',\n                ])\n                ->create();\n\n<a name=\"many-to-many-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":386,"to":397}}}}],["1199",{"pageContent":"Many To Many Relationships\n\nLike [has many relationships](#has-many-relationships), \"many to many\" relationships may be created using the `has` method:\n\n    use App\\Models\\Role;\n    use App\\Models\\User;\n\n    $user = User::factory()\n                ->has(Role::factory()->count(3))\n                ->create();\n\n<a name=\"pivot-table-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":398,"to":409}}}}],["1200",{"pageContent":"Pivot Table Attributes\n\nIf you need to define attributes that should be set on the pivot / intermediate table linking the models, you may use the `hasAttached` method. This method accepts an array of pivot table attribute names and values as its second argument:\n\n    use App\\Models\\Role;\n    use App\\Models\\User;\n\n    $user = User::factory()\n                ->hasAttached(\n                    Role::factory()->count(3),\n                    ['active' => true]\n                )\n                ->create();\n\nYou may provide a closure based state transformation if your state change requires access to the related model:\n\n    $user = User::factory()\n                ->hasAttached(\n                    Role::factory()\n                        ->count(3)\n                        ->state(function (array $attributes, User $user) {\n                            return ['name' => $user->name.' Role'];\n                        }),\n                    ['active' => true]\n                )\n                ->create();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":410,"to":435}}}}],["1201",{"pageContent":"If you already have model instances that you would like to be attached to the models you are creating, you may pass the model instances to the `hasAttached` method. In this example, the same three roles will be attached to all three users:\n\n    $roles = Role::factory()->count(3)->create();\n\n    $user = User::factory()\n                ->count(3)\n                ->hasAttached($roles, ['active' => true])\n                ->create();\n\n<a name=\"many-to-many-relationships-using-magic-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":437,"to":446}}}}],["1202",{"pageContent":"Using Magic Methods\n\nFor convenience, you may use Laravel's magic factory relationship methods to define many to many relationships. For example, the following example will use convention to determine that the related models should be created via a `roles` relationship method on the `User` model:\n\n    $user = User::factory()\n                ->hasRoles(1, [\n                    'name' => 'Editor'\n                ])\n                ->create();\n\n<a name=\"polymorphic-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":447,"to":457}}}}],["1203",{"pageContent":"Polymorphic Relationships\n\n[Polymorphic relationships](/docs/{{version}}/eloquent-relationships#polymorphic-relationships) may also be created using factories. Polymorphic \"morph many\" relationships are created in the same way as typical \"has many\" relationships. For example, if an `App\\Models\\Post` model has a `morphMany` relationship with an `App\\Models\\Comment` model:\n\n    use App\\Models\\Post;\n\n    $post = Post::factory()->hasComments(3)->create();\n\n<a name=\"morph-to-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":458,"to":466}}}}],["1204",{"pageContent":"Morph To Relationships\n\nMagic methods may not be used to create `morphTo` relationships. Instead, the `for` method must be used directly and the name of the relationship must be explicitly provided. For example, imagine that the `Comment` model has a `commentable` method that defines a `morphTo` relationship. In this situation, we may create three comments that belong to a single post by using the `for` method directly:\n\n    $comments = Comment::factory()->count(3)->for(\n        Post::factory(), 'commentable'\n    )->create();\n\n<a name=\"polymorphic-many-to-many-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":467,"to":475}}}}],["1205",{"pageContent":"Polymorphic Many To Many Relationships\n\nPolymorphic \"many to many\" (`morphToMany` / `morphedByMany`) relationships may be created just like non-polymorphic \"many to many\" relationships:\n\n    use App\\Models\\Tag;\n    use App\\Models\\Video;\n\n    $videos = Video::factory()\n                ->hasAttached(\n                    Tag::factory()->count(3),\n                    ['public' => true]\n                )\n                ->create();\n\nOf course, the magic `has` method may also be used to create polymorphic \"many to many\" relationships:\n\n    $videos = Video::factory()\n                ->hasTags(3, ['public' => true])\n                ->create();\n\n<a name=\"defining-relationships-within-factories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":476,"to":496}}}}],["1206",{"pageContent":"Defining Relationships Within Factories\n\nTo define a relationship within your model factory, you will typically assign a new factory instance to the foreign key of the relationship. This is normally done for the \"inverse\" relationships such as `belongsTo` and `morphTo` relationships. For example, if you would like to create a new user when creating a post, you may do the following:\n\n    use App\\Models\\User;\n\n    /**\n     * Define the model's default state.\n     *\n     * @return array<string, mixed>\n     */\n    public function definition(): array\n    {\n        return [\n            'user_id' => User::factory(),\n            'title' => fake()->title(),\n            'content' => fake()->paragraph(),\n        ];\n    }\n\nIf the relationship's columns depend on the factory that defines it you may assign a closure to an attribute. The closure will receive the factory's evaluated attribute array:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":497,"to":517}}}}],["1207",{"pageContent":"If the relationship's columns depend on the factory that defines it you may assign a closure to an attribute. The closure will receive the factory's evaluated attribute array:\n\n    /**\n     * Define the model's default state.\n     *\n     * @return array<string, mixed>\n     */\n    public function definition(): array\n    {\n        return [\n            'user_id' => User::factory(),\n            'user_type' => function (array $attributes) {\n                return User::find($attributes['user_id'])->type;\n            },\n            'title' => fake()->title(),\n            'content' => fake()->paragraph(),\n        ];\n    }\n\n<a name=\"recycling-an-existing-model-for-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":517,"to":536}}}}],["1208",{"pageContent":"Recycling An Existing Model For Relationships\n\nIf you have models that share a common relationship with another model, you may use the `recycle` method to ensure a single instance of the related model is recycled for all of the relationships created by the factory.\n\nFor example, imagine you have `Airline`, `Flight`, and `Ticket` models, where the ticket belongs to an airline and a flight, and the flight also belongs to an airline. When creating tickets, you will probably want the same airline for both the ticket and the flight, so you may pass an airline instance to the `recycle` method:\n\n    Ticket::factory()\n        ->recycle(Airline::factory()->create())\n        ->create();\n\nYou may find the `recycle` method particularly useful if you have models belonging to a common user or team.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":537,"to":547}}}}],["1209",{"pageContent":"Ticket::factory()\n        ->recycle(Airline::factory()->create())\n        ->create();\n\nYou may find the `recycle` method particularly useful if you have models belonging to a common user or team.\n\nThe `recycle` method also accepts a collection of existing models. When a collection is provided to the `recycle` method, a random model from the collection will be chosen when the factory needs a model of that type:\n\n    Ticket::factory()\n        ->recycle($airlines)\n        ->create();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-factories.md","loc":{"lines":{"from":547,"to":557}}}}],["1210",{"pageContent":"# Eloquent: Mutators & Casting\n\n- [Introduction](#introduction)\n- [Accessors & Mutators](#accessors-and-mutators)\n    - [Defining An Accessor](#defining-an-accessor)\n    - [Defining A Mutator](#defining-a-mutator)\n- [Attribute Casting](#attribute-casting)\n    - [Array & JSON Casting](#array-and-json-casting)\n    - [Date Casting](#date-casting)\n    - [Enum Casting](#enum-casting)\n    - [Encrypted Casting](#encrypted-casting)\n    - [Query Time Casting](#query-time-casting)\n- [Custom Casts](#custom-casts)\n    - [Value Object Casting](#value-object-casting)\n    - [Array / JSON Serialization](#array-json-serialization)\n    - [Inbound Casting](#inbound-casting)\n    - [Cast Parameters](#cast-parameters)\n    - [Castables](#castables)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":1,"to":20}}}}],["1211",{"pageContent":"Introduction\n\nAccessors, mutators, and attribute casting allow you to transform Eloquent attribute values when you retrieve or set them on model instances. For example, you may want to use the [Laravel encrypter](/docs/{{version}}/encryption) to encrypt a value while it is stored in the database, and then automatically decrypt the attribute when you access it on an Eloquent model. Or, you may want to convert a JSON string that is stored in your database to an array when it is accessed via your Eloquent model.\n\n<a name=\"accessors-and-mutators\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":21,"to":25}}}}],["1212",{"pageContent":"Accessors & Mutators\n\n<a name=\"defining-an-accessor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":26,"to":28}}}}],["1213",{"pageContent":"Defining An Accessor\n\nAn accessor transforms an Eloquent attribute value when it is accessed. To define an accessor, create a protected method on your model to represent the accessible attribute. This method name should correspond to the \"camel case\" representation of the true underlying model attribute / database column when applicable.\n\nIn this example, we'll define an accessor for the `first_name` attribute. The accessor will automatically be called by Eloquent when attempting to retrieve the value of the `first_name` attribute. All attribute accessor / mutator methods must declare a return type-hint of `Illuminate\\Database\\Eloquent\\Casts\\Attribute`:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Casts\\Attribute;\n    use Illuminate\\Database\\Eloquent\\Model;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":29,"to":40}}}}],["1214",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Casts\\Attribute;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * Get the user's first name.\n         */\n        protected function firstName(): Attribute\n        {\n            return Attribute::make(\n                get: fn (string $value) => ucfirst($value),\n            );\n        }\n    }\n\nAll accessor methods return an `Attribute` instance which defines how the attribute will be accessed and, optionally, mutated. In this example, we are only defining how the attribute will be accessed. To do so, we supply the `get` argument to the `Attribute` class constructor.\n\nAs you can see, the original value of the column is passed to the accessor, allowing you to manipulate and return the value. To access the value of the accessor, you may simply access the `first_name` attribute on a model instance:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":40,"to":66}}}}],["1215",{"pageContent":"use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $firstName = $user->first_name;\n\n> **Note**  \n> If you would like these computed values to be added to the array / JSON representations of your model, [you will need to append them](/docs/{{version}}/eloquent-serialization#appending-values-to-json).\n\n<a name=\"building-value-objects-from-multiple-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":66,"to":75}}}}],["1216",{"pageContent":"Building Value Objects From Multiple Attributes\n\nSometimes your accessor may need to transform multiple model attributes into a single \"value object\". To do so, your `get` closure may accept a second argument of `$attributes`, which will be automatically supplied to the closure and will contain an array of all of the model's current attributes:\n\n```php\nuse App\\Support\\Address;\nuse Illuminate\\Database\\Eloquent\\Casts\\Attribute;\n\n/**\n * Interact with the user's address.\n */\nprotected function address(): Attribute\n{\n    return Attribute::make(\n        get: fn (mixed $value, array $attributes) => new Address(\n            $attributes['address_line_one'],\n            $attributes['address_line_two'],\n        ),\n    );\n}\n```\n\n<a name=\"accessor-caching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":76,"to":98}}}}],["1217",{"pageContent":"Accessor Caching\n\nWhen returning value objects from accessors, any changes made to the value object will automatically be synced back to the model before the model is saved. This is possible because Eloquent retains instances returned by accessors so it can return the same instance each time the accessor is invoked:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->address->lineOne = 'Updated Address Line 1 Value';\n    $user->address->lineTwo = 'Updated Address Line 2 Value';\n\n    $user->save();\n\nHowever, you may sometimes wish to enable caching for primitive values like strings and booleans, particularly if they are computationally intensive. To accomplish this, you may invoke the `shouldCache` method when defining your accessor:\n\n```php\nprotected function hash(): Attribute\n{\n    return Attribute::make(\n        get: fn (string $value) => bcrypt(gzuncompress($value)),\n    )->shouldCache();\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":99,"to":120}}}}],["1218",{"pageContent":"If you would like to disable the object caching behavior of attributes, you may invoke the `withoutObjectCaching` method when defining the attribute:\n\n```php\n/**\n * Interact with the user's address.\n */\nprotected function address(): Attribute\n{\n    return Attribute::make(\n        get: fn (mixed $value, array $attributes) => new Address(\n            $attributes['address_line_one'],\n            $attributes['address_line_two'],\n        ),\n    )->withoutObjectCaching();\n}\n```\n\n<a name=\"defining-a-mutator\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":123,"to":140}}}}],["1219",{"pageContent":"Defining A Mutator\n\nA mutator transforms an Eloquent attribute value when it is set. To define a mutator, you may provide the `set` argument when defining your attribute. Let's define a mutator for the `first_name` attribute. This mutator will be automatically called when we attempt to set the value of the `first_name` attribute on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Casts\\Attribute;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * Interact with the user's first name.\n         */\n        protected function firstName(): Attribute\n        {\n            return Attribute::make(\n                get: fn (string $value) => ucfirst($value),\n                set: fn (string $value) => strtolower($value),\n            );\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":141,"to":164}}}}],["1220",{"pageContent":"The mutator closure will receive the value that is being set on the attribute, allowing you to manipulate the value and return the manipulated value. To use our mutator, we only need to set the `first_name` attribute on an Eloquent model:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->first_name = 'Sally';\n\nIn this example, the `set` callback will be called with the value `Sally`. The mutator will then apply the `strtolower` function to the name and set its resulting value in the model's internal `$attributes` array.\n\n<a name=\"mutating-multiple-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":166,"to":176}}}}],["1221",{"pageContent":"Mutating Multiple Attributes\n\nSometimes your mutator may need to set multiple attributes on the underlying model. To do so, you may return an array from the `set` closure. Each key in the array should correspond with an underlying attribute / database column associated with the model:\n\n```php\nuse App\\Support\\Address;\nuse Illuminate\\Database\\Eloquent\\Casts\\Attribute;\n\n/**\n * Interact with the user's address.\n */\nprotected function address(): Attribute\n{\n    return Attribute::make(\n        get: fn (mixed $value, array $attributes) => new Address(\n            $attributes['address_line_one'],\n            $attributes['address_line_two'],\n        ),\n        set: fn (Address $value) => [\n            'address_line_one' => $value->lineOne,\n            'address_line_two' => $value->lineTwo,\n        ],\n    );\n}\n```\n\n<a name=\"attribute-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":177,"to":203}}}}],["1222",{"pageContent":"Attribute Casting\n\nAttribute casting provides functionality similar to accessors and mutators without requiring you to define any additional methods on your model. Instead, your model's `$casts` property provides a convenient method of converting attributes to common data types.\n\nThe `$casts` property should be an array where the key is the name of the attribute being cast and the value is the type you wish to cast the column to. The supported cast types are:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- `array`\n- `AsStringable::class`\n- `boolean`\n- `collection`\n- `date`\n- `datetime`\n- `immutable_date`\n- `immutable_datetime`\n- <code>decimal:&lt;precision&gt;</code>\n- `double`\n- `encrypted`\n- `encrypted:array`\n- `encrypted:collection`\n- `encrypted:object`\n- `float`\n- `hashed`\n- `integer`\n- `object`\n- `real`\n- `string`\n- `timestamp`\n\n</div>\n\nTo demonstrate attribute casting, let's cast the `is_admin` attribute, which is stored in our database as an integer (`0` or `1`) to a boolean value:\n\n    <?php","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":204,"to":238}}}}],["1223",{"pageContent":"</div>\n\nTo demonstrate attribute casting, let's cast the `is_admin` attribute, which is stored in our database as an integer (`0` or `1`) to a boolean value:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The attributes that should be cast.\n         *\n         * @var array\n         */\n        protected $casts = [\n            'is_admin' => 'boolean',\n        ];\n    }\n\nAfter defining the cast, the `is_admin` attribute will always be cast to a boolean when you access it, even if the underlying value is stored in the database as an integer:\n\n    $user = App\\Models\\User::find(1);\n\n    if ($user->is_admin) {\n        // ...\n    }\n\nIf you need to add a new, temporary cast at runtime, you may use the `mergeCasts` method. These cast definitions will be added to any of the casts already defined on the model:\n\n    $user->mergeCasts([\n        'is_admin' => 'integer',\n        'options' => 'object',\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":238,"to":273}}}}],["1224",{"pageContent":"$user->mergeCasts([\n        'is_admin' => 'integer',\n        'options' => 'object',\n    ]);\n\n> **Warning**  \n> Attributes that are `null` will not be cast. In addition, you should never define a cast (or an attribute) that has the same name as a relationship or assign a cast to the model's primary key.\n\n<a name=\"stringable-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":273,"to":281}}}}],["1225",{"pageContent":"Stringable Casting\n\nYou may use the `Illuminate\\Database\\Eloquent\\Casts\\AsStringable` cast class to cast a model attribute to a [fluent `Illuminate\\Support\\Stringable` object](/docs/{{version}}/strings#fluent-strings-method-list):\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Casts\\AsStringable;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The attributes that should be cast.\n         *\n         * @var array\n         */\n        protected $casts = [\n            'directory' => AsStringable::class,\n        ];\n    }\n\n<a name=\"array-and-json-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":282,"to":305}}}}],["1226",{"pageContent":"Array & JSON Casting\n\nThe `array` cast is particularly useful when working with columns that are stored as serialized JSON. For example, if your database has a `JSON` or `TEXT` field type that contains serialized JSON, adding the `array` cast to that attribute will automatically deserialize the attribute to a PHP array when you access it on your Eloquent model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The attributes that should be cast.\n         *\n         * @var array\n         */\n        protected $casts = [\n            'options' => 'array',\n        ];\n    }\n\nOnce the cast is defined, you may access the `options` attribute and it will automatically be deserialized from JSON into a PHP array. When you set the value of the `options` attribute, the given array will automatically be serialized back into JSON for storage:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $options = $user->options;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":306,"to":334}}}}],["1227",{"pageContent":"use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $options = $user->options;\n\n    $options['key'] = 'value';\n\n    $user->options = $options;\n\n    $user->save();\n\nTo update a single field of a JSON attribute with a more terse syntax, you may use the `->` operator when calling the `update` method:\n\n    $user = User::find(1);\n\n    $user->update(['options->key' => 'value']);\n\n<a name=\"array-object-and-collection-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":334,"to":352}}}}],["1228",{"pageContent":"Array Object & Collection Casting\n\nAlthough the standard `array` cast is sufficient for many applications, it does have some disadvantages. Since the `array` cast returns a primitive type, it is not possible to mutate an offset of the array directly. For example, the following code will trigger a PHP error:\n\n    $user = User::find(1);\n\n    $user->options['key'] = $value;\n\nTo solve this, Laravel offers an `AsArrayObject` cast that casts your JSON attribute to an [ArrayObject](https://www.php.net/manual/en/class.arrayobject.php) class. This feature is implemented using Laravel's [custom cast](#custom-casts) implementation, which allows Laravel to intelligently cache and transform the mutated object such that individual offsets may be modified without triggering a PHP error. To use the `AsArrayObject` cast, simply assign it to an attribute:\n\n    use Illuminate\\Database\\Eloquent\\Casts\\AsArrayObject;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":353,"to":363}}}}],["1229",{"pageContent":"use Illuminate\\Database\\Eloquent\\Casts\\AsArrayObject;\n\n    /**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'options' => AsArrayObject::class,\n    ];\n\nSimilarly, Laravel offers an `AsCollection` cast that casts your JSON attribute to a Laravel [Collection](/docs/{{version}}/collections) instance:\n\n    use Illuminate\\Database\\Eloquent\\Casts\\AsCollection;\n\n    /**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'options' => AsCollection::class,\n    ];\n\nIf you would like the `AsCollection` cast to instantiate a custom collection class instead of Laravel's base collection class, you may provide the collection class name as a cast argument:\n\n    use App\\Collections\\OptionCollection;\n    use Illuminate\\Database\\Eloquent\\Casts\\AsCollection;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":363,"to":390}}}}],["1230",{"pageContent":"use App\\Collections\\OptionCollection;\n    use Illuminate\\Database\\Eloquent\\Casts\\AsCollection;\n\n    /**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'options' => AsCollection::class.':'.OptionCollection::class,\n    ];\n\n<a name=\"date-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":390,"to":402}}}}],["1231",{"pageContent":"Date Casting\n\nBy default, Eloquent will cast the `created_at` and `updated_at` columns to instances of [Carbon](https://github.com/briannesbitt/Carbon), which extends the PHP `DateTime` class and provides an assortment of helpful methods. You may cast additional date attributes by defining additional date casts within your model's `$casts` property array. Typically, dates should be cast using the `datetime` or `immutable_datetime` cast types.\n\nWhen defining a `date` or `datetime` cast, you may also specify the date's format. This format will be used when the [model is serialized to an array or JSON](/docs/{{version}}/eloquent-serialization):\n\n    /**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'created_at' => 'datetime:Y-m-d',\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":403,"to":416}}}}],["1232",{"pageContent":"/**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'created_at' => 'datetime:Y-m-d',\n    ];\n\nWhen a column is cast as a date, you may set the corresponding model attribute value to a UNIX timestamp, date string (`Y-m-d`), date-time string, or a `DateTime` / `Carbon` instance. The date's value will be correctly converted and stored in your database.\n\nYou may customize the default serialization format for all of your model's dates by defining a `serializeDate` method on your model. This method does not affect how your dates are formatted for storage in the database:\n\n    /**\n     * Prepare a date for array / JSON serialization.\n     */\n    protected function serializeDate(DateTimeInterface $date): string\n    {\n        return $date->format('Y-m-d');\n    }\n\nTo specify the format that should be used when actually storing a model's dates within your database, you should define a `$dateFormat` property on your model:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":416,"to":437}}}}],["1233",{"pageContent":"To specify the format that should be used when actually storing a model's dates within your database, you should define a `$dateFormat` property on your model:\n\n    /**\n     * The storage format of the model's date columns.\n     *\n     * @var string\n     */\n    protected $dateFormat = 'U';\n\n<a name=\"date-casting-and-timezones\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":437,"to":446}}}}],["1234",{"pageContent":"Date Casting, Serialization, & Timezones\n\nBy default, the `date` and `datetime` casts will serialize dates to a UTC ISO-8601 date string (`YYYY-MM-DDTHH:MM:SS.uuuuuuZ`), regardless of the timezone specified in your application's `timezone` configuration option. You are strongly encouraged to always use this serialization format, as well as to store your application's dates in the UTC timezone by not changing your application's `timezone` configuration option from its default `UTC` value. Consistently using the UTC timezone throughout your application will provide the maximum level of interoperability with other date manipulation libraries written in PHP and JavaScript.\n\nIf a custom format is applied to the `date` or `datetime` cast, such as `datetime:Y-m-d H:i:s`, the inner timezone of the Carbon instance will be used during date serialization. Typically, this will be the timezone specified in your application's `timezone` configuration option.\n\n<a name=\"enum-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":447,"to":453}}}}],["1235",{"pageContent":"Enum Casting\n\nEloquent also allows you to cast your attribute values to PHP [Enums](https://www.php.net/manual/en/language.enumerations.backed.php). To accomplish this, you may specify the attribute and enum you wish to cast in your model's `$casts` property array:\n\n    use App\\Enums\\ServerStatus;\n\n    /**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'status' => ServerStatus::class,\n    ];\n\nOnce you have defined the cast on your model, the specified attribute will be automatically cast to and from an enum when you interact with the attribute:\n\n    if ($server->status == ServerStatus::Provisioned) {\n        $server->status = ServerStatus::Ready;\n\n        $server->save();\n    }\n\n<a name=\"casting-arrays-of-enums\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":454,"to":477}}}}],["1236",{"pageContent":"Casting Arrays Of Enums\n\nSometimes you may need your model to store an array of enum values within a single column. To accomplish this, you may utilize the `AsEnumArrayObject` or `AsEnumCollection` casts provided by Laravel:\n\n    use App\\Enums\\ServerStatus;\n    use Illuminate\\Database\\Eloquent\\Casts\\AsEnumCollection;\n\n    /**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'statuses' => AsEnumCollection::class.':'.ServerStatus::class,\n    ];\n\n<a name=\"encrypted-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":478,"to":494}}}}],["1237",{"pageContent":"Encrypted Casting\n\nThe `encrypted` cast will encrypt a model's attribute value using Laravel's built-in [encryption](/docs/{{version}}/encryption) features. In addition, the `encrypted:array`, `encrypted:collection`, `encrypted:object`, `AsEncryptedArrayObject`, and `AsEncryptedCollection` casts work like their unencrypted counterparts; however, as you might expect, the underlying value is encrypted when stored in your database.\n\nAs the final length of the encrypted text is not predictable and is longer than its plain text counterpart, make sure the associated database column is of `TEXT` type or larger. In addition, since the values are encrypted in the database, you will not be able to query or search encrypted attribute values.\n\n<a name=\"key-rotation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":495,"to":501}}}}],["1238",{"pageContent":"Key Rotation\n\nAs you may know, Laravel encrypts strings using the `key` configuration value specified in your application's `app` configuration file. Typically, this value corresponds to the value of the `APP_KEY` environment variable. If you need to rotate your application's encryption key, you will need to manually re-encrypt your encrypted attributes using the new key.\n\n<a name=\"query-time-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":502,"to":506}}}}],["1239",{"pageContent":"Query Time Casting\n\nSometimes you may need to apply casts while executing a query, such as when selecting a raw value from a table. For example, consider the following query:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n\n    $users = User::select([\n        'users.*',\n        'last_posted_at' => Post::selectRaw('MAX(created_at)')\n                ->whereColumn('user_id', 'users.id')\n    ])->get();\n\nThe `last_posted_at` attribute on the results of this query will be a simple string. It would be wonderful if we could apply a `datetime` cast to this attribute when executing the query. Thankfully, we may accomplish this using the `withCasts` method:\n\n    $users = User::select([\n        'users.*',\n        'last_posted_at' => Post::selectRaw('MAX(created_at)')\n                ->whereColumn('user_id', 'users.id')\n    ])->withCasts([\n        'last_posted_at' => 'datetime'\n    ])->get();\n\n<a name=\"custom-casts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":507,"to":530}}}}],["1240",{"pageContent":"Custom Casts\n\nLaravel has a variety of built-in, helpful cast types; however, you may occasionally need to define your own cast types. To create a cast, execute the `make:cast` Artisan command. The new cast class will be placed in your `app/Casts` directory:\n\n```shell\nphp artisan make:cast Json","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":531,"to":536}}}}],["1241",{"pageContent":"All custom cast classes implement the `CastsAttributes` interface. Classes that implement this interface must define a `get` and `set` method. The `get` method is responsible for transforming a raw value from the database into a cast value, while the `set` method should transform a cast value into a raw value that can be stored in the database. As an example, we will re-implement the built-in `json` cast type as a custom cast type:\n\n    <?php\n\n    namespace App\\Casts;\n\n    use Illuminate\\Contracts\\Database\\Eloquent\\CastsAttributes;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Json implements CastsAttributes\n    {\n        /**\n         * Cast the given value.\n         *\n         * @param  array<string, mixed>  $attributes\n         * @return array<string, mixed>\n         */\n        public function get(Model $model, string $key, mixed $value, array $attributes): array\n        {\n            return json_decode($value, true);\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":539,"to":559}}}}],["1242",{"pageContent":"/**\n         * Prepare the given value for storage.\n         *\n         * @param  array<string, mixed>  $attributes\n         */\n        public function set(Model $model, string $key, mixed $value, array $attributes): string\n        {\n            return json_encode($value);\n        }\n    }\n\nOnce you have defined a custom cast type, you may attach it to a model attribute using its class name:\n\n    <?php\n\n    namespace App\\Models;\n\n    use App\\Casts\\Json;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The attributes that should be cast.\n         *\n         * @var array\n         */\n        protected $casts = [\n            'options' => Json::class,\n        ];\n    }\n\n<a name=\"value-object-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":561,"to":593}}}}],["1243",{"pageContent":"Value Object Casting\n\nYou are not limited to casting values to primitive types. You may also cast values to objects. Defining custom casts that cast values to objects is very similar to casting to primitive types; however, the `set` method should return an array of key / value pairs that will be used to set raw, storable values on the model.\n\nAs an example, we will define a custom cast class that casts multiple model values into a single `Address` value object. We will assume the `Address` value has two public properties: `lineOne` and `lineTwo`:\n\n    <?php\n\n    namespace App\\Casts;\n\n    use App\\ValueObjects\\Address as AddressValueObject;\n    use Illuminate\\Contracts\\Database\\Eloquent\\CastsAttributes;\n    use Illuminate\\Database\\Eloquent\\Model;\n    use InvalidArgumentException;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":594,"to":607}}}}],["1244",{"pageContent":"use App\\ValueObjects\\Address as AddressValueObject;\n    use Illuminate\\Contracts\\Database\\Eloquent\\CastsAttributes;\n    use Illuminate\\Database\\Eloquent\\Model;\n    use InvalidArgumentException;\n\n    class Address implements CastsAttributes\n    {\n        /**\n         * Cast the given value.\n         *\n         * @param  array<string, mixed>  $attributes\n         */\n        public function get(Model $model, string $key, mixed $value, array $attributes): AddressValueObject\n        {\n            return new AddressValueObject(\n                $attributes['address_line_one'],\n                $attributes['address_line_two']\n            );\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":607,"to":625}}}}],["1245",{"pageContent":"/**\n         * Prepare the given value for storage.\n         *\n         * @param  array<string, mixed>  $attributes\n         * @return array<string, string>\n         */\n        public function set(Model $model, string $key, mixed $value, array $attributes): array\n        {\n            if (! $value instanceof AddressValueObject) {\n                throw new InvalidArgumentException('The given value is not an Address instance.');\n            }\n\n            return [\n                'address_line_one' => $value->lineOne,\n                'address_line_two' => $value->lineTwo,\n            ];\n        }\n    }\n\nWhen casting to value objects, any changes made to the value object will automatically be synced back to the model before the model is saved:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->address->lineOne = 'Updated Address Value';\n\n    $user->save();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":627,"to":654}}}}],["1246",{"pageContent":"use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->address->lineOne = 'Updated Address Value';\n\n    $user->save();\n\n> **Note**  \n> If you plan to serialize your Eloquent models containing value objects to JSON or arrays, you should implement the `Illuminate\\Contracts\\Support\\Arrayable` and `JsonSerializable` interfaces on the value object.\n\n<a name=\"value-object-caching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":654,"to":665}}}}],["1247",{"pageContent":"Value Object Caching\n\nWhen attributes that are cast to value objects are resolved, they are cached by Eloquent. Therefore, the same object instance will be returned if the attribute is accessed again.\n\nIf you would like to disable the object caching behavior of custom cast classes, you may declare a public `withoutObjectCaching` property on your custom cast class:\n\n```php\nclass Address implements CastsAttributes\n{\n    public bool $withoutObjectCaching = true;\n\n    // ...\n}\n```\n\n<a name=\"array-json-serialization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":666,"to":681}}}}],["1248",{"pageContent":"Array / JSON Serialization\n\nWhen an Eloquent model is converted to an array or JSON using the `toArray` and `toJson` methods, your custom cast value objects will typically be serialized as well as long as they implement the `Illuminate\\Contracts\\Support\\Arrayable` and `JsonSerializable` interfaces. However, when using value objects provided by third-party libraries, you may not have the ability to add these interfaces to the object.\n\nTherefore, you may specify that your custom cast class will be responsible for serializing the value object. To do so, your custom cast class should implement the `Illuminate\\Contracts\\Database\\Eloquent\\SerializesCastableAttributes` interface. This interface states that your class should contain a `serialize` method which should return the serialized form of your value object:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":682,"to":686}}}}],["1249",{"pageContent":"/**\n     * Get the serialized representation of the value.\n     *\n     * @param  array<string, mixed>  $attributes\n     */\n    public function serialize(Model $model, string $key, mixed $value, array $attributes): string\n    {\n        return (string) $value;\n    }\n\n<a name=\"inbound-casting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":688,"to":698}}}}],["1250",{"pageContent":"Inbound Casting\n\nOccasionally, you may need to write a custom cast class that only transforms values that are being set on the model and does not perform any operations when attributes are being retrieved from the model.\n\nInbound only custom casts should implement the `CastsInboundAttributes` interface, which only requires a `set` method to be defined. The `make:cast` Artisan command may be invoked with the `--inbound` option to generate an inbound only cast class:\n\n```shell\nphp artisan make:cast Hash --inbound","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":699,"to":706}}}}],["1251",{"pageContent":"A classic example of an inbound only cast is a \"hashing\" cast. For example, we may define a cast that hashes inbound values via a given algorithm:\n\n    <?php\n\n    namespace App\\Casts;\n\n    use Illuminate\\Contracts\\Database\\Eloquent\\CastsInboundAttributes;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Hash implements CastsInboundAttributes\n    {\n        /**\n         * Create a new cast class instance.\n         */\n        public function __construct(\n            protected string|null $algorithm = null,\n        ) {}\n\n        /**\n         * Prepare the given value for storage.\n         *\n         * @param  array<string, mixed>  $attributes\n         */\n        public function set(Model $model, string $key, mixed $value, array $attributes): string\n        {\n            return is_null($this->algorithm)\n                        ? bcrypt($value)\n                        : hash($this->algorithm, $value);\n        }\n    }\n\n<a name=\"cast-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":709,"to":740}}}}],["1252",{"pageContent":"Cast Parameters\n\nWhen attaching a custom cast to a model, cast parameters may be specified by separating them from the class name using a `:` character and comma-delimiting multiple parameters. The parameters will be passed to the constructor of the cast class:\n\n    /**\n     * The attributes that should be cast.\n     *\n     * @var array\n     */\n    protected $casts = [\n        'secret' => Hash::class.':sha256',\n    ];\n\n<a name=\"castables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":741,"to":754}}}}],["1253",{"pageContent":"Castables\n\nYou may want to allow your application's value objects to define their own custom cast classes. Instead of attaching the custom cast class to your model, you may alternatively attach a value object class that implements the `Illuminate\\Contracts\\Database\\Eloquent\\Castable` interface:\n\n    use App\\Models\\Address;\n\n    protected $casts = [\n        'address' => Address::class,\n    ];\n\nObjects that implement the `Castable` interface must define a `castUsing` method that returns the class name of the custom caster class that is responsible for casting to and from the `Castable` class:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Contracts\\Database\\Eloquent\\Castable;\n    use App\\Casts\\Address as AddressCast;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":755,"to":772}}}}],["1254",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Contracts\\Database\\Eloquent\\Castable;\n    use App\\Casts\\Address as AddressCast;\n\n    class Address implements Castable\n    {\n        /**\n         * Get the name of the caster class to use when casting from / to this cast target.\n         *\n         * @param  array<string, mixed>  $arguments\n         */\n        public static function castUsing(array $arguments): string\n        {\n            return AddressCast::class;\n        }\n    }\n\nWhen using `Castable` classes, you may still provide arguments in the `$casts` definition. The arguments will be passed to the `castUsing` method:\n\n    use App\\Models\\Address;\n\n    protected $casts = [\n        'address' => Address::class.':argument',\n    ];\n\n<a name=\"anonymous-cast-classes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":772,"to":800}}}}],["1255",{"pageContent":"Castables & Anonymous Cast Classes\n\nBy combining \"castables\" with PHP's [anonymous classes](https://www.php.net/manual/en/language.oop5.anonymous.php), you may define a value object and its casting logic as a single castable object. To accomplish this, return an anonymous class from your value object's `castUsing` method. The anonymous class should implement the `CastsAttributes` interface:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Contracts\\Database\\Eloquent\\Castable;\n    use Illuminate\\Contracts\\Database\\Eloquent\\CastsAttributes;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Address implements Castable\n    {\n        // ...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":801,"to":815}}}}],["1256",{"pageContent":"class Address implements Castable\n    {\n        // ...\n\n        /**\n         * Get the caster class to use when casting from / to this cast target.\n         *\n         * @param  array<string, mixed>  $arguments\n         */\n        public static function castUsing(array $arguments): CastsAttributes\n        {\n            return new class implements CastsAttributes\n            {\n                public function get(Model $model, string $key, mixed $value, array $attributes): Address\n                {\n                    return new Address(\n                        $attributes['address_line_one'],\n                        $attributes['address_line_two']\n                    );\n                }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":815,"to":834}}}}],["1257",{"pageContent":"public function set(Model $model, string $key, mixed $value, array $attributes): array\n                {\n                    return [\n                        'address_line_one' => $value->lineOne,\n                        'address_line_two' => $value->lineTwo,\n                    ];\n                }\n            };\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-mutators.md","loc":{"lines":{"from":836,"to":845}}}}],["1258",{"pageContent":"# Eloquent: Relationships","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1,"to":1}}}}],["1259",{"pageContent":"- [Introduction](#introduction)\n- [Defining Relationships](#defining-relationships)\n    - [One To One](#one-to-one)\n    - [One To Many](#one-to-many)\n    - [One To Many (Inverse) / Belongs To](#one-to-many-inverse)\n    - [Has One Of Many](#has-one-of-many)\n    - [Has One Through](#has-one-through)\n    - [Has Many Through](#has-many-through)\n- [Many To Many Relationships](#many-to-many)\n    - [Retrieving Intermediate Table Columns](#retrieving-intermediate-table-columns)\n    - [Filtering Queries Via Intermediate Table Columns](#filtering-queries-via-intermediate-table-columns)\n    - [Ordering Queries Via Intermediate Table Columns](#ordering-queries-via-intermediate-table-columns)\n    - [Defining Custom Intermediate Table Models](#defining-custom-intermediate-table-models)\n- [Polymorphic Relationships](#polymorphic-relationships)\n    - [One To One](#one-to-one-polymorphic-relations)\n    - [One To Many](#one-to-many-polymorphic-relations)\n    - [One Of Many](#one-of-many-polymorphic-relations)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":3,"to":19}}}}],["1260",{"pageContent":"- [One To One](#one-to-one-polymorphic-relations)\n    - [One To Many](#one-to-many-polymorphic-relations)\n    - [One Of Many](#one-of-many-polymorphic-relations)\n    - [Many To Many](#many-to-many-polymorphic-relations)\n    - [Custom Polymorphic Types](#custom-polymorphic-types)\n- [Dynamic Relationships](#dynamic-relationships)\n- [Querying Relations](#querying-relations)\n    - [Relationship Methods Vs. Dynamic Properties](#relationship-methods-vs-dynamic-properties)\n    - [Querying Relationship Existence](#querying-relationship-existence)\n    - [Querying Relationship Absence](#querying-relationship-absence)\n    - [Querying Morph To Relationships](#querying-morph-to-relationships)\n- [Aggregating Related Models](#aggregating-related-models)\n    - [Counting Related Models](#counting-related-models)\n    - [Other Aggregate Functions](#other-aggregate-functions)\n    - [Counting Related Models On Morph To Relationships](#counting-related-models-on-morph-to-relationships)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":19,"to":33}}}}],["1261",{"pageContent":"- [Other Aggregate Functions](#other-aggregate-functions)\n    - [Counting Related Models On Morph To Relationships](#counting-related-models-on-morph-to-relationships)\n- [Eager Loading](#eager-loading)\n    - [Constraining Eager Loads](#constraining-eager-loads)\n    - [Lazy Eager Loading](#lazy-eager-loading)\n    - [Preventing Lazy Loading](#preventing-lazy-loading)\n- [Inserting & Updating Related Models](#inserting-and-updating-related-models)\n    - [The `save` Method](#the-save-method)\n    - [The `create` Method](#the-create-method)\n    - [Belongs To Relationships](#updating-belongs-to-relationships)\n    - [Many To Many Relationships](#updating-many-to-many-relationships)\n- [Touching Parent Timestamps](#touching-parent-timestamps)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":33,"to":44}}}}],["1262",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":46,"to":46}}}}],["1263",{"pageContent":"Introduction\n\nDatabase tables are often related to one another. For example, a blog post may have many comments or an order could be related to the user who placed it. Eloquent makes managing and working with these relationships easy, and supports a variety of common relationships:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- [One To One](#one-to-one)\n- [One To Many](#one-to-many)\n- [Many To Many](#many-to-many)\n- [Has One Through](#has-one-through)\n- [Has Many Through](#has-many-through)\n- [One To One (Polymorphic)](#one-to-one-polymorphic-relations)\n- [One To Many (Polymorphic)](#one-to-many-polymorphic-relations)\n- [Many To Many (Polymorphic)](#many-to-many-polymorphic-relations)\n\n</div>\n\n<a name=\"defining-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":47,"to":64}}}}],["1264",{"pageContent":"Defining Relationships\n\nEloquent relationships are defined as methods on your Eloquent model classes. Since relationships also serve as powerful [query builders](/docs/{{version}}/queries), defining relationships as methods provides powerful method chaining and querying capabilities. For example, we may chain additional query constraints on this `posts` relationship:\n\n    $user->posts()->where('active', 1)->get();\n\nBut, before diving too deep into using relationships, let's learn how to define each type of relationship supported by Eloquent.\n\n<a name=\"one-to-one\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":65,"to":73}}}}],["1265",{"pageContent":"One To One\n\nA one-to-one relationship is a very basic type of database relationship. For example, a `User` model might be associated with one `Phone` model. To define this relationship, we will place a `phone` method on the `User` model. The `phone` method should call the `hasOne` method and return its result. The `hasOne` method is available to your model via the model's `Illuminate\\Database\\Eloquent\\Model` base class:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\HasOne;\n\n    class User extends Model\n    {\n        /**\n         * Get the phone associated with the user.\n         */\n        public function phone(): HasOne\n        {\n            return $this->hasOne(Phone::class);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":74,"to":94}}}}],["1266",{"pageContent":"The first argument passed to the `hasOne` method is the name of the related model class. Once the relationship is defined, we may retrieve the related record using Eloquent's dynamic properties. Dynamic properties allow you to access relationship methods as if they were properties defined on the model:\n\n    $phone = User::find(1)->phone;\n\nEloquent determines the foreign key of the relationship based on the parent model name. In this case, the `Phone` model is automatically assumed to have a `user_id` foreign key. If you wish to override this convention, you may pass a second argument to the `hasOne` method:\n\n    return $this->hasOne(Phone::class, 'foreign_key');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":96,"to":102}}}}],["1267",{"pageContent":"return $this->hasOne(Phone::class, 'foreign_key');\n\nAdditionally, Eloquent assumes that the foreign key should have a value matching the primary key column of the parent. In other words, Eloquent will look for the value of the user's `id` column in the `user_id` column of the `Phone` record. If you would like the relationship to use a primary key value other than `id` or your model's `$primaryKey` property, you may pass a third argument to the `hasOne` method:\n\n    return $this->hasOne(Phone::class, 'foreign_key', 'local_key');\n\n<a name=\"one-to-one-defining-the-inverse-of-the-relationship\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":102,"to":108}}}}],["1268",{"pageContent":"Defining The Inverse Of The Relationship\n\nSo, we can access the `Phone` model from our `User` model. Next, let's define a relationship on the `Phone` model that will let us access the user that owns the phone. We can define the inverse of a `hasOne` relationship using the `belongsTo` method:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\n    class Phone extends Model\n    {\n        /**\n         * Get the user that owns the phone.\n         */\n        public function user(): BelongsTo\n        {\n            return $this->belongsTo(User::class);\n        }\n    }\n\nWhen invoking the `user` method, Eloquent will attempt to find a `User` model that has an `id` which matches the `user_id` column on the `Phone` model.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":109,"to":131}}}}],["1269",{"pageContent":"When invoking the `user` method, Eloquent will attempt to find a `User` model that has an `id` which matches the `user_id` column on the `Phone` model.\n\nEloquent determines the foreign key name by examining the name of the relationship method and suffixing the method name with `_id`. So, in this case, Eloquent assumes that the `Phone` model has a `user_id` column. However, if the foreign key on the `Phone` model is not `user_id`, you may pass a custom key name as the second argument to the `belongsTo` method:\n\n    /**\n     * Get the user that owns the phone.\n     */\n    public function user(): BelongsTo\n    {\n        return $this->belongsTo(User::class, 'foreign_key');\n    }\n\nIf the parent model does not use `id` as its primary key, or you wish to find the associated model using a different column, you may pass a third argument to the `belongsTo` method specifying the parent table's custom key:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":131,"to":143}}}}],["1270",{"pageContent":"/**\n     * Get the user that owns the phone.\n     */\n    public function user(): BelongsTo\n    {\n        return $this->belongsTo(User::class, 'foreign_key', 'owner_key');\n    }\n\n<a name=\"one-to-many\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":145,"to":153}}}}],["1271",{"pageContent":"One To Many\n\nA one-to-many relationship is used to define relationships where a single model is the parent to one or more child models. For example, a blog post may have an infinite number of comments. Like all other Eloquent relationships, one-to-many relationships are defined by defining a method on your Eloquent model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\HasMany;\n\n    class Post extends Model\n    {\n        /**\n         * Get the comments for the blog post.\n         */\n        public function comments(): HasMany\n        {\n            return $this->hasMany(Comment::class);\n        }\n    }\n\nRemember, Eloquent will automatically determine the proper foreign key column for the `Comment` model. By convention, Eloquent will take the \"snake case\" name of the parent model and suffix it with `_id`. So, in this example, Eloquent will assume the foreign key column on the `Comment` model is `post_id`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":154,"to":176}}}}],["1272",{"pageContent":"Once the relationship method has been defined, we can access the [collection](/docs/{{version}}/eloquent-collections) of related comments by accessing the `comments` property. Remember, since Eloquent provides \"dynamic relationship properties\", we can access relationship methods as if they were defined as properties on the model:\n\n    use App\\Models\\Post;\n\n    $comments = Post::find(1)->comments;\n\n    foreach ($comments as $comment) {\n        // ...\n    }\n\nSince all relationships also serve as query builders, you may add further constraints to the relationship query by calling the `comments` method and continuing to chain conditions onto the query:\n\n    $comment = Post::find(1)->comments()\n                        ->where('title', 'foo')\n                        ->first();\n\nLike the `hasOne` method, you may also override the foreign and local keys by passing additional arguments to the `hasMany` method:\n\n    return $this->hasMany(Comment::class, 'foreign_key');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":178,"to":196}}}}],["1273",{"pageContent":"Like the `hasOne` method, you may also override the foreign and local keys by passing additional arguments to the `hasMany` method:\n\n    return $this->hasMany(Comment::class, 'foreign_key');\n\n    return $this->hasMany(Comment::class, 'foreign_key', 'local_key');\n\n<a name=\"one-to-many-inverse\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":196,"to":202}}}}],["1274",{"pageContent":"One To Many (Inverse) / Belongs To\n\nNow that we can access all of a post's comments, let's define a relationship to allow a comment to access its parent post. To define the inverse of a `hasMany` relationship, define a relationship method on the child model which calls the `belongsTo` method:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\n    class Comment extends Model\n    {\n        /**\n         * Get the post that owns the comment.\n         */\n        public function post(): BelongsTo\n        {\n            return $this->belongsTo(Post::class);\n        }\n    }\n\nOnce the relationship has been defined, we can retrieve a comment's parent post by accessing the `post` \"dynamic relationship property\":\n\n    use App\\Models\\Comment;\n\n    $comment = Comment::find(1);\n\n    return $comment->post->title;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":203,"to":231}}}}],["1275",{"pageContent":"use App\\Models\\Comment;\n\n    $comment = Comment::find(1);\n\n    return $comment->post->title;\n\nIn the example above, Eloquent will attempt to find a `Post` model that has an `id` which matches the `post_id` column on the `Comment` model.\n\nEloquent determines the default foreign key name by examining the name of the relationship method and suffixing the method name with a `_` followed by the name of the parent model's primary key column. So, in this example, Eloquent will assume the `Post` model's foreign key on the `comments` table is `post_id`.\n\nHowever, if the foreign key for your relationship does not follow these conventions, you may pass a custom foreign key name as the second argument to the `belongsTo` method:\n\n    /**\n     * Get the post that owns the comment.\n     */\n    public function post(): BelongsTo\n    {\n        return $this->belongsTo(Post::class, 'foreign_key');\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":231,"to":249}}}}],["1276",{"pageContent":"/**\n     * Get the post that owns the comment.\n     */\n    public function post(): BelongsTo\n    {\n        return $this->belongsTo(Post::class, 'foreign_key');\n    }\n\nIf your parent model does not use `id` as its primary key, or you wish to find the associated model using a different column, you may pass a third argument to the `belongsTo` method specifying your parent table's custom key:\n\n    /**\n     * Get the post that owns the comment.\n     */\n    public function post(): BelongsTo\n    {\n        return $this->belongsTo(Post::class, 'foreign_key', 'owner_key');\n    }\n\n<a name=\"default-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":249,"to":267}}}}],["1277",{"pageContent":"Default Models\n\nThe `belongsTo`, `hasOne`, `hasOneThrough`, and `morphOne` relationships allow you to define a default model that will be returned if the given relationship is `null`. This pattern is often referred to as the [Null Object pattern](https://en.wikipedia.org/wiki/Null_Object_pattern) and can help remove conditional checks in your code. In the following example, the `user` relation will return an empty `App\\Models\\User` model if no user is attached to the `Post` model:\n\n    /**\n     * Get the author of the post.\n     */\n    public function user(): BelongsTo\n    {\n        return $this->belongsTo(User::class)->withDefault();\n    }\n\nTo populate the default model with attributes, you may pass an array or closure to the `withDefault` method:\n\n    /**\n     * Get the author of the post.\n     */\n    public function user(): BelongsTo\n    {\n        return $this->belongsTo(User::class)->withDefault([\n            'name' => 'Guest Author',\n        ]);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":268,"to":290}}}}],["1278",{"pageContent":"/**\n     * Get the author of the post.\n     */\n    public function user(): BelongsTo\n    {\n        return $this->belongsTo(User::class)->withDefault(function (User $user, Post $post) {\n            $user->name = 'Guest Author';\n        });\n    }\n\n<a name=\"querying-belongs-to-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":292,"to":302}}}}],["1279",{"pageContent":"Querying Belongs To Relationships\n\nWhen querying for the children of a \"belongs to\" relationship, you may manually build the `where` clause to retrieve the corresponding Eloquent models:\n\n    use App\\Models\\Post;\n\n    $posts = Post::where('user_id', $user->id)->get();\n\nHowever, you may find it more convenient to use the `whereBelongsTo` method, which will automatically determine the proper relationship and foreign key for the given model:\n\n    $posts = Post::whereBelongsTo($user)->get();\n\nYou may also provide a [collection](/docs/{{version}}/eloquent-collections) instance to the `whereBelongsTo` method. When doing so, Laravel will retrieve models that belong to any of the parent models within the collection:\n\n    $users = User::where('vip', true)->get();\n\n    $posts = Post::whereBelongsTo($users)->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":303,"to":319}}}}],["1280",{"pageContent":"$users = User::where('vip', true)->get();\n\n    $posts = Post::whereBelongsTo($users)->get();\n\nBy default, Laravel will determine the relationship associated with the given model based on the class name of the model; however, you may specify the relationship name manually by providing it as the second argument to the `whereBelongsTo` method:\n\n    $posts = Post::whereBelongsTo($user, 'author')->get();\n\n<a name=\"has-one-of-many\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":319,"to":327}}}}],["1281",{"pageContent":"Has One Of Many\n\nSometimes a model may have many related models, yet you want to easily retrieve the \"latest\" or \"oldest\" related model of the relationship. For example, a `User` model may be related to many `Order` models, but you want to define a convenient way to interact with the most recent order the user has placed. You may accomplish this using the `hasOne` relationship type combined with the `ofMany` methods:\n\n```php\n/**\n * Get the user's most recent order.\n */\npublic function latestOrder(): HasOne\n{\n    return $this->hasOne(Order::class)->latestOfMany();\n}\n```\n\nLikewise, you may define a method to retrieve the \"oldest\", or first, related model of a relationship:\n\n```php\n/**\n * Get the user's oldest order.\n */\npublic function oldestOrder(): HasOne\n{\n    return $this->hasOne(Order::class)->oldestOfMany();\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":328,"to":351}}}}],["1282",{"pageContent":"By default, the `latestOfMany` and `oldestOfMany` methods will retrieve the latest or oldest related model based on the model's primary key, which must be sortable. However, sometimes you may wish to retrieve a single model from a larger relationship using a different sorting criteria.\n\nFor example, using the `ofMany` method, you may retrieve the user's most expensive order. The `ofMany` method accepts the sortable column as its first argument and which aggregate function (`min` or `max`) to apply when querying for the related model:\n\n```php\n/**\n * Get the user's largest order.\n */\npublic function largestOrder(): HasOne\n{\n    return $this->hasOne(Order::class)->ofMany('price', 'max');\n}\n```\n\n> **Warning**  \n> Because PostgreSQL does not support executing the `MAX` function against UUID columns, it is not currently possible to use one-of-many relationships in combination with PostgreSQL UUID columns.\n\n<a name=\"converting-many-relationships-to-has-one-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":354,"to":371}}}}],["1283",{"pageContent":"Converting \"Many\" Relationships To Has One Relationships\n\nOften, when retrieving a single model using the `latestOfMany`, `oldestOfMany`, or `ofMany` methods, you already have a \"has many\" relationship defined for the same model. For convenience, Laravel allows you to easily convert this relationship into a \"has one\" relationship by invoking the `one` method on the relationship:\n\n```php\n/**\n * Get the user's orders.\n */\npublic function orders(): HasMany\n{\n    return $this->hasMany(Order::class);\n}\n\n/**\n * Get the user's largest order.\n */\npublic function largestOrder(): HasOne\n{\n    return $this->orders()->one()->ofMany('price', 'max');\n}\n```\n\n<a name=\"advanced-has-one-of-many-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":372,"to":394}}}}],["1284",{"pageContent":"Advanced Has One Of Many Relationships\n\nIt is possible to construct more advanced \"has one of many\" relationships. For example, a `Product` model may have many associated `Price` models that are retained in the system even after new pricing is published. In addition, new pricing data for the product may be able to be published in advance to take effect at a future date via a `published_at` column.\n\nSo, in summary, we need to retrieve the latest published pricing where the published date is not in the future. In addition, if two prices have the same published date, we will prefer the price with the greatest ID. To accomplish this, we must pass an array to the `ofMany` method that contains the sortable columns which determine the latest price. In addition, a closure will be provided as the second argument to the `ofMany` method. This closure will be responsible for adding additional publish date constraints to the relationship query:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":395,"to":399}}}}],["1285",{"pageContent":"```php\n/**\n * Get the current pricing for the product.\n */\npublic function currentPricing(): HasOne\n{\n    return $this->hasOne(Price::class)->ofMany([\n        'published_at' => 'max',\n        'id' => 'max',\n    ], function (Builder $query) {\n        $query->where('published_at', '<', now());\n    });\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":401,"to":413}}}}],["1286",{"pageContent":"<a name=\"has-one-through\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":416,"to":416}}}}],["1287",{"pageContent":"Has One Through\n\nThe \"has-one-through\" relationship defines a one-to-one relationship with another model. However, this relationship indicates that the declaring model can be matched with one instance of another model by proceeding _through_ a third model.\n\nFor example, in a vehicle repair shop application, each `Mechanic` model may be associated with one `Car` model, and each `Car` model may be associated with one `Owner` model. While the mechanic and the owner have no direct relationship within the database, the mechanic can access the owner _through_ the `Car` model. Let's look at the tables necessary to define this relationship:\n\n    mechanics\n        id - integer\n        name - string\n\n    cars\n        id - integer\n        model - string\n        mechanic_id - integer\n\n    owners\n        id - integer\n        name - string\n        car_id - integer\n\nNow that we have examined the table structure for the relationship, let's define the relationship on the `Mechanic` model:\n\n    <?php","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":417,"to":439}}}}],["1288",{"pageContent":"Now that we have examined the table structure for the relationship, let's define the relationship on the `Mechanic` model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\HasOneThrough;\n\n    class Mechanic extends Model\n    {\n        /**\n         * Get the car's owner.\n         */\n        public function carOwner(): HasOneThrough\n        {\n            return $this->hasOneThrough(Owner::class, Car::class);\n        }\n    }\n\nThe first argument passed to the `hasOneThrough` method is the name of the final model we wish to access, while the second argument is the name of the intermediate model.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":439,"to":459}}}}],["1289",{"pageContent":"The first argument passed to the `hasOneThrough` method is the name of the final model we wish to access, while the second argument is the name of the intermediate model.\n\nOr, if the relevant relationships have already been defined on all of the models involved in the relationship, you may fluently define a \"has-one-through\" relationship by invoking the `through` method and supplying the names of those relationships. For example, if the `Mechanic` model has a `cars` relationship and the `Car` model has an `owner` relationship, you may define a \"has-one-through\" relationship connecting the mechanic and the owner like so:\n\n```php\n// String based syntax...\nreturn $this->through('cars')->has('owner');\n\n// Dynamic syntax...\nreturn $this->throughCars()->hasOwner();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":459,"to":468}}}}],["1290",{"pageContent":"<a name=\"has-one-through-key-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":471,"to":471}}}}],["1291",{"pageContent":"Key Conventions\n\nTypical Eloquent foreign key conventions will be used when performing the relationship's queries. If you would like to customize the keys of the relationship, you may pass them as the third and fourth arguments to the `hasOneThrough` method. The third argument is the name of the foreign key on the intermediate model. The fourth argument is the name of the foreign key on the final model. The fifth argument is the local key, while the sixth argument is the local key of the intermediate model:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":472,"to":474}}}}],["1292",{"pageContent":"class Mechanic extends Model\n    {\n        /**\n         * Get the car's owner.\n         */\n        public function carOwner(): HasOneThrough\n        {\n            return $this->hasOneThrough(\n                Owner::class,\n                Car::class,\n                'mechanic_id', // Foreign key on the cars table...\n                'car_id', // Foreign key on the owners table...\n                'id', // Local key on the mechanics table...\n                'id' // Local key on the cars table...\n            );\n        }\n    }\n\nOr, as discussed earlier, if the relevant relationships have already been defined on all of the models involved in the relationship, you may fluently define a \"has-one-through\" relationship by invoking the `through` method and supplying the names of those relationships. This approach offers the advantage of reusing the key conventions already defined on the existing relationships:\n\n```php\n// String based syntax...\nreturn $this->through('cars')->has('owner');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":476,"to":498}}}}],["1293",{"pageContent":"```php\n// String based syntax...\nreturn $this->through('cars')->has('owner');\n\n// Dynamic syntax...\nreturn $this->throughCars()->hasOwner();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":498,"to":503}}}}],["1294",{"pageContent":"<a name=\"has-many-through\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":539,"to":539}}}}],["1295",{"pageContent":"Has Many Through\n\nThe \"has-many-through\" relationship provides a convenient way to access distant relations via an intermediate relation. For example, let's assume we are building a deployment platform like [Laravel Vapor](https://vapor.laravel.com). A `Project` model might access many `Deployment` models through an intermediate `Environment` model. Using this example, you could easily gather all deployments for a given project. Let's look at the tables required to define this relationship:\n\n    projects\n        id - integer\n        name - string\n\n    environments\n        id - integer\n        project_id - integer\n        name - string\n\n    deployments\n        id - integer\n        environment_id - integer\n        commit_hash - string\n\nNow that we have examined the table structure for the relationship, let's define the relationship on the `Project` model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\HasManyThrough;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":540,"to":565}}}}],["1296",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\HasManyThrough;\n\n    class Project extends Model\n    {\n        /**\n         * Get all of the deployments for the project.\n         */\n        public function deployments(): HasManyThrough\n        {\n            return $this->hasManyThrough(Deployment::class, Environment::class);\n        }\n    }\n\nThe first argument passed to the `hasManyThrough` method is the name of the final model we wish to access, while the second argument is the name of the intermediate model.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":565,"to":583}}}}],["1297",{"pageContent":"The first argument passed to the `hasManyThrough` method is the name of the final model we wish to access, while the second argument is the name of the intermediate model.\n\nOr, if the relevant relationships have already been defined on all of the models involved in the relationship, you may fluently define a \"has-many-through\" relationship by invoking the `through` method and supplying the names of those relationships. For example, if the `Project` model has a `environments` relationship and the `Environment` model has a `deployments` relationship, you may define a \"has-many-through\" relationship connecting the project and the deployments like so:\n\n```php\n// String based syntax...\nreturn $this->through('environments')->has('deployments');\n\n// Dynamic syntax...\nreturn $this->throughEnvironments()->hasDeployments();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":583,"to":592}}}}],["1298",{"pageContent":"Though the `Deployment` model's table does not contain a `project_id` column, the `hasManyThrough` relation provides access to a project's deployments via `$project->deployments`. To retrieve these models, Eloquent inspects the `project_id` column on the intermediate `Environment` model's table. After finding the relevant environment IDs, they are used to query the `Deployment` model's table.\n\n<a name=\"has-many-through-key-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":595,"to":597}}}}],["1299",{"pageContent":"Key Conventions\n\nTypical Eloquent foreign key conventions will be used when performing the relationship's queries. If you would like to customize the keys of the relationship, you may pass them as the third and fourth arguments to the `hasManyThrough` method. The third argument is the name of the foreign key on the intermediate model. The fourth argument is the name of the foreign key on the final model. The fifth argument is the local key, while the sixth argument is the local key of the intermediate model:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":598,"to":600}}}}],["1300",{"pageContent":"class Project extends Model\n    {\n        public function deployments(): HasManyThrough\n        {\n            return $this->hasManyThrough(\n                Deployment::class,\n                Environment::class,\n                'project_id', // Foreign key on the environments table...\n                'environment_id', // Foreign key on the deployments table...\n                'id', // Local key on the projects table...\n                'id' // Local key on the environments table...\n            );\n        }\n    }\n\nOr, as discussed earlier, if the relevant relationships have already been defined on all of the models involved in the relationship, you may fluently define a \"has-many-through\" relationship by invoking the `through` method and supplying the names of those relationships. This approach offers the advantage of reusing the key conventions already defined on the existing relationships:\n\n```php\n// String based syntax...\nreturn $this->through('environments')->has('deployments');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":602,"to":621}}}}],["1301",{"pageContent":"```php\n// String based syntax...\nreturn $this->through('environments')->has('deployments');\n\n// Dynamic syntax...\nreturn $this->throughEnvironments()->hasDeployments();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":621,"to":626}}}}],["1302",{"pageContent":"<a name=\"many-to-many\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":661,"to":661}}}}],["1303",{"pageContent":"Many To Many Relationships\n\nMany-to-many relations are slightly more complicated than `hasOne` and `hasMany` relationships. An example of a many-to-many relationship is a user that has many roles and those roles are also shared by other users in the application. For example, a user may be assigned the role of \"Author\" and \"Editor\"; however, those roles may also be assigned to other users as well. So, a user has many roles and a role has many users.\n\n<a name=\"many-to-many-table-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":662,"to":666}}}}],["1304",{"pageContent":"Table Structure\n\nTo define this relationship, three database tables are needed: `users`, `roles`, and `role_user`. The `role_user` table is derived from the alphabetical order of the related model names and contains `user_id` and `role_id` columns. This table is used as an intermediate table linking the users and roles.\n\nRemember, since a role can belong to many users, we cannot simply place a `user_id` column on the `roles` table. This would mean that a role could only belong to a single user. In order to provide support for roles being assigned to multiple users, the `role_user` table is needed. We can summarize the relationship's table structure like so:\n\n    users\n        id - integer\n        name - string\n\n    roles\n        id - integer\n        name - string\n\n    role_user\n        user_id - integer\n        role_id - integer\n\n<a name=\"many-to-many-model-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":667,"to":685}}}}],["1305",{"pageContent":"Model Structure\n\nMany-to-many relationships are defined by writing a method that returns the result of the `belongsToMany` method. The `belongsToMany` method is provided by the `Illuminate\\Database\\Eloquent\\Model` base class that is used by all of your application's Eloquent models. For example, let's define a `roles` method on our `User` model. The first argument passed to this method is the name of the related model class:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\n\n    class User extends Model\n    {\n        /**\n         * The roles that belong to the user.\n         */\n        public function roles(): BelongsToMany\n        {\n            return $this->belongsToMany(Role::class);\n        }\n    }\n\nOnce the relationship is defined, you may access the user's roles using the `roles` dynamic relationship property:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":686,"to":712}}}}],["1306",{"pageContent":"Once the relationship is defined, you may access the user's roles using the `roles` dynamic relationship property:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    foreach ($user->roles as $role) {\n        // ...\n    }\n\nSince all relationships also serve as query builders, you may add further constraints to the relationship query by calling the `roles` method and continuing to chain conditions onto the query:\n\n    $roles = User::find(1)->roles()->orderBy('name')->get();\n\nTo determine the table name of the relationship's intermediate table, Eloquent will join the two related model names in alphabetical order. However, you are free to override this convention. You may do so by passing a second argument to the `belongsToMany` method:\n\n    return $this->belongsToMany(Role::class, 'role_user');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":712,"to":728}}}}],["1307",{"pageContent":"return $this->belongsToMany(Role::class, 'role_user');\n\nIn addition to customizing the name of the intermediate table, you may also customize the column names of the keys on the table by passing additional arguments to the `belongsToMany` method. The third argument is the foreign key name of the model on which you are defining the relationship, while the fourth argument is the foreign key name of the model that you are joining to:\n\n    return $this->belongsToMany(Role::class, 'role_user', 'user_id', 'role_id');\n\n<a name=\"many-to-many-defining-the-inverse-of-the-relationship\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":728,"to":734}}}}],["1308",{"pageContent":"Defining The Inverse Of The Relationship\n\nTo define the \"inverse\" of a many-to-many relationship, you should define a method on the related model which also returns the result of the `belongsToMany` method. To complete our user / role example, let's define the `users` method on the `Role` model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\n\n    class Role extends Model\n    {\n        /**\n         * The users that belong to the role.\n         */\n        public function users(): BelongsToMany\n        {\n            return $this->belongsToMany(User::class);\n        }\n    }\n\nAs you can see, the relationship is defined exactly the same as its `User` model counterpart with the exception of referencing the `App\\Models\\User` model. Since we're reusing the `belongsToMany` method, all of the usual table and key customization options are available when defining the \"inverse\" of many-to-many relationships.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":735,"to":757}}}}],["1309",{"pageContent":"<a name=\"retrieving-intermediate-table-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":759,"to":759}}}}],["1310",{"pageContent":"Retrieving Intermediate Table Columns\n\nAs you have already learned, working with many-to-many relations requires the presence of an intermediate table. Eloquent provides some very helpful ways of interacting with this table. For example, let's assume our `User` model has many `Role` models that it is related to. After accessing this relationship, we may access the intermediate table using the `pivot` attribute on the models:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    foreach ($user->roles as $role) {\n        echo $role->pivot->created_at;\n    }\n\nNotice that each `Role` model we retrieve is automatically assigned a `pivot` attribute. This attribute contains a model representing the intermediate table.\n\nBy default, only the model keys will be present on the `pivot` model. If your intermediate table contains extra attributes, you must specify them when defining the relationship:\n\n    return $this->belongsToMany(Role::class)->withPivot('active', 'created_by');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":760,"to":776}}}}],["1311",{"pageContent":"return $this->belongsToMany(Role::class)->withPivot('active', 'created_by');\n\nIf you would like your intermediate table to have `created_at` and `updated_at` timestamps that are automatically maintained by Eloquent, call the `withTimestamps` method when defining the relationship:\n\n    return $this->belongsToMany(Role::class)->withTimestamps();\n\n> **Warning**  \n> Intermediate tables that utilize Eloquent's automatically maintained timestamps are required to have both `created_at` and `updated_at` timestamp columns.\n\n<a name=\"customizing-the-pivot-attribute-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":776,"to":785}}}}],["1312",{"pageContent":"Customizing The `pivot` Attribute Name\n\nAs noted previously, attributes from the intermediate table may be accessed on models via the `pivot` attribute. However, you are free to customize the name of this attribute to better reflect its purpose within your application.\n\nFor example, if your application contains users that may subscribe to podcasts, you likely have a many-to-many relationship between users and podcasts. If this is the case, you may wish to rename your intermediate table attribute to `subscription` instead of `pivot`. This can be done using the `as` method when defining the relationship:\n\n    return $this->belongsToMany(Podcast::class)\n                    ->as('subscription')\n                    ->withTimestamps();\n\nOnce the custom intermediate table attribute has been specified, you may access the intermediate table data using the customized name:\n\n    $users = User::with('podcasts')->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":786,"to":798}}}}],["1313",{"pageContent":"Once the custom intermediate table attribute has been specified, you may access the intermediate table data using the customized name:\n\n    $users = User::with('podcasts')->get();\n\n    foreach ($users->flatMap->podcasts as $podcast) {\n        echo $podcast->subscription->created_at;\n    }\n\n<a name=\"filtering-queries-via-intermediate-table-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":798,"to":806}}}}],["1314",{"pageContent":"Filtering Queries Via Intermediate Table Columns\n\nYou can also filter the results returned by `belongsToMany` relationship queries using the `wherePivot`, `wherePivotIn`, `wherePivotNotIn`, `wherePivotBetween`, `wherePivotNotBetween`, `wherePivotNull`, and `wherePivotNotNull` methods when defining the relationship:\n\n    return $this->belongsToMany(Role::class)\n                    ->wherePivot('approved', 1);\n\n    return $this->belongsToMany(Role::class)\n                    ->wherePivotIn('priority', [1, 2]);\n\n    return $this->belongsToMany(Role::class)\n                    ->wherePivotNotIn('priority', [1, 2]);\n\n    return $this->belongsToMany(Podcast::class)\n                    ->as('subscriptions')\n                    ->wherePivotBetween('created_at', ['2020-01-01 00:00:00', '2020-12-31 00:00:00']);\n\n    return $this->belongsToMany(Podcast::class)\n                    ->as('subscriptions')\n                    ->wherePivotNotBetween('created_at', ['2020-01-01 00:00:00', '2020-12-31 00:00:00']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":807,"to":826}}}}],["1315",{"pageContent":"return $this->belongsToMany(Podcast::class)\n                    ->as('subscriptions')\n                    ->wherePivotNotBetween('created_at', ['2020-01-01 00:00:00', '2020-12-31 00:00:00']);\n\n    return $this->belongsToMany(Podcast::class)\n                    ->as('subscriptions')\n                    ->wherePivotNull('expired_at');\n\n    return $this->belongsToMany(Podcast::class)\n                    ->as('subscriptions')\n                    ->wherePivotNotNull('expired_at');\n\n<a name=\"ordering-queries-via-intermediate-table-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":826,"to":838}}}}],["1316",{"pageContent":"Ordering Queries Via Intermediate Table Columns\n\nYou can order the results returned by `belongsToMany` relationship queries using the `orderByPivot` method. In the following example, we will retrieve all of the latest badges for the user:\n\n    return $this->belongsToMany(Badge::class)\n                    ->where('rank', 'gold')\n                    ->orderByPivot('created_at', 'desc');\n\n<a name=\"defining-custom-intermediate-table-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":839,"to":847}}}}],["1317",{"pageContent":"Defining Custom Intermediate Table Models\n\nIf you would like to define a custom model to represent the intermediate table of your many-to-many relationship, you may call the `using` method when defining the relationship. Custom pivot models give you the opportunity to define additional behavior on the pivot model, such as methods and casts.\n\nCustom many-to-many pivot models should extend the `Illuminate\\Database\\Eloquent\\Relations\\Pivot` class while custom polymorphic many-to-many pivot models should extend the `Illuminate\\Database\\Eloquent\\Relations\\MorphPivot` class. For example, we may define a `Role` model which uses a custom `RoleUser` pivot model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":848,"to":859}}}}],["1318",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany;\n\n    class Role extends Model\n    {\n        /**\n         * The users that belong to the role.\n         */\n        public function users(): BelongsToMany\n        {\n            return $this->belongsToMany(User::class)->using(RoleUser::class);\n        }\n    }\n\nWhen defining the `RoleUser` model, you should extend the `Illuminate\\Database\\Eloquent\\Relations\\Pivot` class:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Relations\\Pivot;\n\n    class RoleUser extends Pivot\n    {\n        // ...\n    }\n\n> **Warning**  \n> Pivot models may not use the `SoftDeletes` trait. If you need to soft delete pivot records consider converting your pivot model to an actual Eloquent model.\n\n<a name=\"custom-pivot-models-and-incrementing-ids\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":859,"to":893}}}}],["1319",{"pageContent":"Custom Pivot Models And Incrementing IDs\n\nIf you have defined a many-to-many relationship that uses a custom pivot model, and that pivot model has an auto-incrementing primary key, you should ensure your custom pivot model class defines an `incrementing` property that is set to `true`.\n\n    /**\n     * Indicates if the IDs are auto-incrementing.\n     *\n     * @var bool\n     */\n    public $incrementing = true;\n\n<a name=\"polymorphic-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":894,"to":905}}}}],["1320",{"pageContent":"Polymorphic Relationships\n\nA polymorphic relationship allows the child model to belong to more than one type of model using a single association. For example, imagine you are building an application that allows users to share blog posts and videos. In such an application, a `Comment` model might belong to both the `Post` and `Video` models.\n\n<a name=\"one-to-one-polymorphic-relations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":906,"to":910}}}}],["1321",{"pageContent":"One To One (Polymorphic)\n\n<a name=\"one-to-one-polymorphic-table-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":911,"to":913}}}}],["1322",{"pageContent":"Table Structure\n\nA one-to-one polymorphic relation is similar to a typical one-to-one relation; however, the child model can belong to more than one type of model using a single association. For example, a blog `Post` and a `User` may share a polymorphic relation to an `Image` model. Using a one-to-one polymorphic relation allows you to have a single table of unique images that may be associated with posts and users. First, let's examine the table structure:\n\n    posts\n        id - integer\n        name - string\n\n    users\n        id - integer\n        name - string\n\n    images\n        id - integer\n        url - string\n        imageable_id - integer\n        imageable_type - string","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":914,"to":930}}}}],["1323",{"pageContent":"users\n        id - integer\n        name - string\n\n    images\n        id - integer\n        url - string\n        imageable_id - integer\n        imageable_type - string\n\nNote the `imageable_id` and `imageable_type` columns on the `images` table. The `imageable_id` column will contain the ID value of the post or user, while the `imageable_type` column will contain the class name of the parent model. The `imageable_type` column is used by Eloquent to determine which \"type\" of parent model to return when accessing the `imageable` relation. In this case, the column would contain either `App\\Models\\Post` or `App\\Models\\User`.\n\n<a name=\"one-to-one-polymorphic-model-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":930,"to":942}}}}],["1324",{"pageContent":"Model Structure\n\nNext, let's examine the model definitions needed to build this relationship:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphTo;\n\n    class Image extends Model\n    {\n        /**\n         * Get the parent imageable model (user or post).\n         */\n        public function imageable(): MorphTo\n        {\n            return $this->morphTo();\n        }\n    }\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphOne;\n\n    class Post extends Model\n    {\n        /**\n         * Get the post's image.\n         */\n        public function image(): MorphOne\n        {\n            return $this->morphOne(Image::class, 'imageable');\n        }\n    }\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphOne;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":943,"to":980}}}}],["1325",{"pageContent":"use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphOne;\n\n    class User extends Model\n    {\n        /**\n         * Get the user's image.\n         */\n        public function image(): MorphOne\n        {\n            return $this->morphOne(Image::class, 'imageable');\n        }\n    }\n\n<a name=\"one-to-one-polymorphic-retrieving-the-relationship\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":980,"to":994}}}}],["1326",{"pageContent":"Retrieving The Relationship\n\nOnce your database table and models are defined, you may access the relationships via your models. For example, to retrieve the image for a post, we can access the `image` dynamic relationship property:\n\n    use App\\Models\\Post;\n\n    $post = Post::find(1);\n\n    $image = $post->image;\n\nYou may retrieve the parent of the polymorphic model by accessing the name of the method that performs the call to `morphTo`. In this case, that is the `imageable` method on the `Image` model. So, we will access that method as a dynamic relationship property:\n\n    use App\\Models\\Image;\n\n    $image = Image::find(1);\n\n    $imageable = $image->imageable;\n\nThe `imageable` relation on the `Image` model will return either a `Post` or `User` instance, depending on which type of model owns the image.\n\n<a name=\"morph-one-to-one-key-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":995,"to":1015}}}}],["1327",{"pageContent":"Key Conventions\n\nIf necessary, you may specify the name of the \"id\" and \"type\" columns utilized by your polymorphic child model. If you do so, ensure that you always pass the name of the relationship as the first argument to the `morphTo` method. Typically, this value should match the method name, so you may use PHP's `__FUNCTION__` constant:\n\n    /**\n     * Get the model that the image belongs to.\n     */\n    public function imageable(): MorphTo\n    {\n        return $this->morphTo(__FUNCTION__, 'imageable_type', 'imageable_id');\n    }\n\n<a name=\"one-to-many-polymorphic-relations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1016,"to":1028}}}}],["1328",{"pageContent":"One To Many (Polymorphic)\n\n<a name=\"one-to-many-polymorphic-table-structure\"></a>\n#### Table Structure\n\nA one-to-many polymorphic relation is similar to a typical one-to-many relation; however, the child model can belong to more than one type of model using a single association. For example, imagine users of your application can \"comment\" on posts and videos. Using polymorphic relationships, you may use a single `comments` table to contain comments for both posts and videos. First, let's examine the table structure required to build this relationship:\n\n    posts\n        id - integer\n        title - string\n        body - text\n\n    videos\n        id - integer\n        title - string\n        url - string\n\n    comments\n        id - integer\n        body - text\n        commentable_id - integer\n        commentable_type - string\n\n<a name=\"one-to-many-polymorphic-model-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1029,"to":1052}}}}],["1329",{"pageContent":"Model Structure\n\nNext, let's examine the model definitions needed to build this relationship:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphTo;\n\n    class Comment extends Model\n    {\n        /**\n         * Get the parent commentable model (post or video).\n         */\n        public function commentable(): MorphTo\n        {\n            return $this->morphTo();\n        }\n    }\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphMany;\n\n    class Post extends Model\n    {\n        /**\n         * Get all of the post's comments.\n         */\n        public function comments(): MorphMany\n        {\n            return $this->morphMany(Comment::class, 'commentable');\n        }\n    }\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphMany;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1053,"to":1090}}}}],["1330",{"pageContent":"use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphMany;\n\n    class Video extends Model\n    {\n        /**\n         * Get all of the video's comments.\n         */\n        public function comments(): MorphMany\n        {\n            return $this->morphMany(Comment::class, 'commentable');\n        }\n    }\n\n<a name=\"one-to-many-polymorphic-retrieving-the-relationship\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1090,"to":1104}}}}],["1331",{"pageContent":"Retrieving The Relationship\n\nOnce your database table and models are defined, you may access the relationships via your model's dynamic relationship properties. For example, to access all of the comments for a post, we can use the `comments` dynamic property:\n\n    use App\\Models\\Post;\n\n    $post = Post::find(1);\n\n    foreach ($post->comments as $comment) {\n        // ...\n    }\n\nYou may also retrieve the parent of a polymorphic child model by accessing the name of the method that performs the call to `morphTo`. In this case, that is the `commentable` method on the `Comment` model. So, we will access that method as a dynamic relationship property in order to access the comment's parent model:\n\n    use App\\Models\\Comment;\n\n    $comment = Comment::find(1);\n\n    $commentable = $comment->commentable;\n\nThe `commentable` relation on the `Comment` model will return either a `Post` or `Video` instance, depending on which type of model is the comment's parent.\n\n<a name=\"one-of-many-polymorphic-relations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1105,"to":1127}}}}],["1332",{"pageContent":"One Of Many (Polymorphic)\n\nSometimes a model may have many related models, yet you want to easily retrieve the \"latest\" or \"oldest\" related model of the relationship. For example, a `User` model may be related to many `Image` models, but you want to define a convenient way to interact with the most recent image the user has uploaded. You may accomplish this using the `morphOne` relationship type combined with the `ofMany` methods:\n\n```php\n/**\n * Get the user's most recent image.\n */\npublic function latestImage(): MorphOne\n{\n    return $this->morphOne(Image::class, 'imageable')->latestOfMany();\n}\n```\n\nLikewise, you may define a method to retrieve the \"oldest\", or first, related model of a relationship:\n\n```php\n/**\n * Get the user's oldest image.\n */\npublic function oldestImage(): MorphOne\n{\n    return $this->morphOne(Image::class, 'imageable')->oldestOfMany();\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1128,"to":1151}}}}],["1333",{"pageContent":"By default, the `latestOfMany` and `oldestOfMany` methods will retrieve the latest or oldest related model based on the model's primary key, which must be sortable. However, sometimes you may wish to retrieve a single model from a larger relationship using a different sorting criteria.\n\nFor example, using the `ofMany` method, you may retrieve the user's most \"liked\" image. The `ofMany` method accepts the sortable column as its first argument and which aggregate function (`min` or `max`) to apply when querying for the related model:\n\n```php\n/**\n * Get the user's most popular image.\n */\npublic function bestImage(): MorphOne\n{\n    return $this->morphOne(Image::class, 'imageable')->ofMany('likes', 'max');\n}\n```\n\n> **Note**  \n> It is possible to construct more advanced \"one of many\" relationships. For more information, please consult the [has one of many documentation](#advanced-has-one-of-many-relationships).\n\n<a name=\"many-to-many-polymorphic-relations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1154,"to":1171}}}}],["1334",{"pageContent":"Many To Many (Polymorphic)\n\n<a name=\"many-to-many-polymorphic-table-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1172,"to":1174}}}}],["1335",{"pageContent":"Table Structure\n\nMany-to-many polymorphic relations are slightly more complicated than \"morph one\" and \"morph many\" relationships. For example, a `Post` model and `Video` model could share a polymorphic relation to a `Tag` model. Using a many-to-many polymorphic relation in this situation would allow your application to have a single table of unique tags that may be associated with posts or videos. First, let's examine the table structure required to build this relationship:\n\n    posts\n        id - integer\n        name - string\n\n    videos\n        id - integer\n        name - string\n\n    tags\n        id - integer\n        name - string\n\n    taggables\n        tag_id - integer\n        taggable_id - integer\n        taggable_type - string\n\n> **Note**  \n> Before diving into polymorphic many-to-many relationships, you may benefit from reading the documentation on typical [many-to-many relationships](#many-to-many).\n\n<a name=\"many-to-many-polymorphic-model-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1175,"to":1199}}}}],["1336",{"pageContent":"Model Structure\n\nNext, we're ready to define the relationships on the models. The `Post` and `Video` models will both contain a `tags` method that calls the `morphToMany` method provided by the base Eloquent model class.\n\nThe `morphToMany` method accepts the name of the related model as well as the \"relationship name\". Based on the name we assigned to our intermediate table name and the keys it contains, we will refer to the relationship as \"taggable\":\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphToMany;\n\n    class Post extends Model\n    {\n        /**\n         * Get all of the tags for the post.\n         */\n        public function tags(): MorphToMany\n        {\n            return $this->morphToMany(Tag::class, 'taggable');\n        }\n    }\n\n<a name=\"many-to-many-polymorphic-defining-the-inverse-of-the-relationship\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1200,"to":1224}}}}],["1337",{"pageContent":"Defining The Inverse Of The Relationship\n\nNext, on the `Tag` model, you should define a method for each of its possible parent models. So, in this example, we will define a `posts` method and a `videos` method. Both of these methods should return the result of the `morphedByMany` method.\n\nThe `morphedByMany` method accepts the name of the related model as well as the \"relationship name\". Based on the name we assigned to our intermediate table name and the keys it contains, we will refer to the relationship as \"taggable\":\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphToMany;\n\n    class Tag extends Model\n    {\n        /**\n         * Get all of the posts that are assigned this tag.\n         */\n        public function posts(): MorphToMany\n        {\n            return $this->morphedByMany(Post::class, 'taggable');\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1225,"to":1246}}}}],["1338",{"pageContent":"/**\n         * Get all of the videos that are assigned this tag.\n         */\n        public function videos(): MorphToMany\n        {\n            return $this->morphedByMany(Video::class, 'taggable');\n        }\n    }\n\n<a name=\"many-to-many-polymorphic-retrieving-the-relationship\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1248,"to":1257}}}}],["1339",{"pageContent":"Retrieving The Relationship\n\nOnce your database table and models are defined, you may access the relationships via your models. For example, to access all of the tags for a post, you may use the `tags` dynamic relationship property:\n\n    use App\\Models\\Post;\n\n    $post = Post::find(1);\n\n    foreach ($post->tags as $tag) {\n        // ...\n    }\n\nYou may retrieve the parent of a polymorphic relation from the polymorphic child model by accessing the name of the method that performs the call to `morphedByMany`. In this case, that is the `posts` or `videos` methods on the `Tag` model:\n\n    use App\\Models\\Tag;\n\n    $tag = Tag::find(1);\n\n    foreach ($tag->posts as $post) {\n        // ...\n    }\n\n    foreach ($tag->videos as $video) {\n        // ...\n    }\n\n<a name=\"custom-polymorphic-types\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1258,"to":1284}}}}],["1340",{"pageContent":"Custom Polymorphic Types\n\nBy default, Laravel will use the fully qualified class name to store the \"type\" of the related model. For instance, given the one-to-many relationship example above where a `Comment` model may belong to a `Post` or a `Video` model, the default `commentable_type` would be either `App\\Models\\Post` or `App\\Models\\Video`, respectively. However, you may wish to decouple these values from your application's internal structure.\n\nFor example, instead of using the model names as the \"type\", we may use simple strings such as `post` and `video`. By doing so, the polymorphic \"type\" column values in our database will remain valid even if the models are renamed:\n\n    use Illuminate\\Database\\Eloquent\\Relations\\Relation;\n\n    Relation::enforceMorphMap([\n        'post' => 'App\\Models\\Post',\n        'video' => 'App\\Models\\Video',\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1285,"to":1296}}}}],["1341",{"pageContent":"use Illuminate\\Database\\Eloquent\\Relations\\Relation;\n\n    Relation::enforceMorphMap([\n        'post' => 'App\\Models\\Post',\n        'video' => 'App\\Models\\Video',\n    ]);\n\nYou may call the `enforceMorphMap` method in the `boot` method of your `App\\Providers\\AppServiceProvider` class or create a separate service provider if you wish.\n\nYou may determine the morph alias of a given model at runtime using the model's `getMorphClass` method. Conversely, you may determine the fully-qualified class name associated with a morph alias using the `Relation::getMorphedModel` method:\n\n    use Illuminate\\Database\\Eloquent\\Relations\\Relation;\n\n    $alias = $post->getMorphClass();\n\n    $class = Relation::getMorphedModel($alias);\n\n> **Warning**  \n> When adding a \"morph map\" to your existing application, every morphable `*_type` column value in your database that still contains a fully-qualified class will need to be converted to its \"map\" name.\n\n<a name=\"dynamic-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1296,"to":1316}}}}],["1342",{"pageContent":"Dynamic Relationships\n\nYou may use the `resolveRelationUsing` method to define relations between Eloquent models at runtime. While not typically recommended for normal application development, this may occasionally be useful when developing Laravel packages.\n\nThe `resolveRelationUsing` method accepts the desired relationship name as its first argument. The second argument passed to the method should be a closure that accepts the model instance and returns a valid Eloquent relationship definition. Typically, you should configure dynamic relationships within the boot method of a [service provider](/docs/{{version}}/providers):\n\n    use App\\Models\\Order;\n    use App\\Models\\Customer;\n\n    Order::resolveRelationUsing('customer', function (Order $orderModel) {\n        return $orderModel->belongsTo(Customer::class, 'customer_id');\n    });\n\n> **Warning**  \n> When defining dynamic relationships, always provide explicit key name arguments to the Eloquent relationship methods.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1317,"to":1331}}}}],["1343",{"pageContent":"> **Warning**  \n> When defining dynamic relationships, always provide explicit key name arguments to the Eloquent relationship methods.\n\n<a name=\"querying-relations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1331,"to":1334}}}}],["1344",{"pageContent":"Querying Relations\n\nSince all Eloquent relationships are defined via methods, you may call those methods to obtain an instance of the relationship without actually executing a query to load the related models. In addition, all types of Eloquent relationships also serve as [query builders](/docs/{{version}}/queries), allowing you to continue to chain constraints onto the relationship query before finally executing the SQL query against your database.\n\nFor example, imagine a blog application in which a `User` model has many associated `Post` models:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\HasMany;\n\n    class User extends Model\n    {\n        /**\n         * Get all of the posts for the user.\n         */\n        public function posts(): HasMany\n        {\n            return $this->hasMany(Post::class);\n        }\n    }\n\nYou may query the `posts` relationship and add additional constraints to the relationship like so:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1335,"to":1359}}}}],["1345",{"pageContent":"You may query the `posts` relationship and add additional constraints to the relationship like so:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->posts()->where('active', 1)->get();\n\nYou are able to use any of the Laravel [query builder's](/docs/{{version}}/queries) methods on the relationship, so be sure to explore the query builder documentation to learn about all of the methods that are available to you.\n\n<a name=\"chaining-orwhere-clauses-after-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1359,"to":1369}}}}],["1346",{"pageContent":"Chaining `orWhere` Clauses After Relationships\n\nAs demonstrated in the example above, you are free to add additional constraints to relationships when querying them. However, use caution when chaining `orWhere` clauses onto a relationship, as the `orWhere` clauses will be logically grouped at the same level as the relationship constraint:\n\n    $user->posts()\n            ->where('active', 1)\n            ->orWhere('votes', '>=', 100)\n            ->get();\n\nThe example above will generate the following SQL. As you can see, the `or` clause instructs the query to return _any_ post with greater than 100 votes. The query is no longer constrained to a specific user:\n\n```sql\nselect *\nfrom posts\nwhere user_id = ? and active = 1 or votes >= 100","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1370,"to":1384}}}}],["1347",{"pageContent":"In most situations, you should use [logical groups](/docs/{{version}}/queries#logical-grouping) to group the conditional checks between parentheses:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    $user->posts()\n            ->where(function (Builder $query) {\n                return $query->where('active', 1)\n                             ->orWhere('votes', '>=', 100);\n            })\n            ->get();\n\nThe example above will produce the following SQL. Note that the logical grouping has properly grouped the constraints and the query remains constrained to a specific user:\n\n```sql\nselect *\nfrom posts\nwhere user_id = ? and (active = 1 or votes >= 100)\n```\n\n<a name=\"relationship-methods-vs-dynamic-properties\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1387,"to":1406}}}}],["1348",{"pageContent":"Relationship Methods Vs. Dynamic Properties\n\nIf you do not need to add additional constraints to an Eloquent relationship query, you may access the relationship as if it were a property. For example, continuing to use our `User` and `Post` example models, we may access all of a user's posts like so:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    foreach ($user->posts as $post) {\n        // ...\n    }\n\nDynamic relationship properties perform \"lazy loading\", meaning they will only load their relationship data when you actually access them. Because of this, developers often use [eager loading](#eager-loading) to pre-load relationships they know will be accessed after loading the model. Eager loading provides a significant reduction in SQL queries that must be executed to load a model's relations.\n\n<a name=\"querying-relationship-existence\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1407,"to":1421}}}}],["1349",{"pageContent":"Querying Relationship Existence\n\nWhen retrieving model records, you may wish to limit your results based on the existence of a relationship. For example, imagine you want to retrieve all blog posts that have at least one comment. To do so, you may pass the name of the relationship to the `has` and `orHas` methods:\n\n    use App\\Models\\Post;\n\n    // Retrieve all posts that have at least one comment...\n    $posts = Post::has('comments')->get();\n\nYou may also specify an operator and count value to further customize the query:\n\n    // Retrieve all posts that have three or more comments...\n    $posts = Post::has('comments', '>=', 3)->get();\n\nNested `has` statements may be constructed using \"dot\" notation. For example, you may retrieve all posts that have at least one comment that has at least one image:\n\n    // Retrieve posts that have at least one comment with images...\n    $posts = Post::has('comments.images')->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1422,"to":1439}}}}],["1350",{"pageContent":"// Retrieve posts that have at least one comment with images...\n    $posts = Post::has('comments.images')->get();\n\nIf you need even more power, you may use the `whereHas` and `orWhereHas` methods to define additional query constraints on your `has` queries, such as inspecting the content of a comment:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    // Retrieve posts with at least one comment containing words like code%...\n    $posts = Post::whereHas('comments', function (Builder $query) {\n        $query->where('content', 'like', 'code%');\n    })->get();\n\n    // Retrieve posts with at least ten comments containing words like code%...\n    $posts = Post::whereHas('comments', function (Builder $query) {\n        $query->where('content', 'like', 'code%');\n    }, '>=', 10)->get();\n\n> **Warning**  \n> Eloquent does not currently support querying for relationship existence across databases. The relationships must exist within the same database.\n\n<a name=\"inline-relationship-existence-queries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1439,"to":1459}}}}],["1351",{"pageContent":"Inline Relationship Existence Queries\n\nIf you would like to query for a relationship's existence with a single, simple where condition attached to the relationship query, you may find it more convenient to use the `whereRelation`, `orWhereRelation`, `whereMorphRelation`, and `orWhereMorphRelation` methods. For example, we may query for all posts that have unapproved comments:\n\n    use App\\Models\\Post;\n\n    $posts = Post::whereRelation('comments', 'is_approved', false)->get();\n\nOf course, like calls to the query builder's `where` method, you may also specify an operator:\n\n    $posts = Post::whereRelation(\n        'comments', 'created_at', '>=', now()->subHour()\n    )->get();\n\n<a name=\"querying-relationship-absence\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1460,"to":1474}}}}],["1352",{"pageContent":"Querying Relationship Absence\n\nWhen retrieving model records, you may wish to limit your results based on the absence of a relationship. For example, imagine you want to retrieve all blog posts that **don't** have any comments. To do so, you may pass the name of the relationship to the `doesntHave` and `orDoesntHave` methods:\n\n    use App\\Models\\Post;\n\n    $posts = Post::doesntHave('comments')->get();\n\nIf you need even more power, you may use the `whereDoesntHave` and `orWhereDoesntHave` methods to add additional query constraints to your `doesntHave` queries, such as inspecting the content of a comment:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    $posts = Post::whereDoesntHave('comments', function (Builder $query) {\n        $query->where('content', 'like', 'code%');\n    })->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1475,"to":1489}}}}],["1353",{"pageContent":"use Illuminate\\Database\\Eloquent\\Builder;\n\n    $posts = Post::whereDoesntHave('comments', function (Builder $query) {\n        $query->where('content', 'like', 'code%');\n    })->get();\n\nYou may use \"dot\" notation to execute a query against a nested relationship. For example, the following query will retrieve all posts that do not have comments; however, posts that have comments from authors that are not banned will be included in the results:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    $posts = Post::whereDoesntHave('comments.author', function (Builder $query) {\n        $query->where('banned', 0);\n    })->get();\n\n<a name=\"querying-morph-to-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1489,"to":1503}}}}],["1354",{"pageContent":"Querying Morph To Relationships\n\nTo query the existence of \"morph to\" relationships, you may use the `whereHasMorph` and `whereDoesntHaveMorph` methods. These methods accept the name of the relationship as their first argument. Next, the methods accept the names of the related models that you wish to include in the query. Finally, you may provide a closure which customizes the relationship query:\n\n    use App\\Models\\Comment;\n    use App\\Models\\Post;\n    use App\\Models\\Video;\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    // Retrieve comments associated to posts or videos with a title like code%...\n    $comments = Comment::whereHasMorph(\n        'commentable',\n        [Post::class, Video::class],\n        function (Builder $query) {\n            $query->where('title', 'like', 'code%');\n        }\n    )->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1504,"to":1520}}}}],["1355",{"pageContent":"// Retrieve comments associated to posts with a title not like code%...\n    $comments = Comment::whereDoesntHaveMorph(\n        'commentable',\n        Post::class,\n        function (Builder $query) {\n            $query->where('title', 'like', 'code%');\n        }\n    )->get();\n\nYou may occasionally need to add query constraints based on the \"type\" of the related polymorphic model. The closure passed to the `whereHasMorph` method may receive a `$type` value as its second argument. This argument allows you to inspect the \"type\" of the query that is being built:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    $comments = Comment::whereHasMorph(\n        'commentable',\n        [Post::class, Video::class],\n        function (Builder $query, string $type) {\n            $column = $type === Post::class ? 'content' : 'title';\n\n            $query->where($column, 'like', 'code%');\n        }\n    )->get();\n\n<a name=\"querying-all-morph-to-related-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1522,"to":1545}}}}],["1356",{"pageContent":"Querying All Related Models\n\nInstead of passing an array of possible polymorphic models, you may provide `*` as a wildcard value. This will instruct Laravel to retrieve all of the possible polymorphic types from the database. Laravel will execute an additional query in order to perform this operation:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    $comments = Comment::whereHasMorph('commentable', '*', function (Builder $query) {\n        $query->where('title', 'like', 'foo%');\n    })->get();\n\n<a name=\"aggregating-related-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1546,"to":1556}}}}],["1357",{"pageContent":"Aggregating Related Models\n\n<a name=\"counting-related-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1557,"to":1559}}}}],["1358",{"pageContent":"Counting Related Models\n\nSometimes you may want to count the number of related models for a given relationship without actually loading the models. To accomplish this, you may use the `withCount` method. The `withCount` method will place a `{relation}_count` attribute on the resulting models:\n\n    use App\\Models\\Post;\n\n    $posts = Post::withCount('comments')->get();\n\n    foreach ($posts as $post) {\n        echo $post->comments_count;\n    }\n\nBy passing an array to the `withCount` method, you may add the \"counts\" for multiple relations as well as add additional constraints to the queries:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    $posts = Post::withCount(['votes', 'comments' => function (Builder $query) {\n        $query->where('content', 'like', 'code%');\n    }])->get();\n\n    echo $posts[0]->votes_count;\n    echo $posts[0]->comments_count;\n\nYou may also alias the relationship count result, allowing multiple counts on the same relationship:\n\n    use Illuminate\\Database\\Eloquent\\Builder;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1560,"to":1585}}}}],["1359",{"pageContent":"You may also alias the relationship count result, allowing multiple counts on the same relationship:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    $posts = Post::withCount([\n        'comments',\n        'comments as pending_comments_count' => function (Builder $query) {\n            $query->where('approved', false);\n        },\n    ])->get();\n\n    echo $posts[0]->comments_count;\n    echo $posts[0]->pending_comments_count;\n\n<a name=\"deferred-count-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1585,"to":1599}}}}],["1360",{"pageContent":"Deferred Count Loading\n\nUsing the `loadCount` method, you may load a relationship count after the parent model has already been retrieved:\n\n    $book = Book::first();\n\n    $book->loadCount('genres');\n\nIf you need to set additional query constraints on the count query, you may pass an array keyed by the relationships you wish to count. The array values should be closures which receive the query builder instance:\n\n    $book->loadCount(['reviews' => function (Builder $query) {\n        $query->where('rating', 5);\n    }])\n\n<a name=\"relationship-counting-and-custom-select-statements\"></a>\n#### Relationship Counting & Custom Select Statements\n\nIf you're combining `withCount` with a `select` statement, ensure that you call `withCount` after the `select` method:\n\n    $posts = Post::select(['title', 'body'])\n                    ->withCount('comments')\n                    ->get();\n\n<a name=\"other-aggregate-functions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1600,"to":1623}}}}],["1361",{"pageContent":"Other Aggregate Functions\n\nIn addition to the `withCount` method, Eloquent provides `withMin`, `withMax`, `withAvg`, `withSum`, and `withExists` methods. These methods will place a `{relation}_{function}_{column}` attribute on your resulting models:\n\n    use App\\Models\\Post;\n\n    $posts = Post::withSum('comments', 'votes')->get();\n\n    foreach ($posts as $post) {\n        echo $post->comments_sum_votes;\n    }\n\nIf you wish to access the result of the aggregate function using another name, you may specify your own alias:\n\n    $posts = Post::withSum('comments as total_comments', 'votes')->get();\n\n    foreach ($posts as $post) {\n        echo $post->total_comments;\n    }\n\nLike the `loadCount` method, deferred versions of these methods are also available. These additional aggregate operations may be performed on Eloquent models that have already been retrieved:\n\n    $post = Post::first();\n\n    $post->loadSum('comments', 'votes');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1624,"to":1648}}}}],["1362",{"pageContent":"$post = Post::first();\n\n    $post->loadSum('comments', 'votes');\n\nIf you're combining these aggregate methods with a `select` statement, ensure that you call the aggregate methods after the `select` method:\n\n    $posts = Post::select(['title', 'body'])\n                    ->withExists('comments')\n                    ->get();\n\n<a name=\"counting-related-models-on-morph-to-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1648,"to":1658}}}}],["1363",{"pageContent":"Counting Related Models On Morph To Relationships\n\nIf you would like to eager load a \"morph to\" relationship, as well as related model counts for the various entities that may be returned by that relationship, you may utilize the `with` method in combination with the `morphTo` relationship's `morphWithCount` method.\n\nIn this example, let's assume that `Photo` and `Post` models may create `ActivityFeed` models. We will assume the `ActivityFeed` model defines a \"morph to\" relationship named `parentable` that allows us to retrieve the parent `Photo` or `Post` model for a given `ActivityFeed` instance. Additionally, let's assume that `Photo` models \"have many\" `Tag` models and `Post` models \"have many\" `Comment` models.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1659,"to":1663}}}}],["1364",{"pageContent":"Now, let's imagine we want to retrieve `ActivityFeed` instances and eager load the `parentable` parent models for each `ActivityFeed` instance. In addition, we want to retrieve the number of tags that are associated with each parent photo and the number of comments that are associated with each parent post:\n\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphTo;\n\n    $activities = ActivityFeed::with([\n        'parentable' => function (MorphTo $morphTo) {\n            $morphTo->morphWithCount([\n                Photo::class => ['tags'],\n                Post::class => ['comments'],\n            ]);\n        }])->get();\n\n<a name=\"morph-to-deferred-count-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1665,"to":1677}}}}],["1365",{"pageContent":"Deferred Count Loading\n\nLet's assume we have already retrieved a set of `ActivityFeed` models and now we would like to load the nested relationship counts for the various `parentable` models associated with the activity feeds. You may use the `loadMorphCount` method to accomplish this:\n\n    $activities = ActivityFeed::with('parentable')->get();\n\n    $activities->loadMorphCount('parentable', [\n        Photo::class => ['tags'],\n        Post::class => ['comments'],\n    ]);\n\n<a name=\"eager-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1678,"to":1689}}}}],["1366",{"pageContent":"Eager Loading\n\nWhen accessing Eloquent relationships as properties, the related models are \"lazy loaded\". This means the relationship data is not actually loaded until you first access the property. However, Eloquent can \"eager load\" relationships at the time you query the parent model. Eager loading alleviates the \"N + 1\" query problem. To illustrate the N + 1 query problem, consider a `Book` model that \"belongs to\" to an `Author` model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\n    class Book extends Model\n    {\n        /**\n         * Get the author that wrote the book.\n         */\n        public function author(): BelongsTo\n        {\n            return $this->belongsTo(Author::class);\n        }\n    }\n\nNow, let's retrieve all books and their authors:\n\n    use App\\Models\\Book;\n\n    $books = Book::all();\n\n    foreach ($books as $book) {\n        echo $book->author->name;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1690,"to":1720}}}}],["1367",{"pageContent":"Now, let's retrieve all books and their authors:\n\n    use App\\Models\\Book;\n\n    $books = Book::all();\n\n    foreach ($books as $book) {\n        echo $book->author->name;\n    }\n\nThis loop will execute one query to retrieve all of the books within the database table, then another query for each book in order to retrieve the book's author. So, if we have 25 books, the code above would run 26 queries: one for the original book, and 25 additional queries to retrieve the author of each book.\n\nThankfully, we can use eager loading to reduce this operation to just two queries. When building a query, you may specify which relationships should be eager loaded using the `with` method:\n\n    $books = Book::with('author')->get();\n\n    foreach ($books as $book) {\n        echo $book->author->name;\n    }\n\nFor this operation, only two queries will be executed - one query to retrieve all of the books and one query to retrieve all of the authors for all of the books:\n\n```sql\nselect * from books","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1720,"to":1743}}}}],["1368",{"pageContent":"For this operation, only two queries will be executed - one query to retrieve all of the books and one query to retrieve all of the authors for all of the books:\n\n```sql\nselect * from books\n\nselect * from authors where id in (1, 2, 3, 4, 5, ...)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1743,"to":1748}}}}],["1369",{"pageContent":"<a name=\"eager-loading-multiple-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1751,"to":1751}}}}],["1370",{"pageContent":"Eager Loading Multiple Relationships\n\nSometimes you may need to eager load several different relationships. To do so, just pass an array of relationships to the `with` method:\n\n    $books = Book::with(['author', 'publisher'])->get();\n\n<a name=\"nested-eager-loading\"></a>\n#### Nested Eager Loading\n\nTo eager load a relationship's relationships, you may use \"dot\" syntax. For example, let's eager load all of the book's authors and all of the author's personal contacts:\n\n    $books = Book::with('author.contacts')->get();\n\nAlternatively, you may specify nested eager loaded relationships by providing a nested array to the `with` method, which can be convenient when eager loading multiple nested relationships:\n\n    $books = Book::with([\n        'author' => [\n            'contacts',\n            'publisher',\n        ],\n    ])->get();\n\n<a name=\"nested-eager-loading-morphto-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1752,"to":1774}}}}],["1371",{"pageContent":"Nested Eager Loading `morphTo` Relationships\n\nIf you would like to eager load a `morphTo` relationship, as well as nested relationships on the various entities that may be returned by that relationship, you may use the `with` method in combination with the `morphTo` relationship's `morphWith` method. To help illustrate this method, let's consider the following model:\n\n    <?php\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphTo;\n\n    class ActivityFeed extends Model\n    {\n        /**\n         * Get the parent of the activity feed record.\n         */\n        public function parentable(): MorphTo\n        {\n            return $this->morphTo();\n        }\n    }\n\nIn this example, let's assume `Event`, `Photo`, and `Post` models may create `ActivityFeed` models. Additionally, let's assume that `Event` models belong to a `Calendar` model, `Photo` models are associated with `Tag` models, and `Post` models belong to an `Author` model.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1775,"to":1795}}}}],["1372",{"pageContent":"Using these model definitions and relationships, we may retrieve `ActivityFeed` model instances and eager load all `parentable` models and their respective nested relationships:\n\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphTo;\n\n    $activities = ActivityFeed::query()\n        ->with(['parentable' => function (MorphTo $morphTo) {\n            $morphTo->morphWith([\n                Event::class => ['calendar'],\n                Photo::class => ['tags'],\n                Post::class => ['author'],\n            ]);\n        }])->get();\n\n<a name=\"eager-loading-specific-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1797,"to":1810}}}}],["1373",{"pageContent":"Eager Loading Specific Columns\n\nYou may not always need every column from the relationships you are retrieving. For this reason, Eloquent allows you to specify which columns of the relationship you would like to retrieve:\n\n    $books = Book::with('author:id,name,book_id')->get();\n\n> **Warning**  \n> When using this feature, you should always include the `id` column and any relevant foreign key columns in the list of columns you wish to retrieve.\n\n<a name=\"eager-loading-by-default\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1811,"to":1820}}}}],["1374",{"pageContent":"Eager Loading By Default\n\nSometimes you might want to always load some relationships when retrieving a model. To accomplish this, you may define a `$with` property on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\n    class Book extends Model\n    {\n        /**\n         * The relationships that should always be loaded.\n         *\n         * @var array\n         */\n        protected $with = ['author'];\n\n        /**\n         * Get the author that wrote the book.\n         */\n        public function author(): BelongsTo\n        {\n            return $this->belongsTo(Author::class);\n        }\n\n        /**\n         * Get the genre of the book.\n         */\n        public function genre(): BelongsTo\n        {\n            return $this->belongsTo(Genre::class);\n        }\n    }\n\nIf you would like to remove an item from the `$with` property for a single query, you may use the `without` method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1821,"to":1858}}}}],["1375",{"pageContent":"If you would like to remove an item from the `$with` property for a single query, you may use the `without` method:\n\n    $books = Book::without('author')->get();\n\nIf you would like to override all items within the `$with` property for a single query, you may use the `withOnly` method:\n\n    $books = Book::withOnly('genre')->get();\n\n<a name=\"constraining-eager-loads\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1858,"to":1866}}}}],["1376",{"pageContent":"Constraining Eager Loads\n\nSometimes you may wish to eager load a relationship but also specify additional query conditions for the eager loading query. You can accomplish this by passing an array of relationships to the `with` method where the array key is a relationship name and the array value is a closure that adds additional constraints to the eager loading query:\n\n    use App\\Models\\User;\n    use Illuminate\\Contracts\\Database\\Eloquent\\Builder;\n\n    $users = User::with(['posts' => function (Builder $query) {\n        $query->where('title', 'like', '%code%');\n    }])->get();\n\nIn this example, Eloquent will only eager load posts where the post's `title` column contains the word `code`. You may call other [query builder](/docs/{{version}}/queries) methods to further customize the eager loading operation:\n\n    $users = User::with(['posts' => function (Builder $query) {\n        $query->orderBy('created_at', 'desc');\n    }])->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1867,"to":1882}}}}],["1377",{"pageContent":"$users = User::with(['posts' => function (Builder $query) {\n        $query->orderBy('created_at', 'desc');\n    }])->get();\n\n> **Warning**  \n> The `limit` and `take` query builder methods may not be used when constraining eager loads.\n\n<a name=\"constraining-eager-loading-of-morph-to-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1882,"to":1889}}}}],["1378",{"pageContent":"Constraining Eager Loading Of `morphTo` Relationships\n\nIf you are eager loading a `morphTo` relationship, Eloquent will run multiple queries to fetch each type of related model. You may add additional constraints to each of these queries using the `MorphTo` relation's `constrain` method:\n\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphTo;\n\n    $comments = Comment::with(['commentable' => function (MorphTo $morphTo) {\n        $morphTo->constrain([\n            Post::class => function ($query) {\n                $query->whereNull('hidden_at');\n            },\n            Video::class => function ($query) {\n                $query->where('type', 'educational');\n            },\n        ]);\n    }])->get();\n\nIn this example, Eloquent will only eager load posts that have not been hidden and videos that have a `type` value of \"educational\".\n\n<a name=\"constraining-eager-loads-with-relationship-existence\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1890,"to":1909}}}}],["1379",{"pageContent":"Constraining Eager Loads With Relationship Existence\n\nYou may sometimes find yourself needing to check for the existence of a relationship while simultaneously loading the relationship based on the same conditions. For example, you may wish to only retrieve `User` models that have child `Post` models matching a given query condition while also eager loading the matching posts. You may accomplish this using the `withWhereHas` method:\n\n    use App\\Models\\User;\n\n    $users = User::withWhereHas('posts', function ($query) {\n        $query->where('featured', true);\n    })->get();\n\n<a name=\"lazy-eager-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1910,"to":1920}}}}],["1380",{"pageContent":"Lazy Eager Loading\n\nSometimes you may need to eager load a relationship after the parent model has already been retrieved. For example, this may be useful if you need to dynamically decide whether to load related models:\n\n    use App\\Models\\Book;\n\n    $books = Book::all();\n\n    if ($someCondition) {\n        $books->load('author', 'publisher');\n    }\n\nIf you need to set additional query constraints on the eager loading query, you may pass an array keyed by the relationships you wish to load. The array values should be closure instances which receive the query instance:\n\n    $author->load(['books' => function (Builder $query) {\n        $query->orderBy('published_date', 'asc');\n    }]);\n\nTo load a relationship only when it has not already been loaded, use the `loadMissing` method:\n\n    $book->loadMissing('author');\n\n<a name=\"nested-lazy-eager-loading-morphto\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1921,"to":1943}}}}],["1381",{"pageContent":"Nested Lazy Eager Loading & `morphTo`\n\nIf you would like to eager load a `morphTo` relationship, as well as nested relationships on the various entities that may be returned by that relationship, you may use the `loadMorph` method.\n\nThis method accepts the name of the `morphTo` relationship as its first argument, and an array of model / relationship pairs as its second argument. To help illustrate this method, let's consider the following model:\n\n    <?php\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\MorphTo;\n\n    class ActivityFeed extends Model\n    {\n        /**\n         * Get the parent of the activity feed record.\n         */\n        public function parentable(): MorphTo\n        {\n            return $this->morphTo();\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1944,"to":1964}}}}],["1382",{"pageContent":"In this example, let's assume `Event`, `Photo`, and `Post` models may create `ActivityFeed` models. Additionally, let's assume that `Event` models belong to a `Calendar` model, `Photo` models are associated with `Tag` models, and `Post` models belong to an `Author` model.\n\nUsing these model definitions and relationships, we may retrieve `ActivityFeed` model instances and eager load all `parentable` models and their respective nested relationships:\n\n    $activities = ActivityFeed::with('parentable')\n        ->get()\n        ->loadMorph('parentable', [\n            Event::class => ['calendar'],\n            Photo::class => ['tags'],\n            Post::class => ['author'],\n        ]);\n\n<a name=\"preventing-lazy-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1966,"to":1978}}}}],["1383",{"pageContent":"Preventing Lazy Loading\n\nAs previously discussed, eager loading relationships can often provide significant performance benefits to your application. Therefore, if you would like, you may instruct Laravel to always prevent the lazy loading of relationships. To accomplish this, you may invoke the `preventLazyLoading` method offered by the base Eloquent model class. Typically, you should call this method within the `boot` method of your application's `AppServiceProvider` class.\n\nThe `preventLazyLoading` method accepts an optional boolean argument that indicates if lazy loading should be prevented. For example, you may wish to only disable lazy loading in non-production environments so that your production environment will continue to function normally even if a lazy loaded relationship is accidentally present in production code:\n\n```php\nuse Illuminate\\Database\\Eloquent\\Model;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1979,"to":1986}}}}],["1384",{"pageContent":"```php\nuse Illuminate\\Database\\Eloquent\\Model;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Model::preventLazyLoading(! $this->app->isProduction());\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1986,"to":1995}}}}],["1385",{"pageContent":"After preventing lazy loading, Eloquent will throw a `Illuminate\\Database\\LazyLoadingViolationException` exception when your application attempts to lazy load any Eloquent relationship.\n\nYou may customize the behavior of lazy loading violations using the `handleLazyLoadingViolationsUsing` method. For example, using this method, you may instruct lazy loading violations to only be logged instead of interrupting the application's execution with exceptions:\n\n```php\nModel::handleLazyLoadingViolationUsing(function (Model $model, string $relation) {\n    $class = $model::class;\n\n    info(\"Attempted to lazy load [{$relation}] on model [{$class}].\");\n});\n```\n\n<a name=\"inserting-and-updating-related-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":1998,"to":2010}}}}],["1386",{"pageContent":"Inserting & Updating Related Models\n\n<a name=\"the-save-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2011,"to":2013}}}}],["1387",{"pageContent":"The `save` Method\n\nEloquent provides convenient methods for adding new models to relationships. For example, perhaps you need to add a new comment to a post. Instead of manually setting the `post_id` attribute on the `Comment` model you may insert the comment using the relationship's `save` method:\n\n    use App\\Models\\Comment;\n    use App\\Models\\Post;\n\n    $comment = new Comment(['message' => 'A new comment.']);\n\n    $post = Post::find(1);\n\n    $post->comments()->save($comment);\n\nNote that we did not access the `comments` relationship as a dynamic property. Instead, we called the `comments` method to obtain an instance of the relationship. The `save` method will automatically add the appropriate `post_id` value to the new `Comment` model.\n\nIf you need to save multiple related models, you may use the `saveMany` method:\n\n    $post = Post::find(1);\n\n    $post->comments()->saveMany([\n        new Comment(['message' => 'A new comment.']),\n        new Comment(['message' => 'Another new comment.']),\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2014,"to":2036}}}}],["1388",{"pageContent":"$post = Post::find(1);\n\n    $post->comments()->saveMany([\n        new Comment(['message' => 'A new comment.']),\n        new Comment(['message' => 'Another new comment.']),\n    ]);\n\nThe `save` and `saveMany` methods will persist the given model instances, but will not add the newly persisted models to any in-memory relationships that are already loaded onto the parent model. If you plan on accessing the relationship after using the `save` or `saveMany` methods, you may wish to use the `refresh` method to reload the model and its relationships:\n\n    $post->comments()->save($comment);\n\n    $post->refresh();\n\n    // All comments, including the newly saved comment...\n    $post->comments;\n\n<a name=\"the-push-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2036,"to":2052}}}}],["1389",{"pageContent":"Recursively Saving Models & Relationships\n\nIf you would like to `save` your model and all of its associated relationships, you may use the `push` method. In this example, the `Post` model will be saved as well as its comments and the comment's authors:\n\n    $post = Post::find(1);\n\n    $post->comments[0]->message = 'Message';\n    $post->comments[0]->author->name = 'Author Name';\n\n    $post->push();\n\nThe `pushQuietly` method may be used to save a model and its associated relationships without raising any events:\n\n    $post->pushQuietly();\n\n<a name=\"the-create-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2053,"to":2068}}}}],["1390",{"pageContent":"The `create` Method\n\nIn addition to the `save` and `saveMany` methods, you may also use the `create` method, which accepts an array of attributes, creates a model, and inserts it into the database. The difference between `save` and `create` is that `save` accepts a full Eloquent model instance while `create` accepts a plain PHP `array`. The newly created model will be returned by the `create` method:\n\n    use App\\Models\\Post;\n\n    $post = Post::find(1);\n\n    $comment = $post->comments()->create([\n        'message' => 'A new comment.',\n    ]);\n\nYou may use the `createMany` method to create multiple related models:\n\n    $post = Post::find(1);\n\n    $post->comments()->createMany([\n        ['message' => 'A new comment.'],\n        ['message' => 'Another new comment.'],\n    ]);\n\nThe `createQuietly` and `createManyQuietly` methods may be used to create a model(s) without dispatching any events:\n\n    $user = User::find(1);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2069,"to":2092}}}}],["1391",{"pageContent":"The `createQuietly` and `createManyQuietly` methods may be used to create a model(s) without dispatching any events:\n\n    $user = User::find(1);\n\n    $user->posts()->createQuietly([\n        'title' => 'Post title.',\n    ]);\n    \n    $user->posts()->createManyQuietly([\n        ['title' => 'First post.'],\n        ['title' => 'Second post.'],\n    ]);\n\nYou may also use the `findOrNew`, `firstOrNew`, `firstOrCreate`, and `updateOrCreate` methods to [create and update models on relationships](/docs/{{version}}/eloquent#upserts).\n\n> **Note**  \n> Before using the `create` method, be sure to review the [mass assignment](/docs/{{version}}/eloquent#mass-assignment) documentation.\n\n<a name=\"updating-belongs-to-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2092,"to":2110}}}}],["1392",{"pageContent":"Belongs To Relationships\n\nIf you would like to assign a child model to a new parent model, you may use the `associate` method. In this example, the `User` model defines a `belongsTo` relationship to the `Account` model. This `associate` method will set the foreign key on the child model:\n\n    use App\\Models\\Account;\n\n    $account = Account::find(10);\n\n    $user->account()->associate($account);\n\n    $user->save();\n\nTo remove a parent model from a child model, you may use the `dissociate` method. This method will set the relationship's foreign key to `null`:\n\n    $user->account()->dissociate();\n\n    $user->save();\n\n<a name=\"updating-many-to-many-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2111,"to":2129}}}}],["1393",{"pageContent":"Many To Many Relationships\n\n<a name=\"attaching-detaching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2130,"to":2132}}}}],["1394",{"pageContent":"Attaching / Detaching\n\nEloquent also provides methods to make working with many-to-many relationships more convenient. For example, let's imagine a user can have many roles and a role can have many users. You may use the `attach` method to attach a role to a user by inserting a record in the relationship's intermediate table:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    $user->roles()->attach($roleId);\n\nWhen attaching a relationship to a model, you may also pass an array of additional data to be inserted into the intermediate table:\n\n    $user->roles()->attach($roleId, ['expires' => $expires]);\n\nSometimes it may be necessary to remove a role from a user. To remove a many-to-many relationship record, use the `detach` method. The `detach` method will delete the appropriate record out of the intermediate table; however, both models will remain in the database:\n\n    // Detach a single role from the user...\n    $user->roles()->detach($roleId);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2133,"to":2150}}}}],["1395",{"pageContent":"// Detach a single role from the user...\n    $user->roles()->detach($roleId);\n\n    // Detach all roles from the user...\n    $user->roles()->detach();\n\nFor convenience, `attach` and `detach` also accept arrays of IDs as input:\n\n    $user = User::find(1);\n\n    $user->roles()->detach([1, 2, 3]);\n\n    $user->roles()->attach([\n        1 => ['expires' => $expires],\n        2 => ['expires' => $expires],\n    ]);\n\n<a name=\"syncing-associations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2150,"to":2167}}}}],["1396",{"pageContent":"Syncing Associations\n\nYou may also use the `sync` method to construct many-to-many associations. The `sync` method accepts an array of IDs to place on the intermediate table. Any IDs that are not in the given array will be removed from the intermediate table. So, after this operation is complete, only the IDs in the given array will exist in the intermediate table:\n\n    $user->roles()->sync([1, 2, 3]);\n\nYou may also pass additional intermediate table values with the IDs:\n\n    $user->roles()->sync([1 => ['expires' => true], 2, 3]);\n\nIf you would like to insert the same intermediate table values with each of the synced model IDs, you may use the `syncWithPivotValues` method:\n\n    $user->roles()->syncWithPivotValues([1, 2, 3], ['active' => true]);\n\nIf you do not want to detach existing IDs that are missing from the given array, you may use the `syncWithoutDetaching` method:\n\n    $user->roles()->syncWithoutDetaching([1, 2, 3]);\n\n<a name=\"toggling-associations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2168,"to":2186}}}}],["1397",{"pageContent":"Toggling Associations\n\nThe many-to-many relationship also provides a `toggle` method which \"toggles\" the attachment status of the given related model IDs. If the given ID is currently attached, it will be detached. Likewise, if it is currently detached, it will be attached:\n\n    $user->roles()->toggle([1, 2, 3]);\n\nYou may also pass additional intermediate table values with the IDs:\n\n    $user->roles()->toggle([\n        1 => ['expires' => true],\n        2 => ['expires' => true],\n    ]);\n\n<a name=\"updating-a-record-on-the-intermediate-table\"></a>\n#### Updating A Record On The Intermediate Table\n\nIf you need to update an existing row in your relationship's intermediate table, you may use the `updateExistingPivot` method. This method accepts the intermediate record foreign key and an array of attributes to update:\n\n    $user = User::find(1);\n\n    $user->roles()->updateExistingPivot($roleId, [\n        'active' => false,\n    ]);\n\n<a name=\"touching-parent-timestamps\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2187,"to":2211}}}}],["1398",{"pageContent":"Touching Parent Timestamps\n\nWhen a model defines a `belongsTo` or `belongsToMany` relationship to another model, such as a `Comment` which belongs to a `Post`, it is sometimes helpful to update the parent's timestamp when the child model is updated.\n\nFor example, when a `Comment` model is updated, you may want to automatically \"touch\" the `updated_at` timestamp of the owning `Post` so that it is set to the current date and time. To accomplish this, you may add a `touches` property to your child model containing the names of the relationships that should have their `updated_at` timestamps updated when the child model is updated:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Relations\\BelongsTo;\n\n    class Comment extends Model\n    {\n        /**\n         * All of the relationships to be touched.\n         *\n         * @var array\n         */\n        protected $touches = ['post'];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2212,"to":2232}}}}],["1399",{"pageContent":"class Comment extends Model\n    {\n        /**\n         * All of the relationships to be touched.\n         *\n         * @var array\n         */\n        protected $touches = ['post'];\n\n        /**\n         * Get the post that the comment belongs to.\n         */\n        public function post(): BelongsTo\n        {\n            return $this->belongsTo(Post::class);\n        }\n    }\n\n> **Warning**  \n> Parent model timestamps will only be updated if the child model is updated using Eloquent's `save` method.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-relationships.md","loc":{"lines":{"from":2232,"to":2251}}}}],["1400",{"pageContent":"# Eloquent: API Resources\n\n- [Introduction](#introduction)\n- [Generating Resources](#generating-resources)\n- [Concept Overview](#concept-overview)\n    - [Resource Collections](#resource-collections)\n- [Writing Resources](#writing-resources)\n    - [Data Wrapping](#data-wrapping)\n    - [Pagination](#pagination)\n    - [Conditional Attributes](#conditional-attributes)\n    - [Conditional Relationships](#conditional-relationships)\n    - [Adding Meta Data](#adding-meta-data)\n- [Resource Responses](#resource-responses)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":1,"to":15}}}}],["1401",{"pageContent":"Introduction\n\nWhen building an API, you may need a transformation layer that sits between your Eloquent models and the JSON responses that are actually returned to your application's users. For example, you may wish to display certain attributes for a subset of users and not others, or you may wish to always include certain relationships in the JSON representation of your models. Eloquent's resource classes allow you to expressively and easily transform your models and model collections into JSON.\n\nOf course, you may always convert Eloquent models or collections to JSON using their `toJson` methods; however, Eloquent resources provide more granular and robust control over the JSON serialization of your models and their relationships.\n\n<a name=\"generating-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":16,"to":22}}}}],["1402",{"pageContent":"Generating Resources\n\nTo generate a resource class, you may use the `make:resource` Artisan command. By default, resources will be placed in the `app/Http/Resources` directory of your application. Resources extend the `Illuminate\\Http\\Resources\\Json\\JsonResource` class:\n\n```shell\nphp artisan make:resource UserResource\n```\n\n<a name=\"generating-resource-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":23,"to":31}}}}],["1403",{"pageContent":"Resource Collections\n\nIn addition to generating resources that transform individual models, you may generate resources that are responsible for transforming collections of models. This allows your JSON responses to include links and other meta information that is relevant to an entire collection of a given resource.\n\nTo create a resource collection, you should use the `--collection` flag when creating the resource. Or, including the word `Collection` in the resource name will indicate to Laravel that it should create a collection resource. Collection resources extend the `Illuminate\\Http\\Resources\\Json\\ResourceCollection` class:\n\n```shell\nphp artisan make:resource User --collection\n\nphp artisan make:resource UserCollection\n```\n\n<a name=\"concept-overview\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":32,"to":44}}}}],["1404",{"pageContent":"Concept Overview\n\n> **Note**  \n> This is a high-level overview of resources and resource collections. You are highly encouraged to read the other sections of this documentation to gain a deeper understanding of the customization and power offered to you by resources.\n\nBefore diving into all of the options available to you when writing resources, let's first take a high-level look at how resources are used within Laravel. A resource class represents a single model that needs to be transformed into a JSON structure. For example, here is a simple `UserResource` resource class:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":45,"to":57}}}}],["1405",{"pageContent":"<?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;\n\n    class UserResource extends JsonResource\n    {\n        /**\n         * Transform the resource into an array.\n         *\n         * @return array<string, mixed>\n         */\n        public function toArray(Request $request): array\n        {\n            return [\n                'id' => $this->id,\n                'name' => $this->name,\n                'email' => $this->email,\n                'created_at' => $this->created_at,\n                'updated_at' => $this->updated_at,\n            ];\n        }\n    }\n\nEvery resource class defines a `toArray` method which returns the array of attributes that should be converted to JSON when the resource is returned as a response from a route or controller method.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":57,"to":83}}}}],["1406",{"pageContent":"Every resource class defines a `toArray` method which returns the array of attributes that should be converted to JSON when the resource is returned as a response from a route or controller method.\n\nNote that we can access model properties directly from the `$this` variable. This is because a resource class will automatically proxy property and method access down to the underlying model for convenient access. Once the resource is defined, it may be returned from a route or controller. The resource accepts the underlying model instance via its constructor:\n\n    use App\\Http\\Resources\\UserResource;\n    use App\\Models\\User;\n\n    Route::get('/user/{id}', function (string $id) {\n        return new UserResource(User::findOrFail($id));\n    });\n\n<a name=\"resource-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":83,"to":94}}}}],["1407",{"pageContent":"Resource Collections\n\nIf you are returning a collection of resources or a paginated response, you should use the `collection` method provided by your resource class when creating the resource instance in your route or controller:\n\n    use App\\Http\\Resources\\UserResource;\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return UserResource::collection(User::all());\n    });\n\nNote that this does not allow any addition of custom meta data that may need to be returned with your collection. If you would like to customize the resource collection response, you may create a dedicated resource to represent the collection:\n\n```shell\nphp artisan make:resource UserCollection","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":95,"to":109}}}}],["1408",{"pageContent":"Once the resource collection class has been generated, you may easily define any meta data that should be included with the response:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\n    class UserCollection extends ResourceCollection\n    {\n        /**\n         * Transform the resource collection into an array.\n         *\n         * @return array<int|string, mixed>\n         */\n        public function toArray(Request $request): array\n        {\n            return [\n                'data' => $this->collection,\n                'links' => [\n                    'self' => 'link-value',\n                ],\n            ];\n        }\n    }\n\nAfter defining your resource collection, it may be returned from a route or controller:\n\n    use App\\Http\\Resources\\UserCollection;\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return new UserCollection(User::all());\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":112,"to":146}}}}],["1409",{"pageContent":"use App\\Http\\Resources\\UserCollection;\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return new UserCollection(User::all());\n    });\n\n<a name=\"preserving-collection-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":146,"to":153}}}}],["1410",{"pageContent":"Preserving Collection Keys\n\nWhen returning a resource collection from a route, Laravel resets the collection's keys so that they are in numerical order. However, you may add a `preserveKeys` property to your resource class indicating whether a collection's original keys should be preserved:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;\n\n    class UserResource extends JsonResource\n    {\n        /**\n         * Indicates if the resource's collection keys should be preserved.\n         *\n         * @var bool\n         */\n        public $preserveKeys = true;\n    }\n\nWhen the `preserveKeys` property is set to `true`, collection keys will be preserved when the collection is returned from a route or controller:\n\n    use App\\Http\\Resources\\UserResource;\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return UserResource::collection(User::all()->keyBy->id);\n    });\n\n<a name=\"customizing-the-underlying-resource-class\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":154,"to":183}}}}],["1411",{"pageContent":"Customizing The Underlying Resource Class\n\nTypically, the `$this->collection` property of a resource collection is automatically populated with the result of mapping each item of the collection to its singular resource class. The singular resource class is assumed to be the collection's class name without the trailing `Collection` portion of the class name. In addition, depending on your personal preference, the singular resource class may or may not be suffixed with `Resource`.\n\nFor example, `UserCollection` will attempt to map the given user instances into the `UserResource` resource. To customize this behavior, you may override the `$collects` property of your resource collection:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":184,"to":194}}}}],["1412",{"pageContent":"<?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\n    class UserCollection extends ResourceCollection\n    {\n        /**\n         * The resource that this resource collects.\n         *\n         * @var string\n         */\n        public $collects = Member::class;\n    }\n\n<a name=\"writing-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":194,"to":210}}}}],["1413",{"pageContent":"Writing Resources\n\n> **Note**  \n> If you have not read the [concept overview](#concept-overview), you are highly encouraged to do so before proceeding with this documentation.\n\nResources only need to transform a given model into an array. So, each resource contains a `toArray` method which translates your model's attributes into an API friendly array that can be returned from your application's routes or controllers:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":211,"to":223}}}}],["1414",{"pageContent":"<?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;\n\n    class UserResource extends JsonResource\n    {\n        /**\n         * Transform the resource into an array.\n         *\n         * @return array<string, mixed>\n         */\n        public function toArray(Request $request): array\n        {\n            return [\n                'id' => $this->id,\n                'name' => $this->name,\n                'email' => $this->email,\n                'created_at' => $this->created_at,\n                'updated_at' => $this->updated_at,\n            ];\n        }\n    }\n\nOnce a resource has been defined, it may be returned directly from a route or controller:\n\n    use App\\Http\\Resources\\UserResource;\n    use App\\Models\\User;\n\n    Route::get('/user/{id}', function (string $id) {\n        return new UserResource(User::findOrFail($id));\n    });\n\n<a name=\"relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":223,"to":258}}}}],["1415",{"pageContent":"Relationships\n\nIf you would like to include related resources in your response, you may add them to the array returned by your resource's `toArray` method. In this example, we will use the `PostResource` resource's `collection` method to add the user's blog posts to the resource response:\n\n    use App\\Http\\Resources\\PostResource;\n    use Illuminate\\Http\\Request;\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'email' => $this->email,\n            'posts' => PostResource::collection($this->posts),\n            'created_at' => $this->created_at,\n            'updated_at' => $this->updated_at,\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":259,"to":281}}}}],["1416",{"pageContent":"> **Note**  \n> If you would like to include relationships only when they have already been loaded, check out the documentation on [conditional relationships](#conditional-relationships).\n\n<a name=\"writing-resource-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":283,"to":286}}}}],["1417",{"pageContent":"Resource Collections\n\nWhile resources transform a single model into an array, resource collections transform a collection of models into an array. However, it is not absolutely necessary to define a resource collection class for each one of your models since all resources provide a `collection` method to generate an \"ad-hoc\" resource collection on the fly:\n\n    use App\\Http\\Resources\\UserResource;\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return UserResource::collection(User::all());\n    });\n\nHowever, if you need to customize the meta data returned with the collection, it is necessary to define your own resource collection:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":287,"to":305}}}}],["1418",{"pageContent":"<?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\n    class UserCollection extends ResourceCollection\n    {\n        /**\n         * Transform the resource collection into an array.\n         *\n         * @return array<string, mixed>\n         */\n        public function toArray(Request $request): array\n        {\n            return [\n                'data' => $this->collection,\n                'links' => [\n                    'self' => 'link-value',\n                ],\n            ];\n        }\n    }\n\nLike singular resources, resource collections may be returned directly from routes or controllers:\n\n    use App\\Http\\Resources\\UserCollection;\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return new UserCollection(User::all());\n    });\n\n<a name=\"data-wrapping\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":305,"to":339}}}}],["1419",{"pageContent":"Data Wrapping\n\nBy default, your outermost resource is wrapped in a `data` key when the resource response is converted to JSON. So, for example, a typical resource collection response looks like the following:\n\n```json\n{\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"Eladio Schroeder Sr.\",\n            \"email\": \"therese28@example.com\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"Liliana Mayert\",\n            \"email\": \"evandervort@example.com\"\n        }\n    ]\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":340,"to":358}}}}],["1420",{"pageContent":"If you would like to use a custom key instead of `data`, you may define a `$wrap` attribute on the resource class:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;\n\n    class UserResource extends JsonResource\n    {\n        /**\n         * The \"data\" wrapper that should be applied.\n         *\n         * @var string|null\n         */\n        public static $wrap = 'user';\n    }\n\nIf you would like to disable the wrapping of the outermost resource, you should invoke the `withoutWrapping` method on the base `Illuminate\\Http\\Resources\\Json\\JsonResource` class. Typically, you should call this method from your `AppServiceProvider` or another [service provider](/docs/{{version}}/providers) that is loaded on every request to your application:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;\n    use Illuminate\\Support\\ServiceProvider;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":361,"to":386}}}}],["1421",{"pageContent":"<?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }\n\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            JsonResource::withoutWrapping();\n        }\n    }\n\n> **Warning**  \n> The `withoutWrapping` method only affects the outermost response and will not remove `data` keys that you manually add to your own resource collections.\n\n<a name=\"wrapping-nested-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":386,"to":415}}}}],["1422",{"pageContent":"Wrapping Nested Resources\n\nYou have total freedom to determine how your resource's relationships are wrapped. If you would like all resource collections to be wrapped in a `data` key, regardless of their nesting, you should define a resource collection class for each resource and return the collection within a `data` key.\n\nYou may be wondering if this will cause your outermost resource to be wrapped in two `data` keys. Don't worry, Laravel will never let your resources be accidentally double-wrapped, so you don't have to be concerned about the nesting level of the resource collection you are transforming:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":416,"to":426}}}}],["1423",{"pageContent":"<?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\n    class CommentsCollection extends ResourceCollection\n    {\n        /**\n         * Transform the resource collection into an array.\n         *\n         * @return array<string, mixed>\n         */\n        public function toArray(Request $request): array\n        {\n            return ['data' => $this->collection];\n        }\n    }\n\n<a name=\"data-wrapping-and-pagination\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":426,"to":445}}}}],["1424",{"pageContent":"Data Wrapping And Pagination\n\nWhen returning paginated collections via a resource response, Laravel will wrap your resource data in a `data` key even if the `withoutWrapping` method has been called. This is because paginated responses always contain `meta` and `links` keys with information about the paginator's state:\n\n```json\n{\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"Eladio Schroeder Sr.\",\n            \"email\": \"therese28@example.com\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"Liliana Mayert\",\n            \"email\": \"evandervort@example.com\"\n        }\n    ],\n    \"links\":{\n        \"first\": \"http://example.com/users?page=1\",\n        \"last\": \"http://example.com/users?page=1\",\n        \"prev\": null,\n        \"next\": null\n    },\n    \"meta\":{\n        \"current_page\": 1,\n        \"from\": 1,\n        \"last_page\": 1,\n        \"path\": \"http://example.com/users\",\n        \"per_page\": 15,\n        \"to\": 10,\n        \"total\": 10\n    }\n}\n```\n\n<a name=\"pagination\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":446,"to":482}}}}],["1425",{"pageContent":"Pagination\n\nYou may pass a Laravel paginator instance to the `collection` method of a resource or to a custom resource collection:\n\n    use App\\Http\\Resources\\UserCollection;\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return new UserCollection(User::paginate());\n    });\n\nPaginated responses always contain `meta` and `links` keys with information about the paginator's state:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":483,"to":494}}}}],["1426",{"pageContent":"Paginated responses always contain `meta` and `links` keys with information about the paginator's state:\n\n```json\n{\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"Eladio Schroeder Sr.\",\n            \"email\": \"therese28@example.com\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"Liliana Mayert\",\n            \"email\": \"evandervort@example.com\"\n        }\n    ],\n    \"links\":{\n        \"first\": \"http://example.com/users?page=1\",\n        \"last\": \"http://example.com/users?page=1\",\n        \"prev\": null,\n        \"next\": null\n    },\n    \"meta\":{\n        \"current_page\": 1,\n        \"from\": 1,\n        \"last_page\": 1,\n        \"path\": \"http://example.com/users\",\n        \"per_page\": 15,\n        \"to\": 10,\n        \"total\": 10\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":494,"to":525}}}}],["1427",{"pageContent":"<a name=\"customizing-the-pagination-information\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":528,"to":528}}}}],["1428",{"pageContent":"Customizing The Pagination Information\n\nIf you would like to customize the information included in the `links` or `meta` keys of the pagination response, you may define a `paginationInformation` method on the resource. This method will receive the `$paginated` data and the array of `$default` information, which is an array containing the `links` and `meta` keys:\n\n    /**\n     * Customize the pagination information for the resource.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  array $paginated\n     * @param  array $default\n     * @return array\n     */\n    public function paginationInformation($request, $paginated, $default)\n    {\n        $default['links']['custom'] = 'https://example.com';\n\n        return $default;\n    }\n    \n<a name=\"conditional-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":529,"to":548}}}}],["1429",{"pageContent":"Conditional Attributes\n\nSometimes you may wish to only include an attribute in a resource response if a given condition is met. For example, you may wish to only include a value if the current user is an \"administrator\". Laravel provides a variety of helper methods to assist you in this situation. The `when` method may be used to conditionally add an attribute to a resource response:\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'email' => $this->email,\n            'secret' => $this->when($request->user()->isAdmin(), 'secret-value'),\n            'created_at' => $this->created_at,\n            'updated_at' => $this->updated_at,\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":549,"to":568}}}}],["1430",{"pageContent":"In this example, the `secret` key will only be returned in the final resource response if the authenticated user's `isAdmin` method returns `true`. If the method returns `false`, the `secret` key will be removed from the resource response before it is sent to the client. The `when` method allows you to expressively define your resources without resorting to conditional statements when building the array.\n\nThe `when` method also accepts a closure as its second argument, allowing you to calculate the resulting value only if the given condition is `true`:\n\n    'secret' => $this->when($request->user()->isAdmin(), function () {\n        return 'secret-value';\n    }),\n\nThe `whenHas` method may be used to include an attribute if it is actually present on the underlying model:\n\n    'name' => $this->whenHas('name'),\n\nAdditionally, the `whenNotNull` method may be used to include an attribute in the resource response if the attribute is not null:\n\n    'name' => $this->whenNotNull($this->name),","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":570,"to":584}}}}],["1431",{"pageContent":"Additionally, the `whenNotNull` method may be used to include an attribute in the resource response if the attribute is not null:\n\n    'name' => $this->whenNotNull($this->name),\n\n<a name=\"merging-conditional-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":584,"to":588}}}}],["1432",{"pageContent":"Merging Conditional Attributes\n\nSometimes you may have several attributes that should only be included in the resource response based on the same condition. In this case, you may use the `mergeWhen` method to include the attributes in the response only when the given condition is `true`:\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'email' => $this->email,\n            $this->mergeWhen($request->user()->isAdmin(), [\n                'first-secret' => 'value',\n                'second-secret' => 'value',\n            ]),\n            'created_at' => $this->created_at,\n            'updated_at' => $this->updated_at,\n        ];\n    }\n\nAgain, if the given condition is `false`, these attributes will be removed from the resource response before it is sent to the client.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":589,"to":613}}}}],["1433",{"pageContent":"Again, if the given condition is `false`, these attributes will be removed from the resource response before it is sent to the client.\n\n> **Warning**  \n> The `mergeWhen` method should not be used within arrays that mix string and numeric keys. Furthermore, it should not be used within arrays with numeric keys that are not ordered sequentially.\n\n<a name=\"conditional-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":613,"to":618}}}}],["1434",{"pageContent":"Conditional Relationships\n\nIn addition to conditionally loading attributes, you may conditionally include relationships on your resource responses based on if the relationship has already been loaded on the model. This allows your controller to decide which relationships should be loaded on the model and your resource can easily include them only when they have actually been loaded. Ultimately, this makes it easier to avoid \"N+1\" query problems within your resources.\n\nThe `whenLoaded` method may be used to conditionally load a relationship. In order to avoid unnecessarily loading relationships, this method accepts the name of the relationship instead of the relationship itself:\n\n    use App\\Http\\Resources\\PostResource;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":619,"to":625}}}}],["1435",{"pageContent":"use App\\Http\\Resources\\PostResource;\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'email' => $this->email,\n            'posts' => PostResource::collection($this->whenLoaded('posts')),\n            'created_at' => $this->created_at,\n            'updated_at' => $this->updated_at,\n        ];\n    }\n\nIn this example, if the relationship has not been loaded, the `posts` key will be removed from the resource response before it is sent to the client.\n\n<a name=\"conditional-relationship-counts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":625,"to":646}}}}],["1436",{"pageContent":"Conditional Relationship Counts\n\nIn addition to conditionally including relationships, you may conditionally include relationship \"counts\" on your resource responses based on if the relationship's count has been loaded on the model:\n\n    new UserResource($user->loadCount('posts'));\n\nThe `whenCounted` method may be used to conditionally include a relationship's count in your resource response. This method avoids unnecessarily including the attribute if the relationships' count is not present:\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'email' => $this->email,\n            'posts_count' => $this->whenCounted('posts'),\n            'created_at' => $this->created_at,\n            'updated_at' => $this->updated_at,\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":647,"to":670}}}}],["1437",{"pageContent":"In this example, if the `posts` relationship's count has not been loaded, the `posts_count` key will be removed from the resource response before it is sent to the client.\n\nOther types of aggregates, such as `avg`, `sum`, `min`, and `max` may also be conditionally loaded using the `whenAggregated` method:\n\n```php\n'words_avg' => $this->whenAggregated('posts', 'words', 'avg'),\n'words_sum' => $this->whenAggregated('posts', 'words', 'sum'),\n'words_min' => $this->whenAggregated('posts', 'words', 'min'),\n'words_max' => $this->whenAggregated('posts', 'words', 'max'),","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":672,"to":680}}}}],["1438",{"pageContent":"<a name=\"conditional-pivot-information\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":683,"to":683}}}}],["1439",{"pageContent":"Conditional Pivot Information\n\nIn addition to conditionally including relationship information in your resource responses, you may conditionally include data from the intermediate tables of many-to-many relationships using the `whenPivotLoaded` method. The `whenPivotLoaded` method accepts the name of the pivot table as its first argument. The second argument should be a closure that returns the value to be returned if the pivot information is available on the model:\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'expires_at' => $this->whenPivotLoaded('role_user', function () {\n                return $this->pivot->expires_at;\n            }),\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":684,"to":702}}}}],["1440",{"pageContent":"If your relationship is using a [custom intermediate table model](/docs/{{version}}/eloquent-relationships#defining-custom-intermediate-table-models), you may pass an instance of the intermediate table model as the first argument to the `whenPivotLoaded` method:\n\n    'expires_at' => $this->whenPivotLoaded(new Membership, function () {\n        return $this->pivot->expires_at;\n    }),\n\nIf your intermediate table is using an accessor other than `pivot`, you may use the `whenPivotLoadedAs` method:\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'id' => $this->id,\n            'name' => $this->name,\n            'expires_at' => $this->whenPivotLoadedAs('subscription', 'role_user', function () {\n                return $this->subscription->expires_at;\n            }),\n        ];\n    }\n\n<a name=\"adding-meta-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":704,"to":728}}}}],["1441",{"pageContent":"Adding Meta Data\n\nSome JSON API standards require the addition of meta data to your resource and resource collections responses. This often includes things like `links` to the resource or related resources, or meta data about the resource itself. If you need to return additional meta data about a resource, include it in your `toArray` method. For example, you might include `link` information when transforming a resource collection:\n\n    /**\n     * Transform the resource into an array.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(Request $request): array\n    {\n        return [\n            'data' => $this->collection,\n            'links' => [\n                'self' => 'link-value',\n            ],\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":729,"to":746}}}}],["1442",{"pageContent":"When returning additional meta data from your resources, you never have to worry about accidentally overriding the `links` or `meta` keys that are automatically added by Laravel when returning paginated responses. Any additional `links` you define will be merged with the links provided by the paginator.\n\n<a name=\"top-level-meta-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":748,"to":750}}}}],["1443",{"pageContent":"Top Level Meta Data\n\nSometimes you may wish to only include certain meta data with a resource response if the resource is the outermost resource being returned. Typically, this includes meta information about the response as a whole. To define this meta data, add a `with` method to your resource class. This method should return an array of meta data to be included with the resource response only when the resource is the outermost resource being transformed:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\Resources\\Json\\ResourceCollection;\n\n    class UserCollection extends ResourceCollection\n    {\n        /**\n         * Transform the resource collection into an array.\n         *\n         * @return array<string, mixed>\n         */\n        public function toArray(Request $request): array\n        {\n            return parent::toArray($request);\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":751,"to":771}}}}],["1444",{"pageContent":"/**\n         * Get additional data that should be returned with the resource array.\n         *\n         * @return array<string, mixed>\n         */\n        public function with(Request $request): array\n        {\n            return [\n                'meta' => [\n                    'key' => 'value',\n                ],\n            ];\n        }\n    }\n\n<a name=\"adding-meta-data-when-constructing-resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":773,"to":788}}}}],["1445",{"pageContent":"Adding Meta Data When Constructing Resources\n\nYou may also add top-level data when constructing resource instances in your route or controller. The `additional` method, which is available on all resources, accepts an array of data that should be added to the resource response:\n\n    return (new UserCollection(User::all()->load('roles')))\n                    ->additional(['meta' => [\n                        'key' => 'value',\n                    ]]);\n\n<a name=\"resource-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":789,"to":798}}}}],["1446",{"pageContent":"Resource Responses\n\nAs you have already read, resources may be returned directly from routes and controllers:\n\n    use App\\Http\\Resources\\UserResource;\n    use App\\Models\\User;\n\n    Route::get('/user/{id}', function (string $id) {\n        return new UserResource(User::findOrFail($id));\n    });\n\nHowever, sometimes you may need to customize the outgoing HTTP response before it is sent to the client. There are two ways to accomplish this. First, you may chain the `response` method onto the resource. This method will return an `Illuminate\\Http\\JsonResponse` instance, giving you full control over the response's headers:\n\n    use App\\Http\\Resources\\UserResource;\n    use App\\Models\\User;\n\n    Route::get('/user', function () {\n        return (new UserResource(User::find(1)))\n                    ->response()\n                    ->header('X-Value', 'True');\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":799,"to":819}}}}],["1447",{"pageContent":"Route::get('/user', function () {\n        return (new UserResource(User::find(1)))\n                    ->response()\n                    ->header('X-Value', 'True');\n    });\n\nAlternatively, you may define a `withResponse` method within the resource itself. This method will be called when the resource is returned as the outermost resource in a response:\n\n    <?php\n\n    namespace App\\Http\\Resources;\n\n    use Illuminate\\Http\\JsonResponse;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Resources\\Json\\JsonResource;\n\n    class UserResource extends JsonResource\n    {\n        /**\n         * Transform the resource into an array.\n         *\n         * @return array<string, mixed>\n         */\n        public function toArray(Request $request): array\n        {\n            return [\n                'id' => $this->id,\n            ];\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":819,"to":847}}}}],["1448",{"pageContent":"/**\n         * Customize the outgoing response for the resource.\n         */\n        public function withResponse(Request $request, JsonResponse $response): void\n        {\n            $response->header('X-Value', 'True');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-resources.md","loc":{"lines":{"from":849,"to":856}}}}],["1449",{"pageContent":"# Eloquent: Serialization\n\n- [Introduction](#introduction)\n- [Serializing Models & Collections](#serializing-models-and-collections)\n    - [Serializing To Arrays](#serializing-to-arrays)\n    - [Serializing To JSON](#serializing-to-json)\n- [Hiding Attributes From JSON](#hiding-attributes-from-json)\n- [Appending Values To JSON](#appending-values-to-json)\n- [Date Serialization](#date-serialization)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nWhen building APIs using Laravel, you will often need to convert your models and relationships to arrays or JSON. Eloquent includes convenient methods for making these conversions, as well as controlling which attributes are included in the serialized representation of your models.\n\n> **Note**  \n> For an even more robust way of handling Eloquent model and collection JSON serialization, check out the documentation on [Eloquent API resources](/docs/{{version}}/eloquent-resources).\n\n<a name=\"serializing-models-and-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":1,"to":19}}}}],["1450",{"pageContent":"Serializing Models & Collections\n\n<a name=\"serializing-to-arrays\"></a>\n### Serializing To Arrays\n\nTo convert a model and its loaded [relationships](/docs/{{version}}/eloquent-relationships) to an array, you should use the `toArray` method. This method is recursive, so all attributes and all relations (including the relations of relations) will be converted to arrays:\n\n    use App\\Models\\User;\n\n    $user = User::with('roles')->first();\n\n    return $user->toArray();\n\nThe `attributesToArray` method may be used to convert a model's attributes to an array but not its relationships:\n\n    $user = User::first();\n\n    return $user->attributesToArray();\n\nYou may also convert entire [collections](/docs/{{version}}/eloquent-collections) of models to arrays by calling the `toArray` method on the collection instance:\n\n    $users = User::all();\n\n    return $users->toArray();\n\n<a name=\"serializing-to-json\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":20,"to":45}}}}],["1451",{"pageContent":"Serializing To JSON\n\nTo convert a model to JSON, you should use the `toJson` method. Like `toArray`, the `toJson` method is recursive, so all attributes and relations will be converted to JSON. You may also specify any JSON encoding options that are [supported by PHP](https://secure.php.net/manual/en/function.json-encode.php):\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    return $user->toJson();\n\n    return $user->toJson(JSON_PRETTY_PRINT);\n\nAlternatively, you may cast a model or collection to a string, which will automatically call the `toJson` method on the model or collection:\n\n    return (string) User::find(1);\n\nSince models and collections are converted to JSON when cast to a string, you can return Eloquent objects directly from your application's routes or controllers. Laravel will automatically serialize your Eloquent models and collections to JSON when they are returned from routes or controllers:\n\n    Route::get('users', function () {\n        return User::all();\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":46,"to":66}}}}],["1452",{"pageContent":"Route::get('users', function () {\n        return User::all();\n    });\n\n<a name=\"relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":66,"to":70}}}}],["1453",{"pageContent":"Relationships\n\nWhen an Eloquent model is converted to JSON, its loaded relationships will automatically be included as attributes on the JSON object. Also, though Eloquent relationship methods are defined using \"camel case\" method names, a relationship's JSON attribute will be \"snake case\".\n\n<a name=\"hiding-attributes-from-json\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":71,"to":75}}}}],["1454",{"pageContent":"Hiding Attributes From JSON\n\nSometimes you may wish to limit the attributes, such as passwords, that are included in your model's array or JSON representation. To do so, add a `$hidden` property to your model. Attributes that are listed in the `$hidden` property's array will not be included in the serialized representation of your model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The attributes that should be hidden for arrays.\n         *\n         * @var array\n         */\n        protected $hidden = ['password'];\n    }\n\n> **Note**  \n> To hide relationships, add the relationship's method name to your Eloquent model's `$hidden` property.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":76,"to":97}}}}],["1455",{"pageContent":"> **Note**  \n> To hide relationships, add the relationship's method name to your Eloquent model's `$hidden` property.\n\nAlternatively, you may use the `visible` property to define an \"allow list\" of attributes that should be included in your model's array and JSON representation. All attributes that are not present in the `$visible` array will be hidden when the model is converted to an array or JSON:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The attributes that should be visible in arrays.\n         *\n         * @var array\n         */\n        protected $visible = ['first_name', 'last_name'];\n    }\n\n<a name=\"temporarily-modifying-attribute-visibility\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":97,"to":118}}}}],["1456",{"pageContent":"Temporarily Modifying Attribute Visibility\n\nIf you would like to make some typically hidden attributes visible on a given model instance, you may use the `makeVisible` method. The `makeVisible` method returns the model instance:\n\n    return $user->makeVisible('attribute')->toArray();\n\nLikewise, if you would like to hide some attributes that are typically visible, you may use the `makeHidden` method.\n\n    return $user->makeHidden('attribute')->toArray();\n\nIf you wish to temporarily override all of the visible or hidden attributes, you may use the `setVisible` and `setHidden` methods respectively:\n\n    return $user->setVisible(['id', 'name'])->toArray();\n\n    return $user->setHidden(['email', 'password', 'remember_token'])->toArray();\n\n<a name=\"appending-values-to-json\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":119,"to":135}}}}],["1457",{"pageContent":"Appending Values To JSON\n\nOccasionally, when converting models to arrays or JSON, you may wish to add attributes that do not have a corresponding column in your database. To do so, first define an [accessor](/docs/{{version}}/eloquent-mutators) for the value:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Casts\\Attribute;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * Determine if the user is an administrator.\n         */\n        protected function isAdmin(): Attribute\n        {\n            return new Attribute(\n                get: fn () => 'yes',\n            );\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":136,"to":158}}}}],["1458",{"pageContent":"If you would like the accessor to always be appended to your model's array and JSON representations, you may add the attribute name to the `appends` property of your model. Note that attribute names are typically referenced using their \"snake case\" serialized representation, even though the accessor's PHP method is defined using \"camel case\":\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The accessors to append to the model's array form.\n         *\n         * @var array\n         */\n        protected $appends = ['is_admin'];\n    }\n\nOnce the attribute has been added to the `appends` list, it will be included in both the model's array and JSON representations. Attributes in the `appends` array will also respect the `visible` and `hidden` settings configured on the model.\n\n<a name=\"appending-at-run-time\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":160,"to":180}}}}],["1459",{"pageContent":"Appending At Run Time\n\nAt runtime, you may instruct a model instance to append additional attributes using the `append` method. Or, you may use the `setAppends` method to override the entire array of appended properties for a given model instance:\n\n    return $user->append('is_admin')->toArray();\n\n    return $user->setAppends(['is_admin'])->toArray();\n\n<a name=\"date-serialization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":181,"to":189}}}}],["1460",{"pageContent":"Date Serialization\n\n<a name=\"customizing-the-default-date-format\"></a>\n#### Customizing The Default Date Format\n\nYou may customize the default serialization format by overriding the `serializeDate` method. This method does not affect how your dates are formatted for storage in the database:\n\n    /**\n     * Prepare a date for array / JSON serialization.\n     */\n    protected function serializeDate(DateTimeInterface $date): string\n    {\n        return $date->format('Y-m-d');\n    }\n\n<a name=\"customizing-the-date-format-per-attribute\"></a>\n#### Customizing The Date Format Per Attribute\n\nYou may customize the serialization format of individual Eloquent date attributes by specifying the date format in the model's [cast declarations](/docs/{{version}}/eloquent-mutators#attribute-casting):\n\n    protected $casts = [\n        'birthday' => 'date:Y-m-d',\n        'joined_at' => 'datetime:Y-m-d H:00',\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent-serialization.md","loc":{"lines":{"from":190,"to":213}}}}],["1461",{"pageContent":"# Eloquent: Getting Started","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1,"to":1}}}}],["1462",{"pageContent":"- [Introduction](#introduction)\n- [Generating Model Classes](#generating-model-classes)\n- [Eloquent Model Conventions](#eloquent-model-conventions)\n    - [Table Names](#table-names)\n    - [Primary Keys](#primary-keys)\n    - [UUID & ULID Keys](#uuid-and-ulid-keys)\n    - [Timestamps](#timestamps)\n    - [Database Connections](#database-connections)\n    - [Default Attribute Values](#default-attribute-values)\n    - [Configuring Eloquent Strictness](#configuring-eloquent-strictness)\n- [Retrieving Models](#retrieving-models)\n    - [Collections](#collections)\n    - [Chunking Results](#chunking-results)\n    - [Chunk Using Lazy Collections](#chunking-using-lazy-collections)\n    - [Cursors](#cursors)\n    - [Advanced Subqueries](#advanced-subqueries)\n- [Retrieving Single Models / Aggregates](#retrieving-single-models)\n    - [Retrieving Or Creating Models](#retrieving-or-creating-models)\n    - [Retrieving Aggregates](#retrieving-aggregates)\n- [Inserting & Updating Models](#inserting-and-updating-models)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":3,"to":22}}}}],["1463",{"pageContent":"- [Retrieving Or Creating Models](#retrieving-or-creating-models)\n    - [Retrieving Aggregates](#retrieving-aggregates)\n- [Inserting & Updating Models](#inserting-and-updating-models)\n    - [Inserts](#inserts)\n    - [Updates](#updates)\n    - [Mass Assignment](#mass-assignment)\n    - [Upserts](#upserts)\n- [Deleting Models](#deleting-models)\n    - [Soft Deleting](#soft-deleting)\n    - [Querying Soft Deleted Models](#querying-soft-deleted-models)\n- [Pruning Models](#pruning-models)\n- [Replicating Models](#replicating-models)\n- [Query Scopes](#query-scopes)\n    - [Global Scopes](#global-scopes)\n    - [Local Scopes](#local-scopes)\n- [Comparing Models](#comparing-models)\n- [Events](#events)\n    - [Using Closures](#events-using-closures)\n    - [Observers](#observers)\n    - [Muting Events](#muting-events)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":22,"to":41}}}}],["1464",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":43,"to":43}}}}],["1465",{"pageContent":"Introduction\n\nLaravel includes Eloquent, an object-relational mapper (ORM) that makes it enjoyable to interact with your database. When using Eloquent, each database table has a corresponding \"Model\" that is used to interact with that table. In addition to retrieving records from the database table, Eloquent models allow you to insert, update, and delete records from the table as well.\n\n> **Note**  \n> Before getting started, be sure to configure a database connection in your application's `config/database.php` configuration file. For more information on configuring your database, check out [the database configuration documentation](/docs/{{version}}/database#configuration).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":44,"to":49}}}}],["1466",{"pageContent":"Laravel Bootcamp\n\nIf you're new to Laravel, feel free to jump into the [Laravel Bootcamp](https://bootcamp.laravel.com). The Laravel Bootcamp will walk you through building your first Laravel application using Eloquent. It's a great way to get a tour of everything that Laravel and Eloquent have to offer.\n\n<a name=\"generating-model-classes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":51,"to":55}}}}],["1467",{"pageContent":"Generating Model Classes\n\nTo get started, let's create an Eloquent model. Models typically live in the `app\\Models` directory and extend the `Illuminate\\Database\\Eloquent\\Model` class. You may use the `make:model` [Artisan command](/docs/{{version}}/artisan) to generate a new model:\n\n```shell\nphp artisan make:model Flight\n```\n\nIf you would like to generate a [database migration](/docs/{{version}}/migrations) when you generate the model, you may use the `--migration` or `-m` option:\n\n```shell\nphp artisan make:model Flight --migration","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":56,"to":67}}}}],["1468",{"pageContent":"You may generate various other types of classes when generating a model, such as factories, seeders, policies, controllers, and form requests. In addition, these options may be combined to create multiple classes at once:\n\n```shell\n# Generate a model and a FlightFactory class...\nphp artisan make:model Flight --factory\nphp artisan make:model Flight -f\n\n# Generate a model and a FlightSeeder class...\nphp artisan make:model Flight --seed\nphp artisan make:model Flight -s\n\n# Generate a model and a FlightController class...\nphp artisan make:model Flight --controller\nphp artisan make:model Flight -c\n\n# Generate a model, FlightController resource class, and form request classes...\nphp artisan make:model Flight --controller --resource --requests\nphp artisan make:model Flight -crR\n\n# Generate a model and a FlightPolicy class...\nphp artisan make:model Flight --policy\n\n# Generate a model and a migration, factory, seeder, and controller...\nphp artisan make:model Flight -mfsc","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":70,"to":93}}}}],["1469",{"pageContent":"# Generate a model and a FlightPolicy class...\nphp artisan make:model Flight --policy\n\n# Generate a model and a migration, factory, seeder, and controller...\nphp artisan make:model Flight -mfsc\n\n# Shortcut to generate a model, migration, factory, seeder, policy, controller, and form requests...\nphp artisan make:model Flight --all\n\n# Generate a pivot model...\nphp artisan make:model Member --pivot\nphp artisan make:model Member -p","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":93,"to":104}}}}],["1470",{"pageContent":"<a name=\"inspecting-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":107,"to":107}}}}],["1471",{"pageContent":"Inspecting Models\n\nSometimes it can be difficult to determine all of a model's available attributes and relationships just by skimming its code. Instead, try the `model:show` Artisan command, which provides a convenient overview of all the model's attributes and relations:\n\n```shell\nphp artisan model:show Flight\n```\n\n<a name=\"eloquent-model-conventions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":108,"to":116}}}}],["1472",{"pageContent":"Eloquent Model Conventions\n\nModels generated by the `make:model` command will be placed in the `app/Models` directory. Let's examine a basic model class and discuss some of Eloquent's key conventions:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        // ...\n    }\n\n<a name=\"table-names\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":117,"to":132}}}}],["1473",{"pageContent":"Table Names\n\nAfter glancing at the example above, you may have noticed that we did not tell Eloquent which database table corresponds to our `Flight` model. By convention, the \"snake case\", plural name of the class will be used as the table name unless another name is explicitly specified. So, in this case, Eloquent will assume the `Flight` model stores records in the `flights` table, while an `AirTrafficController` model would store records in an `air_traffic_controllers` table.\n\nIf your model's corresponding database table does not fit this convention, you may manually specify the model's table name by defining a `table` property on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        /**\n         * The table associated with the model.\n         *\n         * @var string\n         */\n        protected $table = 'my_flights';\n    }\n\n<a name=\"primary-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":133,"to":155}}}}],["1474",{"pageContent":"Primary Keys\n\nEloquent will also assume that each model's corresponding database table has a primary key column named `id`. If necessary, you may define a protected `$primaryKey` property on your model to specify a different column that serves as your model's primary key:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        /**\n         * The primary key associated with the table.\n         *\n         * @var string\n         */\n        protected $primaryKey = 'flight_id';\n    }\n\nIn addition, Eloquent assumes that the primary key is an incrementing integer value, which means that Eloquent will automatically cast the primary key to an integer. If you wish to use a non-incrementing or a non-numeric primary key you must define a public `$incrementing` property on your model that is set to `false`:\n\n    <?php","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":156,"to":178}}}}],["1475",{"pageContent":"<?php\n\n    class Flight extends Model\n    {\n        /**\n         * Indicates if the model's ID is auto-incrementing.\n         *\n         * @var bool\n         */\n        public $incrementing = false;\n    }\n\nIf your model's primary key is not an integer, you should define a protected `$keyType` property on your model. This property should have a value of `string`:\n\n    <?php\n\n    class Flight extends Model\n    {\n        /**\n         * The data type of the auto-incrementing ID.\n         *\n         * @var string\n         */\n        protected $keyType = 'string';\n    }\n\n<a name=\"composite-primary-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":178,"to":204}}}}],["1476",{"pageContent":"\"Composite\" Primary Keys\n\nEloquent requires each model to have at least one uniquely identifying \"ID\" that can serve as its primary key. \"Composite\" primary keys are not supported by Eloquent models. However, you are free to add additional multi-column, unique indexes to your database tables in addition to the table's uniquely identifying primary key.\n\n<a name=\"uuid-and-ulid-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":205,"to":209}}}}],["1477",{"pageContent":"UUID & ULID Keys\n\nInstead of using auto-incrementing integers as your Eloquent model's primary keys, you may choose to use UUIDs instead. UUIDs are universally unique alpha-numeric identifiers that are 36 characters long.\n\nIf you would like a model to use a UUID key instead of an auto-incrementing integer key, you may use the `Illuminate\\Database\\Eloquent\\Concerns\\HasUuids` trait on the model. Of course, you should ensure that the model has a [UUID equivalent primary key column](/docs/{{version}}/migrations#column-method-uuid):\n\n    use Illuminate\\Database\\Eloquent\\Concerns\\HasUuids;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Article extends Model\n    {\n        use HasUuids;\n\n        // ...\n    }\n\n    $article = Article::create(['title' => 'Traveling to Europe']);\n\n    $article->id; // \"8f8e8478-9035-4d23-b9a7-62f4d2612ce5\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":210,"to":228}}}}],["1478",{"pageContent":"// ...\n    }\n\n    $article = Article::create(['title' => 'Traveling to Europe']);\n\n    $article->id; // \"8f8e8478-9035-4d23-b9a7-62f4d2612ce5\"\n\nBy default, The `HasUuids` trait will generate [\"ordered\" UUIDs](/docs/{{version}}/strings#method-str-ordered-uuid) for your models. These UUIDs are more efficient for indexed database storage because they can be sorted lexicographically.\n\nYou can override the UUID generation process for a given model by defining a `newUniqueId` method on the model. In addition, you may specify which columns should receive UUIDs by defining a `uniqueIds` method on the model:\n\n    use Ramsey\\Uuid\\Uuid;\n\n    /**\n     * Generate a new UUID for the model.\n     */\n    public function newUniqueId(): string\n    {\n        return (string) Uuid::uuid4();\n    }\n\n    /**\n     * Get the columns that should receive a unique identifier.\n     *\n     * @return array<int, string>\n     */\n    public function uniqueIds(): array\n    {\n        return ['id', 'discount_code'];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":228,"to":257}}}}],["1479",{"pageContent":"If you wish, you may choose to utilize \"ULIDs\" instead of UUIDs. ULIDs are similar to UUIDs; however, they are only 26 characters in length. Like ordered UUIDs, ULIDs are lexicographically sortable for efficient database indexing. To utilize ULIDs, you should use the `Illuminate\\Database\\Eloquent\\Concerns\\HasUlids` trait on your model. You should also ensure that the model has a [ULID equivalent primary key column](/docs/{{version}}/migrations#column-method-ulid):\n\n    use Illuminate\\Database\\Eloquent\\Concerns\\HasUlids;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Article extends Model\n    {\n        use HasUlids;\n\n        // ...\n    }\n\n    $article = Article::create(['title' => 'Traveling to Asia']);\n\n    $article->id; // \"01gd4d3tgrrfqeda94gdbtdk5c\"\n\n<a name=\"timestamps\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":259,"to":275}}}}],["1480",{"pageContent":"Timestamps\n\nBy default, Eloquent expects `created_at` and `updated_at` columns to exist on your model's corresponding database table.  Eloquent will automatically set these column's values when models are created or updated. If you do not want these columns to be automatically managed by Eloquent, you should define a `$timestamps` property on your model with a value of `false`:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        /**\n         * Indicates if the model should be timestamped.\n         *\n         * @var bool\n         */\n        public $timestamps = false;\n    }\n\nIf you need to customize the format of your model's timestamps, set the `$dateFormat` property on your model. This property determines how date attributes are stored in the database as well as their format when the model is serialized to an array or JSON:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":276,"to":302}}}}],["1481",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        /**\n         * The storage format of the model's date columns.\n         *\n         * @var string\n         */\n        protected $dateFormat = 'U';\n    }\n\nIf you need to customize the names of the columns used to store the timestamps, you may define `CREATED_AT` and `UPDATED_AT` constants on your model:\n\n    <?php\n\n    class Flight extends Model\n    {\n        const CREATED_AT = 'creation_date';\n        const UPDATED_AT = 'updated_date';\n    }\n\nIf you would like to perform model operations without the model having its `updated_at` timestamp modified, you may operate on the model within a closure given to the `withoutTimestamps` method:\n\n    Model::withoutTimestamps(fn () => $post->increment(['reads']));\n\n<a name=\"database-connections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":302,"to":332}}}}],["1482",{"pageContent":"Database Connections\n\nBy default, all Eloquent models will use the default database connection that is configured for your application. If you would like to specify a different connection that should be used when interacting with a particular model, you should define a `$connection` property on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        /**\n         * The database connection that should be used by the model.\n         *\n         * @var string\n         */\n        protected $connection = 'sqlite';\n    }\n\n<a name=\"default-attribute-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":333,"to":353}}}}],["1483",{"pageContent":"Default Attribute Values\n\nBy default, a newly instantiated model instance will not contain any attribute values. If you would like to define the default values for some of your model's attributes, you may define an `$attributes` property on your model. Attribute values placed in the `$attributes` array should be in their raw, \"storable\" format as if they were just read from the database:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        /**\n         * The model's default values for attributes.\n         *\n         * @var array\n         */\n        protected $attributes = [\n            'options' => '[]',\n            'delayed' => false,\n        ];\n    }\n\n<a name=\"configuring-eloquent-strictness\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":354,"to":377}}}}],["1484",{"pageContent":"Configuring Eloquent Strictness\n\nLaravel offers several methods that allow you to configure Eloquent's behavior and \"strictness\" in a variety of situations.\n\nFirst, the `preventLazyLoading` method accepts an optional boolean argument that indicates if lazy loading should be prevented. For example, you may wish to only disable lazy loading in non-production environments so that your production environment will continue to function normally even if a lazy loaded relationship is accidentally present in production code. Typically, this method should be invoked in the `boot` method of your application's `AppServiceProvider`:\n\n```php\nuse Illuminate\\Database\\Eloquent\\Model;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Model::preventLazyLoading(! $this->app->isProduction());\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":378,"to":393}}}}],["1485",{"pageContent":"Also, you may instruct Laravel to throw an exception when attempting to fill an unfillable attribute by invoking the `preventSilentlyDiscardingAttributes` method. This can help prevent unexpected errors during local development when attempting to set an attribute that has not been added to the model's `fillable` array:\n\n```php\nModel::preventSilentlyDiscardingAttributes(! $this->app->isProduction());\n```\n\n<a name=\"retrieving-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":396,"to":402}}}}],["1486",{"pageContent":"Retrieving Models\n\nOnce you have created a model and [its associated database table](/docs/{{version}}/migrations#writing-migrations), you are ready to start retrieving data from your database. You can think of each Eloquent model as a powerful [query builder](/docs/{{version}}/queries) allowing you to fluently query the database table associated with the model. The model's `all` method will retrieve all of the records from the model's associated database table:\n\n    use App\\Models\\Flight;\n\n    foreach (Flight::all() as $flight) {\n        echo $flight->name;\n    }\n\n<a name=\"building-queries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":403,"to":413}}}}],["1487",{"pageContent":"Building Queries\n\nThe Eloquent `all` method will return all of the results in the model's table. However, since each Eloquent model serves as a [query builder](/docs/{{version}}/queries), you may add additional constraints to queries and then invoke the `get` method to retrieve the results:\n\n    $flights = Flight::where('active', 1)\n                   ->orderBy('name')\n                   ->take(10)\n                   ->get();\n\n> **Note**  \n> Since Eloquent models are query builders, you should review all of the methods provided by Laravel's [query builder](/docs/{{version}}/queries). You may use any of these methods when writing your Eloquent queries.\n\n<a name=\"refreshing-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":414,"to":426}}}}],["1488",{"pageContent":"Refreshing Models\n\nIf you already have an instance of an Eloquent model that was retrieved from the database, you can \"refresh\" the model using the `fresh` and `refresh` methods. The `fresh` method will re-retrieve the model from the database. The existing model instance will not be affected:\n\n    $flight = Flight::where('number', 'FR 900')->first();\n\n    $freshFlight = $flight->fresh();\n\nThe `refresh` method will re-hydrate the existing model using fresh data from the database. In addition, all of its loaded relationships will be refreshed as well:\n\n    $flight = Flight::where('number', 'FR 900')->first();\n\n    $flight->number = 'FR 456';\n\n    $flight->refresh();\n\n    $flight->number; // \"FR 900\"\n\n<a name=\"collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":427,"to":445}}}}],["1489",{"pageContent":"Collections\n\nAs we have seen, Eloquent methods like `all` and `get` retrieve multiple records from the database. However, these methods don't return a plain PHP array. Instead, an instance of `Illuminate\\Database\\Eloquent\\Collection` is returned.\n\nThe Eloquent `Collection` class extends Laravel's base `Illuminate\\Support\\Collection` class, which provides a [variety of helpful methods](/docs/{{version}}/collections#available-methods) for interacting with data collections. For example, the `reject` method may be used to remove models from a collection based on the results of an invoked closure:\n\n```php\n$flights = Flight::where('destination', 'Paris')->get();\n\n$flights = $flights->reject(function (Flight $flight) {\n    return $flight->cancelled;\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":446,"to":457}}}}],["1490",{"pageContent":"In addition to the methods provided by Laravel's base collection class, the Eloquent collection class provides [a few extra methods](/docs/{{version}}/eloquent-collections#available-methods) that are specifically intended for interacting with collections of Eloquent models.\n\nSince all of Laravel's collections implement PHP's iterable interfaces, you may loop over collections as if they were an array:\n\n```php\nforeach ($flights as $flight) {\n    echo $flight->name;\n}\n```\n\n<a name=\"chunking-results\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":460,"to":470}}}}],["1491",{"pageContent":"Chunking Results\n\nYour application may run out of memory if you attempt to load tens of thousands of Eloquent records via the `all` or `get` methods. Instead of using these methods, the `chunk` method may be used to process large numbers of models more efficiently.\n\nThe `chunk` method will retrieve a subset of Eloquent models, passing them to a closure for processing. Since only the current chunk of Eloquent models is retrieved at a time, the `chunk` method will provide significantly reduced memory usage when working with a large number of models:\n\n```php\nuse App\\Models\\Flight;\nuse Illuminate\\Database\\Eloquent\\Collection;\n\nFlight::chunk(200, function (Collection $flights) {\n    foreach ($flights as $flight) {\n        // ...\n    }\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":471,"to":485}}}}],["1492",{"pageContent":"The first argument passed to the `chunk` method is the number of records you wish to receive per \"chunk\". The closure passed as the second argument will be invoked for each chunk that is retrieved from the database. A database query will be executed to retrieve each chunk of records passed to the closure.\n\nIf you are filtering the results of the `chunk` method based on a column that you will also be updating while iterating over the results, you should use the `chunkById` method. Using the `chunk` method in these scenarios could lead to unexpected and inconsistent results. Internally, the `chunkById` method will always retrieve models with an `id` column greater than the last model in the previous chunk:\n\n```php\nFlight::where('departed', true)\n    ->chunkById(200, function (Collection $flights) {\n        $flights->each->update(['departed' => false]);\n    }, $column = 'id');\n```\n\n<a name=\"chunking-using-lazy-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":488,"to":499}}}}],["1493",{"pageContent":"Chunking Using Lazy Collections\n\nThe `lazy` method works similarly to [the `chunk` method](#chunking-results) in the sense that, behind the scenes, it executes the query in chunks. However, instead of passing each chunk directly into a callback as is, the `lazy` method returns a flattened [`LazyCollection`](/docs/{{version}}/collections#lazy-collections) of Eloquent models, which lets you interact with the results as a single stream:\n\n```php\nuse App\\Models\\Flight;\n\nforeach (Flight::lazy() as $flight) {\n    // ...\n}\n```\n\nIf you are filtering the results of the `lazy` method based on a column that you will also be updating while iterating over the results, you should use the `lazyById` method. Internally, the `lazyById` method will always retrieve models with an `id` column greater than the last model in the previous chunk:\n\n```php\nFlight::where('departed', true)\n    ->lazyById(200, $column = 'id')\n    ->each->update(['departed' => false]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":500,"to":517}}}}],["1494",{"pageContent":"You may filter the results based on the descending order of the `id` using the `lazyByIdDesc` method.\n\n<a name=\"cursors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":520,"to":522}}}}],["1495",{"pageContent":"Cursors\n\nSimilar to the `lazy` method, the `cursor` method may be used to significantly reduce your application's memory consumption when iterating through tens of thousands of Eloquent model records.\n\nThe `cursor` method will only execute a single database query; however, the individual Eloquent models will not be hydrated until they are actually iterated over. Therefore, only one Eloquent model is kept in memory at any given time while iterating over the cursor.\n\n> **Warning**  \n> Since the `cursor` method only ever holds a single Eloquent model in memory at a time, it cannot eager load relationships. If you need to eager load relationships, consider using [the `lazy` method](#chunking-using-lazy-collections) instead.\n\nInternally, the `cursor` method uses PHP [generators](https://www.php.net/manual/en/language.generators.overview.php) to implement this functionality:\n\n```php\nuse App\\Models\\Flight;\n\nforeach (Flight::where('destination', 'Zurich')->cursor() as $flight) {\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":523,"to":539}}}}],["1496",{"pageContent":"The `cursor` returns an `Illuminate\\Support\\LazyCollection` instance. [Lazy collections](/docs/{{version}}/collections#lazy-collections) allow you to use many of the collection methods available on typical Laravel collections while only loading a single model into memory at a time:\n\n```php\nuse App\\Models\\User;\n\n$users = User::cursor()->filter(function (User $user) {\n    return $user->id > 500;\n});\n\nforeach ($users as $user) {\n    echo $user->id;\n}\n```\n\nAlthough the `cursor` method uses far less memory than a regular query (by only holding a single Eloquent model in memory at a time), it will still eventually run out of memory. This is [due to PHP's PDO driver internally caching all raw query results in its buffer](https://www.php.net/manual/en/mysqlinfo.concepts.buffering.php). If you're dealing with a very large number of Eloquent records, consider using [the `lazy` method](#chunking-using-lazy-collections) instead.\n\n<a name=\"advanced-subqueries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":542,"to":558}}}}],["1497",{"pageContent":"Advanced Subqueries\n\n<a name=\"subquery-selects\"></a>\n#### Subquery Selects\n\nEloquent also offers advanced subquery support, which allows you to pull information from related tables in a single query. For example, let's imagine that we have a table of flight `destinations` and a table of `flights` to destinations. The `flights` table contains an `arrived_at` column which indicates when the flight arrived at the destination.\n\nUsing the subquery functionality available to the query builder's `select` and `addSelect` methods, we can select all of the `destinations` and the name of the flight that most recently arrived at that destination using a single query:\n\n    use App\\Models\\Destination;\n    use App\\Models\\Flight;\n\n    return Destination::addSelect(['last_flight' => Flight::select('name')\n        ->whereColumn('destination_id', 'destinations.id')\n        ->orderByDesc('arrived_at')\n        ->limit(1)\n    ])->get();\n\n<a name=\"subquery-ordering\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":559,"to":577}}}}],["1498",{"pageContent":"Subquery Ordering\n\nIn addition, the query builder's `orderBy` function supports subqueries. Continuing to use our flight example, we may use this functionality to sort all destinations based on when the last flight arrived at that destination. Again, this may be done while executing a single database query:\n\n    return Destination::orderByDesc(\n        Flight::select('arrived_at')\n            ->whereColumn('destination_id', 'destinations.id')\n            ->orderByDesc('arrived_at')\n            ->limit(1)\n    )->get();\n\n<a name=\"retrieving-single-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":578,"to":589}}}}],["1499",{"pageContent":"Retrieving Single Models / Aggregates\n\nIn addition to retrieving all of the records matching a given query, you may also retrieve single records using the `find`, `first`, or `firstWhere` methods. Instead of returning a collection of models, these methods return a single model instance:\n\n    use App\\Models\\Flight;\n\n    // Retrieve a model by its primary key...\n    $flight = Flight::find(1);\n\n    // Retrieve the first model matching the query constraints...\n    $flight = Flight::where('active', 1)->first();\n\n    // Alternative to retrieving the first model matching the query constraints...\n    $flight = Flight::firstWhere('active', 1);\n\nSometimes you may wish to perform some other action if no results are found. The `findOr` and `firstOr` methods will return a single model instance or, if no results are found, execute the given closure. The value returned by the closure will be considered the result of the method:\n\n    $flight = Flight::findOr(1, function () {\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":590,"to":609}}}}],["1500",{"pageContent":"$flight = Flight::findOr(1, function () {\n        // ...\n    });\n\n    $flight = Flight::where('legs', '>', 3)->firstOr(function () {\n        // ...\n    });\n\n<a name=\"not-found-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":609,"to":617}}}}],["1501",{"pageContent":"Not Found Exceptions\n\nSometimes you may wish to throw an exception if a model is not found. This is particularly useful in routes or controllers. The `findOrFail` and `firstOrFail` methods will retrieve the first result of the query; however, if no result is found, an `Illuminate\\Database\\Eloquent\\ModelNotFoundException` will be thrown:\n\n    $flight = Flight::findOrFail(1);\n\n    $flight = Flight::where('legs', '>', 3)->firstOrFail();\n\nIf the `ModelNotFoundException` is not caught, a 404 HTTP response is automatically sent back to the client:\n\n    use App\\Models\\Flight;\n\n    Route::get('/api/flights/{id}', function (string $id) {\n        return Flight::findOrFail($id);\n    });\n\n<a name=\"retrieving-or-creating-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":618,"to":634}}}}],["1502",{"pageContent":"Retrieving Or Creating Models\n\nThe `firstOrCreate` method will attempt to locate a database record using the given column / value pairs. If the model can not be found in the database, a record will be inserted with the attributes resulting from merging the first array argument with the optional second array argument:\n\nThe `firstOrNew` method, like `firstOrCreate`, will attempt to locate a record in the database matching the given attributes. However, if a model is not found, a new model instance will be returned. Note that the model returned by `firstOrNew` has not yet been persisted to the database. You will need to manually call the `save` method to persist it:\n\n    use App\\Models\\Flight;\n\n    // Retrieve flight by name or create it if it doesn't exist...\n    $flight = Flight::firstOrCreate([\n        'name' => 'London to Paris'\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":635,"to":646}}}}],["1503",{"pageContent":"use App\\Models\\Flight;\n\n    // Retrieve flight by name or create it if it doesn't exist...\n    $flight = Flight::firstOrCreate([\n        'name' => 'London to Paris'\n    ]);\n\n    // Retrieve flight by name or create it with the name, delayed, and arrival_time attributes...\n    $flight = Flight::firstOrCreate(\n        ['name' => 'London to Paris'],\n        ['delayed' => 1, 'arrival_time' => '11:30']\n    );\n\n    // Retrieve flight by name or instantiate a new Flight instance...\n    $flight = Flight::firstOrNew([\n        'name' => 'London to Paris'\n    ]);\n\n    // Retrieve flight by name or instantiate with the name, delayed, and arrival_time attributes...\n    $flight = Flight::firstOrNew(\n        ['name' => 'Tokyo to Sydney'],\n        ['delayed' => 1, 'arrival_time' => '11:30']\n    );\n\n<a name=\"retrieving-aggregates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":646,"to":670}}}}],["1504",{"pageContent":"Retrieving Aggregates\n\nWhen interacting with Eloquent models, you may also use the `count`, `sum`, `max`, and other [aggregate methods](/docs/{{version}}/queries#aggregates) provided by the Laravel [query builder](/docs/{{version}}/queries). As you might expect, these methods return a scalar value instead of an Eloquent model instance:\n\n    $count = Flight::where('active', 1)->count();\n\n    $max = Flight::where('active', 1)->max('price');\n\n<a name=\"inserting-and-updating-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":671,"to":679}}}}],["1505",{"pageContent":"Inserting & Updating Models\n\n<a name=\"inserts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":680,"to":682}}}}],["1506",{"pageContent":"Inserts\n\nOf course, when using Eloquent, we don't only need to retrieve models from the database. We also need to insert new records. Thankfully, Eloquent makes it simple. To insert a new record into the database, you should instantiate a new model instance and set attributes on the model. Then, call the `save` method on the model instance:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Flight;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class FlightController extends Controller\n    {\n        /**\n         * Store a new flight in the database.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            // Validate the request...\n\n            $flight = new Flight;\n\n            $flight->name = $request->name;\n\n            $flight->save();\n\n            return redirect('/flights');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":683,"to":713}}}}],["1507",{"pageContent":"$flight = new Flight;\n\n            $flight->name = $request->name;\n\n            $flight->save();\n\n            return redirect('/flights');\n        }\n    }\n\nIn this example, we assign the `name` field from the incoming HTTP request to the `name` attribute of the `App\\Models\\Flight` model instance. When we call the `save` method, a record will be inserted into the database. The model's `created_at` and `updated_at` timestamps will automatically be set when the `save` method is called, so there is no need to set them manually.\n\nAlternatively, you may use the `create` method to \"save\" a new model using a single PHP statement. The inserted model instance will be returned to you by the `create` method:\n\n    use App\\Models\\Flight;\n\n    $flight = Flight::create([\n        'name' => 'London to Paris',\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":713,"to":731}}}}],["1508",{"pageContent":"use App\\Models\\Flight;\n\n    $flight = Flight::create([\n        'name' => 'London to Paris',\n    ]);\n\nHowever, before using the `create` method, you will need to specify either a `fillable` or `guarded` property on your model class. These properties are required because all Eloquent models are protected against mass assignment vulnerabilities by default. To learn more about mass assignment, please consult the [mass assignment documentation](#mass-assignment).\n\n<a name=\"updates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":731,"to":739}}}}],["1509",{"pageContent":"Updates\n\nThe `save` method may also be used to update models that already exist in the database. To update a model, you should retrieve it and set any attributes you wish to update. Then, you should call the model's `save` method. Again, the `updated_at` timestamp will automatically be updated, so there is no need to manually set its value:\n\n    use App\\Models\\Flight;\n\n    $flight = Flight::find(1);\n\n    $flight->name = 'Paris to London';\n\n    $flight->save();\n\n<a name=\"mass-updates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":740,"to":752}}}}],["1510",{"pageContent":"Mass Updates\n\nUpdates can also be performed against models that match a given query. In this example, all flights that are `active` and have a `destination` of `San Diego` will be marked as delayed:\n\n    Flight::where('active', 1)\n          ->where('destination', 'San Diego')\n          ->update(['delayed' => 1]);\n\nThe `update` method expects an array of column and value pairs representing the columns that should be updated. The `update` method returns the number of affected rows.\n\n> **Warning**  \n> When issuing a mass update via Eloquent, the `saving`, `saved`, `updating`, and `updated` model events will not be fired for the updated models. This is because the models are never actually retrieved when issuing a mass update.\n\n<a name=\"examining-attribute-changes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":753,"to":766}}}}],["1511",{"pageContent":"Examining Attribute Changes\n\nEloquent provides the `isDirty`, `isClean`, and `wasChanged` methods to examine the internal state of your model and determine how its attributes have changed from when the model was originally retrieved.\n\nThe `isDirty` method determines if any of the model's attributes have been changed since the model was retrieved. You may pass a specific attribute name or an array of attributes to the `isDirty` method to determine if any of the attributes are \"dirty\". The `isClean` method will determine if an attribute has remained unchanged since the model was retrieved. This method also accepts an optional attribute argument:\n\n    use App\\Models\\User;\n\n    $user = User::create([\n        'first_name' => 'Taylor',\n        'last_name' => 'Otwell',\n        'title' => 'Developer',\n    ]);\n\n    $user->title = 'Painter';\n\n    $user->isDirty(); // true\n    $user->isDirty('title'); // true\n    $user->isDirty('first_name'); // false\n    $user->isDirty(['first_name', 'title']); // true","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":767,"to":786}}}}],["1512",{"pageContent":"$user->title = 'Painter';\n\n    $user->isDirty(); // true\n    $user->isDirty('title'); // true\n    $user->isDirty('first_name'); // false\n    $user->isDirty(['first_name', 'title']); // true\n\n    $user->isClean(); // false\n    $user->isClean('title'); // false\n    $user->isClean('first_name'); // true\n    $user->isClean(['first_name', 'title']); // false\n\n    $user->save();\n\n    $user->isDirty(); // false\n    $user->isClean(); // true\n\nThe `wasChanged` method determines if any attributes were changed when the model was last saved within the current request cycle. If needed, you may pass an attribute name to see if a particular attribute was changed:\n\n    $user = User::create([\n        'first_name' => 'Taylor',\n        'last_name' => 'Otwell',\n        'title' => 'Developer',\n    ]);\n\n    $user->title = 'Painter';\n\n    $user->save();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":786,"to":813}}}}],["1513",{"pageContent":"$user = User::create([\n        'first_name' => 'Taylor',\n        'last_name' => 'Otwell',\n        'title' => 'Developer',\n    ]);\n\n    $user->title = 'Painter';\n\n    $user->save();\n\n    $user->wasChanged(); // true\n    $user->wasChanged('title'); // true\n    $user->wasChanged(['title', 'slug']); // true\n    $user->wasChanged('first_name'); // false\n    $user->wasChanged(['first_name', 'title']); // true\n\nThe `getOriginal` method returns an array containing the original attributes of the model regardless of any changes to the model since it was retrieved. If needed, you may pass a specific attribute name to get the original value of a particular attribute:\n\n    $user = User::find(1);\n\n    $user->name; // John\n    $user->email; // john@example.com\n\n    $user->name = \"Jack\";\n    $user->name; // Jack\n\n    $user->getOriginal('name'); // John\n    $user->getOriginal(); // Array of original attributes...\n\n<a name=\"mass-assignment\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":813,"to":842}}}}],["1514",{"pageContent":"Mass Assignment\n\nYou may use the `create` method to \"save\" a new model using a single PHP statement. The inserted model instance will be returned to you by the method:\n\n    use App\\Models\\Flight;\n\n    $flight = Flight::create([\n        'name' => 'London to Paris',\n    ]);\n\nHowever, before using the `create` method, you will need to specify either a `fillable` or `guarded` property on your model class. These properties are required because all Eloquent models are protected against mass assignment vulnerabilities by default.\n\nA mass assignment vulnerability occurs when a user passes an unexpected HTTP request field and that field changes a column in your database that you did not expect. For example, a malicious user might send an `is_admin` parameter through an HTTP request, which is then passed to your model's `create` method, allowing the user to escalate themselves to an administrator.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":843,"to":855}}}}],["1515",{"pageContent":"So, to get started, you should define which model attributes you want to make mass assignable. You may do this using the `$fillable` property on the model. For example, let's make the `name` attribute of our `Flight` model mass assignable:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Flight extends Model\n    {\n        /**\n         * The attributes that are mass assignable.\n         *\n         * @var array\n         */\n        protected $fillable = ['name'];\n    }\n\nOnce you have specified which attributes are mass assignable, you may use the `create` method to insert a new record in the database. The `create` method returns the newly created model instance:\n\n    $flight = Flight::create(['name' => 'London to Paris']);\n\nIf you already have a model instance, you may use the `fill` method to populate it with an array of attributes:\n\n    $flight->fill(['name' => 'Amsterdam to Frankfurt']);\n\n<a name=\"mass-assignment-json-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":857,"to":883}}}}],["1516",{"pageContent":"Mass Assignment & JSON Columns\n\nWhen assigning JSON columns, each column's mass assignable key must be specified in your model's `$fillable` array. For security, Laravel does not support updating nested JSON attributes when using the `guarded` property:\n\n    /**\n     * The attributes that are mass assignable.\n     *\n     * @var array\n     */\n    protected $fillable = [\n        'options->enabled',\n    ];\n\n<a name=\"allowing-mass-assignment\"></a>\n#### Allowing Mass Assignment\n\nIf you would like to make all of your attributes mass assignable, you may define your model's `$guarded` property as an empty array. If you choose to unguard your model, you should take special care to always hand-craft the arrays passed to Eloquent's `fill`, `create`, and `update` methods:\n\n    /**\n     * The attributes that aren't mass assignable.\n     *\n     * @var array\n     */\n    protected $guarded = [];\n\n<a name=\"mass-assignment-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":884,"to":909}}}}],["1517",{"pageContent":"Mass Assignment Exceptions\n\nBy default, attributes that are not included in the `$fillable` array are silently discarded when performing mass-assignment operations. In production, this is expected behavior; however, during local development it can lead to confusion as to why model changes are not taking effect.\n\nIf you wish, you may instruct Laravel to throw an exception when attempting to fill an unfillable attribute by invoking the `preventSilentlyDiscardingAttributes` method. Typically, this method should be invoked within the `boot` method of one of your application's service providers:\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Model::preventSilentlyDiscardingAttributes($this->app->isLocal());\n    }\n\n<a name=\"upserts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":910,"to":926}}}}],["1518",{"pageContent":"Upserts\n\nOccasionally, you may need to update an existing model or create a new model if no matching model exists. Like the `firstOrCreate` method, the `updateOrCreate` method persists the model, so there's no need to manually call the `save` method.\n\nIn the example below, if a flight exists with a `departure` location of `Oakland` and a `destination` location of `San Diego`, its `price` and `discounted` columns will be updated. If no such flight exists, a new flight will be created which has the attributes resulting from merging the first argument array with the second argument array:\n\n    $flight = Flight::updateOrCreate(\n        ['departure' => 'Oakland', 'destination' => 'San Diego'],\n        ['price' => 99, 'discounted' => 1]\n    );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":927,"to":936}}}}],["1519",{"pageContent":"$flight = Flight::updateOrCreate(\n        ['departure' => 'Oakland', 'destination' => 'San Diego'],\n        ['price' => 99, 'discounted' => 1]\n    );\n\nIf you would like to perform multiple \"upserts\" in a single query, then you should use the `upsert` method instead. The method's first argument consists of the values to insert or update, while the second argument lists the column(s) that uniquely identify records within the associated table. The method's third and final argument is an array of the columns that should be updated if a matching record already exists in the database. The `upsert` method will automatically set the `created_at` and `updated_at` timestamps if timestamps are enabled on the model:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":936,"to":941}}}}],["1520",{"pageContent":"Flight::upsert([\n        ['departure' => 'Oakland', 'destination' => 'San Diego', 'price' => 99],\n        ['departure' => 'Chicago', 'destination' => 'New York', 'price' => 150]\n    ], ['departure', 'destination'], ['price']);\n    \n> **Warning**  \n> All databases except SQL Server require the columns in the second argument of the `upsert` method to have a \"primary\" or \"unique\" index. In addition, the MySQL database driver ignores the second argument of the `upsert` method and always uses the \"primary\" and \"unique\" indexes of the table to detect existing records.\n\n<a name=\"deleting-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":943,"to":951}}}}],["1521",{"pageContent":"Deleting Models\n\nTo delete a model, you may call the `delete` method on the model instance:\n\n    use App\\Models\\Flight;\n\n    $flight = Flight::find(1);\n\n    $flight->delete();\n\nYou may call the `truncate` method to delete all of the model's associated database records. The `truncate` operation will also reset any auto-incrementing IDs on the model's associated table:\n\n    Flight::truncate();\n\n<a name=\"deleting-an-existing-model-by-its-primary-key\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":952,"to":966}}}}],["1522",{"pageContent":"Deleting An Existing Model By Its Primary Key\n\nIn the example above, we are retrieving the model from the database before calling the `delete` method. However, if you know the primary key of the model, you may delete the model without explicitly retrieving it by calling the `destroy` method.  In addition to accepting the single primary key, the `destroy` method will accept multiple primary keys, an array of primary keys, or a [collection](/docs/{{version}}/collections) of primary keys:\n\n    Flight::destroy(1);\n\n    Flight::destroy(1, 2, 3);\n\n    Flight::destroy([1, 2, 3]);\n\n    Flight::destroy(collect([1, 2, 3]));\n\n> **Warning**  \n> The `destroy` method loads each model individually and calls the `delete` method so that the `deleting` and `deleted` events are properly dispatched for each model.\n\n<a name=\"deleting-models-using-queries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":967,"to":982}}}}],["1523",{"pageContent":"Deleting Models Using Queries\n\nOf course, you may build an Eloquent query to delete all models matching your query's criteria. In this example, we will delete all flights that are marked as inactive. Like mass updates, mass deletes will not dispatch model events for the models that are deleted:\n\n    $deleted = Flight::where('active', 0)->delete();\n\n> **Warning**  \n> When executing a mass delete statement via Eloquent, the `deleting` and `deleted` model events will not be dispatched for the deleted models. This is because the models are never actually retrieved when executing the delete statement.\n\n<a name=\"soft-deleting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":983,"to":992}}}}],["1524",{"pageContent":"Soft Deleting\n\nIn addition to actually removing records from your database, Eloquent can also \"soft delete\" models. When models are soft deleted, they are not actually removed from your database. Instead, a `deleted_at` attribute is set on the model indicating the date and time at which the model was \"deleted\". To enable soft deletes for a model, add the `Illuminate\\Database\\Eloquent\\SoftDeletes` trait to the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\SoftDeletes;\n\n    class Flight extends Model\n    {\n        use SoftDeletes;\n    }\n\n> **Note**  \n> The `SoftDeletes` trait will automatically cast the `deleted_at` attribute to a `DateTime` / `Carbon` instance for you.\n\nYou should also add the `deleted_at` column to your database table. The Laravel [schema builder](/docs/{{version}}/migrations) contains a helper method to create this column:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":993,"to":1012}}}}],["1525",{"pageContent":"You should also add the `deleted_at` column to your database table. The Laravel [schema builder](/docs/{{version}}/migrations) contains a helper method to create this column:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::table('flights', function (Blueprint $table) {\n        $table->softDeletes();\n    });\n\n    Schema::table('flights', function (Blueprint $table) {\n        $table->dropSoftDeletes();\n    });\n\nNow, when you call the `delete` method on the model, the `deleted_at` column will be set to the current date and time. However, the model's database record will be left in the table. When querying a model that uses soft deletes, the soft deleted models will automatically be excluded from all query results.\n\nTo determine if a given model instance has been soft deleted, you may use the `trashed` method:\n\n    if ($flight->trashed()) {\n        // ...\n    }\n\n<a name=\"restoring-soft-deleted-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1012,"to":1033}}}}],["1526",{"pageContent":"Restoring Soft Deleted Models\n\nSometimes you may wish to \"un-delete\" a soft deleted model. To restore a soft deleted model, you may call the `restore` method on a model instance. The `restore` method will set the model's `deleted_at` column to `null`:\n\n    $flight->restore();\n\nYou may also use the `restore` method in a query to restore multiple models. Again, like other \"mass\" operations, this will not dispatch any model events for the models that are restored:\n\n    Flight::withTrashed()\n            ->where('airline_id', 1)\n            ->restore();\n\nThe `restore` method may also be used when building [relationship](/docs/{{version}}/eloquent-relationships) queries:\n\n    $flight->history()->restore();\n\n<a name=\"permanently-deleting-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1034,"to":1050}}}}],["1527",{"pageContent":"Permanently Deleting Models\n\nSometimes you may need to truly remove a model from your database. You may use the `forceDelete` method to permanently remove a soft deleted model from the database table:\n\n    $flight->forceDelete();\n\nYou may also use the `forceDelete` method when building Eloquent relationship queries:\n\n    $flight->history()->forceDelete();\n\n<a name=\"querying-soft-deleted-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1051,"to":1061}}}}],["1528",{"pageContent":"Querying Soft Deleted Models\n\n<a name=\"including-soft-deleted-models\"></a>\n#### Including Soft Deleted Models\n\nAs noted above, soft deleted models will automatically be excluded from query results. However, you may force soft deleted models to be included in a query's results by calling the `withTrashed` method on the query:\n\n    use App\\Models\\Flight;\n\n    $flights = Flight::withTrashed()\n                    ->where('account_id', 1)\n                    ->get();\n\nThe `withTrashed` method may also be called when building a [relationship](/docs/{{version}}/eloquent-relationships) query:\n\n    $flight->history()->withTrashed()->get();\n\n<a name=\"retrieving-only-soft-deleted-models\"></a>\n#### Retrieving Only Soft Deleted Models\n\nThe `onlyTrashed` method will retrieve **only** soft deleted models:\n\n    $flights = Flight::onlyTrashed()\n                    ->where('airline_id', 1)\n                    ->get();\n\n<a name=\"pruning-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1062,"to":1088}}}}],["1529",{"pageContent":"Pruning Models\n\nSometimes you may want to periodically delete models that are no longer needed. To accomplish this, you may add the `Illuminate\\Database\\Eloquent\\Prunable` or `Illuminate\\Database\\Eloquent\\MassPrunable` trait to the models you would like to periodically prune. After adding one of the traits to the model, implement a `prunable` method which returns an Eloquent query builder that resolves the models that are no longer needed:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Prunable;\n\n    class Flight extends Model\n    {\n        use Prunable;\n\n        /**\n         * Get the prunable model query.\n         */\n        public function prunable(): Builder\n        {\n            return static::where('created_at', '<=', now()->subMonth());\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1089,"to":1112}}}}],["1530",{"pageContent":"When marking models as `Prunable`, you may also define a `pruning` method on the model. This method will be called before the model is deleted. This method can be useful for deleting any additional resources associated with the model, such as stored files, before the model is permanently removed from the database:\n\n    /**\n     * Prepare the model for pruning.\n     */\n    protected function pruning(): void\n    {\n        // ...\n    }\n\nAfter configuring your prunable model, you should schedule the `model:prune` Artisan command in your application's `App\\Console\\Kernel` class. You are free to choose the appropriate interval at which this command should be run:\n\n    /**\n     * Define the application's command schedule.\n     */\n    protected function schedule(Schedule $schedule): void\n    {\n        $schedule->command('model:prune')->daily();\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1114,"to":1132}}}}],["1531",{"pageContent":"/**\n     * Define the application's command schedule.\n     */\n    protected function schedule(Schedule $schedule): void\n    {\n        $schedule->command('model:prune')->daily();\n    }\n\nBehind the scenes, the `model:prune` command will automatically detect \"Prunable\" models within your application's `app/Models` directory. If your models are in a different location, you may use the `--model` option to specify the model class names:\n\n    $schedule->command('model:prune', [\n        '--model' => [Address::class, Flight::class],\n    ])->daily();\n\nIf you wish to exclude certain models from being pruned while pruning all other detected models, you may use the `--except` option:\n\n    $schedule->command('model:prune', [\n        '--except' => [Address::class, Flight::class],\n    ])->daily();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1132,"to":1150}}}}],["1532",{"pageContent":"$schedule->command('model:prune', [\n        '--except' => [Address::class, Flight::class],\n    ])->daily();\n\nYou may test your `prunable` query by executing the `model:prune` command with the `--pretend` option. When pretending, the `model:prune` command will simply report how many records would be pruned if the command were to actually run:\n\n```shell\nphp artisan model:prune --pretend","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1150,"to":1157}}}}],["1533",{"pageContent":"> **Warning**  \n> Soft deleting models will be permanently deleted (`forceDelete`) if they match the prunable query.\n\n<a name=\"mass-pruning\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1160,"to":1163}}}}],["1534",{"pageContent":"Mass Pruning\n\nWhen models are marked with the `Illuminate\\Database\\Eloquent\\MassPrunable` trait, models are deleted from the database using mass-deletion queries. Therefore, the `pruning` method will not be invoked, nor will the `deleting` and `deleted` model events be dispatched. This is because the models are never actually retrieved before deletion, thus making the pruning process much more efficient:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\MassPrunable;\n\n    class Flight extends Model\n    {\n        use MassPrunable;\n\n        /**\n         * Get the prunable model query.\n         */\n        public function prunable(): Builder\n        {\n            return static::where('created_at', '<=', now()->subMonth());\n        }\n    }\n\n<a name=\"replicating-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1164,"to":1189}}}}],["1535",{"pageContent":"Replicating Models\n\nYou may create an unsaved copy of an existing model instance using the `replicate` method. This method is particularly useful when you have model instances that share many of the same attributes:\n\n    use App\\Models\\Address;\n\n    $shipping = Address::create([\n        'type' => 'shipping',\n        'line_1' => '123 Example Street',\n        'city' => 'Victorville',\n        'state' => 'CA',\n        'postcode' => '90001',\n    ]);\n\n    $billing = $shipping->replicate()->fill([\n        'type' => 'billing'\n    ]);\n\n    $billing->save();\n\nTo exclude one or more attributes from being replicated to the new model, you may pass an array to the `replicate` method:\n\n    $flight = Flight::create([\n        'destination' => 'LAX',\n        'origin' => 'LHR',\n        'last_flown' => '2020-03-04 11:00:00',\n        'last_pilot_id' => 747,\n    ]);\n\n    $flight = $flight->replicate([\n        'last_flown',\n        'last_pilot_id'\n    ]);\n\n<a name=\"query-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1190,"to":1224}}}}],["1536",{"pageContent":"Query Scopes\n\n<a name=\"global-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1225,"to":1227}}}}],["1537",{"pageContent":"Global Scopes\n\nGlobal scopes allow you to add constraints to all queries for a given model. Laravel's own [soft delete](#soft-deleting) functionality utilizes global scopes to only retrieve \"non-deleted\" models from the database. Writing your own global scopes can provide a convenient, easy way to make sure every query for a given model receives certain constraints.\n\n<a name=\"generating-scopes\"></a>\n#### Generating Scopes\n\nTo generate a new global scope, you may invoke the `make:scope` Artisan command, which will place the generated scope in your application's `app/Models/Scopes` directory:\n\n```shell\nphp artisan make:scope AncientScope\n```\n\n<a name=\"writing-global-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1228,"to":1241}}}}],["1538",{"pageContent":"Writing Global Scopes\n\nWriting a global scope is simple. First, use the `make:scope` command to generate a class that implements the `Illuminate\\Database\\Eloquent\\Scope` interface. The `Scope` interface requires you to implement one method: `apply`. The `apply` method may add `where` constraints or other types of clauses to the query as needed:\n\n    <?php\n\n    namespace App\\Models\\Scopes;\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Database\\Eloquent\\Scope;\n\n    class AncientScope implements Scope\n    {\n        /**\n         * Apply the scope to a given Eloquent query builder.\n         */\n        public function apply(Builder $builder, Model $model): void\n        {\n            $builder->where('created_at', '<', now()->subYears(2000));\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1242,"to":1263}}}}],["1539",{"pageContent":"> **Note**  \n> If your global scope is adding columns to the select clause of the query, you should use the `addSelect` method instead of `select`. This will prevent the unintentional replacement of the query's existing select clause.\n\n<a name=\"applying-global-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1265,"to":1268}}}}],["1540",{"pageContent":"Applying Global Scopes\n\nTo assign a global scope to a model, you should override the model's `booted` method and invoke the model's `addGlobalScope` method. The `addGlobalScope` method accepts an instance of your scope as its only argument:\n\n    <?php\n\n    namespace App\\Models;\n\n    use App\\Models\\Scopes\\AncientScope;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The \"booted\" method of the model.\n         */\n        protected static function booted(): void\n        {\n            static::addGlobalScope(new AncientScope);\n        }\n    }\n\nAfter adding the scope in the example above to the `App\\Models\\User` model, a call to the `User::all()` method will execute the following SQL query:\n\n```sql\nselect * from `users` where `created_at` < 0021-02-18 00:00:00\n```\n\n<a name=\"anonymous-global-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1269,"to":1297}}}}],["1541",{"pageContent":"Anonymous Global Scopes\n\nEloquent also allows you to define global scopes using closures, which is particularly useful for simple scopes that do not warrant a separate class of their own. When defining a global scope using a closure, you should provide a scope name of your own choosing as the first argument to the `addGlobalScope` method:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The \"booted\" method of the model.\n         */\n        protected static function booted(): void\n        {\n            static::addGlobalScope('ancient', function (Builder $builder) {\n                $builder->where('created_at', '<', now()->subYears(2000));\n            });\n        }\n    }\n\n<a name=\"removing-global-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1298,"to":1322}}}}],["1542",{"pageContent":"Removing Global Scopes\n\nIf you would like to remove a global scope for a given query, you may use the `withoutGlobalScope` method. This method accepts the class name of the global scope as its only argument:\n\n    User::withoutGlobalScope(AncientScope::class)->get();\n\nOr, if you defined the global scope using a closure, you should pass the string name that you assigned to the global scope:\n\n    User::withoutGlobalScope('ancient')->get();\n\nIf you would like to remove several or even all of the query's global scopes, you may use the `withoutGlobalScopes` method:\n\n    // Remove all of the global scopes...\n    User::withoutGlobalScopes()->get();\n\n    // Remove some of the global scopes...\n    User::withoutGlobalScopes([\n        FirstScope::class, SecondScope::class\n    ])->get();\n\n<a name=\"local-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1323,"to":1343}}}}],["1543",{"pageContent":"Local Scopes\n\nLocal scopes allow you to define common sets of query constraints that you may easily re-use throughout your application. For example, you may need to frequently retrieve all users that are considered \"popular\". To define a scope, prefix an Eloquent model method with `scope`.\n\nScopes should always return the same query builder instance or `void`:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * Scope a query to only include popular users.\n         */\n        public function scopePopular(Builder $query): void\n        {\n            $query->where('votes', '>', 100);\n        }\n\n        /**\n         * Scope a query to only include active users.\n         */\n        public function scopeActive(Builder $query): void\n        {\n            $query->where('active', 1);\n        }\n    }\n\n<a name=\"utilizing-a-local-scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1344,"to":1376}}}}],["1544",{"pageContent":"Utilizing A Local Scope\n\nOnce the scope has been defined, you may call the scope methods when querying the model. However, you should not include the `scope` prefix when calling the method. You can even chain calls to various scopes:\n\n    use App\\Models\\User;\n\n    $users = User::popular()->active()->orderBy('created_at')->get();\n\nCombining multiple Eloquent model scopes via an `or` query operator may require the use of closures to achieve the correct [logical grouping](/docs/{{version}}/queries#logical-grouping):\n\n    $users = User::popular()->orWhere(function (Builder $query) {\n        $query->active();\n    })->get();\n\nHowever, since this can be cumbersome, Laravel provides a \"higher order\" `orWhere` method that allows you to fluently chain scopes together without the use of closures:\n\n    $users = User::popular()->orWhere->active()->get();\n\n<a name=\"dynamic-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1377,"to":1395}}}}],["1545",{"pageContent":"Dynamic Scopes\n\nSometimes you may wish to define a scope that accepts parameters. To get started, just add your additional parameters to your scope method's signature. Scope parameters should be defined after the `$query` parameter:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * Scope a query to only include users of a given type.\n         */\n        public function scopeOfType(Builder $query, string $type): void\n        {\n            $query->where('type', $type);\n        }\n    }\n\nOnce the expected arguments have been added to your scope method's signature, you may pass the arguments when calling the scope:\n\n    $users = User::ofType('admin')->get();\n\n<a name=\"comparing-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1396,"to":1422}}}}],["1546",{"pageContent":"Comparing Models\n\nSometimes you may need to determine if two models are the \"same\" or not. The `is` and `isNot` methods may be used to quickly verify two models have the same primary key, table, and database connection or not:\n\n    if ($post->is($anotherPost)) {\n        // ...\n    }\n\n    if ($post->isNot($anotherPost)) {\n        // ...\n    }\n\nThe `is` and `isNot` methods are also available when using the `belongsTo`, `hasOne`, `morphTo`, and `morphOne` [relationships](/docs/{{version}}/eloquent-relationships). This method is particularly helpful when you would like to compare a related model without issuing a query to retrieve that model:\n\n    if ($post->author()->is($user)) {\n        // ...\n    }\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1423,"to":1441}}}}],["1547",{"pageContent":"Events\n\n> **Note**  \n> Want to broadcast your Eloquent events directly to your client-side application? Check out Laravel's [model event broadcasting](/docs/{{version}}/broadcasting#model-broadcasting).\n\nEloquent models dispatch several events, allowing you to hook into the following moments in a model's lifecycle: `retrieved`, `creating`, `created`, `updating`, `updated`, `saving`, `saved`, `deleting`, `deleted`, `trashed`, `forceDeleting`, `forceDeleted`, `restoring`, `restored`, and `replicating`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1442,"to":1447}}}}],["1548",{"pageContent":"The `retrieved` event will dispatch when an existing model is retrieved from the database. When a new model is saved for the first time, the `creating` and `created` events will dispatch. The `updating` / `updated` events will dispatch when an existing model is modified and the `save` method is called. The `saving` / `saved` events will dispatch when a model is created or updated - even if the model's attributes have not been changed. Event names ending with `-ing` are dispatched before any changes to the model are persisted, while events ending with `-ed` are dispatched after the changes to the model are persisted.\n\nTo start listening to model events, define a `$dispatchesEvents` property on your Eloquent model. This property maps various points of the Eloquent model's lifecycle to your own [event classes](/docs/{{version}}/events). Each model event class should expect to receive an instance of the affected model via its constructor:\n\n    <?php\n\n    namespace App\\Models;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1449,"to":1455}}}}],["1549",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use App\\Events\\UserDeleted;\n    use App\\Events\\UserSaved;\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n\n    class User extends Authenticatable\n    {\n        use Notifiable;\n\n        /**\n         * The event map for the model.\n         *\n         * @var array\n         */\n        protected $dispatchesEvents = [\n            'saved' => UserSaved::class,\n            'deleted' => UserDeleted::class,\n        ];\n    }\n\nAfter defining and mapping your Eloquent events, you may use [event listeners](/docs/{{version}}/events#defining-listeners) to handle the events.\n\n> **Warning**  \n> When issuing a mass update or delete query via Eloquent, the `saved`, `updated`, `deleting`, and `deleted` model events will not be dispatched for the affected models. This is because the models are never actually retrieved when performing mass updates or deletes.\n\n<a name=\"events-using-closures\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1455,"to":1484}}}}],["1550",{"pageContent":"Using Closures\n\nInstead of using custom event classes, you may register closures that execute when various model events are dispatched. Typically, you should register these closures in the `booted` method of your model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class User extends Model\n    {\n        /**\n         * The \"booted\" method of the model.\n         */\n        protected static function booted(): void\n        {\n            static::created(function (User $user) {\n                // ...\n            });\n        }\n    }\n\nIf needed, you may utilize [queueable anonymous event listeners](/docs/{{version}}/events#queuable-anonymous-event-listeners) when registering model events. This will instruct Laravel to execute the model event listener in the background using your application's [queue](/docs/{{version}}/queues):\n\n    use function Illuminate\\Events\\queueable;\n\n    static::created(queueable(function (User $user) {\n        // ...\n    }));","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1485,"to":1514}}}}],["1551",{"pageContent":"use function Illuminate\\Events\\queueable;\n\n    static::created(queueable(function (User $user) {\n        // ...\n    }));\n\n<a name=\"observers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1514,"to":1520}}}}],["1552",{"pageContent":"Observers\n\n<a name=\"defining-observers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1521,"to":1523}}}}],["1553",{"pageContent":"Defining Observers\n\nIf you are listening for many events on a given model, you may use observers to group all of your listeners into a single class. Observer classes have method names which reflect the Eloquent events you wish to listen for. Each of these methods receives the affected model as their only argument. The `make:observer` Artisan command is the easiest way to create a new observer class:\n\n```shell\nphp artisan make:observer UserObserver --model=User","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1524,"to":1529}}}}],["1554",{"pageContent":"This command will place the new observer in your `app/Observers` directory. If this directory does not exist, Artisan will create it for you. Your fresh observer will look like the following:\n\n    <?php\n\n    namespace App\\Observers;\n\n    use App\\Models\\User;\n\n    class UserObserver\n    {\n        /**\n         * Handle the User \"created\" event.\n         */\n        public function created(User $user): void\n        {\n            // ...\n        }\n\n        /**\n         * Handle the User \"updated\" event.\n         */\n        public function updated(User $user): void\n        {\n            // ...\n        }\n\n        /**\n         * Handle the User \"deleted\" event.\n         */\n        public function deleted(User $user): void\n        {\n            // ...\n        }\n        \n        /**\n         * Handle the User \"restored\" event.\n         */\n        public function restored(User $user): void\n        {\n            // ...\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1532,"to":1572}}}}],["1555",{"pageContent":"/**\n         * Handle the User \"forceDeleted\" event.\n         */\n        public function forceDeleted(User $user): void\n        {\n            // ...\n        }\n    }\n\nTo register an observer, you need to call the `observe` method on the model you wish to observe. You may register observers in the `boot` method of your application's `App\\Providers\\EventServiceProvider` service provider:\n\n    use App\\Models\\User;\n    use App\\Observers\\UserObserver;\n\n    /**\n     * Register any events for your application.\n     */\n    public function boot(): void\n    {\n        User::observe(UserObserver::class);\n    }\n\nAlternatively, you may list your observers within an `$observers` property of your applications' `App\\Providers\\EventServiceProvider` class:\n\n    use App\\Models\\User;\n    use App\\Observers\\UserObserver;\n\n    /**\n     * The model observers for your application.\n     *\n     * @var array\n     */\n    protected $observers = [\n        User::class => [UserObserver::class],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1574,"to":1608}}}}],["1556",{"pageContent":"/**\n     * The model observers for your application.\n     *\n     * @var array\n     */\n    protected $observers = [\n        User::class => [UserObserver::class],\n    ];\n\n> **Note**  \n> There are additional events an observer can listen to, such as `saving` and `retrieved`. These events are described within the [events](#events) documentation.\n\n<a name=\"observers-and-database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1608,"to":1620}}}}],["1557",{"pageContent":"Observers & Database Transactions\n\nWhen models are being created within a database transaction, you may want to instruct an observer to only execute its event handlers after the database transaction is committed. You may accomplish this by implementing the `ShouldHandleEventsAfterCommit` interface on your observer. If a database transaction is not in progress, the event handlers will execute immediately:\n\n    <?php\n\n    namespace App\\Observers;\n\n    use App\\Models\\User;\n    use Illuminate\\Contracts\\Events\\ShouldHandleEventsAfterCommit;\n\n    class UserObserver implements ShouldHandleEventsAfterCommit\n    {\n        /**\n         * Handle the User \"created\" event.\n         */\n        public function created(User $user): void\n        {\n            // ...\n        }\n    }\n\n<a name=\"muting-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1621,"to":1643}}}}],["1558",{"pageContent":"Muting Events\n\nYou may occasionally need to temporarily \"mute\" all events fired by a model. You may achieve this using the `withoutEvents` method. The `withoutEvents` method accepts a closure as its only argument. Any code executed within this closure will not dispatch model events, and any value returned by the closure will be returned by the `withoutEvents` method:\n\n    use App\\Models\\User;\n\n    $user = User::withoutEvents(function () {\n        User::findOrFail(1)->delete();\n\n        return User::find(2);\n    });\n\n<a name=\"saving-a-single-model-without-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1644,"to":1656}}}}],["1559",{"pageContent":"Saving A Single Model Without Events\n\nSometimes you may wish to \"save\" a given model without dispatching any events. You may accomplish this using the `saveQuietly` method:\n\n    $user = User::findOrFail(1);\n\n    $user->name = 'Victoria Faith';\n\n    $user->saveQuietly();\n\nYou may also \"update\", \"delete\", \"soft delete\", \"restore\", and \"replicate\" a given model without dispatching any events:\n\n    $user->deleteQuietly();\n    $user->forceDeleteQuietly();\n    $user->restoreQuietly();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/eloquent.md","loc":{"lines":{"from":1657,"to":1671}}}}],["1560",{"pageContent":"# Encryption\n\n- [Introduction](#introduction)\n- [Configuration](#configuration)\n- [Using The Encrypter](#using-the-encrypter)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nLaravel's encryption services provide a simple, convenient interface for encrypting and decrypting text via OpenSSL using AES-256 and AES-128 encryption. All of Laravel's encrypted values are signed using a message authentication code (MAC) so that their underlying value can not be modified or tampered with once encrypted.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/encryption.md","loc":{"lines":{"from":1,"to":12}}}}],["1561",{"pageContent":"Configuration\n\nBefore using Laravel's encrypter, you must set the `key` configuration option in your `config/app.php` configuration file. This configuration value is driven by the `APP_KEY` environment variable. You should use the `php artisan key:generate` command to generate this variable's value since the `key:generate` command will use PHP's secure random bytes generator to build a cryptographically secure key for your application. Typically, the value of the `APP_KEY` environment variable will be generated for you during [Laravel's installation](/docs/{{version}}/installation).\n\n<a name=\"using-the-encrypter\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/encryption.md","loc":{"lines":{"from":13,"to":17}}}}],["1562",{"pageContent":"Using The Encrypter\n\n<a name=\"encrypting-a-value\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/encryption.md","loc":{"lines":{"from":18,"to":20}}}}],["1563",{"pageContent":"Encrypting A Value\n\nYou may encrypt a value using the `encryptString` method provided by the `Crypt` facade. All encrypted values are encrypted using OpenSSL and the AES-256-CBC cipher. Furthermore, all encrypted values are signed with a message authentication code (MAC). The integrated message authentication code will prevent the decryption of any values that have been tampered with by malicious users:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Crypt;\n\n    class DigitalOceanTokenController extends Controller\n    {\n        /**\n         * Store a DigitalOcean API token for the user.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $request->user()->fill([\n                'token' => Crypt::encryptString($request->token),\n            ])->save();\n\n            return redirect('/secrets');\n        }\n    }\n\n<a name=\"decrypting-a-value\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/encryption.md","loc":{"lines":{"from":21,"to":48}}}}],["1564",{"pageContent":"Decrypting A Value\n\nYou may decrypt values using the `decryptString` method provided by the `Crypt` facade. If the value can not be properly decrypted, such as when the message authentication code is invalid, an `Illuminate\\Contracts\\Encryption\\DecryptException` will be thrown:\n\n    use Illuminate\\Contracts\\Encryption\\DecryptException;\n    use Illuminate\\Support\\Facades\\Crypt;\n\n    try {\n        $decrypted = Crypt::decryptString($encryptedValue);\n    } catch (DecryptException $e) {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/encryption.md","loc":{"lines":{"from":49,"to":60}}}}],["1565",{"pageContent":"# Laravel Envoy\n\n- [Introduction](#introduction)\n- [Installation](#installation)\n- [Writing Tasks](#writing-tasks)\n    - [Defining Tasks](#defining-tasks)\n    - [Multiple Servers](#multiple-servers)\n    - [Setup](#setup)\n    - [Variables](#variables)\n    - [Stories](#stories)\n    - [Hooks](#completion-hooks)\n- [Running Tasks](#running-tasks)\n    - [Confirming Task Execution](#confirming-task-execution)\n- [Notifications](#notifications)\n    - [Slack](#slack)\n    - [Discord](#discord)\n    - [Telegram](#telegram)\n    - [Microsoft Teams](#microsoft-teams)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":1,"to":20}}}}],["1566",{"pageContent":"Introduction\n\n[Laravel Envoy](https://github.com/laravel/envoy) is a tool for executing common tasks you run on your remote servers. Using [Blade](/docs/{{version}}/blade) style syntax, you can easily setup tasks for deployment, Artisan commands, and more. Currently, Envoy only supports the Mac and Linux operating systems. However, Windows support is achievable using [WSL2](https://docs.microsoft.com/en-us/windows/wsl/install-win10).\n\n<a name=\"installation\"></a>\n## Installation\n\nFirst, install Envoy into your project using the Composer package manager:\n\n```shell\ncomposer require laravel/envoy --dev\n```\n\nOnce Envoy has been installed, the Envoy binary will be available in your application's `vendor/bin` directory:\n\n```shell\nphp vendor/bin/envoy\n```\n\n<a name=\"writing-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":21,"to":40}}}}],["1567",{"pageContent":"Writing Tasks\n\n<a name=\"defining-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":41,"to":43}}}}],["1568",{"pageContent":"Defining Tasks\n\nTasks are the basic building block of Envoy. Tasks define the shell commands that should execute on your remote servers when the task is invoked. For example, you might define a task that executes the `php artisan queue:restart` command on all of your application's queue worker servers.\n\nAll of your Envoy tasks should be defined in an `Envoy.blade.php` file at the root of your application. Here's an example to get you started:\n\n```blade\n@servers(['web' => ['user@192.168.1.1'], 'workers' => ['user@192.168.1.2']])\n\n@task('restart-queues', ['on' => 'workers'])\n    cd /home/user/example.com\n    php artisan queue:restart\n@endtask","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":44,"to":56}}}}],["1569",{"pageContent":"As you can see, an array of `@servers` is defined at the top of the file, allowing you to reference these servers via the `on` option of your task declarations. The `@servers` declaration should always be placed on a single line. Within your `@task` declarations, you should place the shell commands that should execute on your servers when the task is invoked.\n\n<a name=\"local-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":59,"to":61}}}}],["1570",{"pageContent":"Local Tasks\n\nYou can force a script to run on your local computer by specifying the server's IP address as `127.0.0.1`:\n\n```blade\n@servers(['localhost' => '127.0.0.1'])\n```\n\n<a name=\"importing-envoy-tasks\"></a>\n#### Importing Envoy Tasks\n\nUsing the `@import` directive, you may import other Envoy files so their stories and tasks are added to yours. After the files have been imported, you may execute the tasks they contain as if they were defined in your own Envoy file:\n\n```blade\n@import('vendor/package/Envoy.blade.php')\n```\n\n<a name=\"multiple-servers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":62,"to":79}}}}],["1571",{"pageContent":"Multiple Servers\n\nEnvoy allows you to easily run a task across multiple servers. First, add additional servers to your `@servers` declaration. Each server should be assigned a unique name. Once you have defined your additional servers you may list each of the servers in the task's `on` array:\n\n```blade\n@servers(['web-1' => '192.168.1.1', 'web-2' => '192.168.1.2'])\n\n@task('deploy', ['on' => ['web-1', 'web-2']])\n    cd /home/user/example.com\n    git pull origin {{ $branch }}\n    php artisan migrate --force\n@endtask\n```\n\n<a name=\"parallel-execution\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":80,"to":94}}}}],["1572",{"pageContent":"Parallel Execution\n\nBy default, tasks will be executed on each server serially. In other words, a task will finish running on the first server before proceeding to execute on the second server. If you would like to run a task across multiple servers in parallel, add the `parallel` option to your task declaration:\n\n```blade\n@servers(['web-1' => '192.168.1.1', 'web-2' => '192.168.1.2'])\n\n@task('deploy', ['on' => ['web-1', 'web-2'], 'parallel' => true])\n    cd /home/user/example.com\n    git pull origin {{ $branch }}\n    php artisan migrate --force\n@endtask\n```\n\n<a name=\"setup\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":95,"to":109}}}}],["1573",{"pageContent":"Setup\n\nSometimes, you may need to execute arbitrary PHP code before running your Envoy tasks. You may use the `@setup` directive to define a block of PHP code that should execute before your tasks:\n\n```php\n@setup\n    $now = new DateTime;\n@endsetup\n```\n\nIf you need to require other PHP files before your task is executed, you may use the `@include` directive at the top of your `Envoy.blade.php` file:\n\n```blade\n@include('vendor/autoload.php')\n\n@task('restart-queues')\n    # ...\n@endtask\n```\n\n<a name=\"variables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":110,"to":130}}}}],["1574",{"pageContent":"Variables\n\nIf needed, you may pass arguments to Envoy tasks by specifying them on the command line when invoking Envoy:\n\n```shell\nphp vendor/bin/envoy run deploy --branch=master\n```\n\nYou may access the options within your tasks using Blade's \"echo\" syntax. You may also define Blade `if` statements and loops within your tasks. For example, let's verify the presence of the `$branch` variable before executing the `git pull` command:\n\n```blade\n@servers(['web' => ['user@192.168.1.1']])\n\n@task('deploy', ['on' => 'web'])\n    cd /home/user/example.com\n\n    @if ($branch)\n        git pull origin {{ $branch }}\n    @endif\n\n    php artisan migrate --force\n@endtask\n```\n\n<a name=\"stories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":131,"to":155}}}}],["1575",{"pageContent":"Stories\n\nStories group a set of tasks under a single, convenient name. For instance, a `deploy` story may run the `update-code` and `install-dependencies` tasks by listing the task names within its definition:\n\n```blade\n@servers(['web' => ['user@192.168.1.1']])\n\n@story('deploy')\n    update-code\n    install-dependencies\n@endstory\n\n@task('update-code')\n    cd /home/user/example.com\n    git pull origin master\n@endtask\n\n@task('install-dependencies')\n    cd /home/user/example.com\n    composer install\n@endtask\n```\n\nOnce the story has been written, you may invoke it in the same way you would invoke a task:\n\n```shell\nphp vendor/bin/envoy run deploy\n```\n\n<a name=\"completion-hooks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":156,"to":185}}}}],["1576",{"pageContent":"Hooks\n\nWhen tasks and stories run, a number of hooks are executed. The hook types supported by Envoy are `@before`, `@after`, `@error`, `@success`, and `@finished`. All of the code in these hooks is interpreted as PHP and executed locally, not on the remote servers that your tasks interact with.\n\nYou may define as many of each of these hooks as you like. They will be executed in the order that they appear in your Envoy script.\n\n<a name=\"hook-before\"></a>\n#### `@before`\n\nBefore each task execution, all of the `@before` hooks registered in your Envoy script will execute. The `@before` hooks receive the name of the task that will be executed:\n\n```blade\n@before\n    if ($task === 'deploy') {\n        // ...\n    }\n@endbefore\n```\n\n<a name=\"completion-after\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":186,"to":205}}}}],["1577",{"pageContent":"`@after`\n\nAfter each task execution, all of the `@after` hooks registered in your Envoy script will execute. The `@after` hooks receive the name of the task that was executed:\n\n```blade\n@after\n    if ($task === 'deploy') {\n        // ...\n    }\n@endafter\n```\n\n<a name=\"completion-error\"></a>\n#### `@error`\n\nAfter every task failure (exits with a status code greater than `0`), all of the `@error` hooks registered in your Envoy script will execute. The `@error` hooks receive the name of the task that was executed:\n\n```blade\n@error\n    if ($task === 'deploy') {\n        // ...\n    }\n@enderror\n```\n\n<a name=\"completion-success\"></a>\n#### `@success`\n\nIf all tasks have executed without errors, all of the `@success` hooks registered in your Envoy script will execute:\n\n```blade\n@success\n    // ...\n@endsuccess\n```\n\n<a name=\"completion-finished\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":206,"to":242}}}}],["1578",{"pageContent":"`@finished`\n\nAfter all tasks have been executed (regardless of exit status), all of the `@finished` hooks will be executed. The `@finished` hooks receive the status code of the completed task, which may be `null` or an `integer` greater than or equal to `0`:\n\n```blade\n@finished\n    if ($exitCode > 0) {\n        // There were errors in one of the tasks...\n    }\n@endfinished\n```\n\n<a name=\"running-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":243,"to":255}}}}],["1579",{"pageContent":"Running Tasks\n\nTo run a task or story that is defined in your application's `Envoy.blade.php` file, execute Envoy's `run` command, passing the name of the task or story you would like to execute. Envoy will execute the task and display the output from your remote servers as the task is running:\n\n```shell\nphp vendor/bin/envoy run deploy\n```\n\n<a name=\"confirming-task-execution\"></a>\n### Confirming Task Execution\n\nIf you would like to be prompted for confirmation before running a given task on your servers, you should add the `confirm` directive to your task declaration. This option is particularly useful for destructive operations:\n\n```blade\n@task('deploy', ['on' => 'web', 'confirm' => true])\n    cd /home/user/example.com\n    git pull origin {{ $branch }}\n    php artisan migrate\n@endtask\n```\n\n<a name=\"notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":256,"to":277}}}}],["1580",{"pageContent":"Notifications\n\n<a name=\"slack\"></a>\n### Slack\n\nEnvoy supports sending notifications to [Slack](https://slack.com) after each task is executed. The `@slack` directive accepts a Slack hook URL and a channel / user name. You may retrieve your webhook URL by creating an \"Incoming WebHooks\" integration in your Slack control panel.\n\nYou should pass the entire webhook URL as the first argument given to the `@slack` directive. The second argument given to the `@slack` directive should be a channel name (`#channel`) or a user name (`@user`):\n\n```blade\n@finished\n    @slack('webhook-url', '#bots')\n@endfinished\n```\n\nBy default, Envoy notifications will send a message to the notification channel describing the task that was executed. However, you may overwrite this message with your own custom message by passing a third argument to the `@slack` directive:\n\n```blade\n@finished\n    @slack('webhook-url', '#bots', 'Hello, Slack.')\n@endfinished\n```\n\n<a name=\"discord\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":278,"to":301}}}}],["1581",{"pageContent":"Discord\n\nEnvoy also supports sending notifications to [Discord](https://discord.com) after each task is executed. The `@discord` directive accepts a Discord hook URL and a message. You may retrieve your webhook URL by creating a \"Webhook\" in your Server Settings and choosing which channel the webhook should post to. You should pass the entire Webhook URL into the `@discord` directive:\n\n```blade\n@finished\n    @discord('discord-webhook-url')\n@endfinished\n```\n\n<a name=\"telegram\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":302,"to":312}}}}],["1582",{"pageContent":"Telegram\n\nEnvoy also supports sending notifications to [Telegram](https://telegram.org) after each task is executed. The `@telegram` directive accepts a Telegram Bot ID and a Chat ID. You may retrieve your Bot ID by creating a new bot using [BotFather](https://t.me/botfather). You can retrieve a valid Chat ID using [@username_to_id_bot](https://t.me/username_to_id_bot). You should pass the entire Bot ID and Chat ID into the `@telegram` directive:\n\n```blade\n@finished\n    @telegram('bot-id','chat-id')\n@endfinished\n```\n\n<a name=\"microsoft-teams\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":313,"to":323}}}}],["1583",{"pageContent":"Microsoft Teams\n\nEnvoy also supports sending notifications to [Microsoft Teams](https://www.microsoft.com/en-us/microsoft-teams) after each task is executed. The `@microsoftTeams` directive accepts a Teams Webhook (required), a message, theme color (success, info, warning, error), and an array of options. You may retrieve your Teams Webhook by creating a new [incoming webhook](https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook). The Teams API has many other attributes to customize your message box like title, summary, and sections. You can find more information on the [Microsoft Teams documentation](https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/connectors-using?tabs=cURL#example-of-connector-message). You should pass the entire Webhook URL into the `@microsoftTeams` directive:\n\n```blade\n@finished\n    @microsoftTeams('webhook-url')\n@endfinished\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/envoy.md","loc":{"lines":{"from":324,"to":332}}}}],["1584",{"pageContent":"# Error Handling\n\n- [Introduction](#introduction)\n- [Configuration](#configuration)\n- [The Exception Handler](#the-exception-handler)\n    - [Reporting Exceptions](#reporting-exceptions)\n    - [Exception Log Levels](#exception-log-levels)\n    - [Ignoring Exceptions By Type](#ignoring-exceptions-by-type)\n    - [Rendering Exceptions](#rendering-exceptions)\n    - [Reportable & Renderable Exceptions](#renderable-exceptions)\n- [Throttling Reported Exceptions](#throttling-reported-exceptions)\n- [HTTP Exceptions](#http-exceptions)\n    - [Custom HTTP Error Pages](#custom-http-error-pages)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nWhen you start a new Laravel project, error and exception handling is already configured for you. The `App\\Exceptions\\Handler` class is where all exceptions thrown by your application are logged and then rendered to the user. We'll dive deeper into this class throughout this documentation.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":1,"to":20}}}}],["1585",{"pageContent":"Configuration\n\nThe `debug` option in your `config/app.php` configuration file determines how much information about an error is actually displayed to the user. By default, this option is set to respect the value of the `APP_DEBUG` environment variable, which is stored in your `.env` file.\n\nDuring local development, you should set the `APP_DEBUG` environment variable to `true`. **In your production environment, this value should always be `false`. If the value is set to `true` in production, you risk exposing sensitive configuration values to your application's end users.**\n\n<a name=\"the-exception-handler\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":21,"to":27}}}}],["1586",{"pageContent":"The Exception Handler\n\n<a name=\"reporting-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":28,"to":30}}}}],["1587",{"pageContent":"Reporting Exceptions\n\nAll exceptions are handled by the `App\\Exceptions\\Handler` class. This class contains a `register` method where you may register custom exception reporting and rendering callbacks. We'll examine each of these concepts in detail. Exception reporting is used to log exceptions or send them to an external service like [Flare](https://flareapp.io), [Bugsnag](https://bugsnag.com), or [Sentry](https://github.com/getsentry/sentry-laravel). By default, exceptions will be logged based on your [logging](/docs/{{version}}/logging) configuration. However, you are free to log exceptions however you wish.\n\nIf you need to report different types of exceptions in different ways, you may use the `reportable` method to register a closure that should be executed when an exception of a given type needs to be reported. Laravel will determine what type of exception the closure reports by examining the type-hint of the closure:\n\n    use App\\Exceptions\\InvalidOrderException;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":31,"to":37}}}}],["1588",{"pageContent":"use App\\Exceptions\\InvalidOrderException;\n\n    /**\n     * Register the exception handling callbacks for the application.\n     */\n    public function register(): void\n    {\n        $this->reportable(function (InvalidOrderException $e) {\n            // ...\n        });\n    }\n\nWhen you register a custom exception reporting callback using the `reportable` method, Laravel will still log the exception using the default logging configuration for the application. If you wish to stop the propagation of the exception to the default logging stack, you may use the `stop` method when defining your reporting callback or return `false` from the callback:\n\n    $this->reportable(function (InvalidOrderException $e) {\n        // ...\n    })->stop();\n\n    $this->reportable(function (InvalidOrderException $e) {\n        return false;\n    });\n\n> **Note**  \n> To customize the exception reporting for a given exception, you may also utilize [reportable exceptions](/docs/{{version}}/errors#renderable-exceptions).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":37,"to":60}}}}],["1589",{"pageContent":"> **Note**  \n> To customize the exception reporting for a given exception, you may also utilize [reportable exceptions](/docs/{{version}}/errors#renderable-exceptions).\n\n<a name=\"global-log-context\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":60,"to":63}}}}],["1590",{"pageContent":"Global Log Context\n\nIf available, Laravel automatically adds the current user's ID to every exception's log message as contextual data. You may define your own global contextual data by defining a `context` method on your application's `App\\Exceptions\\Handler` class. This information will be included in every exception's log message written by your application:\n\n    /**\n     * Get the default context variables for logging.\n     *\n     * @return array<string, mixed>\n     */\n    protected function context(): array\n    {\n        return array_merge(parent::context(), [\n            'foo' => 'bar',\n        ]);\n    }\n\n<a name=\"exception-log-context\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":64,"to":80}}}}],["1591",{"pageContent":"Exception Log Context\n\nWhile adding context to every log message can be useful, sometimes a particular exception may have unique context that you would like to include in your logs. By defining a `context` method on one of your application's exceptions, you may specify any data relevant to that exception that should be added to the exception's log entry:\n\n    <?php\n\n    namespace App\\Exceptions;\n\n    use Exception;\n\n    class InvalidOrderException extends Exception\n    {\n        // ...\n\n        /**\n         * Get the exception's context information.\n         *\n         * @return array<string, mixed>\n         */\n        public function context(): array\n        {\n            return ['order_id' => $this->orderId];\n        }\n    }\n\n<a name=\"the-report-helper\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":81,"to":106}}}}],["1592",{"pageContent":"The `report` Helper\n\nSometimes you may need to report an exception but continue handling the current request. The `report` helper function allows you to quickly report an exception via the exception handler without rendering an error page to the user:\n\n    public function isValid(string $value): bool\n    {\n        try {\n            // Validate the value...\n        } catch (Throwable $e) {\n            report($e);\n\n            return false;\n        }\n    }\n\n<a name=\"deduplicating-reported-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":107,"to":122}}}}],["1593",{"pageContent":"Deduplicating Reported Exceptions\n\nIf you are using the `report` function throughout your application, you may occasionally report the same exception multiple times, creating duplicate entries in your logs.\n\nIf you would like to ensure that a single instance of an exception is only ever reported once, you may set the `$withoutDuplicates` property to `true` within your application's `App\\Exceptions\\Handler` class:\n\n```php\nnamespace App\\Exceptions;\n\nuse Illuminate\\Foundation\\Exceptions\\Handler as ExceptionHandler;\n\nclass Handler extends ExceptionHandler\n{\n    /**\n     * Indicates that an exception instance should only be reported once.\n     *\n     * @var bool\n     */\n    protected $withoutDuplicates = true;\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":123,"to":144}}}}],["1594",{"pageContent":"Now, when the `report` helper is called with the same instance of an exception, only the first call will be reported:\n\n```php\n$original = new RuntimeException('Whoops!');\n\nreport($original); // reported\n\ntry {\n    throw $original;\n} catch (Throwable $caught) {\n    report($caught); // ignored\n}\n\nreport($original); // ignored\nreport($caught); // ignored\n```\n\n<a name=\"exception-log-levels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":147,"to":164}}}}],["1595",{"pageContent":"Exception Log Levels\n\nWhen messages are written to your application's [logs](/docs/{{version}}/logging), the messages are written at a specified [log level](/docs/{{version}}/logging#log-levels), which indicates the severity or importance of the message being logged.\n\nAs noted above, even when you register a custom exception reporting callback using the `reportable` method, Laravel will still log the exception using the default logging configuration for the application; however, since the log level can sometimes influence the channels on which a message is logged, you may wish to configure the log level that certain exceptions are logged at.\n\nTo accomplish this, you may define a `$levels` property on your application's exception handler. This property should contain an array of exception types and their associated log levels:\n\n    use PDOException;\n    use Psr\\Log\\LogLevel;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":165,"to":174}}}}],["1596",{"pageContent":"use PDOException;\n    use Psr\\Log\\LogLevel;\n\n    /**\n     * A list of exception types with their corresponding custom log levels.\n     *\n     * @var array<class-string<\\Throwable>, \\Psr\\Log\\LogLevel::*>\n     */\n    protected $levels = [\n        PDOException::class => LogLevel::CRITICAL,\n    ];\n\n<a name=\"ignoring-exceptions-by-type\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":174,"to":186}}}}],["1597",{"pageContent":"Ignoring Exceptions By Type\n\nWhen building your application, there will be some types of exceptions you never want to report. To ignore these exceptions, define a `$dontReport` property on your application's exception handler. Any classes that you add to this property will never be reported; however, they may still have custom rendering logic:\n\n    use App\\Exceptions\\InvalidOrderException;\n\n    /**\n     * A list of the exception types that are not reported.\n     *\n     * @var array<int, class-string<\\Throwable>>\n     */\n    protected $dontReport = [\n        InvalidOrderException::class,\n    ];\n\nInternally, Laravel already ignores some types of errors for you, such as exceptions resulting from 404 HTTP errors or 419 HTTP responses generated by invalid CSRF tokens. If you would like to instruct Laravel to stop ignoring a given type of exception, you may invoke the `stopIgnoring` method within your exception handler's `register` method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":187,"to":202}}}}],["1598",{"pageContent":"use Symfony\\Component\\HttpKernel\\Exception\\HttpException;\n\n    /**\n     * Register the exception handling callbacks for the application.\n     */\n    public function register(): void\n    {\n        $this->stopIgnoring(HttpException::class);\n\n        // ...\n    }\n\n<a name=\"rendering-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":204,"to":216}}}}],["1599",{"pageContent":"Rendering Exceptions\n\nBy default, the Laravel exception handler will convert exceptions into an HTTP response for you. However, you are free to register a custom rendering closure for exceptions of a given type. You may accomplish this by invoking the `renderable` method within your exception handler.\n\nThe closure passed to the `renderable` method should return an instance of `Illuminate\\Http\\Response`, which may be generated via the `response` helper. Laravel will determine what type of exception the closure renders by examining the type-hint of the closure:\n\n    use App\\Exceptions\\InvalidOrderException;\n    use Illuminate\\Http\\Request;\n\n    /**\n     * Register the exception handling callbacks for the application.\n     */\n    public function register(): void\n    {\n        $this->renderable(function (InvalidOrderException $e, Request $request) {\n            return response()->view('errors.invalid-order', [], 500);\n        });\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":217,"to":234}}}}],["1600",{"pageContent":"You may also use the `renderable` method to override the rendering behavior for built-in Laravel or Symfony exceptions such as `NotFoundHttpException`. If the closure given to the `renderable` method does not return a value, Laravel's default exception rendering will be utilized:\n\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException;\n\n    /**\n     * Register the exception handling callbacks for the application.\n     */\n    public function register(): void\n    {\n        $this->renderable(function (NotFoundHttpException $e, Request $request) {\n            if ($request->is('api/*')) {\n                return response()->json([\n                    'message' => 'Record not found.'\n                ], 404);\n            }\n        });\n    }\n\n<a name=\"renderable-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":236,"to":255}}}}],["1601",{"pageContent":"Reportable & Renderable Exceptions\n\nInstead of defining custom reporting and rendering behavior in your exception handler's `register` method, you may define `report` and `render` methods directly on your application's exceptions. When these methods exist, they will automatically be called by the framework:\n\n    <?php\n\n    namespace App\\Exceptions;\n\n    use Exception;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Response;\n\n    class InvalidOrderException extends Exception\n    {\n        /**\n         * Report the exception.\n         */\n        public function report(): void\n        {\n            // ...\n        }\n\n        /**\n         * Render the exception into an HTTP response.\n         */\n        public function render(Request $request): Response\n        {\n            return response(/* ... */);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":256,"to":285}}}}],["1602",{"pageContent":"If your exception extends an exception that is already renderable, such as a built-in Laravel or Symfony exception, you may return `false` from the exception's `render` method to render the exception's default HTTP response:\n\n    /**\n     * Render the exception into an HTTP response.\n     */\n    public function render(Request $request): Response|bool\n    {\n        if (/** Determine if the exception needs custom rendering */) {\n\n            return response(/* ... */);\n        }\n\n        return false;\n    }\n\nIf your exception contains custom reporting logic that is only necessary when certain conditions are met, you may need to instruct Laravel to sometimes report the exception using the default exception handling configuration. To accomplish this, you may return `false` from the exception's `report` method:\n\n    /**\n     * Report the exception.\n     */\n    public function report(): bool\n    {\n        if (/** Determine if the exception needs custom reporting */) {\n\n            // ...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":287,"to":311}}}}],["1603",{"pageContent":"/**\n     * Report the exception.\n     */\n    public function report(): bool\n    {\n        if (/** Determine if the exception needs custom reporting */) {\n\n            // ...\n\n            return true;\n        }\n\n        return false;\n    }\n\n> **Note**  \n> You may type-hint any required dependencies of the `report` method and they will automatically be injected into the method by Laravel's [service container](/docs/{{version}}/container).\n\n<a name=\"throttling-reported-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":311,"to":329}}}}],["1604",{"pageContent":"Throttling Reported Exceptions\n\nIf your application reports a very large number of exceptions, you may want to throttle how many exceptions are actually logged or sent to your application's external error tracking service.\n\nTo take a random sample rate of exceptions, you can return a `Lottery` instance from your exception handler's `throttle` method. If your `App\\Exceptions\\Handler` class does not contain this method, you may simply add it to the class:\n\n```php\nuse Illuminate\\Support\\Lottery;\nuse Throwable;\n\n/**\n * Throttle incoming exceptions.\n */\nprotected function throttle(Throwable $e): mixed\n{\n    return Lottery::odds(1, 1000);\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":330,"to":346}}}}],["1605",{"pageContent":"It is also possible to conditionally sample based on the exception type. If you would like to only sample instances of a specific exception class, you may return a `Lottery` instance only for that class:\n\n```php\nuse App\\Exceptions\\ApiMonitoringException;\nuse Illuminate\\Support\\Lottery;\nuse Throwable;\n\n/**\n * Throttle incoming exceptions.\n */\nprotected function throttle(Throwable $e): mixed\n{\n    if ($e instanceof ApiMonitoringException) {\n        return Lottery::odds(1, 1000);\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":349,"to":364}}}}],["1606",{"pageContent":"You may also rate limit exceptions logged or sent to an external error tracking service by returning a `Limit` instance instead of a `Lottery`. This is useful if you want to protect against sudden bursts of exceptions flooding your logs, for example, when a third-party service used by your application is down:\n\n```php\nuse Illuminate\\Broadcasting\\BroadcastException;\nuse Illuminate\\Cache\\RateLimiting\\Limit;\nuse Throwable;\n\n/**\n * Throttle incoming exceptions.\n */\nprotected function throttle(Throwable $e): mixed\n{\n    if ($e instanceof BroadcastException) {\n        return Limit::perMinute(300);\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":367,"to":382}}}}],["1607",{"pageContent":"By default, limits will use the exception's class as the rate limit key. You can customize this by specifying your own key using the `by` method on the `Limit`:\n\n```php\nuse Illuminate\\Broadcasting\\BroadcastException;\nuse Illuminate\\Cache\\RateLimiting\\Limit;\nuse Throwable;\n\n/**\n * Throttle incoming exceptions.\n */\nprotected function throttle(Throwable $e): mixed\n{\n    if ($e instanceof BroadcastException) {\n        return Limit::perMinute(300)->by($e->getMessage());\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":385,"to":400}}}}],["1608",{"pageContent":"Of course, you may return a mixture of `Lottery` and `Limit` instances for different exceptions:\n\n```php\nuse App\\Exceptions\\ApiMonitoringException;\nuse Illuminate\\Broadcasting\\BroadcastException;\nuse Illuminate\\Cache\\RateLimiting\\Limit;\nuse Illuminate\\Support\\Lottery;\nuse Throwable;\n\n/**\n * Throttle incoming exceptions.\n */\nprotected function throttle(Throwable $e): mixed\n{\n    return match (true) {\n        $e instanceof BroadcastException => Limit::perMinute(300),\n        $e instanceof ApiMonitoringException => Lottery::odds(1, 1000),\n        default => Limit::none(),\n    };\n}\n```\n\n<a name=\"http-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":403,"to":425}}}}],["1609",{"pageContent":"HTTP Exceptions\n\nSome exceptions describe HTTP error codes from the server. For example, this may be a \"page not found\" error (404), an \"unauthorized error\" (401), or even a developer generated 500 error. In order to generate such a response from anywhere in your application, you may use the `abort` helper:\n\n    abort(404);\n\n<a name=\"custom-http-error-pages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":426,"to":432}}}}],["1610",{"pageContent":"Custom HTTP Error Pages\n\nLaravel makes it easy to display custom error pages for various HTTP status codes. For example, to customize the error page for 404 HTTP status codes, create a `resources/views/errors/404.blade.php` view template. This view will be rendered for all 404 errors generated by your application. The views within this directory should be named to match the HTTP status code they correspond to. The `Symfony\\Component\\HttpKernel\\Exception\\HttpException` instance raised by the `abort` function will be passed to the view as an `$exception` variable:\n\n    <h2>{{ $exception->getMessage() }}</h2>\n\nYou may publish Laravel's default error page templates using the `vendor:publish` Artisan command. Once the templates have been published, you may customize them to your liking:\n\n```shell\nphp artisan vendor:publish --tag=laravel-errors\n```\n\n<a name=\"fallback-http-error-pages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":433,"to":445}}}}],["1611",{"pageContent":"Fallback HTTP Error Pages\n\nYou may also define a \"fallback\" error page for a given series of HTTP status codes. This page will be rendered if there is not a corresponding page for the specific HTTP status code that occurred. To accomplish this, define a `4xx.blade.php` template and a `5xx.blade.php` template in your application's `resources/views/errors` directory.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/errors.md","loc":{"lines":{"from":446,"to":448}}}}],["1612",{"pageContent":"# Events","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":1,"to":1}}}}],["1613",{"pageContent":"- [Introduction](#introduction)\n- [Registering Events & Listeners](#registering-events-and-listeners)\n    - [Generating Events & Listeners](#generating-events-and-listeners)\n    - [Manually Registering Events](#manually-registering-events)\n    - [Event Discovery](#event-discovery)\n- [Defining Events](#defining-events)\n- [Defining Listeners](#defining-listeners)\n- [Queued Event Listeners](#queued-event-listeners)\n    - [Manually Interacting With The Queue](#manually-interacting-with-the-queue)\n    - [Queued Event Listeners & Database Transactions](#queued-event-listeners-and-database-transactions)\n    - [Handling Failed Jobs](#handling-failed-jobs)\n- [Dispatching Events](#dispatching-events)\n    - [Dispatching Events After Database Transactions](#dispatching-events-after-database-transactions)\n- [Event Subscribers](#event-subscribers)\n    - [Writing Event Subscribers](#writing-event-subscribers)\n    - [Registering Event Subscribers](#registering-event-subscribers)\n- [Testing](#testing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":3,"to":19}}}}],["1614",{"pageContent":"- [Event Subscribers](#event-subscribers)\n    - [Writing Event Subscribers](#writing-event-subscribers)\n    - [Registering Event Subscribers](#registering-event-subscribers)\n- [Testing](#testing)\n    - [Faking A Subset Of Events](#faking-a-subset-of-events)\n    - [Scoped Events Fakes](#scoped-event-fakes)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":19,"to":24}}}}],["1615",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":26,"to":26}}}}],["1616",{"pageContent":"Introduction\n\nLaravel's events provide a simple observer pattern implementation, allowing you to subscribe and listen for various events that occur within your application. Event classes are typically stored in the `app/Events` directory, while their listeners are stored in `app/Listeners`. Don't worry if you don't see these directories in your application as they will be created for you as you generate events and listeners using Artisan console commands.\n\nEvents serve as a great way to decouple various aspects of your application, since a single event can have multiple listeners that do not depend on each other. For example, you may wish to send a Slack notification to your user each time an order has shipped. Instead of coupling your order processing code to your Slack notification code, you can raise an `App\\Events\\OrderShipped` event which a listener can receive and use to dispatch a Slack notification.\n\n<a name=\"registering-events-and-listeners\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":27,"to":33}}}}],["1617",{"pageContent":"Registering Events & Listeners\n\nThe `App\\Providers\\EventServiceProvider` included with your Laravel application provides a convenient place to register all of your application's event listeners. The `listen` property contains an array of all events (keys) and their listeners (values). You may add as many events to this array as your application requires. For example, let's add an `OrderShipped` event:\n\n    use App\\Events\\OrderShipped;\n    use App\\Listeners\\SendShipmentNotification;\n\n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array<class-string, array<int, class-string>>\n     */\n    protected $listen = [\n        OrderShipped::class => [\n            SendShipmentNotification::class,\n        ],\n    ];\n\n> **Note**  \n> The `event:list` command may be used to display a list of all events and listeners registered by your application.\n\n<a name=\"generating-events-and-listeners\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":34,"to":55}}}}],["1618",{"pageContent":"Generating Events & Listeners\n\nOf course, manually creating the files for each event and listener is cumbersome. Instead, add listeners and events to your `EventServiceProvider` and use the `event:generate` Artisan command. This command will generate any events or listeners that are listed in your `EventServiceProvider` that do not already exist:\n\n```shell\nphp artisan event:generate\n```\n\nAlternatively, you may use the `make:event` and `make:listener` Artisan commands to generate individual events and listeners:\n\n```shell\nphp artisan make:event PodcastProcessed\n\nphp artisan make:listener SendPodcastNotification --event=PodcastProcessed\n```\n\n<a name=\"manually-registering-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":56,"to":72}}}}],["1619",{"pageContent":"Manually Registering Events\n\nTypically, events should be registered via the `EventServiceProvider` `$listen` array; however, you may also register class or closure based event listeners manually in the `boot` method of your `EventServiceProvider`:\n\n    use App\\Events\\PodcastProcessed;\n    use App\\Listeners\\SendPodcastNotification;\n    use Illuminate\\Support\\Facades\\Event;\n\n    /**\n     * Register any other events for your application.\n     */\n    public function boot(): void\n    {\n        Event::listen(\n            PodcastProcessed::class,\n            [SendPodcastNotification::class, 'handle']\n        );\n\n        Event::listen(function (PodcastProcessed $event) {\n            // ...\n        });\n    }\n\n<a name=\"queuable-anonymous-event-listeners\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":73,"to":96}}}}],["1620",{"pageContent":"Queueable Anonymous Event Listeners\n\nWhen registering closure based event listeners manually, you may wrap the listener closure within the `Illuminate\\Events\\queueable` function to instruct Laravel to execute the listener using the [queue](/docs/{{version}}/queues):\n\n    use App\\Events\\PodcastProcessed;\n    use function Illuminate\\Events\\queueable;\n    use Illuminate\\Support\\Facades\\Event;\n\n    /**\n     * Register any other events for your application.\n     */\n    public function boot(): void\n    {\n        Event::listen(queueable(function (PodcastProcessed $event) {\n            // ...\n        }));\n    }\n\nLike queued jobs, you may use the `onConnection`, `onQueue`, and `delay` methods to customize the execution of the queued listener:\n\n    Event::listen(queueable(function (PodcastProcessed $event) {\n        // ...\n    })->onConnection('redis')->onQueue('podcasts')->delay(now()->addSeconds(10)));","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":97,"to":119}}}}],["1621",{"pageContent":"Event::listen(queueable(function (PodcastProcessed $event) {\n        // ...\n    })->onConnection('redis')->onQueue('podcasts')->delay(now()->addSeconds(10)));\n\nIf you would like to handle anonymous queued listener failures, you may provide a closure to the `catch` method while defining the `queueable` listener. This closure will receive the event instance and the `Throwable` instance that caused the listener's failure:\n\n    use App\\Events\\PodcastProcessed;\n    use function Illuminate\\Events\\queueable;\n    use Illuminate\\Support\\Facades\\Event;\n    use Throwable;\n\n    Event::listen(queueable(function (PodcastProcessed $event) {\n        // ...\n    })->catch(function (PodcastProcessed $event, Throwable $e) {\n        // The queued listener failed...\n    }));\n\n<a name=\"wildcard-event-listeners\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":119,"to":136}}}}],["1622",{"pageContent":"Wildcard Event Listeners\n\nYou may even register listeners using the `*` as a wildcard parameter, allowing you to catch multiple events on the same listener. Wildcard listeners receive the event name as their first argument and the entire event data array as their second argument:\n\n    Event::listen('event.*', function (string $eventName, array $data) {\n        // ...\n    });\n\n<a name=\"event-discovery\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":137,"to":145}}}}],["1623",{"pageContent":"Event Discovery\n\nInstead of registering events and listeners manually in the `$listen` array of the `EventServiceProvider`, you can enable automatic event discovery. When event discovery is enabled, Laravel will automatically find and register your events and listeners by scanning your application's `Listeners` directory. In addition, any explicitly defined events listed in the `EventServiceProvider` will still be registered.\n\nLaravel finds event listeners by scanning the listener classes using PHP's reflection services. When Laravel finds any listener class method that begins with `handle` or `__invoke`, Laravel will register those methods as event listeners for the event that is type-hinted in the method's signature:\n\n    use App\\Events\\PodcastProcessed;\n\n    class SendPodcastNotification\n    {\n        /**\n         * Handle the given event.\n         */\n        public function handle(PodcastProcessed $event): void\n        {\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":146,"to":163}}}}],["1624",{"pageContent":"Event discovery is disabled by default, but you can enable it by overriding the `shouldDiscoverEvents` method of your application's `EventServiceProvider`:\n\n    /**\n     * Determine if events and listeners should be automatically discovered.\n     */\n    public function shouldDiscoverEvents(): bool\n    {\n        return true;\n    }\n\nBy default, all listeners within your application's `app/Listeners` directory will be scanned. If you would like to define additional directories to scan, you may override the `discoverEventsWithin` method in your `EventServiceProvider`:\n\n    /**\n     * Get the listener directories that should be used to discover events.\n     *\n     * @return array<int, string>\n     */\n    protected function discoverEventsWithin(): array\n    {\n        return [\n            $this->app->path('Listeners'),\n        ];\n    }\n\n<a name=\"event-discovery-in-production\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":165,"to":189}}}}],["1625",{"pageContent":"Event Discovery In Production\n\nIn production, it is not efficient for the framework to scan all of your listeners on every request. Therefore, during your deployment process, you should run the `event:cache` Artisan command to cache a manifest of all of your application's events and listeners. This manifest will be used by the framework to speed up the event registration process. The `event:clear` command may be used to destroy the cache.\n\n<a name=\"defining-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":190,"to":194}}}}],["1626",{"pageContent":"Defining Events\n\nAn event class is essentially a data container which holds the information related to the event. For example, let's assume an `App\\Events\\OrderShipped` event receives an [Eloquent ORM](/docs/{{version}}/eloquent) object:\n\n    <?php\n\n    namespace App\\Events;\n\n    use App\\Models\\Order;\n    use Illuminate\\Broadcasting\\InteractsWithSockets;\n    use Illuminate\\Foundation\\Events\\Dispatchable;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class OrderShipped\n    {\n        use Dispatchable, InteractsWithSockets, SerializesModels;\n\n        /**\n         * Create a new event instance.\n         */\n        public function __construct(\n            public Order $order,\n        ) {}\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":195,"to":218}}}}],["1627",{"pageContent":"/**\n         * Create a new event instance.\n         */\n        public function __construct(\n            public Order $order,\n        ) {}\n    }\n\nAs you can see, this event class contains no logic. It is a container for the `App\\Models\\Order` instance that was purchased. The `SerializesModels` trait used by the event will gracefully serialize any Eloquent models if the event object is serialized using PHP's `serialize` function, such as when utilizing [queued listeners](#queued-event-listeners).\n\n<a name=\"defining-listeners\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":218,"to":228}}}}],["1628",{"pageContent":"Defining Listeners\n\nNext, let's take a look at the listener for our example event. Event listeners receive event instances in their `handle` method. The `event:generate` and `make:listener` Artisan commands will automatically import the proper event class and type-hint the event on the `handle` method. Within the `handle` method, you may perform any actions necessary to respond to the event:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderShipped;\n\n    class SendShipmentNotification\n    {\n        /**\n         * Create the event listener.\n         */\n        public function __construct()\n        {\n            // ...\n        }\n\n        /**\n         * Handle the event.\n         */\n        public function handle(OrderShipped $event): void\n        {\n            // Access the order using $event->order...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":229,"to":256}}}}],["1629",{"pageContent":"/**\n         * Handle the event.\n         */\n        public function handle(OrderShipped $event): void\n        {\n            // Access the order using $event->order...\n        }\n    }\n\n> **Note**  \n> Your event listeners may also type-hint any dependencies they need on their constructors. All event listeners are resolved via the Laravel [service container](/docs/{{version}}/container), so dependencies will be injected automatically.\n\n<a name=\"stopping-the-propagation-of-an-event\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":256,"to":268}}}}],["1630",{"pageContent":"Stopping The Propagation Of An Event\n\nSometimes, you may wish to stop the propagation of an event to other listeners. You may do so by returning `false` from your listener's `handle` method.\n\n<a name=\"queued-event-listeners\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":269,"to":273}}}}],["1631",{"pageContent":"Queued Event Listeners\n\nQueueing listeners can be beneficial if your listener is going to perform a slow task such as sending an email or making an HTTP request. Before using queued listeners, make sure to [configure your queue](/docs/{{version}}/queues) and start a queue worker on your server or local development environment.\n\nTo specify that a listener should be queued, add the `ShouldQueue` interface to the listener class. Listeners generated by the `event:generate` and `make:listener` Artisan commands already have this interface imported into the current namespace so you can use it immediately:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n\n    class SendShipmentNotification implements ShouldQueue\n    {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":274,"to":290}}}}],["1632",{"pageContent":"namespace App\\Listeners;\n\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n\n    class SendShipmentNotification implements ShouldQueue\n    {\n        // ...\n    }\n\nThat's it! Now, when an event handled by this listener is dispatched, the listener will automatically be queued by the event dispatcher using Laravel's [queue system](/docs/{{version}}/queues). If no exceptions are thrown when the listener is executed by the queue, the queued job will automatically be deleted after it has finished processing.\n\n<a name=\"customizing-the-queue-connection-queue-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":290,"to":302}}}}],["1633",{"pageContent":"Customizing The Queue Connection, Name, & Delay\n\nIf you would like to customize the queue connection, queue name, or queue delay time of an event listener, you may define the `$connection`, `$queue`, or `$delay` properties on your listener class:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n\n    class SendShipmentNotification implements ShouldQueue\n    {\n        /**\n         * The name of the connection the job should be sent to.\n         *\n         * @var string|null\n         */\n        public $connection = 'sqs';\n\n        /**\n         * The name of the queue the job should be sent to.\n         *\n         * @var string|null\n         */\n        public $queue = 'listeners';\n\n        /**\n         * The time (seconds) before the job should be processed.\n         *\n         * @var int\n         */\n        public $delay = 60;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":303,"to":336}}}}],["1634",{"pageContent":"/**\n         * The time (seconds) before the job should be processed.\n         *\n         * @var int\n         */\n        public $delay = 60;\n    }\n\nIf you would like to define the listener's queue connection, queue name, or delay at runtime, you may define `viaConnection`, `viaQueue`, or `withDelay` methods on the listener:\n\n    /**\n     * Get the name of the listener's queue connection.\n     */\n    public function viaConnection(): string\n    {\n        return 'sqs';\n    }\n\n    /**\n     * Get the name of the listener's queue.\n     */\n    public function viaQueue(): string\n    {\n        return 'listeners';\n    }\n\n    /**\n     * Get the number of seconds before the job should be processed.\n     */\n    public function withDelay(OrderShipped $event): int\n    {\n        return $event->highPriority ? 0 : 60;\n    }\n\n<a name=\"conditionally-queueing-listeners\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":336,"to":370}}}}],["1635",{"pageContent":"Conditionally Queueing Listeners\n\nSometimes, you may need to determine whether a listener should be queued based on some data that are only available at runtime. To accomplish this, a `shouldQueue` method may be added to a listener to determine whether the listener should be queued. If the `shouldQueue` method returns `false`, the listener will not be executed:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderCreated;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n\n    class RewardGiftCard implements ShouldQueue\n    {\n        /**\n         * Reward a gift card to the customer.\n         */\n        public function handle(OrderCreated $event): void\n        {\n            // ...\n        }\n\n        /**\n         * Determine whether the listener should be queued.\n         */\n        public function shouldQueue(OrderCreated $event): bool\n        {\n            return $event->order->subtotal >= 5000;\n        }\n    }\n\n<a name=\"manually-interacting-with-the-queue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":371,"to":401}}}}],["1636",{"pageContent":"Manually Interacting With The Queue\n\nIf you need to manually access the listener's underlying queue job's `delete` and `release` methods, you may do so using the `Illuminate\\Queue\\InteractsWithQueue` trait. This trait is imported by default on generated listeners and provides access to these methods:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Queue\\InteractsWithQueue;\n\n    class SendShipmentNotification implements ShouldQueue\n    {\n        use InteractsWithQueue;\n\n        /**\n         * Handle the event.\n         */\n        public function handle(OrderShipped $event): void\n        {\n            if (true) {\n                $this->release(30);\n            }\n        }\n    }\n\n<a name=\"queued-event-listeners-and-database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":402,"to":429}}}}],["1637",{"pageContent":"Queued Event Listeners & Database Transactions\n\nWhen queued listeners are dispatched within database transactions, they may be processed by the queue before the database transaction has committed. When this happens, any updates you have made to models or database records during the database transaction may not yet be reflected in the database. In addition, any models or database records created within the transaction may not exist in the database. If your listener depends on these models, unexpected errors can occur when the job that dispatches the queued listener is processed.\n\nIf your queue connection's `after_commit` configuration option is set to `false`, you may still indicate that a particular queued listener should be dispatched after all open database transactions have been committed by implementing the `ShouldHandleEventsAfterCommit` interface on the listener class:\n\n    <?php\n\n    namespace App\\Listeners;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":430,"to":438}}}}],["1638",{"pageContent":"<?php\n\n    namespace App\\Listeners;\n\n    use Illuminate\\Contracts\\Events\\ShouldHandleEventsAfterCommit;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Queue\\InteractsWithQueue;\n\n    class SendShipmentNotification implements ShouldQueue, ShouldHandleEventsAfterCommit\n    {\n        use InteractsWithQueue;\n    }\n\n> **Note**  \n> To learn more about working around these issues, please review the documentation regarding [queued jobs and database transactions](/docs/{{version}}/queues#jobs-and-database-transactions).\n\n<a name=\"handling-failed-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":438,"to":454}}}}],["1639",{"pageContent":"Handling Failed Jobs\n\nSometimes your queued event listeners may fail. If the queued listener exceeds the maximum number of attempts as defined by your queue worker, the `failed` method will be called on your listener. The `failed` method receives the event instance and the `Throwable` that caused the failure:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Queue\\InteractsWithQueue;\n    use Throwable;\n\n    class SendShipmentNotification implements ShouldQueue\n    {\n        use InteractsWithQueue;\n\n        /**\n         * Handle the event.\n         */\n        public function handle(OrderShipped $event): void\n        {\n            // ...\n        }\n\n        /**\n         * Handle a job failure.\n         */\n        public function failed(OrderShipped $event, Throwable $exception): void\n        {\n            // ...\n        }\n    }\n\n<a name=\"specifying-queued-listener-maximum-attempts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":455,"to":489}}}}],["1640",{"pageContent":"Specifying Queued Listener Maximum Attempts\n\nIf one of your queued listeners is encountering an error, you likely do not want it to keep retrying indefinitely. Therefore, Laravel provides various ways to specify how many times or for how long a listener may be attempted.\n\nYou may define a `$tries` property on your listener class to specify how many times the listener may be attempted before it is considered to have failed:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Queue\\InteractsWithQueue;\n\n    class SendShipmentNotification implements ShouldQueue\n    {\n        use InteractsWithQueue;\n\n        /**\n         * The number of times the queued listener may be attempted.\n         *\n         * @var int\n         */\n        public $tries = 5;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":490,"to":514}}}}],["1641",{"pageContent":"/**\n         * The number of times the queued listener may be attempted.\n         *\n         * @var int\n         */\n        public $tries = 5;\n    }\n\nAs an alternative to defining how many times a listener may be attempted before it fails, you may define a time at which the listener should no longer be attempted. This allows a listener to be attempted any number of times within a given time frame. To define the time at which a listener should no longer be attempted, add a `retryUntil` method to your listener class. This method should return a `DateTime` instance:\n\n    use DateTime;\n\n    /**\n     * Determine the time at which the listener should timeout.\n     */\n    public function retryUntil(): DateTime\n    {\n        return now()->addMinutes(5);\n    }\n\n<a name=\"dispatching-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":514,"to":534}}}}],["1642",{"pageContent":"Dispatching Events\n\nTo dispatch an event, you may call the static `dispatch` method on the event. This method is made available on the event by the `Illuminate\\Foundation\\Events\\Dispatchable` trait. Any arguments passed to the `dispatch` method will be passed to the event's constructor:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Events\\OrderShipped;\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\Order;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class OrderShipmentController extends Controller\n    {\n        /**\n         * Ship the given order.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $order = Order::findOrFail($request->order_id);\n\n            // Order shipment logic...\n\n            OrderShipped::dispatch($order);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":535,"to":560}}}}],["1643",{"pageContent":"// Order shipment logic...\n\n            OrderShipped::dispatch($order);\n\n            return redirect('/orders');\n        }\n    }\n    \n If you would like to conditionally dispatch an event, you may use the `dispatchIf` and `dispatchUnless` methods:\n\n    OrderShipped::dispatchIf($condition, $order);\n\n    OrderShipped::dispatchUnless($condition, $order);\n\n> **Note**  \n> When testing, it can be helpful to assert that certain events were dispatched without actually triggering their listeners. Laravel's [built-in testing helpers](#testing) make it a cinch.\n\n<a name=\"dispatching-events-after-database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":560,"to":577}}}}],["1644",{"pageContent":"Dispatching Events After Database Transactions\n\nSometimes, you may want to instruct Laravel to only dispatch an event after the active database transaction has committed. To do so, you may implement the `ShouldDispatchAfterCommit` interface on the event class.\n\nThis interface instructs Laravel to not dispatch the event until the current database transaction is committed. If the transaction fails, the event will be discarded. If no database transaction is in progress when the event is dispatched, the event will be dispatched immediately:\n\n    <?php\n\n    namespace App\\Events;\n\n    use App\\Models\\Order;\n    use Illuminate\\Broadcasting\\InteractsWithSockets;\n    use Illuminate\\Contracts\\Events\\ShouldDispatchAfterCommit;\n    use Illuminate\\Foundation\\Events\\Dispatchable;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class OrderShipped implements ShouldDispatchAfterCommit\n    {\n        use Dispatchable, InteractsWithSockets, SerializesModels;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":578,"to":596}}}}],["1645",{"pageContent":"class OrderShipped implements ShouldDispatchAfterCommit\n    {\n        use Dispatchable, InteractsWithSockets, SerializesModels;\n\n        /**\n         * Create a new event instance.\n         */\n        public function __construct(\n            public Order $order,\n        ) {}\n    }\n\n<a name=\"event-subscribers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":596,"to":608}}}}],["1646",{"pageContent":"Event Subscribers\n\n<a name=\"writing-event-subscribers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":609,"to":611}}}}],["1647",{"pageContent":"Writing Event Subscribers\n\nEvent subscribers are classes that may subscribe to multiple events from within the subscriber class itself, allowing you to define several event handlers within a single class. Subscribers should define a `subscribe` method, which will be passed an event dispatcher instance. You may call the `listen` method on the given dispatcher to register event listeners:\n\n    <?php\n\n    namespace App\\Listeners;\n\n    use Illuminate\\Auth\\Events\\Login;\n    use Illuminate\\Auth\\Events\\Logout;\n    use Illuminate\\Events\\Dispatcher;\n\n    class UserEventSubscriber\n    {\n        /**\n         * Handle user login events.\n         */\n        public function handleUserLogin(Login $event): void {}\n\n        /**\n         * Handle user logout events.\n         */\n        public function handleUserLogout(Logout $event): void {}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":612,"to":634}}}}],["1648",{"pageContent":"/**\n         * Handle user logout events.\n         */\n        public function handleUserLogout(Logout $event): void {}\n\n        /**\n         * Register the listeners for the subscriber.\n         */\n        public function subscribe(Dispatcher $events): void\n        {\n            $events->listen(\n                Login::class,\n                [UserEventSubscriber::class, 'handleUserLogin']\n            );\n\n            $events->listen(\n                Logout::class,\n                [UserEventSubscriber::class, 'handleUserLogout']\n            );\n        }\n    }\n\nIf your event listener methods are defined within the subscriber itself, you may find it more convenient to return an array of events and method names from the subscriber's `subscribe` method. Laravel will automatically determine the subscriber's class name when registering the event listeners:\n\n    <?php\n\n    namespace App\\Listeners;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":634,"to":660}}}}],["1649",{"pageContent":"<?php\n\n    namespace App\\Listeners;\n\n    use Illuminate\\Auth\\Events\\Login;\n    use Illuminate\\Auth\\Events\\Logout;\n    use Illuminate\\Events\\Dispatcher;\n\n    class UserEventSubscriber\n    {\n        /**\n         * Handle user login events.\n         */\n        public function handleUserLogin(Login $event): void {}\n\n        /**\n         * Handle user logout events.\n         */\n        public function handleUserLogout(Logout $event): void {}\n\n        /**\n         * Register the listeners for the subscriber.\n         *\n         * @return array<string, string>\n         */\n        public function subscribe(Dispatcher $events): array\n        {\n            return [\n                Login::class => 'handleUserLogin',\n                Logout::class => 'handleUserLogout',\n            ];\n        }\n    }\n\n<a name=\"registering-event-subscribers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":660,"to":694}}}}],["1650",{"pageContent":"Registering Event Subscribers\n\nAfter writing the subscriber, you are ready to register it with the event dispatcher. You may register subscribers using the `$subscribe` property on the `EventServiceProvider`. For example, let's add the `UserEventSubscriber` to the list:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Listeners\\UserEventSubscriber;\n    use Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\n\n    class EventServiceProvider extends ServiceProvider\n    {\n        /**\n         * The event listener mappings for the application.\n         *\n         * @var array\n         */\n        protected $listen = [\n            // ...\n        ];\n\n        /**\n         * The subscriber classes to register.\n         *\n         * @var array\n         */\n        protected $subscribe = [\n            UserEventSubscriber::class,\n        ];\n    }\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":695,"to":727}}}}],["1651",{"pageContent":"Testing\n\nWhen testing code that dispatches events, you may wish to instruct Laravel to not actually execute the event's listeners, since the listener's code can be tested directly and separately of the code that dispatches the corresponding event. Of course, to test the listener itself, you may instantiate a listener instance and invoke the `handle` method directly in your test.\n\nUsing the `Event` facade's `fake` method, you may prevent listeners from executing, execute the code under test, and then assert which events were dispatched by your application using the `assertDispatched`, `assertNotDispatched`, and `assertNothingDispatched` methods:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use App\\Events\\OrderFailedToShip;\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Support\\Facades\\Event;\n    use Tests\\TestCase;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":728,"to":741}}}}],["1652",{"pageContent":"<?php\n\n    namespace Tests\\Feature;\n\n    use App\\Events\\OrderFailedToShip;\n    use App\\Events\\OrderShipped;\n    use Illuminate\\Support\\Facades\\Event;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * Test order shipping.\n         */\n        public function test_orders_can_be_shipped(): void\n        {\n            Event::fake();\n\n            // Perform order shipping...\n\n            // Assert that an event was dispatched...\n            Event::assertDispatched(OrderShipped::class);\n\n            // Assert an event was dispatched twice...\n            Event::assertDispatched(OrderShipped::class, 2);\n\n            // Assert an event was not dispatched...\n            Event::assertNotDispatched(OrderFailedToShip::class);\n\n            // Assert that no events were dispatched...\n            Event::assertNothingDispatched();\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":741,"to":773}}}}],["1653",{"pageContent":"// Assert that no events were dispatched...\n            Event::assertNothingDispatched();\n        }\n    }\n\nYou may pass a closure to the `assertDispatched` or `assertNotDispatched` methods in order to assert that an event was dispatched that passes a given \"truth test\". If at least one event was dispatched that passes the given truth test then the assertion will be successful:\n\n    Event::assertDispatched(function (OrderShipped $event) use ($order) {\n        return $event->order->id === $order->id;\n    });\n\nIf you would simply like to assert that an event listener is listening to a given event, you may use the `assertListening` method:\n\n    Event::assertListening(\n        OrderShipped::class,\n        SendShipmentNotification::class\n    );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":773,"to":789}}}}],["1654",{"pageContent":"Event::assertListening(\n        OrderShipped::class,\n        SendShipmentNotification::class\n    );\n\n> **Warning**\n> After calling `Event::fake()`, no event listeners will be executed. So, if your tests use model factories that rely on events, such as creating a UUID during a model's `creating` event, you should call `Event::fake()` **after** using your factories.\n\n<a name=\"faking-a-subset-of-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":789,"to":797}}}}],["1655",{"pageContent":"Faking A Subset Of Events\n\nIf you only want to fake event listeners for a specific set of events, you may pass them to the `fake` or `fakeFor` method:\n\n    /**\n     * Test order process.\n     */\n    public function test_orders_can_be_processed(): void\n    {\n        Event::fake([\n            OrderCreated::class,\n        ]);\n\n        $order = Order::factory()->create();\n\n        Event::assertDispatched(OrderCreated::class);\n\n        // Other events are dispatched as normal...\n        $order->update([...]);\n    }\n\nYou may fake all events except for a set of specified events using the `except` method:\n\n    Event::fake()->except([\n        OrderCreated::class,\n    ]);\n\n<a name=\"scoped-event-fakes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":798,"to":825}}}}],["1656",{"pageContent":"Scoped Event Fakes\n\nIf you only want to fake event listeners for a portion of your test, you may use the `fakeFor` method:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use App\\Events\\OrderCreated;\n    use App\\Models\\Order;\n    use Illuminate\\Support\\Facades\\Event;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * Test order process.\n         */\n        public function test_orders_can_be_processed(): void\n        {\n            $order = Event::fakeFor(function () {\n                $order = Order::factory()->create();\n\n                Event::assertDispatched(OrderCreated::class);\n\n                return $order;\n            });\n\n            // Events are dispatched as normal and observers will run ...\n            $order->update([...]);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/events.md","loc":{"lines":{"from":826,"to":857}}}}],["1657",{"pageContent":"# Facades\n\n- [Introduction](#introduction)\n- [When To Use Facades](#when-to-use-facades)\n    - [Facades Vs. Dependency Injection](#facades-vs-dependency-injection)\n    - [Facades Vs. Helper Functions](#facades-vs-helper-functions)\n- [How Facades Work](#how-facades-work)\n- [Real-Time Facades](#real-time-facades)\n- [Facade Class Reference](#facade-class-reference)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":1,"to":11}}}}],["1658",{"pageContent":"Introduction\n\nThroughout the Laravel documentation, you will see examples of code that interacts with Laravel's features via \"facades\". Facades provide a \"static\" interface to classes that are available in the application's [service container](/docs/{{version}}/container). Laravel ships with many facades which provide access to almost all of Laravel's features.\n\nLaravel facades serve as \"static proxies\" to underlying classes in the service container, providing the benefit of a terse, expressive syntax while maintaining more testability and flexibility than traditional static methods. It's perfectly fine if you don't totally understand how facades work - just go with the flow and continue learning about Laravel.\n\nAll of Laravel's facades are defined in the `Illuminate\\Support\\Facades` namespace. So, we can easily access a facade like so:\n\n    use Illuminate\\Support\\Facades\\Cache;\n    use Illuminate\\Support\\Facades\\Route;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":12,"to":21}}}}],["1659",{"pageContent":"use Illuminate\\Support\\Facades\\Cache;\n    use Illuminate\\Support\\Facades\\Route;\n\n    Route::get('/cache', function () {\n        return Cache::get('key');\n    });\n\nThroughout the Laravel documentation, many of the examples will use facades to demonstrate various features of the framework.\n\n<a name=\"helper-functions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":21,"to":30}}}}],["1660",{"pageContent":"Helper Functions\n\nTo complement facades, Laravel offers a variety of global \"helper functions\" that make it even easier to interact with common Laravel features. Some of the common helper functions you may interact with are `view`, `response`, `url`, `config`, and more. Each helper function offered by Laravel is documented with their corresponding feature; however, a complete list is available within the dedicated [helper documentation](/docs/{{version}}/helpers).\n\nFor example, instead of using the `Illuminate\\Support\\Facades\\Response` facade to generate a JSON response, we may simply use the `response` function. Because helper functions are globally available, you do not need to import any classes in order to use them:\n\n    use Illuminate\\Support\\Facades\\Response;\n\n    Route::get('/users', function () {\n        return Response::json([\n            // ...\n        ]);\n    });\n\n    Route::get('/users', function () {\n        return response()->json([\n            // ...\n        ]);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":31,"to":49}}}}],["1661",{"pageContent":"Route::get('/users', function () {\n        return response()->json([\n            // ...\n        ]);\n    });\n\n<a name=\"when-to-use-facades\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":49,"to":55}}}}],["1662",{"pageContent":"When To Use Facades\n\nFacades have many benefits. They provide a terse, memorable syntax that allows you to use Laravel's features without remembering long class names that must be injected or configured manually. Furthermore, because of their unique usage of PHP's dynamic methods, they are easy to test.\n\nHowever, some care must be taken when using facades. The primary danger of facades is class \"scope creep\". Since facades are so easy to use and do not require injection, it can be easy to let your classes continue to grow and use many facades in a single class. Using dependency injection, this potential is mitigated by the visual feedback a large constructor gives you that your class is growing too large. So, when using facades, pay special attention to the size of your class so that its scope of responsibility stays narrow. If your class is getting too large, consider splitting it into multiple smaller classes.\n\n<a name=\"facades-vs-dependency-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":56,"to":62}}}}],["1663",{"pageContent":"Facades Vs. Dependency Injection\n\nOne of the primary benefits of dependency injection is the ability to swap implementations of the injected class. This is useful during testing since you can inject a mock or stub and assert that various methods were called on the stub.\n\nTypically, it would not be possible to mock or stub a truly static class method. However, since facades use dynamic methods to proxy method calls to objects resolved from the service container, we actually can test facades just as we would test an injected class instance. For example, given the following route:\n\n    use Illuminate\\Support\\Facades\\Cache;\n\n    Route::get('/cache', function () {\n        return Cache::get('key');\n    });\n\nUsing Laravel's facade testing methods, we can write the following test to verify that the `Cache::get` method was called with the argument we expected:\n\n    use Illuminate\\Support\\Facades\\Cache;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":63,"to":77}}}}],["1664",{"pageContent":"Using Laravel's facade testing methods, we can write the following test to verify that the `Cache::get` method was called with the argument we expected:\n\n    use Illuminate\\Support\\Facades\\Cache;\n\n    /**\n     * A basic functional test example.\n     */\n    public function test_basic_example(): void\n    {\n        Cache::shouldReceive('get')\n             ->with('key')\n             ->andReturn('value');\n\n        $response = $this->get('/cache');\n\n        $response->assertSee('value');\n    }\n\n<a name=\"facades-vs-helper-functions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":77,"to":95}}}}],["1665",{"pageContent":"Facades Vs. Helper Functions\n\nIn addition to facades, Laravel includes a variety of \"helper\" functions which can perform common tasks like generating views, firing events, dispatching jobs, or sending HTTP responses. Many of these helper functions perform the same function as a corresponding facade. For example, this facade call and helper call are equivalent:\n\n    return Illuminate\\Support\\Facades\\View::make('profile');\n\n    return view('profile');\n\nThere is absolutely no practical difference between facades and helper functions. When using helper functions, you may still test them exactly as you would the corresponding facade. For example, given the following route:\n\n    Route::get('/cache', function () {\n        return cache('key');\n    });\n\nThe `cache` helper is going to call the `get` method on the class underlying the `Cache` facade. So, even though we are using the helper function, we can write the following test to verify that the method was called with the argument we expected:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":96,"to":110}}}}],["1666",{"pageContent":"use Illuminate\\Support\\Facades\\Cache;\n\n    /**\n     * A basic functional test example.\n     */\n    public function test_basic_example(): void\n    {\n        Cache::shouldReceive('get')\n             ->with('key')\n             ->andReturn('value');\n\n        $response = $this->get('/cache');\n\n        $response->assertSee('value');\n    }\n\n<a name=\"how-facades-work\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":112,"to":128}}}}],["1667",{"pageContent":"How Facades Work\n\nIn a Laravel application, a facade is a class that provides access to an object from the container. The machinery that makes this work is in the `Facade` class. Laravel's facades, and any custom facades you create, will extend the base `Illuminate\\Support\\Facades\\Facade` class.\n\nThe `Facade` base class makes use of the `__callStatic()` magic-method to defer calls from your facade to an object resolved from the container. In the example below, a call is made to the Laravel cache system. By glancing at this code, one might assume that the static `get` method is being called on the `Cache` class:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Support\\Facades\\Cache;\n    use Illuminate\\View\\View;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":129,"to":141}}}}],["1668",{"pageContent":"<?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Support\\Facades\\Cache;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show the profile for the given user.\n         */\n        public function showProfile(string $id): View\n        {\n            $user = Cache::get('user:'.$id);\n\n            return view('profile', ['user' => $user]);\n        }\n    }\n\nNotice that near the top of the file we are \"importing\" the `Cache` facade. This facade serves as a proxy for accessing the underlying implementation of the `Illuminate\\Contracts\\Cache\\Factory` interface. Any calls we make using the facade will be passed to the underlying instance of Laravel's cache service.\n\nIf we look at that `Illuminate\\Support\\Facades\\Cache` class, you'll see that there is no static method `get`:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":141,"to":164}}}}],["1669",{"pageContent":"If we look at that `Illuminate\\Support\\Facades\\Cache` class, you'll see that there is no static method `get`:\n\n    class Cache extends Facade\n    {\n        /**\n         * Get the registered name of the component.\n         */\n        protected static function getFacadeAccessor(): string\n        {\n            return 'cache';\n        }\n    }\n\nInstead, the `Cache` facade extends the base `Facade` class and defines the method `getFacadeAccessor()`. This method's job is to return the name of a service container binding. When a user references any static method on the `Cache` facade, Laravel resolves the `cache` binding from the [service container](/docs/{{version}}/container) and runs the requested method (in this case, `get`) against that object.\n\n<a name=\"real-time-facades\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":164,"to":179}}}}],["1670",{"pageContent":"Real-Time Facades\n\nUsing real-time facades, you may treat any class in your application as if it was a facade. To illustrate how this can be used, let's first examine some code that does not use real-time facades. For example, let's assume our `Podcast` model has a `publish` method. However, in order to publish the podcast, we need to inject a `Publisher` instance:\n\n    <?php\n\n    namespace App\\Models;\n\n    use App\\Contracts\\Publisher;\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Podcast extends Model\n    {\n        /**\n         * Publish the podcast.\n         */\n        public function publish(Publisher $publisher): void\n        {\n            $this->update(['publishing' => now()]);\n\n            $publisher->publish($this);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":180,"to":202}}}}],["1671",{"pageContent":"$publisher->publish($this);\n        }\n    }\n\nInjecting a publisher implementation into the method allows us to easily test the method in isolation since we can mock the injected publisher. However, it requires us to always pass a publisher instance each time we call the `publish` method. Using real-time facades, we can maintain the same testability while not being required to explicitly pass a `Publisher` instance. To generate a real-time facade, prefix the namespace of the imported class with `Facades`:\n\n    <?php\n\n    namespace App\\Models;\n\n    use App\\Contracts\\Publisher; // [tl! remove]\n    use Facades\\App\\Contracts\\Publisher; // [tl! add]\n    use Illuminate\\Database\\Eloquent\\Model;\n\n    class Podcast extends Model\n    {\n        /**\n         * Publish the podcast.\n         */\n        public function publish(Publisher $publisher): void // [tl! remove]\n        public function publish(): void // [tl! add]\n        {\n            $this->update(['publishing' => now()]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":202,"to":224}}}}],["1672",{"pageContent":"$publisher->publish($this); // [tl! remove]\n            Publisher::publish($this); // [tl! add]\n        }\n    }\n\nWhen the real-time facade is used, the publisher implementation will be resolved out of the service container using the portion of the interface or class name that appears after the `Facades` prefix. When testing, we can use Laravel's built-in facade testing helpers to mock this method call:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use App\\Models\\Podcast;\n    use Facades\\App\\Contracts\\Publisher;\n    use Illuminate\\Foundation\\Testing\\RefreshDatabase;\n    use Tests\\TestCase;\n\n    class PodcastTest extends TestCase\n    {\n        use RefreshDatabase;\n\n        /**\n         * A test example.\n         */\n        public function test_podcast_can_be_published(): void\n        {\n            $podcast = Podcast::factory()->create();\n\n            Publisher::shouldReceive('publish')->once()->with($podcast);\n\n            $podcast->publish();\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":226,"to":257}}}}],["1673",{"pageContent":"Publisher::shouldReceive('publish')->once()->with($podcast);\n\n            $podcast->publish();\n        }\n    }\n\n<a name=\"facade-class-reference\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":257,"to":263}}}}],["1674",{"pageContent":"Facade Class Reference\n\nBelow you will find every facade and its underlying class. This is a useful tool for quickly digging into the API documentation for a given facade root. The [service container binding](/docs/{{version}}/container) key is also included where applicable.\n\n<div class=\"overflow-auto\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":264,"to":268}}}}],["1675",{"pageContent":"Facade  |  Class  |  Service Container Binding\n------------- | ------------- | -------------\nApp  |  [Illuminate\\Foundation\\Application](https://laravel.com/api/{{version}}/Illuminate/Foundation/Application.html)  |  `app`\nArtisan  |  [Illuminate\\Contracts\\Console\\Kernel](https://laravel.com/api/{{version}}/Illuminate/Contracts/Console/Kernel.html)  |  `artisan`\nAuth  |  [Illuminate\\Auth\\AuthManager](https://laravel.com/api/{{version}}/Illuminate/Auth/AuthManager.html)  |  `auth`\nAuth (Instance)  |  [Illuminate\\Contracts\\Auth\\Guard](https://laravel.com/api/{{version}}/Illuminate/Contracts/Auth/Guard.html)  |  `auth.driver`\nBlade  |  [Illuminate\\View\\Compilers\\BladeCompiler](https://laravel.com/api/{{version}}/Illuminate/View/Compilers/BladeCompiler.html)  |  `blade.compiler`\nBroadcast  |  [Illuminate\\Contracts\\Broadcasting\\Factory](https://laravel.com/api/{{version}}/Illuminate/Contracts/Broadcasting/Factory.html)  |  &nbsp;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":270,"to":277}}}}],["1676",{"pageContent":"Broadcast  |  [Illuminate\\Contracts\\Broadcasting\\Factory](https://laravel.com/api/{{version}}/Illuminate/Contracts/Broadcasting/Factory.html)  |  &nbsp;\nBroadcast (Instance)  |  [Illuminate\\Contracts\\Broadcasting\\Broadcaster](https://laravel.com/api/{{version}}/Illuminate/Contracts/Broadcasting/Broadcaster.html)  |  &nbsp;\nBus  |  [Illuminate\\Contracts\\Bus\\Dispatcher](https://laravel.com/api/{{version}}/Illuminate/Contracts/Bus/Dispatcher.html)  |  &nbsp;\nCache  |  [Illuminate\\Cache\\CacheManager](https://laravel.com/api/{{version}}/Illuminate/Cache/CacheManager.html)  |  `cache`\nCache (Instance)  |  [Illuminate\\Cache\\Repository](https://laravel.com/api/{{version}}/Illuminate/Cache/Repository.html)  |  `cache.store`\nConfig  |  [Illuminate\\Config\\Repository](https://laravel.com/api/{{version}}/Illuminate/Config/Repository.html)  |  `config`\nCookie  |  [Illuminate\\Cookie\\CookieJar](https://laravel.com/api/{{version}}/Illuminate/Cookie/CookieJar.html)  |  `cookie`","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":277,"to":283}}}}],["1677",{"pageContent":"Cookie  |  [Illuminate\\Cookie\\CookieJar](https://laravel.com/api/{{version}}/Illuminate/Cookie/CookieJar.html)  |  `cookie`\nCrypt  |  [Illuminate\\Encryption\\Encrypter](https://laravel.com/api/{{version}}/Illuminate/Encryption/Encrypter.html)  |  `encrypter`\nDate  |  [Illuminate\\Support\\DateFactory](https://laravel.com/api/{{version}}/Illuminate/Support/DateFactory.html)  |  `date`\nDB  |  [Illuminate\\Database\\DatabaseManager](https://laravel.com/api/{{version}}/Illuminate/Database/DatabaseManager.html)  |  `db`\nDB (Instance)  |  [Illuminate\\Database\\Connection](https://laravel.com/api/{{version}}/Illuminate/Database/Connection.html)  |  `db.connection`\nEvent  |  [Illuminate\\Events\\Dispatcher](https://laravel.com/api/{{version}}/Illuminate/Events/Dispatcher.html)  |  `events`\nFile  |  [Illuminate\\Filesystem\\Filesystem](https://laravel.com/api/{{version}}/Illuminate/Filesystem/Filesystem.html)  |  `files`","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":283,"to":289}}}}],["1678",{"pageContent":"File  |  [Illuminate\\Filesystem\\Filesystem](https://laravel.com/api/{{version}}/Illuminate/Filesystem/Filesystem.html)  |  `files`\nGate  |  [Illuminate\\Contracts\\Auth\\Access\\Gate](https://laravel.com/api/{{version}}/Illuminate/Contracts/Auth/Access/Gate.html)  |  &nbsp;\nHash  |  [Illuminate\\Contracts\\Hashing\\Hasher](https://laravel.com/api/{{version}}/Illuminate/Contracts/Hashing/Hasher.html)  |  `hash`\nHttp  |  [Illuminate\\Http\\Client\\Factory](https://laravel.com/api/{{version}}/Illuminate/Http/Client/Factory.html)  |  &nbsp;\nLang  |  [Illuminate\\Translation\\Translator](https://laravel.com/api/{{version}}/Illuminate/Translation/Translator.html)  |  `translator`\nLog  |  [Illuminate\\Log\\LogManager](https://laravel.com/api/{{version}}/Illuminate/Log/LogManager.html)  |  `log`\nMail  |  [Illuminate\\Mail\\Mailer](https://laravel.com/api/{{version}}/Illuminate/Mail/Mailer.html)  |  `mailer`","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":289,"to":295}}}}],["1679",{"pageContent":"Mail  |  [Illuminate\\Mail\\Mailer](https://laravel.com/api/{{version}}/Illuminate/Mail/Mailer.html)  |  `mailer`\nNotification  |  [Illuminate\\Notifications\\ChannelManager](https://laravel.com/api/{{version}}/Illuminate/Notifications/ChannelManager.html)  |  &nbsp;\nPassword  |  [Illuminate\\Auth\\Passwords\\PasswordBrokerManager](https://laravel.com/api/{{version}}/Illuminate/Auth/Passwords/PasswordBrokerManager.html)  |  `auth.password`\nPassword (Instance)  |  [Illuminate\\Auth\\Passwords\\PasswordBroker](https://laravel.com/api/{{version}}/Illuminate/Auth/Passwords/PasswordBroker.html)  |  `auth.password.broker`\nPipeline (Instance)  |  [Illuminate\\Pipeline\\Pipeline](https://laravel.com/api/{{version}}/Illuminate/Pipeline/Pipeline.html)  |  &nbsp;\nProcess  |  [Illuminate\\Process\\Factory](https://laravel.com/api/{{version}}/Illuminate/Process/Factory.html)  |  &nbsp;\nQueue  |  [Illuminate\\Queue\\QueueManager](https://laravel.com/api/{{version}}/Illuminate/Queue/QueueManager.html)  |  `queue`","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":295,"to":301}}}}],["1680",{"pageContent":"Queue  |  [Illuminate\\Queue\\QueueManager](https://laravel.com/api/{{version}}/Illuminate/Queue/QueueManager.html)  |  `queue`\nQueue (Instance)  |  [Illuminate\\Contracts\\Queue\\Queue](https://laravel.com/api/{{version}}/Illuminate/Contracts/Queue/Queue.html)  |  `queue.connection`\nQueue (Base Class)  |  [Illuminate\\Queue\\Queue](https://laravel.com/api/{{version}}/Illuminate/Queue/Queue.html)  |  &nbsp;\nRedirect  |  [Illuminate\\Routing\\Redirector](https://laravel.com/api/{{version}}/Illuminate/Routing/Redirector.html)  |  `redirect`\nRedis  |  [Illuminate\\Redis\\RedisManager](https://laravel.com/api/{{version}}/Illuminate/Redis/RedisManager.html)  |  `redis`\nRedis (Instance)  |  [Illuminate\\Redis\\Connections\\Connection](https://laravel.com/api/{{version}}/Illuminate/Redis/Connections/Connection.html)  |  `redis.connection`\nRequest  |  [Illuminate\\Http\\Request](https://laravel.com/api/{{version}}/Illuminate/Http/Request.html)  |  `request`","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":301,"to":307}}}}],["1681",{"pageContent":"Request  |  [Illuminate\\Http\\Request](https://laravel.com/api/{{version}}/Illuminate/Http/Request.html)  |  `request`\nResponse  |  [Illuminate\\Contracts\\Routing\\ResponseFactory](https://laravel.com/api/{{version}}/Illuminate/Contracts/Routing/ResponseFactory.html)  |  &nbsp;\nResponse (Instance)  |  [Illuminate\\Http\\Response](https://laravel.com/api/{{version}}/Illuminate/Http/Response.html)  |  &nbsp;\nRoute  |  [Illuminate\\Routing\\Router](https://laravel.com/api/{{version}}/Illuminate/Routing/Router.html)  |  `router`\nSchema  |  [Illuminate\\Database\\Schema\\Builder](https://laravel.com/api/{{version}}/Illuminate/Database/Schema/Builder.html)  |  &nbsp;\nSession  |  [Illuminate\\Session\\SessionManager](https://laravel.com/api/{{version}}/Illuminate/Session/SessionManager.html)  |  `session`\nSession (Instance)  |  [Illuminate\\Session\\Store](https://laravel.com/api/{{version}}/Illuminate/Session/Store.html)  |  `session.store`","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":307,"to":313}}}}],["1682",{"pageContent":"Session (Instance)  |  [Illuminate\\Session\\Store](https://laravel.com/api/{{version}}/Illuminate/Session/Store.html)  |  `session.store`\nStorage  |  [Illuminate\\Filesystem\\FilesystemManager](https://laravel.com/api/{{version}}/Illuminate/Filesystem/FilesystemManager.html)  |  `filesystem`\nStorage (Instance)  |  [Illuminate\\Contracts\\Filesystem\\Filesystem](https://laravel.com/api/{{version}}/Illuminate/Contracts/Filesystem/Filesystem.html)  |  `filesystem.disk`\nURL  |  [Illuminate\\Routing\\UrlGenerator](https://laravel.com/api/{{version}}/Illuminate/Routing/UrlGenerator.html)  |  `url`\nValidator  |  [Illuminate\\Validation\\Factory](https://laravel.com/api/{{version}}/Illuminate/Validation/Factory.html)  |  `validator`\nValidator (Instance)  |  [Illuminate\\Validation\\Validator](https://laravel.com/api/{{version}}/Illuminate/Validation/Validator.html)  |  &nbsp;\nView  |  [Illuminate\\View\\Factory](https://laravel.com/api/{{version}}/Illuminate/View/Factory.html)  |  `view`","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":313,"to":319}}}}],["1683",{"pageContent":"View  |  [Illuminate\\View\\Factory](https://laravel.com/api/{{version}}/Illuminate/View/Factory.html)  |  `view`\nView (Instance)  |  [Illuminate\\View\\View](https://laravel.com/api/{{version}}/Illuminate/View/View.html)  |  &nbsp;\nVite  |  [Illuminate\\Foundation\\Vite](https://laravel.com/api/{{version}}/Illuminate/Foundation/Vite.html)  |  &nbsp;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":319,"to":321}}}}],["1684",{"pageContent":"</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/facades.md","loc":{"lines":{"from":323,"to":323}}}}],["1685",{"pageContent":"# File Storage","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":1,"to":1}}}}],["1686",{"pageContent":"- [Introduction](#introduction)\n- [Configuration](#configuration)\n    - [The Local Driver](#the-local-driver)\n    - [The Public Disk](#the-public-disk)\n    - [Driver Prerequisites](#driver-prerequisites)\n    - [Scoped & Read-Only Filesystems](#scoped-and-read-only-filesystems)\n    - [Amazon S3 Compatible Filesystems](#amazon-s3-compatible-filesystems)\n- [Obtaining Disk Instances](#obtaining-disk-instances)\n    - [On-Demand Disks](#on-demand-disks)\n- [Retrieving Files](#retrieving-files)\n    - [Downloading Files](#downloading-files)\n    - [File URLs](#file-urls)\n    - [Temporary URLs](#temporary-urls)\n    - [File Metadata](#file-metadata)\n- [Storing Files](#storing-files)\n    - [Prepending & Appending To Files](#prepending-appending-to-files)\n    - [Copying & Moving Files](#copying-moving-files)\n    - [Automatic Streaming](#automatic-streaming)\n    - [File Uploads](#file-uploads)\n    - [File Visibility](#file-visibility)\n- [Deleting Files](#deleting-files)\n- [Directories](#directories)\n- [Testing](#testing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":3,"to":25}}}}],["1687",{"pageContent":"- [File Uploads](#file-uploads)\n    - [File Visibility](#file-visibility)\n- [Deleting Files](#deleting-files)\n- [Directories](#directories)\n- [Testing](#testing)\n- [Custom Filesystems](#custom-filesystems)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":25,"to":30}}}}],["1688",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":32,"to":32}}}}],["1689",{"pageContent":"Introduction\n\nLaravel provides a powerful filesystem abstraction thanks to the wonderful [Flysystem](https://github.com/thephpleague/flysystem) PHP package by Frank de Jonge. The Laravel Flysystem integration provides simple drivers for working with local filesystems, SFTP, and Amazon S3. Even better, it's amazingly simple to switch between these storage options between your local development machine and production server as the API remains the same for each system.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":33,"to":37}}}}],["1690",{"pageContent":"Configuration\n\nLaravel's filesystem configuration file is located at `config/filesystems.php`. Within this file, you may configure all of your filesystem \"disks\". Each disk represents a particular storage driver and storage location. Example configurations for each supported driver are included in the configuration file so you can modify the configuration to reflect your storage preferences and credentials.\n\nThe `local` driver interacts with files stored locally on the server running the Laravel application while the `s3` driver is used to write to Amazon's S3 cloud storage service.\n\n> **Note**\n> You may configure as many disks as you like and may even have multiple disks that use the same driver.\n\n<a name=\"the-local-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":38,"to":47}}}}],["1691",{"pageContent":"The Local Driver\n\nWhen using the `local` driver, all file operations are relative to the `root` directory defined in your `filesystems` configuration file. By default, this value is set to the `storage/app` directory. Therefore, the following method would write to `storage/app/example.txt`:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    Storage::disk('local')->put('example.txt', 'Contents');\n\n<a name=\"the-public-disk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":48,"to":56}}}}],["1692",{"pageContent":"The Public Disk\n\nThe `public` disk included in your application's `filesystems` configuration file is intended for files that are going to be publicly accessible. By default, the `public` disk uses the `local` driver and stores its files in `storage/app/public`.\n\nTo make these files accessible from the web, you should create a symbolic link from `public/storage` to `storage/app/public`. Utilizing this folder convention will keep your publicly accessible files in one directory that can be easily shared across deployments when using zero down-time deployment systems like [Envoyer](https://envoyer.io).\n\nTo create the symbolic link, you may use the `storage:link` Artisan command:\n\n```shell\nphp artisan storage:link","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":57,"to":66}}}}],["1693",{"pageContent":"Once a file has been stored and the symbolic link has been created, you can create a URL to the files using the `asset` helper:\n\n    echo asset('storage/file.txt');\n\nYou may configure additional symbolic links in your `filesystems` configuration file. Each of the configured links will be created when you run the `storage:link` command:\n\n    'links' => [\n        public_path('storage') => storage_path('app/public'),\n        public_path('images') => storage_path('app/images'),\n    ],\n\n<a name=\"driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":69,"to":80}}}}],["1694",{"pageContent":"Driver Prerequisites\n\n<a name=\"s3-driver-configuration\"></a>\n#### S3 Driver Configuration\n\nBefore using the S3 driver, you will need to install the Flysystem S3 package via the Composer package manager:\n\n```shell\ncomposer require league/flysystem-aws-s3-v3 \"^3.0\" --with-all-dependencies\n```\n\nThe S3 driver configuration information is located in your `config/filesystems.php` configuration file. This file contains an example configuration array for an S3 driver. You are free to modify this array with your own S3 configuration and credentials. For convenience, these environment variables match the naming convention used by the AWS CLI.\n\n<a name=\"ftp-driver-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":81,"to":94}}}}],["1695",{"pageContent":"FTP Driver Configuration\n\nBefore using the FTP driver, you will need to install the Flysystem FTP package via the Composer package manager:\n\n```shell\ncomposer require league/flysystem-ftp \"^3.0\"\n```\n\nLaravel's Flysystem integrations work great with FTP; however, a sample configuration is not included with the framework's default `filesystems.php` configuration file. If you need to configure an FTP filesystem, you may use the configuration example below:\n\n    'ftp' => [\n        'driver' => 'ftp',\n        'host' => env('FTP_HOST'),\n        'username' => env('FTP_USERNAME'),\n        'password' => env('FTP_PASSWORD'),\n\n        // Optional FTP Settings...\n        // 'port' => env('FTP_PORT', 21),\n        // 'root' => env('FTP_ROOT'),\n        // 'passive' => true,\n        // 'ssl' => true,\n        // 'timeout' => 30,\n    ],\n\n<a name=\"sftp-driver-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":95,"to":119}}}}],["1696",{"pageContent":"SFTP Driver Configuration\n\nBefore using the SFTP driver, you will need to install the Flysystem SFTP package via the Composer package manager:\n\n```shell\ncomposer require league/flysystem-sftp-v3 \"^3.0\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":120,"to":125}}}}],["1697",{"pageContent":"Laravel's Flysystem integrations work great with SFTP; however, a sample configuration is not included with the framework's default `filesystems.php` configuration file. If you need to configure an SFTP filesystem, you may use the configuration example below:\n\n    'sftp' => [\n        'driver' => 'sftp',\n        'host' => env('SFTP_HOST'),\n\n        // Settings for basic authentication...\n        'username' => env('SFTP_USERNAME'),\n        'password' => env('SFTP_PASSWORD'),\n\n        // Settings for SSH key based authentication with encryption password...\n        'privateKey' => env('SFTP_PRIVATE_KEY'),\n        'passphrase' => env('SFTP_PASSPHRASE'),\n\n        // Settings for file / directory permissions...\n        'visibility' => 'private', // `private` = 0600, `public` = 0644\n        'directory_visibility' => 'private', // `private` = 0700, `public` = 0755","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":128,"to":144}}}}],["1698",{"pageContent":"// Optional SFTP Settings...\n        // 'hostFingerprint' => env('SFTP_HOST_FINGERPRINT'),\n        // 'maxTries' => 4,\n        // 'passphrase' => env('SFTP_PASSPHRASE'),\n        // 'port' => env('SFTP_PORT', 22),\n        // 'root' => env('SFTP_ROOT', ''),\n        // 'timeout' => 30,\n        // 'useAgent' => true,\n    ],\n\n<a name=\"scoped-and-read-only-filesystems\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":146,"to":156}}}}],["1699",{"pageContent":"Scoped & Read-Only Filesystems\n\nScoped disks allow you to define a filesystem where all paths are automatically prefixed with a given path prefix. Before creating a scoped filesystem disk, you will need to install an additional Flysystem package via the Composer package manager:\n\n```shell\ncomposer require league/flysystem-path-prefixing \"^3.0\"\n```\n\nYou may create a path scoped instance of any existing filesystem disk by defining a disk that utilizes the `scoped` driver. For example, you may create a disk which scopes your existing `s3` disk to a specific path prefix, and then every file operation using your scoped disk will utilize the specified prefix:\n\n```php\n's3-videos' => [\n    'driver' => 'scoped',\n    'disk' => 's3',\n    'prefix' => 'path/to/videos',\n],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":157,"to":172}}}}],["1700",{"pageContent":"\"Read-only\" disks allow you to create filesystem disks that do not allow write operations. Before using the `read-only` configuration option, you will need to install an additional Flysystem package via the Composer package manager:\n\n```shell\ncomposer require league/flysystem-read-only \"^3.0\"\n```\n\nNext, you may include the `read-only` configuration option in one or more of your disk's configuration arrays:\n\n```php\n's3-videos' => [\n    'driver' => 's3',\n    // ...\n    'read-only' => true,\n],\n```\n\n<a name=\"amazon-s3-compatible-filesystems\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":175,"to":191}}}}],["1701",{"pageContent":"Amazon S3 Compatible Filesystems\n\nBy default, your application's `filesystems` configuration file contains a disk configuration for the `s3` disk. In addition to using this disk to interact with Amazon S3, you may use it to interact with any S3 compatible file storage service such as [MinIO](https://github.com/minio/minio) or [DigitalOcean Spaces](https://www.digitalocean.com/products/spaces/).\n\nTypically, after updating the disk's credentials to match the credentials of the service you are planning to use, you only need to update the value of the `endpoint` configuration option. This option's value is typically defined via the `AWS_ENDPOINT` environment variable:\n\n    'endpoint' => env('AWS_ENDPOINT', 'https://minio:9000'),\n\n<a name=\"minio\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":192,"to":200}}}}],["1702",{"pageContent":"MinIO\n\nIn order for Laravel's Flysystem integration to generate proper URLs when using MinIO, you should define the `AWS_URL` environment variable so that it matches your application's local URL and includes the bucket name in the URL path:\n\n```ini\nAWS_URL=http://localhost:9000/local\n```\n\n> **Warning**  \n> Generating temporary storage URLs via the `temporaryUrl` method is not supported when using MinIO.\n\n<a name=\"obtaining-disk-instances\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":201,"to":212}}}}],["1703",{"pageContent":"Obtaining Disk Instances\n\nThe `Storage` facade may be used to interact with any of your configured disks. For example, you may use the `put` method on the facade to store an avatar on the default disk. If you call methods on the `Storage` facade without first calling the `disk` method, the method will automatically be passed to the default disk:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    Storage::put('avatars/1', $content);\n\nIf your application interacts with multiple disks, you may use the `disk` method on the `Storage` facade to work with files on a particular disk:\n\n    Storage::disk('s3')->put('avatars/1', $content);\n\n<a name=\"on-demand-disks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":213,"to":225}}}}],["1704",{"pageContent":"On-Demand Disks\n\nSometimes you may wish to create a disk at runtime using a given configuration without that configuration actually being present in your application's `filesystems` configuration file. To accomplish this, you may pass a configuration array to the `Storage` facade's `build` method:\n\n```php\nuse Illuminate\\Support\\Facades\\Storage;\n\n$disk = Storage::build([\n    'driver' => 'local',\n    'root' => '/path/to/root',\n]);\n\n$disk->put('image.jpg', $content);\n```\n\n<a name=\"retrieving-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":226,"to":241}}}}],["1705",{"pageContent":"Retrieving Files\n\nThe `get` method may be used to retrieve the contents of a file. The raw string contents of the file will be returned by the method. Remember, all file paths should be specified relative to the disk's \"root\" location:\n\n    $contents = Storage::get('file.jpg');\n\nIf the file you are retrieving contains JSON, you may use the `json` method to retrieve the file and decode its contents:\n\n    $orders = Storage::json('orders.json');\n\nThe `exists` method may be used to determine if a file exists on the disk:\n\n    if (Storage::disk('s3')->exists('file.jpg')) {\n        // ...\n    }\n\nThe `missing` method may be used to determine if a file is missing from the disk:\n\n    if (Storage::disk('s3')->missing('file.jpg')) {\n        // ...\n    }\n\n<a name=\"downloading-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":242,"to":264}}}}],["1706",{"pageContent":"Downloading Files\n\nThe `download` method may be used to generate a response that forces the user's browser to download the file at the given path. The `download` method accepts a filename as the second argument to the method, which will determine the filename that is seen by the user downloading the file. Finally, you may pass an array of HTTP headers as the third argument to the method:\n\n    return Storage::download('file.jpg');\n\n    return Storage::download('file.jpg', $name, $headers);\n\n<a name=\"file-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":265,"to":273}}}}],["1707",{"pageContent":"File URLs\n\nYou may use the `url` method to get the URL for a given file. If you are using the `local` driver, this will typically just prepend `/storage` to the given path and return a relative URL to the file. If you are using the `s3` driver, the fully qualified remote URL will be returned:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    $url = Storage::url('file.jpg');\n\nWhen using the `local` driver, all files that should be publicly accessible should be placed in the `storage/app/public` directory. Furthermore, you should [create a symbolic link](#the-public-disk) at `public/storage` which points to the `storage/app/public` directory.\n\n> **Warning**  \n> When using the `local` driver, the return value of `url` is not URL encoded. For this reason, we recommend always storing your files using names that will create valid URLs.\n\n<a name=\"url-host-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":274,"to":287}}}}],["1708",{"pageContent":"URL Host Customization\n\nIf you would like to pre-define the host for URLs generated using the `Storage` facade, you may add a `url` option to the disk's configuration array:\n\n    'public' => [\n        'driver' => 'local',\n        'root' => storage_path('app/public'),\n        'url' => env('APP_URL').'/storage',\n        'visibility' => 'public',\n    ],\n\n<a name=\"temporary-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":288,"to":299}}}}],["1709",{"pageContent":"Temporary URLs\n\nUsing the `temporaryUrl` method, you may create temporary URLs to files stored using the `s3` driver. This method accepts a path and a `DateTime` instance specifying when the URL should expire:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    $url = Storage::temporaryUrl(\n        'file.jpg', now()->addMinutes(5)\n    );\n\nIf you need to specify additional [S3 request parameters](https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html#RESTObjectGET-requests), you may pass the array of request parameters as the third argument to the `temporaryUrl` method:\n\n    $url = Storage::temporaryUrl(\n        'file.jpg',\n        now()->addMinutes(5),\n        [\n            'ResponseContentType' => 'application/octet-stream',\n            'ResponseContentDisposition' => 'attachment; filename=file2.jpg',\n        ]\n    );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":300,"to":319}}}}],["1710",{"pageContent":"If you need to customize how temporary URLs are created for a specific storage disk, you can use the `buildTemporaryUrlsUsing` method. For example, this can be useful if you have a controller that allows you to download files stored via a disk that doesn't typically support temporary URLs. Usually, this method should be called from the `boot` method of a service provider:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use DateTime;\n    use Illuminate\\Support\\Facades\\Storage;\n    use Illuminate\\Support\\Facades\\URL;\n    use Illuminate\\Support\\ServiceProvider;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":321,"to":330}}}}],["1711",{"pageContent":"<?php\n\n    namespace App\\Providers;\n\n    use DateTime;\n    use Illuminate\\Support\\Facades\\Storage;\n    use Illuminate\\Support\\Facades\\URL;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Storage::disk('local')->buildTemporaryUrlsUsing(\n                function (string $path, DateTime $expiration, array $options) {\n                    return URL::temporarySignedRoute(\n                        'files.download',\n                        $expiration,\n                        array_merge($options, ['path' => $path])\n                    );\n                }\n            );\n        }\n    }\n\n<a name=\"temporary-upload-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":330,"to":358}}}}],["1712",{"pageContent":"Temporary Upload URLs\n\n> **Warning**\n> The ability to generate temporary upload URLs is only supported by the `s3` driver.\n\nIf you need to generate a temporary URL that can be used to upload a file directly from your client-side application, you may use the `temporaryUploadUrl` method. This method accepts a path and a `DateTime` instance specifying when the URL should expire. The `temporaryUploadUrl` method returns an associative array which may be destructured into the upload URL and the headers that should be included with the upload request:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    ['url' => $url, 'headers' => $headers] = Storage::temporaryUploadUrl(\n        'file.jpg', now()->addMinutes(5)\n    );\n\nThis method is primarily useful in serverless environments that require the client-side application to directly upload files to a cloud storage system such as Amazon S3.\n\n<a name=\"file-metadata\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":359,"to":374}}}}],["1713",{"pageContent":"File Metadata\n\nIn addition to reading and writing files, Laravel can also provide information about the files themselves. For example, the `size` method may be used to get the size of a file in bytes:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    $size = Storage::size('file.jpg');\n\nThe `lastModified` method returns the UNIX timestamp of the last time the file was modified:\n\n    $time = Storage::lastModified('file.jpg');\n\nThe MIME type of a given file may be obtained via the `mimeType` method:\n\n    $mime = Storage::mimeType('file.jpg');\n\n<a name=\"file-paths\"></a>\n#### File Paths\n\nYou may use the `path` method to get the path for a given file. If you are using the `local` driver, this will return the absolute path to the file. If you are using the `s3` driver, this method will return the relative path to the file in the S3 bucket:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    $path = Storage::path('file.jpg');\n\n<a name=\"storing-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":375,"to":400}}}}],["1714",{"pageContent":"Storing Files\n\nThe `put` method may be used to store file contents on a disk. You may also pass a PHP `resource` to the `put` method, which will use Flysystem's underlying stream support. Remember, all file paths should be specified relative to the \"root\" location configured for the disk:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    Storage::put('file.jpg', $contents);\n\n    Storage::put('file.jpg', $resource);\n\n<a name=\"failed-writes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":401,"to":411}}}}],["1715",{"pageContent":"Failed Writes\n\nIf the `put` method (or other \"write\" operations) is unable to write the file to disk, `false` will be returned:\n\n    if (! Storage::put('file.jpg', $contents)) {\n        // The file could not be written to disk...\n    }\n\nIf you wish, you may define the `throw` option within your filesystem disk's configuration array. When this option is defined as `true`, \"write\" methods such as `put` will throw an instance of `League\\Flysystem\\UnableToWriteFile` when write operations fail:\n\n    'public' => [\n        'driver' => 'local',\n        // ...\n        'throw' => true,\n    ],\n\n<a name=\"prepending-appending-to-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":412,"to":428}}}}],["1716",{"pageContent":"Prepending & Appending To Files\n\nThe `prepend` and `append` methods allow you to write to the beginning or end of a file:\n\n    Storage::prepend('file.log', 'Prepended Text');\n\n    Storage::append('file.log', 'Appended Text');\n\n<a name=\"copying-moving-files\"></a>\n### Copying & Moving Files\n\nThe `copy` method may be used to copy an existing file to a new location on the disk, while the `move` method may be used to rename or move an existing file to a new location:\n\n    Storage::copy('old/file.jpg', 'new/file.jpg');\n\n    Storage::move('old/file.jpg', 'new/file.jpg');\n\n<a name=\"automatic-streaming\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":429,"to":446}}}}],["1717",{"pageContent":"Automatic Streaming\n\nStreaming files to storage offers significantly reduced memory usage. If you would like Laravel to automatically manage streaming a given file to your storage location, you may use the `putFile` or `putFileAs` method. This method accepts either an `Illuminate\\Http\\File` or `Illuminate\\Http\\UploadedFile` instance and will automatically stream the file to your desired location:\n\n    use Illuminate\\Http\\File;\n    use Illuminate\\Support\\Facades\\Storage;\n\n    // Automatically generate a unique ID for filename...\n    $path = Storage::putFile('photos', new File('/path/to/photo'));\n\n    // Manually specify a filename...\n    $path = Storage::putFileAs('photos', new File('/path/to/photo'), 'photo.jpg');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":447,"to":458}}}}],["1718",{"pageContent":"// Manually specify a filename...\n    $path = Storage::putFileAs('photos', new File('/path/to/photo'), 'photo.jpg');\n\nThere are a few important things to note about the `putFile` method. Note that we only specified a directory name and not a filename. By default, the `putFile` method will generate a unique ID to serve as the filename. The file's extension will be determined by examining the file's MIME type. The path to the file will be returned by the `putFile` method so you can store the path, including the generated filename, in your database.\n\nThe `putFile` and `putFileAs` methods also accept an argument to specify the \"visibility\" of the stored file. This is particularly useful if you are storing the file on a cloud disk such as Amazon S3 and would like the file to be publicly accessible via generated URLs:\n\n    Storage::putFile('photos', new File('/path/to/photo'), 'public');\n\n<a name=\"file-uploads\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":458,"to":467}}}}],["1719",{"pageContent":"File Uploads\n\nIn web applications, one of the most common use-cases for storing files is storing user uploaded files such as photos and documents. Laravel makes it very easy to store uploaded files using the `store` method on an uploaded file instance. Call the `store` method with the path at which you wish to store the uploaded file:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Http\\Request;\n\n    class UserAvatarController extends Controller\n    {\n        /**\n         * Update the avatar for the user.\n         */\n        public function update(Request $request): string\n        {\n            $path = $request->file('avatar')->store('avatars');\n\n            return $path;\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":468,"to":490}}}}],["1720",{"pageContent":"return $path;\n        }\n    }\n\nThere are a few important things to note about this example. Note that we only specified a directory name, not a filename. By default, the `store` method will generate a unique ID to serve as the filename. The file's extension will be determined by examining the file's MIME type. The path to the file will be returned by the `store` method so you can store the path, including the generated filename, in your database.\n\nYou may also call the `putFile` method on the `Storage` facade to perform the same file storage operation as the example above:\n\n    $path = Storage::putFile('avatars', $request->file('avatar'));\n\n<a name=\"specifying-a-file-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":490,"to":500}}}}],["1721",{"pageContent":"Specifying A File Name\n\nIf you do not want a filename to be automatically assigned to your stored file, you may use the `storeAs` method, which receives the path, the filename, and the (optional) disk as its arguments:\n\n    $path = $request->file('avatar')->storeAs(\n        'avatars', $request->user()->id\n    );\n\nYou may also use the `putFileAs` method on the `Storage` facade, which will perform the same file storage operation as the example above:\n\n    $path = Storage::putFileAs(\n        'avatars', $request->file('avatar'), $request->user()->id\n    );\n\n> **Warning**  \n> Unprintable and invalid unicode characters will automatically be removed from file paths. Therefore, you may wish to sanitize your file paths before passing them to Laravel's file storage methods. File paths are normalized using the `League\\Flysystem\\WhitespacePathNormalizer::normalizePath` method.\n\n<a name=\"specifying-a-disk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":501,"to":518}}}}],["1722",{"pageContent":"Specifying A Disk\n\nBy default, this uploaded file's `store` method will use your default disk. If you would like to specify another disk, pass the disk name as the second argument to the `store` method:\n\n    $path = $request->file('avatar')->store(\n        'avatars/'.$request->user()->id, 's3'\n    );\n\nIf you are using the `storeAs` method, you may pass the disk name as the third argument to the method:\n\n    $path = $request->file('avatar')->storeAs(\n        'avatars',\n        $request->user()->id,\n        's3'\n    );\n\n<a name=\"other-uploaded-file-information\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":519,"to":535}}}}],["1723",{"pageContent":"Other Uploaded File Information\n\nIf you would like to get the original name and extension of the uploaded file, you may do so using the `getClientOriginalName` and `getClientOriginalExtension` methods:\n\n    $file = $request->file('avatar');\n\n    $name = $file->getClientOriginalName();\n    $extension = $file->getClientOriginalExtension();\n\nHowever, keep in mind that the `getClientOriginalName` and `getClientOriginalExtension` methods are considered unsafe, as the file name and extension may be tampered with by a malicious user. For this reason, you should typically prefer the `hashName` and `extension` methods to get a name and an extension for the given file upload:\n\n    $file = $request->file('avatar');\n\n    $name = $file->hashName(); // Generate a unique, random name...\n    $extension = $file->extension(); // Determine the file's extension based on the file's MIME type...\n\n<a name=\"file-visibility\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":536,"to":552}}}}],["1724",{"pageContent":"File Visibility\n\nIn Laravel's Flysystem integration, \"visibility\" is an abstraction of file permissions across multiple platforms. Files may either be declared `public` or `private`. When a file is declared `public`, you are indicating that the file should generally be accessible to others. For example, when using the S3 driver, you may retrieve URLs for `public` files.\n\nYou can set the visibility when writing the file via the `put` method:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    Storage::put('file.jpg', $contents, 'public');\n\nIf the file has already been stored, its visibility can be retrieved and set via the `getVisibility` and `setVisibility` methods:\n\n    $visibility = Storage::getVisibility('file.jpg');\n\n    Storage::setVisibility('file.jpg', 'public');\n\nWhen interacting with uploaded files, you may use the `storePublicly` and `storePubliclyAs` methods to store the uploaded file with `public` visibility:\n\n    $path = $request->file('avatar')->storePublicly('avatars', 's3');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":553,"to":571}}}}],["1725",{"pageContent":"$path = $request->file('avatar')->storePublicly('avatars', 's3');\n\n    $path = $request->file('avatar')->storePubliclyAs(\n        'avatars',\n        $request->user()->id,\n        's3'\n    );\n\n<a name=\"local-files-and-visibility\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":571,"to":579}}}}],["1726",{"pageContent":"Local Files & Visibility\n\nWhen using the `local` driver, `public` [visibility](#file-visibility) translates to `0755` permissions for directories and `0644` permissions for files. You can modify the permissions mappings in your application's `filesystems` configuration file:\n\n    'local' => [\n        'driver' => 'local',\n        'root' => storage_path('app'),\n        'permissions' => [\n            'file' => [\n                'public' => 0644,\n                'private' => 0600,\n            ],\n            'dir' => [\n                'public' => 0755,\n                'private' => 0700,\n            ],\n        ],\n    ],\n\n<a name=\"deleting-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":580,"to":599}}}}],["1727",{"pageContent":"Deleting Files\n\nThe `delete` method accepts a single filename or an array of files to delete:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    Storage::delete('file.jpg');\n\n    Storage::delete(['file.jpg', 'file2.jpg']);\n\nIf necessary, you may specify the disk that the file should be deleted from:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    Storage::disk('s3')->delete('path/file.jpg');\n\n<a name=\"directories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":600,"to":616}}}}],["1728",{"pageContent":"Directories\n\n<a name=\"get-all-files-within-a-directory\"></a>\n#### Get All Files Within A Directory\n\nThe `files` method returns an array of all of the files in a given directory. If you would like to retrieve a list of all files within a given directory including all subdirectories, you may use the `allFiles` method:\n\n    use Illuminate\\Support\\Facades\\Storage;\n\n    $files = Storage::files($directory);\n\n    $files = Storage::allFiles($directory);\n\n<a name=\"get-all-directories-within-a-directory\"></a>\n#### Get All Directories Within A Directory\n\nThe `directories` method returns an array of all the directories within a given directory. Additionally, you may use the `allDirectories` method to get a list of all directories within a given directory and all of its subdirectories:\n\n    $directories = Storage::directories($directory);\n\n    $directories = Storage::allDirectories($directory);\n\n<a name=\"create-a-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":617,"to":639}}}}],["1729",{"pageContent":"Create A Directory\n\nThe `makeDirectory` method will create the given directory, including any needed subdirectories:\n\n    Storage::makeDirectory($directory);\n\n<a name=\"delete-a-directory\"></a>\n#### Delete A Directory\n\nFinally, the `deleteDirectory` method may be used to remove a directory and all of its files:\n\n    Storage::deleteDirectory($directory);\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":640,"to":653}}}}],["1730",{"pageContent":"Testing\n\nThe `Storage` facade's `fake` method allows you to easily generate a fake disk that, combined with the file generation utilities of the `Illuminate\\Http\\UploadedFile` class, greatly simplifies the testing of file uploads. For example:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Illuminate\\Http\\UploadedFile;\n    use Illuminate\\Support\\Facades\\Storage;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_albums_can_be_uploaded(): void\n        {\n            Storage::fake('photos');\n\n            $response = $this->json('POST', '/photos', [\n                UploadedFile::fake()->image('photo1.jpg'),\n                UploadedFile::fake()->image('photo2.jpg')\n            ]);\n\n            // Assert one or more files were stored...\n            Storage::disk('photos')->assertExists('photo1.jpg');\n            Storage::disk('photos')->assertExists(['photo1.jpg', 'photo2.jpg']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":654,"to":679}}}}],["1731",{"pageContent":"// Assert one or more files were stored...\n            Storage::disk('photos')->assertExists('photo1.jpg');\n            Storage::disk('photos')->assertExists(['photo1.jpg', 'photo2.jpg']);\n\n            // Assert one or more files were not stored...\n            Storage::disk('photos')->assertMissing('missing.jpg');\n            Storage::disk('photos')->assertMissing(['missing.jpg', 'non-existing.jpg']);\n\n            // Assert that a given directory is empty...\n            Storage::disk('photos')->assertDirectoryEmpty('/wallpapers');\n        }\n    }\n\nBy default, the `fake` method will delete all files in its temporary directory. If you would like to keep these files, you may use the \"persistentFake\" method instead. For more information on testing file uploads, you may consult the [HTTP testing documentation's information on file uploads](/docs/{{version}}/http-tests#testing-file-uploads).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":679,"to":692}}}}],["1732",{"pageContent":"> **Warning**\n> The `image` method requires the [GD extension](https://www.php.net/manual/en/book.image.php).\n\n<a name=\"custom-filesystems\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":694,"to":697}}}}],["1733",{"pageContent":"Custom Filesystems\n\nLaravel's Flysystem integration provides support for several \"drivers\" out of the box; however, Flysystem is not limited to these and has adapters for many other storage systems. You can create a custom driver if you want to use one of these additional adapters in your Laravel application.\n\nIn order to define a custom filesystem you will need a Flysystem adapter. Let's add a community maintained Dropbox adapter to our project:\n\n```shell\ncomposer require spatie/flysystem-dropbox","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":698,"to":705}}}}],["1734",{"pageContent":"Next, you can register the driver within the `boot` method of one of your application's [service providers](/docs/{{version}}/providers). To accomplish this, you should use the `extend` method of the `Storage` facade:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Filesystem\\FilesystemAdapter;\n    use Illuminate\\Support\\Facades\\Storage;\n    use Illuminate\\Support\\ServiceProvider;\n    use League\\Flysystem\\Filesystem;\n    use Spatie\\Dropbox\\Client as DropboxClient;\n    use Spatie\\FlysystemDropbox\\DropboxAdapter;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":708,"to":730}}}}],["1735",{"pageContent":"/**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Storage::extend('dropbox', function (Application $app, array $config) {\n                $adapter = new DropboxAdapter(new DropboxClient(\n                    $config['authorization_token']\n                ));\n\n                return new FilesystemAdapter(\n                    new Filesystem($adapter, $config),\n                    $adapter,\n                    $config\n                );\n            });\n        }\n    }\n\nThe first argument of the `extend` method is the name of the driver and the second is a closure that receives the `$app` and `$config` variables. The closure must return an instance of `Illuminate\\Filesystem\\FilesystemAdapter`. The `$config` variable contains the values defined in `config/filesystems.php` for the specified disk.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":732,"to":751}}}}],["1736",{"pageContent":"Once you have created and registered the extension's service provider, you may use the `dropbox` driver in your `config/filesystems.php` configuration file.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/filesystem.md","loc":{"lines":{"from":753,"to":753}}}}],["1737",{"pageContent":"# Laravel Folio\n\n- [Introduction](#introduction)\n- [Installation](#installation)\n    - [Page Paths / URIs](#page-paths-uris)\n    - [Subdomain Routing](#subdomain-routing)\n- [Creating Routes](#creating-routes)\n    - [Nested Routes](#nested-routes)\n    - [Index Routes](#index-routes)\n- [Route Parameters](#route-parameters)\n- [Route Model Binding](#route-model-binding)\n    - [Soft Deleted Models](#soft-deleted-models)\n- [Render Hooks](#render-hooks)\n- [Named Routes](#named-routes)\n- [Middleware](#middleware)\n- [Route Caching](#route-caching)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":1,"to":18}}}}],["1738",{"pageContent":"Introduction\n\n[Laravel Folio](https://github.com/laravel/folio) is a powerful page based router designed to simplify routing in Laravel applications. With Laravel Folio, generating a route becomes as effortless as creating a Blade template within your application's `resources/views/pages` directory.\n\nFor example, to create a page that is accessible at the `/greeting` URL, just create a `greeting.blade.php` file in your application's `resources/views/pages` directory:\n\n```php\n<div>\n    Hello World\n</div>\n```\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":19,"to":31}}}}],["1739",{"pageContent":"Installation\n\nTo get started, install Folio into your project using the Composer package manager:\n\n```bash\ncomposer require laravel/folio\n```\n\nAfter installing Folio, you may execute the `folio:install` Artisan command, which will install Folio's service provider into your application. This service provider registers the directory where Folio will search for routes / pages:\n\n```bash\nphp artisan folio:install\n```\n\n<a name=\"page-paths-uris\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":32,"to":46}}}}],["1740",{"pageContent":"Page Paths / URIs\n\nBy default, Folio serves pages from your application's `resources/views/pages` directory, but you may customize these directories in your Folio service provider's `boot` method.\n\nFor example, sometimes it may be convenient to specify multiple Folio paths in the same Laravel application. You may wish to have a separate directory of Folio pages for your application's \"admin\" area, while using another directory for the rest of your application's pages.\n\nYou may accomplish this using the `Folio::path` and `Folio::uri` methods. The `path` method registers a directory that Folio will scan for pages when routing incoming HTTP requests, while the `uri` method specifies the \"base URI\" for that directory of pages:\n\n```php\nuse Laravel\\Folio\\Folio;\n\nFolio::path(resource_path('views/pages/guest'))->uri('/');\n\nFolio::path(resource_path('views/pages/admin'))\n    ->uri('/admin')\n    ->middleware([\n        '*' => [\n            'auth',\n            'verified',","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":47,"to":65}}}}],["1741",{"pageContent":"Folio::path(resource_path('views/pages/admin'))\n    ->uri('/admin')\n    ->middleware([\n        '*' => [\n            'auth',\n            'verified',\n\n            // ...\n        ],\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":65,"to":74}}}}],["1742",{"pageContent":"<a name=\"subdomain-routing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":77,"to":77}}}}],["1743",{"pageContent":"Subdomain Routing\n\nYou may also route to pages based on the incoming request's subdomain. For example, you may wish to route requests from `admin.example.com` to a different page directory than the rest of your Folio pages. You may accomplish this by invoking the `domain` method after invoking the `Folio::path` method:\n\n```php\nuse Laravel\\Folio\\Folio;\n\nFolio::domain('admin.example.com')\n    ->path(resource_path('views/pages/admin'));\n```\n\nThe `domain` method also allows you to capture parts of the domain or subdomain as parameters. These parameters will be injected into your page template:\n\n```php\nuse Laravel\\Folio\\Folio;\n\nFolio::domain('{account}.example.com')\n    ->path(resource_path('views/pages/admin'));\n```\n\n<a name=\"creating-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":78,"to":98}}}}],["1744",{"pageContent":"Creating Routes\n\nYou may create a Folio route by placing a Blade template in any of your Folio mounted directories. By default, Folio mounts the `resources/views/pages` directory, but you may customize these directories in your Folio service provider's `boot` method.\n\nOnce a Blade template has been placed in a Folio mounted directory, you may immediately access it via your browser. For example, a page placed in `pages/schedule.blade.php` may be accessed in your browser at `http://example.com/schedule`.\n\nTo quickly view a list of all of your Folio pages / routes, you may invoke the `folio:list` Artisan command:\n\n```bash\nphp artisan folio:list\n```\n\n<a name=\"nested-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":99,"to":111}}}}],["1745",{"pageContent":"Nested Routes\n\nYou may create a nested route by creating one or more directories within one of Folio's directories. For instance, to create a page that is accessible via `/user/profile`, create a `profile.blade.php` template within the `pages/user` directory:\n\n```bash\nphp artisan make:folio user/profile\n\n# pages/user/profile.blade.php → /user/profile\n```\n\n<a name=\"index-routes\"></a>\n### Index Routes\n\nSometimes, you may wish to make a given page the \"index\" of a directory. By placing an `index.blade.php` template within a Folio directory, any requests to the root of that directory will be routed to that page:\n\n```bash\nphp artisan make:folio index\n# pages/index.blade.php → /\n\nphp artisan make:folio users/index\n# pages/users/index.blade.php → /users\n```\n\n<a name=\"route-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":112,"to":135}}}}],["1746",{"pageContent":"Route Parameters\n\nOften, you will need to have segments of the incoming request's URL injected into your page so that you can interact with them. For example, you may need to access the \"ID\" of the user whose profile is being displayed. To accomplish this, you may encapsulate a segment of the page's filename in square brackets:\n\n```bash\nphp artisan make:folio \"users/[id]\"\n\n# pages/users/[id].blade.php → /users/1\n```\n\nCaptured segments can be accessed as variables within your Blade template:\n\n```html\n<div>\n    User {{ $id }}\n</div>\n```\n\nTo capture multiple segments, you can prefix the encapsulated segment with three dots `...`:\n\n```bash\nphp artisan make:folio \"users/[...ids]\"\n\n# pages/users/[...ids].blade.php → /users/1/2/3\n```\n\nWhen capturing multiple segments, the captured segments will be injected into the page as an array:\n\n```html\n<ul>\n    @foreach ($ids as $id)\n        <li>User {{ $id }}</li>\n    @endforeach\n</ul>\n```\n\n<a name=\"route-model-binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":136,"to":172}}}}],["1747",{"pageContent":"Route Model Binding\n\nIf a wildcard segment of your page template's filename corresponds one of your application's Eloquent models, Folio will automatically take advantage of Laravel's route model binding capabilities and attempt to inject the resolved model instance into your page:\n\n```bash\nphp artisan make:folio \"users/[User]\"\n\n# pages/users/[User].blade.php → /users/1\n```\n\nCaptured models can be accessed as variables within your Blade template. The model's variable name will be converted to \"camel case\":\n\n```html\n<div>\n    User {{ $user->id }}\n</div>\n```\n\n#### Customizing The Key\n\nSometimes you may wish to resolve bound Eloquent models using a column other than `id`. To do so, you may specify the column in the page's filename. For example, a page with the filename `[Post:slug].blade.php` will attempt to resolve the bound model via the `slug` column instead of the `id` column.\n\nOn Windows, you should use `-` to separate the model name from the key: `[Post-slug].blade.php`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":173,"to":195}}}}],["1748",{"pageContent":"Model Location\n\nBy default, Folio will search for your model within your application's `app/Models` directory. However, if needed, you may specify the fully-qualified model class name in your template's filename:\n\n```bash\nphp artisan make:folio \"users/[.App.Models.User]\"\n\n# pages/users/[.App.Models.User].blade.php → /users/1\n```\n\n<a name=\"soft-deleted-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":197,"to":207}}}}],["1749",{"pageContent":"Soft Deleted Models\n\nBy default, models that have been soft deleted are not retrieved when resolving implicit model bindings. However, if you wish, you can instruct Folio to retrieve soft deleted models by invoking the `withTrashed` function within the page's template:\n\n```php\n<?php\n\nuse function Laravel\\Folio\\{withTrashed};\n\nwithTrashed();\n\n?>\n\n<div>\n    User {{ $user->id }}\n</div>\n```\n\n<a name=\"render-hooks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":208,"to":226}}}}],["1750",{"pageContent":"Render Hooks\n\nBy default, Folio will return the content of the page's Blade template as the response to the incoming request. However, you may customize the response by invoking the `render` function within the page's template.\n\nThe `render` function accepts a closure which will receive the `View` instance being rendered by Folio, allowing you to add additional data to the view or customize the entire response. In addition to receiving the `View` instance, any additional route parameters or model bindings will also be provided to the `render` closure:\n\n```php\n<?php\n\nuse App\\Models\\Post;\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\View\\View;\n\nuse function Laravel\\Folio\\render;\n\nrender(function (View $view, Post $post) {\n    if (! Auth::user()->can('view', $post)) {\n        return response('Unauthorized', 403);\n    }\n\n    return $view->with('photos', $post->author->photos);\n}); ?>\n\n<div>\n    {{ $post->content }}\n</div>\n\n<div>\n    This author has also taken {{ count($photos) }} photos.\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":227,"to":256}}}}],["1751",{"pageContent":"<a name=\"named-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":259,"to":259}}}}],["1752",{"pageContent":"Named Routes\n\nYou may specify a name for a given page's route using the `name` function:\n\n```php\n<?php\n\nuse function Laravel\\Folio\\name;\n\nname('users.index');\n```\n\nJust like Laravel's named routes, you may use the `route` function to generate URLs to Folio pages that have been assigned a name:\n\n```php\n<a href=\"{{ route('users.index') }}\">\n    All Users\n</a>\n```\n\nIf the page has parameters, you may simply pass their values to the `route` function:\n\n```php\nroute('users.show', ['user' => $user]);\n```\n\n<a name=\"middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":260,"to":286}}}}],["1753",{"pageContent":"Middleware\n\nYou can apply middleware to a specific page by invoking the `middleware` function within the page's template:\n\n```php\n<?php\n\nuse function Laravel\\Folio\\{middleware};\n\nmiddleware(['auth', 'verified']);\n\n?>\n\n<div>\n    Dashboard\n</div>\n```\n\nOr, to assign middleware to a group of pages, you may chain the `middleware` method after invoking the `Folio::path` method.\n\nTo specify which pages the middleware should be applied to, the array of middleware may be keyed using the corresponding URL patterns of the pages they should be applied to. The `*` character may be utilized as a wildcard character:\n\n```php\nuse Laravel\\Folio\\Folio;\n\nFolio::path(resource_path('views/pages'))->middleware([\n    'admin/*' => [\n        'auth',\n        'verified',\n\n        // ...\n    ],\n]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":287,"to":319}}}}],["1754",{"pageContent":"You may include closures in the array of middleware to define inline, anonymous middleware:\n\n```php\nuse Closure;\nuse Illuminate\\Http\\Request;\nuse Laravel\\Folio\\Folio;\n\nFolio::path(resource_path('views/pages'))->middleware([\n    'admin/*' => [\n        'auth',\n        'verified',\n\n        function (Request $request, Closure $next) {\n            // ...\n\n            return $next($request);\n        },\n    ],\n]);\n```\n\n<a name=\"route-caching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":322,"to":343}}}}],["1755",{"pageContent":"Route Caching\n\nWhen using Folio, you should always take advantage of [Laravel's route caching capabilities](/docs/{{version}}/routing#route-caching). Folio listens for the `route:cache` Artisan command to ensure that Folio page definitions and route names are properly cached for maximum performance.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/folio.md","loc":{"lines":{"from":344,"to":346}}}}],["1756",{"pageContent":"# Laravel Fortify","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":1,"to":1}}}}],["1757",{"pageContent":"- [Introduction](#introduction)\n    - [What Is Fortify?](#what-is-fortify)\n    - [When Should I Use Fortify?](#when-should-i-use-fortify)\n- [Installation](#installation)\n    - [The Fortify Service Provider](#the-fortify-service-provider)\n    - [Fortify Features](#fortify-features)\n    - [Disabling Views](#disabling-views)\n- [Authentication](#authentication)\n    - [Customizing User Authentication](#customizing-user-authentication)\n    - [Customizing The Authentication Pipeline](#customizing-the-authentication-pipeline)\n    - [Customizing Redirects](#customizing-authentication-redirects)\n- [Two Factor Authentication](#two-factor-authentication)\n    - [Enabling Two Factor Authentication](#enabling-two-factor-authentication)\n    - [Authenticating With Two Factor Authentication](#authenticating-with-two-factor-authentication)\n    - [Disabling Two Factor Authentication](#disabling-two-factor-authentication)\n- [Registration](#registration)\n    - [Customizing Registration](#customizing-registration)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":3,"to":19}}}}],["1758",{"pageContent":"- [Disabling Two Factor Authentication](#disabling-two-factor-authentication)\n- [Registration](#registration)\n    - [Customizing Registration](#customizing-registration)\n- [Password Reset](#password-reset)\n    - [Requesting A Password Reset Link](#requesting-a-password-reset-link)\n    - [Resetting The Password](#resetting-the-password)\n    - [Customizing Password Resets](#customizing-password-resets)\n- [Email Verification](#email-verification)\n    - [Protecting Routes](#protecting-routes)\n- [Password Confirmation](#password-confirmation)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":19,"to":28}}}}],["1759",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":30,"to":30}}}}],["1760",{"pageContent":"Introduction\n\n[Laravel Fortify](https://github.com/laravel/fortify) is a frontend agnostic authentication backend implementation for Laravel. Fortify registers the routes and controllers needed to implement all of Laravel's authentication features, including login, registration, password reset, email verification, and more. After installing Fortify, you may run the `route:list` Artisan command to see the routes that Fortify has registered.\n\nSince Fortify does not provide its own user interface, it is meant to be paired with your own user interface which makes requests to the routes it registers. We will discuss exactly how to make requests to these routes in the remainder of this documentation.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":31,"to":35}}}}],["1761",{"pageContent":"> **Note**  \n> Remember, Fortify is a package that is meant to give you a head start implementing Laravel's authentication features. **You are not required to use it.** You are always free to manually interact with Laravel's authentication services by following the documentation available in the [authentication](/docs/{{version}}/authentication), [password reset](/docs/{{version}}/passwords), and [email verification](/docs/{{version}}/verification) documentation.\n\n<a name=\"what-is-fortify\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":37,"to":40}}}}],["1762",{"pageContent":"What Is Fortify?\n\nAs mentioned previously, Laravel Fortify is a frontend agnostic authentication backend implementation for Laravel. Fortify registers the routes and controllers needed to implement all of Laravel's authentication features, including login, registration, password reset, email verification, and more.\n\n**You are not required to use Fortify in order to use Laravel's authentication features.** You are always free to manually interact with Laravel's authentication services by following the documentation available in the [authentication](/docs/{{version}}/authentication), [password reset](/docs/{{version}}/passwords), and [email verification](/docs/{{version}}/verification) documentation.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":41,"to":45}}}}],["1763",{"pageContent":"If you are new to Laravel, you may wish to explore the [Laravel Breeze](/docs/{{version}}/starter-kits) application starter kit before attempting to use Laravel Fortify. Laravel Breeze provides an authentication scaffolding for your application that includes a user interface built with [Tailwind CSS](https://tailwindcss.com). Unlike Fortify, Breeze publishes its routes and controllers directly into your application. This allows you to study and get comfortable with Laravel's authentication features before allowing Laravel Fortify to implement these features for you.\n\nLaravel Fortify essentially takes the routes and controllers of Laravel Breeze and offers them as a package that does not include a user interface. This allows you to still quickly scaffold the backend implementation of your application's authentication layer without being tied to any particular frontend opinions.\n\n<a name=\"when-should-i-use-fortify\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":47,"to":51}}}}],["1764",{"pageContent":"When Should I Use Fortify?\n\nYou may be wondering when it is appropriate to use Laravel Fortify. First, if you are using one of Laravel's [application starter kits](/docs/{{version}}/starter-kits), you do not need to install Laravel Fortify since all of Laravel's application starter kits already provide a full authentication implementation.\n\nIf you are not using an application starter kit and your application needs authentication features, you have two options: manually implement your application's authentication features or use Laravel Fortify to provide the backend implementation of these features.\n\nIf you choose to install Fortify, your user interface will make requests to Fortify's authentication routes that are detailed in this documentation in order to authenticate and register users.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":52,"to":58}}}}],["1765",{"pageContent":"If you choose to install Fortify, your user interface will make requests to Fortify's authentication routes that are detailed in this documentation in order to authenticate and register users.\n\nIf you choose to manually interact with Laravel's authentication services instead of using Fortify, you may do so by following the documentation available in the [authentication](/docs/{{version}}/authentication), [password reset](/docs/{{version}}/passwords), and [email verification](/docs/{{version}}/verification) documentation.\n\n<a name=\"laravel-fortify-and-laravel-sanctum\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":58,"to":62}}}}],["1766",{"pageContent":"Laravel Fortify & Laravel Sanctum\n\nSome developers become confused regarding the difference between [Laravel Sanctum](/docs/{{version}}/sanctum) and Laravel Fortify. Because the two packages solve two different but related problems, Laravel Fortify and Laravel Sanctum are not mutually exclusive or competing packages.\n\nLaravel Sanctum is only concerned with managing API tokens and authenticating existing users using session cookies or tokens. Sanctum does not provide any routes that handle user registration, password reset, etc.\n\nIf you are attempting to manually build the authentication layer for an application that offers an API or serves as the backend for a single-page application, it is entirely possible that you will utilize both Laravel Fortify (for user registration, password reset, etc.) and Laravel Sanctum (API token management, session authentication).\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":63,"to":71}}}}],["1767",{"pageContent":"Installation\n\nTo get started, install Fortify using the Composer package manager:\n\n```shell\ncomposer require laravel/fortify\n```\n\nNext, publish Fortify's resources using the `vendor:publish` command:\n\n```shell\nphp artisan vendor:publish --provider=\"Laravel\\Fortify\\FortifyServiceProvider\"\n```\n\nThis command will publish Fortify's actions to your `app/Actions` directory, which will be created if it does not exist. In addition, the `FortifyServiceProvider`, configuration file, and all necessary database migrations will be published.\n\nNext, you should migrate your database:\n\n```shell\nphp artisan migrate\n```\n\n<a name=\"the-fortify-service-provider\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":72,"to":94}}}}],["1768",{"pageContent":"The Fortify Service Provider\n\nThe `vendor:publish` command discussed above will also publish the `App\\Providers\\FortifyServiceProvider` class. You should ensure this class is registered within the `providers` array of your application's `config/app.php` configuration file.\n\nThe Fortify service provider registers the actions that Fortify published and instructs Fortify to use them when their respective tasks are executed by Fortify.\n\n<a name=\"fortify-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":95,"to":101}}}}],["1769",{"pageContent":"Fortify Features\n\nThe `fortify` configuration file contains a `features` configuration array. This array defines which backend routes / features Fortify will expose by default. If you are not using Fortify in combination with [Laravel Jetstream](https://jetstream.laravel.com), we recommend that you only enable the following features, which are the basic authentication features provided by most Laravel applications:\n\n```php\n'features' => [\n    Features::registration(),\n    Features::resetPasswords(),\n    Features::emailVerification(),\n],\n```\n\n<a name=\"disabling-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":102,"to":114}}}}],["1770",{"pageContent":"Disabling Views\n\nBy default, Fortify defines routes that are intended to return views, such as a login screen or registration screen. However, if you are building a JavaScript driven single-page application, you may not need these routes. For that reason, you may disable these routes entirely by setting the `views` configuration value within your application's `config/fortify.php` configuration file to `false`:\n\n```php\n'views' => false,\n```\n\n<a name=\"disabling-views-and-password-reset\"></a>\n#### Disabling Views & Password Reset\n\nIf you choose to disable Fortify's views and you will be implementing password reset features for your application, you should still define a route named `password.reset` that is responsible for displaying your application's \"reset password\" view. This is necessary because Laravel's `Illuminate\\Auth\\Notifications\\ResetPassword` notification will generate the password reset URL via the `password.reset` named route.\n\n<a name=\"authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":115,"to":128}}}}],["1771",{"pageContent":"Authentication\n\nTo get started, we need to instruct Fortify how to return our \"login\" view. Remember, Fortify is a headless authentication library. If you would like a frontend implementation of Laravel's authentication features that are already completed for you, you should use an [application starter kit](/docs/{{version}}/starter-kits).\n\nAll of the authentication view's rendering logic may be customized using the appropriate methods available via the `Laravel\\Fortify\\Fortify` class. Typically, you should call this method from the `boot` method of your application's `App\\Providers\\FortifyServiceProvider` class. Fortify will take care of defining the `/login` route that returns this view:\n\n    use Laravel\\Fortify\\Fortify;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Fortify::loginView(function () {\n            return view('auth.login');\n        });\n\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":129,"to":147}}}}],["1772",{"pageContent":"// ...\n    }\n\nYour login template should include a form that makes a POST request to `/login`. The `/login` endpoint expects a string `email` / `username` and a `password`. The name of the email / username field should match the `username` value within the `config/fortify.php` configuration file. In addition, a boolean `remember` field may be provided to indicate that the user would like to use the \"remember me\" functionality provided by Laravel.\n\nIf the login attempt is successful, Fortify will redirect you to the URI configured via the `home` configuration option within your application's `fortify` configuration file. If the login request was an XHR request, a 200 HTTP response will be returned.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":147,"to":152}}}}],["1773",{"pageContent":"If the request was not successful, the user will be redirected back to the login screen and the validation errors will be available to you via the shared `$errors` [Blade template variable](/docs/{{version}}/validation#quick-displaying-the-validation-errors). Or, in the case of an XHR request, the validation errors will be returned with the 422 HTTP response.\n\n<a name=\"customizing-user-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":154,"to":156}}}}],["1774",{"pageContent":"Customizing User Authentication\n\nFortify will automatically retrieve and authenticate the user based on the provided credentials and the authentication guard that is configured for your application. However, you may sometimes wish to have full customization over how login credentials are authenticated and users are retrieved. Thankfully, Fortify allows you to easily accomplish this using the `Fortify::authenticateUsing` method.\n\nThis method accepts a closure which receives the incoming HTTP request. The closure is responsible for validating the login credentials attached to the request and returning the associated user instance. If the credentials are invalid or no user can be found, `null` or `false` should be returned by the closure. Typically, this method should be called from the `boot` method of your `FortifyServiceProvider`:\n\n```php\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Hash;\nuse Laravel\\Fortify\\Fortify;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":157,"to":167}}}}],["1775",{"pageContent":"```php\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Hash;\nuse Laravel\\Fortify\\Fortify;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Fortify::authenticateUsing(function (Request $request) {\n        $user = User::where('email', $request->email)->first();\n\n        if ($user &&\n            Hash::check($request->password, $user->password)) {\n            return $user;\n        }\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":167,"to":188}}}}],["1776",{"pageContent":"<a name=\"authentication-guard\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":191,"to":191}}}}],["1777",{"pageContent":"Authentication Guard\n\nYou may customize the authentication guard used by Fortify within your application's `fortify` configuration file. However, you should ensure that the configured guard is an implementation of `Illuminate\\Contracts\\Auth\\StatefulGuard`. If you are attempting to use Laravel Fortify to authenticate an SPA, you should use Laravel's default `web` guard in combination with [Laravel Sanctum](https://laravel.com/docs/sanctum).\n\n<a name=\"customizing-the-authentication-pipeline\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":192,"to":196}}}}],["1778",{"pageContent":"Customizing The Authentication Pipeline\n\nLaravel Fortify authenticates login requests through a pipeline of invokable classes. If you would like, you may define a custom pipeline of classes that login requests should be piped through. Each class should have an `__invoke` method which receives the incoming `Illuminate\\Http\\Request` instance and, like [middleware](/docs/{{version}}/middleware), a `$next` variable that is invoked in order to pass the request to the next class in the pipeline.\n\nTo define your custom pipeline, you may use the `Fortify::authenticateThrough` method. This method accepts a closure which should return the array of classes to pipe the login request through. Typically, this method should be called from the `boot` method of your `App\\Providers\\FortifyServiceProvider` class.\n\nThe example below contains the default pipeline definition that you may use as a starting point when making your own modifications:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":197,"to":203}}}}],["1779",{"pageContent":"The example below contains the default pipeline definition that you may use as a starting point when making your own modifications:\n\n```php\nuse Laravel\\Fortify\\Actions\\AttemptToAuthenticate;\nuse Laravel\\Fortify\\Actions\\EnsureLoginIsNotThrottled;\nuse Laravel\\Fortify\\Actions\\PrepareAuthenticatedSession;\nuse Laravel\\Fortify\\Actions\\RedirectIfTwoFactorAuthenticatable;\nuse Laravel\\Fortify\\Fortify;\nuse Illuminate\\Http\\Request;\n\nFortify::authenticateThrough(function (Request $request) {\n    return array_filter([\n            config('fortify.limiters.login') ? null : EnsureLoginIsNotThrottled::class,\n            Features::enabled(Features::twoFactorAuthentication()) ? RedirectIfTwoFactorAuthenticatable::class : null,\n            AttemptToAuthenticate::class,\n            PrepareAuthenticatedSession::class,\n    ]);\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":203,"to":220}}}}],["1780",{"pageContent":"<a name=\"customizing-authentication-redirects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":223,"to":223}}}}],["1781",{"pageContent":"Customizing Redirects\n\nIf the login attempt is successful, Fortify will redirect you to the URI configured via the `home` configuration option within your application's `fortify` configuration file. If the login request was an XHR request, a 200 HTTP response will be returned. After a user logs out of the application, the user will be redirected to the `/` URI.\n\nIf you need advanced customization of this behavior, you may bind implementations of the `LoginResponse` and `LogoutResponse` contracts into the Laravel [service container](/docs/{{version}}/container). Typically, this should be done within the `register` method of your application's `App\\Providers\\FortifyServiceProvider` class:\n\n```php\nuse Laravel\\Fortify\\Contracts\\LogoutResponse;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":224,"to":231}}}}],["1782",{"pageContent":"```php\nuse Laravel\\Fortify\\Contracts\\LogoutResponse;\n\n/**\n * Register any application services.\n */\npublic function register(): void\n{\n    $this->app->instance(LogoutResponse::class, new class implements LogoutResponse {\n        public function toResponse($request)\n        {\n            return redirect('/');\n        }\n    });\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":231,"to":245}}}}],["1783",{"pageContent":"<a name=\"two-factor-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":248,"to":248}}}}],["1784",{"pageContent":"Two Factor Authentication\n\nWhen Fortify's two factor authentication feature is enabled, the user is required to input a six digit numeric token during the authentication process. This token is generated using a time-based one-time password (TOTP) that can be retrieved from any TOTP compatible mobile authentication application such as Google Authenticator.\n\nBefore getting started, you should first ensure that your application's `App\\Models\\User` model uses the `Laravel\\Fortify\\TwoFactorAuthenticatable` trait:\n\n```php\n<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Foundation\\Auth\\User as Authenticatable;\nuse Illuminate\\Notifications\\Notifiable;\nuse Laravel\\Fortify\\TwoFactorAuthenticatable;\n\nclass User extends Authenticatable\n{\n    use Notifiable, TwoFactorAuthenticatable;\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":249,"to":267}}}}],["1785",{"pageContent":"Next, you should build a screen within your application where users can manage their two factor authentication settings. This screen should allow the user to enable and disable two factor authentication, as well as regenerate their two factor authentication recovery codes.\n\n> By default, the `features` array of the `fortify` configuration file instructs Fortify's two factor authentication settings to require password confirmation before modification. Therefore, your application should implement Fortify's [password confirmation](#password-confirmation) feature before continuing.\n\n<a name=\"enabling-two-factor-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":270,"to":274}}}}],["1786",{"pageContent":"Enabling Two Factor Authentication\n\nTo begin enabling two factor authentication, your application should make a POST request to the `/user/two-factor-authentication` endpoint defined by Fortify. If the request is successful, the user will be redirected back to the previous URL and the `status` session variable will be set to `two-factor-authentication-enabled`. You may detect this `status` session variable within your templates to display the appropriate success message. If the request was an XHR request, `200` HTTP response will be returned.\n\nAfter choosing to enable two factor authentication, the user must still \"confirm\" their two factor authentication configuration by providing a valid two factor authentication code. So, your \"success\" message should instruct the user that two factor authentication confirmation is still required:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":275,"to":279}}}}],["1787",{"pageContent":"```html\n@if (session('status') == 'two-factor-authentication-enabled')\n    <div class=\"mb-4 font-medium text-sm\">\n        Please finish configuring two factor authentication below.\n    </div>\n@endif","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":281,"to":286}}}}],["1788",{"pageContent":"Next, you should display the two factor authentication QR code for the user to scan into their authenticator application. If you are using Blade to render your application's frontend, you may retrieve the QR code SVG using the `twoFactorQrCodeSvg` method available on the user instance:\n\n```php\n$request->user()->twoFactorQrCodeSvg();\n```\n\nIf you are building a JavaScript powered frontend, you may make an XHR GET request to the `/user/two-factor-qr-code` endpoint to retrieve the user's two factor authentication QR code. This endpoint will return a JSON object containing an `svg` key.\n\n<a name=\"confirming-two-factor-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":289,"to":297}}}}],["1789",{"pageContent":"Confirming Two Factor Authentication\n\nIn addition to displaying the user's two factor authentication QR code, you should provide a text input where the user can supply a valid authentication code to \"confirm\" their two factor authentication configuration. This code should be provided to the Laravel application via a POST request to the `/user/confirmed-two-factor-authentication` endpoint defined by Fortify.\n\nIf the request is successful, the user will be redirected back to the previous URL and the `status` session variable will be set to `two-factor-authentication-confirmed`:\n\n```html\n@if (session('status') == 'two-factor-authentication-confirmed')\n    <div class=\"mb-4 font-medium text-sm\">\n        Two factor authentication confirmed and enabled successfully.\n    </div>\n@endif\n```\n\nIf the request to the two factor authentication confirmation endpoint was made via an XHR request, a `200` HTTP response will be returned.\n\n<a name=\"displaying-the-recovery-codes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":298,"to":314}}}}],["1790",{"pageContent":"Displaying The Recovery Codes\n\nYou should also display the user's two factor recovery codes. These recovery codes allow the user to authenticate if they lose access to their mobile device. If you are using Blade to render your application's frontend, you may access the recovery codes via the authenticated user instance:\n\n```php\n(array) $request->user()->recoveryCodes()\n```\n\nIf you are building a JavaScript powered frontend, you may make an XHR GET request to the `/user/two-factor-recovery-codes` endpoint. This endpoint will return a JSON array containing the user's recovery codes.\n\nTo regenerate the user's recovery codes, your application should make a POST request to the `/user/two-factor-recovery-codes` endpoint.\n\n<a name=\"authenticating-with-two-factor-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":315,"to":327}}}}],["1791",{"pageContent":"Authenticating With Two Factor Authentication\n\nDuring the authentication process, Fortify will automatically redirect the user to your application's two factor authentication challenge screen. However, if your application is making an XHR login request, the JSON response returned after a successful authentication attempt will contain a JSON object that has a `two_factor` boolean property. You should inspect this value to know whether you should redirect to your application's two factor authentication challenge screen.\n\nTo begin implementing two factor authentication functionality, we need to instruct Fortify how to return our two factor authentication challenge view. All of Fortify's authentication view rendering logic may be customized using the appropriate methods available via the `Laravel\\Fortify\\Fortify` class. Typically, you should call this method from the `boot` method of your application's `App\\Providers\\FortifyServiceProvider` class:\n\n```php\nuse Laravel\\Fortify\\Fortify;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":328,"to":335}}}}],["1792",{"pageContent":"```php\nuse Laravel\\Fortify\\Fortify;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Fortify::twoFactorChallengeView(function () {\n        return view('auth.two-factor-challenge');\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":335,"to":348}}}}],["1793",{"pageContent":"Fortify will take care of defining the `/two-factor-challenge` route that returns this view. Your `two-factor-challenge` template should include a form that makes a POST request to the `/two-factor-challenge` endpoint. The `/two-factor-challenge` action expects a `code` field that contains a valid TOTP token or a `recovery_code` field that contains one of the user's recovery codes.\n\nIf the login attempt is successful, Fortify will redirect the user to the URI configured via the `home` configuration option within your application's `fortify` configuration file. If the login request was an XHR request, a 204 HTTP response will be returned.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":351,"to":353}}}}],["1794",{"pageContent":"If the request was not successful, the user will be redirected back to the two factor challenge screen and the validation errors will be available to you via the shared `$errors` [Blade template variable](/docs/{{version}}/validation#quick-displaying-the-validation-errors). Or, in the case of an XHR request, the validation errors will be returned with a 422 HTTP response.\n\n<a name=\"disabling-two-factor-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":355,"to":357}}}}],["1795",{"pageContent":"Disabling Two Factor Authentication\n\nTo disable two factor authentication, your application should make a DELETE request to the `/user/two-factor-authentication` endpoint. Remember, Fortify's two factor authentication endpoints require [password confirmation](#password-confirmation) prior to being called.\n\n<a name=\"registration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":358,"to":362}}}}],["1796",{"pageContent":"Registration\n\nTo begin implementing our application's registration functionality, we need to instruct Fortify how to return our \"register\" view. Remember, Fortify is a headless authentication library. If you would like a frontend implementation of Laravel's authentication features that are already completed for you, you should use an [application starter kit](/docs/{{version}}/starter-kits).\n\nAll of Fortify's view rendering logic may be customized using the appropriate methods available via the `Laravel\\Fortify\\Fortify` class. Typically, you should call this method from the `boot` method of your `App\\Providers\\FortifyServiceProvider` class:\n\n```php\nuse Laravel\\Fortify\\Fortify;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Fortify::registerView(function () {\n        return view('auth.register');\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":363,"to":382}}}}],["1797",{"pageContent":"Fortify will take care of defining the `/register` route that returns this view. Your `register` template should include a form that makes a POST request to the `/register` endpoint defined by Fortify.\n\nThe `/register` endpoint expects a string `name`, string email address / username, `password`, and `password_confirmation` fields. The name of the email / username field should match the `username` configuration value defined within your application's `fortify` configuration file.\n\nIf the registration attempt is successful, Fortify will redirect the user to the URI configured via the `home` configuration option within your application's `fortify` configuration file. If the request was an XHR request, a 201 HTTP response will be returned.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":385,"to":389}}}}],["1798",{"pageContent":"If the request was not successful, the user will be redirected back to the registration screen and the validation errors will be available to you via the shared `$errors` [Blade template variable](/docs/{{version}}/validation#quick-displaying-the-validation-errors). Or, in the case of an XHR request, the validation errors will be returned with a 422 HTTP response.\n\n<a name=\"customizing-registration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":391,"to":393}}}}],["1799",{"pageContent":"Customizing Registration\n\nThe user validation and creation process may be customized by modifying the `App\\Actions\\Fortify\\CreateNewUser` action that was generated when you installed Laravel Fortify.\n\n<a name=\"password-reset\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":394,"to":398}}}}],["1800",{"pageContent":"Password Reset\n\n<a name=\"requesting-a-password-reset-link\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":399,"to":401}}}}],["1801",{"pageContent":"Requesting A Password Reset Link\n\nTo begin implementing our application's password reset functionality, we need to instruct Fortify how to return our \"forgot password\" view. Remember, Fortify is a headless authentication library. If you would like a frontend implementation of Laravel's authentication features that are already completed for you, you should use an [application starter kit](/docs/{{version}}/starter-kits).\n\nAll of Fortify's view rendering logic may be customized using the appropriate methods available via the `Laravel\\Fortify\\Fortify` class. Typically, you should call this method from the `boot` method of your application's `App\\Providers\\FortifyServiceProvider` class:\n\n```php\nuse Laravel\\Fortify\\Fortify;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Fortify::requestPasswordResetLinkView(function () {\n        return view('auth.forgot-password');\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":402,"to":421}}}}],["1802",{"pageContent":"Fortify will take care of defining the `/forgot-password` endpoint that returns this view. Your `forgot-password` template should include a form that makes a POST request to the `/forgot-password` endpoint.\n\nThe `/forgot-password` endpoint expects a string `email` field. The name of this field / database column should match the `email` configuration value within your application's `fortify` configuration file.\n\n<a name=\"handling-the-password-reset-link-request-response\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":424,"to":428}}}}],["1803",{"pageContent":"Handling The Password Reset Link Request Response\n\nIf the password reset link request was successful, Fortify will redirect the user back to the `/forgot-password` endpoint and send an email to the user with a secure link they can use to reset their password. If the request was an XHR request, a 200 HTTP response will be returned.\n\nAfter being redirected back to the `/forgot-password` endpoint after a successful request, the `status` session variable may be used to display the status of the password reset link request attempt.\n\nThe value of the `$status` session variable will match one of the translation strings defined within your application's `passwords` [language file](/docs/{{version}}/localization). If you would like to customize this value and have not published Laravel's language files, you may do so via the `lang:publish` Artisan command:\n\n```html\n@if (session('status'))\n    <div class=\"mb-4 font-medium text-sm text-green-600\">\n        {{ session('status') }}\n    </div>\n@endif","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":429,"to":442}}}}],["1804",{"pageContent":"If the request was not successful, the user will be redirected back to the request password reset link screen and the validation errors will be available to you via the shared `$errors` [Blade template variable](/docs/{{version}}/validation#quick-displaying-the-validation-errors). Or, in the case of an XHR request, the validation errors will be returned with a 422 HTTP response.\n\n<a name=\"resetting-the-password\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":445,"to":447}}}}],["1805",{"pageContent":"Resetting The Password\n\nTo finish implementing our application's password reset functionality, we need to instruct Fortify how to return our \"reset password\" view.\n\nAll of Fortify's view rendering logic may be customized using the appropriate methods available via the `Laravel\\Fortify\\Fortify` class. Typically, you should call this method from the `boot` method of your application's `App\\Providers\\FortifyServiceProvider` class:\n\n```php\nuse Laravel\\Fortify\\Fortify;\nuse Illuminate\\Http\\Request;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Fortify::resetPasswordView(function (Request $request) {\n        return view('auth.reset-password', ['request' => $request]);\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":448,"to":468}}}}],["1806",{"pageContent":"Fortify will take care of defining the route to display this view. Your `reset-password` template should include a form that makes a POST request to `/reset-password`.\n\nThe `/reset-password` endpoint expects a string `email` field, a `password` field, a `password_confirmation` field, and a hidden field named `token` that contains the value of `request()->route('token')`. The name of the \"email\" field / database column should match the `email` configuration value defined within your application's `fortify` configuration file.\n\n<a name=\"handling-the-password-reset-response\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":471,"to":475}}}}],["1807",{"pageContent":"Handling The Password Reset Response\n\nIf the password reset request was successful, Fortify will redirect back to the `/login` route so that the user can log in with their new password. In addition, a `status` session variable will be set so that you may display the successful status of the reset on your login screen:\n\n```blade\n@if (session('status'))\n    <div class=\"mb-4 font-medium text-sm text-green-600\">\n        {{ session('status') }}\n    </div>\n@endif\n```\n\nIf the request was an XHR request, a 200 HTTP response will be returned.\n\nIf the request was not successful, the user will be redirected back to the reset password screen and the validation errors will be available to you via the shared `$errors` [Blade template variable](/docs/{{version}}/validation#quick-displaying-the-validation-errors). Or, in the case of an XHR request, the validation errors will be returned with a 422 HTTP response.\n\n<a name=\"customizing-password-resets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":476,"to":492}}}}],["1808",{"pageContent":"Customizing Password Resets\n\nThe password reset process may be customized by modifying the `App\\Actions\\ResetUserPassword` action that was generated when you installed Laravel Fortify.\n\n<a name=\"email-verification\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":493,"to":497}}}}],["1809",{"pageContent":"Email Verification\n\nAfter registration, you may wish for users to verify their email address before they continue accessing your application. To get started, ensure the `emailVerification` feature is enabled in your `fortify` configuration file's `features` array. Next, you should ensure that your `App\\Models\\User` class implements the `Illuminate\\Contracts\\Auth\\MustVerifyEmail` interface.\n\nOnce these two setup steps have been completed, newly registered users will receive an email prompting them to verify their email address ownership. However, we need to inform Fortify how to display the email verification screen which informs the user that they need to go click the verification link in the email.\n\nAll of Fortify's view's rendering logic may be customized using the appropriate methods available via the `Laravel\\Fortify\\Fortify` class. Typically, you should call this method from the `boot` method of your application's `App\\Providers\\FortifyServiceProvider` class:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":498,"to":504}}}}],["1810",{"pageContent":"```php\nuse Laravel\\Fortify\\Fortify;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Fortify::verifyEmailView(function () {\n        return view('auth.verify-email');\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":506,"to":519}}}}],["1811",{"pageContent":"Fortify will take care of defining the route that displays this view when a user is redirected to the `/email/verify` endpoint by Laravel's built-in `verified` middleware.\n\nYour `verify-email` template should include an informational message instructing the user to click the email verification link that was sent to their email address.\n\n<a name=\"resending-email-verification-links\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":522,"to":526}}}}],["1812",{"pageContent":"Resending Email Verification Links\n\nIf you wish, you may add a button to your application's `verify-email` template that triggers a POST request to the `/email/verification-notification` endpoint. When this endpoint receives a request, a new verification email link will be emailed to the user, allowing the user to get a new verification link if the previous one was accidentally deleted or lost.\n\nIf the request to resend the verification link email was successful, Fortify will redirect the user back to the `/email/verify` endpoint with a `status` session variable, allowing you to display an informational message to the user informing them the operation was successful. If the request was an XHR request, a 202 HTTP response will be returned:\n\n```blade\n@if (session('status') == 'verification-link-sent')\n    <div class=\"mb-4 font-medium text-sm text-green-600\">\n        A new email verification link has been emailed to you!\n    </div>\n@endif\n```\n\n<a name=\"protecting-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":527,"to":541}}}}],["1813",{"pageContent":"Protecting Routes\n\nTo specify that a route or group of routes requires that the user has verified their email address, you should attach Laravel's built-in `verified` middleware to the route. This middleware is registered within your application's `App\\Http\\Kernel` class:\n\n```php\nRoute::get('/dashboard', function () {\n    // ...\n})->middleware(['verified']);\n```\n\n<a name=\"password-confirmation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":542,"to":552}}}}],["1814",{"pageContent":"Password Confirmation\n\nWhile building your application, you may occasionally have actions that should require the user to confirm their password before the action is performed. Typically, these routes are protected by Laravel's built-in `password.confirm` middleware.\n\nTo begin implementing password confirmation functionality, we need to instruct Fortify how to return our application's \"password confirmation\" view. Remember, Fortify is a headless authentication library. If you would like a frontend implementation of Laravel's authentication features that are already completed for you, you should use an [application starter kit](/docs/{{version}}/starter-kits).\n\nAll of Fortify's view rendering logic may be customized using the appropriate methods available via the `Laravel\\Fortify\\Fortify` class. Typically, you should call this method from the `boot` method of your application's `App\\Providers\\FortifyServiceProvider` class:\n\n```php\nuse Laravel\\Fortify\\Fortify;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":553,"to":562}}}}],["1815",{"pageContent":"```php\nuse Laravel\\Fortify\\Fortify;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Fortify::confirmPasswordView(function () {\n        return view('auth.confirm-password');\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":562,"to":575}}}}],["1816",{"pageContent":"Fortify will take care of defining the `/user/confirm-password` endpoint that returns this view. Your `confirm-password` template should include a form that makes a POST request to the `/user/confirm-password` endpoint. The `/user/confirm-password` endpoint expects a `password` field that contains the user's current password.\n\nIf the password matches the user's current password, Fortify will redirect the user to the route they were attempting to access. If the request was an XHR request, a 201 HTTP response will be returned.\n\nIf the request was not successful, the user will be redirected back to the confirm password screen and the validation errors will be available to you via the shared `$errors` Blade template variable. Or, in the case of an XHR request, the validation errors will be returned with a 422 HTTP response.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/fortify.md","loc":{"lines":{"from":578,"to":582}}}}],["1817",{"pageContent":"# Frontend\n\n- [Introduction](#introduction)\n- [Using PHP](#using-php)\n    - [PHP & Blade](#php-and-blade)\n    - [Livewire](#livewire)\n    - [Starter Kits](#php-starter-kits)\n- [Using Vue / React](#using-vue-react)\n    - [Inertia](#inertia)\n    - [Starter Kits](#inertia-starter-kits)\n- [Bundling Assets](#bundling-assets)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":1,"to":13}}}}],["1818",{"pageContent":"Introduction\n\nLaravel is a backend framework that provides all of the features you need to build modern web applications, such as [routing](/docs/{{version}}/routing), [validation](/docs/{{version}}/validation), [caching](/docs/{{version}}/cache), [queues](/docs/{{version}}/queues), [file storage](/docs/{{version}}/filesystem), and more. However, we believe it's important to offer developers a beautiful full-stack experience, including powerful approaches for building your application's frontend.\n\nThere are two primary ways to tackle frontend development when building an application with Laravel, and which approach you choose is determined by whether you would like to build your frontend by leveraging PHP or by using JavaScript frameworks such as Vue and React. We'll discuss both of these options below so that you can make an informed decision regarding the best approach to frontend development for your application.\n\n<a name=\"using-php\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":14,"to":20}}}}],["1819",{"pageContent":"Using PHP\n\n<a name=\"php-and-blade\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":21,"to":23}}}}],["1820",{"pageContent":"PHP & Blade\n\nIn the past, most PHP applications rendered HTML to the browser using simple HTML templates interspersed with PHP `echo` statements which render data that was retrieved from a database during the request:\n\n```blade\n<div>\n    <?php foreach ($users as $user): ?>\n        Hello, <?php echo $user->name; ?> <br />\n    <?php endforeach; ?>\n</div>\n```\n\nIn Laravel, this approach to rendering HTML can still be achieved using [views](/docs/{{version}}/views) and [Blade](/docs/{{version}}/blade). Blade is an extremely light-weight templating language that provides convenient, short syntax for displaying data, iterating over data, and more:\n\n```blade\n<div>\n    @foreach ($users as $user)\n        Hello, {{ $user->name }} <br />\n    @endforeach\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":24,"to":43}}}}],["1821",{"pageContent":"When building applications in this fashion, form submissions and other page interactions typically receive an entirely new HTML document from the server and the entire page is re-rendered by the browser. Even today, many applications may be perfectly suited to having their frontends constructed in this way using simple Blade templates.\n\n<a name=\"growing-expectations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":46,"to":48}}}}],["1822",{"pageContent":"Growing Expectations\n\nHowever, as user expectations regarding web applications have matured, many developers have found the need to build more dynamic frontends with interactions that feel more polished. In light of this, some developers choose to begin building their application's frontend using JavaScript frameworks such as Vue and React.\n\nOthers, preferring to stick with the backend language they are comfortable with, have developed solutions that allow the construction of modern web application UIs while still primarily utilizing their backend language of choice. For example, in the [Rails](https://rubyonrails.org/) ecosystem, this has spurred the creation of libraries such as [Turbo](https://turbo.hotwired.dev/) [Hotwire](https://hotwired.dev/), and [Stimulus](https://stimulus.hotwired.dev/).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":49,"to":53}}}}],["1823",{"pageContent":"Within the Laravel ecosystem, the need to create modern, dynamic frontends by primarily using PHP has led to the creation of [Laravel Livewire](https://livewire.laravel.com) and [Alpine.js](https://alpinejs.dev/).\n\n<a name=\"livewire\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":55,"to":57}}}}],["1824",{"pageContent":"Livewire\n\n[Laravel Livewire](https://livewire.laravel.com) is a framework for building Laravel powered frontends that feel dynamic, modern, and alive just like frontends built with modern JavaScript frameworks like Vue and React.\n\nWhen using Livewire, you will create Livewire \"components\" that render a discrete portion of your UI and expose methods and data that can be invoked and interacted with from your application's frontend. For example, a simple \"Counter\" component might look like the following:\n\n```php\n<?php\n\nnamespace App\\Http\\Livewire;\n\nuse Livewire\\Component;\n\nclass Counter extends Component\n{\n    public $count = 0;\n\n    public function increment()\n    {\n        $this->count++;\n    }\n\n    public function render()\n    {\n        return view('livewire.counter');\n    }\n}\n```\n\nAnd, the corresponding template for the counter would be written like so:\n\n```blade\n<div>\n    <button wire:click=\"increment\">+</button>\n    <h1>{{ $count }}</h1>\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":58,"to":93}}}}],["1825",{"pageContent":"As you can see, Livewire enables you to write new HTML attributes such as `wire:click` that connect your Laravel application's frontend and backend. In addition, you can render your component's current state using simple Blade expressions.\n\nFor many, Livewire has revolutionized frontend development with Laravel, allowing them to stay within the comfort of Laravel while constructing modern, dynamic web applications. Typically, developers using Livewire will also utilize [Alpine.js](https://alpinejs.dev/) to \"sprinkle\" JavaScript onto their frontend only where it is needed, such as in order to render a dialog window.\n\nIf you're new to Laravel, we recommend getting familiar with the basic usage of [views](/docs/{{version}}/views) and [Blade](/docs/{{version}}/blade). Then, consult the official [Laravel Livewire documentation](https://livewire.laravel.com/docs) to learn how to take your application to the next level with interactive Livewire components.\n\n<a name=\"php-starter-kits\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":96,"to":102}}}}],["1826",{"pageContent":"Starter Kits\n\nIf you would like to build your frontend using PHP and Livewire, you can leverage our Breeze or Jetstream [starter kits](/docs/{{version}}/starter-kits) to jump-start your application's development. Both of these starter kits scaffold your application's backend and frontend authentication flow using [Blade](/docs/{{version}}/blade) and [Tailwind](https://tailwindcss.com) so that you can simply start building your next big idea.\n\n<a name=\"using-vue-react\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":103,"to":107}}}}],["1827",{"pageContent":"Using Vue / React\n\nAlthough it's possible to build modern frontends using Laravel and Livewire, many developers still prefer to leverage the power of a JavaScript framework like Vue or React. This allows developers to take advantage of the rich ecosystem of JavaScript packages and tools available via NPM.\n\nHowever, without additional tooling, pairing Laravel with Vue or React would leave us needing to solve a variety of complicated problems such as client-side routing, data hydration, and authentication. Client-side routing is often simplified by using opinionated Vue / React frameworks such as [Nuxt](https://nuxt.com/) and [Next](https://nextjs.org/); however, data hydration and authentication remain complicated and cumbersome problems to solve when pairing a backend framework like Laravel with these frontend frameworks.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":108,"to":112}}}}],["1828",{"pageContent":"In addition, developers are left maintaining two separate code repositories, often needing to coordinate maintenance, releases, and deployments across both repositories. While these problems are not insurmountable, we don't believe it's a productive or enjoyable way to develop applications.\n\n<a name=\"inertia\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":114,"to":116}}}}],["1829",{"pageContent":"Inertia\n\nThankfully, Laravel offers the best of both worlds. [Inertia](https://inertiajs.com) bridges the gap between your Laravel application and your modern Vue or React frontend, allowing you to build full-fledged, modern frontends using Vue or React while leveraging Laravel routes and controllers for routing, data hydration, and authentication — all within a single code repository. With this approach, you can enjoy the full power of both Laravel and Vue / React without crippling the capabilities of either tool.\n\nAfter installing Inertia into your Laravel application, you will write routes and controllers like normal. However, instead of returning a Blade template from your controller, you will return an Inertia page:\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\User;\nuse Inertia\\Inertia;\nuse Inertia\\Response;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":117,"to":131}}}}],["1830",{"pageContent":"```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\User;\nuse Inertia\\Inertia;\nuse Inertia\\Response;\n\nclass UserController extends Controller\n{\n    /**\n     * Show the profile for a given user.\n     */\n    public function show(string $id): Response\n    {\n        return Inertia::render('Users/Profile', [\n            'user' => User::findOrFail($id)\n        ]);\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":131,"to":152}}}}],["1831",{"pageContent":"An Inertia page corresponds to a Vue or React component, typically stored within the `resources/js/Pages` directory of your application. The data given to the page via the `Inertia::render` method will be used to hydrate the \"props\" of the page component:\n\n```vue\n<script setup>\nimport Layout from '@/Layouts/Authenticated.vue';\nimport { Head } from '@inertiajs/vue3';\n\nconst props = defineProps(['user']);\n</script>\n\n<template>\n    <Head title=\"User Profile\" />\n\n    <Layout>\n        <template #header>\n            <h2 class=\"font-semibold text-xl text-gray-800 leading-tight\">\n                Profile\n            </h2>\n        </template>\n\n        <div class=\"py-12\">\n            Hello, {{ user.name }}\n        </div>\n    </Layout>\n</template>\n```\n\nAs you can see, Inertia allows you to leverage the full power of Vue or React when building your frontend, while providing a light-weight bridge between your Laravel powered backend and your JavaScript powered frontend.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":155,"to":182}}}}],["1832",{"pageContent":"Server-Side Rendering\n\nIf you're concerned about diving into Inertia because your application requires server-side rendering, don't worry. Inertia offers [server-side rendering support](https://inertiajs.com/server-side-rendering). And, when deploying your application via [Laravel Forge](https://forge.laravel.com), it's a breeze to ensure that Inertia's server-side rendering process is always running.\n\n<a name=\"inertia-starter-kits\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":184,"to":188}}}}],["1833",{"pageContent":"Starter Kits\n\nIf you would like to build your frontend using Inertia and Vue / React, you can leverage our Breeze or Jetstream [starter kits](/docs/{{version}}/starter-kits#breeze-and-inertia) to jump-start your application's development. Both of these starter kits scaffold your application's backend and frontend authentication flow using Inertia, Vue / React, [Tailwind](https://tailwindcss.com), and [Vite](https://vitejs.dev) so that you can start building your next big idea.\n\n<a name=\"bundling-assets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":189,"to":193}}}}],["1834",{"pageContent":"Bundling Assets\n\nRegardless of whether you choose to develop your frontend using Blade and Livewire or Vue / React and Inertia, you will likely need to bundle your application's CSS into production ready assets. Of course, if you choose to build your application's frontend with Vue or React, you will also need to bundle your components into browser ready JavaScript assets.\n\nBy default, Laravel utilizes [Vite](https://vitejs.dev) to bundle your assets. Vite provides lightning-fast build times and near instantaneous Hot Module Replacement (HMR) during local development. In all new Laravel applications, including those using our [starter kits](/docs/{{version}}/starter-kits), you will find a `vite.config.js` file that loads our light-weight Laravel Vite plugin that makes Vite a joy to use with Laravel applications.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":194,"to":198}}}}],["1835",{"pageContent":"The fastest way to get started with Laravel and Vite is by beginning your application's development using [Laravel Breeze](/docs/{{version}}/starter-kits#laravel-breeze), our simplest starter kit that jump-starts your application by providing frontend and backend authentication scaffolding.\n\n> **Note**  \n> For more detailed documentation on utilizing Vite with Laravel, please see our [dedicated documentation on bundling and compiling your assets](/docs/{{version}}/vite).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/frontend.md","loc":{"lines":{"from":200,"to":203}}}}],["1836",{"pageContent":"# Hashing\n\n- [Introduction](#introduction)\n- [Configuration](#configuration)\n- [Basic Usage](#basic-usage)\n    - [Hashing Passwords](#hashing-passwords)\n    - [Verifying That A Password Matches A Hash](#verifying-that-a-password-matches-a-hash)\n    - [Determining If A Password Needs To Be Rehashed](#determining-if-a-password-needs-to-be-rehashed)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":1,"to":10}}}}],["1837",{"pageContent":"Introduction\n\nThe Laravel `Hash` [facade](/docs/{{version}}/facades) provides secure Bcrypt and Argon2 hashing for storing user passwords. If you are using one of the [Laravel application starter kits](/docs/{{version}}/starter-kits), Bcrypt will be used for registration and authentication by default.\n\nBcrypt is a great choice for hashing passwords because its \"work factor\" is adjustable, which means that the time it takes to generate a hash can be increased as hardware power increases. When hashing passwords, slow is good. The longer an algorithm takes to hash a password, the longer it takes malicious users to generate \"rainbow tables\" of all possible string hash values that may be used in brute force attacks against applications.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":11,"to":17}}}}],["1838",{"pageContent":"Configuration\n\nThe default hashing driver for your application is configured in your application's `config/hashing.php` configuration file. There are currently several supported drivers: [Bcrypt](https://en.wikipedia.org/wiki/Bcrypt) and [Argon2](https://en.wikipedia.org/wiki/Argon2) (Argon2i and Argon2id variants).\n\n<a name=\"basic-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":18,"to":22}}}}],["1839",{"pageContent":"Basic Usage\n\n<a name=\"hashing-passwords\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":23,"to":25}}}}],["1840",{"pageContent":"Hashing Passwords\n\nYou may hash a password by calling the `make` method on the `Hash` facade:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Hash;\n\n    class PasswordController extends Controller\n    {\n        /**\n         * Update the password for the user.\n         */\n        public function update(Request $request): RedirectResponse\n        {\n            // Validate the new password length...\n\n            $request->user()->fill([\n                'password' => Hash::make($request->newPassword)\n            ])->save();\n\n            return redirect('/profile');\n        }\n    }\n\n<a name=\"adjusting-the-bcrypt-work-factor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":26,"to":55}}}}],["1841",{"pageContent":"Adjusting The Bcrypt Work Factor\n\nIf you are using the Bcrypt algorithm, the `make` method allows you to manage the work factor of the algorithm using the `rounds` option; however, the default work factor managed by Laravel is acceptable for most applications:\n\n    $hashed = Hash::make('password', [\n        'rounds' => 12,\n    ]);\n\n<a name=\"adjusting-the-argon2-work-factor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":56,"to":64}}}}],["1842",{"pageContent":"Adjusting The Argon2 Work Factor\n\nIf you are using the Argon2 algorithm, the `make` method allows you to manage the work factor of the algorithm using the `memory`, `time`, and `threads` options; however, the default values managed by Laravel are acceptable for most applications:\n\n    $hashed = Hash::make('password', [\n        'memory' => 1024,\n        'time' => 2,\n        'threads' => 2,\n    ]);\n\n> **Note**  \n> For more information on these options, please refer to the [official PHP documentation regarding Argon hashing](https://secure.php.net/manual/en/function.password-hash.php).\n\n<a name=\"verifying-that-a-password-matches-a-hash\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":65,"to":78}}}}],["1843",{"pageContent":"Verifying That A Password Matches A Hash\n\nThe `check` method provided by the `Hash` facade allows you to verify that a given plain-text string corresponds to a given hash:\n\n    if (Hash::check('plain-text', $hashedPassword)) {\n        // The passwords match...\n    }\n\n<a name=\"determining-if-a-password-needs-to-be-rehashed\"></a>\n### Determining If A Password Needs To Be Rehashed\n\nThe `needsRehash` method provided by the `Hash` facade allows you to determine if the work factor used by the hasher has changed since the password was hashed. Some applications choose to perform this check during the application's authentication process:\n\n    if (Hash::needsRehash($hashed)) {\n        $hashed = Hash::make('plain-text');\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/hashing.md","loc":{"lines":{"from":79,"to":94}}}}],["1844",{"pageContent":"# Helpers\n\n- [Introduction](#introduction)\n- [Available Methods](#available-methods)\n- [Other Utilities](#other-utilities)\n    - [Benchmarking](#benchmarking)\n    - [Dates](#dates)\n    - [Lottery](#lottery)\n    - [Pipeline](#pipeline)\n    - [Sleep](#sleep)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nLaravel includes a variety of global \"helper\" PHP functions. Many of these functions are used by the framework itself; however, you are free to use them in your own applications if you find them convenient.\n\n<a name=\"available-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1,"to":17}}}}],["1845",{"pageContent":"Available Methods\n\n<style>\n    .collection-method-list > p {\n        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n</style>\n\n<a name=\"arrays-and-objects-method-list\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":18,"to":33}}}}],["1846",{"pageContent":"Arrays & Objects\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":34,"to":36}}}}],["1847",{"pageContent":"[Arr::accessible](#method-array-accessible)\n[Arr::add](#method-array-add)\n[Arr::collapse](#method-array-collapse)\n[Arr::crossJoin](#method-array-crossjoin)\n[Arr::divide](#method-array-divide)\n[Arr::dot](#method-array-dot)\n[Arr::except](#method-array-except)\n[Arr::exists](#method-array-exists)\n[Arr::first](#method-array-first)\n[Arr::flatten](#method-array-flatten)\n[Arr::forget](#method-array-forget)\n[Arr::get](#method-array-get)\n[Arr::has](#method-array-has)\n[Arr::hasAny](#method-array-hasany)\n[Arr::isAssoc](#method-array-isassoc)\n[Arr::isList](#method-array-islist)\n[Arr::join](#method-array-join)\n[Arr::keyBy](#method-array-keyby)\n[Arr::last](#method-array-last)\n[Arr::map](#method-array-map)\n[Arr::mapWithKeys](#method-array-map-with-keys)\n[Arr::only](#method-array-only)\n[Arr::pluck](#method-array-pluck)\n[Arr::prepend](#method-array-prepend)\n[Arr::prependKeysWith](#method-array-prependkeyswith)\n[Arr::pull](#method-array-pull)\n[Arr::query](#method-array-query)\n[Arr::random](#method-array-random)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":38,"to":65}}}}],["1848",{"pageContent":"[Arr::prepend](#method-array-prepend)\n[Arr::prependKeysWith](#method-array-prependkeyswith)\n[Arr::pull](#method-array-pull)\n[Arr::query](#method-array-query)\n[Arr::random](#method-array-random)\n[Arr::set](#method-array-set)\n[Arr::shuffle](#method-array-shuffle)\n[Arr::sort](#method-array-sort)\n[Arr::sortDesc](#method-array-sort-desc)\n[Arr::sortRecursive](#method-array-sort-recursive)\n[Arr::sortRecursiveDesc](#method-array-sort-recursive-desc)\n[Arr::toCssClasses](#method-array-to-css-classes)\n[Arr::toCssStyles](#method-array-to-css-styles)\n[Arr::undot](#method-array-undot)\n[Arr::where](#method-array-where)\n[Arr::whereNotNull](#method-array-where-not-null)\n[Arr::wrap](#method-array-wrap)\n[data_fill](#method-data-fill)\n[data_get](#method-data-get)\n[data_set](#method-data-set)\n[data_forget](#method-data-forget)\n[head](#method-head)\n[last](#method-last)\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":65,"to":88}}}}],["1849",{"pageContent":"<a name=\"paths-method-list\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":90,"to":90}}}}],["1850",{"pageContent":"Paths\n\n<div class=\"collection-method-list\" markdown=\"1\">\n\n[app_path](#method-app-path)\n[base_path](#method-base-path)\n[config_path](#method-config-path)\n[database_path](#method-database-path)\n[lang_path](#method-lang-path)\n[mix](#method-mix)\n[public_path](#method-public-path)\n[resource_path](#method-resource-path)\n[storage_path](#method-storage-path)\n\n</div>\n\n<a name=\"urls-method-list\"></a>\n### URLs\n\n<div class=\"collection-method-list\" markdown=\"1\">\n\n[action](#method-action)\n[asset](#method-asset)\n[route](#method-route)\n[secure_asset](#method-secure-asset)\n[secure_url](#method-secure-url)\n[to_route](#method-to-route)\n[url](#method-url)\n\n</div>\n\n<a name=\"miscellaneous-method-list\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":91,"to":122}}}}],["1851",{"pageContent":"Miscellaneous\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":123,"to":125}}}}],["1852",{"pageContent":"[abort](#method-abort)\n[abort_if](#method-abort-if)\n[abort_unless](#method-abort-unless)\n[app](#method-app)\n[auth](#method-auth)\n[back](#method-back)\n[bcrypt](#method-bcrypt)\n[blank](#method-blank)\n[broadcast](#method-broadcast)\n[cache](#method-cache)\n[class_uses_recursive](#method-class-uses-recursive)\n[collect](#method-collect)\n[config](#method-config)\n[cookie](#method-cookie)\n[csrf_field](#method-csrf-field)\n[csrf_token](#method-csrf-token)\n[decrypt](#method-decrypt)\n[dd](#method-dd)\n[dispatch](#method-dispatch)\n[dispatch_sync](#method-dispatch-sync)\n[dump](#method-dump)\n[encrypt](#method-encrypt)\n[env](#method-env)\n[event](#method-event)\n[fake](#method-fake)\n[filled](#method-filled)\n[info](#method-info)\n[logger](#method-logger)\n[method_field](#method-method-field)\n[now](#method-now)\n[old](#method-old)\n[optional](#method-optional)\n[policy](#method-policy)\n[redirect](#method-redirect)\n[report](#method-report)\n[report_if](#method-report-if)\n[report_unless](#method-report-unless)\n[request](#method-request)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":127,"to":164}}}}],["1853",{"pageContent":"[optional](#method-optional)\n[policy](#method-policy)\n[redirect](#method-redirect)\n[report](#method-report)\n[report_if](#method-report-if)\n[report_unless](#method-report-unless)\n[request](#method-request)\n[rescue](#method-rescue)\n[resolve](#method-resolve)\n[response](#method-response)\n[retry](#method-retry)\n[session](#method-session)\n[tap](#method-tap)\n[throw_if](#method-throw-if)\n[throw_unless](#method-throw-unless)\n[today](#method-today)\n[trait_uses_recursive](#method-trait-uses-recursive)\n[transform](#method-transform)\n[validator](#method-validator)\n[value](#method-value)\n[view](#method-view)\n[with](#method-with)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":164,"to":185}}}}],["1854",{"pageContent":"</div>\n\n<a name=\"arrays\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":187,"to":189}}}}],["1855",{"pageContent":"Arrays & Objects\n\n<a name=\"method-array-accessible\"></a>\n#### `Arr::accessible()` {.collection-method .first-collection-method}\n\nThe `Arr::accessible` method determines if the given value is array accessible:\n\n    use Illuminate\\Support\\Arr;\n    use Illuminate\\Support\\Collection;\n\n    $isAccessible = Arr::accessible(['a' => 1, 'b' => 2]);\n\n    // true\n\n    $isAccessible = Arr::accessible(new Collection);\n\n    // true\n\n    $isAccessible = Arr::accessible('abc');\n\n    // false\n\n    $isAccessible = Arr::accessible(new stdClass);\n\n    // false\n\n<a name=\"method-array-add\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":190,"to":216}}}}],["1856",{"pageContent":"`Arr::add()` {.collection-method}\n\nThe `Arr::add` method adds a given key / value pair to an array if the given key doesn't already exist in the array or is set to `null`:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = Arr::add(['name' => 'Desk'], 'price', 100);\n\n    // ['name' => 'Desk', 'price' => 100]\n\n    $array = Arr::add(['name' => 'Desk', 'price' => null], 'price', 100);\n\n    // ['name' => 'Desk', 'price' => 100]\n\n\n<a name=\"method-array-collapse\"></a>\n#### `Arr::collapse()` {.collection-method}\n\nThe `Arr::collapse` method collapses an array of arrays into a single array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = Arr::collapse([[1, 2, 3], [4, 5, 6], [7, 8, 9]]);\n\n    // [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n<a name=\"method-array-crossjoin\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":217,"to":243}}}}],["1857",{"pageContent":"`Arr::crossJoin()` {.collection-method}\n\nThe `Arr::crossJoin` method cross joins the given arrays, returning a Cartesian product with all possible permutations:\n\n    use Illuminate\\Support\\Arr;\n\n    $matrix = Arr::crossJoin([1, 2], ['a', 'b']);\n\n    /*\n        [\n            [1, 'a'],\n            [1, 'b'],\n            [2, 'a'],\n            [2, 'b'],\n        ]\n    */\n\n    $matrix = Arr::crossJoin([1, 2], ['a', 'b'], ['I', 'II']);\n\n    /*\n        [\n            [1, 'a', 'I'],\n            [1, 'a', 'II'],\n            [1, 'b', 'I'],\n            [1, 'b', 'II'],\n            [2, 'a', 'I'],\n            [2, 'a', 'II'],\n            [2, 'b', 'I'],\n            [2, 'b', 'II'],\n        ]\n    */\n\n<a name=\"method-array-divide\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":244,"to":276}}}}],["1858",{"pageContent":"`Arr::divide()` {.collection-method}\n\nThe `Arr::divide` method returns two arrays: one containing the keys and the other containing the values of the given array:\n\n    use Illuminate\\Support\\Arr;\n\n    [$keys, $values] = Arr::divide(['name' => 'Desk']);\n\n    // $keys: ['name']\n\n    // $values: ['Desk']\n\n<a name=\"method-array-dot\"></a>\n#### `Arr::dot()` {.collection-method}\n\nThe `Arr::dot` method flattens a multi-dimensional array into a single level array that uses \"dot\" notation to indicate depth:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['products' => ['desk' => ['price' => 100]]];\n\n    $flattened = Arr::dot($array);\n\n    // ['products.desk.price' => 100]\n\n<a name=\"method-array-except\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":277,"to":302}}}}],["1859",{"pageContent":"`Arr::except()` {.collection-method}\n\nThe `Arr::except` method removes the given key / value pairs from an array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['name' => 'Desk', 'price' => 100];\n\n    $filtered = Arr::except($array, ['price']);\n\n    // ['name' => 'Desk']\n\n<a name=\"method-array-exists\"></a>\n#### `Arr::exists()` {.collection-method}\n\nThe `Arr::exists` method checks that the given key exists in the provided array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['name' => 'John Doe', 'age' => 17];\n\n    $exists = Arr::exists($array, 'name');\n\n    // true\n\n    $exists = Arr::exists($array, 'salary');\n\n    // false\n\n<a name=\"method-array-first\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":303,"to":332}}}}],["1860",{"pageContent":"`Arr::first()` {.collection-method}\n\nThe `Arr::first` method returns the first element of an array passing a given truth test:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [100, 200, 300];\n\n    $first = Arr::first($array, function (int $value, int $key) {\n        return $value >= 150;\n    });\n\n    // 200\n\nA default value may also be passed as the third parameter to the method. This value will be returned if no value passes the truth test:\n\n    use Illuminate\\Support\\Arr;\n\n    $first = Arr::first($array, $callback, $default);\n\n<a name=\"method-array-flatten\"></a>\n#### `Arr::flatten()` {.collection-method}\n\nThe `Arr::flatten` method flattens a multi-dimensional array into a single level array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['name' => 'Joe', 'languages' => ['PHP', 'Ruby']];\n\n    $flattened = Arr::flatten($array);\n\n    // ['Joe', 'PHP', 'Ruby']\n\n<a name=\"method-array-forget\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":333,"to":366}}}}],["1861",{"pageContent":"`Arr::forget()` {.collection-method}\n\nThe `Arr::forget` method removes a given key / value pair from a deeply nested array using \"dot\" notation:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['products' => ['desk' => ['price' => 100]]];\n\n    Arr::forget($array, 'products.desk');\n\n    // ['products' => []]\n\n<a name=\"method-array-get\"></a>\n#### `Arr::get()` {.collection-method}\n\nThe `Arr::get` method retrieves a value from a deeply nested array using \"dot\" notation:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['products' => ['desk' => ['price' => 100]]];\n\n    $price = Arr::get($array, 'products.desk.price');\n\n    // 100\n\nThe `Arr::get` method also accepts a default value, which will be returned if the specified key is not present in the array:\n\n    use Illuminate\\Support\\Arr;\n\n    $discount = Arr::get($array, 'products.desk.discount', 0);\n\n    // 0\n\n<a name=\"method-array-has\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":367,"to":400}}}}],["1862",{"pageContent":"`Arr::has()` {.collection-method}\n\nThe `Arr::has` method checks whether a given item or items exists in an array using \"dot\" notation:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['product' => ['name' => 'Desk', 'price' => 100]];\n\n    $contains = Arr::has($array, 'product.name');\n\n    // true\n\n    $contains = Arr::has($array, ['product.price', 'product.discount']);\n\n    // false\n\n<a name=\"method-array-hasany\"></a>\n#### `Arr::hasAny()` {.collection-method}\n\nThe `Arr::hasAny` method checks whether any item in a given set exists in an array using \"dot\" notation:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['product' => ['name' => 'Desk', 'price' => 100]];\n\n    $contains = Arr::hasAny($array, 'product.name');\n\n    // true\n\n    $contains = Arr::hasAny($array, ['product.name', 'product.discount']);\n\n    // true\n\n    $contains = Arr::hasAny($array, ['category', 'product.discount']);\n\n    // false\n\n<a name=\"method-array-isassoc\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":401,"to":438}}}}],["1863",{"pageContent":"`Arr::isAssoc()` {.collection-method}\n\nThe `Arr::isAssoc` method returns `true` if the given array is an associative array. An array is considered \"associative\" if it doesn't have sequential numerical keys beginning with zero:\n\n    use Illuminate\\Support\\Arr;\n\n    $isAssoc = Arr::isAssoc(['product' => ['name' => 'Desk', 'price' => 100]]);\n\n    // true\n\n    $isAssoc = Arr::isAssoc([1, 2, 3]);\n\n    // false\n\n<a name=\"method-array-islist\"></a>\n#### `Arr::isList()` {.collection-method}\n\nThe `Arr::isList` method returns `true` if the given array's keys are sequential integers beginning from zero:\n\n    use Illuminate\\Support\\Arr;\n\n    $isList = Arr::isList(['foo', 'bar', 'baz']);\n\n    // true\n\n    $isList = Arr::isList(['product' => ['name' => 'Desk', 'price' => 100]]);\n\n    // false\n\n<a name=\"method-array-join\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":439,"to":468}}}}],["1864",{"pageContent":"`Arr::join()` {.collection-method}\n\nThe `Arr::join` method joins array elements with a string. Using this method's second argument, you may also specify the joining string for the final element of the array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['Tailwind', 'Alpine', 'Laravel', 'Livewire'];\n\n    $joined = Arr::join($array, ', ');\n\n    // Tailwind, Alpine, Laravel, Livewire\n\n    $joined = Arr::join($array, ', ', ' and ');\n\n    // Tailwind, Alpine, Laravel and Livewire\n\n<a name=\"method-array-keyby\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":469,"to":485}}}}],["1865",{"pageContent":"`Arr::keyBy()` {.collection-method}\n\nThe `Arr::keyBy` method keys the array by the given key. If multiple items have the same key, only the last one will appear in the new array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        ['product_id' => 'prod-100', 'name' => 'Desk'],\n        ['product_id' => 'prod-200', 'name' => 'Chair'],\n    ];\n\n    $keyed = Arr::keyBy($array, 'product_id');\n\n    /*\n        [\n            'prod-100' => ['product_id' => 'prod-100', 'name' => 'Desk'],\n            'prod-200' => ['product_id' => 'prod-200', 'name' => 'Chair'],\n        ]\n    */\n\n<a name=\"method-array-last\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":486,"to":506}}}}],["1866",{"pageContent":"`Arr::last()` {.collection-method}\n\nThe `Arr::last` method returns the last element of an array passing a given truth test:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [100, 200, 300, 110];\n\n    $last = Arr::last($array, function (int $value, int $key) {\n        return $value >= 150;\n    });\n\n    // 300\n\nA default value may be passed as the third argument to the method. This value will be returned if no value passes the truth test:\n\n    use Illuminate\\Support\\Arr;\n\n    $last = Arr::last($array, $callback, $default);\n\n<a name=\"method-array-map\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":507,"to":527}}}}],["1867",{"pageContent":"`Arr::map()` {.collection-method}\n\nThe `Arr::map` method iterates through the array and passes each value and key to the given callback. The array value is replaced by the value returned by the callback:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['first' => 'james', 'last' => 'kirk'];\n\n    $mapped = Arr::map($array, function (string $value, string $key) {\n        return ucfirst($value);\n    });\n\n    // ['first' => 'James', 'last' => 'Kirk']\n\n<a name=\"method-array-map-with-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":528,"to":542}}}}],["1868",{"pageContent":"`Arr::mapWithKeys()` {.collection-method}\n\nThe `Arr::mapWithKeys` method iterates through the array and passes each value to the given callback. The callback should return an associative array containing a single key / value pair:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        [\n            'name' => 'John',\n            'department' => 'Sales',\n            'email' => 'john@example.com',\n        ],\n        [\n            'name' => 'Jane',\n            'department' => 'Marketing',\n            'email' => 'jane@example.com',\n        ]\n    ];\n\n    $mapped = Arr::mapWithKeys($array, function (array $item, int $key) {\n        return [$item['email'] => $item['name']];\n    });\n\n    /*\n        [\n            'john@example.com' => 'John',\n            'jane@example.com' => 'Jane',\n        ]\n    */\n\n<a name=\"method-array-only\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":543,"to":573}}}}],["1869",{"pageContent":"`Arr::only()` {.collection-method}\n\nThe `Arr::only` method returns only the specified key / value pairs from the given array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['name' => 'Desk', 'price' => 100, 'orders' => 10];\n\n    $slice = Arr::only($array, ['name', 'price']);\n\n    // ['name' => 'Desk', 'price' => 100]\n\n<a name=\"method-array-pluck\"></a>\n#### `Arr::pluck()` {.collection-method}\n\nThe `Arr::pluck` method retrieves all of the values for a given key from an array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        ['developer' => ['id' => 1, 'name' => 'Taylor']],\n        ['developer' => ['id' => 2, 'name' => 'Abigail']],\n    ];\n\n    $names = Arr::pluck($array, 'developer.name');\n\n    // ['Taylor', 'Abigail']\n\nYou may also specify how you wish the resulting list to be keyed:\n\n    use Illuminate\\Support\\Arr;\n\n    $names = Arr::pluck($array, 'developer.name', 'developer.id');\n\n    // [1 => 'Taylor', 2 => 'Abigail']\n\n<a name=\"method-array-prepend\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":574,"to":610}}}}],["1870",{"pageContent":"`Arr::prepend()` {.collection-method}\n\nThe `Arr::prepend` method will push an item onto the beginning of an array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['one', 'two', 'three', 'four'];\n\n    $array = Arr::prepend($array, 'zero');\n\n    // ['zero', 'one', 'two', 'three', 'four']\n\nIf needed, you may specify the key that should be used for the value:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['price' => 100];\n\n    $array = Arr::prepend($array, 'Desk', 'name');\n\n    // ['name' => 'Desk', 'price' => 100]\n\n<a name=\"method-array-prependkeyswith\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":611,"to":633}}}}],["1871",{"pageContent":"`Arr::prependKeysWith()` {.collection-method}\n\nThe `Arr::prependKeysWith` prepends all key names of an associative array with the given prefix:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        'name' => 'Desk',\n        'price' => 100,\n    ];\n\n    $keyed = Arr::prependKeysWith($array, 'product.');\n\n    /*\n        [\n            'product.name' => 'Desk',\n            'product.price' => 100,\n        ]\n    */\n\n<a name=\"method-array-pull\"></a>\n#### `Arr::pull()` {.collection-method}\n\nThe `Arr::pull` method returns and removes a key / value pair from an array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['name' => 'Desk', 'price' => 100];\n\n    $name = Arr::pull($array, 'name');\n\n    // $name: Desk\n\n    // $array: ['price' => 100]\n\nA default value may be passed as the third argument to the method. This value will be returned if the key doesn't exist:\n\n    use Illuminate\\Support\\Arr;\n\n    $value = Arr::pull($array, $key, $default);\n\n<a name=\"method-array-query\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":634,"to":675}}}}],["1872",{"pageContent":"`Arr::query()` {.collection-method}\n\nThe `Arr::query` method converts the array into a query string:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        'name' => 'Taylor',\n        'order' => [\n            'column' => 'created_at',\n            'direction' => 'desc'\n        ]\n    ];\n\n    Arr::query($array);\n\n    // name=Taylor&order[column]=created_at&order[direction]=desc\n\n<a name=\"method-array-random\"></a>\n#### `Arr::random()` {.collection-method}\n\nThe `Arr::random` method returns a random value from an array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [1, 2, 3, 4, 5];\n\n    $random = Arr::random($array);\n\n    // 4 - (retrieved randomly)\n\nYou may also specify the number of items to return as an optional second argument. Note that providing this argument will return an array even if only one item is desired:\n\n    use Illuminate\\Support\\Arr;\n\n    $items = Arr::random($array, 2);\n\n    // [2, 5] - (retrieved randomly)\n\n<a name=\"method-array-set\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":676,"to":715}}}}],["1873",{"pageContent":"`Arr::set()` {.collection-method}\n\nThe `Arr::set` method sets a value within a deeply nested array using \"dot\" notation:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['products' => ['desk' => ['price' => 100]]];\n\n    Arr::set($array, 'products.desk.price', 200);\n\n    // ['products' => ['desk' => ['price' => 200]]]\n\n<a name=\"method-array-shuffle\"></a>\n#### `Arr::shuffle()` {.collection-method}\n\nThe `Arr::shuffle` method randomly shuffles the items in the array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = Arr::shuffle([1, 2, 3, 4, 5]);\n\n    // [3, 2, 5, 1, 4] - (generated randomly)\n\n<a name=\"method-array-sort\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":716,"to":739}}}}],["1874",{"pageContent":"`Arr::sort()` {.collection-method}\n\nThe `Arr::sort` method sorts an array by its values:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['Desk', 'Table', 'Chair'];\n\n    $sorted = Arr::sort($array);\n\n    // ['Chair', 'Desk', 'Table']\n\nYou may also sort the array by the results of a given closure:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        ['name' => 'Desk'],\n        ['name' => 'Table'],\n        ['name' => 'Chair'],\n    ];\n\n    $sorted = array_values(Arr::sort($array, function (array $value) {\n        return $value['name'];\n    }));\n\n    /*\n        [\n            ['name' => 'Chair'],\n            ['name' => 'Desk'],\n            ['name' => 'Table'],\n        ]\n    */\n\n<a name=\"method-array-sort-desc\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":740,"to":774}}}}],["1875",{"pageContent":"`Arr::sortDesc()` {.collection-method}\n\nThe `Arr::sortDesc` method sorts an array in descending order by its values:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = ['Desk', 'Table', 'Chair'];\n\n    $sorted = Arr::sortDesc($array);\n\n    // ['Table', 'Desk', 'Chair']\n\nYou may also sort the array by the results of a given closure:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        ['name' => 'Desk'],\n        ['name' => 'Table'],\n        ['name' => 'Chair'],\n    ];\n\n    $sorted = array_values(Arr::sortDesc($array, function (array $value) {\n        return $value['name'];\n    }));\n\n    /*\n        [\n            ['name' => 'Table'],\n            ['name' => 'Desk'],\n            ['name' => 'Chair'],\n        ]\n    */\n\n<a name=\"method-array-sort-recursive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":775,"to":809}}}}],["1876",{"pageContent":"`Arr::sortRecursive()` {.collection-method}\n\nThe `Arr::sortRecursive` method recursively sorts an array using the `sort` function for numerically indexed sub-arrays and the `ksort` function for associative sub-arrays:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        ['Roman', 'Taylor', 'Li'],\n        ['PHP', 'Ruby', 'JavaScript'],\n        ['one' => 1, 'two' => 2, 'three' => 3],\n    ];\n\n    $sorted = Arr::sortRecursive($array);\n\n    /*\n        [\n            ['JavaScript', 'PHP', 'Ruby'],\n            ['one' => 1, 'three' => 3, 'two' => 2],\n            ['Li', 'Roman', 'Taylor'],\n        ]\n    */\n\nIf you would like the results sorted in descending order, you may use the `Arr::sortRecursiveDesc` method.\n\n    $sorted = Arr::sortRecursiveDesc($array);\n\n<a name=\"method-array-to-css-classes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":810,"to":836}}}}],["1877",{"pageContent":"`Arr::toCssClasses()` {.collection-method}\n\nThe `Arr::toCssClasses` conditionally compiles a CSS class string. The method accepts an array of classes where the array key contains the class or classes you wish to add, while the value is a boolean expression. If the array element has a numeric key, it will always be included in the rendered class list:\n\n    use Illuminate\\Support\\Arr;\n\n    $isActive = false;\n    $hasError = true;\n\n    $array = ['p-4', 'font-bold' => $isActive, 'bg-red' => $hasError];\n\n    $classes = Arr::toCssClasses($array);\n\n    /*\n        'p-4 bg-red'\n    */\n\n<a name=\"method-array-to-css-styles\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":837,"to":854}}}}],["1878",{"pageContent":"`Arr::toCssStyles()` {.collection-method}\n\nThe `Arr::toCssStyles` conditionally compiles a CSS style string. The method accepts an array of classes where the array key contains the class or classes you wish to add, while the value is a boolean expression. If the array element has a numeric key, it will always be included in the rendered class list:\n\n```php\n$hasColor = true;\n\n$array = ['background-color: blue', 'color: blue' => $hasColor];\n\n$classes = Arr::toCssStyles($array);\n\n/*\n    'background-color: blue; color: blue;'\n*/\n```\n\nThis method powers Laravel's functionality allowing [merging classes with a Blade component's attribute bag](/docs/{{version}}/blade#conditionally-merge-classes) as well as the `@class` [Blade directive](/docs/{{version}}/blade#conditional-classes).\n\n<a name=\"method-array-undot\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":855,"to":873}}}}],["1879",{"pageContent":"`Arr::undot()` {.collection-method}\n\nThe `Arr::undot` method expands a single-dimensional array that uses \"dot\" notation into a multi-dimensional array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [\n        'user.name' => 'Kevin Malone',\n        'user.occupation' => 'Accountant',\n    ];\n\n    $array = Arr::undot($array);\n\n    // ['user' => ['name' => 'Kevin Malone', 'occupation' => 'Accountant']]\n\n<a name=\"method-array-where\"></a>\n#### `Arr::where()` {.collection-method}\n\nThe `Arr::where` method filters an array using the given closure:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [100, '200', 300, '400', 500];\n\n    $filtered = Arr::where($array, function (string|int $value, int $key) {\n        return is_string($value);\n    });\n\n    // [1 => '200', 3 => '400']\n\n<a name=\"method-array-where-not-null\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":874,"to":904}}}}],["1880",{"pageContent":"`Arr::whereNotNull()` {.collection-method}\n\nThe `Arr::whereNotNull` method removes all `null` values from the given array:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = [0, null];\n\n    $filtered = Arr::whereNotNull($array);\n\n    // [0 => 0]\n\n<a name=\"method-array-wrap\"></a>\n#### `Arr::wrap()` {.collection-method}\n\nThe `Arr::wrap` method wraps the given value in an array. If the given value is already an array it will be returned without modification:\n\n    use Illuminate\\Support\\Arr;\n\n    $string = 'Laravel';\n\n    $array = Arr::wrap($string);\n\n    // ['Laravel']\n\nIf the given value is `null`, an empty array will be returned:\n\n    use Illuminate\\Support\\Arr;\n\n    $array = Arr::wrap(null);\n\n    // []\n\n<a name=\"method-data-fill\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":905,"to":938}}}}],["1881",{"pageContent":"`data_fill()` {.collection-method}\n\nThe `data_fill` function sets a missing value within a nested array or object using \"dot\" notation:\n\n    $data = ['products' => ['desk' => ['price' => 100]]];\n\n    data_fill($data, 'products.desk.price', 200);\n\n    // ['products' => ['desk' => ['price' => 100]]]\n\n    data_fill($data, 'products.desk.discount', 10);\n\n    // ['products' => ['desk' => ['price' => 100, 'discount' => 10]]]\n\nThis function also accepts asterisks as wildcards and will fill the target accordingly:\n\n    $data = [\n        'products' => [\n            ['name' => 'Desk 1', 'price' => 100],\n            ['name' => 'Desk 2'],\n        ],\n    ];\n\n    data_fill($data, 'products.*.price', 200);\n\n    /*\n        [\n            'products' => [\n                ['name' => 'Desk 1', 'price' => 100],\n                ['name' => 'Desk 2', 'price' => 200],\n            ],\n        ]\n    */\n\n<a name=\"method-data-get\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":939,"to":973}}}}],["1882",{"pageContent":"`data_get()` {.collection-method}\n\nThe `data_get` function retrieves a value from a nested array or object using \"dot\" notation:\n\n    $data = ['products' => ['desk' => ['price' => 100]]];\n\n    $price = data_get($data, 'products.desk.price');\n\n    // 100\n\nThe `data_get` function also accepts a default value, which will be returned if the specified key is not found:\n\n    $discount = data_get($data, 'products.desk.discount', 0);\n\n    // 0\n\nThe function also accepts wildcards using asterisks, which may target any key of the array or object:\n\n    $data = [\n        'product-one' => ['name' => 'Desk 1', 'price' => 100],\n        'product-two' => ['name' => 'Desk 2', 'price' => 150],\n    ];\n\n    data_get($data, '*.name');\n\n    // ['Desk 1', 'Desk 2'];\n\n<a name=\"method-data-set\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":974,"to":1001}}}}],["1883",{"pageContent":"`data_set()` {.collection-method}\n\nThe `data_set` function sets a value within a nested array or object using \"dot\" notation:\n\n    $data = ['products' => ['desk' => ['price' => 100]]];\n\n    data_set($data, 'products.desk.price', 200);\n\n    // ['products' => ['desk' => ['price' => 200]]]\n\nThis function also accepts wildcards using asterisks and will set values on the target accordingly:\n\n    $data = [\n        'products' => [\n            ['name' => 'Desk 1', 'price' => 100],\n            ['name' => 'Desk 2', 'price' => 150],\n        ],\n    ];\n\n    data_set($data, 'products.*.price', 200);\n\n    /*\n        [\n            'products' => [\n                ['name' => 'Desk 1', 'price' => 200],\n                ['name' => 'Desk 2', 'price' => 200],\n            ],\n        ]\n    */\n\nBy default, any existing values are overwritten. If you wish to only set a value if it doesn't exist, you may pass `false` as the fourth argument to the function:\n\n    $data = ['products' => ['desk' => ['price' => 100]]];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1002,"to":1034}}}}],["1884",{"pageContent":"$data = ['products' => ['desk' => ['price' => 100]]];\n\n    data_set($data, 'products.desk.price', 200, overwrite: false);\n\n    // ['products' => ['desk' => ['price' => 100]]]\n\n<a name=\"method-data-forget\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1034,"to":1040}}}}],["1885",{"pageContent":"`data_forget()` {.collection-method}\n\nThe `data_forget` function removes a value within a nested array or object using \"dot\" notation:\n\n    $data = ['products' => ['desk' => ['price' => 100]]];\n\n    data_forget($data, 'products.desk.price');\n\n    // ['products' => ['desk' => []]]\n\nThis function also accepts wildcards using asterisks and will remove values on the target accordingly:\n\n    $data = [\n        'products' => [\n            ['name' => 'Desk 1', 'price' => 100],\n            ['name' => 'Desk 2', 'price' => 150],\n        ],\n    ];\n\n    data_forget($data, 'products.*.price');\n\n    /*\n        [\n            'products' => [\n                ['name' => 'Desk 1'],\n                ['name' => 'Desk 2'],\n            ],\n        ]\n    */\n\n<a name=\"method-head\"></a>\n#### `head()` {.collection-method}\n\nThe `head` function returns the first element in the given array:\n\n    $array = [100, 200, 300];\n\n    $first = head($array);\n\n    // 100\n\n<a name=\"method-last\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1041,"to":1082}}}}],["1886",{"pageContent":"`head()` {.collection-method}\n\nThe `head` function returns the first element in the given array:\n\n    $array = [100, 200, 300];\n\n    $first = head($array);\n\n    // 100\n\n<a name=\"method-last\"></a>\n#### `last()` {.collection-method}\n\nThe `last` function returns the last element in the given array:\n\n    $array = [100, 200, 300];\n\n    $last = last($array);\n\n    // 300\n\n<a name=\"paths\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1082,"to":1103}}}}],["1887",{"pageContent":"Paths\n\n<a name=\"method-app-path\"></a>\n#### `app_path()` {.collection-method}\n\nThe `app_path` function returns the fully qualified path to your application's `app` directory. You may also use the `app_path` function to generate a fully qualified path to a file relative to the application directory:\n\n    $path = app_path();\n\n    $path = app_path('Http/Controllers/Controller.php');\n\n<a name=\"method-base-path\"></a>\n#### `base_path()` {.collection-method}\n\nThe `base_path` function returns the fully qualified path to your application's root directory. You may also use the `base_path` function to generate a fully qualified path to a given file relative to the project root directory:\n\n    $path = base_path();\n\n    $path = base_path('vendor/bin');\n\n<a name=\"method-config-path\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1104,"to":1124}}}}],["1888",{"pageContent":"`config_path()` {.collection-method}\n\nThe `config_path` function returns the fully qualified path to your application's `config` directory. You may also use the `config_path` function to generate a fully qualified path to a given file within the application's configuration directory:\n\n    $path = config_path();\n\n    $path = config_path('app.php');\n\n<a name=\"method-database-path\"></a>\n#### `database_path()` {.collection-method}\n\nThe `database_path` function returns the fully qualified path to your application's `database` directory. You may also use the `database_path` function to generate a fully qualified path to a given file within the database directory:\n\n    $path = database_path();\n\n    $path = database_path('factories/UserFactory.php');\n\n<a name=\"method-lang-path\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1125,"to":1142}}}}],["1889",{"pageContent":"`lang_path()` {.collection-method}\n\nThe `lang_path` function returns the fully qualified path to your application's `lang` directory. You may also use the `lang_path` function to generate a fully qualified path to a given file within the directory:\n\n    $path = lang_path();\n\n    $path = lang_path('en/messages.php');\n\n> **Note**\n> By default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files, you may publish them via the `lang:publish` Artisan command.\n\n<a name=\"method-mix\"></a>\n#### `mix()` {.collection-method}\n\nThe `mix` function returns the path to a [versioned Mix file](/docs/{{version}}/mix):\n\n    $path = mix('css/app.css');\n\n<a name=\"method-public-path\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1143,"to":1161}}}}],["1890",{"pageContent":"`mix()` {.collection-method}\n\nThe `mix` function returns the path to a [versioned Mix file](/docs/{{version}}/mix):\n\n    $path = mix('css/app.css');\n\n<a name=\"method-public-path\"></a>\n#### `public_path()` {.collection-method}\n\nThe `public_path` function returns the fully qualified path to your application's `public` directory. You may also use the `public_path` function to generate a fully qualified path to a given file within the public directory:\n\n    $path = public_path();\n\n    $path = public_path('css/app.css');\n\n<a name=\"method-resource-path\"></a>\n#### `resource_path()` {.collection-method}\n\nThe `resource_path` function returns the fully qualified path to your application's `resources` directory. You may also use the `resource_path` function to generate a fully qualified path to a given file within the resources directory:\n\n    $path = resource_path();\n\n    $path = resource_path('sass/app.scss');\n\n<a name=\"method-storage-path\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1161,"to":1185}}}}],["1891",{"pageContent":"`storage_path()` {.collection-method}\n\nThe `storage_path` function returns the fully qualified path to your application's `storage` directory. You may also use the `storage_path` function to generate a fully qualified path to a given file within the storage directory:\n\n    $path = storage_path();\n\n    $path = storage_path('app/file.txt');\n\n<a name=\"urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1186,"to":1194}}}}],["1892",{"pageContent":"URLs\n\n<a name=\"method-action\"></a>\n#### `action()` {.collection-method}\n\nThe `action` function generates a URL for the given controller action:\n\n    use App\\Http\\Controllers\\HomeController;\n\n    $url = action([HomeController::class, 'index']);\n\nIf the method accepts route parameters, you may pass them as the second argument to the method:\n\n    $url = action([UserController::class, 'profile'], ['id' => 1]);\n\n<a name=\"method-asset\"></a>\n#### `asset()` {.collection-method}\n\nThe `asset` function generates a URL for an asset using the current scheme of the request (HTTP or HTTPS):\n\n    $url = asset('img/photo.jpg');\n\nYou can configure the asset URL host by setting the `ASSET_URL` variable in your `.env` file. This can be useful if you host your assets on an external service like Amazon S3 or another CDN:\n\n    // ASSET_URL=http://example.com/assets\n\n    $url = asset('img/photo.jpg'); // http://example.com/assets/img/photo.jpg\n\n<a name=\"method-route\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1195,"to":1223}}}}],["1893",{"pageContent":"`route()` {.collection-method}\n\nThe `route` function generates a URL for a given [named route](/docs/{{version}}/routing#named-routes):\n\n    $url = route('route.name');\n\nIf the route accepts parameters, you may pass them as the second argument to the function:\n\n    $url = route('route.name', ['id' => 1]);\n\nBy default, the `route` function generates an absolute URL. If you wish to generate a relative URL, you may pass `false` as the third argument to the function:\n\n    $url = route('route.name', ['id' => 1], false);\n\n<a name=\"method-secure-asset\"></a>\n#### `secure_asset()` {.collection-method}\n\nThe `secure_asset` function generates a URL for an asset using HTTPS:\n\n    $url = secure_asset('img/photo.jpg');\n\n<a name=\"method-secure-url\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1224,"to":1245}}}}],["1894",{"pageContent":"`secure_asset()` {.collection-method}\n\nThe `secure_asset` function generates a URL for an asset using HTTPS:\n\n    $url = secure_asset('img/photo.jpg');\n\n<a name=\"method-secure-url\"></a>\n#### `secure_url()` {.collection-method}\n\nThe `secure_url` function generates a fully qualified HTTPS URL to the given path. Additional URL segments may be passed in the function's second argument:\n\n    $url = secure_url('user/profile');\n\n    $url = secure_url('user/profile', [1]);\n\n<a name=\"method-to-route\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1245,"to":1260}}}}],["1895",{"pageContent":"`to_route()` {.collection-method}\n\nThe `to_route` function generates a [redirect HTTP response](/docs/{{version}}/responses#redirects) for a given [named route](/docs/{{version}}/routing#named-routes):\n\n    return to_route('users.show', ['user' => 1]);\n\nIf necessary, you may pass the HTTP status code that should be assigned to the redirect and any additional response headers as the third and fourth arguments to the `to_route` method:\n\n    return to_route('users.show', ['user' => 1], 302, ['X-Framework' => 'Laravel']);\n\n<a name=\"method-url\"></a>\n#### `url()` {.collection-method}\n\nThe `url` function generates a fully qualified URL to the given path:\n\n    $url = url('user/profile');\n\n    $url = url('user/profile', [1]);\n\nIf no path is provided, an `Illuminate\\Routing\\UrlGenerator` instance is returned:\n\n    $current = url()->current();\n\n    $full = url()->full();\n\n    $previous = url()->previous();\n\n<a name=\"miscellaneous\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1261,"to":1288}}}}],["1896",{"pageContent":"Miscellaneous\n\n<a name=\"method-abort\"></a>\n#### `abort()` {.collection-method}\n\nThe `abort` function throws [an HTTP exception](/docs/{{version}}/errors#http-exceptions) which will be rendered by the [exception handler](/docs/{{version}}/errors#the-exception-handler):\n\n    abort(403);\n\nYou may also provide the exception's message and custom HTTP response headers that should be sent to the browser:\n\n    abort(403, 'Unauthorized.', $headers);\n\n<a name=\"method-abort-if\"></a>\n#### `abort_if()` {.collection-method}\n\nThe `abort_if` function throws an HTTP exception if a given boolean expression evaluates to `true`:\n\n    abort_if(! Auth::user()->isAdmin(), 403);\n\nLike the `abort` method, you may also provide the exception's response text as the third argument and an array of custom response headers as the fourth argument to the function.\n\n<a name=\"method-abort-unless\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1289,"to":1311}}}}],["1897",{"pageContent":"`abort_unless()` {.collection-method}\n\nThe `abort_unless` function throws an HTTP exception if a given boolean expression evaluates to `false`:\n\n    abort_unless(Auth::user()->isAdmin(), 403);\n\nLike the `abort` method, you may also provide the exception's response text as the third argument and an array of custom response headers as the fourth argument to the function.\n\n<a name=\"method-app\"></a>\n#### `app()` {.collection-method}\n\nThe `app` function returns the [service container](/docs/{{version}}/container) instance:\n\n    $container = app();\n\nYou may pass a class or interface name to resolve it from the container:\n\n    $api = app('HelpSpot\\API');\n\n<a name=\"method-auth\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1312,"to":1331}}}}],["1898",{"pageContent":"`auth()` {.collection-method}\n\nThe `auth` function returns an [authenticator](/docs/{{version}}/authentication) instance. You may use it as an alternative to the `Auth` facade:\n\n    $user = auth()->user();\n\nIf needed, you may specify which guard instance you would like to access:\n\n    $user = auth('admin')->user();\n\n<a name=\"method-back\"></a>\n#### `back()` {.collection-method}\n\nThe `back` function generates a [redirect HTTP response](/docs/{{version}}/responses#redirects) to the user's previous location:\n\n    return back($status = 302, $headers = [], $fallback = '/');\n\n    return back();\n\n<a name=\"method-bcrypt\"></a>\n#### `bcrypt()` {.collection-method}\n\nThe `bcrypt` function [hashes](/docs/{{version}}/hashing) the given value using Bcrypt. You may use this function as an alternative to the `Hash` facade:\n\n    $password = bcrypt('my-secret-password');\n\n<a name=\"method-blank\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1332,"to":1358}}}}],["1899",{"pageContent":"`blank()` {.collection-method}\n\nThe `blank` function determines whether the given value is \"blank\":\n\n    blank('');\n    blank('   ');\n    blank(null);\n    blank(collect());\n\n    // true\n\n    blank(0);\n    blank(true);\n    blank(false);\n\n    // false\n\nFor the inverse of `blank`, see the [`filled`](#method-filled) method.\n\n<a name=\"method-broadcast\"></a>\n#### `broadcast()` {.collection-method}\n\nThe `broadcast` function [broadcasts](/docs/{{version}}/broadcasting) the given [event](/docs/{{version}}/events) to its listeners:\n\n    broadcast(new UserRegistered($user));\n\n    broadcast(new UserRegistered($user))->toOthers();\n\n<a name=\"method-cache\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1359,"to":1387}}}}],["1900",{"pageContent":"`cache()` {.collection-method}\n\nThe `cache` function may be used to get values from the [cache](/docs/{{version}}/cache). If the given key does not exist in the cache, an optional default value will be returned:\n\n    $value = cache('key');\n\n    $value = cache('key', 'default');\n\nYou may add items to the cache by passing an array of key / value pairs to the function. You should also pass the number of seconds or duration the cached value should be considered valid:\n\n    cache(['key' => 'value'], 300);\n\n    cache(['key' => 'value'], now()->addSeconds(10));\n\n<a name=\"method-class-uses-recursive\"></a>\n#### `class_uses_recursive()` {.collection-method}\n\nThe `class_uses_recursive` function returns all traits used by a class, including traits used by all of its parent classes:\n\n    $traits = class_uses_recursive(App\\Models\\User::class);\n\n<a name=\"method-collect\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1388,"to":1409}}}}],["1901",{"pageContent":"`collect()` {.collection-method}\n\nThe `collect` function creates a [collection](/docs/{{version}}/collections) instance from the given value:\n\n    $collection = collect(['taylor', 'abigail']);\n\n<a name=\"method-config\"></a>\n#### `config()` {.collection-method}\n\nThe `config` function gets the value of a [configuration](/docs/{{version}}/configuration) variable. The configuration values may be accessed using \"dot\" syntax, which includes the name of the file and the option you wish to access. A default value may be specified and is returned if the configuration option does not exist:\n\n    $value = config('app.timezone');\n\n    $value = config('app.timezone', $default);\n\nYou may set configuration variables at runtime by passing an array of key / value pairs. However, note that this function only affects the configuration value for the current request and does not update your actual configuration values:\n\n    config(['app.debug' => true]);\n\n<a name=\"method-cookie\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1410,"to":1429}}}}],["1902",{"pageContent":"`cookie()` {.collection-method}\n\nThe `cookie` function creates a new [cookie](/docs/{{version}}/requests#cookies) instance:\n\n    $cookie = cookie('name', 'value', $minutes);\n\n<a name=\"method-csrf-field\"></a>\n#### `csrf_field()` {.collection-method}\n\nThe `csrf_field` function generates an HTML `hidden` input field containing the value of the CSRF token. For example, using [Blade syntax](/docs/{{version}}/blade):\n\n    {{ csrf_field() }}\n\n<a name=\"method-csrf-token\"></a>\n#### `csrf_token()` {.collection-method}\n\nThe `csrf_token` function retrieves the value of the current CSRF token:\n\n    $token = csrf_token();\n\n<a name=\"method-decrypt\"></a>\n#### `decrypt()` {.collection-method}\n\nThe `decrypt` function [decrypts](/docs/{{version}}/encryption) the given value. You may use this function as an alternative to the `Crypt` facade:\n\n    $password = decrypt($value);\n\n<a name=\"method-dd\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1430,"to":1457}}}}],["1903",{"pageContent":"`dd()` {.collection-method}\n\nThe `dd` function dumps the given variables and ends the execution of the script:\n\n    dd($value);\n\n    dd($value1, $value2, $value3, ...);\n\nIf you do not want to halt the execution of your script, use the [`dump`](#method-dump) function instead.\n\n<a name=\"method-dispatch\"></a>\n#### `dispatch()` {.collection-method}\n\nThe `dispatch` function pushes the given [job](/docs/{{version}}/queues#creating-jobs) onto the Laravel [job queue](/docs/{{version}}/queues):\n\n    dispatch(new App\\Jobs\\SendEmails);\n\n<a name=\"method-dispatch-sync\"></a>\n#### `dispatch_sync()` {.collection-method}\n\nThe `dispatch_sync` function pushes the given job to the [sync](/docs/{{version}}/queues#synchronous-dispatching) queue so that it is processed immediately:\n\n    dispatch_sync(new App\\Jobs\\SendEmails);\n\n<a name=\"method-dump\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1458,"to":1482}}}}],["1904",{"pageContent":"`dump()` {.collection-method}\n\nThe `dump` function dumps the given variables:\n\n    dump($value);\n\n    dump($value1, $value2, $value3, ...);\n\nIf you want to stop executing the script after dumping the variables, use the [`dd`](#method-dd) function instead.\n\n<a name=\"method-encrypt\"></a>\n#### `encrypt()` {.collection-method}\n\nThe `encrypt` function [encrypts](/docs/{{version}}/encryption) the given value. You may use this function as an alternative to the `Crypt` facade:\n\n    $secret = encrypt('my-secret-value');\n\n<a name=\"method-env\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1483,"to":1500}}}}],["1905",{"pageContent":"`env()` {.collection-method}\n\nThe `env` function retrieves the value of an [environment variable](/docs/{{version}}/configuration#environment-configuration) or returns a default value:\n\n    $env = env('APP_ENV');\n\n    $env = env('APP_ENV', 'production');\n\n> **Warning**  \n> If you execute the `config:cache` command during your deployment process, you should be sure that you are only calling the `env` function from within your configuration files. Once the configuration has been cached, the `.env` file will not be loaded and all calls to the `env` function will return `null`.\n\n<a name=\"method-event\"></a>\n#### `event()` {.collection-method}\n\nThe `event` function dispatches the given [event](/docs/{{version}}/events) to its listeners:\n\n    event(new UserRegistered($user));\n\n<a name=\"method-fake\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1501,"to":1519}}}}],["1906",{"pageContent":"`event()` {.collection-method}\n\nThe `event` function dispatches the given [event](/docs/{{version}}/events) to its listeners:\n\n    event(new UserRegistered($user));\n\n<a name=\"method-fake\"></a>\n#### `fake()` {.collection-method}\n\nThe `fake` function resolves a [Faker](https://github.com/FakerPHP/Faker) singleton from the container, which can be useful when creating fake data in model factories, database seeding, tests, and prototyping views:\n\n```blade\n@for($i = 0; $i < 10; $i++)\n    <dl>\n        <dt>Name</dt>\n        <dd>{{ fake()->name() }}</dd>\n\n        <dt>Email</dt>\n        <dd>{{ fake()->unique()->safeEmail() }}</dd>\n    </dl>\n@endfor\n```\n\nBy default, the `fake` function will utilize the `app.faker_locale` configuration option in your `config/app.php` configuration file; however, you may also specify the locale by passing it to the `fake` function. Each locale will resolve an individual singleton:\n\n    fake('nl_NL')->name()\n\n<a name=\"method-filled\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1519,"to":1546}}}}],["1907",{"pageContent":"`filled()` {.collection-method}\n\nThe `filled` function determines whether the given value is not \"blank\":\n\n    filled(0);\n    filled(true);\n    filled(false);\n\n    // true\n\n    filled('');\n    filled('   ');\n    filled(null);\n    filled(collect());\n\n    // false\n\nFor the inverse of `filled`, see the [`blank`](#method-blank) method.\n\n<a name=\"method-info\"></a>\n#### `info()` {.collection-method}\n\nThe `info` function will write information to your application's [log](/docs/{{version}}/logging):\n\n    info('Some helpful information!');\n\nAn array of contextual data may also be passed to the function:\n\n    info('User login attempt failed.', ['id' => $user->id]);\n\n<a name=\"method-logger\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1547,"to":1577}}}}],["1908",{"pageContent":"`logger()` {.collection-method}\n\nThe `logger` function can be used to write a `debug` level message to the [log](/docs/{{version}}/logging):\n\n    logger('Debug message');\n\nAn array of contextual data may also be passed to the function:\n\n    logger('User has logged in.', ['id' => $user->id]);\n\nA [logger](/docs/{{version}}/errors#logging) instance will be returned if no value is passed to the function:\n\n    logger()->error('You are not allowed here.');\n\n<a name=\"method-method-field\"></a>\n#### `method_field()` {.collection-method}\n\nThe `method_field` function generates an HTML `hidden` input field containing the spoofed value of the form's HTTP verb. For example, using [Blade syntax](/docs/{{version}}/blade):\n\n    <form method=\"POST\">\n        {{ method_field('DELETE') }}\n    </form>\n\n<a name=\"method-now\"></a>\n#### `now()` {.collection-method}\n\nThe `now` function creates a new `Illuminate\\Support\\Carbon` instance for the current time:\n\n    $now = now();\n\n<a name=\"method-old\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1578,"to":1608}}}}],["1909",{"pageContent":"`now()` {.collection-method}\n\nThe `now` function creates a new `Illuminate\\Support\\Carbon` instance for the current time:\n\n    $now = now();\n\n<a name=\"method-old\"></a>\n#### `old()` {.collection-method}\n\nThe `old` function [retrieves](/docs/{{version}}/requests#retrieving-input) an [old input](/docs/{{version}}/requests#old-input) value flashed into the session:\n\n    $value = old('value');\n\n    $value = old('value', 'default');\n\nSince the \"default value\" provided as the second argument to the `old` function is often an attribute of an Eloquent model, Laravel allows you to simply pass the entire Eloquent model as the second argument to the `old` function. When doing so, Laravel will assume the first argument provided to the `old` function is the name of the Eloquent attribute that should be considered the \"default value\":\n\n    {{ old('name', $user->name) }}\n\n    // Is equivalent to...\n\n    {{ old('name', $user) }}\n\n<a name=\"method-optional\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1608,"to":1631}}}}],["1910",{"pageContent":"`optional()` {.collection-method}\n\nThe `optional` function accepts any argument and allows you to access properties or call methods on that object. If the given object is `null`, properties and methods will return `null` instead of causing an error:\n\n    return optional($user->address)->street;\n\n    {!! old('name', optional($user)->name) !!}\n\nThe `optional` function also accepts a closure as its second argument. The closure will be invoked if the value provided as the first argument is not null:\n\n    return optional(User::find($id), function (User $user) {\n        return $user->name;\n    });\n\n<a name=\"method-policy\"></a>\n#### `policy()` {.collection-method}\n\nThe `policy` method retrieves a [policy](/docs/{{version}}/authorization#creating-policies) instance for a given class:\n\n    $policy = policy(App\\Models\\User::class);\n\n<a name=\"method-redirect\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1632,"to":1653}}}}],["1911",{"pageContent":"`redirect()` {.collection-method}\n\nThe `redirect` function returns a [redirect HTTP response](/docs/{{version}}/responses#redirects), or returns the redirector instance if called with no arguments:\n\n    return redirect($to = null, $status = 302, $headers = [], $https = null);\n\n    return redirect('/home');\n\n    return redirect()->route('route.name');\n\n<a name=\"method-report\"></a>\n#### `report()` {.collection-method}\n\nThe `report` function will report an exception using your [exception handler](/docs/{{version}}/errors#the-exception-handler):\n\n    report($e);\n\nThe `report` function also accepts a string as an argument. When a string is given to the function, the function will create an exception with the given string as its message:\n\n    report('Something went wrong.');\n\n<a name=\"method-report-if\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1654,"to":1675}}}}],["1912",{"pageContent":"`report_if()` {.collection-method}\n\nThe `report_if` function will report an exception using your [exception handler](/docs/{{version}}/errors#the-exception-handler) if the given condition is `true`:\n\n    report_if($shouldReport, $e);\n\n    report_if($shouldReport, 'Something went wrong.');\n\n<a name=\"method-report-unless\"></a>\n#### `report_unless()` {.collection-method}\n\nThe `report_unless` function will report an exception using your [exception handler](/docs/{{version}}/errors#the-exception-handler) if the given condition is `false`:\n\n    report_unless($reportingDisabled, $e);\n\n    report_unless($reportingDisabled, 'Something went wrong.');\n\n<a name=\"method-request\"></a>\n#### `request()` {.collection-method}\n\nThe `request` function returns the current [request](/docs/{{version}}/requests) instance or obtains an input field's value from the current request:\n\n    $request = request();\n\n    $value = request('key', $default);\n\n<a name=\"method-rescue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1676,"to":1702}}}}],["1913",{"pageContent":"`rescue()` {.collection-method}\n\nThe `rescue` function executes the given closure and catches any exceptions that occur during its execution. All exceptions that are caught will be sent to your [exception handler](/docs/{{version}}/errors#the-exception-handler); however, the request will continue processing:\n\n    return rescue(function () {\n        return $this->method();\n    });\n\nYou may also pass a second argument to the `rescue` function. This argument will be the \"default\" value that should be returned if an exception occurs while executing the closure:\n\n    return rescue(function () {\n        return $this->method();\n    }, false);\n\n    return rescue(function () {\n        return $this->method();\n    }, function () {\n        return $this->failure();\n    });\n\nA `report` argument may be provided to the `rescue` function to determine if the exception should be reported via the `report` function:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1703,"to":1723}}}}],["1914",{"pageContent":"A `report` argument may be provided to the `rescue` function to determine if the exception should be reported via the `report` function:\n\n    return rescue(function () {\n        return $this->method();\n    }, report: function (Throwable $throwable) {\n        return $throwable instanceof InvalidArgumentException;\n    });\n\n<a name=\"method-resolve\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1723,"to":1731}}}}],["1915",{"pageContent":"`resolve()` {.collection-method}\n\nThe `resolve` function resolves a given class or interface name to an instance using the [service container](/docs/{{version}}/container):\n\n    $api = resolve('HelpSpot\\API');\n\n<a name=\"method-response\"></a>\n#### `response()` {.collection-method}\n\nThe `response` function creates a [response](/docs/{{version}}/responses) instance or obtains an instance of the response factory:\n\n    return response('Hello World', 200, $headers);\n\n    return response()->json(['foo' => 'bar'], 200, $headers);\n\n<a name=\"method-retry\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1732,"to":1747}}}}],["1916",{"pageContent":"`retry()` {.collection-method}\n\nThe `retry` function attempts to execute the given callback until the given maximum attempt threshold is met. If the callback does not throw an exception, its return value will be returned. If the callback throws an exception, it will automatically be retried. If the maximum attempt count is exceeded, the exception will be thrown:\n\n    return retry(5, function () {\n        // Attempt 5 times while resting 100ms between attempts...\n    }, 100);\n\nIf you would like to manually calculate the number of milliseconds to sleep between attempts, you may pass a closure as the third argument to the `retry` function:\n\n    use Exception;\n\n    return retry(5, function () {\n        // ...\n    }, function (int $attempt, Exception $exception) {\n        return $attempt * 100;\n    });\n\nFor convenience, you may provide an array as the first argument to the `retry` function. This array will be used to determine how many milliseconds to sleep between subsequent attempts:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1748,"to":1766}}}}],["1917",{"pageContent":"For convenience, you may provide an array as the first argument to the `retry` function. This array will be used to determine how many milliseconds to sleep between subsequent attempts:\n\n    return retry([100, 200], function () {\n        // Sleep for 100ms on first retry, 200ms on second retry...\n    });\n\nTo only retry under specific conditions, you may pass a closure as the fourth argument to the `retry` function:\n\n    use Exception;\n\n    return retry(5, function () {\n        // ...\n    }, 100, function (Exception $exception) {\n        return $exception instanceof RetryException;\n    });\n\n<a name=\"method-session\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1766,"to":1782}}}}],["1918",{"pageContent":"`session()` {.collection-method}\n\nThe `session` function may be used to get or set [session](/docs/{{version}}/session) values:\n\n    $value = session('key');\n\nYou may set values by passing an array of key / value pairs to the function:\n\n    session(['chairs' => 7, 'instruments' => 3]);\n\nThe session store will be returned if no value is passed to the function:\n\n    $value = session()->get('key');\n\n    session()->put('key', $value);\n\n<a name=\"method-tap\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1783,"to":1799}}}}],["1919",{"pageContent":"`tap()` {.collection-method}\n\nThe `tap` function accepts two arguments: an arbitrary `$value` and a closure. The `$value` will be passed to the closure and then be returned by the `tap` function. The return value of the closure is irrelevant:\n\n    $user = tap(User::first(), function (User $user) {\n        $user->name = 'taylor';\n\n        $user->save();\n    });\n\nIf no closure is passed to the `tap` function, you may call any method on the given `$value`. The return value of the method you call will always be `$value`, regardless of what the method actually returns in its definition. For example, the Eloquent `update` method typically returns an integer. However, we can force the method to return the model itself by chaining the `update` method call through the `tap` function:\n\n    $user = tap($user)->update([\n        'name' => $name,\n        'email' => $email,\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1800,"to":1815}}}}],["1920",{"pageContent":"$user = tap($user)->update([\n        'name' => $name,\n        'email' => $email,\n    ]);\n\nTo add a `tap` method to a class, you may add the `Illuminate\\Support\\Traits\\Tappable` trait to the class. The `tap` method of this trait accepts a Closure as its only argument. The object instance itself will be passed to the Closure and then be returned by the `tap` method:\n\n    return $user->tap(function (User $user) {\n        // ...\n    });\n\n<a name=\"method-throw-if\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1815,"to":1826}}}}],["1921",{"pageContent":"`throw_if()` {.collection-method}\n\nThe `throw_if` function throws the given exception if a given boolean expression evaluates to `true`:\n\n    throw_if(! Auth::user()->isAdmin(), AuthorizationException::class);\n\n    throw_if(\n        ! Auth::user()->isAdmin(),\n        AuthorizationException::class,\n        'You are not allowed to access this page.'\n    );\n\n<a name=\"method-throw-unless\"></a>\n#### `throw_unless()` {.collection-method}\n\nThe `throw_unless` function throws the given exception if a given boolean expression evaluates to `false`:\n\n    throw_unless(Auth::user()->isAdmin(), AuthorizationException::class);\n\n    throw_unless(\n        Auth::user()->isAdmin(),\n        AuthorizationException::class,\n        'You are not allowed to access this page.'\n    );\n\n<a name=\"method-today\"></a>\n#### `today()` {.collection-method}\n\nThe `today` function creates a new `Illuminate\\Support\\Carbon` instance for the current date:\n\n    $today = today();\n\n<a name=\"method-trait-uses-recursive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1827,"to":1859}}}}],["1922",{"pageContent":"`today()` {.collection-method}\n\nThe `today` function creates a new `Illuminate\\Support\\Carbon` instance for the current date:\n\n    $today = today();\n\n<a name=\"method-trait-uses-recursive\"></a>\n#### `trait_uses_recursive()` {.collection-method}\n\nThe `trait_uses_recursive` function returns all traits used by a trait:\n\n    $traits = trait_uses_recursive(\\Illuminate\\Notifications\\Notifiable::class);\n\n<a name=\"method-transform\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1859,"to":1872}}}}],["1923",{"pageContent":"`transform()` {.collection-method}\n\nThe `transform` function executes a closure on a given value if the value is not [blank](#method-blank) and then returns the return value of the closure:\n\n    $callback = function (int $value) {\n        return $value * 2;\n    };\n\n    $result = transform(5, $callback);\n\n    // 10\n\nA default value or closure may be passed as the third argument to the function. This value will be returned if the given value is blank:\n\n    $result = transform(null, $callback, 'The value is blank');\n\n    // The value is blank\n\n<a name=\"method-validator\"></a>\n#### `validator()` {.collection-method}\n\nThe `validator` function creates a new [validator](/docs/{{version}}/validation) instance with the given arguments. You may use it as an alternative to the `Validator` facade:\n\n    $validator = validator($data, $rules, $messages);\n\n<a name=\"method-value\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1873,"to":1898}}}}],["1924",{"pageContent":"`value()` {.collection-method}\n\nThe `value` function returns the value it is given. However, if you pass a closure to the function, the closure will be executed and its returned value will be returned:\n\n    $result = value(true);\n\n    // true\n\n    $result = value(function () {\n        return false;\n    });\n\n    // false\n    \nAdditional arguments may be passed to the `value` function. If the first argument is a closure then the additional parameters will be passed to the closure as arguments, otherwise they will be ignored:\n\n    $result = value(function (string $name) {\n        return $name;\n    }, 'Taylor');\n    \n    // 'Taylor'\n\n<a name=\"method-view\"></a>\n#### `view()` {.collection-method}\n\nThe `view` function retrieves a [view](/docs/{{version}}/views) instance:\n\n    return view('auth.login');\n\n<a name=\"method-with\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1899,"to":1928}}}}],["1925",{"pageContent":"`view()` {.collection-method}\n\nThe `view` function retrieves a [view](/docs/{{version}}/views) instance:\n\n    return view('auth.login');\n\n<a name=\"method-with\"></a>\n#### `with()` {.collection-method}\n\nThe `with` function returns the value it is given. If a closure is passed as the second argument to the function, the closure will be executed and its returned value will be returned:\n\n    $callback = function (mixed $value) {\n        return is_numeric($value) ? $value * 2 : 0;\n    };\n\n    $result = with(5, $callback);\n\n    // 10\n\n    $result = with(null, $callback);\n\n    // 0\n\n    $result = with(5, null);\n\n    // 5\n\n<a name=\"other-utilities\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1928,"to":1955}}}}],["1926",{"pageContent":"Other Utilities\n\n<a name=\"benchmarking\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1956,"to":1958}}}}],["1927",{"pageContent":"Benchmarking\n\nSometimes you may wish to quickly test the performance of certain parts of your application. On those occasions, you may utilize the `Benchmark` support class to measure the number of milliseconds it takes for the given callbacks to complete:\n\n    <?php\n\n    use App\\Models\\User;\n    use Illuminate\\Support\\Benchmark;\n\n    Benchmark::dd(fn () => User::find(1)); // 0.1 ms\n\n    Benchmark::dd([\n        'Scenario 1' => fn () => User::count(), // 0.5 ms\n        'Scenario 2' => fn () => User::all()->count(), // 20.0 ms\n    ]);\n\nBy default, the given callbacks will be executed once (one iteration), and their duration will be displayed in the browser / console.\n\nTo invoke a callback more than once, you may specify the number of iterations that the callback should be invoked as the second argument to the method. When executing a callback more than once, the `Benchmark` class will return the average amount of milliseconds it took to execute the callback across all iterations:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1959,"to":1977}}}}],["1928",{"pageContent":"Benchmark::dd(fn () => User::count(), iterations: 10); // 0.5 ms\n\nSometimes, you may want to benchmark the execution of a callback while still obtaining the value returned by the callback. The `value` method will return a tuple containing the value returned by the callback and the amount of milliseconds it took to execute the callback:\n\n    [$count, $duration] = Benchmark::value(fn () => User::count());\n\n<a name=\"dates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1979,"to":1985}}}}],["1929",{"pageContent":"Dates\n\nLaravel includes [Carbon](https://carbon.nesbot.com/docs/), a powerful date and time manipulation library. To create a new `Carbon` instance, you may invoke the `now` function. This function is globally available within your Laravel application:\n\n```php\n$now = now();\n```\n\nOr, you may create a new `Carbon` instance using the `Illuminate\\Support\\Carbon` class:\n\n```php\nuse Illuminate\\Support\\Carbon;\n\n$now = Carbon::now();\n```\n\nFor a thorough discussion of Carbon and its features, please consult the [official Carbon documentation](https://carbon.nesbot.com/docs/).\n\n<a name=\"lottery\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":1986,"to":2004}}}}],["1930",{"pageContent":"Lottery\n\nLaravel's lottery class may be used to execute callbacks based on a set of given odds. This can be particularly useful when you only want to execute code for a percentage of your incoming requests:\n\n    use Illuminate\\Support\\Lottery;\n\n    Lottery::odds(1, 20)\n        ->winner(fn () => $user->won())\n        ->loser(fn () => $user->lost())\n        ->choose();\n\nYou may combine Laravel's lottery class with other Laravel features. For example, you may wish to only report a small percentage of slow queries to your exception handler. And, since the lottery class is callable, we may pass an instance of the class into any method that accepts callables:\n\n    use Carbon\\CarbonInterval;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\Support\\Lottery;\n\n    DB::whenQueryingForLongerThan(\n        CarbonInterval::seconds(2),\n        Lottery::odds(1, 100)->winner(fn () => report('Querying > 2 seconds.')),\n    );\n\n<a name=\"testing-lotteries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2005,"to":2027}}}}],["1931",{"pageContent":"Testing Lotteries\n\nLaravel provides some simple methods to allow you to easily test your application's lottery invocations:\n\n    // Lottery will always win...\n    Lottery::alwaysWin();\n\n    // Lottery will always lose...\n    Lottery::alwaysLose();\n\n    // Lottery will win then lose, and finally return to normal behavior...\n    Lottery::fix([true, false]);\n\n    // Lottery will return to normal behavior...\n    Lottery::determineResultsNormally();\n\n<a name=\"pipeline\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2028,"to":2044}}}}],["1932",{"pageContent":"Pipeline\n\nLaravel's `Pipeline` facade provides a convenient way to \"pipe\" a given input through a series of invokable classes, closures, or callables, giving each class the opportunity to inspect or modify the input and invoke the next callable in the pipeline:\n\n```php\nuse Closure;\nuse App\\Models\\User;\nuse Illuminate\\Support\\Facades\\Pipeline;\n\n$user = Pipeline::send($user)\n            ->through([\n                function (User $user, Closure $next) {\n                    // ...\n\n                    return $next($user);\n                },\n                function (User $user, Closure $next) {\n                    // ...\n\n                    return $next($user);\n                },\n            ])\n            ->then(fn (User $user) => $user);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2045,"to":2067}}}}],["1933",{"pageContent":"As you can see, each invokable class or closure in the pipeline is provided the input and a `$next` closure. Invoking the `$next` closure will invoke the next callable in the pipeline. As you may have noticed, this is very similar to [middleware](/docs/{{version}}/middleware).\n\nWhen the last callable in the pipeline invokes the `$next` closure, the callable provided to the `then` method will be invoked. Typically, this callable will simply return the given input.\n\nOf course, as discussed previously, you are not limited to providing closures to your pipeline. You may also provide invokable classes. If a class name is provided, the class will be instantiated via Laravel's [service container](/docs/{{version}}/container), allowing dependencies to be injected into the invokable class:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2070,"to":2074}}}}],["1934",{"pageContent":"```php\n$user = Pipeline::send($user)\n            ->through([\n                GenerateProfilePhoto::class,\n                ActivateSubscription::class,\n                SendWelcomeEmail::class,\n            ])\n            ->then(fn (User $user) => $user);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2076,"to":2083}}}}],["1935",{"pageContent":"<a name=\"sleep\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2086,"to":2086}}}}],["1936",{"pageContent":"Sleep\n\nLaravel's `Sleep` class is a light-weight wrapper around PHP's native `sleep` and `usleep` functions, offering greater testability while also exposing a developer friendly API for working with time:\n\n    use Illuminate\\Support\\Sleep;\n\n    $waiting = true;\n\n    while ($waiting) {\n        Sleep::for(1)->second();\n\n        $waiting = /* ... */;\n    }\n\nThe `Sleep` class offers a variety of methods that allow you to work with different units of time:\n\n    // Pause execution for 90 seconds...\n    Sleep::for(1.5)->minutes();\n\n    // Pause execution for 2 seconds...\n    Sleep::for(2)->seconds();\n\n    // Pause execution for 500 milliseconds...\n    Sleep::for(500)->milliseconds();\n\n    // Pause execution for 5,000 microseconds...\n    Sleep::for(5000)->microseconds();\n\n    // Pause execution until a given time...\n    Sleep::until(now()->addMinute());\n\n    // Alias of PHP's native \"sleep\" function...\n    Sleep::sleep(2);\n\n    // Alias of PHP's native \"usleep\" function...\n    Sleep::usleep(5000);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2087,"to":2122}}}}],["1937",{"pageContent":"// Alias of PHP's native \"sleep\" function...\n    Sleep::sleep(2);\n\n    // Alias of PHP's native \"usleep\" function...\n    Sleep::usleep(5000);\n\nTo easily combine units of time, you may use the `and` method:\n\n    Sleep::for(1)->second()->and(10)->milliseconds();\n\n<a name=\"testing-sleep\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2122,"to":2132}}}}],["1938",{"pageContent":"Testing Sleep\n\nWhen testing code that utilizes the `Sleep` class or PHP's native sleep functions, your test will pause execution. As you might expect, this makes your test suite significantly slower. For example, imagine you are testing the following code:\n\n    $waiting = /* ... */;\n\n    $seconds = 1;\n\n    while ($waiting) {\n        Sleep::for($seconds++)->seconds();\n\n        $waiting = /* ... */;\n    }\n\nTypically, testing this code would take _at least_ one second. Luckily, the `Sleep` class allows us to \"fake\" sleeping so that our test suite stays fast:\n\n    public function test_it_waits_until_ready()\n    {\n        Sleep::fake();\n\n        // ...\n    }\n\nWhen faking the `Sleep` class, the actual execution pause is by-passed, leading to a substantially faster test.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2133,"to":2156}}}}],["1939",{"pageContent":"// ...\n    }\n\nWhen faking the `Sleep` class, the actual execution pause is by-passed, leading to a substantially faster test.\n\nOnce the `Sleep` class has been faked, it is possible to make assertions against the expected \"sleeps\" that should have occurred. To illustrate this, let's imagine we are testing code that pauses execution three times, with each pause increasing by a single second. Using the `assertSequence` method, we can assert that our code \"slept\" for the proper amount of time while keeping our test fast:\n\n    public function test_it_checks_if_ready_four_times()\n    {\n        Sleep::fake();\n\n        // ...\n\n        Sleep::assertSequence([\n            Sleep::for(1)->second(),\n            Sleep::for(2)->seconds(),\n            Sleep::for(3)->seconds(),\n        ]);\n    }\n\nOf course, the `Sleep` class offers a variety of other assertions you may use when testing:\n\n    use Carbon\\CarbonInterval as Duration;\n    use Illuminate\\Support\\Sleep;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2156,"to":2179}}}}],["1940",{"pageContent":"Of course, the `Sleep` class offers a variety of other assertions you may use when testing:\n\n    use Carbon\\CarbonInterval as Duration;\n    use Illuminate\\Support\\Sleep;\n\n    // Assert that sleep was called 3 times...\n    Sleep::assertSleptTimes(3);\n\n    // Assert against the duration of sleep...\n    Sleep::assertSlept(function (Duration $duration): bool {\n        return /* ... */;\n    }, times: 1);\n\n    // Assert that the Sleep class was never invoked...\n    Sleep::assertNeverSlept();\n\n    // Assert that, even if Sleep was called, no execution paused occurred...\n    Sleep::assertInsomniac();\n\nSometimes it may be useful to perform an action whenever a fake sleep occurs in your application code. To achieve this, you may provide a callback to the `whenFakingSleep` method. In the following example, we use Laravel's [time manipulation helpers](/docs/{{version}}/mocking#interacting-with-time) to instantly progress time by the duration of each sleep:\n\n```php\nuse Carbon\\CarbonInterval as Duration;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2179,"to":2201}}}}],["1941",{"pageContent":"```php\nuse Carbon\\CarbonInterval as Duration;\n\n$this->freezeTime();\n\nSleep::fake();\n\nSleep::whenFakingSleep(function (Duration $duration) {\n    // Progress time when faking sleep...\n    $this->travel($duration->totalMilliseconds)->milliseconds();\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2201,"to":2211}}}}],["1942",{"pageContent":"Laravel uses the `Sleep` class internally whenever it is pausing execution. For example, the [`retry`](#method-retry) helper uses the `Sleep` class when sleeping, allowing for improved testability when using that helper.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/helpers.md","loc":{"lines":{"from":2214,"to":2214}}}}],["1943",{"pageContent":"# Laravel Homestead","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":1,"to":1}}}}],["1944",{"pageContent":"- [Introduction](#introduction)\n- [Installation & Setup](#installation-and-setup)\n    - [First Steps](#first-steps)\n    - [Configuring Homestead](#configuring-homestead)\n    - [Configuring Nginx Sites](#configuring-nginx-sites)\n    - [Configuring Services](#configuring-services)\n    - [Launching The Vagrant Box](#launching-the-vagrant-box)\n    - [Per Project Installation](#per-project-installation)\n    - [Installing Optional Features](#installing-optional-features)\n    - [Aliases](#aliases)\n- [Updating Homestead](#updating-homestead)\n- [Daily Usage](#daily-usage)\n    - [Connecting Via SSH](#connecting-via-ssh)\n    - [Adding Additional Sites](#adding-additional-sites)\n    - [Environment Variables](#environment-variables)\n    - [Ports](#ports)\n    - [PHP Versions](#php-versions)\n    - [Connecting To Databases](#connecting-to-databases)\n    - [Database Backups](#database-backups)\n    - [Configuring Cron Schedules](#configuring-cron-schedules)\n    - [Configuring MailHog](#configuring-mailhog)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":3,"to":23}}}}],["1945",{"pageContent":"- [Database Backups](#database-backups)\n    - [Configuring Cron Schedules](#configuring-cron-schedules)\n    - [Configuring MailHog](#configuring-mailhog)\n    - [Configuring Minio](#configuring-minio)\n    - [Laravel Dusk](#laravel-dusk)\n    - [Sharing Your Environment](#sharing-your-environment)\n- [Debugging & Profiling](#debugging-and-profiling)\n    - [Debugging Web Requests With Xdebug](#debugging-web-requests)\n    - [Debugging CLI Applications](#debugging-cli-applications)\n    - [Profiling Applications with Blackfire](#profiling-applications-with-blackfire)\n- [Network Interfaces](#network-interfaces)\n- [Extending Homestead](#extending-homestead)\n- [Provider Specific Settings](#provider-specific-settings)\n    - [VirtualBox](#provider-specific-virtualbox)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":23,"to":36}}}}],["1946",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":38,"to":38}}}}],["1947",{"pageContent":"Introduction\n\nLaravel strives to make the entire PHP development experience delightful, including your local development environment. [Laravel Homestead](https://github.com/laravel/homestead) is an official, pre-packaged Vagrant box that provides you a wonderful development environment without requiring you to install PHP, a web server, and any other server software on your local machine.\n\n[Vagrant](https://www.vagrantup.com) provides a simple, elegant way to manage and provision Virtual Machines. Vagrant boxes are completely disposable. If something goes wrong, you can destroy and re-create the box in minutes!\n\nHomestead runs on any Windows, macOS, or Linux system and includes Nginx, PHP, MySQL, PostgreSQL, Redis, Memcached, Node, and all of the other software you need to develop amazing Laravel applications.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":39,"to":45}}}}],["1948",{"pageContent":"> **Warning**  \n> If you are using Windows, you may need to enable hardware virtualization (VT-x). It can usually be enabled via your BIOS. If you are using Hyper-V on a UEFI system you may additionally need to disable Hyper-V in order to access VT-x.\n\n<a name=\"included-software\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":47,"to":50}}}}],["1949",{"pageContent":"Included Software\n\n<style>\n    #software-list > ul {\n        column-count: 2; -moz-column-count: 2; -webkit-column-count: 2;\n        column-gap: 5em; -moz-column-gap: 5em; -webkit-column-gap: 5em;\n        line-height: 1.9;\n    }\n</style>\n\n<div id=\"software-list\" markdown=\"1\">\n\n- Ubuntu 20.04\n- Git\n- PHP 8.2\n- PHP 8.1\n- PHP 8.0\n- PHP 7.4\n- PHP 7.3\n- PHP 7.2\n- PHP 7.1\n- PHP 7.0\n- PHP 5.6\n- Nginx\n- MySQL 8.0\n- lmm\n- Sqlite3\n- PostgreSQL 15\n- Composer\n- Docker\n- Node (With Yarn, Bower, Grunt, and Gulp)\n- Redis\n- Memcached\n- Beanstalkd\n- Mailhog\n- avahi\n- ngrok\n- Xdebug\n- XHProf / Tideways / XHGui\n- wp-cli\n\n</div>\n\n<a name=\"optional-software\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":51,"to":94}}}}],["1950",{"pageContent":"Optional Software\n\n<style>\n    #software-list > ul {\n        column-count: 2; -moz-column-count: 2; -webkit-column-count: 2;\n        column-gap: 5em; -moz-column-gap: 5em; -webkit-column-gap: 5em;\n        line-height: 1.9;\n    }\n</style>\n\n<div id=\"software-list\" markdown=\"1\">\n\n- Apache\n- Blackfire\n- Cassandra\n- Chronograf\n- CouchDB\n- Crystal & Lucky Framework\n- Elasticsearch\n- EventStoreDB\n- Flyway\n- Gearman\n- Go\n- Grafana\n- InfluxDB\n- Logstash\n- Mailpit <small>(Replaces Mailhog)</small>\n- MariaDB\n- Meilisearch\n- MinIO\n- MongoDB\n- Neo4j\n- Oh My Zsh\n- Open Resty\n- PM2\n- Python\n- R\n- RabbitMQ\n- Rust\n- RVM (Ruby Version Manager)\n- Solr\n- TimescaleDB\n- Trader <small>(PHP extension)</small>\n- Webdriver & Laravel Dusk Utilities\n\n</div>\n\n<a name=\"installation-and-setup\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":95,"to":142}}}}],["1951",{"pageContent":"Installation & Setup\n\n<a name=\"first-steps\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":143,"to":145}}}}],["1952",{"pageContent":"First Steps\n\nBefore launching your Homestead environment, you must install [Vagrant](https://developer.hashicorp.com/vagrant/downloads) as well as one of the following supported providers:\n\n- [VirtualBox 6.1.x](https://www.virtualbox.org/wiki/Download_Old_Builds_6_1)\n- [Parallels](https://www.parallels.com/products/desktop/)\n\nAll of these software packages provide easy-to-use visual installers for all popular operating systems.\n\nTo use the Parallels provider, you will need to install [Parallels Vagrant plug-in](https://github.com/Parallels/vagrant-parallels). It is free of charge.\n\n<a name=\"installing-homestead\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":146,"to":157}}}}],["1953",{"pageContent":"Installing Homestead\n\nYou may install Homestead by cloning the Homestead repository onto your host machine. Consider cloning the repository into a `Homestead` folder within your \"home\" directory, as the Homestead virtual machine will serve as the host to all of your Laravel applications. Throughout this documentation, we will refer to this directory as your \"Homestead directory\":\n\n```shell\ngit clone https://github.com/laravel/homestead.git ~/Homestead\n```\n\nAfter cloning the Laravel Homestead repository, you should checkout the `release` branch. This branch always contains the latest stable release of Homestead:\n\n```shell\ncd ~/Homestead\n\ngit checkout release","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":158,"to":171}}}}],["1954",{"pageContent":"Next, execute the `bash init.sh` command from the Homestead directory to create the `Homestead.yaml` configuration file. The `Homestead.yaml` file is where you will configure all of the settings for your Homestead installation. This file will be placed in the Homestead directory:\n\n```shell\n# macOS / Linux...\nbash init.sh\n\n# Windows...\ninit.bat\n```\n\n<a name=\"configuring-homestead\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":174,"to":184}}}}],["1955",{"pageContent":"Configuring Homestead\n\n<a name=\"setting-your-provider\"></a>\n#### Setting Your Provider\n\nThe `provider` key in your `Homestead.yaml` file indicates which Vagrant provider should be used: `virtualbox` or `parallels`:\n\n    provider: virtualbox\n\n> **Warning**  \n> If you are using Apple Silicon the Parallels provider is required.\n\n<a name=\"configuring-shared-folders\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":185,"to":197}}}}],["1956",{"pageContent":"Configuring Shared Folders\n\nThe `folders` property of the `Homestead.yaml` file lists all of the folders you wish to share with your Homestead environment. As files within these folders are changed, they will be kept in sync between your local machine and the Homestead virtual environment. You may configure as many shared folders as necessary:\n\n```yaml\nfolders:\n    - map: ~/code/project1\n      to: /home/vagrant/project1","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":198,"to":205}}}}],["1957",{"pageContent":"> **Warning**  \n> Windows users should not use the `~/` path syntax and instead should use the full path to their project, such as `C:\\Users\\user\\Code\\project1`.\n\nYou should always map individual applications to their own folder mapping instead of mapping a single large directory that contains all of your applications. When you map a folder, the virtual machine must keep track of all disk IO for *every* file in the folder. You may experience reduced performance if you have a large number of files in a folder:\n\n```yaml\nfolders:\n    - map: ~/code/project1\n      to: /home/vagrant/project1\n    - map: ~/code/project2\n      to: /home/vagrant/project2","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":208,"to":218}}}}],["1958",{"pageContent":"> **Warning**  \n> You should never mount `.` (the current directory) when using Homestead. This causes Vagrant to not map the current folder to `/vagrant` and will break optional features and cause unexpected results while provisioning.\n\nTo enable [NFS](https://developer.hashicorp.com/vagrant/docs/synced-folders/nfs), you may add a `type` option to your folder mapping:\n\n```yaml\nfolders:\n    - map: ~/code/project1\n      to: /home/vagrant/project1\n      type: \"nfs\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":221,"to":230}}}}],["1959",{"pageContent":"> **Warning**  \n> When using NFS on Windows, you should consider installing the [vagrant-winnfsd](https://github.com/winnfsd/vagrant-winnfsd) plug-in. This plug-in will maintain the correct user / group permissions for files and directories within the Homestead virtual machine.\n\nYou may also pass any options supported by Vagrant's [Synced Folders](https://developer.hashicorp.com/vagrant/docs/synced-folders/basic_usage) by listing them under the `options` key:\n\n```yaml\nfolders:\n    - map: ~/code/project1\n      to: /home/vagrant/project1\n      type: \"rsync\"\n      options:\n          rsync__args: [\"--verbose\", \"--archive\", \"--delete\", \"-zz\"]\n          rsync__exclude: [\"node_modules\"]\n```\n\n<a name=\"configuring-nginx-sites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":233,"to":248}}}}],["1960",{"pageContent":"Configuring Nginx Sites\n\nNot familiar with Nginx? No problem. Your `Homestead.yaml` file's `sites` property allows you to easily map a \"domain\" to a folder on your Homestead environment. A sample site configuration is included in the `Homestead.yaml` file. Again, you may add as many sites to your Homestead environment as necessary. Homestead can serve as a convenient, virtualized environment for every Laravel application you are working on:\n\n```yaml\nsites:\n    - map: homestead.test\n      to: /home/vagrant/project1/public","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":249,"to":256}}}}],["1961",{"pageContent":"If you change the `sites` property after provisioning the Homestead virtual machine, you should execute the `vagrant reload --provision` command in your terminal to update the Nginx configuration on the virtual machine.\n\n> **Warning**  \n> Homestead scripts are built to be as idempotent as possible. However, if you are experiencing issues while provisioning you should destroy and rebuild the machine by executing the `vagrant destroy && vagrant up` command.\n\n<a name=\"hostname-resolution\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":259,"to":264}}}}],["1962",{"pageContent":"Hostname Resolution\n\nHomestead publishes hostnames using `mDNS` for automatic host resolution. If you set `hostname: homestead` in your `Homestead.yaml` file, the host will be available at `homestead.local`. macOS, iOS, and Linux desktop distributions include `mDNS` support by default. If you are using Windows, you must install [Bonjour Print Services for Windows](https://support.apple.com/kb/DL999?viewlocale=en_US&locale=en_US).\n\nUsing automatic hostnames works best for [per project installations](#per-project-installation) of Homestead. If you host multiple sites on a single Homestead instance, you may add the \"domains\" for your web sites to the `hosts` file on your machine. The `hosts` file will redirect requests for your Homestead sites into your Homestead virtual machine. On macOS and Linux, this file is located at `/etc/hosts`. On Windows, it is located at `C:\\Windows\\System32\\drivers\\etc\\hosts`. The lines you add to this file will look like the following:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":265,"to":269}}}}],["1963",{"pageContent":"192.168.56.56  homestead.test\n\nMake sure the IP address listed is the one set in your `Homestead.yaml` file. Once you have added the domain to your `hosts` file and launched the Vagrant box you will be able to access the site via your web browser:\n\n```shell\nhttp://homestead.test","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":271,"to":276}}}}],["1964",{"pageContent":"<a name=\"configuring-services\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":279,"to":279}}}}],["1965",{"pageContent":"Configuring Services\n\nHomestead starts several services by default; however, you may customize which services are enabled or disabled during provisioning. For example, you may enable PostgreSQL and disable MySQL by modifying the `services` option within your `Homestead.yaml` file:\n\n```yaml\nservices:\n    - enabled:\n        - \"postgresql\"\n    - disabled:\n        - \"mysql\"\n```\n\nThe specified services will be started or stopped based on their order in the `enabled` and `disabled` directives.\n\n<a name=\"launching-the-vagrant-box\"></a>\n### Launching The Vagrant Box\n\nOnce you have edited the `Homestead.yaml` to your liking, run the `vagrant up` command from your Homestead directory. Vagrant will boot the virtual machine and automatically configure your shared folders and Nginx sites.\n\nTo destroy the machine, you may use the `vagrant destroy` command.\n\n<a name=\"per-project-installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":280,"to":301}}}}],["1966",{"pageContent":"Per Project Installation\n\nInstead of installing Homestead globally and sharing the same Homestead virtual machine across all of your projects, you may instead configure a Homestead instance for each project you manage. Installing Homestead per project may be beneficial if you wish to ship a `Vagrantfile` with your project, allowing others working on the project to `vagrant up` immediately after cloning the project's repository.\n\nYou may install Homestead into your project using the Composer package manager:\n\n```shell\ncomposer require laravel/homestead --dev\n```\n\nOnce Homestead has been installed, invoke Homestead's `make` command to generate the `Vagrantfile` and `Homestead.yaml` file for your project. These files will be placed in the root of your project. The `make` command will automatically configure the `sites` and `folders` directives in the `Homestead.yaml` file:\n\n```shell\n# macOS / Linux...\nphp vendor/bin/homestead make\n\n# Windows...\nvendor\\\\bin\\\\homestead make","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":302,"to":319}}}}],["1967",{"pageContent":"Next, run the `vagrant up` command in your terminal and access your project at `http://homestead.test` in your browser. Remember, you will still need to add an `/etc/hosts` file entry for `homestead.test` or the domain of your choice if you are not using automatic [hostname resolution](#hostname-resolution).\n\n<a name=\"installing-optional-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":322,"to":324}}}}],["1968",{"pageContent":"Installing Optional Features\n\nOptional software is installed using the `features` option within your `Homestead.yaml` file. Most features can be enabled or disabled with a boolean value, while some features allow multiple configuration options:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":325,"to":327}}}}],["1969",{"pageContent":"```yaml\nfeatures:\n    - blackfire:\n        server_id: \"server_id\"\n        server_token: \"server_value\"\n        client_id: \"client_id\"\n        client_token: \"client_value\"\n    - cassandra: true\n    - chronograf: true\n    - couchdb: true\n    - crystal: true\n    - elasticsearch:\n        version: 7.9.0\n    - eventstore: true\n        version: 21.2.0\n    - flyway: true\n    - gearman: true\n    - golang: true\n    - grafana: true\n    - influxdb: true\n    - logstash: true\n    - mailpit: true\n    - mariadb: true\n    - meilisearch: true\n    - minio: true\n    - mongodb: true\n    - mysql: true\n    - neo4j: true\n    - ohmyzsh: true\n    - openresty: true\n    - pm2: true\n    - python: true\n    - r-base: true\n    - rabbitmq: true\n    - rustc: true\n    - rvm: true\n    - solr: true\n    - timescaledb: true\n    - trader: true\n    - webdriver: true","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":329,"to":368}}}}],["1970",{"pageContent":"<a name=\"elasticsearch\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":371,"to":371}}}}],["1971",{"pageContent":"Elasticsearch\n\nYou may specify a supported version of Elasticsearch, which must be an exact version number (major.minor.patch). The default installation will create a cluster named 'homestead'. You should never give Elasticsearch more than half of the operating system's memory, so make sure your Homestead virtual machine has at least twice the Elasticsearch allocation.\n\n> **Note**  \n> Check out the [Elasticsearch documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current) to learn how to customize your configuration.\n\n<a name=\"mariadb\"></a>\n#### MariaDB\n\nEnabling MariaDB will remove MySQL and install MariaDB. MariaDB typically serves as a drop-in replacement for MySQL, so you should still use the `mysql` database driver in your application's database configuration.\n\n<a name=\"mongodb\"></a>\n#### MongoDB\n\nThe default MongoDB installation will set the database username to `homestead` and the corresponding password to `secret`.\n\n<a name=\"neo4j\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":372,"to":389}}}}],["1972",{"pageContent":"MongoDB\n\nThe default MongoDB installation will set the database username to `homestead` and the corresponding password to `secret`.\n\n<a name=\"neo4j\"></a>\n#### Neo4j\n\nThe default Neo4j installation will set the database username to `homestead` and the corresponding password to `secret`. To access the Neo4j browser, visit `http://homestead.test:7474` via your web browser. The ports `7687` (Bolt), `7474` (HTTP), and `7473` (HTTPS) are ready to serve requests from the Neo4j client.\n\n<a name=\"aliases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":389,"to":398}}}}],["1973",{"pageContent":"Aliases\n\nYou may add Bash aliases to your Homestead virtual machine by modifying the `aliases` file within your Homestead directory:\n\n```shell\nalias c='clear'\nalias ..='cd ..'\n```\n\nAfter you have updated the `aliases` file, you should re-provision the Homestead virtual machine using the `vagrant reload --provision` command. This will ensure that your new aliases are available on the machine.\n\n<a name=\"updating-homestead\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":399,"to":410}}}}],["1974",{"pageContent":"Updating Homestead\n\nBefore you begin updating Homestead you should ensure you have removed your current virtual machine by running the following command in your Homestead directory:\n\n```shell\nvagrant destroy\n```\n\nNext, you need to update the Homestead source code. If you cloned the repository, you can execute the following commands at the location you originally cloned the repository:\n\n```shell\ngit fetch\n\ngit pull origin release\n```\n\nThese commands pull the latest Homestead code from the GitHub repository, fetch the latest tags, and then check out the latest tagged release. You can find the latest stable release version on Homestead's [GitHub releases page](https://github.com/laravel/homestead/releases).\n\nIf you have installed Homestead via your project's `composer.json` file, you should ensure your `composer.json` file contains `\"laravel/homestead\": \"^12\"` and update your dependencies:\n\n```shell\ncomposer update","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":411,"to":432}}}}],["1975",{"pageContent":"Next, you should update the Vagrant box using the `vagrant box update` command:\n\n```shell\nvagrant box update\n```\n\nAfter updating the Vagrant box, you should run the `bash init.sh` command from the Homestead directory in order to update Homestead's additional configuration files. You will be asked whether you wish to overwrite your existing `Homestead.yaml`, `after.sh`, and `aliases` files:\n\n```shell\n# macOS / Linux...\nbash init.sh\n\n# Windows...\ninit.bat\n```\n\nFinally, you will need to regenerate your Homestead virtual machine to utilize the latest Vagrant installation:\n\n```shell\nvagrant up\n```\n\n<a name=\"daily-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":435,"to":457}}}}],["1976",{"pageContent":"Daily Usage\n\n<a name=\"connecting-via-ssh\"></a>\n### Connecting Via SSH\n\nYou can SSH into your virtual machine by executing the `vagrant ssh` terminal command from your Homestead directory.\n\n<a name=\"adding-additional-sites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":458,"to":465}}}}],["1977",{"pageContent":"Adding Additional Sites\n\nOnce your Homestead environment is provisioned and running, you may want to add additional Nginx sites for your other Laravel projects. You can run as many Laravel projects as you wish on a single Homestead environment. To add an additional site, add the site to your `Homestead.yaml` file.\n\n```yaml\nsites:\n    - map: homestead.test\n      to: /home/vagrant/project1/public\n    - map: another.test\n      to: /home/vagrant/project2/public","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":466,"to":475}}}}],["1978",{"pageContent":"> **Warning**  \n> You should ensure that you have configured a [folder mapping](#configuring-shared-folders) for the project's directory before adding the site.\n\nIf Vagrant is not automatically managing your \"hosts\" file, you may need to add the new site to that file as well. On macOS and Linux, this file is located at `/etc/hosts`. On Windows, it is located at `C:\\Windows\\System32\\drivers\\etc\\hosts`:\n\n    192.168.56.56  homestead.test\n    192.168.56.56  another.test\n\nOnce the site has been added, execute the `vagrant reload --provision` terminal command from your Homestead directory.\n\n<a name=\"site-types\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":478,"to":488}}}}],["1979",{"pageContent":"Site Types\n\nHomestead supports several \"types\" of sites which allow you to easily run projects that are not based on Laravel. For example, we may easily add a Statamic application to Homestead using the `statamic` site type:\n\n```yaml\nsites:\n    - map: statamic.test\n      to: /home/vagrant/my-symfony-project/web\n      type: \"statamic\"\n```\n\nThe available site types are: `apache`, `apache-proxy`, `apigility`, `expressive`, `laravel` (the default), `proxy` (for nginx), `silverstripe`, `statamic`, `symfony2`, `symfony4`, and `zf`.\n\n<a name=\"site-parameters\"></a>\n#### Site Parameters\n\nYou may add additional Nginx `fastcgi_param` values to your site via the `params` site directive:\n\n```yaml\nsites:\n    - map: homestead.test\n      to: /home/vagrant/project1/public\n      params:\n          - key: FOO\n            value: BAR\n```\n\n<a name=\"environment-variables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":489,"to":516}}}}],["1980",{"pageContent":"Environment Variables\n\nYou can define global environment variables by adding them to your `Homestead.yaml` file:\n\n```yaml\nvariables:\n    - key: APP_ENV\n      value: local\n    - key: FOO\n      value: bar\n```\n\nAfter updating the `Homestead.yaml` file, be sure to re-provision the machine by executing the `vagrant reload --provision` command. This will update the PHP-FPM configuration for all of the installed PHP versions and also update the environment for the `vagrant` user.\n\n<a name=\"ports\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":517,"to":531}}}}],["1981",{"pageContent":"Ports\n\nBy default, the following ports are forwarded to your Homestead environment:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- **HTTP:** 8000 &rarr; Forwards To 80\n- **HTTPS:** 44300 &rarr; Forwards To 443\n\n</div>\n\n<a name=\"forwarding-additional-ports\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":532,"to":543}}}}],["1982",{"pageContent":"Forwarding Additional Ports\n\nIf you wish, you may forward additional ports to the Vagrant box by defining a `ports` configuration entry within your `Homestead.yaml` file. After updating the `Homestead.yaml` file, be sure to re-provision the machine by executing the `vagrant reload --provision` command:\n\n```yaml\nports:\n    - send: 50000\n      to: 5000\n    - send: 7777\n      to: 777\n      protocol: udp\n```\n\nBelow is a list of additional Homestead service ports that you may wish to map from your host machine to your Vagrant box:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- **SSH:** 2222 &rarr; To 22\n- **ngrok UI:** 4040 &rarr; To 4040\n- **MySQL:** 33060 &rarr; To 3306\n- **PostgreSQL:** 54320 &rarr; To 5432\n- **MongoDB:** 27017 &rarr; To 27017\n- **Mailhog:** 8025 &rarr; To 8025\n- **Minio:** 9600 &rarr; To 9600\n\n</div>\n\n<a name=\"php-versions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":544,"to":571}}}}],["1983",{"pageContent":"PHP Versions\n\nHomestead supports running multiple versions of PHP on the same virtual machine. You may specify which version of PHP to use for a given site within your `Homestead.yaml` file. The available PHP versions are: \"5.6\", \"7.0\", \"7.1\", \"7.2\", \"7.3\", \"7.4\", \"8.0\", \"8.1\", and \"8.2\" (the default):\n\n```yaml\nsites:\n    - map: homestead.test\n      to: /home/vagrant/project1/public\n      php: \"7.1\"\n```\n\n[Within your Homestead virtual machine](#connecting-via-ssh), you may use any of the supported PHP versions via the CLI:\n\n```shell\nphp5.6 artisan list\nphp7.0 artisan list\nphp7.1 artisan list\nphp7.2 artisan list\nphp7.3 artisan list\nphp7.4 artisan list\nphp8.0 artisan list\nphp8.1 artisan list\nphp8.2 artisan list\n```\n\nYou may change the default version of PHP used by the CLI by issuing the following commands from within your Homestead virtual machine:\n\n```shell\nphp56\nphp70\nphp71\nphp72\nphp73\nphp74\nphp80\nphp81\nphp82\n```\n\n<a name=\"connecting-to-databases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":572,"to":611}}}}],["1984",{"pageContent":"Connecting To Databases\n\nA `homestead` database is configured for both MySQL and PostgreSQL out of the box. To connect to your MySQL or PostgreSQL database from your host machine's database client, you should connect to `127.0.0.1` on port `33060` (MySQL) or `54320` (PostgreSQL). The username and password for both databases is `homestead` / `secret`.\n\n> **Warning**  \n> You should only use these non-standard ports when connecting to the databases from your host machine. You will use the default 3306 and 5432 ports in your Laravel application's `database` configuration file since Laravel is running _within_ the virtual machine.\n\n<a name=\"database-backups\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":612,"to":619}}}}],["1985",{"pageContent":"Database Backups\n\nHomestead can automatically backup your database when your Homestead virtual machine is destroyed. To utilize this feature, you must be using Vagrant 2.1.0 or greater. Or, if you are using an older version of Vagrant, you must install the `vagrant-triggers` plug-in. To enable automatic database backups, add the following line to your `Homestead.yaml` file:\n\n    backup: true\n\nOnce configured, Homestead will export your databases to `.backup/mysql_backup` and `.backup/postgres_backup` directories when the `vagrant destroy` command is executed. These directories can be found in the folder where you installed Homestead or in the root of your project if you are using the [per project installation](#per-project-installation) method.\n\n<a name=\"configuring-cron-schedules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":620,"to":628}}}}],["1986",{"pageContent":"Configuring Cron Schedules\n\nLaravel provides a convenient way to [schedule cron jobs](/docs/{{version}}/scheduling) by scheduling a single `schedule:run` Artisan command to run every minute. The `schedule:run` command will examine the job schedule defined in your `App\\Console\\Kernel` class to determine which scheduled tasks to run.\n\nIf you would like the `schedule:run` command to be run for a Homestead site, you may set the `schedule` option to `true` when defining the site:\n\n```yaml\nsites:\n    - map: homestead.test\n      to: /home/vagrant/project1/public\n      schedule: true\n```\n\nThe cron job for the site will be defined in the `/etc/cron.d` directory of the Homestead virtual machine.\n\n<a name=\"configuring-mailhog\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":629,"to":644}}}}],["1987",{"pageContent":"Configuring MailHog\n\n[MailHog](https://github.com/mailhog/MailHog) allows you to intercept your outgoing email and examine it without actually sending the mail to its recipients. To get started, update your application's `.env` file to use the following mail settings:\n\n```ini\nMAIL_MAILER=smtp\nMAIL_HOST=localhost\nMAIL_PORT=1025\nMAIL_USERNAME=null\nMAIL_PASSWORD=null\nMAIL_ENCRYPTION=null\n```\n\nOnce MailHog has been configured, you may access the MailHog dashboard at `http://localhost:8025`.\n\n<a name=\"configuring-minio\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":645,"to":660}}}}],["1988",{"pageContent":"Configuring Minio\n\n[Minio](https://github.com/minio/minio) is an open source object storage server with an Amazon S3 compatible API. To install Minio, update your `Homestead.yaml` file with the following configuration option in the [features](#installing-optional-features) section:\n\n    minio: true\n\nBy default, Minio is available on port 9600. You may access the Minio control panel by visiting `http://localhost:9600`. The default access key is `homestead`, while the default secret key is `secretkey`. When accessing Minio, you should always use region `us-east-1`.\n\nIn order to use Minio, you will need to adjust the S3 disk configuration in your application's `config/filesystems.php` configuration file. You will need to add the `use_path_style_endpoint` option to the disk configuration as well as change the `url` key to `endpoint`:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":661,"to":669}}}}],["1989",{"pageContent":"'s3' => [\n        'driver' => 's3',\n        'key' => env('AWS_ACCESS_KEY_ID'),\n        'secret' => env('AWS_SECRET_ACCESS_KEY'),\n        'region' => env('AWS_DEFAULT_REGION'),\n        'bucket' => env('AWS_BUCKET'),\n        'endpoint' => env('AWS_URL'),\n        'use_path_style_endpoint' => true,\n    ]\n\nFinally, ensure your `.env` file has the following options:\n\n```ini\nAWS_ACCESS_KEY_ID=homestead\nAWS_SECRET_ACCESS_KEY=secretkey\nAWS_DEFAULT_REGION=us-east-1\nAWS_URL=http://localhost:9600","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":671,"to":687}}}}],["1990",{"pageContent":"To provision Minio powered \"S3\" buckets, add a `buckets` directive to your `Homestead.yaml` file. After defining your buckets, you should execute the `vagrant reload --provision` command in your terminal:\n\n```yaml\nbuckets:\n    - name: your-bucket\n      policy: public\n    - name: your-private-bucket\n      policy: none\n```\n\nSupported `policy` values include: `none`, `download`, `upload`, and `public`.\n\n<a name=\"laravel-dusk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":690,"to":702}}}}],["1991",{"pageContent":"Laravel Dusk\n\nIn order to run [Laravel Dusk](/docs/{{version}}/dusk) tests within Homestead, you should enable the [`webdriver` feature](#installing-optional-features) in your Homestead configuration:\n\n```yaml\nfeatures:\n    - webdriver: true\n```\n\nAfter enabling the `webdriver` feature, you should execute the `vagrant reload --provision` command in your terminal.\n\n<a name=\"sharing-your-environment\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":703,"to":714}}}}],["1992",{"pageContent":"Sharing Your Environment\n\nSometimes you may wish to share what you're currently working on with coworkers or a client. Vagrant has built-in support for this via the `vagrant share` command; however, this will not work if you have multiple sites configured in your `Homestead.yaml` file.\n\nTo solve this problem, Homestead includes its own `share` command. To get started, [SSH into your Homestead virtual machine](#connecting-via-ssh) via `vagrant ssh` and execute the `share homestead.test` command. This command will share the `homestead.test` site from your `Homestead.yaml` configuration file. You may substitute any of your other configured sites for `homestead.test`:\n\n```shell\nshare homestead.test","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":715,"to":722}}}}],["1993",{"pageContent":"After running the command, you will see an Ngrok screen appear which contains the activity log and the publicly accessible URLs for the shared site. If you would like to specify a custom region, subdomain, or other Ngrok runtime option, you may add them to your `share` command:\n\n```shell\nshare homestead.test -region=eu -subdomain=laravel\n```\n\nIf you need to share content over HTTPS rather than HTTP, using the `sshare` command instead of `share` will enable you to do so.\n\n> **Warning**  \n> Remember, Vagrant is inherently insecure and you are exposing your virtual machine to the Internet when running the `share` command.\n\n<a name=\"debugging-and-profiling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":725,"to":736}}}}],["1994",{"pageContent":"Debugging & Profiling\n\n<a name=\"debugging-web-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":737,"to":739}}}}],["1995",{"pageContent":"Debugging Web Requests With Xdebug\n\nHomestead includes support for step debugging using [Xdebug](https://xdebug.org). For example, you can access a page in your browser and PHP will connect to your IDE to allow inspection and modification of the running code.\n\nBy default, Xdebug is already running and ready to accept connections. If you need to enable Xdebug on the CLI, execute the `sudo phpenmod xdebug` command within your Homestead virtual machine. Next, follow your IDE's instructions to enable debugging. Finally, configure your browser to trigger Xdebug with an extension or [bookmarklet](https://www.jetbrains.com/phpstorm/marklets/).\n\n> **Warning**  \n> Xdebug causes PHP to run significantly slower. To disable Xdebug, run `sudo phpdismod xdebug` within your Homestead virtual machine and restart the FPM service.\n\n<a name=\"autostarting-xdebug\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":740,"to":749}}}}],["1996",{"pageContent":"Autostarting Xdebug\n\nWhen debugging functional tests that make requests to the web server, it is easier to autostart debugging rather than modifying tests to pass through a custom header or cookie to trigger debugging. To force Xdebug to start automatically, modify the `/etc/php/7.x/fpm/conf.d/20-xdebug.ini` file inside your Homestead virtual machine and add the following configuration:\n\n```ini\n; If Homestead.yaml contains a different subnet for the IP address, this address may be different...\nxdebug.client_host = 192.168.10.1\nxdebug.mode = debug\nxdebug.start_with_request = yes\n```\n\n<a name=\"debugging-cli-applications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":750,"to":761}}}}],["1997",{"pageContent":"Debugging CLI Applications\n\nTo debug a PHP CLI application, use the `xphp` shell alias inside your Homestead virtual machine:\n\n    xphp /path/to/script\n\n<a name=\"profiling-applications-with-blackfire\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":762,"to":768}}}}],["1998",{"pageContent":"Profiling Applications with Blackfire\n\n[Blackfire](https://blackfire.io/docs/introduction) is a service for profiling web requests and CLI applications. It offers an interactive user interface which displays profile data in call-graphs and timelines. It is built for use in development, staging, and production, with no overhead for end users. In addition, Blackfire provides performance, quality, and security checks on code and `php.ini` configuration settings.\n\nThe [Blackfire Player](https://blackfire.io/docs/player/index) is an open-source Web Crawling, Web Testing, and Web Scraping application which can work jointly with Blackfire in order to script profiling scenarios.\n\nTo enable Blackfire, use the \"features\" setting in your Homestead configuration file:\n\n```yaml\nfeatures:\n    - blackfire:\n        server_id: \"server_id\"\n        server_token: \"server_value\"\n        client_id: \"client_id\"\n        client_token: \"client_value\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":769,"to":783}}}}],["1999",{"pageContent":"Blackfire server credentials and client credentials [require a Blackfire account](https://blackfire.io/signup). Blackfire offers various options to profile an application, including a CLI tool and browser extension. Please [review the Blackfire documentation for more details](https://blackfire.io/docs/php/integrations/laravel/index).\n\n<a name=\"network-interfaces\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":786,"to":788}}}}],["2000",{"pageContent":"Network Interfaces\n\nThe `networks` property of the `Homestead.yaml` file configures network interfaces for your Homestead virtual machine. You may configure as many interfaces as necessary:\n\n```yaml\nnetworks:\n    - type: \"private_network\"\n      ip: \"192.168.10.20\"\n```\n\nTo enable a [bridged](https://developer.hashicorp.com/vagrant/docs/networking/public_network) interface, configure a `bridge` setting for the network and change the network type to `public_network`:\n\n```yaml\nnetworks:\n    - type: \"public_network\"\n      ip: \"192.168.10.20\"\n      bridge: \"en1: Wi-Fi (AirPort)\"\n```\n\nTo enable [DHCP](https://developer.hashicorp.com/vagrant/docs/networking/public_network#dhcp), just remove the `ip` option from your configuration:\n\n```yaml\nnetworks:\n    - type: \"public_network\"\n      bridge: \"en1: Wi-Fi (AirPort)\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":789,"to":813}}}}],["2001",{"pageContent":"To update what device the network is using, you may add a `dev` option to the network's configuration. The default `dev` value is `eth0`:\n\n```yaml\nnetworks:\n    - type: \"public_network\"\n      ip: \"192.168.10.20\"\n      bridge: \"en1: Wi-Fi (AirPort)\"\n      dev: \"enp2s0\"\n```\n\n<a name=\"extending-homestead\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":816,"to":826}}}}],["2002",{"pageContent":"Extending Homestead\n\nYou may extend Homestead using the `after.sh` script in the root of your Homestead directory. Within this file, you may add any shell commands that are necessary to properly configure and customize your virtual machine.\n\nWhen customizing Homestead, Ubuntu may ask you if you would like to keep a package's original configuration or overwrite it with a new configuration file. To avoid this, you should use the following command when installing packages in order to avoid overwriting any configuration previously written by Homestead:\n\n```shell\nsudo apt-get -y \\\n    -o Dpkg::Options::=\"--force-confdef\" \\\n    -o Dpkg::Options::=\"--force-confold\" \\\n    install package-name\n```\n\n<a name=\"user-customizations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":827,"to":840}}}}],["2003",{"pageContent":"User Customizations\n\nWhen using Homestead with your team, you may want to tweak Homestead to better fit your personal development style. To accomplish this, you may create a `user-customizations.sh` file in the root of your Homestead directory (the same directory containing your `Homestead.yaml` file). Within this file, you may make any customization you would like; however, the `user-customizations.sh` should not be version controlled.\n\n<a name=\"provider-specific-settings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":841,"to":845}}}}],["2004",{"pageContent":"Provider Specific Settings\n\n<a name=\"provider-specific-virtualbox\"></a>\n### VirtualBox\n\n<a name=\"natdnshostresolver\"></a>\n#### `natdnshostresolver`\n\nBy default, Homestead configures the `natdnshostresolver` setting to `on`. This allows Homestead to use your host operating system's DNS settings. If you would like to override this behavior, add the following configuration options to your `Homestead.yaml` file:\n\n```yaml\nprovider: virtualbox\nnatdnshostresolver: 'off'\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/homestead.md","loc":{"lines":{"from":846,"to":859}}}}],["2005",{"pageContent":"# Laravel Horizon\n\n- [Introduction](#introduction)\n- [Installation](#installation)\n    - [Configuration](#configuration)\n    - [Balancing Strategies](#balancing-strategies)\n    - [Dashboard Authorization](#dashboard-authorization)\n    - [Silenced Jobs](#silenced-jobs)\n- [Upgrading Horizon](#upgrading-horizon)\n- [Running Horizon](#running-horizon)\n    - [Deploying Horizon](#deploying-horizon)\n- [Tags](#tags)\n- [Notifications](#notifications)\n- [Metrics](#metrics)\n- [Deleting Failed Jobs](#deleting-failed-jobs)\n- [Clearing Jobs From Queues](#clearing-jobs-from-queues)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":1,"to":18}}}}],["2006",{"pageContent":"Introduction\n\n> **Note**  \n> Before digging into Laravel Horizon, you should familiarize yourself with Laravel's base [queue services](/docs/{{version}}/queues). Horizon augments Laravel's queue with additional features that may be confusing if you are not already familiar with the basic queue features offered by Laravel.\n\n[Laravel Horizon](https://github.com/laravel/horizon) provides a beautiful dashboard and code-driven configuration for your Laravel powered [Redis queues](/docs/{{version}}/queues). Horizon allows you to easily monitor key metrics of your queue system such as job throughput, runtime, and job failures.\n\nWhen using Horizon, all of your queue worker configuration is stored in a single, simple configuration file. By defining your application's worker configuration in a version controlled file, you may easily scale or modify your application's queue workers when deploying your application.\n\n<img src=\"https://laravel.com/img/docs/horizon-example.png\">\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":19,"to":30}}}}],["2007",{"pageContent":"Installation\n\n> **Warning**  \n> Laravel Horizon requires that you use [Redis](https://redis.io) to power your queue. Therefore, you should ensure that your queue connection is set to `redis` in your application's `config/queue.php` configuration file.\n\nYou may install Horizon into your project using the Composer package manager:\n\n```shell\ncomposer require laravel/horizon\n```\n\nAfter installing Horizon, publish its assets using the `horizon:install` Artisan command:\n\n```shell\nphp artisan horizon:install\n```\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":31,"to":48}}}}],["2008",{"pageContent":"Configuration\n\nAfter publishing Horizon's assets, its primary configuration file will be located at `config/horizon.php`. This configuration file allows you to configure the queue worker options for your application. Each configuration option includes a description of its purpose, so be sure to thoroughly explore this file.\n\n> **Warning**  \n> Horizon uses a Redis connection named `horizon` internally. This Redis connection name is reserved and should not be assigned to another Redis connection in the `database.php` configuration file or as the value of the `use` option in the `horizon.php` configuration file.\n\n<a name=\"environments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":49,"to":56}}}}],["2009",{"pageContent":"Environments\n\nAfter installation, the primary Horizon configuration option that you should familiarize yourself with is the `environments` configuration option. This configuration option is an array of environments that your application runs on and defines the worker process options for each environment. By default, this entry contains a `production` and `local` environment. However, you are free to add more environments as needed:\n\n    'environments' => [\n        'production' => [\n            'supervisor-1' => [\n                'maxProcesses' => 10,\n                'balanceMaxShift' => 1,\n                'balanceCooldown' => 3,\n            ],\n        ],\n\n        'local' => [\n            'supervisor-1' => [\n                'maxProcesses' => 3,\n            ],\n        ],\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":57,"to":75}}}}],["2010",{"pageContent":"'local' => [\n            'supervisor-1' => [\n                'maxProcesses' => 3,\n            ],\n        ],\n    ],\n\nWhen you start Horizon, it will use the worker process configuration options for the environment that your application is running on. Typically, the environment is determined by the value of the `APP_ENV` [environment variable](/docs/{{version}}/configuration#determining-the-current-environment). For example, the default `local` Horizon environment is configured to start three worker processes and automatically balance the number of worker processes assigned to each queue. The default `production` environment is configured to start a maximum of 10 worker processes and automatically balance the number of worker processes assigned to each queue.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":75,"to":82}}}}],["2011",{"pageContent":"> **Warning**  \n> You should ensure that the `environments` portion of your `horizon` configuration file contains an entry for each [environment](/docs/{{version}}/configuration#environment-configuration) on which you plan to run Horizon.\n\n<a name=\"supervisors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":84,"to":87}}}}],["2012",{"pageContent":"Supervisors\n\nAs you can see in Horizon's default configuration file, each environment can contain one or more \"supervisors\". By default, the configuration file defines this supervisor as `supervisor-1`; however, you are free to name your supervisors whatever you want. Each supervisor is essentially responsible for \"supervising\" a group of worker processes and takes care of balancing worker processes across queues.\n\nYou may add additional supervisors to a given environment if you would like to define a new group of worker processes that should run in that environment. You may choose to do this if you would like to define a different balancing strategy or worker process count for a given queue used by your application.\n\n<a name=\"default-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":88,"to":94}}}}],["2013",{"pageContent":"Default Values\n\nWithin Horizon's default configuration file, you will notice a `defaults` configuration option. This configuration option specifies the default values for your application's [supervisors](#supervisors). The supervisor's default configuration values will be merged into the supervisor's configuration for each environment, allowing you to avoid unnecessary repetition when defining your supervisors.\n\n<a name=\"balancing-strategies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":95,"to":99}}}}],["2014",{"pageContent":"Balancing Strategies\n\nUnlike Laravel's default queue system, Horizon allows you to choose from three worker balancing strategies: `simple`, `auto`, and `false`. The `simple` strategy splits incoming jobs evenly between worker processes:\n\n    'balance' => 'simple',\n\nThe `auto` strategy, which is the configuration file's default, adjusts the number of worker processes per queue based on the current workload of the queue. For example, if your `notifications` queue has 1,000 pending jobs while your `render` queue is empty, Horizon will allocate more workers to your `notifications` queue until the queue is empty.\n\nWhen using the `auto` strategy, you may define the `minProcesses` and `maxProcesses` configuration options to control the minimum and the maximum number of worker processes Horizon should scale up and down to:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":100,"to":108}}}}],["2015",{"pageContent":"'environments' => [\n        'production' => [\n            'supervisor-1' => [\n                'connection' => 'redis',\n                'queue' => ['default'],\n                'balance' => 'auto',\n                'autoScalingStrategy' => 'time',\n                'minProcesses' => 1,\n                'maxProcesses' => 10,\n                'balanceMaxShift' => 1,\n                'balanceCooldown' => 3,\n                'tries' => 3,\n            ],\n        ],\n    ],\n\nThe `autoScalingStrategy` configuration value determines if Horizon will assign more worker processes to queues based on the total amount of time it will take to clear the queue (`time` strategy) or by the total number of jobs on the queue (`size` strategy).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":110,"to":126}}}}],["2016",{"pageContent":"The `balanceMaxShift` and `balanceCooldown` configuration values determine how quickly Horizon will scale to meet worker demand. In the example above, a maximum of one new process will be created or destroyed every three seconds. You are free to tweak these values as necessary based on your application's needs.\n\nWhen the `balance` option is set to `false`, the default Laravel behavior will be used, wherein queues are processed in the order they are listed in your configuration.\n\n<a name=\"dashboard-authorization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":128,"to":132}}}}],["2017",{"pageContent":"Dashboard Authorization\n\nHorizon exposes a dashboard at the `/horizon` URI. By default, you will only be able to access this dashboard in the `local` environment. However, within your `app/Providers/HorizonServiceProvider.php` file, there is an [authorization gate](/docs/{{version}}/authorization#gates) definition. This authorization gate controls access to Horizon in **non-local** environments. You are free to modify this gate as needed to restrict access to your Horizon installation:\n\n    /**\n     * Register the Horizon gate.\n     *\n     * This gate determines who can access Horizon in non-local environments.\n     */\n    protected function gate(): void\n    {\n        Gate::define('viewHorizon', function (User $user) {\n            return in_array($user->email, [\n                'taylor@laravel.com',\n            ]);\n        });\n    }\n\n<a name=\"alternative-authentication-strategies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":133,"to":151}}}}],["2018",{"pageContent":"Alternative Authentication Strategies\n\nRemember that Laravel automatically injects the authenticated user into the gate closure. If your application is providing Horizon security via another method, such as IP restrictions, then your Horizon users may not need to \"login\". Therefore, you will need to change `function (User $user)` closure signature above to `function (User $user = null)` in order to force Laravel to not require authentication.\n\n<a name=\"silenced-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":152,"to":156}}}}],["2019",{"pageContent":"Silenced Jobs\n\nSometimes, you may not be interested in viewing certain jobs dispatched by your application or third-party packages. Instead of these jobs taking up space in your \"Completed Jobs\" list, you can silence them. To get started, add the job's class name to the `silenced` configuration option in your application's `horizon` configuration file:\n\n    'silenced' => [\n        App\\Jobs\\ProcessPodcast::class,\n    ],\n\nAlternatively, the job you wish to silence can implement the `Laravel\\Horizon\\Contracts\\Silenced` interface. If a job implements this interface, it will automatically be silenced, even if it is not present in the `silenced` configuration array:\n\n    use Laravel\\Horizon\\Contracts\\Silenced;\n\n    class ProcessPodcast implements ShouldQueue, Silenced\n    {\n        use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;\n\n        // ...\n    }\n\n<a name=\"upgrading-horizon\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":157,"to":176}}}}],["2020",{"pageContent":"Upgrading Horizon\n\nWhen upgrading to a new major version of Horizon, it's important that you carefully review [the upgrade guide](https://github.com/laravel/horizon/blob/master/UPGRADE.md). In addition, when upgrading to any new Horizon version, you should re-publish Horizon's assets:\n\n```shell\nphp artisan horizon:publish\n```\n\nTo keep the assets up-to-date and avoid issues in future updates, you may add the `vendor:publish --tag=laravel-assets` command to the `post-update-cmd` scripts in your application's `composer.json` file:\n\n```json\n{\n    \"scripts\": {\n        \"post-update-cmd\": [\n            \"@php artisan vendor:publish --tag=laravel-assets --ansi --force\"\n        ]\n    }\n}\n```\n\n<a name=\"running-horizon\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":177,"to":197}}}}],["2021",{"pageContent":"Running Horizon\n\nOnce you have configured your supervisors and workers in your application's `config/horizon.php` configuration file, you may start Horizon using the `horizon` Artisan command. This single command will start all of the configured worker processes for the current environment:\n\n```shell\nphp artisan horizon\n```\n\nYou may pause the Horizon process and instruct it to continue processing jobs using the `horizon:pause` and `horizon:continue` Artisan commands:\n\n```shell\nphp artisan horizon:pause\n\nphp artisan horizon:continue\n```\n\nYou may also pause and continue specific Horizon [supervisors](#supervisors) using the `horizon:pause-supervisor` and `horizon:continue-supervisor` Artisan commands:\n\n```shell\nphp artisan horizon:pause-supervisor supervisor-1\n\nphp artisan horizon:continue-supervisor supervisor-1\n```\n\nYou may check the current status of the Horizon process using the `horizon:status` Artisan command:\n\n```shell\nphp artisan horizon:status","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":198,"to":225}}}}],["2022",{"pageContent":"You may check the current status of the Horizon process using the `horizon:status` Artisan command:\n\n```shell\nphp artisan horizon:status\n```\n\nYou may gracefully terminate the Horizon process using the `horizon:terminate` Artisan command. Any jobs that are currently being processed by will be completed and then Horizon will stop executing:\n\n```shell\nphp artisan horizon:terminate\n```\n\n<a name=\"deploying-horizon\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":225,"to":237}}}}],["2023",{"pageContent":"Deploying Horizon\n\nWhen you're ready to deploy Horizon to your application's actual server, you should configure a process monitor to monitor the `php artisan horizon` command and restart it if it exits unexpectedly. Don't worry, we'll discuss how to install a process monitor below.\n\nDuring your application's deployment process, you should instruct the Horizon process to terminate so that it will be restarted by your process monitor and receive your code changes:\n\n```shell\nphp artisan horizon:terminate\n```\n\n<a name=\"installing-supervisor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":238,"to":248}}}}],["2024",{"pageContent":"Installing Supervisor\n\nSupervisor is a process monitor for the Linux operating system and will automatically restart your `horizon` process if it stops executing. To install Supervisor on Ubuntu, you may use the following command. If you are not using Ubuntu, you can likely install Supervisor using your operating system's package manager:\n\n```shell\nsudo apt-get install supervisor\n```\n\n> **Note**  \n> If configuring Supervisor yourself sounds overwhelming, consider using [Laravel Forge](https://forge.laravel.com), which will automatically install and configure Supervisor for your Laravel projects.\n\n<a name=\"supervisor-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":249,"to":260}}}}],["2025",{"pageContent":"Supervisor Configuration\n\nSupervisor configuration files are typically stored within your server's `/etc/supervisor/conf.d` directory. Within this directory, you may create any number of configuration files that instruct supervisor how your processes should be monitored. For example, let's create a `horizon.conf` file that starts and monitors a `horizon` process:\n\n```ini\n[program:horizon]\nprocess_name=%(program_name)s\ncommand=php /home/forge/example.com/artisan horizon\nautostart=true\nautorestart=true\nuser=forge\nredirect_stderr=true\nstdout_logfile=/home/forge/example.com/horizon.log\nstopwaitsecs=3600","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":261,"to":274}}}}],["2026",{"pageContent":"When defining your Supervisor configuration, you should ensure that the value of `stopwaitsecs` is greater than the number of seconds consumed by your longest running job. Otherwise, Supervisor may kill the job before it is finished processing.\n\n> **Warning**  \n> While the examples above are valid for Ubuntu based servers, the location and file extension expected of Supervisor configuration files may vary between other server operating systems. Please consult your server's documentation for more information.\n\n<a name=\"starting-supervisor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":277,"to":282}}}}],["2027",{"pageContent":"Starting Supervisor\n\nOnce the configuration file has been created, you may update the Supervisor configuration and start the monitored processes using the following commands:\n\n```shell\nsudo supervisorctl reread\n\nsudo supervisorctl update\n\nsudo supervisorctl start horizon\n```\n\n> **Note**  \n> For more information on running Supervisor, consult the [Supervisor documentation](http://supervisord.org/index.html).\n\n<a name=\"tags\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":283,"to":298}}}}],["2028",{"pageContent":"Tags\n\nHorizon allows you to assign “tags” to jobs, including mailables, broadcast events, notifications, and queued event listeners. In fact, Horizon will intelligently and automatically tag most jobs depending on the Eloquent models that are attached to the job. For example, take a look at the following job:\n\n    <?php\n\n    namespace App\\Jobs;\n\n    use App\\Models\\Video;\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Foundation\\Bus\\Dispatchable;\n    use Illuminate\\Queue\\InteractsWithQueue;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class RenderVideo implements ShouldQueue\n    {\n        use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;\n\n        /**\n         * Create a new job instance.\n         */\n        public function __construct(\n            public Video $video,\n        ) {}\n\n        /**\n         * Execute the job.\n         */\n        public function handle(): void\n        {\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":299,"to":332}}}}],["2029",{"pageContent":"/**\n         * Execute the job.\n         */\n        public function handle(): void\n        {\n            // ...\n        }\n    }\n\nIf this job is queued with an `App\\Models\\Video` instance that has an `id` attribute of `1`, it will automatically receive the tag `App\\Models\\Video:1`. This is because Horizon will search the job's properties for any Eloquent models. If Eloquent models are found, Horizon will intelligently tag the job using the model's class name and primary key:\n\n    use App\\Jobs\\RenderVideo;\n    use App\\Models\\Video;\n\n    $video = Video::find(1);\n\n    RenderVideo::dispatch($video);\n\n<a name=\"manually-tagging-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":332,"to":350}}}}],["2030",{"pageContent":"Manually Tagging Jobs\n\nIf you would like to manually define the tags for one of your queueable objects, you may define a `tags` method on the class:\n\n    class RenderVideo implements ShouldQueue\n    {\n        /**\n         * Get the tags that should be assigned to the job.\n         *\n         * @return array<int, string>\n         */\n        public function tags(): array\n        {\n            return ['render', 'video:'.$this->video->id];\n        }\n    }\n\n<a name=\"notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":351,"to":368}}}}],["2031",{"pageContent":"Notifications\n\n> **Warning**  \n> When configuring Horizon to send Slack or SMS notifications, you should review the [prerequisites for the relevant notification channel](/docs/{{version}}/notifications).\n\nIf you would like to be notified when one of your queues has a long wait time, you may use the `Horizon::routeMailNotificationsTo`, `Horizon::routeSlackNotificationsTo`, and `Horizon::routeSmsNotificationsTo` methods. You may call these methods from the `boot` method of your application's `App\\Providers\\HorizonServiceProvider`:\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        parent::boot();\n\n        Horizon::routeSmsNotificationsTo('15556667777');\n        Horizon::routeMailNotificationsTo('example@example.com');\n        Horizon::routeSlackNotificationsTo('slack-webhook-url', '#channel');\n    }\n\n<a name=\"configuring-notification-wait-time-thresholds\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":369,"to":388}}}}],["2032",{"pageContent":"Configuring Notification Wait Time Thresholds\n\nYou may configure how many seconds are considered a \"long wait\" within your application's `config/horizon.php` configuration file. The `waits` configuration option within this file allows you to control the long wait threshold for each connection / queue combination. Any undefined connection / queue combinations will default to a long wait threshold of 60 seconds:\n\n    'waits' => [\n        'redis:critical' => 30,\n        'redis:default' => 60,\n        'redis:batch' => 120,\n    ],\n\n<a name=\"metrics\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":389,"to":399}}}}],["2033",{"pageContent":"Metrics\n\nHorizon includes a metrics dashboard which provides information regarding your job and queue wait times and throughput. In order to populate this dashboard, you should configure Horizon's `snapshot` Artisan command to run every five minutes via your application's [scheduler](/docs/{{version}}/scheduling):\n\n    /**\n     * Define the application's command schedule.\n     */\n    protected function schedule(Schedule $schedule): void\n    {\n        $schedule->command('horizon:snapshot')->everyFiveMinutes();\n    }\n\n<a name=\"deleting-failed-jobs\"></a>\n## Deleting Failed Jobs\n\nIf you would like to delete a failed job, you may use the `horizon:forget` command. The `horizon:forget` command accepts the ID or UUID of the failed job as its only argument:\n\n```shell\nphp artisan horizon:forget 5\n```\n\n<a name=\"clearing-jobs-from-queues\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":400,"to":421}}}}],["2034",{"pageContent":"Clearing Jobs From Queues\n\nIf you would like to delete all jobs from your application's default queue, you may do so using the `horizon:clear` Artisan command:\n\n```shell\nphp artisan horizon:clear\n```\n\nYou may provide the `queue` option to delete jobs from a specific queue:\n\n```shell\nphp artisan horizon:clear --queue=emails\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/horizon.md","loc":{"lines":{"from":422,"to":434}}}}],["2035",{"pageContent":"# HTTP Client\n\n- [Introduction](#introduction)\n- [Making Requests](#making-requests)\n    - [Request Data](#request-data)\n    - [Headers](#headers)\n    - [Authentication](#authentication)\n    - [Timeout](#timeout)\n    - [Retries](#retries)\n    - [Error Handling](#error-handling)\n    - [Guzzle Middleware](#guzzle-middleware)\n    - [Guzzle Options](#guzzle-options)\n- [Concurrent Requests](#concurrent-requests)\n- [Macros](#macros)\n- [Testing](#testing)\n    - [Faking Responses](#faking-responses)\n    - [Inspecting Requests](#inspecting-requests)\n    - [Preventing Stray Requests](#preventing-stray-requests)\n- [Events](#events)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":1,"to":21}}}}],["2036",{"pageContent":"Introduction\n\nLaravel provides an expressive, minimal API around the [Guzzle HTTP client](http://docs.guzzlephp.org/en/stable/), allowing you to quickly make outgoing HTTP requests to communicate with other web applications. Laravel's wrapper around Guzzle is focused on its most common use cases and a wonderful developer experience.\n\nBefore getting started, you should ensure that you have installed the Guzzle package as a dependency of your application. By default, Laravel automatically includes this dependency. However, if you have previously removed the package, you may install it again via Composer:\n\n```shell\ncomposer require guzzlehttp/guzzle\n```\n\n<a name=\"making-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":22,"to":32}}}}],["2037",{"pageContent":"Making Requests\n\nTo make requests, you may use the `head`, `get`, `post`, `put`, `patch`, and `delete` methods provided by the `Http` facade. First, let's examine how to make a basic `GET` request to another URL:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    $response = Http::get('http://example.com');\n\nThe `get` method returns an instance of `Illuminate\\Http\\Client\\Response`, which provides a variety of methods that may be used to inspect the response:\n\n    $response->body() : string;\n    $response->json($key = null, $default = null) : array|mixed;\n    $response->object() : object;\n    $response->collect($key = null) : Illuminate\\Support\\Collection;\n    $response->status() : int;\n    $response->successful() : bool;\n    $response->redirect(): bool;\n    $response->failed() : bool;\n    $response->clientError() : bool;\n    $response->header($header) : string;\n    $response->headers() : array;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":33,"to":53}}}}],["2038",{"pageContent":"The `Illuminate\\Http\\Client\\Response` object also implements the PHP `ArrayAccess` interface, allowing you to access JSON response data directly on the response:\n\n    return Http::get('http://example.com/users/1')['name'];\n\nIn addition to the response methods listed above, the following methods may be used to determine if the response has a given status code:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":55,"to":59}}}}],["2039",{"pageContent":"$response->ok() : bool;                  // 200 OK\n    $response->created() : bool;             // 201 Created\n    $response->accepted() : bool;            // 202 Accepted\n    $response->noContent() : bool;           // 204 No Content\n    $response->movedPermanently() : bool;    // 301 Moved Permanently\n    $response->found() : bool;               // 302 Found\n    $response->badRequest() : bool;          // 400 Bad Request\n    $response->unauthorized() : bool;        // 401 Unauthorized\n    $response->paymentRequired() : bool;     // 402 Payment Required\n    $response->forbidden() : bool;           // 403 Forbidden\n    $response->notFound() : bool;            // 404 Not Found\n    $response->requestTimeout() : bool;      // 408 Request Timeout\n    $response->conflict() : bool;            // 409 Conflict\n    $response->unprocessableEntity() : bool; // 422 Unprocessable Entity\n    $response->tooManyRequests() : bool;     // 429 Too Many Requests","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":61,"to":75}}}}],["2040",{"pageContent":"$response->unprocessableEntity() : bool; // 422 Unprocessable Entity\n    $response->tooManyRequests() : bool;     // 429 Too Many Requests\n    $response->serverError() : bool;         // 500 Internal Server Error","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":75,"to":77}}}}],["2041",{"pageContent":"<a name=\"uri-templates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":79,"to":79}}}}],["2042",{"pageContent":"URI Templates\n\nThe HTTP client also allows you to construct request URLs using the [URI template specification](https://www.rfc-editor.org/rfc/rfc6570). To define the URL parameters that can be expanded by your URI template, you may use the `withUrlParameters` method:\n\n```php\nHttp::withUrlParameters([\n    'endpoint' => 'https://laravel.com',\n    'page' => 'docs',\n    'version' => '9.x',\n    'topic' => 'validation',\n])->get('{+endpoint}/{page}/{version}/{topic}');\n```\n\n<a name=\"dumping-requests\"></a>\n#### Dumping Requests\n\nIf you would like to dump the outgoing request instance before it is sent and terminate the script's execution, you may add the `dd` method to the beginning of your request definition:\n\n    return Http::dd()->get('http://example.com');\n\n<a name=\"request-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":80,"to":100}}}}],["2043",{"pageContent":"Request Data\n\nOf course, it is common when making `POST`, `PUT`, and `PATCH` requests to send additional data with your request, so these methods accept an array of data as their second argument. By default, data will be sent using the `application/json` content type:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    $response = Http::post('http://example.com/users', [\n        'name' => 'Steve',\n        'role' => 'Network Administrator',\n    ]);\n\n<a name=\"get-request-query-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":101,"to":112}}}}],["2044",{"pageContent":"GET Request Query Parameters\n\nWhen making `GET` requests, you may either append a query string to the URL directly or pass an array of key / value pairs as the second argument to the `get` method:\n\n    $response = Http::get('http://example.com/users', [\n        'name' => 'Taylor',\n        'page' => 1,\n    ]);\n\nAlternatively, the `withQueryParameters` method may be used:\n\n    Http::retry(3, 100)->withQueryParameters([\n        'name' => 'Taylor',\n        'page' => 1,\n    ])->get('http://example.com/users')\n\n<a name=\"sending-form-url-encoded-requests\"></a>\n#### Sending Form URL Encoded Requests\n\nIf you would like to send data using the `application/x-www-form-urlencoded` content type, you should call the `asForm` method before making your request:\n\n    $response = Http::asForm()->post('http://example.com/users', [\n        'name' => 'Sara',\n        'role' => 'Privacy Consultant',\n    ]);\n\n<a name=\"sending-a-raw-request-body\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":113,"to":139}}}}],["2045",{"pageContent":"Sending A Raw Request Body\n\nYou may use the `withBody` method if you would like to provide a raw request body when making a request. The content type may be provided via the method's second argument:\n\n    $response = Http::withBody(\n        base64_encode($photo), 'image/jpeg'\n    )->post('http://example.com/photo');\n\n<a name=\"multi-part-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":140,"to":148}}}}],["2046",{"pageContent":"Multi-Part Requests\n\nIf you would like to send files as multi-part requests, you should call the `attach` method before making your request. This method accepts the name of the file and its contents. If needed, you may provide a third argument which will be considered the file's filename:\n\n    $response = Http::attach(\n        'attachment', file_get_contents('photo.jpg'), 'photo.jpg'\n    )->post('http://example.com/attachments');\n\nInstead of passing the raw contents of a file, you may pass a stream resource:\n\n    $photo = fopen('photo.jpg', 'r');\n\n    $response = Http::attach(\n        'attachment', $photo, 'photo.jpg'\n    )->post('http://example.com/attachments');\n\n<a name=\"headers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":149,"to":165}}}}],["2047",{"pageContent":"Headers\n\nHeaders may be added to requests using the `withHeaders` method. This `withHeaders` method accepts an array of key / value pairs:\n\n    $response = Http::withHeaders([\n        'X-First' => 'foo',\n        'X-Second' => 'bar'\n    ])->post('http://example.com/users', [\n        'name' => 'Taylor',\n    ]);\n\nYou may use the `accept` method to specify the content type that your application is expecting in response to your request:\n\n    $response = Http::accept('application/json')->get('http://example.com/users');\n\nFor convenience, you may use the `acceptJson` method to quickly specify that your application expects the `application/json` content type in response to your request:\n\n    $response = Http::acceptJson()->get('http://example.com/users');\n\nThe `withHeaders` method merges new headers into the request's existing headers. If needed, you may replace all of the headers entirely using the `replaceHeaders` method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":166,"to":185}}}}],["2048",{"pageContent":"The `withHeaders` method merges new headers into the request's existing headers. If needed, you may replace all of the headers entirely using the `replaceHeaders` method:\n\n```php\n$response = Http::withHeaders([\n    'X-Original' => 'foo',\n])->replaceHeaders([\n    'X-Replacement' => 'bar',\n])->post('http://example.com/users', [\n    'name' => 'Taylor',\n]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":185,"to":194}}}}],["2049",{"pageContent":"<a name=\"authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":197,"to":197}}}}],["2050",{"pageContent":"Authentication\n\nYou may specify basic and digest authentication credentials using the `withBasicAuth` and `withDigestAuth` methods, respectively:\n\n    // Basic authentication...\n    $response = Http::withBasicAuth('taylor@laravel.com', 'secret')->post(/* ... */);\n\n    // Digest authentication...\n    $response = Http::withDigestAuth('taylor@laravel.com', 'secret')->post(/* ... */);\n\n<a name=\"bearer-tokens\"></a>\n#### Bearer Tokens\n\nIf you would like to quickly add a bearer token to the request's `Authorization` header, you may use the `withToken` method:\n\n    $response = Http::withToken('token')->post(/* ... */);\n\n<a name=\"timeout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":198,"to":215}}}}],["2051",{"pageContent":"Timeout\n\nThe `timeout` method may be used to specify the maximum number of seconds to wait for a response. By default, the HTTP client will timeout after 30 seconds:\n\n    $response = Http::timeout(3)->get(/* ... */);\n\nIf the given timeout is exceeded, an instance of `Illuminate\\Http\\Client\\ConnectionException` will  be thrown.\n\nYou may specify the maximum number of seconds to wait while trying to connect to a server using the `connectTimeout` method:\n\n    $response = Http::connectTimeout(3)->get(/* ... */);\n\n<a name=\"retries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":216,"to":228}}}}],["2052",{"pageContent":"Retries\n\nIf you would like the HTTP client to automatically retry the request if a client or server error occurs, you may use the `retry` method. The `retry` method accepts the maximum number of times the request should be attempted and the number of milliseconds that Laravel should wait in between attempts:\n\n    $response = Http::retry(3, 100)->post(/* ... */);\n\nIf needed, you may pass a third argument to the `retry` method. The third argument should be a callable that determines if the retries should actually be attempted. For example, you may wish to only retry the request if the initial request encounters an `ConnectionException`:\n\n    use Exception;\n    use Illuminate\\Http\\Client\\PendingRequest;\n\n    $response = Http::retry(3, 100, function (Exception $exception, PendingRequest $request) {\n        return $exception instanceof ConnectionException;\n    })->post(/* ... */);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":229,"to":242}}}}],["2053",{"pageContent":"$response = Http::retry(3, 100, function (Exception $exception, PendingRequest $request) {\n        return $exception instanceof ConnectionException;\n    })->post(/* ... */);\n\nIf a request attempt fails, you may wish to make a change to the request before a new attempt is made. You can achieve this by modifying the request argument provided to the callable you provided to the `retry` method. For example, you might want to retry the request with a new authorization token if the first attempt returned an authentication error:\n\n    use Exception;\n    use Illuminate\\Http\\Client\\PendingRequest;\n    use Illuminate\\Http\\Client\\RequestException;\n\n    $response = Http::withToken($this->getToken())->retry(2, 0, function (Exception $exception, PendingRequest $request) {\n        if (! $exception instanceof RequestException || $exception->response->status() !== 401) {\n            return false;\n        }\n\n        $request->withToken($this->getNewToken());\n\n        return true;\n    })->post(/* ... */);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":242,"to":260}}}}],["2054",{"pageContent":"$request->withToken($this->getNewToken());\n\n        return true;\n    })->post(/* ... */);\n\nIf all of the requests fail, an instance of `Illuminate\\Http\\Client\\RequestException` will be thrown. If you would like to disable this behavior, you may provide a `throw` argument with a value of `false`. When disabled, the last response received by the client will be returned after all retries have been attempted:\n\n    $response = Http::retry(3, 100, throw: false)->post(/* ... */);\n\n> **Warning**  \n> If all of the requests fail because of a connection issue, a `Illuminate\\Http\\Client\\ConnectionException` will still be thrown even when the `throw` argument is set to `false`.\n\n<a name=\"error-handling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":260,"to":272}}}}],["2055",{"pageContent":"Error Handling\n\nUnlike Guzzle's default behavior, Laravel's HTTP client wrapper does not throw exceptions on client or server errors (`400` and `500` level responses from servers). You may determine if one of these errors was returned using the `successful`, `clientError`, or `serverError` methods:\n\n    // Determine if the status code is >= 200 and < 300...\n    $response->successful();\n\n    // Determine if the status code is >= 400...\n    $response->failed();\n\n    // Determine if the response has a 400 level status code...\n    $response->clientError();\n\n    // Determine if the response has a 500 level status code...\n    $response->serverError();\n\n    // Immediately execute the given callback if there was a client or server error...\n    $response->onError(callable $callback);\n\n<a name=\"throwing-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":273,"to":292}}}}],["2056",{"pageContent":"Throwing Exceptions\n\nIf you have a response instance and would like to throw an instance of `Illuminate\\Http\\Client\\RequestException` if the response status code indicates a client or server error, you may use the `throw` or `throwIf` methods:\n\n    use Illuminate\\Http\\Client\\Response;\n\n    $response = Http::post(/* ... */);\n\n    // Throw an exception if a client or server error occurred...\n    $response->throw();\n\n    // Throw an exception if an error occurred and the given condition is true...\n    $response->throwIf($condition);\n\n    // Throw an exception if an error occurred and the given closure resolves to true...\n    $response->throwIf(fn (Response $response) => true);\n\n    // Throw an exception if an error occurred and the given condition is false...\n    $response->throwUnless($condition);\n\n    // Throw an exception if an error occurred and the given closure resolves to false...\n    $response->throwUnless(fn (Response $response) => false);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":293,"to":314}}}}],["2057",{"pageContent":"// Throw an exception if an error occurred and the given closure resolves to false...\n    $response->throwUnless(fn (Response $response) => false);\n\n    // Throw an exception if the response has a specific status code...\n    $response->throwIfStatus(403);\n\n    // Throw an exception unless the response has a specific status code...\n    $response->throwUnlessStatus(200);\n\n    return $response['user']['id'];\n\nThe `Illuminate\\Http\\Client\\RequestException` instance has a public `$response` property which will allow you to inspect the returned response.\n\nThe `throw` method returns the response instance if no error occurred, allowing you to chain other operations onto the `throw` method:\n\n    return Http::post(/* ... */)->throw()->json();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":314,"to":329}}}}],["2058",{"pageContent":"The `throw` method returns the response instance if no error occurred, allowing you to chain other operations onto the `throw` method:\n\n    return Http::post(/* ... */)->throw()->json();\n\nIf you would like to perform some additional logic before the exception is thrown, you may pass a closure to the `throw` method. The exception will be thrown automatically after the closure is invoked, so you do not need to re-throw the exception from within the closure:\n\n    use Illuminate\\Http\\Client\\Response;\n    use Illuminate\\Http\\Client\\RequestException;\n\n    return Http::post(/* ... */)->throw(function (Response $response, RequestException $e) {\n        // ...\n    })->json();\n\n<a name=\"guzzle-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":329,"to":342}}}}],["2059",{"pageContent":"Guzzle Middleware\n\nSince Laravel's HTTP client is powered by Guzzle, you may take advantage of [Guzzle Middleware](https://docs.guzzlephp.org/en/stable/handlers-and-middleware.html) to manipulate the outgoing request or inspect the incoming response. To manipulate the outgoing request, register a Guzzle middleware via the `withRequestMiddleware` method:\n\n    use Illuminate\\Support\\Facades\\Http;\n    use Psr\\Http\\Message\\RequestInterface;\n\n    $response = Http::withRequestMiddleware(\n        function (RequestInterface $request) {\n            return $request->withHeader('X-Example', 'Value');\n        }\n    )->get('http://example.com');\n\nLikewise, you can inspect the incoming HTTP response by registering a middleware via the `withResponseMiddleware` method:\n\n    use Illuminate\\Support\\Facades\\Http;\n    use Psr\\Http\\Message\\ResponseInterface;\n\n    $response = Http::withResponseMiddleware(\n        function (ResponseInterface $response) {\n            $header = $response->getHeader('X-Example');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":343,"to":363}}}}],["2060",{"pageContent":"$response = Http::withResponseMiddleware(\n        function (ResponseInterface $response) {\n            $header = $response->getHeader('X-Example');\n\n            // ...\n\n            return $response;\n        }\n    )->get('http://example.com');\n\n<a name=\"global-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":363,"to":373}}}}],["2061",{"pageContent":"Global Middleware\n\nSometimes, you may want to register a middleware that applies to every outgoing request and incoming response. To accomplish this, you may use the `globalRequestMiddleware` and `globalResponseMiddleware` methods. Typically, these methods should be invoked in the `boot` method of your application's `AppServiceProvider`:\n\n```php\nuse Illuminate\\Support\\Facades\\Http;\n\nHttp::globalRequestMiddleware(fn ($request) => $request->withHeader(\n    'User-Agent', 'Example Application/1.0'\n));\n\nHttp::globalResponseMiddleware(fn ($response) => $response->withHeader(\n    'X-Finished-At', now()->toDateTimeString()\n));\n```\n\n<a name=\"guzzle-options\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":374,"to":390}}}}],["2062",{"pageContent":"Guzzle Options\n\nYou may specify additional [Guzzle request options](http://docs.guzzlephp.org/en/stable/request-options.html) using the `withOptions` method. The `withOptions` method accepts an array of key / value pairs:\n\n    $response = Http::withOptions([\n        'debug' => true,\n    ])->get('http://example.com/users');\n\n<a name=\"concurrent-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":391,"to":399}}}}],["2063",{"pageContent":"Concurrent Requests\n\nSometimes, you may wish to make multiple HTTP requests concurrently. In other words, you want several requests to be dispatched at the same time instead of issuing the requests sequentially. This can lead to substantial performance improvements when interacting with slow HTTP APIs.\n\nThankfully, you may accomplish this using the `pool` method. The `pool` method accepts a closure which receives an `Illuminate\\Http\\Client\\Pool` instance, allowing you to easily add requests to the request pool for dispatching:\n\n    use Illuminate\\Http\\Client\\Pool;\n    use Illuminate\\Support\\Facades\\Http;\n\n    $responses = Http::pool(fn (Pool $pool) => [\n        $pool->get('http://localhost/first'),\n        $pool->get('http://localhost/second'),\n        $pool->get('http://localhost/third'),\n    ]);\n\n    return $responses[0]->ok() &&\n           $responses[1]->ok() &&\n           $responses[2]->ok();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":400,"to":417}}}}],["2064",{"pageContent":"return $responses[0]->ok() &&\n           $responses[1]->ok() &&\n           $responses[2]->ok();\n\nAs you can see, each response instance can be accessed based on the order it was added to the pool. If you wish, you can name the requests using the `as` method, which allows you to access the corresponding responses by name:\n\n    use Illuminate\\Http\\Client\\Pool;\n    use Illuminate\\Support\\Facades\\Http;\n\n    $responses = Http::pool(fn (Pool $pool) => [\n        $pool->as('first')->get('http://localhost/first'),\n        $pool->as('second')->get('http://localhost/second'),\n        $pool->as('third')->get('http://localhost/third'),\n    ]);\n\n    return $responses['first']->ok();\n\n<a name=\"customizing-concurrent-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":417,"to":434}}}}],["2065",{"pageContent":"Customizing Concurrent Requests\n\nThe `pool` method cannot be chained with other HTTP client methods such as the `withHeaders` or `middleware` methods. If you want to apply custom headers or middleware to pooled requests, you should configure those options on each request in the pool:\n\n```php\nuse Illuminate\\Http\\Client\\Pool;\nuse Illuminate\\Support\\Facades\\Http;\n\n$headers = [\n    'X-Example' => 'example',\n];\n\n$responses = Http::pool(fn (Pool $pool) => [\n    $pool->withHeaders($headers)->get('http://laravel.test/test'),\n    $pool->withHeaders($headers)->get('http://laravel.test/test'),\n    $pool->withHeaders($headers)->get('http://laravel.test/test'),\n]);\n```\n\n<a name=\"macros\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":435,"to":454}}}}],["2066",{"pageContent":"Macros\n\nThe Laravel HTTP client allows you to define \"macros\", which can serve as a fluent, expressive mechanism to configure common request paths and headers when interacting with services throughout your application. To get started, you may define the macro within the `boot` method of your application's `App\\Providers\\AppServiceProvider` class:\n\n```php\nuse Illuminate\\Support\\Facades\\Http;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Http::macro('github', function () {\n        return Http::withHeaders([\n            'X-Example' => 'example',\n        ])->baseUrl('https://github.com');\n    });\n}\n```\n\nOnce your macro has been configured, you may invoke it from anywhere in your application to create a pending request with the specified configuration:\n\n```php\n$response = Http::github()->get('/');\n```\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":455,"to":481}}}}],["2067",{"pageContent":"Testing\n\nMany Laravel services provide functionality to help you easily and expressively write tests, and Laravel's HTTP client is no exception. The `Http` facade's `fake` method allows you to instruct the HTTP client to return stubbed / dummy responses when requests are made.\n\n<a name=\"faking-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":482,"to":486}}}}],["2068",{"pageContent":"Faking Responses\n\nFor example, to instruct the HTTP client to return empty, `200` status code responses for every request, you may call the `fake` method with no arguments:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    Http::fake();\n\n    $response = Http::post(/* ... */);\n\n<a name=\"faking-specific-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":487,"to":497}}}}],["2069",{"pageContent":"Faking Specific URLs\n\nAlternatively, you may pass an array to the `fake` method. The array's keys should represent URL patterns that you wish to fake and their associated responses. The `*` character may be used as a wildcard character. Any requests made to URLs that have not been faked will actually be executed. You may use the `Http` facade's `response` method to construct stub / fake responses for these endpoints:\n\n    Http::fake([\n        // Stub a JSON response for GitHub endpoints...\n        'github.com/*' => Http::response(['foo' => 'bar'], 200, $headers),\n\n        // Stub a string response for Google endpoints...\n        'google.com/*' => Http::response('Hello World', 200, $headers),\n    ]);\n\nIf you would like to specify a fallback URL pattern that will stub all unmatched URLs, you may use a single `*` character:\n\n    Http::fake([\n        // Stub a JSON response for GitHub endpoints...\n        'github.com/*' => Http::response(['foo' => 'bar'], 200, ['Headers']),","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":498,"to":514}}}}],["2070",{"pageContent":"Http::fake([\n        // Stub a JSON response for GitHub endpoints...\n        'github.com/*' => Http::response(['foo' => 'bar'], 200, ['Headers']),\n\n        // Stub a string response for all other endpoints...\n        '*' => Http::response('Hello World', 200, ['Headers']),\n    ]);\n\n<a name=\"faking-response-sequences\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":514,"to":522}}}}],["2071",{"pageContent":"Faking Response Sequences\n\nSometimes you may need to specify that a single URL should return a series of fake responses in a specific order. You may accomplish this using the `Http::sequence` method to build the responses:\n\n    Http::fake([\n        // Stub a series of responses for GitHub endpoints...\n        'github.com/*' => Http::sequence()\n                                ->push('Hello World', 200)\n                                ->push(['foo' => 'bar'], 200)\n                                ->pushStatus(404),\n    ]);\n\nWhen all the responses in a response sequence have been consumed, any further requests will cause the response sequence to throw an exception. If you would like to specify a default response that should be returned when a sequence is empty, you may use the `whenEmpty` method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":523,"to":535}}}}],["2072",{"pageContent":"Http::fake([\n        // Stub a series of responses for GitHub endpoints...\n        'github.com/*' => Http::sequence()\n                                ->push('Hello World', 200)\n                                ->push(['foo' => 'bar'], 200)\n                                ->whenEmpty(Http::response()),\n    ]);\n\nIf you would like to fake a sequence of responses but do not need to specify a specific URL pattern that should be faked, you may use the `Http::fakeSequence` method:\n\n    Http::fakeSequence()\n            ->push('Hello World', 200)\n            ->whenEmpty(Http::response());\n\n<a name=\"fake-callback\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":537,"to":551}}}}],["2073",{"pageContent":"Fake Callback\n\nIf you require more complicated logic to determine what responses to return for certain endpoints, you may pass a closure to the `fake` method. This closure will receive an instance of `Illuminate\\Http\\Client\\Request` and should return a response instance. Within your closure, you may perform whatever logic is necessary to determine what type of response to return:\n\n    use Illuminate\\Http\\Client\\Request;\n\n    Http::fake(function (Request $request) {\n        return Http::response('Hello World', 200);\n    });\n\n<a name=\"preventing-stray-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":552,"to":562}}}}],["2074",{"pageContent":"Preventing Stray Requests\n\nIf you would like to ensure that all requests sent via the HTTP client have been faked throughout your individual test or complete test suite, you can call the `preventStrayRequests` method. After calling this method, any requests that do not have a corresponding fake response will throw an exception rather than making the actual HTTP request:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    Http::preventStrayRequests();\n\n    Http::fake([\n        'github.com/*' => Http::response('ok'),\n    ]);\n\n    // An \"ok\" response is returned...\n    Http::get('https://github.com/laravel/framework');\n\n    // An exception is thrown...\n    Http::get('https://laravel.com');\n\n<a name=\"inspecting-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":563,"to":581}}}}],["2075",{"pageContent":"Inspecting Requests\n\nWhen faking responses, you may occasionally wish to inspect the requests the client receives in order to make sure your application is sending the correct data or headers. You may accomplish this by calling the `Http::assertSent` method after calling `Http::fake`.\n\nThe `assertSent` method accepts a closure which will receive an `Illuminate\\Http\\Client\\Request` instance and should return a boolean value indicating if the request matches your expectations. In order for the test to pass, at least one request must have been issued matching the given expectations:\n\n    use Illuminate\\Http\\Client\\Request;\n    use Illuminate\\Support\\Facades\\Http;\n\n    Http::fake();\n\n    Http::withHeaders([\n        'X-First' => 'foo',\n    ])->post('http://example.com/users', [\n        'name' => 'Taylor',\n        'role' => 'Developer',\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":582,"to":598}}}}],["2076",{"pageContent":"Http::fake();\n\n    Http::withHeaders([\n        'X-First' => 'foo',\n    ])->post('http://example.com/users', [\n        'name' => 'Taylor',\n        'role' => 'Developer',\n    ]);\n\n    Http::assertSent(function (Request $request) {\n        return $request->hasHeader('X-First', 'foo') &&\n               $request->url() == 'http://example.com/users' &&\n               $request['name'] == 'Taylor' &&\n               $request['role'] == 'Developer';\n    });\n\nIf needed, you may assert that a specific request was not sent using the `assertNotSent` method:\n\n    use Illuminate\\Http\\Client\\Request;\n    use Illuminate\\Support\\Facades\\Http;\n\n    Http::fake();\n\n    Http::post('http://example.com/users', [\n        'name' => 'Taylor',\n        'role' => 'Developer',\n    ]);\n\n    Http::assertNotSent(function (Request $request) {\n        return $request->url() === 'http://example.com/posts';\n    });\n\nYou may use the `assertSentCount` method to assert how many requests were \"sent\" during the test:\n\n    Http::fake();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":598,"to":632}}}}],["2077",{"pageContent":"You may use the `assertSentCount` method to assert how many requests were \"sent\" during the test:\n\n    Http::fake();\n\n    Http::assertSentCount(5);\n\nOr, you may use the `assertNothingSent` method to assert that no requests were sent during the test:\n\n    Http::fake();\n\n    Http::assertNothingSent();\n\n<a name=\"recording-requests-and-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":632,"to":644}}}}],["2078",{"pageContent":"Recording Requests / Responses\n\nYou may use the `recorded` method to gather all requests and their corresponding responses. The `recorded` method returns a collection of arrays that contains instances of `Illuminate\\Http\\Client\\Request` and `Illuminate\\Http\\Client\\Response`:\n\n```php\nHttp::fake([\n    'https://laravel.com' => Http::response(status: 500),\n    'https://nova.laravel.com/' => Http::response(),\n]);\n\nHttp::get('https://laravel.com');\nHttp::get('https://nova.laravel.com/');\n\n$recorded = Http::recorded();\n\n[$request, $response] = $recorded[0];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":645,"to":660}}}}],["2079",{"pageContent":"Additionally, the `recorded` method accepts a closure which will receive an instance of `Illuminate\\Http\\Client\\Request` and `Illuminate\\Http\\Client\\Response` and may be used to filter request / response pairs based on your expectations:\n\n```php\nuse Illuminate\\Http\\Client\\Request;\nuse Illuminate\\Http\\Client\\Response;\n\nHttp::fake([\n    'https://laravel.com' => Http::response(status: 500),\n    'https://nova.laravel.com/' => Http::response(),\n]);\n\nHttp::get('https://laravel.com');\nHttp::get('https://nova.laravel.com/');\n\n$recorded = Http::recorded(function (Request $request, Response $response) {\n    return $request->url() !== 'https://laravel.com' &&\n           $response->successful();\n});\n```\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":663,"to":683}}}}],["2080",{"pageContent":"Events\n\nLaravel fires three events during the process of sending HTTP requests. The `RequestSending` event is fired prior to a request being sent, while the `ResponseReceived` event is fired after a response is received for a given request. The `ConnectionFailed` event is fired if no response is received for a given request.\n\nThe `RequestSending` and `ConnectionFailed` events both contain a public `$request` property that you may use to inspect the `Illuminate\\Http\\Client\\Request` instance. Likewise, the `ResponseReceived` event contains a `$request` property as well as a `$response` property which may be used to inspect the `Illuminate\\Http\\Client\\Response` instance. You may register event listeners for this event in your `App\\Providers\\EventServiceProvider` service provider:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":684,"to":688}}}}],["2081",{"pageContent":"/**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        'Illuminate\\Http\\Client\\Events\\RequestSending' => [\n            'App\\Listeners\\LogRequestSending',\n        ],\n        'Illuminate\\Http\\Client\\Events\\ResponseReceived' => [\n            'App\\Listeners\\LogResponseReceived',\n        ],\n        'Illuminate\\Http\\Client\\Events\\ConnectionFailed' => [\n            'App\\Listeners\\LogConnectionFailed',\n        ],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-client.md","loc":{"lines":{"from":690,"to":705}}}}],["2082",{"pageContent":"# HTTP Tests\n\n- [Introduction](#introduction)\n- [Making Requests](#making-requests)\n    - [Customizing Request Headers](#customizing-request-headers)\n    - [Cookies](#cookies)\n    - [Session / Authentication](#session-and-authentication)\n    - [Debugging Responses](#debugging-responses)\n    - [Exception Handling](#exception-handling)\n- [Testing JSON APIs](#testing-json-apis)\n    - [Fluent JSON Testing](#fluent-json-testing)\n- [Testing File Uploads](#testing-file-uploads)\n- [Testing Views](#testing-views)\n    - [Rendering Blade & Components](#rendering-blade-and-components)\n- [Available Assertions](#available-assertions)\n    - [Response Assertions](#response-assertions)\n    - [Authentication Assertions](#authentication-assertions)\n    - [Validation Assertions](#validation-assertions)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1,"to":20}}}}],["2083",{"pageContent":"Introduction\n\nLaravel provides a very fluent API for making HTTP requests to your application and examining the responses. For example, take a look at the feature test defined below:\n\n```php\n<?php\n\nnamespace Tests\\Feature;\n\nuse Tests\\TestCase;\n\nclass ExampleTest extends TestCase\n{\n    /**\n     * A basic test example.\n     */\n    public function test_the_application_returns_a_successful_response(): void\n    {\n        $response = $this->get('/');\n\n        $response->assertStatus(200);\n    }\n}\n```\n\nThe `get` method makes a `GET` request into the application, while the `assertStatus` method asserts that the returned response should have the given HTTP status code. In addition to this simple assertion, Laravel also contains a variety of assertions for inspecting the response headers, content, JSON structure, and more.\n\n<a name=\"making-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":21,"to":48}}}}],["2084",{"pageContent":"Making Requests\n\nTo make a request to your application, you may invoke the `get`, `post`, `put`, `patch`, or `delete` methods within your test. These methods do not actually issue a \"real\" HTTP request to your application. Instead, the entire network request is simulated internally.\n\nInstead of returning an `Illuminate\\Http\\Response` instance, test request methods return an instance of `Illuminate\\Testing\\TestResponse`, which provides a [variety of helpful assertions](#available-assertions) that allow you to inspect your application's responses:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic test example.\n         */\n        public function test_a_basic_request(): void\n        {\n            $response = $this->get('/');\n\n            $response->assertStatus(200);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":49,"to":72}}}}],["2085",{"pageContent":"$response->assertStatus(200);\n        }\n    }\n\nIn general, each of your tests should only make one request to your application. Unexpected behavior may occur if multiple requests are executed within a single test method.\n\n> **Note**  \n> For convenience, the CSRF middleware is automatically disabled when running tests.\n\n<a name=\"customizing-request-headers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":72,"to":81}}}}],["2086",{"pageContent":"Customizing Request Headers\n\nYou may use the `withHeaders` method to customize the request's headers before it is sent to the application. This method allows you to add any custom headers you would like to the request:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic functional test example.\n         */\n        public function test_interacting_with_headers(): void\n        {\n            $response = $this->withHeaders([\n                'X-Header' => 'Value',\n            ])->post('/user', ['name' => 'Sally']);\n\n            $response->assertStatus(201);\n        }\n    }\n\n<a name=\"cookies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":82,"to":107}}}}],["2087",{"pageContent":"Cookies\n\nYou may use the `withCookie` or `withCookies` methods to set cookie values before making a request. The `withCookie` method accepts a cookie name and value as its two arguments, while the `withCookies` method accepts an array of name / value pairs:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_interacting_with_cookies(): void\n        {\n            $response = $this->withCookie('color', 'blue')->get('/');\n\n            $response = $this->withCookies([\n                'color' => 'blue',\n                'name' => 'Taylor',\n            ])->get('/');\n        }\n    }\n\n<a name=\"session-and-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":108,"to":131}}}}],["2088",{"pageContent":"Session / Authentication\n\nLaravel provides several helpers for interacting with the session during HTTP testing. First, you may set the session data to a given array using the `withSession` method. This is useful for loading the session with data before issuing a request to your application:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_interacting_with_the_session(): void\n        {\n            $response = $this->withSession(['banned' => false])->get('/');\n        }\n    }\n\nLaravel's session is typically used to maintain state for the currently authenticated user. Therefore, the `actingAs` helper method provides a simple way to authenticate a given user as the current user. For example, we may use a [model factory](/docs/{{version}}/eloquent-factories) to generate and authenticate a user:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use App\\Models\\User;\n    use Tests\\TestCase;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":132,"to":157}}}}],["2089",{"pageContent":"<?php\n\n    namespace Tests\\Feature;\n\n    use App\\Models\\User;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_an_action_that_requires_authentication(): void\n        {\n            $user = User::factory()->create();\n\n            $response = $this->actingAs($user)\n                             ->withSession(['banned' => false])\n                             ->get('/');\n        }\n    }\n\nYou may also specify which guard should be used to authenticate the given user by passing the guard name as the second argument to the `actingAs` method. The guard that is provided to the `actingAs` method will also become the default guard for the duration of the test:\n\n    $this->actingAs($user, 'web')\n\n<a name=\"debugging-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":157,"to":180}}}}],["2090",{"pageContent":"Debugging Responses\n\nAfter making a test request to your application, the `dump`, `dumpHeaders`, and `dumpSession` methods may be used to examine and debug the response contents:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic test example.\n         */\n        public function test_basic_test(): void\n        {\n            $response = $this->get('/');\n\n            $response->dumpHeaders();\n\n            $response->dumpSession();\n\n            $response->dump();\n        }\n    }\n\nAlternatively, you may use the `dd`, `ddHeaders`, and `ddSession` methods to dump information about the response and then stop execution:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic test example.\n         */\n        public function test_basic_test(): void\n        {\n            $response = $this->get('/');\n\n            $response->ddHeaders();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":181,"to":225}}}}],["2091",{"pageContent":"$response->ddHeaders();\n\n            $response->ddSession();\n\n            $response->dd();\n        }\n    }\n\n<a name=\"exception-handling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":225,"to":233}}}}],["2092",{"pageContent":"Exception Handling\n\nSometimes you may want to test that your application is throwing a specific exception. To ensure that the exception does not get caught by Laravel's exception handler and returned as an HTTP response, you may invoke the `withoutExceptionHandling` method before making your request:\n\n    $response = $this->withoutExceptionHandling()->get('/');\n\nIn addition, if you would like to ensure that your application is not utilizing features that have been deprecated by the PHP language or the libraries your application is using, you may invoke the `withoutDeprecationHandling` method before making your request. When deprecation handling is disabled, deprecation warnings will be converted to exceptions, thus causing your test to fail:\n\n    $response = $this->withoutDeprecationHandling()->get('/');\n\nThe `assertThrows` method may be used to assert that code within a given closure throws an exception of the specified type:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":234,"to":244}}}}],["2093",{"pageContent":"$response = $this->withoutDeprecationHandling()->get('/');\n\nThe `assertThrows` method may be used to assert that code within a given closure throws an exception of the specified type:\n\n```php\n$this->assertThrows(\n    fn () => (new ProcessOrder)->execute(),\n    OrderInvalid::class\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":244,"to":252}}}}],["2094",{"pageContent":"<a name=\"testing-json-apis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":255,"to":255}}}}],["2095",{"pageContent":"Testing JSON APIs\n\nLaravel also provides several helpers for testing JSON APIs and their responses. For example, the `json`, `getJson`, `postJson`, `putJson`, `patchJson`, `deleteJson`, and `optionsJson` methods may be used to issue JSON requests with various HTTP verbs. You may also easily pass data and headers to these methods. To get started, let's write a test to make a `POST` request to `/api/user` and assert that the expected JSON data was returned:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic functional test example.\n         */\n        public function test_making_an_api_request(): void\n        {\n            $response = $this->postJson('/api/user', ['name' => 'Sally']);\n\n            $response\n                ->assertStatus(201)\n                ->assertJson([\n                    'created' => true,\n                ]);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":256,"to":281}}}}],["2096",{"pageContent":"$response\n                ->assertStatus(201)\n                ->assertJson([\n                    'created' => true,\n                ]);\n        }\n    }\n\nIn addition, JSON response data may be accessed as array variables on the response, making it convenient for you to inspect the individual values returned within a JSON response:\n\n    $this->assertTrue($response['created']);\n\n> **Note**  \n> The `assertJson` method converts the response to an array and utilizes `PHPUnit::assertArraySubset` to verify that the given array exists within the JSON response returned by the application. So, if there are other properties in the JSON response, this test will still pass as long as the given fragment is present.\n\n<a name=\"verifying-exact-match\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":281,"to":296}}}}],["2097",{"pageContent":"Asserting Exact JSON Matches\n\nAs previously mentioned, the `assertJson` method may be used to assert that a fragment of JSON exists within the JSON response. If you would like to verify that a given array **exactly matches** the JSON returned by your application, you should use the `assertExactJson` method:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic functional test example.\n         */\n        public function test_asserting_an_exact_json_match(): void\n        {\n            $response = $this->postJson('/user', ['name' => 'Sally']);\n\n            $response\n                ->assertStatus(201)\n                ->assertExactJson([\n                    'created' => true,\n                ]);\n        }\n    }\n\n<a name=\"verifying-json-paths\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":297,"to":324}}}}],["2098",{"pageContent":"Asserting On JSON Paths\n\nIf you would like to verify that the JSON response contains the given data at a specified path, you should use the `assertJsonPath` method:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic functional test example.\n         */\n        public function test_asserting_a_json_paths_value(): void\n        {\n            $response = $this->postJson('/user', ['name' => 'Sally']);\n\n            $response\n                ->assertStatus(201)\n                ->assertJsonPath('team.owner.name', 'Darian');\n        }\n    }\n\nThe `assertJsonPath` method also accepts a closure, which may be used to dynamically determine if the assertion should pass:\n\n    $response->assertJsonPath('team.owner.name', fn (string $name) => strlen($name) >= 3);\n\n<a name=\"fluent-json-testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":325,"to":354}}}}],["2099",{"pageContent":"Fluent JSON Testing\n\nLaravel also offers a beautiful way to fluently test your application's JSON responses. To get started, pass a closure to the `assertJson` method. This closure will be invoked with an instance of `Illuminate\\Testing\\Fluent\\AssertableJson` which can be used to make assertions against the JSON that was returned by your application. The `where` method may be used to make assertions against a particular attribute of the JSON, while the `missing` method may be used to assert that a particular attribute is missing from the JSON:\n\n    use Illuminate\\Testing\\Fluent\\AssertableJson;\n\n    /**\n     * A basic functional test example.\n     */\n    public function test_fluent_json(): void\n    {\n        $response = $this->getJson('/users/1');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":355,"to":366}}}}],["2100",{"pageContent":"/**\n     * A basic functional test example.\n     */\n    public function test_fluent_json(): void\n    {\n        $response = $this->getJson('/users/1');\n\n        $response\n            ->assertJson(fn (AssertableJson $json) =>\n                $json->where('id', 1)\n                     ->where('name', 'Victoria Faith')\n                     ->where('email', fn (string $email) => str($email)->is('victoria@gmail.com'))\n                     ->whereNot('status', 'pending')\n                     ->missing('password')\n                     ->etc()\n            );\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":366,"to":382}}}}],["2101",{"pageContent":"Understanding The `etc` Method\n\nIn the example above, you may have noticed we invoked the `etc` method at the end of our assertion chain. This method informs Laravel that there may be other attributes present on the JSON object. If the `etc` method is not used, the test will fail if other attributes that you did not make assertions against exist on the JSON object.\n\nThe intention behind this behavior is to protect you from unintentionally exposing sensitive information in your JSON responses by forcing you to either explicitly make an assertion against the attribute or explicitly allow additional attributes via the `etc` method.\n\nHowever, you should be aware that not including the `etc` method in your assertion chain does not ensure that additional attributes are not being added to arrays that are nested within your JSON object. The `etc` method only ensures that no additional attributes exist at the nesting level in which the `etc` method is invoked.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":384,"to":390}}}}],["2102",{"pageContent":"<a name=\"asserting-json-attribute-presence-and-absence\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":392,"to":392}}}}],["2103",{"pageContent":"Asserting Attribute Presence / Absence\n\nTo assert that an attribute is present or absent, you may use the `has` and `missing` methods:\n\n    $response->assertJson(fn (AssertableJson $json) =>\n        $json->has('data')\n             ->missing('message')\n    );\n\nIn addition, the `hasAll` and `missingAll` methods allow asserting the presence or absence of multiple attributes simultaneously:\n\n    $response->assertJson(fn (AssertableJson $json) =>\n        $json->hasAll(['status', 'data'])\n             ->missingAll(['message', 'code'])\n    );\n\nYou may use the `hasAny` method to determine if at least one of a given list of attributes is present:\n\n    $response->assertJson(fn (AssertableJson $json) =>\n        $json->has('status')\n             ->hasAny('data', 'message', 'code')\n    );\n\n<a name=\"asserting-against-json-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":393,"to":416}}}}],["2104",{"pageContent":"Asserting Against JSON Collections\n\nOften, your route will return a JSON response that contains multiple items, such as multiple users:\n\n    Route::get('/users', function () {\n        return User::all();\n    });\n\nIn these situations, we may use the fluent JSON object's `has` method to make assertions against the users included in the response. For example, let's assert that the JSON response contains three users. Next, we'll make some assertions about the first user in the collection using the `first` method. The `first` method accepts a closure which receives another assertable JSON string that we can use to make assertions about the first object in the JSON collection:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":417,"to":425}}}}],["2105",{"pageContent":"$response\n        ->assertJson(fn (AssertableJson $json) =>\n            $json->has(3)\n                 ->first(fn (AssertableJson $json) =>\n                    $json->where('id', 1)\n                         ->where('name', 'Victoria Faith')\n                         ->where('email', fn (string $email) => str($email)->is('victoria@gmail.com'))\n                         ->missing('password')\n                         ->etc()\n                 )\n        );\n\n<a name=\"scoping-json-collection-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":427,"to":439}}}}],["2106",{"pageContent":"Scoping JSON Collection Assertions\n\nSometimes, your application's routes will return JSON collections that are assigned named keys:\n\n    Route::get('/users', function () {\n        return [\n            'meta' => [...],\n            'users' => User::all(),\n        ];\n    })\n\nWhen testing these routes, you may use the `has` method to assert against the number of items in the collection. In addition, you may use the `has` method to scope a chain of assertions:\n\n    $response\n        ->assertJson(fn (AssertableJson $json) =>\n            $json->has('meta')\n                 ->has('users', 3)\n                 ->has('users.0', fn (AssertableJson $json) =>\n                    $json->where('id', 1)\n                         ->where('name', 'Victoria Faith')\n                         ->where('email', fn (string $email) => str($email)->is('victoria@gmail.com'))\n                         ->missing('password')\n                         ->etc()\n                 )\n        );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":440,"to":464}}}}],["2107",{"pageContent":"However, instead of making two separate calls to the `has` method to assert against the `users` collection, you may make a single call which provides a closure as its third parameter. When doing so, the closure will automatically be invoked and scoped to the first item in the collection:\n\n    $response\n        ->assertJson(fn (AssertableJson $json) =>\n            $json->has('meta')\n                 ->has('users', 3, fn (AssertableJson $json) =>\n                    $json->where('id', 1)\n                         ->where('name', 'Victoria Faith')\n                         ->where('email', fn (string $email) => str($email)->is('victoria@gmail.com'))\n                         ->missing('password')\n                         ->etc()\n                 )\n        );\n\n<a name=\"asserting-json-types\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":466,"to":480}}}}],["2108",{"pageContent":"Asserting JSON Types\n\nYou may only want to assert that the properties in the JSON response are of a certain type. The `Illuminate\\Testing\\Fluent\\AssertableJson` class provides the `whereType` and `whereAllType` methods for doing just that:\n\n    $response->assertJson(fn (AssertableJson $json) =>\n        $json->whereType('id', 'integer')\n             ->whereAllType([\n                'users.0.name' => 'string',\n                'meta' => 'array'\n            ])\n    );\n\nYou may specify multiple types using the `|` character, or passing an array of types as the second parameter to the `whereType` method. The assertion will be successful if the response value is any of the listed types:\n\n    $response->assertJson(fn (AssertableJson $json) =>\n        $json->whereType('name', 'string|null')\n             ->whereType('id', ['string', 'integer'])\n    );\n\nThe `whereType` and `whereAllType` methods recognize the following types: `string`, `integer`, `double`, `boolean`, `array`, and `null`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":481,"to":500}}}}],["2109",{"pageContent":"The `whereType` and `whereAllType` methods recognize the following types: `string`, `integer`, `double`, `boolean`, `array`, and `null`.\n\n<a name=\"testing-file-uploads\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":500,"to":502}}}}],["2110",{"pageContent":"Testing File Uploads\n\nThe `Illuminate\\Http\\UploadedFile` class provides a `fake` method which may be used to generate dummy files or images for testing. This, combined with the `Storage` facade's `fake` method, greatly simplifies the testing of file uploads. For example, you may combine these two features to easily test an avatar upload form:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Illuminate\\Http\\UploadedFile;\n    use Illuminate\\Support\\Facades\\Storage;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_avatars_can_be_uploaded(): void\n        {\n            Storage::fake('avatars');\n\n            $file = UploadedFile::fake()->image('avatar.jpg');\n\n            $response = $this->post('/avatar', [\n                'avatar' => $file,\n            ]);\n\n            Storage::disk('avatars')->assertExists($file->hashName());\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":503,"to":529}}}}],["2111",{"pageContent":"$response = $this->post('/avatar', [\n                'avatar' => $file,\n            ]);\n\n            Storage::disk('avatars')->assertExists($file->hashName());\n        }\n    }\n\nIf you would like to assert that a given file does not exist, you may use the `assertMissing` method provided by the `Storage` facade:\n\n    Storage::fake('avatars');\n\n    // ...\n\n    Storage::disk('avatars')->assertMissing('missing.jpg');\n\n<a name=\"fake-file-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":529,"to":545}}}}],["2112",{"pageContent":"Fake File Customization\n\nWhen creating files using the `fake` method provided by the `UploadedFile` class, you may specify the width, height, and size of the image (in kilobytes) in order to better test your application's validation rules:\n\n    UploadedFile::fake()->image('avatar.jpg', $width, $height)->size(100);\n\nIn addition to creating images, you may create files of any other type using the `create` method:\n\n    UploadedFile::fake()->create('document.pdf', $sizeInKilobytes);\n\nIf needed, you may pass a `$mimeType` argument to the method to explicitly define the MIME type that should be returned by the file:\n\n    UploadedFile::fake()->create(\n        'document.pdf', $sizeInKilobytes, 'application/pdf'\n    );\n\n<a name=\"testing-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":546,"to":562}}}}],["2113",{"pageContent":"Testing Views\n\nLaravel also allows you to render a view without making a simulated HTTP request to the application. To accomplish this, you may call the `view` method within your test. The `view` method accepts the view name and an optional array of data. The method returns an instance of `Illuminate\\Testing\\TestView`, which offers several methods to conveniently make assertions about the view's contents:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_a_welcome_view_can_be_rendered(): void\n        {\n            $view = $this->view('welcome', ['name' => 'Taylor']);\n\n            $view->assertSee('Taylor');\n        }\n    }\n\nThe `TestView` class provides the following assertion methods: `assertSee`, `assertSeeInOrder`, `assertSeeText`, `assertSeeTextInOrder`, `assertDontSee`, and `assertDontSeeText`.\n\nIf needed, you may get the raw, rendered view contents by casting the `TestView` instance to a string:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":563,"to":585}}}}],["2114",{"pageContent":"If needed, you may get the raw, rendered view contents by casting the `TestView` instance to a string:\n\n    $contents = (string) $this->view('welcome');\n\n<a name=\"sharing-errors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":585,"to":589}}}}],["2115",{"pageContent":"Sharing Errors\n\nSome views may depend on errors shared in the [global error bag provided by Laravel](/docs/{{version}}/validation#quick-displaying-the-validation-errors). To hydrate the error bag with error messages, you may use the `withViewErrors` method:\n\n    $view = $this->withViewErrors([\n        'name' => ['Please provide a valid name.']\n    ])->view('form');\n\n    $view->assertSee('Please provide a valid name.');\n\n<a name=\"rendering-blade-and-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":590,"to":600}}}}],["2116",{"pageContent":"Rendering Blade & Components\n\nIf necessary, you may use the `blade` method to evaluate and render a raw [Blade](/docs/{{version}}/blade) string. Like the `view` method, the `blade` method returns an instance of `Illuminate\\Testing\\TestView`:\n\n    $view = $this->blade(\n        '<x-component :name=\"$name\" />',\n        ['name' => 'Taylor']\n    );\n\n    $view->assertSee('Taylor');\n\nYou may use the `component` method to evaluate and render a [Blade component](/docs/{{version}}/blade#components). The `component` method returns an instance of `Illuminate\\Testing\\TestComponent`:\n\n    $view = $this->component(Profile::class, ['name' => 'Taylor']);\n\n    $view->assertSee('Taylor');\n\n<a name=\"available-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":601,"to":618}}}}],["2117",{"pageContent":"Available Assertions\n\n<a name=\"response-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":619,"to":621}}}}],["2118",{"pageContent":"Response Assertions\n\nLaravel's `Illuminate\\Testing\\TestResponse` class provides a variety of custom assertion methods that you may utilize when testing your application. These assertions may be accessed on the response that is returned by the `json`, `get`, `post`, `put`, and `delete` test methods:\n\n<style>\n    .collection-method-list > p {\n        columns: 14.4em 2; -moz-columns: 14.4em 2; -webkit-columns: 14.4em 2;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n</style>\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":622,"to":639}}}}],["2119",{"pageContent":"[assertAccepted](#assert-accepted)\n[assertBadRequest](#assert-bad-request)\n[assertConflict](#assert-conflict)\n[assertCookie](#assert-cookie)\n[assertCookieExpired](#assert-cookie-expired)\n[assertCookieNotExpired](#assert-cookie-not-expired)\n[assertCookieMissing](#assert-cookie-missing)\n[assertCreated](#assert-created)\n[assertDontSee](#assert-dont-see)\n[assertDontSeeText](#assert-dont-see-text)\n[assertDownload](#assert-download)\n[assertExactJson](#assert-exact-json)\n[assertForbidden](#assert-forbidden)\n[assertFound](#assert-found)\n[assertGone](#assert-gone)\n[assertHeader](#assert-header)\n[assertHeaderMissing](#assert-header-missing)\n[assertInternalServerError](#assert-internal-server-error)\n[assertJson](#assert-json)\n[assertJsonCount](#assert-json-count)\n[assertJsonFragment](#assert-json-fragment)\n[assertJsonIsArray](#assert-json-is-array)\n[assertJsonIsObject](#assert-json-is-object)\n[assertJsonMissing](#assert-json-missing)\n[assertJsonMissingExact](#assert-json-missing-exact)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":641,"to":665}}}}],["2120",{"pageContent":"[assertJsonIsArray](#assert-json-is-array)\n[assertJsonIsObject](#assert-json-is-object)\n[assertJsonMissing](#assert-json-missing)\n[assertJsonMissingExact](#assert-json-missing-exact)\n[assertJsonMissingValidationErrors](#assert-json-missing-validation-errors)\n[assertJsonPath](#assert-json-path)\n[assertJsonMissingPath](#assert-json-missing-path)\n[assertJsonStructure](#assert-json-structure)\n[assertJsonValidationErrors](#assert-json-validation-errors)\n[assertJsonValidationErrorFor](#assert-json-validation-error-for)\n[assertLocation](#assert-location)\n[assertMethodNotAllowed](#assert-method-not-allowed)\n[assertMovedPermanently](#assert-moved-permanently)\n[assertContent](#assert-content)\n[assertNoContent](#assert-no-content)\n[assertStreamedContent](#assert-streamed-content)\n[assertNotFound](#assert-not-found)\n[assertOk](#assert-ok)\n[assertPaymentRequired](#assert-payment-required)\n[assertPlainCookie](#assert-plain-cookie)\n[assertRedirect](#assert-redirect)\n[assertRedirectContains](#assert-redirect-contains)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":665,"to":686}}}}],["2121",{"pageContent":"[assertOk](#assert-ok)\n[assertPaymentRequired](#assert-payment-required)\n[assertPlainCookie](#assert-plain-cookie)\n[assertRedirect](#assert-redirect)\n[assertRedirectContains](#assert-redirect-contains)\n[assertRedirectToRoute](#assert-redirect-to-route)\n[assertRedirectToSignedRoute](#assert-redirect-to-signed-route)\n[assertRequestTimeout](#assert-request-timeout)\n[assertSee](#assert-see)\n[assertSeeInOrder](#assert-see-in-order)\n[assertSeeText](#assert-see-text)\n[assertSeeTextInOrder](#assert-see-text-in-order)\n[assertServerError](#assert-server-error)\n[assertServiceUnavailable](#assert-server-unavailable)\n[assertSessionHas](#assert-session-has)\n[assertSessionHasInput](#assert-session-has-input)\n[assertSessionHasAll](#assert-session-has-all)\n[assertSessionHasErrors](#assert-session-has-errors)\n[assertSessionHasErrorsIn](#assert-session-has-errors-in)\n[assertSessionHasNoErrors](#assert-session-has-no-errors)\n[assertSessionDoesntHaveErrors](#assert-session-doesnt-have-errors)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":686,"to":706}}}}],["2122",{"pageContent":"[assertSessionHasErrorsIn](#assert-session-has-errors-in)\n[assertSessionHasNoErrors](#assert-session-has-no-errors)\n[assertSessionDoesntHaveErrors](#assert-session-doesnt-have-errors)\n[assertSessionMissing](#assert-session-missing)\n[assertStatus](#assert-status)\n[assertSuccessful](#assert-successful)\n[assertTooManyRequests](#assert-too-many-requests)\n[assertUnauthorized](#assert-unauthorized)\n[assertUnprocessable](#assert-unprocessable)\n[assertUnsupportedMediaType](#assert-unsupported-media-type)\n[assertValid](#assert-valid)\n[assertInvalid](#assert-invalid)\n[assertViewHas](#assert-view-has)\n[assertViewHasAll](#assert-view-has-all)\n[assertViewIs](#assert-view-is)\n[assertViewMissing](#assert-view-missing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":706,"to":721}}}}],["2123",{"pageContent":"</div>\n\n<a name=\"assert-bad-request\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":723,"to":725}}}}],["2124",{"pageContent":"assertBadRequest\n\nAssert that the response has a bad request (400) HTTP status code:\n\n    $response->assertBadRequest();\n\n<a name=\"assert-accepted\"></a>\n#### assertAccepted\n\nAssert that the response has an accepted (202) HTTP status code:\n\n    $response->assertAccepted();\n\n<a name=\"assert-conflict\"></a>\n#### assertConflict\n\nAssert that the response has a conflict (409) HTTP status code:\n\n    $response->assertConflict();\n\n<a name=\"assert-cookie\"></a>\n#### assertCookie\n\nAssert that the response contains the given cookie:\n\n    $response->assertCookie($cookieName, $value = null);\n\n<a name=\"assert-cookie-expired\"></a>\n#### assertCookieExpired\n\nAssert that the response contains the given cookie and it is expired:\n\n    $response->assertCookieExpired($cookieName);\n\n<a name=\"assert-cookie-not-expired\"></a>\n#### assertCookieNotExpired\n\nAssert that the response contains the given cookie and it is not expired:\n\n    $response->assertCookieNotExpired($cookieName);\n\n<a name=\"assert-cookie-missing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":726,"to":767}}}}],["2125",{"pageContent":"assertCookieNotExpired\n\nAssert that the response contains the given cookie and it is not expired:\n\n    $response->assertCookieNotExpired($cookieName);\n\n<a name=\"assert-cookie-missing\"></a>\n#### assertCookieMissing\n\nAssert that the response does not contain the given cookie:\n\n    $response->assertCookieMissing($cookieName);\n\n<a name=\"assert-created\"></a>\n#### assertCreated\n\nAssert that the response has a 201 HTTP status code:\n\n    $response->assertCreated();\n\n<a name=\"assert-dont-see\"></a>\n#### assertDontSee\n\nAssert that the given string is not contained within the response returned by the application. This assertion will automatically escape the given string unless you pass a second argument of `false`:\n\n    $response->assertDontSee($value, $escaped = true);\n\n<a name=\"assert-dont-see-text\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":767,"to":794}}}}],["2126",{"pageContent":"assertDontSeeText\n\nAssert that the given string is not contained within the response text. This assertion will automatically escape the given string unless you pass a second argument of `false`. This method will pass the response content to the `strip_tags` PHP function before making the assertion:\n\n    $response->assertDontSeeText($value, $escaped = true);\n\n<a name=\"assert-download\"></a>\n#### assertDownload\n\nAssert that the response is a \"download\". Typically, this means the invoked route that returned the response returned a `Response::download` response, `BinaryFileResponse`, or `Storage::download` response:\n\n    $response->assertDownload();\n\nIf you wish, you may assert that the downloadable file was assigned a given file name:\n\n    $response->assertDownload('image.jpg');\n\n<a name=\"assert-exact-json\"></a>\n#### assertExactJson\n\nAssert that the response contains an exact match of the given JSON data:\n\n    $response->assertExactJson(array $data);\n\n<a name=\"assert-forbidden\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":795,"to":819}}}}],["2127",{"pageContent":"assertExactJson\n\nAssert that the response contains an exact match of the given JSON data:\n\n    $response->assertExactJson(array $data);\n\n<a name=\"assert-forbidden\"></a>\n#### assertForbidden\n\nAssert that the response has a forbidden (403) HTTP status code:\n\n    $response->assertForbidden();\n\n<a name=\"assert-found\"></a>\n#### assertFound\n\nAssert that the response has a found (302) HTTP status code:\n\n    $response->assertFound();\n\n<a name=\"assert-gone\"></a>\n#### assertGone\n\nAssert that the response has a gone (410) HTTP status code:\n\n    $response->assertGone();\n\n<a name=\"assert-header\"></a>\n#### assertHeader\n\nAssert that the given header and value is present on the response:\n\n    $response->assertHeader($headerName, $value = null);\n\n<a name=\"assert-header-missing\"></a>\n#### assertHeaderMissing\n\nAssert that the given header is not present on the response:\n\n    $response->assertHeaderMissing($headerName);\n\n<a name=\"assert-internal-server-error\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":819,"to":860}}}}],["2128",{"pageContent":"assertHeaderMissing\n\nAssert that the given header is not present on the response:\n\n    $response->assertHeaderMissing($headerName);\n\n<a name=\"assert-internal-server-error\"></a>\n#### assertInternalServerError\n\nAssert that the response has an \"Internal Server Error\" (500) HTTP status code:\n\n    $response->assertInternalServerError();\n\n<a name=\"assert-json\"></a>\n#### assertJson\n\nAssert that the response contains the given JSON data:\n\n    $response->assertJson(array $data, $strict = false);\n\nThe `assertJson` method converts the response to an array and utilizes `PHPUnit::assertArraySubset` to verify that the given array exists within the JSON response returned by the application. So, if there are other properties in the JSON response, this test will still pass as long as the given fragment is present.\n\n<a name=\"assert-json-count\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":860,"to":882}}}}],["2129",{"pageContent":"assertJsonCount\n\nAssert that the response JSON has an array with the expected number of items at the given key:\n\n    $response->assertJsonCount($count, $key = null);\n\n<a name=\"assert-json-fragment\"></a>\n#### assertJsonFragment\n\nAssert that the response contains the given JSON data anywhere in the response:\n\n    Route::get('/users', function () {\n        return [\n            'users' => [\n                [\n                    'name' => 'Taylor Otwell',\n                ],\n            ],\n        ];\n    });\n\n    $response->assertJsonFragment(['name' => 'Taylor Otwell']);\n\n<a name=\"assert-json-is-array\"></a>\n#### assertJsonIsArray\n\nAssert that the response JSON is an array:\n\n    $response->assertJsonIsArray();\n\n<a name=\"assert-json-is-object\"></a>\n#### assertJsonIsObject\n\nAssert that the response JSON is an object:\n\n    $response->assertJsonIsObject();\n\n<a name=\"assert-json-missing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":883,"to":920}}}}],["2130",{"pageContent":"assertJsonIsObject\n\nAssert that the response JSON is an object:\n\n    $response->assertJsonIsObject();\n\n<a name=\"assert-json-missing\"></a>\n#### assertJsonMissing\n\nAssert that the response does not contain the given JSON data:\n\n    $response->assertJsonMissing(array $data);\n\n<a name=\"assert-json-missing-exact\"></a>\n#### assertJsonMissingExact\n\nAssert that the response does not contain the exact JSON data:\n\n    $response->assertJsonMissingExact(array $data);\n\n<a name=\"assert-json-missing-validation-errors\"></a>\n#### assertJsonMissingValidationErrors\n\nAssert that the response has no JSON validation errors for the given keys:\n\n    $response->assertJsonMissingValidationErrors($keys);\n\n> **Note**  \n> The more generic [assertValid](#assert-valid) method may be used to assert that a response does not have validation errors that were returned as JSON **and** that no errors were flashed to session storage.\n\n<a name=\"assert-json-path\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":920,"to":950}}}}],["2131",{"pageContent":"assertJsonPath\n\nAssert that the response contains the given data at the specified path:\n\n    $response->assertJsonPath($path, $expectedValue);\n\nFor example, if the following JSON response is returned by your application:\n\n```json\n{\n    \"user\": {\n        \"name\": \"Steve Schoger\"\n    }\n}\n```\n\nYou may assert that the `name` property of the `user` object matches a given value like so:\n\n    $response->assertJsonPath('user.name', 'Steve Schoger');\n\n<a name=\"assert-json-missing-path\"></a>\n#### assertJsonMissingPath\n\nAssert that the response does not contain the given path:\n\n    $response->assertJsonMissingPath($path);\n\nFor example, if the following JSON response is returned by your application:\n\n```json\n{\n    \"user\": {\n        \"name\": \"Steve Schoger\"\n    }\n}\n```\n\nYou may assert that it does not contain the `email` property of the `user` object:\n\n    $response->assertJsonMissingPath('user.email');\n\n<a name=\"assert-json-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":951,"to":992}}}}],["2132",{"pageContent":"assertJsonStructure\n\nAssert that the response has a given JSON structure:\n\n    $response->assertJsonStructure(array $structure);\n\nFor example, if the JSON response returned by your application contains the following data:\n\n```json\n{\n    \"user\": {\n        \"name\": \"Steve Schoger\"\n    }\n}\n```\n\nYou may assert that the JSON structure matches your expectations like so:\n\n    $response->assertJsonStructure([\n        'user' => [\n            'name',\n        ]\n    ]);\n\nSometimes, JSON responses returned by your application may contain arrays of objects:\n\n```json\n{\n    \"user\": [\n        {\n            \"name\": \"Steve Schoger\",\n            \"age\": 55,\n            \"location\": \"Earth\"\n        },\n        {\n            \"name\": \"Mary Schoger\",\n            \"age\": 60,\n            \"location\": \"Earth\"\n        }\n    ]\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":993,"to":1033}}}}],["2133",{"pageContent":"In this situation, you may use the `*` character to assert against the structure of all of the objects in the array:\n\n    $response->assertJsonStructure([\n        'user' => [\n            '*' => [\n                 'name',\n                 'age',\n                 'location'\n            ]\n        ]\n    ]);\n\n<a name=\"assert-json-validation-errors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1036,"to":1048}}}}],["2134",{"pageContent":"assertJsonValidationErrors\n\nAssert that the response has the given JSON validation errors for the given keys. This method should be used when asserting against responses where the validation errors are returned as a JSON structure instead of being flashed to the session:\n\n    $response->assertJsonValidationErrors(array $data, $responseKey = 'errors');\n\n> **Note**  \n> The more generic [assertInvalid](#assert-invalid) method may be used to assert that a response has validation errors returned as JSON **or** that errors were flashed to session storage.\n\n<a name=\"assert-json-validation-error-for\"></a>\n#### assertJsonValidationErrorFor\n\nAssert the response has any JSON validation errors for the given key:\n\n    $response->assertJsonValidationErrorFor(string $key, $responseKey = 'errors');\n\n<a name=\"assert-method-not-allowed\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1049,"to":1065}}}}],["2135",{"pageContent":"assertMethodNotAllowed\n\nAssert that the response has a method not allowed (405) HTTP status code:\n\n    $response->assertMethodNotAllowed();\n\n<a name=\"assert-moved-permanently\"></a>\n#### assertMovedPermanently\n\nAssert that the response has a moved permanently (301) HTTP status code:\n\n    $response->assertMovedPermanently();\n\n<a name=\"assert-location\"></a>\n#### assertLocation\n\nAssert that the response has the given URI value in the `Location` header:\n\n    $response->assertLocation($uri);\n    \n<a name=\"assert-content\"></a>\n#### assertContent\n\nAssert that the given string matches the response content:\n\n    $response->assertContent($value);\n\n<a name=\"assert-no-content\"></a>\n#### assertNoContent\n\nAssert that the response has the given HTTP status code and no content:\n\n    $response->assertNoContent($status = 204);\n\n<a name=\"assert-streamed-content\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1066,"to":1100}}}}],["2136",{"pageContent":"assertNoContent\n\nAssert that the response has the given HTTP status code and no content:\n\n    $response->assertNoContent($status = 204);\n\n<a name=\"assert-streamed-content\"></a>\n#### assertStreamedContent\n\nAssert that the given string matches the streamed response content:\n\n    $response->assertStreamedContent($value);\n\n<a name=\"assert-not-found\"></a>\n#### assertNotFound\n\nAssert that the response has a not found (404) HTTP status code:\n\n    $response->assertNotFound();\n\n<a name=\"assert-ok\"></a>\n#### assertOk\n\nAssert that the response has a 200 HTTP status code:\n\n    $response->assertOk();\n\n<a name=\"assert-payment-required\"></a>\n#### assertPaymentRequired\n\nAssert that the response has a payment required (402) HTTP status code:\n\n    $response->assertPaymentRequired();\n\n<a name=\"assert-plain-cookie\"></a>\n#### assertPlainCookie\n\nAssert that the response contains the given unencrypted cookie:\n\n    $response->assertPlainCookie($cookieName, $value = null);\n\n<a name=\"assert-redirect\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1100,"to":1141}}}}],["2137",{"pageContent":"assertPlainCookie\n\nAssert that the response contains the given unencrypted cookie:\n\n    $response->assertPlainCookie($cookieName, $value = null);\n\n<a name=\"assert-redirect\"></a>\n#### assertRedirect\n\nAssert that the response is a redirect to the given URI:\n\n    $response->assertRedirect($uri = null);\n\n<a name=\"assert-redirect-contains\"></a>\n#### assertRedirectContains\n\nAssert whether the response is redirecting to a URI that contains the given string:\n\n    $response->assertRedirectContains($string);\n\n<a name=\"assert-redirect-to-route\"></a>\n#### assertRedirectToRoute\n\nAssert that the response is a redirect to the given [named route](/docs/{{version}}/routing#named-routes):\n\n    $response->assertRedirectToRoute($name, $parameters = []);\n\n<a name=\"assert-redirect-to-signed-route\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1141,"to":1168}}}}],["2138",{"pageContent":"assertRedirectToSignedRoute\n\nAssert that the response is a redirect to the given [signed route](/docs/{{version}}/urls#signed-urls):\n\n    $response->assertRedirectToSignedRoute($name = null, $parameters = []);\n\n<a name=\"assert-request-timeout\"></a>\n#### assertRequestTimeout\n\nAssert that the response has a request timeout (408) HTTP status code:\n\n    $response->assertRequestTimeout();\n\n<a name=\"assert-see\"></a>\n#### assertSee\n\nAssert that the given string is contained within the response. This assertion will automatically escape the given string unless you pass a second argument of `false`:\n\n    $response->assertSee($value, $escaped = true);\n\n<a name=\"assert-see-in-order\"></a>\n#### assertSeeInOrder\n\nAssert that the given strings are contained in order within the response. This assertion will automatically escape the given strings unless you pass a second argument of `false`:\n\n    $response->assertSeeInOrder(array $values, $escaped = true);\n\n<a name=\"assert-see-text\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1169,"to":1196}}}}],["2139",{"pageContent":"assertSeeText\n\nAssert that the given string is contained within the response text. This assertion will automatically escape the given string unless you pass a second argument of `false`. The response content will be passed to the `strip_tags` PHP function before the assertion is made:\n\n    $response->assertSeeText($value, $escaped = true);\n\n<a name=\"assert-see-text-in-order\"></a>\n#### assertSeeTextInOrder\n\nAssert that the given strings are contained in order within the response text. This assertion will automatically escape the given strings unless you pass a second argument of `false`. The response content will be passed to the `strip_tags` PHP function before the assertion is made:\n\n    $response->assertSeeTextInOrder(array $values, $escaped = true);\n\n<a name=\"assert-server-error\"></a>\n#### assertServerError\n\nAssert that the response has a server error (>= 500 , < 600) HTTP status code:\n\n    $response->assertServerError();\n\n<a name=\"assert-server-unavailable\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1197,"to":1217}}}}],["2140",{"pageContent":"assertServerError\n\nAssert that the response has a server error (>= 500 , < 600) HTTP status code:\n\n    $response->assertServerError();\n\n<a name=\"assert-server-unavailable\"></a>\n#### assertServiceUnavailable\n\nAssert that the response has a \"Service Unavailable\" (503) HTTP status code:\n\n    $response->assertServiceUnavailable();\n\n<a name=\"assert-session-has\"></a>\n#### assertSessionHas\n\nAssert that the session contains the given piece of data:\n\n    $response->assertSessionHas($key, $value = null);\n\nIf needed, a closure can be provided as the second argument to the `assertSessionHas` method. The assertion will pass if the closure returns `true`:\n\n    $response->assertSessionHas($key, function (User $value) {\n        return $value->name === 'Taylor Otwell';\n    });\n\n<a name=\"assert-session-has-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1217,"to":1243}}}}],["2141",{"pageContent":"assertSessionHasInput\n\nAssert that the session has a given value in the [flashed input array](/docs/{{version}}/responses#redirecting-with-flashed-session-data):\n\n    $response->assertSessionHasInput($key, $value = null);\n\nIf needed, a closure can be provided as the second argument to the `assertSessionHasInput` method. The assertion will pass if the closure returns `true`:\n\n    use Illuminate\\Support\\Facades\\Crypt;\n\n    $response->assertSessionHasInput($key, function (string $value) {\n        return Crypt::decryptString($value) === 'secret';\n    });\n\n<a name=\"assert-session-has-all\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1244,"to":1258}}}}],["2142",{"pageContent":"assertSessionHasAll\n\nAssert that the session contains a given array of key / value pairs:\n\n    $response->assertSessionHasAll(array $data);\n\nFor example, if your application's session contains `name` and `status` keys, you may assert that both exist and have the specified values like so:\n\n    $response->assertSessionHasAll([\n        'name' => 'Taylor Otwell',\n        'status' => 'active',\n    ]);\n\n<a name=\"assert-session-has-errors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1259,"to":1272}}}}],["2143",{"pageContent":"assertSessionHasErrors\n\nAssert that the session contains an error for the given `$keys`. If `$keys` is an associative array, assert that the session contains a specific error message (value) for each field (key). This method should be used when testing routes that flash validation errors to the session instead of returning them as a JSON structure:\n\n    $response->assertSessionHasErrors(\n        array $keys = [], $format = null, $errorBag = 'default'\n    );\n\nFor example, to assert that the `name` and `email` fields have validation error messages that were flashed to the session, you may invoke the `assertSessionHasErrors` method like so:\n\n    $response->assertSessionHasErrors(['name', 'email']);\n\nOr, you may assert that a given field has a particular validation error message:\n\n    $response->assertSessionHasErrors([\n        'name' => 'The given name was invalid.'\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1273,"to":1289}}}}],["2144",{"pageContent":"Or, you may assert that a given field has a particular validation error message:\n\n    $response->assertSessionHasErrors([\n        'name' => 'The given name was invalid.'\n    ]);\n\n> **Note**  \n> The more generic [assertInvalid](#assert-invalid) method may be used to assert that a response has validation errors returned as JSON **or** that errors were flashed to session storage.\n\n<a name=\"assert-session-has-errors-in\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1289,"to":1298}}}}],["2145",{"pageContent":"assertSessionHasErrorsIn\n\nAssert that the session contains an error for the given `$keys` within a specific [error bag](/docs/{{version}}/validation#named-error-bags). If `$keys` is an associative array, assert that the session contains a specific error message (value) for each field (key), within the error bag:\n\n    $response->assertSessionHasErrorsIn($errorBag, $keys = [], $format = null);\n\n<a name=\"assert-session-has-no-errors\"></a>\n#### assertSessionHasNoErrors\n\nAssert that the session has no validation errors:\n\n    $response->assertSessionHasNoErrors();\n\n<a name=\"assert-session-doesnt-have-errors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1299,"to":1312}}}}],["2146",{"pageContent":"assertSessionHasNoErrors\n\nAssert that the session has no validation errors:\n\n    $response->assertSessionHasNoErrors();\n\n<a name=\"assert-session-doesnt-have-errors\"></a>\n#### assertSessionDoesntHaveErrors\n\nAssert that the session has no validation errors for the given keys:\n\n    $response->assertSessionDoesntHaveErrors($keys = [], $format = null, $errorBag = 'default');\n\n> **Note**  \n> The more generic [assertValid](#assert-valid) method may be used to assert that a response does not have validation errors that were returned as JSON **and** that no errors were flashed to session storage.\n\n<a name=\"assert-session-missing\"></a>\n#### assertSessionMissing\n\nAssert that the session does not contain the given key:\n\n    $response->assertSessionMissing($key);\n\n<a name=\"assert-status\"></a>\n#### assertStatus\n\nAssert that the response has a given HTTP status code:\n\n    $response->assertStatus($code);\n\n<a name=\"assert-successful\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1312,"to":1342}}}}],["2147",{"pageContent":"assertStatus\n\nAssert that the response has a given HTTP status code:\n\n    $response->assertStatus($code);\n\n<a name=\"assert-successful\"></a>\n#### assertSuccessful\n\nAssert that the response has a successful (>= 200 and < 300) HTTP status code:\n\n    $response->assertSuccessful();\n\n<a name=\"assert-too-many-requests\"></a>\n#### assertTooManyRequests\n\nAssert that the response has a too many requests (429) HTTP status code:\n\n    $response->assertTooManyRequests();\n\n<a name=\"assert-unauthorized\"></a>\n#### assertUnauthorized\n\nAssert that the response has an unauthorized (401) HTTP status code:\n\n    $response->assertUnauthorized();\n\n<a name=\"assert-unprocessable\"></a>\n#### assertUnprocessable\n\nAssert that the response has an unprocessable entity (422) HTTP status code:\n\n    $response->assertUnprocessable();\n\n<a name=\"assert-unsupported-media-type\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1342,"to":1376}}}}],["2148",{"pageContent":"assertUnprocessable\n\nAssert that the response has an unprocessable entity (422) HTTP status code:\n\n    $response->assertUnprocessable();\n\n<a name=\"assert-unsupported-media-type\"></a>\n#### assertUnsupportedMediaType\n\nAssert that the response has an unsupported media type (415) HTTP status code:\n\n    $response->assertUnsupportedMediaType();\n\n<a name=\"assert-valid\"></a>\n#### assertValid\n\nAssert that the response has no validation errors for the given keys. This method may be used for asserting against responses where the validation errors are returned as a JSON structure or where the validation errors have been flashed to the session:\n\n    // Assert that no validation errors are present...\n    $response->assertValid();\n\n    // Assert that the given keys do not have validation errors...\n    $response->assertValid(['name', 'email']);\n\n<a name=\"assert-invalid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1376,"to":1400}}}}],["2149",{"pageContent":"assertInvalid\n\nAssert that the response has validation errors for the given keys. This method may be used for asserting against responses where the validation errors are returned as a JSON structure or where the validation errors have been flashed to the session:\n\n    $response->assertInvalid(['name', 'email']);\n\nYou may also assert that a given key has a particular validation error message. When doing so, you may provide the entire message or only a small portion of the message:\n\n    $response->assertInvalid([\n        'name' => 'The name field is required.',\n        'email' => 'valid email address',\n    ]);\n\n<a name=\"assert-view-has\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1401,"to":1414}}}}],["2150",{"pageContent":"assertViewHas\n\nAssert that the response view contains a given piece of data:\n\n    $response->assertViewHas($key, $value = null);\n\nPassing a closure as the second argument to the `assertViewHas` method will allow you to inspect and make assertions against a particular piece of view data:\n\n    $response->assertViewHas('user', function (User $user) {\n        return $user->name === 'Taylor';\n    });\n\nIn addition, view data may be accessed as array variables on the response, allowing you to conveniently inspect it:\n\n    $this->assertEquals('Taylor', $response['name']);\n\n<a name=\"assert-view-has-all\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1415,"to":1431}}}}],["2151",{"pageContent":"assertViewHasAll\n\nAssert that the response view has a given list of data:\n\n    $response->assertViewHasAll(array $data);\n\nThis method may be used to assert that the view simply contains data matching the given keys:\n\n    $response->assertViewHasAll([\n        'name',\n        'email',\n    ]);\n\nOr, you may assert that the view data is present and has specific values:\n\n    $response->assertViewHasAll([\n        'name' => 'Taylor Otwell',\n        'email' => 'taylor@example.com,',\n    ]);\n\n<a name=\"assert-view-is\"></a>\n#### assertViewIs\n\nAssert that the given view was returned by the route:\n\n    $response->assertViewIs($value);\n\n<a name=\"assert-view-missing\"></a>\n#### assertViewMissing\n\nAssert that the given data key was not made available to the view returned in the application's response:\n\n    $response->assertViewMissing($key);\n\n<a name=\"authentication-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1432,"to":1466}}}}],["2152",{"pageContent":"Authentication Assertions\n\nLaravel also provides a variety of authentication related assertions that you may utilize within your application's feature tests. Note that these methods are invoked on the test class itself and not the `Illuminate\\Testing\\TestResponse` instance returned by methods such as `get` and `post`.\n\n<a name=\"assert-authenticated\"></a>\n#### assertAuthenticated\n\nAssert that a user is authenticated:\n\n    $this->assertAuthenticated($guard = null);\n\n<a name=\"assert-guest\"></a>\n#### assertGuest\n\nAssert that a user is not authenticated:\n\n    $this->assertGuest($guard = null);\n\n<a name=\"assert-authenticated-as\"></a>\n#### assertAuthenticatedAs\n\nAssert that a specific user is authenticated:\n\n    $this->assertAuthenticatedAs($user, $guard = null);\n\n<a name=\"validation-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1467,"to":1492}}}}],["2153",{"pageContent":"Validation Assertions\n\nLaravel provides two primary validation related assertions that you may use to ensure the data provided in your request was either valid or invalid.\n\n<a name=\"validation-assert-valid\"></a>\n#### assertValid\n\nAssert that the response has no validation errors for the given keys. This method may be used for asserting against responses where the validation errors are returned as a JSON structure or where the validation errors have been flashed to the session:\n\n    // Assert that no validation errors are present...\n    $response->assertValid();\n\n    // Assert that the given keys do not have validation errors...\n    $response->assertValid(['name', 'email']);\n\n<a name=\"validation-assert-invalid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1493,"to":1508}}}}],["2154",{"pageContent":"assertInvalid\n\nAssert that the response has validation errors for the given keys. This method may be used for asserting against responses where the validation errors are returned as a JSON structure or where the validation errors have been flashed to the session:\n\n    $response->assertInvalid(['name', 'email']);\n\nYou may also assert that a given key has a particular validation error message. When doing so, you may provide the entire message or only a small portion of the message:\n\n    $response->assertInvalid([\n        'name' => 'The name field is required.',\n        'email' => 'valid email address',\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/http-tests.md","loc":{"lines":{"from":1508,"to":1519}}}}],["2155",{"pageContent":"# Installation\n\n- [Meet Laravel](#meet-laravel)\n    - [Why Laravel?](#why-laravel)\n- [Your First Laravel Project](#your-first-laravel-project)\n- [Laravel & Docker](#laravel-and-docker)\n    - [Getting Started On macOS](#getting-started-on-macos)\n    - [Getting Started On Windows](#getting-started-on-windows)\n    - [Getting Started On Linux](#getting-started-on-linux)\n    - [Choosing Your Sail Services](#choosing-your-sail-services)\n- [Initial Configuration](#initial-configuration)\n    - [Environment Based Configuration](#environment-based-configuration)\n    - [Databases & Migrations](#databases-and-migrations)\n    - [Directory Configuration](#directory-configuration)\n- [IDE Support](#ide-support)\n- [Next Steps](#next-steps)\n    - [Laravel The Full Stack Framework](#laravel-the-fullstack-framework)\n    - [Laravel The API Backend](#laravel-the-api-backend)\n\n<a name=\"meet-laravel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":1,"to":20}}}}],["2156",{"pageContent":"Meet Laravel\n\nLaravel is a web application framework with expressive, elegant syntax. A web framework provides a structure and starting point for creating your application, allowing you to focus on creating something amazing while we sweat the details.\n\nLaravel strives to provide an amazing developer experience while providing powerful features such as thorough dependency injection, an expressive database abstraction layer, queues and scheduled jobs, unit and integration testing, and more.\n\nWhether you are new to PHP web frameworks or have years of experience, Laravel is a framework that can grow with you. We'll help you take your first steps as a web developer or give you a boost as you take your expertise to the next level. We can't wait to see what you build.\n\n> **Note**\n> New to Laravel? Check out the [Laravel Bootcamp](https://bootcamp.laravel.com) for a hands-on tour of the framework while we walk you through building your first Laravel application.\n\n<a name=\"why-laravel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":21,"to":32}}}}],["2157",{"pageContent":"Why Laravel?\n\nThere are a variety of tools and frameworks available to you when building a web application. However, we believe Laravel is the best choice for building modern, full-stack web applications.\n\n#### A Progressive Framework\n\nWe like to call Laravel a \"progressive\" framework. By that, we mean that Laravel grows with you. If you're just taking your first steps into web development, Laravel's vast library of documentation, guides, and [video tutorials](https://laracasts.com) will help you learn the ropes without becoming overwhelmed.\n\nIf you're a senior developer, Laravel gives you robust tools for [dependency injection](/docs/{{version}}/container), [unit testing](/docs/{{version}}/testing), [queues](/docs/{{version}}/queues), [real-time events](/docs/{{version}}/broadcasting), and more. Laravel is fine-tuned for building professional web applications and ready to handle enterprise work loads.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":33,"to":41}}}}],["2158",{"pageContent":"A Scalable Framework\n\nLaravel is incredibly scalable. Thanks to the scaling-friendly nature of PHP and Laravel's built-in support for fast, distributed cache systems like Redis, horizontal scaling with Laravel is a breeze. In fact, Laravel applications have been easily scaled to handle hundreds of millions of requests per month.\n\nNeed extreme scaling? Platforms like [Laravel Vapor](https://vapor.laravel.com) allow you to run your Laravel application at nearly limitless scale on AWS's latest serverless technology.\n\n#### A Community Framework\n\nLaravel combines the best packages in the PHP ecosystem to offer the most robust and developer friendly framework available. In addition, thousands of talented developers from around the world have [contributed to the framework](https://github.com/laravel/framework). Who knows, maybe you'll even become a Laravel contributor.\n\n<a name=\"your-first-laravel-project\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":43,"to":53}}}}],["2159",{"pageContent":"Your First Laravel Project\n\nBefore creating your first Laravel project, you should ensure that your local machine has PHP and [Composer](https://getcomposer.org) installed. If you are developing on macOS, PHP and Composer can be installed within minutes via [Laravel Herd](https://herd.laravel.com). In addition, we recommend [installing Node and NPM](https://nodejs.org).\n\nAfter you have installed PHP and Composer, you may create a new Laravel project via the Composer `create-project` command:\n\n```nothing\ncomposer create-project laravel/laravel example-app\n```\n\nOr, you may create new Laravel projects by globally installing the Laravel installer via Composer. Or, if you installed PHP and Composer via [Laravel Herd](https://herd.laravel.com), the Laravel installer is already available to you:\n\n```nothing\ncomposer global require laravel/installer\n\nlaravel new example-app","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":54,"to":69}}}}],["2160",{"pageContent":"After the project has been created, start Laravel's local development server using the Laravel's Artisan CLI `serve` command:\n\n```nothing\ncd example-app\n\nphp artisan serve\n```\n\nOnce you have started the Artisan development server, your application will be accessible in your web browser at `http://localhost:8000`. Next, you're ready to [start taking your next steps into the Laravel ecosystem](#next-steps). Of course, you may also want to [configure a database](#databases-and-migrations).\n\n> **Note**  \n> If you would like a head start when developing your Laravel application, consider using one of our [starter kits](/docs/{{version}}/starter-kits). Laravel's starter kits provide backend and frontend authentication scaffolding for your new Laravel application.\n\n<a name=\"laravel-and-docker\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":72,"to":85}}}}],["2161",{"pageContent":"Laravel & Docker\n\nWe want it to be as easy as possible to get started with Laravel regardless of your preferred operating system. So, there are a variety of options for developing and running a Laravel project on your local machine. While you may wish to explore these options at a later time, Laravel provides [Sail](/docs/{{version}}/sail), a built-in solution for running your Laravel project using [Docker](https://www.docker.com).\n\nDocker is a tool for running applications and services in small, light-weight \"containers\" which do not interfere with your local machine's installed software or configuration. This means you don't have to worry about configuring or setting up complicated development tools such as web servers and databases on your local machine. To get started, you only need to install [Docker Desktop](https://www.docker.com/products/docker-desktop).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":86,"to":90}}}}],["2162",{"pageContent":"Laravel Sail is a light-weight command-line interface for interacting with Laravel's default Docker configuration. Sail provides a great starting point for building a Laravel application using PHP, MySQL, and Redis without requiring prior Docker experience.\n\n> **Note**  \n> Already a Docker expert? Don't worry! Everything about Sail can be customized using the `docker-compose.yml` file included with Laravel.\n\n<a name=\"getting-started-on-macos\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":92,"to":97}}}}],["2163",{"pageContent":"Getting Started On macOS\n\nIf you're developing on a Mac and [Docker Desktop](https://www.docker.com/products/docker-desktop) is already installed, you can use a simple terminal command to create a new Laravel project. For example, to create a new Laravel application in a directory named \"example-app\", you may run the following command in your terminal:\n\n```shell\ncurl -s \"https://laravel.build/example-app\" | bash","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":98,"to":103}}}}],["2164",{"pageContent":"Of course, you can change \"example-app\" in this URL to anything you like - just make sure the application name only contains alpha-numeric characters, dashes, and underscores. The Laravel application's directory will be created within the directory you execute the command from.\n\nSail installation may take several minutes while Sail's application containers are built on your local machine.\n\nAfter the project has been created, you can navigate to the application directory and start Laravel Sail. Laravel Sail provides a simple command-line interface for interacting with Laravel's default Docker configuration:\n\n```shell\ncd example-app\n\n./vendor/bin/sail up\n```\n\nOnce the application's Docker containers have been started, you can access the application in your web browser at: http://localhost.\n\n> **Note**  \n> To continue learning more about Laravel Sail, review its [complete documentation](/docs/{{version}}/sail).\n\n<a name=\"getting-started-on-windows\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":106,"to":123}}}}],["2165",{"pageContent":"Getting Started On Windows\n\nBefore we create a new Laravel application on your Windows machine, make sure to install [Docker Desktop](https://www.docker.com/products/docker-desktop). Next, you should ensure that Windows Subsystem for Linux 2 (WSL2) is installed and enabled. WSL allows you to run Linux binary executables natively on Windows 10. Information on how to install and enable WSL2 can be found within Microsoft's [developer environment documentation](https://docs.microsoft.com/en-us/windows/wsl/install-win10).\n\n> **Note**  \n> After installing and enabling WSL2, you should ensure that Docker Desktop is [configured to use the WSL2 backend](https://docs.docker.com/docker-for-windows/wsl/).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":124,"to":129}}}}],["2166",{"pageContent":"> **Note**  \n> After installing and enabling WSL2, you should ensure that Docker Desktop is [configured to use the WSL2 backend](https://docs.docker.com/docker-for-windows/wsl/).\n\nNext, you are ready to create your first Laravel project. Launch [Windows Terminal](https://www.microsoft.com/en-us/p/windows-terminal/9n0dx20hk701?rtc=1&activetab=pivot:overviewtab) and begin a new terminal session for your WSL2 Linux operating system. Next, you can use a simple terminal command to create a new Laravel project. For example, to create a new Laravel application in a directory named \"example-app\", you may run the following command in your terminal:\n\n```shell\ncurl -s https://laravel.build/example-app | bash","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":129,"to":135}}}}],["2167",{"pageContent":"Of course, you can change \"example-app\" in this URL to anything you like - just make sure the application name only contains alpha-numeric characters, dashes, and underscores. The Laravel application's directory will be created within the directory you execute the command from.\n\nSail installation may take several minutes while Sail's application containers are built on your local machine.\n\nAfter the project has been created, you can navigate to the application directory and start Laravel Sail. Laravel Sail provides a simple command-line interface for interacting with Laravel's default Docker configuration:\n\n```shell\ncd example-app\n\n./vendor/bin/sail up\n```\n\nOnce the application's Docker containers have been started, you can access the application in your web browser at: http://localhost.\n\n> **Note**  \n> To continue learning more about Laravel Sail, review its [complete documentation](/docs/{{version}}/sail).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":135,"to":150}}}}],["2168",{"pageContent":"Developing Within WSL2\n\nOf course, you will need to be able to modify the Laravel application files that were created within your WSL2 installation. To accomplish this, we recommend using Microsoft's [Visual Studio Code](https://code.visualstudio.com) editor and their first-party extension for [Remote Development](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack).\n\nOnce these tools are installed, you may open any Laravel project by executing the `code .` command from your application's root directory using Windows Terminal.\n\n<a name=\"getting-started-on-linux\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":183,"to":189}}}}],["2169",{"pageContent":"Getting Started On Linux\n\nIf you're developing on Linux and [Docker Compose](https://docs.docker.com/compose/install/) is already installed, you can use a simple terminal command to create a new Laravel project.\n\nFirst, if you are using Docker Desktop for Linux, you should execute the following command. If you are not using Docker Desktop for Linux, you may skip this step:\n\n```shell\ndocker context use default\n```\n\nThen, to create a new Laravel application in a directory named \"example-app\", you may run the following command in your terminal:\n\n```shell\ncurl -s https://laravel.build/example-app | bash","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":190,"to":203}}}}],["2170",{"pageContent":"Then, to create a new Laravel application in a directory named \"example-app\", you may run the following command in your terminal:\n\n```shell\ncurl -s https://laravel.build/example-app | bash\n```\n\nOf course, you can change \"example-app\" in this URL to anything you like - just make sure the application name only contains alpha-numeric characters, dashes, and underscores. The Laravel application's directory will be created within the directory you execute the command from.\n\nSail installation may take several minutes while Sail's application containers are built on your local machine.\n\nAfter the project has been created, you can navigate to the application directory and start Laravel Sail. Laravel Sail provides a simple command-line interface for interacting with Laravel's default Docker configuration:\n\n```shell\ncd example-app\n\n./vendor/bin/sail up","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":203,"to":218}}}}],["2171",{"pageContent":"Once the application's Docker containers have been started, you can access the application in your web browser at: http://localhost.\n\n> **Note**  \n> To continue learning more about Laravel Sail, review its [complete documentation](/docs/{{version}}/sail).\n\n<a name=\"choosing-your-sail-services\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":221,"to":226}}}}],["2172",{"pageContent":"Choosing Your Sail Services\n\nWhen creating a new Laravel application via Sail, you may use the `with` query string variable to choose which services should be configured in your new application's `docker-compose.yml` file. Available services include `mysql`, `pgsql`, `mariadb`, `redis`, `memcached`, `meilisearch`, `minio`, `selenium`, and `mailpit`:\n\n```shell\ncurl -s \"https://laravel.build/example-app?with=mysql,redis\" | bash\n```\n\nIf you do not specify which services you would like configured, a default stack of `mysql`, `redis`, `meilisearch`, `mailpit`, and `selenium` will be configured.\n\nYou may instruct Sail to install a default [Devcontainer](/docs/{{version}}/sail#using-devcontainers) by adding the `devcontainer` parameter to the URL:\n\n```shell\ncurl -s \"https://laravel.build/example-app?with=mysql,redis&devcontainer\" | bash\n```\n\n<a name=\"initial-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":227,"to":243}}}}],["2173",{"pageContent":"Initial Configuration\n\nAll of the configuration files for the Laravel framework are stored in the `config` directory. Each option is documented, so feel free to look through the files and get familiar with the options available to you.\n\nLaravel needs almost no additional configuration out of the box. You are free to get started developing! However, you may wish to review the `config/app.php` file and its documentation. It contains several options such as `timezone` and `locale` that you may wish to change according to your application.\n\n<a name=\"environment-based-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":244,"to":250}}}}],["2174",{"pageContent":"Environment Based Configuration\n\nSince many of Laravel's configuration option values may vary depending on whether your application is running on your local machine or on a production web server, many important configuration values are defined using the `.env` file that exists at the root of your application.\n\nYour `.env` file should not be committed to your application's source control, since each developer / server using your application could require a different environment configuration. Furthermore, this would be a security risk in the event an intruder gains access to your source control repository, since any sensitive credentials would get exposed.\n\n> **Note**  \n> For more information about the `.env` file and environment based configuration, check out the full [configuration documentation](/docs/{{version}}/configuration#environment-configuration).\n\n<a name=\"databases-and-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":251,"to":260}}}}],["2175",{"pageContent":"Databases & Migrations\n\nNow that you have created your Laravel application, you probably want to store some data in a database. By default, your application's `.env` configuration file specifies that Laravel will be interacting with a MySQL database and will access the database at `127.0.0.1`. If you are developing on macOS and need to install MySQL, Postgres, or Redis locally, you may find it convenient to utilize [DBngin](https://dbngin.com/).\n\nIf you do not want to install MySQL or Postgres on your local machine, you can always use a [SQLite](https://www.sqlite.org/index.html) database. SQLite is a small, fast, self-contained database engine. To get started, update your `.env` configuration file to use Laravel's `sqlite` database driver. You may remove the other database configuration options:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":261,"to":265}}}}],["2176",{"pageContent":"```ini\nDB_CONNECTION=sqlite # [tl! add]\nDB_CONNECTION=mysql # [tl! remove]\nDB_HOST=127.0.0.1 # [tl! remove]\nDB_PORT=3306 # [tl! remove]\nDB_DATABASE=laravel # [tl! remove]\nDB_USERNAME=root # [tl! remove]\nDB_PASSWORD= # [tl! remove]","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":267,"to":274}}}}],["2177",{"pageContent":"Once you have configured your SQLite database, you may run your application's [database migrations](/docs/{{version}}/migrations), which will create your application's database tables:\n\n```shell\nphp artisan migrate\n```\n\nIf an SQLite database does not exist for your application, Laravel will ask you if you would like the database to be created. Typically, the SQLite database file will be created at `database/database.sqlite`.\n\n<a name=\"directory-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":277,"to":285}}}}],["2178",{"pageContent":"Directory Configuration\n\nLaravel should always be served out of the root of the \"web directory\" configured for your web server. You should not attempt to serve a Laravel application out of a subdirectory of the \"web directory\". Attempting to do so could expose sensitive files present within your application.\n\n<a name=\"ide-support\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":286,"to":290}}}}],["2179",{"pageContent":"IDE Support\n\nYou are free to use any code editor you wish when developing Laravel applications; however, [PhpStorm](https://www.jetbrains.com/phpstorm/laravel/) offers extensive support for Laravel and its ecosystem, including [Laravel Pint](https://www.jetbrains.com/help/phpstorm/using-laravel-pint.html).\n\nIn addition, the community maintained [Laravel Idea](https://laravel-idea.com/) PhpStorm plugin offers a variety of helpful IDE augmentations, including code generation, Eloquent syntax completion, validation rule completion, and more.\n\n<a name=\"next-steps\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":291,"to":297}}}}],["2180",{"pageContent":"Next Steps\n\nNow that you have created your Laravel project, you may be wondering what to learn next. First, we strongly recommend becoming familiar with how Laravel works by reading the following documentation:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- [Request Lifecycle](/docs/{{version}}/lifecycle)\n- [Configuration](/docs/{{version}}/configuration)\n- [Directory Structure](/docs/{{version}}/structure)\n- [Frontend](/docs/{{version}}/frontend)\n- [Service Container](/docs/{{version}}/container)\n- [Facades](/docs/{{version}}/facades)\n\n</div>\n\nHow you want to use Laravel will also dictate the next steps on your journey. There are a variety of ways to use Laravel, and we'll explore two primary use cases for the framework below.\n\n> **Note**\n> New to Laravel? Check out the [Laravel Bootcamp](https://bootcamp.laravel.com) for a hands-on tour of the framework while we walk you through building your first Laravel application.\n\n<a name=\"laravel-the-fullstack-framework\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":298,"to":318}}}}],["2181",{"pageContent":"Laravel The Full Stack Framework\n\nLaravel may serve as a full stack framework. By \"full stack\" framework we mean that you are going to use Laravel to route requests to your application and render your frontend via [Blade templates](/docs/{{version}}/blade) or a single-page application hybrid technology like [Inertia](https://inertiajs.com). This is the most common way to use the Laravel framework, and, in our opinion, the most productive way to use Laravel.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":319,"to":321}}}}],["2182",{"pageContent":"If this is how you plan to use Laravel, you may want to check out our documentation on [frontend development](/docs/{{version}}/frontend), [routing](/docs/{{version}}/routing), [views](/docs/{{version}}/views), or the [Eloquent ORM](/docs/{{version}}/eloquent). In addition, you might be interested in learning about community packages like [Livewire](https://livewire.laravel.com) and [Inertia](https://inertiajs.com). These packages allow you to use Laravel as a full-stack framework while enjoying many of the UI benefits provided by single-page JavaScript applications.\n\nIf you are using Laravel as a full stack framework, we also strongly encourage you to learn how to compile your application's CSS and JavaScript using [Vite](/docs/{{version}}/vite).\n\n> **Note**  \n> If you want to get a head start building your application, check out one of our official [application starter kits](/docs/{{version}}/starter-kits).\n\n<a name=\"laravel-the-api-backend\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":323,"to":330}}}}],["2183",{"pageContent":"Laravel The API Backend\n\nLaravel may also serve as an API backend to a JavaScript single-page application or mobile application. For example, you might use Laravel as an API backend for your [Next.js](https://nextjs.org) application. In this context, you may use Laravel to provide [authentication](/docs/{{version}}/sanctum) and data storage / retrieval for your application, while also taking advantage of Laravel's powerful services such as queues, emails, notifications, and more.\n\nIf this is how you plan to use Laravel, you may want to check out our documentation on [routing](/docs/{{version}}/routing), [Laravel Sanctum](/docs/{{version}}/sanctum), and the [Eloquent ORM](/docs/{{version}}/eloquent).\n\n> **Note**  \n> Need a head start scaffolding your Laravel backend and Next.js frontend? Laravel Breeze offers an [API stack](/docs/{{version}}/starter-kits#breeze-and-next) as well as a [Next.js frontend implementation](https://github.com/laravel/breeze-next) so you can get started in minutes.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/installation.md","loc":{"lines":{"from":331,"to":338}}}}],["2184",{"pageContent":"The MIT License (MIT)\n\nCopyright (c) Taylor Otwell\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/license.md","loc":{"lines":{"from":1,"to":13}}}}],["2185",{"pageContent":"The above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/license.md","loc":{"lines":{"from":13,"to":22}}}}],["2186",{"pageContent":"# Request Lifecycle\n\n- [Introduction](#introduction)\n- [Lifecycle Overview](#lifecycle-overview)\n    - [First Steps](#first-steps)\n    - [HTTP / Console Kernels](#http-console-kernels)\n    - [Service Providers](#service-providers)\n    - [Routing](#routing)\n    - [Finishing Up](#finishing-up)\n- [Focus On Service Providers](#focus-on-service-providers)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":1,"to":12}}}}],["2187",{"pageContent":"Introduction\n\nWhen using any tool in the \"real world\", you feel more confident if you understand how that tool works. Application development is no different. When you understand how your development tools function, you feel more comfortable and confident using them.\n\nThe goal of this document is to give you a good, high-level overview of how the Laravel framework works. By getting to know the overall framework better, everything feels less \"magical\" and you will be more confident building your applications. If you don't understand all of the terms right away, don't lose heart! Just try to get a basic grasp of what is going on, and your knowledge will grow as you explore other sections of the documentation.\n\n<a name=\"lifecycle-overview\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":13,"to":19}}}}],["2188",{"pageContent":"Lifecycle Overview\n\n<a name=\"first-steps\"></a>\n### First Steps\n\nThe entry point for all requests to a Laravel application is the `public/index.php` file. All requests are directed to this file by your web server (Apache / Nginx) configuration. The `index.php` file doesn't contain much code. Rather, it is a starting point for loading the rest of the framework.\n\nThe `index.php` file loads the Composer generated autoloader definition, and then retrieves an instance of the Laravel application from `bootstrap/app.php`. The first action taken by Laravel itself is to create an instance of the application / [service container](/docs/{{version}}/container).\n\n<a name=\"http-console-kernels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":20,"to":29}}}}],["2189",{"pageContent":"HTTP / Console Kernels\n\nNext, the incoming request is sent to either the HTTP kernel or the console kernel, depending on the type of request that is entering the application. These two kernels serve as the central location that all requests flow through. For now, let's just focus on the HTTP kernel, which is located in `app/Http/Kernel.php`.\n\nThe HTTP kernel extends the `Illuminate\\Foundation\\Http\\Kernel` class, which defines an array of `bootstrappers` that will be run before the request is executed. These bootstrappers configure error handling, configure logging, [detect the application environment](/docs/{{version}}/configuration#environment-configuration), and perform other tasks that need to be done before the request is actually handled. Typically, these classes handle internal Laravel configuration that you do not need to worry about.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":30,"to":34}}}}],["2190",{"pageContent":"The HTTP kernel also defines a list of HTTP [middleware](/docs/{{version}}/middleware) that all requests must pass through before being handled by the application. These middleware handle reading and writing the [HTTP session](/docs/{{version}}/session), determining if the application is in maintenance mode, [verifying the CSRF token](/docs/{{version}}/csrf), and more. We'll talk more about these soon.\n\nThe method signature for the HTTP kernel's `handle` method is quite simple: it receives a `Request` and returns a `Response`. Think of the kernel as being a big black box that represents your entire application. Feed it HTTP requests and it will return HTTP responses.\n\n<a name=\"service-providers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":36,"to":40}}}}],["2191",{"pageContent":"Service Providers\n\nOne of the most important kernel bootstrapping actions is loading the [service providers](/docs/{{version}}/providers) for your application. Service providers are responsible for bootstrapping all of the framework's various components, such as the database, queue, validation, and routing components. All of the service providers for the application are configured in the `config/app.php` configuration file's `providers` array.\n\nLaravel will iterate through this list of providers and instantiate each of them. After instantiating the providers, the `register` method will be called on all of the providers. Then, once all of the providers have been registered, the `boot` method will be called on each provider. This is so service providers may depend on every container binding being registered and available by the time their `boot` method is executed.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":41,"to":45}}}}],["2192",{"pageContent":"Essentially every major feature offered by Laravel is bootstrapped and configured by a service provider. Since they bootstrap and configure so many features offered by the framework, service providers are the most important aspect of the entire Laravel bootstrap process.\n\n<a name=\"routing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":47,"to":49}}}}],["2193",{"pageContent":"Routing\n\nOne of the most important service providers in your application is the `App\\Providers\\RouteServiceProvider`. This service provider loads the route files contained within your application's `routes` directory. Go ahead, crack open the `RouteServiceProvider` code and take a look at how it works!\n\nOnce the application has been bootstrapped and all service providers have been registered, the `Request` will be handed off to the router for dispatching. The router will dispatch the request to a route or controller, as well as run any route specific middleware.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":50,"to":54}}}}],["2194",{"pageContent":"Middleware provide a convenient mechanism for filtering or examining HTTP requests entering your application. For example, Laravel includes a middleware that verifies if the user of your application is authenticated. If the user is not authenticated, the middleware will redirect the user to the login screen. However, if the user is authenticated, the middleware will allow the request to proceed further into the application. Some middleware are assigned to all routes within the application, like those defined in the `$middleware` property of your HTTP kernel, while some are only assigned to specific routes or route groups. You can learn more about middleware by reading the complete [middleware documentation](/docs/{{version}}/middleware).\n\nIf the request passes through all of the matched route's assigned middleware, the route or controller method will be executed and the response returned by the route or controller method will be sent back through the route's chain of middleware.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":56,"to":58}}}}],["2195",{"pageContent":"<a name=\"finishing-up\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":60,"to":60}}}}],["2196",{"pageContent":"Finishing Up\n\nOnce the route or controller method returns a response, the response will travel back outward through the route's middleware, giving the application a chance to modify or examine the outgoing response.\n\nFinally, once the response travels back through the middleware, the HTTP kernel's `handle` method returns the response object and the `index.php` file calls the `send` method on the returned response. The `send` method sends the response content to the user's web browser. We've finished our journey through the entire Laravel request lifecycle!\n\n<a name=\"focus-on-service-providers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":61,"to":67}}}}],["2197",{"pageContent":"Focus On Service Providers\n\nService providers are truly the key to bootstrapping a Laravel application. The application instance is created, the service providers are registered, and the request is handed to the bootstrapped application. It's really that simple!\n\nHaving a firm grasp of how a Laravel application is built and bootstrapped via service providers is very valuable. Your application's default service providers are stored in the `app/Providers` directory.\n\nBy default, the `AppServiceProvider` is fairly empty. This provider is a great place to add your application's own bootstrapping and service container bindings. For large applications, you may wish to create several service providers, each with more granular bootstrapping for specific services used by your application.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/lifecycle.md","loc":{"lines":{"from":68,"to":74}}}}],["2198",{"pageContent":"# Localization\n\n- [Introduction](#introduction)\n    - [Publishing The Language Files](#publishing-the-language-files)\n    - [Configuring The Locale](#configuring-the-locale)\n    - [Pluralization Language](#pluralization-language)\n- [Defining Translation Strings](#defining-translation-strings)\n    - [Using Short Keys](#using-short-keys)\n    - [Using Translation Strings As Keys](#using-translation-strings-as-keys)\n- [Retrieving Translation Strings](#retrieving-translation-strings)\n    - [Replacing Parameters In Translation Strings](#replacing-parameters-in-translation-strings)\n    - [Pluralization](#pluralization)\n- [Overriding Package Language Files](#overriding-package-language-files)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":1,"to":15}}}}],["2199",{"pageContent":"Introduction\n\n> **Note**\n> By default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files, you may publish them via the `lang:publish` Artisan command.\n\nLaravel's localization features provide a convenient way to retrieve strings in various languages, allowing you to easily support multiple languages within your application.\n\nLaravel provides two ways to manage translation strings. First, language strings may be stored in files within the application's `lang` directory. Within this directory, there may be subdirectories for each language supported by the application. This is the approach Laravel uses to manage translation strings for built-in Laravel features such as validation error messages:\n\n    /lang\n        /en\n            messages.php\n        /es\n            messages.php","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":16,"to":29}}}}],["2200",{"pageContent":"/lang\n        /en\n            messages.php\n        /es\n            messages.php\n\nOr, translation strings may be defined within JSON files that are placed within the `lang` directory. When taking this approach, each language supported by your application would have a corresponding JSON file within this directory. This approach is recommended for applications that have a large number of translatable strings:\n\n    /lang\n        en.json\n        es.json\n\nWe'll discuss each approach to managing translation strings within this documentation.\n\n<a name=\"publishing-the-language-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":29,"to":43}}}}],["2201",{"pageContent":"Publishing The Language Files\n\nBy default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files or create your own, you should scaffold the `lang` directory via the `lang:publish` Artisan command. The `lang:publish` command will create the `lang` directory in your application and publish the default set of language files used by Laravel:\n\n```shell\nphp artisan lang:publish\n```\n\n<a name=\"configuring-the-locale\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":44,"to":52}}}}],["2202",{"pageContent":"Configuring The Locale\n\nThe default language for your application is stored in the `config/app.php` configuration file's `locale` configuration option. You are free to modify this value to suit the needs of your application.\n\nYou may modify the default language for a single HTTP request at runtime using the `setLocale` method provided by the `App` facade:\n\n    use Illuminate\\Support\\Facades\\App;\n\n    Route::get('/greeting/{locale}', function (string $locale) {\n        if (! in_array($locale, ['en', 'es', 'fr'])) {\n            abort(400);\n        }\n\n        App::setLocale($locale);\n\n        // ...\n    });\n\nYou may configure a \"fallback language\", which will be used when the active language does not contain a given translation string. Like the default language, the fallback language is also configured in the `config/app.php` configuration file:\n\n    'fallback_locale' => 'en',\n\n<a name=\"determining-the-current-locale\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":53,"to":75}}}}],["2203",{"pageContent":"Determining The Current Locale\n\nYou may use the `currentLocale` and `isLocale` methods on the `App` facade to determine the current locale or check if the locale is a given value:\n\n    use Illuminate\\Support\\Facades\\App;\n\n    $locale = App::currentLocale();\n\n    if (App::isLocale('en')) {\n        // ...\n    }\n\n<a name=\"pluralization-language\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":76,"to":88}}}}],["2204",{"pageContent":"Pluralization Language\n\nYou may instruct Laravel's \"pluralizer\", which is used by Eloquent and other portions of the framework to convert singular strings to plural strings, to use a language other than English. This may be accomplished by invoking the `useLanguage` method within the `boot` method of one of your application's service providers. The pluralizer's currently supported languages are: `french`, `norwegian-bokmal`, `portuguese`, `spanish`, and `turkish`:\n\n    use Illuminate\\Support\\Pluralizer;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Pluralizer::useLanguage('spanish');     \n\n        // ...     \n    }\n\n> **Warning**  \n> If you customize the pluralizer's language, you should explicitly define your Eloquent model's [table names](/docs/{{version}}/eloquent#table-names).\n\n<a name=\"defining-translation-strings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":89,"to":108}}}}],["2205",{"pageContent":"Defining Translation Strings\n\n<a name=\"using-short-keys\"></a>\n### Using Short Keys\n\nTypically, translation strings are stored in files within the `lang` directory. Within this directory, there should be a subdirectory for each language supported by your application. This is the approach Laravel uses to manage translation strings for built-in Laravel features such as validation error messages:\n\n    /lang\n        /en\n            messages.php\n        /es\n            messages.php\n\nAll language files return an array of keyed strings. For example:\n\n    <?php\n\n    // lang/en/messages.php\n\n    return [\n        'welcome' => 'Welcome to our application!',\n    ];\n\n> **Warning**  \n> For languages that differ by territory, you should name the language directories according to the ISO 15897. For example, \"en_GB\" should be used for British English rather than \"en-gb\".\n\n<a name=\"using-translation-strings-as-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":109,"to":135}}}}],["2206",{"pageContent":"Using Translation Strings As Keys\n\nFor applications with a large number of translatable strings, defining every string with a \"short key\" can become confusing when referencing the keys in your views and it is cumbersome to continually invent keys for every translation string supported by your application.\n\nFor this reason, Laravel also provides support for defining translation strings using the \"default\" translation of the string as the key. Language files that use translation strings as keys are stored as JSON files in the `lang` directory. For example, if your application has a Spanish translation, you should create a `lang/es.json` file:\n\n```json\n{\n    \"I love programming.\": \"Me encanta programar.\"\n}\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":136,"to":146}}}}],["2207",{"pageContent":"Key / File Conflicts\n\nYou should not define translation string keys that conflict with other translation filenames. For example, translating `__('Action')` for the \"NL\" locale while a `nl/action.php` file exists but a `nl.json` file does not exist will result in the translator returning the entire contents of `nl/action.php`.\n\n<a name=\"retrieving-translation-strings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":148,"to":152}}}}],["2208",{"pageContent":"Retrieving Translation Strings\n\nYou may retrieve translation strings from your language files using the `__` helper function. If you are using \"short keys\" to define your translation strings, you should pass the file that contains the key and the key itself to the `__` function using \"dot\" syntax. For example, let's retrieve the `welcome` translation string from the `lang/en/messages.php` language file:\n\n    echo __('messages.welcome');\n\nIf the specified translation string does not exist, the `__` function will return the translation string key. So, using the example above, the `__` function would return `messages.welcome` if the translation string does not exist.\n\n If you are using your [default translation strings as your translation keys](#using-translation-strings-as-keys), you should pass the default translation of your string to the `__` function;\n\n    echo __('I love programming.');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":153,"to":163}}}}],["2209",{"pageContent":"echo __('I love programming.');\n\nAgain, if the translation string does not exist, the `__` function will return the translation string key that it was given.\n\nIf you are using the [Blade templating engine](/docs/{{version}}/blade), you may use the `{{ }}` echo syntax to display the translation string:\n\n    {{ __('messages.welcome') }}\n\n<a name=\"replacing-parameters-in-translation-strings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":163,"to":171}}}}],["2210",{"pageContent":"Replacing Parameters In Translation Strings\n\nIf you wish, you may define placeholders in your translation strings. All placeholders are prefixed with a `:`. For example, you may define a welcome message with a placeholder name:\n\n    'welcome' => 'Welcome, :name',\n\nTo replace the placeholders when retrieving a translation string, you may pass an array of replacements as the second argument to the `__` function:\n\n    echo __('messages.welcome', ['name' => 'dayle']);\n\nIf your placeholder contains all capital letters, or only has its first letter capitalized, the translated value will be capitalized accordingly:\n\n    'welcome' => 'Welcome, :NAME', // Welcome, DAYLE\n    'goodbye' => 'Goodbye, :Name', // Goodbye, Dayle\n\n<a name=\"object-replacement-formatting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":172,"to":187}}}}],["2211",{"pageContent":"Object Replacement Formatting\n\nIf you attempt to provide an object as a translation placeholder, the object's `__toString` method will be invoked. The [`__toString`](https://www.php.net/manual/en/language.oop5.magic.php#object.tostring) method is one of PHP's built-in \"magic methods\". However, sometimes you may not have control over the `__toString` method of a given class, such as when the class that you are interacting with belongs to a third-party library.\n\nIn these cases, Laravel allows you to register a custom formatting handler for that particular type of object. To accomplish this, you should invoke the translator's `stringable` method. The `stringable` method accepts a closure, which should type-hint the type of object that it is responsible for formatting. Typically, the `stringable` method should be invoked within the `boot` method of your application's `AppServiceProvider` class:\n\n    use Illuminate\\Support\\Facades\\Lang;\n    use Money\\Money;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":188,"to":195}}}}],["2212",{"pageContent":"use Illuminate\\Support\\Facades\\Lang;\n    use Money\\Money;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Lang::stringable(function (Money $money) {\n            return $money->formatTo('en_GB');\n        });\n    }\n\n<a name=\"pluralization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":195,"to":208}}}}],["2213",{"pageContent":"Pluralization\n\nPluralization is a complex problem, as different languages have a variety of complex rules for pluralization; however, Laravel can help you translate strings differently based on pluralization rules that you define. Using a `|` character, you may distinguish singular and plural forms of a string:\n\n    'apples' => 'There is one apple|There are many apples',\n\nOf course, pluralization is also supported when using [translation strings as keys](#using-translation-strings-as-keys):\n\n```json\n{\n    \"There is one apple|There are many apples\": \"Hay una manzana|Hay muchas manzanas\"\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":209,"to":220}}}}],["2214",{"pageContent":"You may even create more complex pluralization rules which specify translation strings for multiple ranges of values:\n\n    'apples' => '{0} There are none|[1,19] There are some|[20,*] There are many',\n\nAfter defining a translation string that has pluralization options, you may use the `trans_choice` function to retrieve the line for a given \"count\". In this example, since the count is greater than one, the plural form of the translation string is returned:\n\n    echo trans_choice('messages.apples', 10);\n\nYou may also define placeholder attributes in pluralization strings. These placeholders may be replaced by passing an array as the third argument to the `trans_choice` function:\n\n    'minutes_ago' => '{1} :value minute ago|[2,*] :value minutes ago',\n\n    echo trans_choice('time.minutes_ago', 5, ['value' => 5]);\n\nIf you would like to display the integer value that was passed to the `trans_choice` function, you may use the built-in `:count` placeholder:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":223,"to":237}}}}],["2215",{"pageContent":"If you would like to display the integer value that was passed to the `trans_choice` function, you may use the built-in `:count` placeholder:\n\n    'apples' => '{0} There are none|{1} There is one|[2,*] There are :count',\n\n<a name=\"overriding-package-language-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":237,"to":241}}}}],["2216",{"pageContent":"Overriding Package Language Files\n\nSome packages may ship with their own language files. Instead of changing the package's core files to tweak these lines, you may override them by placing files in the `lang/vendor/{package}/{locale}` directory.\n\nSo, for example, if you need to override the English translation strings in `messages.php` for a package named `skyrim/hearthfire`, you should place a language file at: `lang/vendor/hearthfire/en/messages.php`. Within this file, you should only define the translation strings you wish to override. Any translation strings you don't override will still be loaded from the package's original language files.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/localization.md","loc":{"lines":{"from":242,"to":246}}}}],["2217",{"pageContent":"# Logging\n\n- [Introduction](#introduction)\n- [Configuration](#configuration)\n    - [Available Channel Drivers](#available-channel-drivers)\n    - [Channel Prerequisites](#channel-prerequisites)\n    - [Logging Deprecation Warnings](#logging-deprecation-warnings)\n- [Building Log Stacks](#building-log-stacks)\n- [Writing Log Messages](#writing-log-messages)\n    - [Contextual Information](#contextual-information)\n    - [Writing To Specific Channels](#writing-to-specific-channels)\n- [Monolog Channel Customization](#monolog-channel-customization)\n    - [Customizing Monolog For Channels](#customizing-monolog-for-channels)\n    - [Creating Monolog Handler Channels](#creating-monolog-handler-channels)\n    - [Creating Custom Channels Via Factories](#creating-custom-channels-via-factories)\n- [Tailing Log Messages Using Pail](#tailing-log-messages-using-pail)\n    - [Installation](#pail-installation)\n    - [Usage](#pail-usage)\n    - [Filtering Logs](#pail-filtering-logs)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":1,"to":21}}}}],["2218",{"pageContent":"Introduction\n\nTo help you learn more about what's happening within your application, Laravel provides robust logging services that allow you to log messages to files, the system error log, and even to Slack to notify your entire team.\n\nLaravel logging is based on \"channels\". Each channel represents a specific way of writing log information. For example, the `single` channel writes log files to a single log file, while the `slack` channel sends log messages to Slack. Log messages may be written to multiple channels based on their severity.\n\nUnder the hood, Laravel utilizes the [Monolog](https://github.com/Seldaek/monolog) library, which provides support for a variety of powerful log handlers. Laravel makes it a cinch to configure these handlers, allowing you to mix and match them to customize your application's log handling.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":22,"to":30}}}}],["2219",{"pageContent":"Configuration\n\nAll of the configuration options for your application's logging behavior are housed in the `config/logging.php` configuration file. This file allows you to configure your application's log channels, so be sure to review each of the available channels and their options. We'll review a few common options below.\n\nBy default, Laravel will use the `stack` channel when logging messages. The `stack` channel is used to aggregate multiple log channels into a single channel. For more information on building stacks, check out the [documentation below](#building-log-stacks).\n\n<a name=\"configuring-the-channel-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":31,"to":37}}}}],["2220",{"pageContent":"Configuring The Channel Name\n\nBy default, Monolog is instantiated with a \"channel name\" that matches the current environment, such as `production` or `local`. To change this value, add a `name` option to your channel's configuration:\n\n    'stack' => [\n        'driver' => 'stack',\n        'name' => 'channel-name',\n        'channels' => ['single', 'slack'],\n    ],\n\n<a name=\"available-channel-drivers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":38,"to":48}}}}],["2221",{"pageContent":"Available Channel Drivers\n\nEach log channel is powered by a \"driver\". The driver determines how and where the log message is actually recorded. The following log channel drivers are available in every Laravel application. An entry for most of these drivers is already present in your application's `config/logging.php` configuration file, so be sure to review this file to become familiar with its contents:\n\n<div class=\"overflow-auto\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":49,"to":53}}}}],["2222",{"pageContent":"<div class=\"overflow-auto\">\n\nName | Description\n------------- | -------------\n`custom` | A driver that calls a specified factory to create a channel\n`daily` | A `RotatingFileHandler` based Monolog driver which rotates daily\n`errorlog` | An `ErrorLogHandler` based Monolog driver\n`monolog` | A Monolog factory driver that may use any supported Monolog handler\n`papertrail` | A `SyslogUdpHandler` based Monolog driver\n`single` | A single file or path based logger channel (`StreamHandler`)\n`slack` | A `SlackWebhookHandler` based Monolog driver\n`stack` | A wrapper to facilitate creating \"multi-channel\" channels\n`syslog` | A `SyslogHandler` based Monolog driver\n\n</div>\n\n> **Note**  \n> Check out the documentation on [advanced channel customization](#monolog-channel-customization) to learn more about the `monolog` and `custom` drivers.\n\n<a name=\"channel-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":53,"to":72}}}}],["2223",{"pageContent":"Channel Prerequisites\n\n<a name=\"configuring-the-single-and-daily-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":73,"to":75}}}}],["2224",{"pageContent":"Configuring The Single and Daily Channels\n\nThe `single` and `daily` channels have three optional configuration options: `bubble`, `permission`, and `locking`.\n\n<div class=\"overflow-auto\">\n\nName | Description | Default\n------------- | ------------- | -------------\n`bubble` | Indicates if messages should bubble up to other channels after being handled | `true`\n`locking` | Attempt to lock the log file before writing to it | `false`\n`permission` | The log file's permissions | `0644`\n\n</div>\n\nAdditionally, the retention policy for the `daily` channel can be configured via the `days` option:\n\n<div class=\"overflow-auto\">\n\nName | Description                                                       | Default\n------------- |-------------------------------------------------------------------| -------------\n`days` | The number of days that daily log files should be retained | `7`\n\n</div>\n\n<a name=\"configuring-the-papertrail-channel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":76,"to":100}}}}],["2225",{"pageContent":"Configuring The Papertrail Channel\n\nThe `papertrail` channel requires the `host` and `port` configuration options. You can obtain these values from [Papertrail](https://help.papertrailapp.com/kb/configuration/configuring-centralized-logging-from-php-apps/#send-events-from-php-app).\n\n<a name=\"configuring-the-slack-channel\"></a>\n#### Configuring The Slack Channel\n\nThe `slack` channel requires a `url` configuration option. This URL should match a URL for an [incoming webhook](https://slack.com/apps/A0F7XDUAZ-incoming-webhooks) that you have configured for your Slack team.\n\nBy default, Slack will only receive logs at the `critical` level and above; however, you can adjust this in your `config/logging.php` configuration file by modifying the `level` configuration option within your Slack log channel's configuration array.\n\n<a name=\"logging-deprecation-warnings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":101,"to":112}}}}],["2226",{"pageContent":"Logging Deprecation Warnings\n\nPHP, Laravel, and other libraries often notify their users that some of their features have been deprecated and will be removed in a future version. If you would like to log these deprecation warnings, you may specify your preferred `deprecations` log channel in your application's `config/logging.php` configuration file:\n\n    'deprecations' => env('LOG_DEPRECATIONS_CHANNEL', 'null'),\n\n    'channels' => [\n        ...\n    ]\n\nOr, you may define a log channel named `deprecations`. If a log channel with this name exists, it will always be used to log deprecations:\n\n    'channels' => [\n        'deprecations' => [\n            'driver' => 'single',\n            'path' => storage_path('logs/php-deprecation-warnings.log'),\n        ],\n    ],\n\n<a name=\"building-log-stacks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":113,"to":132}}}}],["2227",{"pageContent":"Building Log Stacks\n\nAs mentioned previously, the `stack` driver allows you to combine multiple channels into a single log channel for convenience. To illustrate how to use log stacks, let's take a look at an example configuration that you might see in a production application:\n\n    'channels' => [\n        'stack' => [\n            'driver' => 'stack',\n            'channels' => ['syslog', 'slack'],\n        ],\n\n        'syslog' => [\n            'driver' => 'syslog',\n            'level' => 'debug',\n        ],\n\n        'slack' => [\n            'driver' => 'slack',\n            'url' => env('LOG_SLACK_WEBHOOK_URL'),\n            'username' => 'Laravel Log',\n            'emoji' => ':boom:',\n            'level' => 'critical',\n        ],\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":133,"to":155}}}}],["2228",{"pageContent":"Let's dissect this configuration. First, notice our `stack` channel aggregates two other channels via its `channels` option: `syslog` and `slack`. So, when logging messages, both of these channels will have the opportunity to log the message. However, as we will see below, whether these channels actually log the message may be determined by the message's severity / \"level\".\n\n<a name=\"log-levels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":157,"to":159}}}}],["2229",{"pageContent":"Log Levels\n\nTake note of the `level` configuration option present on the `syslog` and `slack` channel configurations in the example above. This option determines the minimum \"level\" a message must be in order to be logged by the channel. Monolog, which powers Laravel's logging services, offers all of the log levels defined in the [RFC 5424 specification](https://tools.ietf.org/html/rfc5424). In descending order of severity, these log levels are: **emergency**, **alert**, **critical**, **error**, **warning**, **notice**, **info**, and **debug**.\n\nSo, imagine we log a message using the `debug` method:\n\n    Log::debug('An informational message.');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":160,"to":166}}}}],["2230",{"pageContent":"So, imagine we log a message using the `debug` method:\n\n    Log::debug('An informational message.');\n\nGiven our configuration, the `syslog` channel will write the message to the system log; however, since the error message is not `critical` or above, it will not be sent to Slack. However, if we log an `emergency` message, it will be sent to both the system log and Slack since the `emergency` level is above our minimum level threshold for both channels:\n\n    Log::emergency('The system is down!');\n\n<a name=\"writing-log-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":166,"to":174}}}}],["2231",{"pageContent":"Writing Log Messages\n\nYou may write information to the logs using the `Log` [facade](/docs/{{version}}/facades). As previously mentioned, the logger provides the eight logging levels defined in the [RFC 5424 specification](https://tools.ietf.org/html/rfc5424): **emergency**, **alert**, **critical**, **error**, **warning**, **notice**, **info** and **debug**:\n\n    use Illuminate\\Support\\Facades\\Log;\n\n    Log::emergency($message);\n    Log::alert($message);\n    Log::critical($message);\n    Log::error($message);\n    Log::warning($message);\n    Log::notice($message);\n    Log::info($message);\n    Log::debug($message);\n\nYou may call any of these methods to log a message for the corresponding level. By default, the message will be written to the default log channel as configured by your `logging` configuration file:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Log;\n    use Illuminate\\View\\View;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":175,"to":199}}}}],["2232",{"pageContent":"<?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Log;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show the profile for the given user.\n         */\n        public function show(string $id): View\n        {\n            Log::info('Showing the user profile for user: {id}', ['id' => $id]);\n\n            return view('user.profile', [\n                'user' => User::findOrFail($id)\n            ]);\n        }\n    }\n\n<a name=\"contextual-information\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":199,"to":223}}}}],["2233",{"pageContent":"Contextual Information\n\nAn array of contextual data may be passed to the log methods. This contextual data will be formatted and displayed with the log message:\n\n    use Illuminate\\Support\\Facades\\Log;\n\n    Log::info('User {id} failed to login.', ['id' => $user->id]);\n\nOccasionally, you may wish to specify some contextual information that should be included with all subsequent log entries in a particular channel. For example, you may wish to log a request ID that is associated with each incoming request to your application. To accomplish this, you may call the `Log` facade's `withContext` method:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Log;\n    use Illuminate\\Support\\Str;\n    use Symfony\\Component\\HttpFoundation\\Response;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":224,"to":242}}}}],["2234",{"pageContent":"use Closure;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Log;\n    use Illuminate\\Support\\Str;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class AssignRequestId\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next): Response\n        {\n            $requestId = (string) Str::uuid();\n\n            Log::withContext([\n                'request-id' => $requestId\n            ]);\n\n            $response = $next($request);\n\n            $response->headers->set('Request-Id', $requestId);\n\n            return $response;\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":242,"to":269}}}}],["2235",{"pageContent":"$response = $next($request);\n\n            $response->headers->set('Request-Id', $requestId);\n\n            return $response;\n        }\n    }\n\nIf you would like to share contextual information across _all_ logging channels, you may call the `Log::shareContext()` method. This method will provide the contextual information to all created channels and any channels that are created subsequently. Typically, the `shareContext` method should be called from the `boot` method of an application service provider:\n\n    use Illuminate\\Support\\Facades\\Log;\n    use Illuminate\\Support\\Str;\n\n    class AppServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Log::shareContext([\n                'invocation-id' => (string) Str::uuid(),\n            ]);\n        }\n    }\n\n<a name=\"writing-to-specific-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":269,"to":295}}}}],["2236",{"pageContent":"Writing To Specific Channels\n\nSometimes you may wish to log a message to a channel other than your application's default channel. You may use the `channel` method on the `Log` facade to retrieve and log to any channel defined in your configuration file:\n\n    use Illuminate\\Support\\Facades\\Log;\n\n    Log::channel('slack')->info('Something happened!');\n\nIf you would like to create an on-demand logging stack consisting of multiple channels, you may use the `stack` method:\n\n    Log::stack(['single', 'slack'])->info('Something happened!');\n\n<a name=\"on-demand-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":296,"to":308}}}}],["2237",{"pageContent":"On-Demand Channels\n\nIt is also possible to create an on-demand channel by providing the configuration at runtime without that configuration being present in your application's `logging` configuration file. To accomplish this, you may pass a configuration array to the `Log` facade's `build` method:\n\n    use Illuminate\\Support\\Facades\\Log;\n\n    Log::build([\n      'driver' => 'single',\n      'path' => storage_path('logs/custom.log'),\n    ])->info('Something happened!');\n\nYou may also wish to include an on-demand channel in an on-demand logging stack. This can be achieved by including your on-demand channel instance in the array passed to the `stack` method:\n\n    use Illuminate\\Support\\Facades\\Log;\n\n    $channel = Log::build([\n      'driver' => 'single',\n      'path' => storage_path('logs/custom.log'),\n    ]);\n\n    Log::stack(['slack', $channel])->info('Something happened!');\n\n<a name=\"monolog-channel-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":309,"to":331}}}}],["2238",{"pageContent":"Monolog Channel Customization\n\n<a name=\"customizing-monolog-for-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":332,"to":334}}}}],["2239",{"pageContent":"Customizing Monolog For Channels\n\nSometimes you may need complete control over how Monolog is configured for an existing channel. For example, you may want to configure a custom Monolog `FormatterInterface` implementation for Laravel's built-in `single` channel.\n\nTo get started, define a `tap` array on the channel's configuration. The `tap` array should contain a list of classes that should have an opportunity to customize (or \"tap\" into) the Monolog instance after it is created. There is no conventional location where these classes should be placed, so you are free to create a directory within your application to contain these classes:\n\n    'single' => [\n        'driver' => 'single',\n        'tap' => [App\\Logging\\CustomizeFormatter::class],\n        'path' => storage_path('logs/laravel.log'),\n        'level' => 'debug',\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":335,"to":346}}}}],["2240",{"pageContent":"'single' => [\n        'driver' => 'single',\n        'tap' => [App\\Logging\\CustomizeFormatter::class],\n        'path' => storage_path('logs/laravel.log'),\n        'level' => 'debug',\n    ],\n\nOnce you have configured the `tap` option on your channel, you're ready to define the class that will customize your Monolog instance. This class only needs a single method: `__invoke`, which receives an `Illuminate\\Log\\Logger` instance. The `Illuminate\\Log\\Logger` instance proxies all method calls to the underlying Monolog instance:\n\n    <?php\n\n    namespace App\\Logging;\n\n    use Illuminate\\Log\\Logger;\n    use Monolog\\Formatter\\LineFormatter;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":346,"to":360}}}}],["2241",{"pageContent":"<?php\n\n    namespace App\\Logging;\n\n    use Illuminate\\Log\\Logger;\n    use Monolog\\Formatter\\LineFormatter;\n\n    class CustomizeFormatter\n    {\n        /**\n         * Customize the given logger instance.\n         */\n        public function __invoke(Logger $logger): void\n        {\n            foreach ($logger->getHandlers() as $handler) {\n                $handler->setFormatter(new LineFormatter(\n                    '[%datetime%] %channel%.%level_name%: %message% %context% %extra%'\n                ));\n            }\n        }\n    }\n\n> **Note**  \n> All of your \"tap\" classes are resolved by the [service container](/docs/{{version}}/container), so any constructor dependencies they require will automatically be injected.\n\n<a name=\"creating-monolog-handler-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":360,"to":385}}}}],["2242",{"pageContent":"Creating Monolog Handler Channels\n\nMonolog has a variety of [available handlers](https://github.com/Seldaek/monolog/tree/main/src/Monolog/Handler) and Laravel does not include a built-in channel for each one. In some cases, you may wish to create a custom channel that is merely an instance of a specific Monolog handler that does not have a corresponding Laravel log driver.  These channels can be easily created using the `monolog` driver.\n\nWhen using the `monolog` driver, the `handler` configuration option is used to specify which handler will be instantiated. Optionally, any constructor parameters the handler needs may be specified using the `with` configuration option:\n\n    'logentries' => [\n        'driver'  => 'monolog',\n        'handler' => Monolog\\Handler\\SyslogUdpHandler::class,\n        'with' => [\n            'host' => 'my.logentries.internal.datahubhost.company.com',\n            'port' => '10000',\n        ],\n    ],\n\n<a name=\"monolog-formatters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":386,"to":401}}}}],["2243",{"pageContent":"Monolog Formatters\n\nWhen using the `monolog` driver, the Monolog `LineFormatter` will be used as the default formatter. However, you may customize the type of formatter passed to the handler using the `formatter` and `formatter_with` configuration options:\n\n    'browser' => [\n        'driver' => 'monolog',\n        'handler' => Monolog\\Handler\\BrowserConsoleHandler::class,\n        'formatter' => Monolog\\Formatter\\HtmlFormatter::class,\n        'formatter_with' => [\n            'dateFormat' => 'Y-m-d',\n        ],\n    ],\n\nIf you are using a Monolog handler that is capable of providing its own formatter, you may set the value of the `formatter` configuration option to `default`:\n\n    'newrelic' => [\n        'driver' => 'monolog',\n        'handler' => Monolog\\Handler\\NewRelicHandler::class,\n        'formatter' => 'default',\n    ],\n\n\n <a name=\"monolog-processors\"></a>\n #### Monolog Processors","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":402,"to":425}}}}],["2244",{"pageContent":"<a name=\"monolog-processors\"></a>\n #### Monolog Processors\n\n Monolog can also process messages before logging them. You can create your own processors or use the [existing processors offered by Monolog](https://github.com/Seldaek/monolog/tree/main/src/Monolog/Processor).\n\n If you would like to customize the processors for a `monolog` driver, add a `processors` configuration value to your channel's configuration:\n\n     'memory' => [\n         'driver' => 'monolog',\n         'handler' => Monolog\\Handler\\StreamHandler::class,\n         'with' => [\n             'stream' => 'php://stderr',\n         ],\n         'processors' => [\n             // Simple syntax...\n             Monolog\\Processor\\MemoryUsageProcessor::class,\n\n             // With options...\n             [\n                'processor' => Monolog\\Processor\\PsrLogMessageProcessor::class,\n                'with' => ['removeUsedContextFields' => true],\n            ],\n         ],\n     ],\n\n\n<a name=\"creating-custom-channels-via-factories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":425,"to":451}}}}],["2245",{"pageContent":"Creating Custom Channels Via Factories\n\nIf you would like to define an entirely custom channel in which you have full control over Monolog's instantiation and configuration, you may specify a `custom` driver type in your `config/logging.php` configuration file. Your configuration should include a `via` option that contains the name of the factory class which will be invoked to create the Monolog instance:\n\n    'channels' => [\n        'example-custom-channel' => [\n            'driver' => 'custom',\n            'via' => App\\Logging\\CreateCustomLogger::class,\n        ],\n    ],\n\nOnce you have configured the `custom` driver channel, you're ready to define the class that will create your Monolog instance. This class only needs a single `__invoke` method which should return the Monolog logger instance. The method will receive the channels configuration array as its only argument:\n\n    <?php\n\n    namespace App\\Logging;\n\n    use Monolog\\Logger;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":452,"to":469}}}}],["2246",{"pageContent":"<?php\n\n    namespace App\\Logging;\n\n    use Monolog\\Logger;\n\n    class CreateCustomLogger\n    {\n        /**\n         * Create a custom Monolog instance.\n         */\n        public function __invoke(array $config): Logger\n        {\n            return new Logger(/* ... */);\n        }\n    }\n\n<a name=\"tailing-log-messages-using-pail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":469,"to":486}}}}],["2247",{"pageContent":"Tailing Log Messages Using Pail\n\nOften you may need to tail your application's logs in real time. For example, when debugging an issue or when monitoring your application's logs for specific types of errors.\n\nLaravel Pail is a package that allows you to easily dive into your Laravel application's log files directly from the command line. Unlike the standard `tail` command, Pail is designed to work with any log driver, including Sentry or Flare. In addition, Pail provides a set of useful filters to help you quickly find what you're looking for.\n\n<img src=\"https://laravel.com/img/docs/pail-example.png\">\n\n<a name=\"pail-installation\"></a>\n### Installation\n\n> **Warning**\n> Laravel Pail requires [PHP 8.2+](https://php.net/releases/) and the [PCNTL](https://www.php.net/manual/en/book.pcntl.php) extension.\n\nTo get started, install Pail into your project using the Composer package manager:\n\n```bash\ncomposer require laravel/pail\n```\n\n<a name=\"pail-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":487,"to":507}}}}],["2248",{"pageContent":"Usage\n\nTo start tailing logs, run the `pail` command:\n\n```bash\nphp artisan pail\n```\n\nTo increase the verbosity of the output and avoid truncation (…), use the `-v` option:\n\n```bash\nphp artisan pail -v\n```\n\nFor maximum verbosity and to display exception stack traces, use the `-vv` option:\n\n```bash\nphp artisan pail -vv\n```\n\nTo stop tailing logs, press `Ctrl+C` at any time.\n\n<a name=\"pail-filtering-logs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":508,"to":530}}}}],["2249",{"pageContent":"Filtering Logs\n\n<a name=\"pail-filtering-logs-filter-option\"></a>\n#### `--filter`\n\nYou may use the `--filter` option to filter logs by their type, file, message, and stack trace content:\n\n```bash\nphp artisan pail --filter=\"QueryException\"\n```\n\n<a name=\"pail-filtering-logs-message-option\"></a>\n#### `--message`\n\nTo filter logs by only their message, you may use the `--message` option:\n\n```bash\nphp artisan pail --message=\"User created\"\n```\n\n<a name=\"pail-filtering-logs-level-option\"></a>\n#### `--level`\n\nThe `--level` option may be used to filter logs by their [log level](#log-levels):\n\n```bash\nphp artisan pail --level=error\n```\n\n<a name=\"pail-filtering-logs-user-option\"></a>\n#### `--user`\n\nTo only display logs that were written while a given user was authenticated, you may provide the user's ID to the `--user` option:\n\n```bash\nphp artisan pail --user=1\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/logging.md","loc":{"lines":{"from":531,"to":567}}}}],["2250",{"pageContent":"# Mail","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1,"to":1}}}}],["2251",{"pageContent":"- [Introduction](#introduction)\n    - [Configuration](#configuration)\n    - [Driver Prerequisites](#driver-prerequisites)\n    - [Failover Configuration](#failover-configuration)\n- [Generating Mailables](#generating-mailables)\n- [Writing Mailables](#writing-mailables)\n    - [Configuring The Sender](#configuring-the-sender)\n    - [Configuring The View](#configuring-the-view)\n    - [View Data](#view-data)\n    - [Attachments](#attachments)\n    - [Inline Attachments](#inline-attachments)\n    - [Attachable Objects](#attachable-objects)\n    - [Headers](#headers)\n    - [Tags & Metadata](#tags-and-metadata)\n    - [Customizing The Symfony Message](#customizing-the-symfony-message)\n- [Markdown Mailables](#markdown-mailables)\n    - [Generating Markdown Mailables](#generating-markdown-mailables)\n    - [Writing Markdown Messages](#writing-markdown-messages)\n    - [Customizing The Components](#customizing-the-components)\n- [Sending Mail](#sending-mail)\n    - [Queueing Mail](#queueing-mail)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":3,"to":23}}}}],["2252",{"pageContent":"- [Writing Markdown Messages](#writing-markdown-messages)\n    - [Customizing The Components](#customizing-the-components)\n- [Sending Mail](#sending-mail)\n    - [Queueing Mail](#queueing-mail)\n- [Rendering Mailables](#rendering-mailables)\n    - [Previewing Mailables In The Browser](#previewing-mailables-in-the-browser)\n- [Localizing Mailables](#localizing-mailables)\n- [Testing](#testing-mailables)\n    - [Testing Mailable Content](#testing-mailable-content)\n    - [Testing Mailable Sending](#testing-mailable-sending)\n- [Mail & Local Development](#mail-and-local-development)\n- [Events](#events)\n- [Custom Transports](#custom-transports)\n    - [Additional Symfony Transports](#additional-symfony-transports)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":23,"to":36}}}}],["2253",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":38,"to":38}}}}],["2254",{"pageContent":"Introduction\n\nSending email doesn't have to be complicated. Laravel provides a clean, simple email API powered by the popular [Symfony Mailer](https://symfony.com/doc/6.2/mailer.html) component. Laravel and Symfony Mailer provide drivers for sending email via SMTP, Mailgun, Postmark, Amazon SES, and `sendmail`, allowing you to quickly get started sending mail through a local or cloud based service of your choice.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":39,"to":43}}}}],["2255",{"pageContent":"Configuration\n\nLaravel's email services may be configured via your application's `config/mail.php` configuration file. Each mailer configured within this file may have its own unique configuration and even its own unique \"transport\", allowing your application to use different email services to send certain email messages. For example, your application might use Postmark to send transactional emails while using Amazon SES to send bulk emails.\n\nWithin your `mail` configuration file, you will find a `mailers` configuration array. This array contains a sample configuration entry for each of the major mail drivers / transports supported by Laravel, while the `default` configuration value determines which mailer will be used by default when your application needs to send an email message.\n\n<a name=\"driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":44,"to":50}}}}],["2256",{"pageContent":"Driver / Transport Prerequisites\n\nThe API based drivers such as Mailgun, Postmark, and MailerSend are often simpler and faster than sending mail via SMTP servers. Whenever possible, we recommend that you use one of these drivers.\n\n<a name=\"mailgun-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":51,"to":55}}}}],["2257",{"pageContent":"Mailgun Driver\n\nTo use the Mailgun driver, install Symfony's Mailgun Mailer transport via Composer:\n\n```shell\ncomposer require symfony/mailgun-mailer symfony/http-client\n```\n\nNext, set the `default` option in your application's `config/mail.php` configuration file to `mailgun`. After configuring your application's default mailer, verify that your `config/services.php` configuration file contains the following options:\n\n    'mailgun' => [\n        'transport' => 'mailgun',\n        'domain' => env('MAILGUN_DOMAIN'),\n        'secret' => env('MAILGUN_SECRET'),\n    ],\n\nIf you are not using the United States [Mailgun region](https://documentation.mailgun.com/en/latest/api-intro.html#mailgun-regions), you may define your region's endpoint in the `services` configuration file:\n\n    'mailgun' => [\n        'domain' => env('MAILGUN_DOMAIN'),\n        'secret' => env('MAILGUN_SECRET'),\n        'endpoint' => env('MAILGUN_ENDPOINT', 'api.eu.mailgun.net'),\n    ],\n\n<a name=\"postmark-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":56,"to":80}}}}],["2258",{"pageContent":"Postmark Driver\n\nTo use the Postmark driver, install Symfony's Postmark Mailer transport via Composer:\n\n```shell\ncomposer require symfony/postmark-mailer symfony/http-client","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":81,"to":86}}}}],["2259",{"pageContent":"Next, set the `default` option in your application's `config/mail.php` configuration file to `postmark`. After configuring your application's default mailer, verify that your `config/services.php` configuration file contains the following options:\n\n    'postmark' => [\n        'token' => env('POSTMARK_TOKEN'),\n    ],\n\nIf you would like to specify the Postmark message stream that should be used by a given mailer, you may add the `message_stream_id` configuration option to the mailer's configuration array. This configuration array can be found in your application's `config/mail.php` configuration file:\n\n    'postmark' => [\n        'transport' => 'postmark',\n        'message_stream_id' => env('POSTMARK_MESSAGE_STREAM_ID'),\n    ],\n\nThis way you are also able to set up multiple Postmark mailers with different message streams.\n\n<a name=\"ses-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":89,"to":104}}}}],["2260",{"pageContent":"SES Driver\n\nTo use the Amazon SES driver you must first install the Amazon AWS SDK for PHP. You may install this library via the Composer package manager:\n\n```shell\ncomposer require aws/aws-sdk-php","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":105,"to":110}}}}],["2261",{"pageContent":"Next, set the `default` option in your `config/mail.php` configuration file to `ses` and verify that your `config/services.php` configuration file contains the following options:\n\n    'ses' => [\n        'key' => env('AWS_ACCESS_KEY_ID'),\n        'secret' => env('AWS_SECRET_ACCESS_KEY'),\n        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),\n    ],\n\nTo utilize AWS [temporary credentials](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_use-resources.html) via a session token, you may add a `token` key to your application's SES configuration:\n\n    'ses' => [\n        'key' => env('AWS_ACCESS_KEY_ID'),\n        'secret' => env('AWS_SECRET_ACCESS_KEY'),\n        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),\n        'token' => env('AWS_SESSION_TOKEN'),\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":113,"to":128}}}}],["2262",{"pageContent":"If you would like to define [additional options](https://docs.aws.amazon.com/aws-sdk-php/v3/api/api-sesv2-2019-09-27.html#sendemail) that Laravel should pass to the AWS SDK's `SendEmail` method when sending an email, you may define an `options` array within your `ses` configuration:\n\n    'ses' => [\n        'key' => env('AWS_ACCESS_KEY_ID'),\n        'secret' => env('AWS_SECRET_ACCESS_KEY'),\n        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),\n        'options' => [\n            'ConfigurationSetName' => 'MyConfigurationSet',\n            'EmailTags' => [\n                ['Name' => 'foo', 'Value' => 'bar'],\n            ],\n        ],\n    ],\n\n<a name=\"mailersend-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":130,"to":144}}}}],["2263",{"pageContent":"MailerSend Driver\n\n[MailerSend](https://www.mailersend.com/), a transactional email and SMS service, maintains their own API based mail driver for Laravel. The package containing the driver may be installed via the Composer package manager:\n\n```shell\ncomposer require mailersend/laravel-driver\n```\n\nOnce the package is installed, add the `MAILERSEND_API_KEY` environment variable to your application's `.env` file. In addition, the `MAIL_MAILER` environment variable should be defined as `mailersend`:\n\n```shell\nMAIL_MAILER=mailersend\nMAIL_FROM_ADDRESS=app@yourdomain.com\nMAIL_FROM_NAME=\"App Name\"\n\nMAILERSEND_API_KEY=your-api-key\n```\n\nTo learn more about MailerSend, including how to use hosted templates, consult the [MailerSend driver documentation](https://github.com/mailersend/mailersend-laravel-driver#usage).\n\n<a name=\"failover-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":145,"to":165}}}}],["2264",{"pageContent":"Failover Configuration\n\nSometimes, an external service you have configured to send your application's mail may be down. In these cases, it can be useful to define one or more backup mail delivery configurations that will be used in case your primary delivery driver is down.\n\nTo accomplish this, you should define a mailer within your application's `mail` configuration file that uses the `failover` transport. The configuration array for your application's `failover` mailer should contain an array of `mailers` that reference the order in which mail drivers should be chosen for delivery:\n\n    'mailers' => [\n        'failover' => [\n            'transport' => 'failover',\n            'mailers' => [\n                'postmark',\n                'mailgun',\n                'sendmail',\n            ],\n        ],\n\n        // ...\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":166,"to":183}}}}],["2265",{"pageContent":"// ...\n    ],\n\nOnce your failover mailer has been defined, you should set this mailer as the default mailer used by your application by specifying its name as the value of the `default` configuration key within your application's `mail` configuration file:\n\n    'default' => env('MAIL_MAILER', 'failover'),\n\n<a name=\"generating-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":183,"to":190}}}}],["2266",{"pageContent":"Generating Mailables\n\nWhen building Laravel applications, each type of email sent by your application is represented as a \"mailable\" class. These classes are stored in the `app/Mail` directory. Don't worry if you don't see this directory in your application, since it will be generated for you when you create your first mailable class using the `make:mail` Artisan command:\n\n```shell\nphp artisan make:mail OrderShipped\n```\n\n<a name=\"writing-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":191,"to":199}}}}],["2267",{"pageContent":"Writing Mailables\n\nOnce you have generated a mailable class, open it up so we can explore its contents. Mailable class configuration is done in several methods, including the `envelope`, `content`, and `attachments` methods.\n\nThe `envelope` method returns an `Illuminate\\Mail\\Mailables\\Envelope` object that defines the subject and, sometimes, the recipients of the message. The `content` method returns an `Illuminate\\Mail\\Mailables\\Content` object that defines the [Blade template](/docs/{{version}}/blade) that will be used to generate the message content.\n\n<a name=\"configuring-the-sender\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":200,"to":206}}}}],["2268",{"pageContent":"Configuring The Sender\n\n<a name=\"using-the-envelope\"></a>\n#### Using The Envelope\n\nFirst, let's explore configuring the sender of the email. Or, in other words, who the email is going to be \"from\". There are two ways to configure the sender. First, you may specify the \"from\" address on your message's envelope:\n\n    use Illuminate\\Mail\\Mailables\\Address;\n    use Illuminate\\Mail\\Mailables\\Envelope;\n\n    /**\n     * Get the message envelope.\n     */\n    public function envelope(): Envelope\n    {\n        return new Envelope(\n            from: new Address('jeffrey@example.com', 'Jeffrey Way'),\n            subject: 'Order Shipped',\n        );\n    }\n\nIf you would like, you may also specify a `replyTo` address:\n\n    return new Envelope(\n        from: new Address('jeffrey@example.com', 'Jeffrey Way'),\n        replyTo: [\n            new Address('taylor@example.com', 'Taylor Otwell'),\n        ],\n        subject: 'Order Shipped',\n    );\n\n<a name=\"using-a-global-from-address\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":207,"to":238}}}}],["2269",{"pageContent":"Using A Global `from` Address\n\nHowever, if your application uses the same \"from\" address for all of its emails, it can become cumbersome to add it to each mailable class you generate. Instead, you may specify a global \"from\" address in your `config/mail.php` configuration file. This address will be used if no other \"from\" address is specified within the mailable class:\n\n    'from' => [\n        'address' => env('MAIL_FROM_ADDRESS', 'hello@example.com'),\n        'name' => env('MAIL_FROM_NAME', 'Example'),\n    ],\n\nIn addition, you may define a global \"reply_to\" address within your `config/mail.php` configuration file:\n\n    'reply_to' => ['address' => 'example@example.com', 'name' => 'App Name'],\n\n<a name=\"configuring-the-view\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":239,"to":252}}}}],["2270",{"pageContent":"Configuring The View\n\nWithin a mailable class's `content` method, you may define the `view`, or which template should be used when rendering the email's contents. Since each email typically uses a [Blade template](/docs/{{version}}/blade) to render its contents, you have the full power and convenience of the Blade templating engine when building your email's HTML:\n\n    /**\n     * Get the message content definition.\n     */\n    public function content(): Content\n    {\n        return new Content(\n            view: 'emails.orders.shipped',\n        );\n    }\n\n> **Note**  \n> You may wish to create a `resources/views/emails` directory to house all of your email templates; however, you are free to place them wherever you wish within your `resources/views` directory.\n\n<a name=\"plain-text-emails\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":253,"to":270}}}}],["2271",{"pageContent":"Plain Text Emails\n\nIf you would like to define a plain-text version of your email, you may specify the plain-text template when creating the message's `Content` definition. Like the `view` parameter, the `text` parameter should be a template name which will be used to render the contents of the email. You are free to define both an HTML and plain-text version of your message:\n\n    /**\n     * Get the message content definition.\n     */\n    public function content(): Content\n    {\n        return new Content(\n            view: 'emails.orders.shipped',\n            text: 'emails.orders.shipped-text'\n        );\n    }\n\nFor clarity, the `html` parameter may be used as an alias of the `view` parameter:\n\n    return new Content(\n        html: 'emails.orders.shipped',\n        text: 'emails.orders.shipped-text'\n    );\n\n<a name=\"view-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":271,"to":293}}}}],["2272",{"pageContent":"View Data\n\n<a name=\"via-public-properties\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":294,"to":296}}}}],["2273",{"pageContent":"Via Public Properties\n\nTypically, you will want to pass some data to your view that you can utilize when rendering the email's HTML. There are two ways you may make data available to your view. First, any public property defined on your mailable class will automatically be made available to the view. So, for example, you may pass data into your mailable class's constructor and set that data to public properties defined on the class:\n\n    <?php\n\n    namespace App\\Mail;\n\n    use App\\Models\\Order;\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Mail\\Mailable;\n    use Illuminate\\Mail\\Mailables\\Content;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class OrderShipped extends Mailable\n    {\n        use Queueable, SerializesModels;\n\n        /**\n         * Create a new message instance.\n         */\n        public function __construct(\n            public Order $order,\n        ) {}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":297,"to":320}}}}],["2274",{"pageContent":"/**\n         * Create a new message instance.\n         */\n        public function __construct(\n            public Order $order,\n        ) {}\n\n        /**\n         * Get the message content definition.\n         */\n        public function content(): Content\n        {\n            return new Content(\n                view: 'emails.orders.shipped',\n            );\n        }\n    }\n\nOnce the data has been set to a public property, it will automatically be available in your view, so you may access it like you would access any other data in your Blade templates:\n\n    <div>\n        Price: {{ $order->price }}\n    </div>\n\n<a name=\"via-the-with-parameter\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":320,"to":344}}}}],["2275",{"pageContent":"Via The `with` Parameter:\n\nIf you would like to customize the format of your email's data before it is sent to the template, you may manually pass your data to the view via the `Content` definition's `with` parameter. Typically, you will still pass data via the mailable class's constructor; however, you should set this data to `protected` or `private` properties so the data is not automatically made available to the template:\n\n    <?php\n\n    namespace App\\Mail;\n\n    use App\\Models\\Order;\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Mail\\Mailable;\n    use Illuminate\\Mail\\Mailables\\Content;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class OrderShipped extends Mailable\n    {\n        use Queueable, SerializesModels;\n\n        /**\n         * Create a new message instance.\n         */\n        public function __construct(\n            protected Order $order,\n        ) {}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":345,"to":368}}}}],["2276",{"pageContent":"/**\n         * Create a new message instance.\n         */\n        public function __construct(\n            protected Order $order,\n        ) {}\n\n        /**\n         * Get the message content definition.\n         */\n        public function content(): Content\n        {\n            return new Content(\n                view: 'emails.orders.shipped',\n                with: [\n                    'orderName' => $this->order->name,\n                    'orderPrice' => $this->order->price,\n                ],\n            );\n        }\n    }\n\nOnce the data has been passed to the `with` method, it will automatically be available in your view, so you may access it like you would access any other data in your Blade templates:\n\n    <div>\n        Price: {{ $orderPrice }}\n    </div>\n\n<a name=\"attachments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":368,"to":396}}}}],["2277",{"pageContent":"Attachments\n\nTo add attachments to an email, you will add attachments to the array returned by the message's `attachments` method. First, you may add an attachment by providing a file path to the `fromPath` method provided by the `Attachment` class:\n\n    use Illuminate\\Mail\\Mailables\\Attachment;\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [\n            Attachment::fromPath('/path/to/file'),\n        ];\n    }\n\nWhen attaching files to a message, you may also specify the display name and / or MIME type for the attachment using the `as` and `withMime` methods:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":397,"to":415}}}}],["2278",{"pageContent":"When attaching files to a message, you may also specify the display name and / or MIME type for the attachment using the `as` and `withMime` methods:\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [\n            Attachment::fromPath('/path/to/file')\n                    ->as('name.pdf')\n                    ->withMime('application/pdf'),\n        ];\n    }\n\n<a name=\"attaching-files-from-disk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":415,"to":431}}}}],["2279",{"pageContent":"Attaching Files From Disk\n\nIf you have stored a file on one of your [filesystem disks](/docs/{{version}}/filesystem), you may attach it to the email using the `fromStorage` attachment method:\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [\n            Attachment::fromStorage('/path/to/file'),\n        ];\n    }\n\nOf course, you may also specify the attachment's name and MIME type:\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [\n            Attachment::fromStorage('/path/to/file')\n                    ->as('name.pdf')\n                    ->withMime('application/pdf'),\n        ];\n    }\n\nThe `fromStorageDisk` method may be used if you need to specify a storage disk other than your default disk:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":432,"to":464}}}}],["2280",{"pageContent":"The `fromStorageDisk` method may be used if you need to specify a storage disk other than your default disk:\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [\n            Attachment::fromStorageDisk('s3', '/path/to/file')\n                    ->as('name.pdf')\n                    ->withMime('application/pdf'),\n        ];\n    }\n\n<a name=\"raw-data-attachments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":464,"to":480}}}}],["2281",{"pageContent":"Raw Data Attachments\n\nThe `fromData` attachment method may be used to attach a raw string of bytes as an attachment. For example, you might use this method if you have generated a PDF in memory and want to attach it to the email without writing it to disk. The `fromData` method accepts a closure which resolves the raw data bytes as well as the name that the attachment should be assigned:\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [\n            Attachment::fromData(fn () => $this->pdf, 'Report.pdf')\n                    ->withMime('application/pdf'),\n        ];\n    }\n\n<a name=\"inline-attachments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":481,"to":498}}}}],["2282",{"pageContent":"Inline Attachments\n\nEmbedding inline images into your emails is typically cumbersome; however, Laravel provides a convenient way to attach images to your emails. To embed an inline image, use the `embed` method on the `$message` variable within your email template. Laravel automatically makes the `$message` variable available to all of your email templates, so you don't need to worry about passing it in manually:\n\n```blade\n<body>\n    Here is an image:\n\n    <img src=\"{{ $message->embed($pathToImage) }}\">\n</body>\n```\n\n> **Warning**  \n> The `$message` variable is not available in plain-text message templates since plain-text messages do not utilize inline attachments.\n\n<a name=\"embedding-raw-data-attachments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":499,"to":514}}}}],["2283",{"pageContent":"Embedding Raw Data Attachments\n\nIf you already have a raw image data string you wish to embed into an email template, you may call the `embedData` method on the `$message` variable. When calling the `embedData` method, you will need to provide a filename that should be assigned to the embedded image:\n\n```blade\n<body>\n    Here is an image from raw data:\n\n    <img src=\"{{ $message->embedData($data, 'example-image.jpg') }}\">\n</body>\n```\n\n<a name=\"attachable-objects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":515,"to":527}}}}],["2284",{"pageContent":"Attachable Objects\n\nWhile attaching files to messages via simple string paths is often sufficient, in many cases the attachable entities within your application are represented by classes. For example, if your application is attaching a photo to a message, your application may also have a `Photo` model that represents that photo. When that is the case, wouldn't it be convenient to simply pass the `Photo` model to the `attach` method? Attachable objects allow you to do just that.\n\nTo get started, implement the `Illuminate\\Contracts\\Mail\\Attachable` interface on the object that will be attachable to messages. This interface dictates that your class defines a `toMailAttachment` method that returns an `Illuminate\\Mail\\Attachment` instance:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Contracts\\Mail\\Attachable;\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Mail\\Attachment;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":528,"to":540}}}}],["2285",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Contracts\\Mail\\Attachable;\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Illuminate\\Mail\\Attachment;\n\n    class Photo extends Model implements Attachable\n    {\n        /**\n         * Get the attachable representation of the model.\n         */\n        public function toMailAttachment(): Attachment\n        {\n            return Attachment::fromPath('/path/to/file');\n        }\n    }\n\nOnce you have defined your attachable object, you may return an instance of that object from the `attachments` method when building an email message:\n\n    /**\n     * Get the attachments for the message.\n     *\n     * @return array<int, \\Illuminate\\Mail\\Mailables\\Attachment>\n     */\n    public function attachments(): array\n    {\n        return [$this->photo];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":540,"to":569}}}}],["2286",{"pageContent":"Of course, attachment data may be stored on a remote file storage service such as Amazon S3. So, Laravel also allows you to generate attachment instances from data that is stored on one of your application's [filesystem disks](/docs/{{version}}/filesystem):\n\n    // Create an attachment from a file on your default disk...\n    return Attachment::fromStorage($this->path);\n\n    // Create an attachment from a file on a specific disk...\n    return Attachment::fromStorageDisk('backblaze', $this->path);\n\nIn addition, you may create attachment instances via data that you have in memory. To accomplish this, provide a closure to the `fromData` method. The closure should return the raw data that represents the attachment:\n\n    return Attachment::fromData(fn () => $this->content, 'Photo Name');\n\nLaravel also provides additional methods that you may use to customize your attachments. For example, you may use the `as` and `withMime` methods to customize the file's name and MIME type:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":571,"to":583}}}}],["2287",{"pageContent":"Laravel also provides additional methods that you may use to customize your attachments. For example, you may use the `as` and `withMime` methods to customize the file's name and MIME type:\n\n    return Attachment::fromPath('/path/to/file')\n            ->as('Photo Name')\n            ->withMime('image/jpeg');\n\n<a name=\"headers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":583,"to":589}}}}],["2288",{"pageContent":"Headers\n\nSometimes you may need to attach additional headers to the outgoing message. For instance, you may need to set a custom `Message-Id` or other arbitrary text headers.\n\nTo accomplish this, define a `headers` method on your mailable. The `headers` method should return an `Illuminate\\Mail\\Mailables\\Headers` instance. This class accepts `messageId`, `references`, and `text` parameters. Of course, you may provide only the parameters you need for your particular message:\n\n    use Illuminate\\Mail\\Mailables\\Headers;\n\n    /**\n     * Get the message headers.\n     */\n    public function headers(): Headers\n    {\n        return new Headers(\n            messageId: 'custom-message-id@example.com',\n            references: ['previous-message@example.com'],\n            text: [\n                'X-Custom-Header' => 'Custom Value',\n            ],\n        );\n    }\n\n<a name=\"tags-and-metadata\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":590,"to":612}}}}],["2289",{"pageContent":"Tags & Metadata\n\nSome third-party email providers such as Mailgun and Postmark support message \"tags\" and \"metadata\", which may be used to group and track emails sent by your application. You may add tags and metadata to an email message via your `Envelope` definition:\n\n    use Illuminate\\Mail\\Mailables\\Envelope;\n\n    /**\n     * Get the message envelope.\n     *\n     * @return \\Illuminate\\Mail\\Mailables\\Envelope\n     */\n    public function envelope(): Envelope\n    {\n        return new Envelope(\n            subject: 'Order Shipped',\n            tags: ['shipment'],\n            metadata: [\n                'order_id' => $this->order->id,\n            ],\n        );\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":613,"to":633}}}}],["2290",{"pageContent":"If your application is using the Mailgun driver, you may consult Mailgun's documentation for more information on [tags](https://documentation.mailgun.com/en/latest/user_manual.html#tagging-1) and [metadata](https://documentation.mailgun.com/en/latest/user_manual.html#attaching-data-to-messages). Likewise, the Postmark documentation may also be consulted for more information on their support for [tags](https://postmarkapp.com/blog/tags-support-for-smtp) and [metadata](https://postmarkapp.com/support/article/1125-custom-metadata-faq).\n\nIf your application is using Amazon SES to send emails, you should use the `metadata` method to attach [SES \"tags\"](https://docs.aws.amazon.com/ses/latest/APIReference/API_MessageTag.html) to the message.\n\n<a name=\"customizing-the-symfony-message\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":635,"to":639}}}}],["2291",{"pageContent":"Customizing The Symfony Message\n\nLaravel's mail capabilities are powered by Symfony Mailer. Laravel allows you to register custom callbacks that will be invoked with the Symfony Message instance before sending the message. This gives you an opportunity to deeply customize the message before it is sent. To accomplish this, define a `using` parameter on your `Envelope` definition:\n\n    use Illuminate\\Mail\\Mailables\\Envelope;\n    use Symfony\\Component\\Mime\\Email;\n    \n    /**\n     * Get the message envelope.\n     */\n    public function envelope(): Envelope\n    {\n        return new Envelope(\n            subject: 'Order Shipped',\n            using: [\n                function (Email $message) {\n                    // ...\n                },\n            ]\n        );\n    }\n\n<a name=\"markdown-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":640,"to":662}}}}],["2292",{"pageContent":"Markdown Mailables\n\nMarkdown mailable messages allow you to take advantage of the pre-built templates and components of [mail notifications](/docs/{{version}}/notifications#mail-notifications) in your mailables. Since the messages are written in Markdown, Laravel is able to render beautiful, responsive HTML templates for the messages while also automatically generating a plain-text counterpart.\n\n<a name=\"generating-markdown-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":663,"to":667}}}}],["2293",{"pageContent":"Generating Markdown Mailables\n\nTo generate a mailable with a corresponding Markdown template, you may use the `--markdown` option of the `make:mail` Artisan command:\n\n```shell\nphp artisan make:mail OrderShipped --markdown=emails.orders.shipped\n```\n\nThen, when configuring the mailable `Content` definition within its `content` method, use the `markdown` parameter instead of the `view` parameter:\n\n    use Illuminate\\Mail\\Mailables\\Content;\n\n    /**\n     * Get the message content definition.\n     */\n    public function content(): Content\n    {\n        return new Content(\n            markdown: 'emails.orders.shipped',\n            with: [\n                'url' => $this->orderUrl,\n            ],\n        );\n    }\n\n<a name=\"writing-markdown-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":668,"to":693}}}}],["2294",{"pageContent":"Writing Markdown Messages\n\nMarkdown mailables use a combination of Blade components and Markdown syntax which allow you to easily construct mail messages while leveraging Laravel's pre-built email UI components:\n\n```blade\n<x-mail::message>\n# Order Shipped\n\nYour order has been shipped!\n\n<x-mail::button :url=\"$url\">\nView Order\n</x-mail::button>\n\nThanks,<br>\n{{ config('app.name') }}\n</x-mail::message>\n```\n\n> **Note**  \n> Do not use excess indentation when writing Markdown emails. Per Markdown standards, Markdown parsers will render indented content as code blocks.\n\n<a name=\"button-component\"></a>\n#### Button Component\n\nThe button component renders a centered button link. The component accepts two arguments, a `url` and an optional `color`. Supported colors are `primary`, `success`, and `error`. You may add as many button components to a message as you wish:\n\n```blade\n<x-mail::button :url=\"$url\" color=\"success\">\nView Order\n</x-mail::button>\n```\n\n<a name=\"panel-component\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":694,"to":727}}}}],["2295",{"pageContent":"Panel Component\n\nThe panel component renders the given block of text in a panel that has a slightly different background color than the rest of the message. This allows you to draw attention to a given block of text:\n\n```blade\n<x-mail::panel>\nThis is the panel content.\n</x-mail::panel>\n```\n\n<a name=\"table-component\"></a>\n#### Table Component\n\nThe table component allows you to transform a Markdown table into an HTML table. The component accepts the Markdown table as its content. Table column alignment is supported using the default Markdown table alignment syntax:\n\n```blade\n<x-mail::table>\n| Laravel       | Table         | Example  |\n| ------------- |:-------------:| --------:|\n| Col 2 is      | Centered      | $10      |\n| Col 3 is      | Right-Aligned | $20      |\n</x-mail::table>\n```\n\n<a name=\"customizing-the-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":728,"to":752}}}}],["2296",{"pageContent":"Customizing The Components\n\nYou may export all of the Markdown mail components to your own application for customization. To export the components, use the `vendor:publish` Artisan command to publish the `laravel-mail` asset tag:\n\n```shell\nphp artisan vendor:publish --tag=laravel-mail\n```\n\nThis command will publish the Markdown mail components to the `resources/views/vendor/mail` directory. The `mail` directory will contain an `html` and a `text` directory, each containing their respective representations of every available component. You are free to customize these components however you like.\n\n<a name=\"customizing-the-css\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":753,"to":763}}}}],["2297",{"pageContent":"Customizing The CSS\n\nAfter exporting the components, the `resources/views/vendor/mail/html/themes` directory will contain a `default.css` file. You may customize the CSS in this file and your styles will automatically be converted to inline CSS styles within the HTML representations of your Markdown mail messages.\n\nIf you would like to build an entirely new theme for Laravel's Markdown components, you may place a CSS file within the `html/themes` directory. After naming and saving your CSS file, update the `theme` option of your application's `config/mail.php` configuration file to match the name of your new theme.\n\nTo customize the theme for an individual mailable, you may set the `$theme` property of the mailable class to the name of the theme that should be used when sending that mailable.\n\n<a name=\"sending-mail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":764,"to":772}}}}],["2298",{"pageContent":"Sending Mail\n\nTo send a message, use the `to` method on the `Mail` [facade](/docs/{{version}}/facades). The `to` method accepts an email address, a user instance, or a collection of users. If you pass an object or collection of objects, the mailer will automatically use their `email` and `name` properties when determining the email's recipients, so make sure these attributes are available on your objects. Once you have specified your recipients, you may pass an instance of your mailable class to the `send` method:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Mail\\OrderShipped;\n    use App\\Models\\Order;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Mail;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":773,"to":786}}}}],["2299",{"pageContent":"class OrderShipmentController extends Controller\n    {\n        /**\n         * Ship the given order.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $order = Order::findOrFail($request->order_id);\n\n            // Ship the order...\n\n            Mail::to($request->user())->send(new OrderShipped($order));\n\n            return redirect('/orders');\n        }\n    }\n\nYou are not limited to just specifying the \"to\" recipients when sending a message. You are free to set \"to\", \"cc\", and \"bcc\" recipients by chaining their respective methods together:\n\n    Mail::to($request->user())\n        ->cc($moreUsers)\n        ->bcc($evenMoreUsers)\n        ->send(new OrderShipped($order));\n\n<a name=\"looping-over-recipients\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":788,"to":812}}}}],["2300",{"pageContent":"Looping Over Recipients\n\nOccasionally, you may need to send a mailable to a list of recipients by iterating over an array of recipients / email addresses. However, since the `to` method appends email addresses to the mailable's list of recipients, each iteration through the loop will send another email to every previous recipient. Therefore, you should always re-create the mailable instance for each recipient:\n\n    foreach (['taylor@example.com', 'dries@example.com'] as $recipient) {\n        Mail::to($recipient)->send(new OrderShipped($order));\n    }\n\n<a name=\"sending-mail-via-a-specific-mailer\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":813,"to":821}}}}],["2301",{"pageContent":"Sending Mail Via A Specific Mailer\n\nBy default, Laravel will send email using the mailer configured as the `default` mailer in your application's `mail` configuration file. However, you may use the `mailer` method to send a message using a specific mailer configuration:\n\n    Mail::mailer('postmark')\n            ->to($request->user())\n            ->send(new OrderShipped($order));\n\n<a name=\"queueing-mail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":822,"to":830}}}}],["2302",{"pageContent":"Queueing Mail\n\n<a name=\"queueing-a-mail-message\"></a>\n#### Queueing A Mail Message\n\nSince sending email messages can negatively impact the response time of your application, many developers choose to queue email messages for background sending. Laravel makes this easy using its built-in [unified queue API](/docs/{{version}}/queues). To queue a mail message, use the `queue` method on the `Mail` facade after specifying the message's recipients:\n\n    Mail::to($request->user())\n        ->cc($moreUsers)\n        ->bcc($evenMoreUsers)\n        ->queue(new OrderShipped($order));\n\nThis method will automatically take care of pushing a job onto the queue so the message is sent in the background. You will need to [configure your queues](/docs/{{version}}/queues) before using this feature.\n\n<a name=\"delayed-message-queueing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":831,"to":845}}}}],["2303",{"pageContent":"Delayed Message Queueing\n\nIf you wish to delay the delivery of a queued email message, you may use the `later` method. As its first argument, the `later` method accepts a `DateTime` instance indicating when the message should be sent:\n\n    Mail::to($request->user())\n        ->cc($moreUsers)\n        ->bcc($evenMoreUsers)\n        ->later(now()->addMinutes(10), new OrderShipped($order));\n\n<a name=\"pushing-to-specific-queues\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":846,"to":855}}}}],["2304",{"pageContent":"Pushing To Specific Queues\n\nSince all mailable classes generated using the `make:mail` command make use of the `Illuminate\\Bus\\Queueable` trait, you may call the `onQueue` and `onConnection` methods on any mailable class instance, allowing you to specify the connection and queue name for the message:\n\n    $message = (new OrderShipped($order))\n                    ->onConnection('sqs')\n                    ->onQueue('emails');\n\n    Mail::to($request->user())\n        ->cc($moreUsers)\n        ->bcc($evenMoreUsers)\n        ->queue($message);\n\n<a name=\"queueing-by-default\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":856,"to":869}}}}],["2305",{"pageContent":"Queueing By Default\n\nIf you have mailable classes that you want to always be queued, you may implement the `ShouldQueue` contract on the class. Now, even if you call the `send` method when mailing, the mailable will still be queued since it implements the contract:\n\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n\n    class OrderShipped extends Mailable implements ShouldQueue\n    {\n        // ...\n    }\n\n<a name=\"queued-mailables-and-database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":870,"to":881}}}}],["2306",{"pageContent":"Queued Mailables & Database Transactions\n\nWhen queued mailables are dispatched within database transactions, they may be processed by the queue before the database transaction has committed. When this happens, any updates you have made to models or database records during the database transaction may not yet be reflected in the database. In addition, any models or database records created within the transaction may not exist in the database. If your mailable depends on these models, unexpected errors can occur when the job that sends the queued mailable is processed.\n\nIf your queue connection's `after_commit` configuration option is set to `false`, you may still indicate that a particular queued mailable should be dispatched after all open database transactions have been committed by calling the `afterCommit` method when sending the mail message:\n\n    Mail::to($request->user())->send(\n        (new OrderShipped($order))->afterCommit()\n    );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":882,"to":890}}}}],["2307",{"pageContent":"Mail::to($request->user())->send(\n        (new OrderShipped($order))->afterCommit()\n    );\n\nAlternatively, you may call the `afterCommit` method from your mailable's constructor:\n\n    <?php\n\n    namespace App\\Mail;\n\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Mail\\Mailable;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class OrderShipped extends Mailable implements ShouldQueue\n    {\n        use Queueable, SerializesModels;\n\n        /**\n         * Create a new message instance.\n         */\n        public function __construct()\n        {\n            $this->afterCommit();\n        }\n    }\n\n> **Note**  \n> To learn more about working around these issues, please review the documentation regarding [queued jobs and database transactions](/docs/{{version}}/queues#jobs-and-database-transactions).\n\n<a name=\"rendering-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":890,"to":921}}}}],["2308",{"pageContent":"Rendering Mailables\n\nSometimes you may wish to capture the HTML content of a mailable without sending it. To accomplish this, you may call the `render` method of the mailable. This method will return the evaluated HTML content of the mailable as a string:\n\n    use App\\Mail\\InvoicePaid;\n    use App\\Models\\Invoice;\n\n    $invoice = Invoice::find(1);\n\n    return (new InvoicePaid($invoice))->render();\n\n<a name=\"previewing-mailables-in-the-browser\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":922,"to":933}}}}],["2309",{"pageContent":"Previewing Mailables In The Browser\n\nWhen designing a mailable's template, it is convenient to quickly preview the rendered mailable in your browser like a typical Blade template. For this reason, Laravel allows you to return any mailable directly from a route closure or controller. When a mailable is returned, it will be rendered and displayed in the browser, allowing you to quickly preview its design without needing to send it to an actual email address:\n\n    Route::get('/mailable', function () {\n        $invoice = App\\Models\\Invoice::find(1);\n\n        return new App\\Mail\\InvoicePaid($invoice);\n    });\n\n<a name=\"localizing-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":934,"to":944}}}}],["2310",{"pageContent":"Localizing Mailables\n\nLaravel allows you to send mailables in a locale other than the request's current locale, and will even remember this locale if the mail is queued.\n\nTo accomplish this, the `Mail` facade offers a `locale` method to set the desired language. The application will change into this locale when the mailable's template is being evaluated and then revert back to the previous locale when evaluation is complete:\n\n    Mail::to($request->user())->locale('es')->send(\n        new OrderShipped($order)\n    );\n\n<a name=\"user-preferred-locales\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":945,"to":955}}}}],["2311",{"pageContent":"User Preferred Locales\n\nSometimes, applications store each user's preferred locale. By implementing the `HasLocalePreference` contract on one or more of your models, you may instruct Laravel to use this stored locale when sending mail:\n\n    use Illuminate\\Contracts\\Translation\\HasLocalePreference;\n\n    class User extends Model implements HasLocalePreference\n    {\n        /**\n         * Get the user's preferred locale.\n         */\n        public function preferredLocale(): string\n        {\n            return $this->locale;\n        }\n    }\n\nOnce you have implemented the interface, Laravel will automatically use the preferred locale when sending mailables and notifications to the model. Therefore, there is no need to call the `locale` method when using this interface:\n\n    Mail::to($request->user())->send(new OrderShipped($order));\n\n<a name=\"testing-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":956,"to":977}}}}],["2312",{"pageContent":"Testing\n\n<a name=\"testing-mailable-content\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":978,"to":980}}}}],["2313",{"pageContent":"Testing Mailable Content\n\nLaravel provides a variety of methods for inspecting your mailable's structure. In addition, Laravel provides several convenient methods for testing that your mailable contains the content that you expect. These methods are: `assertSeeInHtml`, `assertDontSeeInHtml`, `assertSeeInOrderInHtml`, `assertSeeInText`, `assertDontSeeInText`, `assertSeeInOrderInText`, `assertHasAttachment`, `assertHasAttachedData`, `assertHasAttachmentFromStorage`, and `assertHasAttachmentFromStorageDisk`.\n\nAs you might expect, the \"HTML\" assertions assert that the HTML version of your mailable contains a given string, while the \"text\" assertions assert that the plain-text version of your mailable contains a given string:\n\n    use App\\Mail\\InvoicePaid;\n    use App\\Models\\User;\n\n    public function test_mailable_content(): void\n    {\n        $user = User::factory()->create();\n\n        $mailable = new InvoicePaid($user);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":981,"to":994}}}}],["2314",{"pageContent":"use App\\Mail\\InvoicePaid;\n    use App\\Models\\User;\n\n    public function test_mailable_content(): void\n    {\n        $user = User::factory()->create();\n\n        $mailable = new InvoicePaid($user);\n\n        $mailable->assertFrom('jeffrey@example.com');\n        $mailable->assertTo('taylor@example.com');\n        $mailable->assertHasCc('abigail@example.com');\n        $mailable->assertHasBcc('victoria@example.com');\n        $mailable->assertHasReplyTo('tyler@example.com');\n        $mailable->assertHasSubject('Invoice Paid');\n        $mailable->assertHasTag('example-tag');\n        $mailable->assertHasMetadata('key', 'value');\n\n        $mailable->assertSeeInHtml($user->email);\n        $mailable->assertSeeInHtml('Invoice Paid');\n        $mailable->assertSeeInOrderInHtml(['Invoice Paid', 'Thanks']);\n\n        $mailable->assertSeeInText($user->email);\n        $mailable->assertSeeInOrderInText(['Invoice Paid', 'Thanks']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":994,"to":1017}}}}],["2315",{"pageContent":"$mailable->assertSeeInText($user->email);\n        $mailable->assertSeeInOrderInText(['Invoice Paid', 'Thanks']);\n\n        $mailable->assertHasAttachment('/path/to/file');\n        $mailable->assertHasAttachment(Attachment::fromPath('/path/to/file'));\n        $mailable->assertHasAttachedData($pdfData, 'name.pdf', ['mime' => 'application/pdf']);\n        $mailable->assertHasAttachmentFromStorage('/path/to/file', 'name.pdf', ['mime' => 'application/pdf']);\n        $mailable->assertHasAttachmentFromStorageDisk('s3', '/path/to/file', 'name.pdf', ['mime' => 'application/pdf']);\n    }\n\n<a name=\"testing-mailable-sending\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1017,"to":1027}}}}],["2316",{"pageContent":"Testing Mailable Sending\n\nWe suggest testing the content of your mailables separately from your tests that assert that a given mailable was \"sent\" to a specific user. Typically, the content of mailables is not relevant to the code you are testing, and it is sufficient to simply assert that Laravel was instructed to send a given mailable.\n\nYou may use the `Mail` facade's `fake` method to prevent mail from being sent. After calling the `Mail` facade's `fake` method, you may then assert that mailables were instructed to be sent to users and even inspect the data the mailables received:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use App\\Mail\\OrderShipped;\n    use Illuminate\\Support\\Facades\\Mail;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_orders_can_be_shipped(): void\n        {\n            Mail::fake();\n\n            // Perform order shipping...\n\n            // Assert that no mailables were sent...\n            Mail::assertNothingSent();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1028,"to":1051}}}}],["2317",{"pageContent":"// Perform order shipping...\n\n            // Assert that no mailables were sent...\n            Mail::assertNothingSent();\n\n            // Assert that a mailable was sent...\n            Mail::assertSent(OrderShipped::class);\n\n            // Assert a mailable was sent twice...\n            Mail::assertSent(OrderShipped::class, 2);\n\n            // Assert a mailable was not sent...\n            Mail::assertNotSent(AnotherMailable::class);\n\n            // Assert 3 total mailables were sent...\n            Mail::assertSentCount(3);\n        }\n    }\n\nIf you are queueing mailables for delivery in the background, you should use the `assertQueued` method instead of `assertSent`:\n\n    Mail::assertQueued(OrderShipped::class);\n    Mail::assertNotQueued(OrderShipped::class);\n    Mail::assertNothingQueued();\n    Mail::assertQueuedCount(3);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1051,"to":1075}}}}],["2318",{"pageContent":"Mail::assertQueued(OrderShipped::class);\n    Mail::assertNotQueued(OrderShipped::class);\n    Mail::assertNothingQueued();\n    Mail::assertQueuedCount(3);\n\nYou may pass a closure to the `assertSent`, `assertNotSent`, `assertQueued`, or `assertNotQueued` methods in order to assert that a mailable was sent that passes a given \"truth test\". If at least one mailable was sent that passes the given truth test then the assertion will be successful:\n\n    Mail::assertSent(function (OrderShipped $mail) use ($order) {\n        return $mail->order->id === $order->id;\n    });\n\nWhen calling the `Mail` facade's assertion methods, the mailable instance accepted by the provided closure exposes helpful methods for examining the mailable:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1075,"to":1086}}}}],["2319",{"pageContent":"When calling the `Mail` facade's assertion methods, the mailable instance accepted by the provided closure exposes helpful methods for examining the mailable:\n\n    Mail::assertSent(OrderShipped::class, function (OrderShipped $mail) use ($user) {\n        return $mail->hasTo($user->email) &&\n               $mail->hasCc('...') &&\n               $mail->hasBcc('...') &&\n               $mail->hasReplyTo('...') &&\n               $mail->hasFrom('...') &&\n               $mail->hasSubject('...');\n    });\n\nThe mailable instance also includes several helpful methods for examining the attachments on a mailable:\n\n    use Illuminate\\Mail\\Mailables\\Attachment;\n\n    Mail::assertSent(OrderShipped::class, function (OrderShipped $mail) {\n        return $mail->hasAttachment(\n            Attachment::fromPath('/path/to/file')\n                    ->as('name.pdf')\n                    ->withMime('application/pdf')\n        );\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1086,"to":1107}}}}],["2320",{"pageContent":"Mail::assertSent(OrderShipped::class, function (OrderShipped $mail) {\n        return $mail->hasAttachment(\n            Attachment::fromStorageDisk('s3', '/path/to/file')\n        );\n    });\n\n    Mail::assertSent(OrderShipped::class, function (OrderShipped $mail) use ($pdfData) {\n        return $mail->hasAttachment(\n            Attachment::fromData(fn () => $pdfData, 'name.pdf')\n        );\n    });\n\nYou may have noticed that there are two methods for asserting that mail was not sent: `assertNotSent` and `assertNotQueued`. Sometimes you may wish to assert that no mail was sent **or** queued. To accomplish this, you may use the `assertNothingOutgoing` and `assertNotOutgoing` methods:\n\n    Mail::assertNothingOutgoing();\n\n    Mail::assertNotOutgoing(function (OrderShipped $mail) use ($order) {\n        return $mail->order->id === $order->id;\n    });\n\n<a name=\"mail-and-local-development\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1109,"to":1129}}}}],["2321",{"pageContent":"Mail & Local Development\n\nWhen developing an application that sends email, you probably don't want to actually send emails to live email addresses. Laravel provides several ways to \"disable\" the actual sending of emails during local development.\n\n<a name=\"log-driver\"></a>\n#### Log Driver\n\nInstead of sending your emails, the `log` mail driver will write all email messages to your log files for inspection. Typically, this driver would only be used during local development. For more information on configuring your application per environment, check out the [configuration documentation](/docs/{{version}}/configuration#environment-configuration).\n\n<a name=\"mailtrap\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1130,"to":1139}}}}],["2322",{"pageContent":"HELO / Mailtrap / Mailpit\n\nAlternatively, you may use a service like [HELO](https://usehelo.com) or [Mailtrap](https://mailtrap.io) and the `smtp` driver to send your email messages to a \"dummy\" mailbox where you may view them in a true email client. This approach has the benefit of allowing you to actually inspect the final emails in Mailtrap's message viewer.\n\nIf you are using [Laravel Sail](/docs/{{version}}/sail), you may preview your messages using [Mailpit](https://github.com/axllent/mailpit). When Sail is running, you may access the Mailpit interface at: `http://localhost:8025`.\n\n<a name=\"using-a-global-to-address\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1140,"to":1146}}}}],["2323",{"pageContent":"Using A Global `to` Address\n\nFinally, you may specify a global \"to\" address by invoking the `alwaysTo` method offered by the `Mail` facade. Typically, this method should be called from the `boot` method of one of your application's service providers:\n\n    use Illuminate\\Support\\Facades\\Mail;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        if ($this->app->environment('local')) {\n            Mail::alwaysTo('taylor@example.com');\n        }\n    }\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1147,"to":1163}}}}],["2324",{"pageContent":"Events\n\nLaravel fires two events during the process of sending mail messages. The `MessageSending` event is fired prior to a message being sent, while the `MessageSent` event is fired after a message has been sent. Remember, these events are fired when the mail is being *sent*, not when it is queued. You may register event listeners for this event in your `App\\Providers\\EventServiceProvider` service provider:\n\n    use App\\Listeners\\LogSendingMessage;\n    use App\\Listeners\\LogSentMessage;\n    use Illuminate\\Mail\\Events\\MessageSending;\n    use Illuminate\\Mail\\Events\\MessageSent;\n\n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        MessageSending::class => [\n            LogSendingMessage::class,\n        ],\n\n        MessageSent::class => [\n            LogSentMessage::class,\n        ],\n    ];\n\n<a name=\"custom-transports\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1164,"to":1188}}}}],["2325",{"pageContent":"Custom Transports\n\nLaravel includes a variety of mail transports; however, you may wish to write your own transports to deliver email via other services that Laravel does not support out of the box. To get started, define a class that extends the `Symfony\\Component\\Mailer\\Transport\\AbstractTransport` class. Then, implement the `doSend` and `__toString()` methods on your transport:\n\n    use MailchimpTransactional\\ApiClient;\n    use Symfony\\Component\\Mailer\\SentMessage;\n    use Symfony\\Component\\Mailer\\Transport\\AbstractTransport;\n    use Symfony\\Component\\Mime\\Address;\n    use Symfony\\Component\\Mime\\MessageConverter;\n\n    class MailchimpTransport extends AbstractTransport\n    {\n        /**\n         * Create a new Mailchimp transport instance.\n         */\n        public function __construct(\n            protected ApiClient $client,\n        ) {\n            parent::__construct();\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1189,"to":1208}}}}],["2326",{"pageContent":"/**\n         * {@inheritDoc}\n         */\n        protected function doSend(SentMessage $message): void\n        {\n            $email = MessageConverter::toEmail($message->getOriginalMessage());\n\n            $this->client->messages->send(['message' => [\n                'from_email' => $email->getFrom(),\n                'to' => collect($email->getTo())->map(function (Address $email) {\n                    return ['email' => $email->getAddress(), 'type' => 'to'];\n                })->all(),\n                'subject' => $email->getSubject(),\n                'text' => $email->getTextBody(),\n            ]]);\n        }\n\n        /**\n         * Get the string representation of the transport.\n         */\n        public function __toString(): string\n        {\n            return 'mailchimp';\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1210,"to":1234}}}}],["2327",{"pageContent":"/**\n         * Get the string representation of the transport.\n         */\n        public function __toString(): string\n        {\n            return 'mailchimp';\n        }\n    }\n\nOnce you've defined your custom transport, you may register it via the `extend` method provided by the `Mail` facade. Typically, this should be done within the `boot` method of your application's `AppServiceProvider` service provider. A `$config` argument will be passed to the closure provided to the `extend` method. This argument will contain the configuration array defined for the mailer in the application's `config/mail.php` configuration file:\n\n    use App\\Mail\\MailchimpTransport;\n    use Illuminate\\Support\\Facades\\Mail;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Mail::extend('mailchimp', function (array $config = []) {\n            return new MailchimpTransport(/* ... */);\n        });\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1234,"to":1256}}}}],["2328",{"pageContent":"Once your custom transport has been defined and registered, you may create a mailer definition within your application's `config/mail.php` configuration file that utilizes the new transport:\n\n    'mailchimp' => [\n        'transport' => 'mailchimp',\n        // ...\n    ],\n\n<a name=\"additional-symfony-transports\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1258,"to":1265}}}}],["2329",{"pageContent":"Additional Symfony Transports\n\nLaravel includes support for some existing Symfony maintained mail transports like Mailgun and Postmark. However, you may wish to extend Laravel with support for additional Symfony maintained transports. You can do so by requiring the necessary Symfony mailer via Composer and registering the transport with Laravel. For example, you may install and register the \"Brevo\" (formerly \"Sendinblue\") Symfony mailer:\n\n```none\ncomposer require symfony/brevo-mailer symfony/http-client","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1266,"to":1271}}}}],["2330",{"pageContent":"Once the Brevo mailer package has been installed, you may add an entry for your Brevo API credentials to your application's `services` configuration file:\n\n    'brevo' => [\n        'key' => 'your-api-key',\n    ],\n\nNext, you may use the `Mail` facade's `extend` method to register the transport with Laravel. Typically, this should be done within the `boot` method of a service provider:\n\n    use Illuminate\\Support\\Facades\\Mail;\n    use Symfony\\Component\\Mailer\\Bridge\\Brevo\\Transport\\BrevoTransportFactory;\n    use Symfony\\Component\\Mailer\\Transport\\Dsn;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Mail::extend('brevo', function () {\n            return (new BrevoTransportFactory)->create(\n                new Dsn(\n                    'brevo+api',\n                    'default',\n                    config('services.brevo.key')\n                )\n            );\n        });\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1274,"to":1300}}}}],["2331",{"pageContent":"Once your transport has been registered, you may create a mailer definition within your application's config/mail.php configuration file that utilizes the new transport:\n\n    'brevo' => [\n        'transport' => 'brevo',\n        // ...\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mail.md","loc":{"lines":{"from":1302,"to":1307}}}}],["2332",{"pageContent":"# Middleware\n\n- [Introduction](#introduction)\n- [Defining Middleware](#defining-middleware)\n- [Registering Middleware](#registering-middleware)\n    - [Global Middleware](#global-middleware)\n    - [Assigning Middleware To Routes](#assigning-middleware-to-routes)\n    - [Middleware Groups](#middleware-groups)\n    - [Sorting Middleware](#sorting-middleware)\n- [Middleware Parameters](#middleware-parameters)\n- [Terminable Middleware](#terminable-middleware)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":1,"to":13}}}}],["2333",{"pageContent":"Introduction\n\nMiddleware provide a convenient mechanism for inspecting and filtering HTTP requests entering your application. For example, Laravel includes a middleware that verifies the user of your application is authenticated. If the user is not authenticated, the middleware will redirect the user to your application's login screen. However, if the user is authenticated, the middleware will allow the request to proceed further into the application.\n\nAdditional middleware can be written to perform a variety of tasks besides authentication. For example, a logging middleware might log all incoming requests to your application. There are several middleware included in the Laravel framework, including middleware for authentication and CSRF protection. All of these middleware are located in the `app/Http/Middleware` directory.\n\n<a name=\"defining-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":14,"to":20}}}}],["2334",{"pageContent":"Defining Middleware\n\nTo create a new middleware, use the `make:middleware` Artisan command:\n\n```shell\nphp artisan make:middleware EnsureTokenIsValid","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":21,"to":26}}}}],["2335",{"pageContent":"This command will place a new `EnsureTokenIsValid` class within your `app/Http/Middleware` directory. In this middleware, we will only allow access to the route if the supplied `token` input matches a specified value. Otherwise, we will redirect the users back to the `home` URI:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class EnsureTokenIsValid\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next): Response\n        {\n            if ($request->input('token') !== 'my-secret-token') {\n                return redirect('home');\n            }\n\n            return $next($request);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":29,"to":54}}}}],["2336",{"pageContent":"return $next($request);\n        }\n    }\n\nAs you can see, if the given `token` does not match our secret token, the middleware will return an HTTP redirect to the client; otherwise, the request will be passed further into the application. To pass the request deeper into the application (allowing the middleware to \"pass\"), you should call the `$next` callback with the `$request`.\n\nIt's best to envision middleware as a series of \"layers\" HTTP requests must pass through before they hit your application. Each layer can examine the request and even reject it entirely.\n\n> **Note**  \n> All middleware are resolved via the [service container](/docs/{{version}}/container), so you may type-hint any dependencies you need within a middleware's constructor.\n\n<a name=\"before-after-middleware\"></a>\n<a name=\"middleware-and-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":54,"to":66}}}}],["2337",{"pageContent":"Middleware & Responses\n\nOf course, a middleware can perform tasks before or after passing the request deeper into the application. For example, the following middleware would perform some task **before** the request is handled by the application:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class BeforeMiddleware\n    {\n        public function handle(Request $request, Closure $next): Response\n        {\n            // Perform action\n\n            return $next($request);\n        }\n    }\n\nHowever, this middleware would perform its task **after** the request is handled by the application:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class AfterMiddleware\n    {\n        public function handle(Request $request, Closure $next): Response\n        {\n            $response = $next($request);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":67,"to":103}}}}],["2338",{"pageContent":"class AfterMiddleware\n    {\n        public function handle(Request $request, Closure $next): Response\n        {\n            $response = $next($request);\n\n            // Perform action\n\n            return $response;\n        }\n    }\n\n<a name=\"registering-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":103,"to":115}}}}],["2339",{"pageContent":"Registering Middleware\n\n<a name=\"global-middleware\"></a>\n### Global Middleware\n\nIf you want a middleware to run during every HTTP request to your application, list the middleware class in the `$middleware` property of your `app/Http/Kernel.php` class.\n\n<a name=\"assigning-middleware-to-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":116,"to":123}}}}],["2340",{"pageContent":"Assigning Middleware To Routes\n\nIf you would like to assign middleware to specific routes, you may invoke the `middleware` method when defining the route:\n\n    use App\\Http\\Middleware\\Authenticate;\n\n    Route::get('/profile', function () {\n        // ...\n    })->middleware(Authenticate::class);\n\nYou may assign multiple middleware to the route by passing an array of middleware names to the `middleware` method:\n\n    Route::get('/', function () {\n        // ...\n    })->middleware([First::class, Second::class]);\n\nFor convenience, you may assign aliases to middleware in your application's `app/Http/Kernel.php` file. By default, the `$middlewareAliases` property of this class contains entries for the middleware included with Laravel. You may add your own middleware to this list and assign it an alias of your choosing:\n\n    // Within App\\Http\\Kernel class...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":124,"to":142}}}}],["2341",{"pageContent":"// Within App\\Http\\Kernel class...\n\n    protected $middlewareAliases = [\n        'auth' => \\App\\Http\\Middleware\\Authenticate::class,\n        'auth.basic' => \\Illuminate\\Auth\\Middleware\\AuthenticateWithBasicAuth::class,\n        'bindings' => \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n        'cache.headers' => \\Illuminate\\Http\\Middleware\\SetCacheHeaders::class,\n        'can' => \\Illuminate\\Auth\\Middleware\\Authorize::class,\n        'guest' => \\App\\Http\\Middleware\\RedirectIfAuthenticated::class,\n        'signed' => \\Illuminate\\Routing\\Middleware\\ValidateSignature::class,\n        'throttle' => \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class,\n        'verified' => \\Illuminate\\Auth\\Middleware\\EnsureEmailIsVerified::class,\n    ];\n\nOnce the middleware alias has been defined in the HTTP kernel, you may use the alias when assigning middleware to routes:\n\n    Route::get('/profile', function () {\n        // ...\n    })->middleware('auth');\n\n<a name=\"excluding-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":142,"to":162}}}}],["2342",{"pageContent":"Excluding Middleware\n\nWhen assigning middleware to a group of routes, you may occasionally need to prevent the middleware from being applied to an individual route within the group. You may accomplish this using the `withoutMiddleware` method:\n\n    use App\\Http\\Middleware\\EnsureTokenIsValid;\n\n    Route::middleware([EnsureTokenIsValid::class])->group(function () {\n        Route::get('/', function () {\n            // ...\n        });\n\n        Route::get('/profile', function () {\n            // ...\n        })->withoutMiddleware([EnsureTokenIsValid::class]);\n    });\n\nYou may also exclude a given set of middleware from an entire [group](/docs/{{version}}/routing#route-groups) of route definitions:\n\n    use App\\Http\\Middleware\\EnsureTokenIsValid;\n\n    Route::withoutMiddleware([EnsureTokenIsValid::class])->group(function () {\n        Route::get('/profile', function () {\n            // ...\n        });\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":163,"to":187}}}}],["2343",{"pageContent":"Route::withoutMiddleware([EnsureTokenIsValid::class])->group(function () {\n        Route::get('/profile', function () {\n            // ...\n        });\n    });\n\nThe `withoutMiddleware` method can only remove route middleware and does not apply to [global middleware](#global-middleware).\n\n<a name=\"middleware-groups\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":187,"to":195}}}}],["2344",{"pageContent":"Middleware Groups\n\nSometimes you may want to group several middleware under a single key to make them easier to assign to routes. You may accomplish this using the `$middlewareGroups` property of your HTTP kernel.\n\nLaravel includes predefined `web` and `api` middleware groups that contain common middleware you may want to apply to your web and API routes. Remember, these middleware groups are automatically applied by your application's `App\\Providers\\RouteServiceProvider` service provider to routes within your corresponding `web` and `api` route files:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":196,"to":200}}}}],["2345",{"pageContent":"/**\n     * The application's route middleware groups.\n     *\n     * @var array\n     */\n    protected $middlewareGroups = [\n        'web' => [\n            \\App\\Http\\Middleware\\EncryptCookies::class,\n            \\Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse::class,\n            \\Illuminate\\Session\\Middleware\\StartSession::class,\n            \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class,\n            \\App\\Http\\Middleware\\VerifyCsrfToken::class,\n            \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n        ],\n\n        'api' => [\n            \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class.':api',\n            \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n        ],\n    ];\n\nMiddleware groups may be assigned to routes and controller actions using the same syntax as individual middleware. Again, middleware groups make it more convenient to assign many middleware to a route at once:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":202,"to":223}}}}],["2346",{"pageContent":"Route::get('/', function () {\n        // ...\n    })->middleware('web');\n\n    Route::middleware(['web'])->group(function () {\n        // ...\n    });\n\n> **Note**  \n> Out of the box, the `web` and `api` middleware groups are automatically applied to your application's corresponding `routes/web.php` and `routes/api.php` files by the `App\\Providers\\RouteServiceProvider`.\n\n<a name=\"sorting-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":225,"to":236}}}}],["2347",{"pageContent":"Sorting Middleware\n\nRarely, you may need your middleware to execute in a specific order but not have control over their order when they are assigned to the route. In this case, you may specify your middleware priority using the `$middlewarePriority` property of your `app/Http/Kernel.php` file. This property may not exist in your HTTP kernel by default. If it does not exist, you may copy its default definition below:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":237,"to":239}}}}],["2348",{"pageContent":"/**\n     * The priority-sorted list of middleware.\n     *\n     * This forces non-global middleware to always be in the given order.\n     *\n     * @var string[]\n     */\n    protected $middlewarePriority = [\n        \\Illuminate\\Foundation\\Http\\Middleware\\HandlePrecognitiveRequests::class,\n        \\Illuminate\\Cookie\\Middleware\\EncryptCookies::class,\n        \\Illuminate\\Session\\Middleware\\StartSession::class,\n        \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class,\n        \\Illuminate\\Contracts\\Auth\\Middleware\\AuthenticatesRequests::class,\n        \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class,\n        \\Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis::class,\n        \\Illuminate\\Contracts\\Session\\Middleware\\AuthenticatesSessions::class,\n        \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n        \\Illuminate\\Auth\\Middleware\\Authorize::class,\n    ];\n\n<a name=\"middleware-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":241,"to":261}}}}],["2349",{"pageContent":"Middleware Parameters\n\nMiddleware can also receive additional parameters. For example, if your application needs to verify that the authenticated user has a given \"role\" before performing a given action, you could create an `EnsureUserHasRole` middleware that receives a role name as an additional argument.\n\nAdditional middleware parameters will be passed to the middleware after the `$next` argument:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class EnsureUserHasRole\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next, string $role): Response\n        {\n            if (! $request->user()->hasRole($role)) {\n                // Redirect...\n            }\n\n            return $next($request);\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":262,"to":290}}}}],["2350",{"pageContent":"return $next($request);\n        }\n\n    }\n\nMiddleware parameters may be specified when defining the route by separating the middleware name and parameters with a `:`. Multiple parameters should be delimited by commas:\n\n    Route::put('/post/{id}', function (string $id) {\n        // ...\n    })->middleware('role:editor');\n\n<a name=\"terminable-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":290,"to":301}}}}],["2351",{"pageContent":"Terminable Middleware\n\nSometimes a middleware may need to do some work after the HTTP response has been sent to the browser. If you define a `terminate` method on your middleware and your web server is using FastCGI, the `terminate` method will automatically be called after the response is sent to the browser:\n\n    <?php\n\n    namespace Illuminate\\Session\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class TerminatingMiddleware\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next): Response\n        {\n            return $next($request);\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":302,"to":324}}}}],["2352",{"pageContent":"/**\n         * Handle tasks after the response has been sent to the browser.\n         */\n        public function terminate(Request $request, Response $response): void\n        {\n            // ...\n        }\n    }\n\nThe `terminate` method should receive both the request and the response. Once you have defined a terminable middleware, you should add it to the list of routes or global middleware in the `app/Http/Kernel.php` file.\n\nWhen calling the `terminate` method on your middleware, Laravel will resolve a fresh instance of the middleware from the [service container](/docs/{{version}}/container). If you would like to use the same middleware instance when the `handle` and `terminate` methods are called, register the middleware with the container using the container's `singleton` method. Typically this should be done in the `register` method of your `AppServiceProvider`:\n\n    use App\\Http\\Middleware\\TerminatingMiddleware;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":326,"to":339}}}}],["2353",{"pageContent":"use App\\Http\\Middleware\\TerminatingMiddleware;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->app->singleton(TerminatingMiddleware::class);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/middleware.md","loc":{"lines":{"from":339,"to":347}}}}],["2354",{"pageContent":"# Database: Migrations","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1,"to":1}}}}],["2355",{"pageContent":"- [Introduction](#introduction)\n- [Generating Migrations](#generating-migrations)\n    - [Squashing Migrations](#squashing-migrations)\n- [Migration Structure](#migration-structure)\n- [Running Migrations](#running-migrations)\n    - [Rolling Back Migrations](#rolling-back-migrations)\n- [Tables](#tables)\n    - [Creating Tables](#creating-tables)\n    - [Updating Tables](#updating-tables)\n    - [Renaming / Dropping Tables](#renaming-and-dropping-tables)\n- [Columns](#columns)\n    - [Creating Columns](#creating-columns)\n    - [Available Column Types](#available-column-types)\n    - [Column Modifiers](#column-modifiers)\n    - [Modifying Columns](#modifying-columns)\n    - [Renaming Columns](#renaming-columns)\n    - [Dropping Columns](#dropping-columns)\n- [Indexes](#indexes)\n    - [Creating Indexes](#creating-indexes)\n    - [Renaming Indexes](#renaming-indexes)\n    - [Dropping Indexes](#dropping-indexes)\n    - [Foreign Key Constraints](#foreign-key-constraints)\n- [Events](#events)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":3,"to":25}}}}],["2356",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":27,"to":27}}}}],["2357",{"pageContent":"Introduction\n\nMigrations are like version control for your database, allowing your team to define and share the application's database schema definition. If you have ever had to tell a teammate to manually add a column to their local database schema after pulling in your changes from source control, you've faced the problem that database migrations solve.\n\nThe Laravel `Schema` [facade](/docs/{{version}}/facades) provides database agnostic support for creating and manipulating tables across all of Laravel's supported database systems. Typically, migrations will use this facade to create and modify database tables and columns.\n\n<a name=\"generating-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":28,"to":34}}}}],["2358",{"pageContent":"Generating Migrations\n\nYou may use the `make:migration` [Artisan command](/docs/{{version}}/artisan) to generate a database migration. The new migration will be placed in your `database/migrations` directory. Each migration filename contains a timestamp that allows Laravel to determine the order of the migrations:\n\n```shell\nphp artisan make:migration create_flights_table","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":35,"to":40}}}}],["2359",{"pageContent":"Laravel will use the name of the migration to attempt to guess the name of the table and whether or not the migration will be creating a new table. If Laravel is able to determine the table name from the migration name, Laravel will pre-fill the generated migration file with the specified table. Otherwise, you may simply specify the table in the migration file manually.\n\nIf you would like to specify a custom path for the generated migration, you may use the `--path` option when executing the `make:migration` command. The given path should be relative to your application's base path.\n\n> **Note**  \n> Migration stubs may be customized using [stub publishing](/docs/{{version}}/artisan#stub-customization).\n\n<a name=\"squashing-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":43,"to":50}}}}],["2360",{"pageContent":"Squashing Migrations\n\nAs you build your application, you may accumulate more and more migrations over time. This can lead to your `database/migrations` directory becoming bloated with potentially hundreds of migrations. If you would like, you may \"squash\" your migrations into a single SQL file. To get started, execute the `schema:dump` command:\n\n```shell\nphp artisan schema:dump\n\n# Dump the current database schema and prune all existing migrations...\nphp artisan schema:dump --prune","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":51,"to":59}}}}],["2361",{"pageContent":"When you execute this command, Laravel will write a \"schema\" file to your application's `database/schema` directory. The schema file's name will correspond to the database connection. Now, when you attempt to migrate your database and no other migrations have been executed, Laravel will first execute the SQL statements in the schema file of the database connection you are using. After executing the schema file's SQL statements, Laravel will execute any remaining migrations that were not part of the schema dump.\n\nIf your application's tests use a different database connection than the one you typically use during local development, you should ensure you have dumped a schema file using that database connection so that your tests are able to build your database. You may wish to do this after dumping the database connection you typically use during local development:\n\n```shell\nphp artisan schema:dump\nphp artisan schema:dump --database=testing --prune","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":62,"to":68}}}}],["2362",{"pageContent":"You should commit your database schema file to source control so that other new developers on your team may quickly create your application's initial database structure.\n\n> **Warning**  \n> Migration squashing is only available for the MySQL, PostgreSQL, and SQLite databases and utilizes the database's command-line client. Schema dumps may not be restored to in-memory SQLite databases.\n\n<a name=\"migration-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":71,"to":76}}}}],["2363",{"pageContent":"Migration Structure\n\nA migration class contains two methods: `up` and `down`. The `up` method is used to add new tables, columns, or indexes to your database, while the `down` method should reverse the operations performed by the `up` method.\n\nWithin both of these methods, you may use the Laravel schema builder to expressively create and modify tables. To learn about all of the methods available on the `Schema` builder, [check out its documentation](#creating-tables). For example, the following migration creates a `flights` table:\n\n    <?php\n\n    use Illuminate\\Database\\Migrations\\Migration;\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":77,"to":87}}}}],["2364",{"pageContent":"<?php\n\n    use Illuminate\\Database\\Migrations\\Migration;\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    return new class extends Migration\n    {\n        /**\n         * Run the migrations.\n         */\n        public function up(): void\n        {\n            Schema::create('flights', function (Blueprint $table) {\n                $table->id();\n                $table->string('name');\n                $table->string('airline');\n                $table->timestamps();\n            });\n        }\n\n        /**\n         * Reverse the migrations.\n         */\n        public function down(): void\n        {\n            Schema::drop('flights');\n        }\n    };\n\n<a name=\"setting-the-migration-connection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":87,"to":117}}}}],["2365",{"pageContent":"Setting The Migration Connection\n\nIf your migration will be interacting with a database connection other than your application's default database connection, you should set the `$connection` property of your migration:\n\n    /**\n     * The database connection that should be used by the migration.\n     *\n     * @var string\n     */\n    protected $connection = 'pgsql';\n\n    /**\n     * Run the migrations.\n     */\n    public function up(): void\n    {\n        // ...\n    }\n\n<a name=\"running-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":118,"to":137}}}}],["2366",{"pageContent":"Running Migrations\n\nTo run all of your outstanding migrations, execute the `migrate` Artisan command:\n\n```shell\nphp artisan migrate\n```\n\nIf you would like to see which migrations have run thus far, you may use the `migrate:status` Artisan command:\n\n```shell\nphp artisan migrate:status\n```\n\nIf you would like to see the SQL statements that will be executed by the migrations without actually running them, you may provide the `--pretend` flag to the `migrate` command:\n\n```shell\nphp artisan migrate --pretend\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":138,"to":156}}}}],["2367",{"pageContent":"Isolating Migration Execution\n\nIf you are deploying your application across multiple servers and running migrations as part of your deployment process, you likely do not want two servers attempting to migrate the database at the same time. To avoid this, you may use the `isolated` option when invoking the `migrate` command.\n\nWhen the `isolated` option is provided, Laravel will acquire an atomic lock using your application's cache driver before attempting to run your migrations. All other attempts to run the `migrate` command while that lock is held will not execute; however, the command will still exit with a successful exit status code:\n\n```shell\nphp artisan migrate --isolated","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":158,"to":165}}}}],["2368",{"pageContent":"> **Warning**\n> To utilize this feature, your application must be using the `memcached`, `redis`, `dynamodb`, `database`, `file`, or `array` cache driver as your application's default cache driver. In addition, all servers must be communicating with the same central cache server.\n\n<a name=\"forcing-migrations-to-run-in-production\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":168,"to":171}}}}],["2369",{"pageContent":"Forcing Migrations To Run In Production\n\nSome migration operations are destructive, which means they may cause you to lose data. In order to protect you from running these commands against your production database, you will be prompted for confirmation before the commands are executed. To force the commands to run without a prompt, use the `--force` flag:\n\n```shell\nphp artisan migrate --force\n```\n\n<a name=\"rolling-back-migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":172,"to":180}}}}],["2370",{"pageContent":"Rolling Back Migrations\n\nTo roll back the latest migration operation, you may use the `rollback` Artisan command. This command rolls back the last \"batch\" of migrations, which may include multiple migration files:\n\n```shell\nphp artisan migrate:rollback\n```\n\nYou may roll back a limited number of migrations by providing the `step` option to the `rollback` command. For example, the following command will roll back the last five migrations:\n\n```shell\nphp artisan migrate:rollback --step=5\n```\n\nYou may roll back a specific \"batch\" of migrations by providing the `batch` option to the `rollback` command, where the `batch` option corresponds to a batch value within your application's `migrations` database table. For example, the following command will roll back all migrations in batch three:\n\n ```shell\n php artisan migrate:rollback --batch=3","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":181,"to":198}}}}],["2371",{"pageContent":"If you would like to see the SQL statements that will be executed by the migrations without actually running them, you may provide the `--pretend` flag to the `migrate:rollback` command:\n\n```shell\nphp artisan migrate:rollback --pretend\n```\n\nThe `migrate:reset` command will roll back all of your application's migrations:\n\n```shell\nphp artisan migrate:reset\n```\n\n<a name=\"roll-back-migrate-using-a-single-command\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":201,"to":213}}}}],["2372",{"pageContent":"Roll Back & Migrate Using A Single Command\n\nThe `migrate:refresh` command will roll back all of your migrations and then execute the `migrate` command. This command effectively re-creates your entire database:\n\n```shell\nphp artisan migrate:refresh\n\n# Refresh the database and run all database seeds...\nphp artisan migrate:refresh --seed\n```\n\nYou may roll back and re-migrate a limited number of migrations by providing the `step` option to the `refresh` command. For example, the following command will roll back and re-migrate the last five migrations:\n\n```shell\nphp artisan migrate:refresh --step=5\n```\n\n<a name=\"drop-all-tables-migrate\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":214,"to":231}}}}],["2373",{"pageContent":"Drop All Tables & Migrate\n\nThe `migrate:fresh` command will drop all tables from the database and then execute the `migrate` command:\n\n```shell\nphp artisan migrate:fresh\n\nphp artisan migrate:fresh --seed\n```\n\n> **Warning**  \n> The `migrate:fresh` command will drop all database tables regardless of their prefix. This command should be used with caution when developing on a database that is shared with other applications.\n\n<a name=\"tables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":232,"to":245}}}}],["2374",{"pageContent":"Tables\n\n<a name=\"creating-tables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":246,"to":248}}}}],["2375",{"pageContent":"Creating Tables\n\nTo create a new database table, use the `create` method on the `Schema` facade. The `create` method accepts two arguments: the first is the name of the table, while the second is a closure which receives a `Blueprint` object that may be used to define the new table:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::create('users', function (Blueprint $table) {\n        $table->id();\n        $table->string('name');\n        $table->string('email');\n        $table->timestamps();\n    });\n\nWhen creating the table, you may use any of the schema builder's [column methods](#creating-columns) to define the table's columns.\n\n<a name=\"checking-for-table-column-existence\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":249,"to":265}}}}],["2376",{"pageContent":"Checking For Table / Column Existence\n\nYou may check for the existence of a table or column using the `hasTable` and `hasColumn` methods:\n\n    if (Schema::hasTable('users')) {\n        // The \"users\" table exists...\n    }\n\n    if (Schema::hasColumn('users', 'email')) {\n        // The \"users\" table exists and has an \"email\" column...\n    }\n\n<a name=\"database-connection-table-options\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":266,"to":278}}}}],["2377",{"pageContent":"Database Connection & Table Options\n\nIf you want to perform a schema operation on a database connection that is not your application's default connection, use the `connection` method:\n\n    Schema::connection('sqlite')->create('users', function (Blueprint $table) {\n        $table->id();\n    });\n\nIn addition, a few other properties and methods may be used to define other aspects of the table's creation. The `engine` property may be used to specify the table's storage engine when using MySQL:\n\n    Schema::create('users', function (Blueprint $table) {\n        $table->engine = 'InnoDB';\n\n        // ...\n    });\n\nThe `charset` and `collation` properties may be used to specify the character set and collation for the created table when using MySQL:\n\n    Schema::create('users', function (Blueprint $table) {\n        $table->charset = 'utf8mb4';\n        $table->collation = 'utf8mb4_unicode_ci';\n\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":279,"to":302}}}}],["2378",{"pageContent":"Schema::create('users', function (Blueprint $table) {\n        $table->charset = 'utf8mb4';\n        $table->collation = 'utf8mb4_unicode_ci';\n\n        // ...\n    });\n\nThe `temporary` method may be used to indicate that the table should be \"temporary\". Temporary tables are only visible to the current connection's database session and are dropped automatically when the connection is closed:\n\n    Schema::create('calculations', function (Blueprint $table) {\n        $table->temporary();\n\n        // ...\n    });\n\nIf you would like to add a \"comment\" to a database table, you may invoke the `comment` method on the table instance. Table comments are currently only supported by MySQL and Postgres:\n\n    Schema::create('calculations', function (Blueprint $table) {\n        $table->comment('Business calculations');\n\n        // ...\n    });\n\n<a name=\"updating-tables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":302,"to":325}}}}],["2379",{"pageContent":"Updating Tables\n\nThe `table` method on the `Schema` facade may be used to update existing tables. Like the `create` method, the `table` method accepts two arguments: the name of the table and a closure that receives a `Blueprint` instance you may use to add columns or indexes to the table:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->integer('votes');\n    });\n\n<a name=\"renaming-and-dropping-tables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":326,"to":337}}}}],["2380",{"pageContent":"Renaming / Dropping Tables\n\nTo rename an existing database table, use the `rename` method:\n\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::rename($from, $to);\n\nTo drop an existing table, you may use the `drop` or `dropIfExists` methods:\n\n    Schema::drop('users');\n\n    Schema::dropIfExists('users');\n\n<a name=\"renaming-tables-with-foreign-keys\"></a>\n#### Renaming Tables With Foreign Keys\n\nBefore renaming a table, you should verify that any foreign key constraints on the table have an explicit name in your migration files instead of letting Laravel assign a convention based name. Otherwise, the foreign key constraint name will refer to the old table name.\n\n<a name=\"columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":338,"to":357}}}}],["2381",{"pageContent":"Columns\n\n<a name=\"creating-columns\"></a>\n### Creating Columns\n\nThe `table` method on the `Schema` facade may be used to update existing tables. Like the `create` method, the `table` method accepts two arguments: the name of the table and a closure that receives an `Illuminate\\Database\\Schema\\Blueprint` instance you may use to add columns to the table:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->integer('votes');\n    });\n\n<a name=\"available-column-types\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":358,"to":372}}}}],["2382",{"pageContent":"Available Column Types\n\nThe schema builder blueprint offers a variety of methods that correspond to the different types of columns you can add to your database tables. Each of the available methods are listed in the table below:\n\n<style>\n    .collection-method-list > p {\n        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n\n    .collection-method code {\n        font-size: 14px;\n    }\n\n    .collection-method:not(.first-collection-method) {\n        margin-top: 50px;\n    }\n</style>\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":373,"to":398}}}}],["2383",{"pageContent":"[bigIncrements](#column-method-bigIncrements)\n[bigInteger](#column-method-bigInteger)\n[binary](#column-method-binary)\n[boolean](#column-method-boolean)\n[char](#column-method-char)\n[dateTimeTz](#column-method-dateTimeTz)\n[dateTime](#column-method-dateTime)\n[date](#column-method-date)\n[decimal](#column-method-decimal)\n[double](#column-method-double)\n[enum](#column-method-enum)\n[float](#column-method-float)\n[foreignId](#column-method-foreignId)\n[foreignIdFor](#column-method-foreignIdFor)\n[foreignUlid](#column-method-foreignUlid)\n[foreignUuid](#column-method-foreignUuid)\n[geometryCollection](#column-method-geometryCollection)\n[geometry](#column-method-geometry)\n[id](#column-method-id)\n[increments](#column-method-increments)\n[integer](#column-method-integer)\n[ipAddress](#column-method-ipAddress)\n[json](#column-method-json)\n[jsonb](#column-method-jsonb)\n[lineString](#column-method-lineString)\n[longText](#column-method-longText)\n[macAddress](#column-method-macAddress)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":400,"to":426}}}}],["2384",{"pageContent":"[json](#column-method-json)\n[jsonb](#column-method-jsonb)\n[lineString](#column-method-lineString)\n[longText](#column-method-longText)\n[macAddress](#column-method-macAddress)\n[mediumIncrements](#column-method-mediumIncrements)\n[mediumInteger](#column-method-mediumInteger)\n[mediumText](#column-method-mediumText)\n[morphs](#column-method-morphs)\n[multiLineString](#column-method-multiLineString)\n[multiPoint](#column-method-multiPoint)\n[multiPolygon](#column-method-multiPolygon)\n[nullableMorphs](#column-method-nullableMorphs)\n[nullableTimestamps](#column-method-nullableTimestamps)\n[nullableUlidMorphs](#column-method-nullableUlidMorphs)\n[nullableUuidMorphs](#column-method-nullableUuidMorphs)\n[point](#column-method-point)\n[polygon](#column-method-polygon)\n[rememberToken](#column-method-rememberToken)\n[set](#column-method-set)\n[smallIncrements](#column-method-smallIncrements)\n[smallInteger](#column-method-smallInteger)\n[softDeletesTz](#column-method-softDeletesTz)\n[softDeletes](#column-method-softDeletes)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":426,"to":449}}}}],["2385",{"pageContent":"[smallIncrements](#column-method-smallIncrements)\n[smallInteger](#column-method-smallInteger)\n[softDeletesTz](#column-method-softDeletesTz)\n[softDeletes](#column-method-softDeletes)\n[string](#column-method-string)\n[text](#column-method-text)\n[timeTz](#column-method-timeTz)\n[time](#column-method-time)\n[timestampTz](#column-method-timestampTz)\n[timestamp](#column-method-timestamp)\n[timestampsTz](#column-method-timestampsTz)\n[timestamps](#column-method-timestamps)\n[tinyIncrements](#column-method-tinyIncrements)\n[tinyInteger](#column-method-tinyInteger)\n[tinyText](#column-method-tinyText)\n[unsignedBigInteger](#column-method-unsignedBigInteger)\n[unsignedDecimal](#column-method-unsignedDecimal)\n[unsignedInteger](#column-method-unsignedInteger)\n[unsignedMediumInteger](#column-method-unsignedMediumInteger)\n[unsignedSmallInteger](#column-method-unsignedSmallInteger)\n[unsignedTinyInteger](#column-method-unsignedTinyInteger)\n[ulidMorphs](#column-method-ulidMorphs)\n[uuidMorphs](#column-method-uuidMorphs)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":449,"to":471}}}}],["2386",{"pageContent":"[unsignedSmallInteger](#column-method-unsignedSmallInteger)\n[unsignedTinyInteger](#column-method-unsignedTinyInteger)\n[ulidMorphs](#column-method-ulidMorphs)\n[uuidMorphs](#column-method-uuidMorphs)\n[ulid](#column-method-ulid)\n[uuid](#column-method-uuid)\n[year](#column-method-year)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":471,"to":477}}}}],["2387",{"pageContent":"</div>\n\n<a name=\"column-method-bigIncrements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":479,"to":481}}}}],["2388",{"pageContent":"`bigIncrements()` {.collection-method .first-collection-method}\n\nThe `bigIncrements` method creates an auto-incrementing `UNSIGNED BIGINT` (primary key) equivalent column:\n\n    $table->bigIncrements('id');\n\n<a name=\"column-method-bigInteger\"></a>\n#### `bigInteger()` {.collection-method}\n\nThe `bigInteger` method creates a `BIGINT` equivalent column:\n\n    $table->bigInteger('votes');\n\n<a name=\"column-method-binary\"></a>\n#### `binary()` {.collection-method}\n\nThe `binary` method creates a `BLOB` equivalent column:\n\n    $table->binary('photo');\n\n<a name=\"column-method-boolean\"></a>\n#### `boolean()` {.collection-method}\n\nThe `boolean` method creates a `BOOLEAN` equivalent column:\n\n    $table->boolean('confirmed');\n\n<a name=\"column-method-char\"></a>\n#### `char()` {.collection-method}\n\nThe `char` method creates a `CHAR` equivalent column with of a given length:\n\n    $table->char('name', 100);\n\n<a name=\"column-method-dateTimeTz\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":482,"to":516}}}}],["2389",{"pageContent":"`char()` {.collection-method}\n\nThe `char` method creates a `CHAR` equivalent column with of a given length:\n\n    $table->char('name', 100);\n\n<a name=\"column-method-dateTimeTz\"></a>\n#### `dateTimeTz()` {.collection-method}\n\nThe `dateTimeTz` method creates a `DATETIME` (with timezone) equivalent column with an optional precision (total digits):\n\n    $table->dateTimeTz('created_at', $precision = 0);\n\n<a name=\"column-method-dateTime\"></a>\n#### `dateTime()` {.collection-method}\n\nThe `dateTime` method creates a `DATETIME` equivalent column with an optional precision (total digits):\n\n    $table->dateTime('created_at', $precision = 0);\n\n<a name=\"column-method-date\"></a>\n#### `date()` {.collection-method}\n\nThe `date` method creates a `DATE` equivalent column:\n\n    $table->date('created_at');\n\n<a name=\"column-method-decimal\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":516,"to":543}}}}],["2390",{"pageContent":"`date()` {.collection-method}\n\nThe `date` method creates a `DATE` equivalent column:\n\n    $table->date('created_at');\n\n<a name=\"column-method-decimal\"></a>\n#### `decimal()` {.collection-method}\n\nThe `decimal` method creates a `DECIMAL` equivalent column with the given precision (total digits) and scale (decimal digits):\n\n    $table->decimal('amount', $precision = 8, $scale = 2);\n\n<a name=\"column-method-double\"></a>\n#### `double()` {.collection-method}\n\nThe `double` method creates a `DOUBLE` equivalent column with the given precision (total digits) and scale (decimal digits):\n\n    $table->double('amount', 8, 2);\n\n<a name=\"column-method-enum\"></a>\n#### `enum()` {.collection-method}\n\nThe `enum` method creates a `ENUM` equivalent column with the given valid values:\n\n    $table->enum('difficulty', ['easy', 'hard']);\n\n<a name=\"column-method-float\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":543,"to":570}}}}],["2391",{"pageContent":"`enum()` {.collection-method}\n\nThe `enum` method creates a `ENUM` equivalent column with the given valid values:\n\n    $table->enum('difficulty', ['easy', 'hard']);\n\n<a name=\"column-method-float\"></a>\n#### `float()` {.collection-method}\n\nThe `float` method creates a `FLOAT` equivalent column with the given precision (total digits) and scale (decimal digits):\n\n    $table->float('amount', 8, 2);\n\n<a name=\"column-method-foreignId\"></a>\n#### `foreignId()` {.collection-method}\n\nThe `foreignId` method creates an `UNSIGNED BIGINT` equivalent column:\n\n    $table->foreignId('user_id');\n\n<a name=\"column-method-foreignIdFor\"></a>\n#### `foreignIdFor()` {.collection-method}\n\nThe `foreignIdFor` method adds a `{column}_id` equivalent column for a given model class. The column type will be `UNSIGNED BIGINT`, `CHAR(36)`, or `CHAR(26)` depending on the model key type:\n\n    $table->foreignIdFor(User::class);\n\n<a name=\"column-method-foreignUlid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":570,"to":597}}}}],["2392",{"pageContent":"`foreignUlid()` {.collection-method}\n\nThe `foreignUlid` method creates a `ULID` equivalent column:\n\n    $table->foreignUlid('user_id');\n\n<a name=\"column-method-foreignUuid\"></a>\n#### `foreignUuid()` {.collection-method}\n\nThe `foreignUuid` method creates a `UUID` equivalent column:\n\n    $table->foreignUuid('user_id');\n\n<a name=\"column-method-geometryCollection\"></a>\n#### `geometryCollection()` {.collection-method}\n\nThe `geometryCollection` method creates a `GEOMETRYCOLLECTION` equivalent column:\n\n    $table->geometryCollection('positions');\n\n<a name=\"column-method-geometry\"></a>\n#### `geometry()` {.collection-method}\n\nThe `geometry` method creates a `GEOMETRY` equivalent column:\n\n    $table->geometry('positions');\n\n<a name=\"column-method-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":598,"to":625}}}}],["2393",{"pageContent":"`geometry()` {.collection-method}\n\nThe `geometry` method creates a `GEOMETRY` equivalent column:\n\n    $table->geometry('positions');\n\n<a name=\"column-method-id\"></a>\n#### `id()` {.collection-method}\n\nThe `id` method is an alias of the `bigIncrements` method. By default, the method will create an `id` column; however, you may pass a column name if you would like to assign a different name to the column:\n\n    $table->id();\n\n<a name=\"column-method-increments\"></a>\n#### `increments()` {.collection-method}\n\nThe `increments` method creates an auto-incrementing `UNSIGNED INTEGER` equivalent column as a primary key:\n\n    $table->increments('id');\n\n<a name=\"column-method-integer\"></a>\n#### `integer()` {.collection-method}\n\nThe `integer` method creates an `INTEGER` equivalent column:\n\n    $table->integer('votes');\n\n<a name=\"column-method-ipAddress\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":625,"to":652}}}}],["2394",{"pageContent":"`integer()` {.collection-method}\n\nThe `integer` method creates an `INTEGER` equivalent column:\n\n    $table->integer('votes');\n\n<a name=\"column-method-ipAddress\"></a>\n#### `ipAddress()` {.collection-method}\n\nThe `ipAddress` method creates a `VARCHAR` equivalent column:\n\n    $table->ipAddress('visitor');\n    \nWhen using Postgres, an `INET` column will be created.\n\n<a name=\"column-method-json\"></a>\n#### `json()` {.collection-method}\n\nThe `json` method creates a `JSON` equivalent column:\n\n    $table->json('options');\n\n<a name=\"column-method-jsonb\"></a>\n#### `jsonb()` {.collection-method}\n\nThe `jsonb` method creates a `JSONB` equivalent column:\n\n    $table->jsonb('options');\n\n<a name=\"column-method-lineString\"></a>\n#### `lineString()` {.collection-method}\n\nThe `lineString` method creates a `LINESTRING` equivalent column:\n\n    $table->lineString('positions');\n\n<a name=\"column-method-longText\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":652,"to":688}}}}],["2395",{"pageContent":"`lineString()` {.collection-method}\n\nThe `lineString` method creates a `LINESTRING` equivalent column:\n\n    $table->lineString('positions');\n\n<a name=\"column-method-longText\"></a>\n#### `longText()` {.collection-method}\n\nThe `longText` method creates a `LONGTEXT` equivalent column:\n\n    $table->longText('description');\n\n<a name=\"column-method-macAddress\"></a>\n#### `macAddress()` {.collection-method}\n\nThe `macAddress` method creates a column that is intended to hold a MAC address. Some database systems, such as PostgreSQL, have a dedicated column type for this type of data. Other database systems will use a string equivalent column:\n\n    $table->macAddress('device');\n\n<a name=\"column-method-mediumIncrements\"></a>\n#### `mediumIncrements()` {.collection-method}\n\nThe `mediumIncrements` method creates an auto-incrementing `UNSIGNED MEDIUMINT` equivalent column as a primary key:\n\n    $table->mediumIncrements('id');\n\n<a name=\"column-method-mediumInteger\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":688,"to":715}}}}],["2396",{"pageContent":"`mediumInteger()` {.collection-method}\n\nThe `mediumInteger` method creates a `MEDIUMINT` equivalent column:\n\n    $table->mediumInteger('votes');\n\n<a name=\"column-method-mediumText\"></a>\n#### `mediumText()` {.collection-method}\n\nThe `mediumText` method creates a `MEDIUMTEXT` equivalent column:\n\n    $table->mediumText('description');\n\n<a name=\"column-method-morphs\"></a>\n#### `morphs()` {.collection-method}\n\nThe `morphs` method is a convenience method that adds a `{column}_id` equivalent column and a `{column}_type` `VARCHAR` equivalent column. The column type for the `{column}_id` will be `UNSIGNED BIGINT`, `CHAR(36)`, or `CHAR(26)` depending on the model key type.\n\nThis method is intended to be used when defining the columns necessary for a polymorphic [Eloquent relationship](/docs/{{version}}/eloquent-relationships). In the following example, `taggable_id` and `taggable_type` columns would be created:\n\n    $table->morphs('taggable');\n\n<a name=\"column-method-multiLineString\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":716,"to":738}}}}],["2397",{"pageContent":"`multiLineString()` {.collection-method}\n\nThe `multiLineString` method creates a `MULTILINESTRING` equivalent column:\n\n    $table->multiLineString('positions');\n\n<a name=\"column-method-multiPoint\"></a>\n#### `multiPoint()` {.collection-method}\n\nThe `multiPoint` method creates a `MULTIPOINT` equivalent column:\n\n    $table->multiPoint('positions');\n\n<a name=\"column-method-multiPolygon\"></a>\n#### `multiPolygon()` {.collection-method}\n\nThe `multiPolygon` method creates a `MULTIPOLYGON` equivalent column:\n\n    $table->multiPolygon('positions');\n\n<a name=\"column-method-nullableTimestamps\"></a>\n#### `nullableTimestamps()` {.collection-method}\n\nThe `nullableTimestamps` method is an alias of the [timestamps](#column-method-timestamps) method:\n\n    $table->nullableTimestamps(0);\n\n<a name=\"column-method-nullableMorphs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":739,"to":766}}}}],["2398",{"pageContent":"`nullableMorphs()` {.collection-method}\n\nThe method is similar to the [morphs](#column-method-morphs) method; however, the columns that are created will be \"nullable\":\n\n    $table->nullableMorphs('taggable');\n\n<a name=\"column-method-nullableUlidMorphs\"></a>\n#### `nullableUlidMorphs()` {.collection-method}\n\nThe method is similar to the [ulidMorphs](#column-method-ulidMorphs) method; however, the columns that are created will be \"nullable\":\n\n    $table->nullableUlidMorphs('taggable');\n\n<a name=\"column-method-nullableUuidMorphs\"></a>\n#### `nullableUuidMorphs()` {.collection-method}\n\nThe method is similar to the [uuidMorphs](#column-method-uuidMorphs) method; however, the columns that are created will be \"nullable\":\n\n    $table->nullableUuidMorphs('taggable');\n\n<a name=\"column-method-point\"></a>\n#### `point()` {.collection-method}\n\nThe `point` method creates a `POINT` equivalent column:\n\n    $table->point('position');\n\n<a name=\"column-method-polygon\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":767,"to":794}}}}],["2399",{"pageContent":"`point()` {.collection-method}\n\nThe `point` method creates a `POINT` equivalent column:\n\n    $table->point('position');\n\n<a name=\"column-method-polygon\"></a>\n#### `polygon()` {.collection-method}\n\nThe `polygon` method creates a `POLYGON` equivalent column:\n\n    $table->polygon('position');\n\n<a name=\"column-method-rememberToken\"></a>\n#### `rememberToken()` {.collection-method}\n\nThe `rememberToken` method creates a nullable, `VARCHAR(100)` equivalent column that is intended to store the current \"remember me\" [authentication token](/docs/{{version}}/authentication#remembering-users):\n\n    $table->rememberToken();\n\n<a name=\"column-method-set\"></a>\n#### `set()` {.collection-method}\n\nThe `set` method creates a `SET` equivalent column with the given list of valid values:\n\n    $table->set('flavors', ['strawberry', 'vanilla']);\n\n<a name=\"column-method-smallIncrements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":794,"to":821}}}}],["2400",{"pageContent":"`smallIncrements()` {.collection-method}\n\nThe `smallIncrements` method creates an auto-incrementing `UNSIGNED SMALLINT` equivalent column as a primary key:\n\n    $table->smallIncrements('id');\n\n<a name=\"column-method-smallInteger\"></a>\n#### `smallInteger()` {.collection-method}\n\nThe `smallInteger` method creates a `SMALLINT` equivalent column:\n\n    $table->smallInteger('votes');\n\n<a name=\"column-method-softDeletesTz\"></a>\n#### `softDeletesTz()` {.collection-method}\n\nThe `softDeletesTz` method adds a nullable `deleted_at` `TIMESTAMP` (with timezone) equivalent column with an optional precision (total digits). This column is intended to store the `deleted_at` timestamp needed for Eloquent's \"soft delete\" functionality:\n\n    $table->softDeletesTz($column = 'deleted_at', $precision = 0);\n\n<a name=\"column-method-softDeletes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":822,"to":842}}}}],["2401",{"pageContent":"`softDeletes()` {.collection-method}\n\nThe `softDeletes` method adds a nullable `deleted_at` `TIMESTAMP` equivalent column with an optional precision (total digits). This column is intended to store the `deleted_at` timestamp needed for Eloquent's \"soft delete\" functionality:\n\n    $table->softDeletes($column = 'deleted_at', $precision = 0);\n\n<a name=\"column-method-string\"></a>\n#### `string()` {.collection-method}\n\nThe `string` method creates a `VARCHAR` equivalent column of the given length:\n\n    $table->string('name', 100);\n\n<a name=\"column-method-text\"></a>\n#### `text()` {.collection-method}\n\nThe `text` method creates a `TEXT` equivalent column:\n\n    $table->text('description');\n\n<a name=\"column-method-timeTz\"></a>\n#### `timeTz()` {.collection-method}\n\nThe `timeTz` method creates a `TIME` (with timezone) equivalent column with an optional precision (total digits):\n\n    $table->timeTz('sunrise', $precision = 0);\n\n<a name=\"column-method-time\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":843,"to":870}}}}],["2402",{"pageContent":"`time()` {.collection-method}\n\nThe `time` method creates a `TIME` equivalent column with an optional precision (total digits):\n\n    $table->time('sunrise', $precision = 0);\n\n<a name=\"column-method-timestampTz\"></a>\n#### `timestampTz()` {.collection-method}\n\nThe `timestampTz` method creates a `TIMESTAMP` (with timezone) equivalent column with an optional precision (total digits):\n\n    $table->timestampTz('added_at', $precision = 0);\n\n<a name=\"column-method-timestamp\"></a>\n#### `timestamp()` {.collection-method}\n\nThe `timestamp` method creates a `TIMESTAMP` equivalent column with an optional precision (total digits):\n\n    $table->timestamp('added_at', $precision = 0);\n\n<a name=\"column-method-timestampsTz\"></a>\n#### `timestampsTz()` {.collection-method}\n\nThe `timestampsTz` method creates `created_at` and `updated_at` `TIMESTAMP` (with timezone) equivalent columns with an optional precision (total digits):\n\n    $table->timestampsTz($precision = 0);\n\n<a name=\"column-method-timestamps\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":871,"to":898}}}}],["2403",{"pageContent":"`timestamps()` {.collection-method}\n\nThe `timestamps` method creates `created_at` and `updated_at` `TIMESTAMP` equivalent columns with an optional precision (total digits):\n\n    $table->timestamps($precision = 0);\n\n<a name=\"column-method-tinyIncrements\"></a>\n#### `tinyIncrements()` {.collection-method}\n\nThe `tinyIncrements` method creates an auto-incrementing `UNSIGNED TINYINT` equivalent column as a primary key:\n\n    $table->tinyIncrements('id');\n\n<a name=\"column-method-tinyInteger\"></a>\n#### `tinyInteger()` {.collection-method}\n\nThe `tinyInteger` method creates a `TINYINT` equivalent column:\n\n    $table->tinyInteger('votes');\n\n<a name=\"column-method-tinyText\"></a>\n#### `tinyText()` {.collection-method}\n\nThe `tinyText` method creates a `TINYTEXT` equivalent column:\n\n    $table->tinyText('notes');\n\n<a name=\"column-method-unsignedBigInteger\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":899,"to":926}}}}],["2404",{"pageContent":"`tinyText()` {.collection-method}\n\nThe `tinyText` method creates a `TINYTEXT` equivalent column:\n\n    $table->tinyText('notes');\n\n<a name=\"column-method-unsignedBigInteger\"></a>\n#### `unsignedBigInteger()` {.collection-method}\n\nThe `unsignedBigInteger` method creates an `UNSIGNED BIGINT` equivalent column:\n\n    $table->unsignedBigInteger('votes');\n\n<a name=\"column-method-unsignedDecimal\"></a>\n#### `unsignedDecimal()` {.collection-method}\n\nThe `unsignedDecimal` method creates an `UNSIGNED DECIMAL` equivalent column with an optional precision (total digits) and scale (decimal digits):\n\n    $table->unsignedDecimal('amount', $precision = 8, $scale = 2);\n\n<a name=\"column-method-unsignedInteger\"></a>\n#### `unsignedInteger()` {.collection-method}\n\nThe `unsignedInteger` method creates an `UNSIGNED INTEGER` equivalent column:\n\n    $table->unsignedInteger('votes');\n\n<a name=\"column-method-unsignedMediumInteger\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":926,"to":953}}}}],["2405",{"pageContent":"`unsignedMediumInteger()` {.collection-method}\n\nThe `unsignedMediumInteger` method creates an `UNSIGNED MEDIUMINT` equivalent column:\n\n    $table->unsignedMediumInteger('votes');\n\n<a name=\"column-method-unsignedSmallInteger\"></a>\n#### `unsignedSmallInteger()` {.collection-method}\n\nThe `unsignedSmallInteger` method creates an `UNSIGNED SMALLINT` equivalent column:\n\n    $table->unsignedSmallInteger('votes');\n\n<a name=\"column-method-unsignedTinyInteger\"></a>\n#### `unsignedTinyInteger()` {.collection-method}\n\nThe `unsignedTinyInteger` method creates an `UNSIGNED TINYINT` equivalent column:\n\n    $table->unsignedTinyInteger('votes');\n\n<a name=\"column-method-ulidMorphs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":954,"to":974}}}}],["2406",{"pageContent":"`ulidMorphs()` {.collection-method}\n\nThe `ulidMorphs` method is a convenience method that adds a `{column}_id` `CHAR(26)` equivalent column and a `{column}_type` `VARCHAR` equivalent column.\n\nThis method is intended to be used when defining the columns necessary for a polymorphic [Eloquent relationship](/docs/{{version}}/eloquent-relationships) that use ULID identifiers. In the following example, `taggable_id` and `taggable_type` columns would be created:\n\n    $table->ulidMorphs('taggable');\n\n<a name=\"column-method-uuidMorphs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":975,"to":983}}}}],["2407",{"pageContent":"`uuidMorphs()` {.collection-method}\n\nThe `uuidMorphs` method is a convenience method that adds a `{column}_id` `CHAR(36)` equivalent column and a `{column}_type` `VARCHAR` equivalent column.\n\nThis method is intended to be used when defining the columns necessary for a polymorphic [Eloquent relationship](/docs/{{version}}/eloquent-relationships) that use UUID identifiers. In the following example, `taggable_id` and `taggable_type` columns would be created:\n\n    $table->uuidMorphs('taggable');\n\n<a name=\"column-method-ulid\"></a>\n#### `ulid()` {.collection-method}\n\nThe `ulid` method creates a `ULID` equivalent column:\n\n    $table->ulid('id');\n\n<a name=\"column-method-uuid\"></a>\n#### `uuid()` {.collection-method}\n\nThe `uuid` method creates a `UUID` equivalent column:\n\n    $table->uuid('id');\n\n<a name=\"column-method-year\"></a>\n#### `year()` {.collection-method}\n\nThe `year` method creates a `YEAR` equivalent column:\n\n    $table->year('birth_year');\n\n<a name=\"column-modifiers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":984,"to":1013}}}}],["2408",{"pageContent":"Column Modifiers\n\nIn addition to the column types listed above, there are several column \"modifiers\" you may use when adding a column to a database table. For example, to make the column \"nullable\", you may use the `nullable` method:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->string('email')->nullable();\n    });\n\nThe following table contains all of the available column modifiers. This list does not include [index modifiers](#creating-indexes):","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1014,"to":1025}}}}],["2409",{"pageContent":"Modifier  |  Description\n--------  |  -----------\n`->after('column')`  |  Place the column \"after\" another column (MySQL).\n`->autoIncrement()`  |  Set INTEGER columns as auto-incrementing (primary key).\n`->charset('utf8mb4')`  |  Specify a character set for the column (MySQL).\n`->collation('utf8mb4_unicode_ci')`  |  Specify a collation for the column (MySQL/PostgreSQL/SQL Server).\n`->comment('my comment')`  |  Add a comment to a column (MySQL/PostgreSQL).\n`->default($value)`  |  Specify a \"default\" value for the column.\n`->first()`  |  Place the column \"first\" in the table (MySQL).\n`->from($integer)`  |  Set the starting value of an auto-incrementing field (MySQL / PostgreSQL).\n`->invisible()`  |  Make the column \"invisible\" to `SELECT *` queries (MySQL).\n`->nullable($value = true)`  |  Allow NULL values to be inserted into the column.\n`->storedAs($expression)`  |  Create a stored generated column (MySQL / PostgreSQL).\n`->unsigned()`  |  Set INTEGER columns as UNSIGNED (MySQL).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1027,"to":1040}}}}],["2410",{"pageContent":"`->storedAs($expression)`  |  Create a stored generated column (MySQL / PostgreSQL).\n`->unsigned()`  |  Set INTEGER columns as UNSIGNED (MySQL).\n`->useCurrent()`  |  Set TIMESTAMP columns to use CURRENT_TIMESTAMP as default value.\n`->useCurrentOnUpdate()`  |  Set TIMESTAMP columns to use CURRENT_TIMESTAMP when a record is updated (MySQL).\n`->virtualAs($expression)`  |  Create a virtual generated column (MySQL / PostgreSQL / SQLite).\n`->generatedAs($expression)`  |  Create an identity column with specified sequence options (PostgreSQL).\n`->always()`  |  Defines the precedence of sequence values over input for an identity column (PostgreSQL).\n`->isGeometry()`  |  Set spatial column type to `geometry` - the default type is `geography` (PostgreSQL).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1040,"to":1047}}}}],["2411",{"pageContent":"<a name=\"default-expressions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1049,"to":1049}}}}],["2412",{"pageContent":"Default Expressions\n\nThe `default` modifier accepts a value or an `Illuminate\\Database\\Query\\Expression` instance. Using an `Expression` instance will prevent Laravel from wrapping the value in quotes and allow you to use database specific functions. One situation where this is particularly useful is when you need to assign default values to JSON columns:\n\n    <?php\n\n    use Illuminate\\Support\\Facades\\Schema;\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Database\\Query\\Expression;\n    use Illuminate\\Database\\Migrations\\Migration;\n\n    return new class extends Migration\n    {\n        /**\n         * Run the migrations.\n         */\n        public function up(): void\n        {\n            Schema::create('flights', function (Blueprint $table) {\n                $table->id();\n                $table->json('movies')->default(new Expression('(JSON_ARRAY())'));\n                $table->timestamps();\n            });\n        }\n    };","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1050,"to":1074}}}}],["2413",{"pageContent":"> **Warning**  \n> Support for default expressions depends on your database driver, database version, and the field type. Please refer to your database's documentation.\n\n<a name=\"column-order\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1076,"to":1079}}}}],["2414",{"pageContent":"Column Order\n\nWhen using the MySQL database, the `after` method may be used to add columns after an existing column in the schema:\n\n    $table->after('password', function (Blueprint $table) {\n        $table->string('address_line1');\n        $table->string('address_line2');\n        $table->string('city');\n    });\n\n<a name=\"modifying-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1080,"to":1090}}}}],["2415",{"pageContent":"Modifying Columns\n\nThe `change` method allows you to modify the type and attributes of existing columns. For example, you may wish to increase the size of a `string` column. To see the `change` method in action, let's increase the size of the `name` column from 25 to 50. To accomplish this, we simply define the new state of the column and then call the `change` method:\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->string('name', 50)->change();\n    });\n\nWhen modifying a column, you must explicitly include all of the modifiers you want to keep on the column definition - any missing attribute will be dropped. For example, to retain the `unsigned`, `default`, and `comment` attributes, you must call each modifier explicitly when changing the column:\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->integer('votes')->unsigned()->default(1)->comment('my comment')->change();\n    });\n\n<a name=\"modifying-columns-on-sqlite\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1091,"to":1105}}}}],["2416",{"pageContent":"Modifying Columns On SQLite\n\nIf your application is utilizing an SQLite database, you must install the `doctrine/dbal` package using the Composer package manager before modifying a column. The Doctrine DBAL library is used to determine the current state of the column and to create the SQL queries needed to make the requested changes to your column:\n\n    composer require doctrine/dbal\n\nIf you plan to modify columns created using the `timestamp` method, you must also add the following configuration to your application's `config/database.php` configuration file:\n\n```php\nuse Illuminate\\Database\\DBAL\\TimestampType;\n\n'dbal' => [\n    'types' => [\n        'timestamp' => TimestampType::class,\n    ],\n],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1106,"to":1121}}}}],["2417",{"pageContent":"> **Warning**  \n> When using the `doctrine/dbal` package, the following column types can be modified: `bigInteger`, `binary`, `boolean`, `char`, `date`, `dateTime`, `dateTimeTz`, `decimal`, `double`, `integer`, `json`, `longText`, `mediumText`, `smallInteger`, `string`, `text`, `time`, `tinyText`, `unsignedBigInteger`, `unsignedInteger`, `unsignedSmallInteger`, `ulid`, and `uuid`.\n\n<a name=\"renaming-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1124,"to":1127}}}}],["2418",{"pageContent":"Renaming Columns\n\nTo rename a column, you may use the `renameColumn` method provided by the schema builder:\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->renameColumn('from', 'to');\n    });\n\n<a name=\"renaming-columns-on-legacy-databases\"></a>\n#### Renaming Columns On Legacy Databases\n\nIf you are running a database installation older than one of the following releases, you should ensure that you have installed the `doctrine/dbal` library via the Composer package manager before renaming a column:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- MySQL < `8.0.3`\n- MariaDB < `10.5.2`\n- SQLite < `3.25.0`\n\n</div>\n\n<a name=\"dropping-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1128,"to":1149}}}}],["2419",{"pageContent":"Dropping Columns\n\nTo drop a column, you may use the `dropColumn` method on the schema builder:\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->dropColumn('votes');\n    });\n\nYou may drop multiple columns from a table by passing an array of column names to the `dropColumn` method:\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->dropColumn(['votes', 'avatar', 'location']);\n    });\n\n<a name=\"dropping-columns-on-legacy-databases\"></a>\n#### Dropping Columns On Legacy Databases\n\nIf you are running a version of SQLite prior to `3.35.0`, you must install the `doctrine/dbal` package via the Composer package manager before the `dropColumn` method may be used. Dropping or modifying multiple columns within a single migration while using this package is not supported.\n\n<a name=\"available-command-aliases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1150,"to":1169}}}}],["2420",{"pageContent":"Available Command Aliases\n\nLaravel provides several convenient methods related to dropping common types of columns. Each of these methods is described in the table below:\n\nCommand  |  Description\n-------  |  -----------\n`$table->dropMorphs('morphable');`  |  Drop the `morphable_id` and `morphable_type` columns.\n`$table->dropRememberToken();`  |  Drop the `remember_token` column.\n`$table->dropSoftDeletes();`  |  Drop the `deleted_at` column.\n`$table->dropSoftDeletesTz();`  |  Alias of `dropSoftDeletes()` method.\n`$table->dropTimestamps();`  |  Drop the `created_at` and `updated_at` columns.\n`$table->dropTimestampsTz();` |  Alias of `dropTimestamps()` method.\n\n<a name=\"indexes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1170,"to":1183}}}}],["2421",{"pageContent":"Indexes\n\n<a name=\"creating-indexes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1184,"to":1186}}}}],["2422",{"pageContent":"Creating Indexes\n\nThe Laravel schema builder supports several types of indexes. The following example creates a new `email` column and specifies that its values should be unique. To create the index, we can chain the `unique` method onto the column definition:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::table('users', function (Blueprint $table) {\n        $table->string('email')->unique();\n    });\n\nAlternatively, you may create the index after defining the column. To do so, you should call the `unique` method on the schema builder blueprint. This method accepts the name of the column that should receive a unique index:\n\n    $table->unique('email');\n\nYou may even pass an array of columns to an index method to create a compound (or composite) index:\n\n    $table->index(['account_id', 'created_at']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1187,"to":1204}}}}],["2423",{"pageContent":"$table->unique('email');\n\nYou may even pass an array of columns to an index method to create a compound (or composite) index:\n\n    $table->index(['account_id', 'created_at']);\n\nWhen creating an index, Laravel will automatically generate an index name based on the table, column names, and the index type, but you may pass a second argument to the method to specify the index name yourself:\n\n    $table->unique('email', 'unique_email');\n\n<a name=\"available-index-types\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1204,"to":1214}}}}],["2424",{"pageContent":"Available Index Types\n\nLaravel's schema builder blueprint class provides methods for creating each type of index supported by Laravel. Each index method accepts an optional second argument to specify the name of the index. If omitted, the name will be derived from the names of the table and column(s) used for the index, as well as the index type. Each of the available index methods is described in the table below:\n\nCommand  |  Description\n-------  |  -----------\n`$table->primary('id');`  |  Adds a primary key.\n`$table->primary(['id', 'parent_id']);`  |  Adds composite keys.\n`$table->unique('email');`  |  Adds a unique index.\n`$table->index('state');`  |  Adds an index.\n`$table->fullText('body');`  |  Adds a full text index (MySQL/PostgreSQL).\n`$table->fullText('body')->language('english');`  |  Adds a full text index of the specified language (PostgreSQL).\n`$table->spatialIndex('location');`  |  Adds a spatial index (except SQLite).\n\n<a name=\"index-lengths-mysql-mariadb\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1215,"to":1229}}}}],["2425",{"pageContent":"Index Lengths & MySQL / MariaDB\n\nBy default, Laravel uses the `utf8mb4` character set. If you are running a version of MySQL older than the 5.7.7 release or MariaDB older than the 10.2.2 release, you may need to manually configure the default string length generated by migrations in order for MySQL to create indexes for them. You may configure the default string length by calling the `Schema::defaultStringLength` method within the `boot` method of your `App\\Providers\\AppServiceProvider` class:\n\n    use Illuminate\\Support\\Facades\\Schema;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Schema::defaultStringLength(191);\n    }\n\nAlternatively, you may enable the `innodb_large_prefix` option for your database. Refer to your database's documentation for instructions on how to properly enable this option.\n\n<a name=\"renaming-indexes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1230,"to":1246}}}}],["2426",{"pageContent":"Renaming Indexes\n\nTo rename an index, you may use the `renameIndex` method provided by the schema builder blueprint. This method accepts the current index name as its first argument and the desired name as its second argument:\n\n    $table->renameIndex('from', 'to')\n\n> **Warning**  \n> If your application is utilizing an SQLite database, you must install the `doctrine/dbal` package via the Composer package manager before the `renameIndex` method may be used.\n\n<a name=\"dropping-indexes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1247,"to":1256}}}}],["2427",{"pageContent":"Dropping Indexes\n\nTo drop an index, you must specify the index's name. By default, Laravel automatically assigns an index name based on the table name, the name of the indexed column, and the index type. Here are some examples:\n\nCommand  |  Description\n-------  |  -----------\n`$table->dropPrimary('users_id_primary');`  |  Drop a primary key from the \"users\" table.\n`$table->dropUnique('users_email_unique');`  |  Drop a unique index from the \"users\" table.\n`$table->dropIndex('geo_state_index');`  |  Drop a basic index from the \"geo\" table.\n`$table->dropFullText('posts_body_fulltext');`  |  Drop a full text index from the \"posts\" table.\n`$table->dropSpatialIndex('geo_location_spatialindex');`  |  Drop a spatial index from the \"geo\" table  (except SQLite).\n\nIf you pass an array of columns into a method that drops indexes, the conventional index name will be generated based on the table name, columns, and index type:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1257,"to":1269}}}}],["2428",{"pageContent":"If you pass an array of columns into a method that drops indexes, the conventional index name will be generated based on the table name, columns, and index type:\n\n    Schema::table('geo', function (Blueprint $table) {\n        $table->dropIndex(['state']); // Drops index 'geo_state_index'\n    });\n\n<a name=\"foreign-key-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1269,"to":1275}}}}],["2429",{"pageContent":"Foreign Key Constraints\n\nLaravel also provides support for creating foreign key constraints, which are used to force referential integrity at the database level. For example, let's define a `user_id` column on the `posts` table that references the `id` column on a `users` table:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::table('posts', function (Blueprint $table) {\n        $table->unsignedBigInteger('user_id');\n\n        $table->foreign('user_id')->references('id')->on('users');\n    });\n\nSince this syntax is rather verbose, Laravel provides additional, terser methods that use conventions to provide a better developer experience. When using the `foreignId` method to create your column, the example above can be rewritten like so:\n\n    Schema::table('posts', function (Blueprint $table) {\n        $table->foreignId('user_id')->constrained();\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1276,"to":1293}}}}],["2430",{"pageContent":"Schema::table('posts', function (Blueprint $table) {\n        $table->foreignId('user_id')->constrained();\n    });\n\nThe `foreignId` method creates an `UNSIGNED BIGINT` equivalent column, while the `constrained` method will use conventions to determine the table and column being referenced. If your table name does not match Laravel's conventions, you may manually provide it to the `constrained` method. In addition, the name that should be assigned to the generated index may be specified as well:\n\n    Schema::table('posts', function (Blueprint $table) {\n        $table->foreignId('user_id')->constrained(\n            table: 'users', indexName: 'posts_user_id'\n        );\n    });\n\nYou may also specify the desired action for the \"on delete\" and \"on update\" properties of the constraint:\n\n    $table->foreignId('user_id')\n          ->constrained()\n          ->onUpdate('cascade')\n          ->onDelete('cascade');\n\nAn alternative, expressive syntax is also provided for these actions:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1293,"to":1312}}}}],["2431",{"pageContent":"$table->foreignId('user_id')\n          ->constrained()\n          ->onUpdate('cascade')\n          ->onDelete('cascade');\n\nAn alternative, expressive syntax is also provided for these actions:\n\nMethod  |  Description\n-------  |  -----------\n`$table->cascadeOnUpdate();` | Updates should cascade.\n`$table->restrictOnUpdate();`| Updates should be restricted.\n`$table->cascadeOnDelete();` | Deletes should cascade.\n`$table->restrictOnDelete();`| Deletes should be restricted.\n`$table->nullOnDelete();`    | Deletes should set the foreign key value to null.\n\nAny additional [column modifiers](#column-modifiers) must be called before the `constrained` method:\n\n    $table->foreignId('user_id')\n          ->nullable()\n          ->constrained();\n\n<a name=\"dropping-foreign-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1312,"to":1333}}}}],["2432",{"pageContent":"Dropping Foreign Keys\n\nTo drop a foreign key, you may use the `dropForeign` method, passing the name of the foreign key constraint to be deleted as an argument. Foreign key constraints use the same naming convention as indexes. In other words, the foreign key constraint name is based on the name of the table and the columns in the constraint, followed by a \"\\_foreign\" suffix:\n\n    $table->dropForeign('posts_user_id_foreign');\n\nAlternatively, you may pass an array containing the column name that holds the foreign key to the `dropForeign` method. The array will be converted to a foreign key constraint name using Laravel's constraint naming conventions:\n\n    $table->dropForeign(['user_id']);\n\n<a name=\"toggling-foreign-key-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1334,"to":1344}}}}],["2433",{"pageContent":"Toggling Foreign Key Constraints\n\nYou may enable or disable foreign key constraints within your migrations by using the following methods:\n\n    Schema::enableForeignKeyConstraints();\n\n    Schema::disableForeignKeyConstraints();\n\n    Schema::withoutForeignKeyConstraints(function () {\n        // Constraints disabled within this closure...\n    });\n\n> **Warning**  \n> SQLite disables foreign key constraints by default. When using SQLite, make sure to [enable foreign key support](/docs/{{version}}/database#configuration) in your database configuration before attempting to create them in your migrations. In addition, SQLite only supports foreign keys upon creation of the table and [not when tables are altered](https://www.sqlite.org/omitted.html).\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1345,"to":1360}}}}],["2434",{"pageContent":"Events\n\nFor convenience, each migration operation will dispatch an [event](/docs/{{version}}/events). All of the following events extend the base `Illuminate\\Database\\Events\\MigrationEvent` class:\n\n Class | Description\n-------|-------\n| `Illuminate\\Database\\Events\\MigrationsStarted` | A batch of migrations is about to be executed. |\n| `Illuminate\\Database\\Events\\MigrationsEnded` | A batch of migrations has finished executing. |\n| `Illuminate\\Database\\Events\\MigrationStarted` | A single migration is about to be executed. |\n| `Illuminate\\Database\\Events\\MigrationEnded` | A single migration has finished executing. |\n| `Illuminate\\Database\\Events\\SchemaDumped` | A database schema dump has completed. |\n| `Illuminate\\Database\\Events\\SchemaLoaded` | An existing database schema dump has loaded. |","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/migrations.md","loc":{"lines":{"from":1361,"to":1372}}}}],["2435",{"pageContent":"# Laravel Mix\n\n- [Introduction](#introduction)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mix.md","loc":{"lines":{"from":1,"to":5}}}}],["2436",{"pageContent":"Introduction\n\n[Laravel Mix](https://github.com/laravel-mix/laravel-mix), a package developed by [Laracasts](https://laracasts.com) creator Jeffrey Way, provides a fluent API for defining [webpack](https://webpack.js.org) build steps for your Laravel application using several common CSS and JavaScript pre-processors.\n\nIn other words, Mix makes it a cinch to compile and minify your application's CSS and JavaScript files. Through simple method chaining, you can fluently define your asset pipeline. For example:\n\n```js\nmix.js('resources/js/app.js', 'public/js')\n    .postCss('resources/css/app.css', 'public/css');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mix.md","loc":{"lines":{"from":6,"to":14}}}}],["2437",{"pageContent":"If you've ever been confused and overwhelmed about getting started with webpack and asset compilation, you will love Laravel Mix. However, you are not required to use it while developing your application; you are free to use any asset pipeline tool you wish, or even none at all.\n\n> **Note**  \n> Vite has replaced Laravel Mix in new Laravel installations. For Mix documentation, please visit the [official Laravel Mix](https://laravel-mix.com/) website. If you would like to switch to Vite, please see our [Vite migration guide](https://github.com/laravel/vite-plugin/blob/main/UPGRADE.md#migrating-from-laravel-mix-to-vite).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mix.md","loc":{"lines":{"from":17,"to":20}}}}],["2438",{"pageContent":"# Mocking\n\n- [Introduction](#introduction)\n- [Mocking Objects](#mocking-objects)\n- [Mocking Facades](#mocking-facades)\n    - [Facade Spies](#facade-spies)\n- [Interacting With Time](#interacting-with-time)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nWhen testing Laravel applications, you may wish to \"mock\" certain aspects of your application so they are not actually executed during a given test. For example, when testing a controller that dispatches an event, you may wish to mock the event listeners so they are not actually executed during the test. This allows you to only test the controller's HTTP response without worrying about the execution of the event listeners since the event listeners can be tested in their own test case.\n\nLaravel provides helpful methods for mocking events, jobs, and other facades out of the box. These helpers primarily provide a convenience layer over Mockery so you do not have to manually make complicated Mockery method calls.\n\n<a name=\"mocking-objects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":1,"to":16}}}}],["2439",{"pageContent":"Mocking Objects\n\nWhen mocking an object that is going to be injected into your application via Laravel's [service container](/docs/{{version}}/container), you will need to bind your mocked instance into the container as an `instance` binding. This will instruct the container to use your mocked instance of the object instead of constructing the object itself:\n\n    use App\\Service;\n    use Mockery;\n    use Mockery\\MockInterface;\n\n    public function test_something_can_be_mocked(): void\n    {\n        $this->instance(\n            Service::class,\n            Mockery::mock(Service::class, function (MockInterface $mock) {\n                $mock->shouldReceive('process')->once();\n            })\n        );\n    }\n\nIn order to make this more convenient, you may use the `mock` method that is provided by Laravel's base test case class. For example, the following example is equivalent to the example above:\n\n    use App\\Service;\n    use Mockery\\MockInterface;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":17,"to":38}}}}],["2440",{"pageContent":"use App\\Service;\n    use Mockery\\MockInterface;\n\n    $mock = $this->mock(Service::class, function (MockInterface $mock) {\n        $mock->shouldReceive('process')->once();\n    });\n\nYou may use the `partialMock` method when you only need to mock a few methods of an object. The methods that are not mocked will be executed normally when called:\n\n    use App\\Service;\n    use Mockery\\MockInterface;\n\n    $mock = $this->partialMock(Service::class, function (MockInterface $mock) {\n        $mock->shouldReceive('process')->once();\n    });\n\nSimilarly, if you want to [spy](http://docs.mockery.io/en/latest/reference/spies.html) on an object, Laravel's base test case class offers a `spy` method as a convenient wrapper around the `Mockery::spy` method. Spies are similar to mocks; however, spies record any interaction between the spy and the code being tested, allowing you to make assertions after the code is executed:\n\n    use App\\Service;\n\n    $spy = $this->spy(Service::class);\n\n    // ...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":38,"to":60}}}}],["2441",{"pageContent":"use App\\Service;\n\n    $spy = $this->spy(Service::class);\n\n    // ...\n\n    $spy->shouldHaveReceived('process');\n\n<a name=\"mocking-facades\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":60,"to":68}}}}],["2442",{"pageContent":"Mocking Facades\n\nUnlike traditional static method calls, [facades](/docs/{{version}}/facades) (including [real-time facades](/docs/{{version}}/facades#real-time-facades)) may be mocked. This provides a great advantage over traditional static methods and grants you the same testability that you would have if you were using traditional dependency injection. When testing, you may often want to mock a call to a Laravel facade that occurs in one of your controllers. For example, consider the following controller action:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Support\\Facades\\Cache;\n\n    class UserController extends Controller\n    {\n        /**\n         * Retrieve a list of all users of the application.\n         */\n        public function index(): array\n        {\n            $value = Cache::get('key');\n\n            return [\n                // ...\n            ];\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":69,"to":92}}}}],["2443",{"pageContent":"return [\n                // ...\n            ];\n        }\n    }\n\nWe can mock the call to the `Cache` facade by using the `shouldReceive` method, which will return an instance of a [Mockery](https://github.com/padraic/mockery) mock. Since facades are actually resolved and managed by the Laravel [service container](/docs/{{version}}/container), they have much more testability than a typical static class. For example, let's mock our call to the `Cache` facade's `get` method:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use Illuminate\\Support\\Facades\\Cache;\n    use Tests\\TestCase;\n\n    class UserControllerTest extends TestCase\n    {\n        public function test_get_index(): void\n        {\n            Cache::shouldReceive('get')\n                        ->once()\n                        ->with('key')\n                        ->andReturn('value');\n\n            $response = $this->get('/users');\n\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":92,"to":120}}}}],["2444",{"pageContent":"$response = $this->get('/users');\n\n            // ...\n        }\n    }\n\n> **Warning**  \n> You should not mock the `Request` facade. Instead, pass the input you desire into the [HTTP testing methods](/docs/{{version}}/http-tests) such as `get` and `post` when running your test. Likewise, instead of mocking the `Config` facade, call the `Config::set` method in your tests.\n\n<a name=\"facade-spies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":120,"to":129}}}}],["2445",{"pageContent":"Facade Spies\n\nIf you would like to [spy](http://docs.mockery.io/en/latest/reference/spies.html) on a facade, you may call the `spy` method on the corresponding facade. Spies are similar to mocks; however, spies record any interaction between the spy and the code being tested, allowing you to make assertions after the code is executed:\n\n    use Illuminate\\Support\\Facades\\Cache;\n\n    public function test_values_are_be_stored_in_cache(): void\n    {\n        Cache::spy();\n\n        $response = $this->get('/');\n\n        $response->assertStatus(200);\n\n        Cache::shouldHaveReceived('put')->once()->with('name', 'Taylor', 10);\n    }\n\n<a name=\"interacting-with-time\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":130,"to":147}}}}],["2446",{"pageContent":"Interacting With Time\n\nWhen testing, you may occasionally need to modify the time returned by helpers such as `now` or `Illuminate\\Support\\Carbon::now()`. Thankfully, Laravel's base feature test class includes helpers that allow you to manipulate the current time:\n\n    use Illuminate\\Support\\Carbon;\n\n    public function test_time_can_be_manipulated(): void\n    {\n        // Travel into the future...\n        $this->travel(5)->milliseconds();\n        $this->travel(5)->seconds();\n        $this->travel(5)->minutes();\n        $this->travel(5)->hours();\n        $this->travel(5)->days();\n        $this->travel(5)->weeks();\n        $this->travel(5)->years();\n\n        // Travel into the past...\n        $this->travel(-5)->hours();\n\n        // Travel to an explicit time...\n        $this->travelTo(now()->subHours(6));\n\n        // Return back to the present time...\n        $this->travelBack();\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":148,"to":173}}}}],["2447",{"pageContent":"// Travel to an explicit time...\n        $this->travelTo(now()->subHours(6));\n\n        // Return back to the present time...\n        $this->travelBack();\n    }\n\nYou may also provide a closure to the various time travel methods. The closure will be invoked with time frozen at the specified time. Once the closure has executed, time will resume as normal:\n\n    $this->travel(5)->days(function () {\n        // Test something five days into the future...\n    });\n    \n    $this->travelTo(now()->subDays(10), function () {\n        // Test something during a given moment...\n    });\n\nThe `freezeTime` method may be used to freeze the current time. Similarly, the `freezeSecond` method will freeze the current time but at the start of the current second:\n\n    use Illuminate\\Support\\Carbon;\n\n    // Freeze time and resume normal time after executing closure...\n    $this->freezeTime(function (Carbon $time) {\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":173,"to":197}}}}],["2448",{"pageContent":"use Illuminate\\Support\\Carbon;\n\n    // Freeze time and resume normal time after executing closure...\n    $this->freezeTime(function (Carbon $time) {\n        // ...\n    });\n\n    // Freeze time at the current second and resume normal time after executing closure...\n    $this->freezeSecond(function (Carbon $time) {\n        // ...\n    })\n\nAs you would expect, all of the methods discussed above are primarily useful for testing time sensitive application behavior, such as locking inactive posts on a discussion forum:\n\n    use App\\Models\\Thread;\n    \n    public function test_forum_threads_lock_after_one_week_of_inactivity()\n    {\n        $thread = Thread::factory()->create();\n        \n        $this->travel(1)->week();\n        \n        $this->assertTrue($thread->isLockedByInactivity());\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/mocking.md","loc":{"lines":{"from":197,"to":220}}}}],["2449",{"pageContent":"# Notifications","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1,"to":1}}}}],["2450",{"pageContent":"- [Introduction](#introduction)\n- [Generating Notifications](#generating-notifications)\n- [Sending Notifications](#sending-notifications)\n    - [Using The Notifiable Trait](#using-the-notifiable-trait)\n    - [Using The Notification Facade](#using-the-notification-facade)\n    - [Specifying Delivery Channels](#specifying-delivery-channels)\n    - [Queueing Notifications](#queueing-notifications)\n    - [On-Demand Notifications](#on-demand-notifications)\n- [Mail Notifications](#mail-notifications)\n    - [Formatting Mail Messages](#formatting-mail-messages)\n    - [Customizing The Sender](#customizing-the-sender)\n    - [Customizing The Recipient](#customizing-the-recipient)\n    - [Customizing The Subject](#customizing-the-subject)\n    - [Customizing The Mailer](#customizing-the-mailer)\n    - [Customizing The Templates](#customizing-the-templates)\n    - [Attachments](#mail-attachments)\n    - [Adding Tags & Metadata](#adding-tags-metadata)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":3,"to":19}}}}],["2451",{"pageContent":"- [Customizing The Templates](#customizing-the-templates)\n    - [Attachments](#mail-attachments)\n    - [Adding Tags & Metadata](#adding-tags-metadata)\n    - [Customizing The Symfony Message](#customizing-the-symfony-message)\n    - [Using Mailables](#using-mailables)\n    - [Previewing Mail Notifications](#previewing-mail-notifications)\n- [Markdown Mail Notifications](#markdown-mail-notifications)\n    - [Generating The Message](#generating-the-message)\n    - [Writing The Message](#writing-the-message)\n    - [Customizing The Components](#customizing-the-components)\n- [Database Notifications](#database-notifications)\n    - [Prerequisites](#database-prerequisites)\n    - [Formatting Database Notifications](#formatting-database-notifications)\n    - [Accessing The Notifications](#accessing-the-notifications)\n    - [Marking Notifications As Read](#marking-notifications-as-read)\n- [Broadcast Notifications](#broadcast-notifications)\n    - [Prerequisites](#broadcast-prerequisites)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":19,"to":35}}}}],["2452",{"pageContent":"- [Marking Notifications As Read](#marking-notifications-as-read)\n- [Broadcast Notifications](#broadcast-notifications)\n    - [Prerequisites](#broadcast-prerequisites)\n    - [Formatting Broadcast Notifications](#formatting-broadcast-notifications)\n    - [Listening For Notifications](#listening-for-notifications)\n- [SMS Notifications](#sms-notifications)\n    - [Prerequisites](#sms-prerequisites)\n    - [Formatting SMS Notifications](#formatting-sms-notifications)\n    - [Unicode Content](#unicode-content)\n    - [Customizing The \"From\" Number](#customizing-the-from-number)\n    - [Adding A Client Reference](#adding-a-client-reference)\n    - [Routing SMS Notifications](#routing-sms-notifications)\n- [Slack Notifications](#slack-notifications)\n    - [Prerequisites](#slack-prerequisites)\n    - [Formatting Slack Notifications](#formatting-slack-notifications)\n    - [Slack Interactivity](#slack-interactivity)\n    - [Routing Slack Notifications](#routing-slack-notifications)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":35,"to":51}}}}],["2453",{"pageContent":"- [Formatting Slack Notifications](#formatting-slack-notifications)\n    - [Slack Interactivity](#slack-interactivity)\n    - [Routing Slack Notifications](#routing-slack-notifications)\n    - [Notifying External Slack Workspaces](#notifying-external-slack-workspaces)\n- [Localizing Notifications](#localizing-notifications)\n- [Testing](#testing)\n- [Notification Events](#notification-events)\n- [Custom Channels](#custom-channels)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":51,"to":58}}}}],["2454",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":60,"to":60}}}}],["2455",{"pageContent":"Introduction\n\nIn addition to support for [sending email](/docs/{{version}}/mail), Laravel provides support for sending notifications across a variety of delivery channels, including email, SMS (via [Vonage](https://www.vonage.com/communications-apis/), formerly known as Nexmo), and [Slack](https://slack.com). In addition, a variety of [community built notification channels](https://laravel-notification-channels.com/about/#suggesting-a-new-channel) have been created to send notifications over dozens of different channels! Notifications may also be stored in a database so they may be displayed in your web interface.\n\nTypically, notifications should be short, informational messages that notify users of something that occurred in your application. For example, if you are writing a billing application, you might send an \"Invoice Paid\" notification to your users via the email and SMS channels.\n\n<a name=\"generating-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":61,"to":67}}}}],["2456",{"pageContent":"Generating Notifications\n\nIn Laravel, each notification is represented by a single class that is typically stored in the `app/Notifications` directory. Don't worry if you don't see this directory in your application - it will be created for you when you run the `make:notification` Artisan command:\n\n```shell\nphp artisan make:notification InvoicePaid\n```\n\nThis command will place a fresh notification class in your `app/Notifications` directory. Each notification class contains a `via` method and a variable number of message building methods, such as `toMail` or `toDatabase`, that convert the notification to a message tailored for that particular channel.\n\n<a name=\"sending-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":68,"to":78}}}}],["2457",{"pageContent":"Sending Notifications\n\n<a name=\"using-the-notifiable-trait\"></a>\n### Using The Notifiable Trait\n\nNotifications may be sent in two ways: using the `notify` method of the `Notifiable` trait or using the `Notification` [facade](/docs/{{version}}/facades). The `Notifiable` trait is included on your application's `App\\Models\\User` model by default:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n\n    class User extends Authenticatable\n    {\n        use Notifiable;\n    }\n\nThe `notify` method that is provided by this trait expects to receive a notification instance:\n\n    use App\\Notifications\\InvoicePaid;\n\n    $user->notify(new InvoicePaid($invoice));\n\n> **Note**  \n> Remember, you may use the `Notifiable` trait on any of your models. You are not limited to only including it on your `User` model.\n\n<a name=\"using-the-notification-facade\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":79,"to":107}}}}],["2458",{"pageContent":"Using The Notification Facade\n\nAlternatively, you may send notifications via the `Notification` [facade](/docs/{{version}}/facades). This approach is useful when you need to send a notification to multiple notifiable entities such as a collection of users. To send notifications using the facade, pass all of the notifiable entities and the notification instance to the `send` method:\n\n    use Illuminate\\Support\\Facades\\Notification;\n\n    Notification::send($users, new InvoicePaid($invoice));\n\nYou can also send notifications immediately using the `sendNow` method. This method will send the notification immediately even if the notification implements the `ShouldQueue` interface:\n\n    Notification::sendNow($developers, new DeploymentCompleted($deployment));\n\n<a name=\"specifying-delivery-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":108,"to":120}}}}],["2459",{"pageContent":"Specifying Delivery Channels\n\nEvery notification class has a `via` method that determines on which channels the notification will be delivered. Notifications may be sent on the `mail`, `database`, `broadcast`, `vonage`, and `slack` channels.\n\n> **Note**  \n> If you would like to use other delivery channels such as Telegram or Pusher, check out the community driven [Laravel Notification Channels website](http://laravel-notification-channels.com).\n\nThe `via` method receives a `$notifiable` instance, which will be an instance of the class to which the notification is being sent. You may use `$notifiable` to determine which channels the notification should be delivered on:\n\n    /**\n     * Get the notification's delivery channels.\n     *\n     * @return array<int, string>\n     */\n    public function via(object $notifiable): array\n    {\n        return $notifiable->prefers_sms ? ['vonage'] : ['mail', 'database'];\n    }\n\n<a name=\"queueing-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":121,"to":140}}}}],["2460",{"pageContent":"Queueing Notifications\n\n> **Warning**  \n> Before queueing notifications you should configure your queue and [start a worker](/docs/{{version}}/queues#running-the-queue-worker).\n\nSending notifications can take time, especially if the channel needs to make an external API call to deliver the notification. To speed up your application's response time, let your notification be queued by adding the `ShouldQueue` interface and `Queueable` trait to your class. The interface and trait are already imported for all notifications generated using the `make:notification` command, so you may immediately add them to your notification class:\n\n    <?php\n\n    namespace App\\Notifications;\n\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Notifications\\Notification;\n\n    class InvoicePaid extends Notification implements ShouldQueue\n    {\n        use Queueable;\n\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":141,"to":161}}}}],["2461",{"pageContent":"class InvoicePaid extends Notification implements ShouldQueue\n    {\n        use Queueable;\n\n        // ...\n    }\n\nOnce the `ShouldQueue` interface has been added to your notification, you may send the notification like normal. Laravel will detect the `ShouldQueue` interface on the class and automatically queue the delivery of the notification:\n\n    $user->notify(new InvoicePaid($invoice));\n\nWhen queueing notifications, a queued job will be created for each recipient and channel combination. For example, six jobs will be dispatched to the queue if your notification has three recipients and two channels.\n\n<a name=\"delaying-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":161,"to":174}}}}],["2462",{"pageContent":"Delaying Notifications\n\nIf you would like to delay the delivery of the notification, you may chain the `delay` method onto your notification instantiation:\n\n    $delay = now()->addMinutes(10);\n\n    $user->notify((new InvoicePaid($invoice))->delay($delay));\n\n<a name=\"delaying-notifications-per-channel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":175,"to":183}}}}],["2463",{"pageContent":"Delaying Notifications Per Channel\n\nYou may pass an array to the `delay` method to specify the delay amount for specific channels:\n\n    $user->notify((new InvoicePaid($invoice))->delay([\n        'mail' => now()->addMinutes(5),\n        'sms' => now()->addMinutes(10),\n    ]));\n\nAlternatively, you may define a `withDelay` method on the notification class itself. The `withDelay` method should return an array of channel names and delay values:\n\n    /**\n     * Determine the notification's delivery delay.\n     *\n     * @return array<string, \\Illuminate\\Support\\Carbon>\n     */\n    public function withDelay(object $notifiable): array\n    {\n        return [\n            'mail' => now()->addMinutes(5),\n            'sms' => now()->addMinutes(10),\n        ];\n    }\n\n<a name=\"customizing-the-notification-queue-connection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":184,"to":208}}}}],["2464",{"pageContent":"Customizing The Notification Queue Connection\n\nBy default, queued notifications will be queued using your application's default queue connection. If you would like to specify a different connection that should be used for a particular notification, you may call the `onConnection` method from your notification's constructor:\n\n    <?php\n\n    namespace App\\Notifications;\n\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Notifications\\Notification;\n\n    class InvoicePaid extends Notification implements ShouldQueue\n    {\n        use Queueable;\n\n        /**\n         * Create a new notification instance.\n         */\n        public function __construct()\n        {\n            $this->onConnection('redis');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":209,"to":232}}}}],["2465",{"pageContent":"/**\n         * Create a new notification instance.\n         */\n        public function __construct()\n        {\n            $this->onConnection('redis');\n        }\n    }\n\nOr, if you would like to specify a specific queue connection that should be used for each notification channel supported by the notification, you may define a `viaConnections` method on your notification. This method should return an array of channel name / queue connection name pairs:\n\n    /**\n     * Determine which connections should be used for each notification channel.\n     *\n     * @return array<string, string>\n     */\n    public function viaConnections(): array\n    {\n        return [\n            'mail' => 'redis',\n            'database' => 'sync',\n        ];\n    }\n\n<a name=\"customizing-notification-channel-queues\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":232,"to":256}}}}],["2466",{"pageContent":"Customizing Notification Channel Queues\n\nIf you would like to specify a specific queue that should be used for each notification channel supported by the notification, you may define a `viaQueues` method on your notification. This method should return an array of channel name / queue name pairs:\n\n    /**\n     * Determine which queues should be used for each notification channel.\n     *\n     * @return array<string, string>\n     */\n    public function viaQueues(): array\n    {\n        return [\n            'mail' => 'mail-queue',\n            'slack' => 'slack-queue',\n        ];\n    }\n\n<a name=\"queued-notifications-and-database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":257,"to":274}}}}],["2467",{"pageContent":"Queued Notifications & Database Transactions\n\nWhen queued notifications are dispatched within database transactions, they may be processed by the queue before the database transaction has committed. When this happens, any updates you have made to models or database records during the database transaction may not yet be reflected in the database. In addition, any models or database records created within the transaction may not exist in the database. If your notification depends on these models, unexpected errors can occur when the job that sends the queued notification is processed.\n\nIf your queue connection's `after_commit` configuration option is set to `false`, you may still indicate that a particular queued notification should be dispatched after all open database transactions have been committed by calling the `afterCommit` method when sending the notification:\n\n    use App\\Notifications\\InvoicePaid;\n\n    $user->notify((new InvoicePaid($invoice))->afterCommit());","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":275,"to":283}}}}],["2468",{"pageContent":"use App\\Notifications\\InvoicePaid;\n\n    $user->notify((new InvoicePaid($invoice))->afterCommit());\n\nAlternatively, you may call the `afterCommit` method from your notification's constructor:\n\n    <?php\n\n    namespace App\\Notifications;\n\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Notifications\\Notification;\n\n    class InvoicePaid extends Notification implements ShouldQueue\n    {\n        use Queueable;\n\n        /**\n         * Create a new notification instance.\n         */\n        public function __construct()\n        {\n            $this->afterCommit();\n        }\n    }\n\n> **Note**  \n> To learn more about working around these issues, please review the documentation regarding [queued jobs and database transactions](/docs/{{version}}/queues#jobs-and-database-transactions).\n\n<a name=\"determining-if-the-queued-notification-should-be-sent\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":283,"to":313}}}}],["2469",{"pageContent":"Determining If A Queued Notification Should Be Sent\n\nAfter a queued notification has been dispatched for the queue for background processing, it will typically be accepted by a queue worker and sent to its intended recipient.\n\nHowever, if you would like to make the final determination on whether the queued notification should be sent after it is being processed by a queue worker, you may define a `shouldSend` method on the notification class. If this method returns `false`, the notification will not be sent:\n\n    /**\n     * Determine if the notification should be sent.\n     */\n    public function shouldSend(object $notifiable, string $channel): bool\n    {\n        return $this->invoice->isPaid();\n    }\n\n<a name=\"on-demand-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":314,"to":328}}}}],["2470",{"pageContent":"On-Demand Notifications\n\nSometimes you may need to send a notification to someone who is not stored as a \"user\" of your application. Using the `Notification` facade's `route` method, you may specify ad-hoc notification routing information before sending the notification:\n\n    use Illuminate\\Broadcasting\\Channel;\n    use Illuminate\\Support\\Facades\\Notification;\n\n    Notification::route('mail', 'taylor@example.com')\n                ->route('vonage', '5555555555')\n                ->route('slack', '#slack-channel')\n                ->route('broadcast', [new Channel('channel-name')])\n                ->notify(new InvoicePaid($invoice));\n\nIf you would like to provide the recipient's name when sending an on-demand notification to the `mail` route, you may provide an array that contains the email address as the key and the name as the value of the first element in the array:\n\n    Notification::route('mail', [\n        'barrett@example.com' => 'Barrett Blair',\n    ])->notify(new InvoicePaid($invoice));","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":329,"to":346}}}}],["2471",{"pageContent":"Notification::route('mail', [\n        'barrett@example.com' => 'Barrett Blair',\n    ])->notify(new InvoicePaid($invoice));\n\n<a name=\"mail-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":346,"to":350}}}}],["2472",{"pageContent":"Mail Notifications\n\n<a name=\"formatting-mail-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":351,"to":353}}}}],["2473",{"pageContent":"Formatting Mail Messages\n\nIf a notification supports being sent as an email, you should define a `toMail` method on the notification class. This method will receive a `$notifiable` entity and should return an `Illuminate\\Notifications\\Messages\\MailMessage` instance.\n\nThe `MailMessage` class contains a few simple methods to help you build transactional email messages. Mail messages may contain lines of text as well as a \"call to action\". Let's take a look at an example `toMail` method:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        $url = url('/invoice/'.$this->invoice->id);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":354,"to":365}}}}],["2474",{"pageContent":"/**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        $url = url('/invoice/'.$this->invoice->id);\n\n        return (new MailMessage)\n                    ->greeting('Hello!')\n                    ->line('One of your invoices has been paid!')\n                    ->lineIf($this->amount > 0, \"Amount paid: {$this->amount}\")\n                    ->action('View Invoice', $url)\n                    ->line('Thank you for using our application!');\n    }\n\n> **Note**  \n> Note we are using `$this->invoice->id` in our `toMail` method. You may pass any data your notification needs to generate its message into the notification's constructor.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":365,"to":381}}}}],["2475",{"pageContent":"> **Note**  \n> Note we are using `$this->invoice->id` in our `toMail` method. You may pass any data your notification needs to generate its message into the notification's constructor.\n\nIn this example, we register a greeting, a line of text, a call to action, and then another line of text. These methods provided by the `MailMessage` object make it simple and fast to format small transactional emails. The mail channel will then translate the message components into a beautiful, responsive HTML email template with a plain-text counterpart. Here is an example of an email generated by the `mail` channel:\n\n<img src=\"https://laravel.com/img/docs/notification-example-2.png\">\n\n> **Note**  \n> When sending mail notifications, be sure to set the `name` configuration option in your `config/app.php` configuration file. This value will be used in the header and footer of your mail notification messages.\n\n<a name=\"error-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":381,"to":391}}}}],["2476",{"pageContent":"Error Messages\n\nSome notifications inform users of errors, such as a failed invoice payment. You may indicate that a mail message is regarding an error by calling the `error` method when building your message. When using the `error` method on a mail message, the call to action button will be red instead of black:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->error()\n                    ->subject('Invoice Payment Failed')\n                    ->line('...');\n    }\n\n<a name=\"other-mail-notification-formatting-options\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":392,"to":407}}}}],["2477",{"pageContent":"Other Mail Notification Formatting Options\n\nInstead of defining the \"lines\" of text in the notification class, you may use the `view` method to specify a custom template that should be used to render the notification email:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)->view(\n            'emails.name', ['invoice' => $this->invoice]\n        );\n    }\n\nYou may specify a plain-text view for the mail message by passing the view name as the second element of an array that is given to the `view` method:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)->view(\n            ['emails.name.html', 'emails.name.plain'],\n            ['invoice' => $this->invoice]\n        );\n    }\n\n<a name=\"customizing-the-sender\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":408,"to":435}}}}],["2478",{"pageContent":"Customizing The Sender\n\nBy default, the email's sender / from address is defined in the `config/mail.php` configuration file. However, you may specify the from address for a specific notification using the `from` method:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->from('barrett@example.com', 'Barrett Blair')\n                    ->line('...');\n    }\n\n<a name=\"customizing-the-recipient\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":436,"to":450}}}}],["2479",{"pageContent":"Customizing The Recipient\n\nWhen sending notifications via the `mail` channel, the notification system will automatically look for an `email` property on your notifiable entity. You may customize which email address is used to deliver the notification by defining a `routeNotificationForMail` method on the notifiable entity:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n    use Illuminate\\Notifications\\Notification;\n\n    class User extends Authenticatable\n    {\n        use Notifiable;\n\n        /**\n         * Route notifications for the mail channel.\n         *\n         * @return  array<string, string>|string\n         */\n        public function routeNotificationForMail(Notification $notification): array|string\n        {\n            // Return email address only...\n            return $this->email_address;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":451,"to":475}}}}],["2480",{"pageContent":"// Return email address and name...\n            return [$this->email_address => $this->name];\n        }\n    }\n\n<a name=\"customizing-the-subject\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":477,"to":482}}}}],["2481",{"pageContent":"Customizing The Subject\n\nBy default, the email's subject is the class name of the notification formatted to \"Title Case\". So, if your notification class is named `InvoicePaid`, the email's subject will be `Invoice Paid`. If you would like to specify a different subject for the message, you may call the `subject` method when building your message:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->subject('Notification Subject')\n                    ->line('...');\n    }\n\n<a name=\"customizing-the-mailer\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":483,"to":497}}}}],["2482",{"pageContent":"Customizing The Mailer\n\nBy default, the email notification will be sent using the default mailer defined in the `config/mail.php` configuration file. However, you may specify a different mailer at runtime by calling the `mailer` method when building your message:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->mailer('postmark')\n                    ->line('...');\n    }\n\n<a name=\"customizing-the-templates\"></a>\n### Customizing The Templates\n\nYou can modify the HTML and plain-text template used by mail notifications by publishing the notification package's resources. After running this command, the mail notification templates will be located in the `resources/views/vendor/notifications` directory:\n\n```shell\nphp artisan vendor:publish --tag=laravel-notifications\n```\n\n<a name=\"mail-attachments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":498,"to":521}}}}],["2483",{"pageContent":"Attachments\n\nTo add attachments to an email notification, use the `attach` method while building your message. The `attach` method accepts the absolute path to the file as its first argument:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->greeting('Hello!')\n                    ->attach('/path/to/file');\n    }\n\n> **Note**  \n> The `attach` method offered by notification mail messages also accepts [attachable objects](/docs/{{version}}/mail#attachable-objects). Please consult the comprehensive [attachable object documentation](/docs/{{version}}/mail#attachable-objects) to learn more.\n\nWhen attaching files to a message, you may also specify the display name and / or MIME type by passing an `array` as the second argument to the `attach` method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":522,"to":539}}}}],["2484",{"pageContent":"When attaching files to a message, you may also specify the display name and / or MIME type by passing an `array` as the second argument to the `attach` method:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->greeting('Hello!')\n                    ->attach('/path/to/file', [\n                        'as' => 'name.pdf',\n                        'mime' => 'application/pdf',\n                    ]);\n    }\n\nUnlike attaching files in mailable objects, you may not attach a file directly from a storage disk using `attachFromStorage`. You should rather use the `attach` method with an absolute path to the file on the storage disk. Alternatively, you could return a [mailable](/docs/{{version}}/mail#generating-mailables) from the `toMail` method:\n\n    use App\\Mail\\InvoicePaid as InvoicePaidMailable;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":539,"to":556}}}}],["2485",{"pageContent":"use App\\Mail\\InvoicePaid as InvoicePaidMailable;\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): Mailable\n    {\n        return (new InvoicePaidMailable($this->invoice))\n                    ->to($notifiable->email)\n                    ->attachFromStorage('/path/to/file');\n    }\n\nWhen necessary, multiple files may be attached to a message using the `attachMany` method:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->greeting('Hello!')\n                    ->attachMany([\n                        '/path/to/forge.svg',\n                        '/path/to/vapor.svg' => [\n                            'as' => 'Logo.svg',\n                            'mime' => 'image/svg+xml',\n                        ],\n                    ]);\n    }\n\n<a name=\"raw-data-attachments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":556,"to":586}}}}],["2486",{"pageContent":"Raw Data Attachments\n\nThe `attachData` method may be used to attach a raw string of bytes as an attachment. When calling the `attachData` method, you should provide the filename that should be assigned to the attachment:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->greeting('Hello!')\n                    ->attachData($this->pdf, 'name.pdf', [\n                        'mime' => 'application/pdf',\n                    ]);\n    }\n\n<a name=\"adding-tags-metadata\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":587,"to":603}}}}],["2487",{"pageContent":"Adding Tags & Metadata\n\nSome third-party email providers such as Mailgun and Postmark support message \"tags\" and \"metadata\", which may be used to group and track emails sent by your application. You may add tags and metadata to an email message via the `tag` and `metadata` methods:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->greeting('Comment Upvoted!')\n                    ->tag('upvote')\n                    ->metadata('comment_id', $this->comment->id);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":604,"to":617}}}}],["2488",{"pageContent":"If your application is using the Mailgun driver, you may consult Mailgun's documentation for more information on [tags](https://documentation.mailgun.com/en/latest/user_manual.html#tagging-1) and [metadata](https://documentation.mailgun.com/en/latest/user_manual.html#attaching-data-to-messages). Likewise, the Postmark documentation may also be consulted for more information on their support for [tags](https://postmarkapp.com/blog/tags-support-for-smtp) and [metadata](https://postmarkapp.com/support/article/1125-custom-metadata-faq).\n\nIf your application is using Amazon SES to send emails, you should use the `metadata` method to attach [SES \"tags\"](https://docs.aws.amazon.com/ses/latest/APIReference/API_MessageTag.html) to the message.\n\n<a name=\"customizing-the-symfony-message\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":619,"to":623}}}}],["2489",{"pageContent":"Customizing The Symfony Message\n\nThe `withSymfonyMessage` method of the `MailMessage` class allows you to register a closure which will be invoked with the Symfony Message instance before sending the message. This gives you an opportunity to deeply customize the message before it is delivered:\n\n    use Symfony\\Component\\Mime\\Email;\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->withSymfonyMessage(function (Email $message) {\n                        $message->getHeaders()->addTextHeader(\n                            'Custom-Header', 'Header Value'\n                        );\n                    });\n    }\n\n<a name=\"using-mailables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":624,"to":643}}}}],["2490",{"pageContent":"Using Mailables\n\nIf needed, you may return a full [mailable object](/docs/{{version}}/mail) from your notification's `toMail` method. When returning a `Mailable` instead of a `MailMessage`, you will need to specify the message recipient using the mailable object's `to` method:\n\n    use App\\Mail\\InvoicePaid as InvoicePaidMailable;\n    use Illuminate\\Mail\\Mailable;\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): Mailable\n    {\n        return (new InvoicePaidMailable($this->invoice))\n                    ->to($notifiable->email);\n    }\n\n<a name=\"mailables-and-on-demand-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":644,"to":660}}}}],["2491",{"pageContent":"Mailables & On-Demand Notifications\n\nIf you are sending an [on-demand notification](#on-demand-notifications), the `$notifiable` instance given to the `toMail` method will be an instance of `Illuminate\\Notifications\\AnonymousNotifiable`, which offers a `routeNotificationFor` method that may be used to retrieve the email address the on-demand notification should be sent to:\n\n    use App\\Mail\\InvoicePaid as InvoicePaidMailable;\n    use Illuminate\\Notifications\\AnonymousNotifiable;\n    use Illuminate\\Mail\\Mailable;\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): Mailable\n    {\n        $address = $notifiable instanceof AnonymousNotifiable\n                ? $notifiable->routeNotificationFor('mail')\n                : $notifiable->email;\n\n        return (new InvoicePaidMailable($this->invoice))\n                    ->to($address);\n    }\n\n<a name=\"previewing-mail-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":661,"to":682}}}}],["2492",{"pageContent":"Previewing Mail Notifications\n\nWhen designing a mail notification template, it is convenient to quickly preview the rendered mail message in your browser like a typical Blade template. For this reason, Laravel allows you to return any mail message generated by a mail notification directly from a route closure or controller. When a `MailMessage` is returned, it will be rendered and displayed in the browser, allowing you to quickly preview its design without needing to send it to an actual email address:\n\n    use App\\Models\\Invoice;\n    use App\\Notifications\\InvoicePaid;\n\n    Route::get('/notification', function () {\n        $invoice = Invoice::find(1);\n\n        return (new InvoicePaid($invoice))\n                    ->toMail($invoice->user);\n    });\n\n<a name=\"markdown-mail-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":683,"to":697}}}}],["2493",{"pageContent":"Markdown Mail Notifications\n\nMarkdown mail notifications allow you to take advantage of the pre-built templates of mail notifications, while giving you more freedom to write longer, customized messages. Since the messages are written in Markdown, Laravel is able to render beautiful, responsive HTML templates for the messages while also automatically generating a plain-text counterpart.\n\n<a name=\"generating-the-message\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":698,"to":702}}}}],["2494",{"pageContent":"Generating The Message\n\nTo generate a notification with a corresponding Markdown template, you may use the `--markdown` option of the `make:notification` Artisan command:\n\n```shell\nphp artisan make:notification InvoicePaid --markdown=mail.invoice.paid","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":703,"to":708}}}}],["2495",{"pageContent":"Like all other mail notifications, notifications that use Markdown templates should define a `toMail` method on their notification class. However, instead of using the `line` and `action` methods to construct the notification, use the `markdown` method to specify the name of the Markdown template that should be used. An array of data you wish to make available to the template may be passed as the method's second argument:\n\n    /**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        $url = url('/invoice/'.$this->invoice->id);\n\n        return (new MailMessage)\n                    ->subject('Invoice Paid')\n                    ->markdown('mail.invoice.paid', ['url' => $url]);\n    }\n\n<a name=\"writing-the-message\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":711,"to":725}}}}],["2496",{"pageContent":"Writing The Message\n\nMarkdown mail notifications use a combination of Blade components and Markdown syntax which allow you to easily construct notifications while leveraging Laravel's pre-crafted notification components:\n\n```blade\n<x-mail::message>\n# Invoice Paid\n\nYour invoice has been paid!\n\n<x-mail::button :url=\"$url\">\nView Invoice\n</x-mail::button>\n\nThanks,<br>\n{{ config('app.name') }}\n</x-mail::message>\n```\n\n<a name=\"button-component\"></a>\n#### Button Component\n\nThe button component renders a centered button link. The component accepts two arguments, a `url` and an optional `color`. Supported colors are `primary`, `green`, and `red`. You may add as many button components to a notification as you wish:\n\n```blade\n<x-mail::button :url=\"$url\" color=\"green\">\nView Invoice\n</x-mail::button>\n```\n\n<a name=\"panel-component\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":726,"to":756}}}}],["2497",{"pageContent":"Panel Component\n\nThe panel component renders the given block of text in a panel that has a slightly different background color than the rest of the notification. This allows you to draw attention to a given block of text:\n\n```blade\n<x-mail::panel>\nThis is the panel content.\n</x-mail::panel>\n```\n\n<a name=\"table-component\"></a>\n#### Table Component\n\nThe table component allows you to transform a Markdown table into an HTML table. The component accepts the Markdown table as its content. Table column alignment is supported using the default Markdown table alignment syntax:\n\n```blade\n<x-mail::table>\n| Laravel       | Table         | Example  |\n| ------------- |:-------------:| --------:|\n| Col 2 is      | Centered      | $10      |\n| Col 3 is      | Right-Aligned | $20      |\n</x-mail::table>\n```\n\n<a name=\"customizing-the-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":757,"to":781}}}}],["2498",{"pageContent":"Customizing The Components\n\nYou may export all of the Markdown notification components to your own application for customization. To export the components, use the `vendor:publish` Artisan command to publish the `laravel-mail` asset tag:\n\n```shell\nphp artisan vendor:publish --tag=laravel-mail\n```\n\nThis command will publish the Markdown mail components to the `resources/views/vendor/mail` directory. The `mail` directory will contain an `html` and a `text` directory, each containing their respective representations of every available component. You are free to customize these components however you like.\n\n<a name=\"customizing-the-css\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":782,"to":792}}}}],["2499",{"pageContent":"Customizing The CSS\n\nAfter exporting the components, the `resources/views/vendor/mail/html/themes` directory will contain a `default.css` file. You may customize the CSS in this file and your styles will automatically be in-lined within the HTML representations of your Markdown notifications.\n\nIf you would like to build an entirely new theme for Laravel's Markdown components, you may place a CSS file within the `html/themes` directory. After naming and saving your CSS file, update the `theme` option of the `mail` configuration file to match the name of your new theme.\n\nTo customize the theme for an individual notification, you may call the `theme` method while building the notification's mail message. The `theme` method accepts the name of the theme that should be used when sending the notification:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":793,"to":799}}}}],["2500",{"pageContent":"/**\n     * Get the mail representation of the notification.\n     */\n    public function toMail(object $notifiable): MailMessage\n    {\n        return (new MailMessage)\n                    ->theme('invoice')\n                    ->subject('Invoice Paid')\n                    ->markdown('mail.invoice.paid', ['url' => $url]);\n    }\n\n<a name=\"database-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":801,"to":812}}}}],["2501",{"pageContent":"Database Notifications\n\n<a name=\"database-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":813,"to":815}}}}],["2502",{"pageContent":"Prerequisites\n\nThe `database` notification channel stores the notification information in a database table. This table will contain information such as the notification type as well as a JSON data structure that describes the notification.\n\nYou can query the table to display the notifications in your application's user interface. But, before you can do that, you will need to create a database table to hold your notifications. You may use the `notifications:table` command to generate a [migration](/docs/{{version}}/migrations) with the proper table schema:\n\n```shell\nphp artisan notifications:table\n\nphp artisan migrate","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":816,"to":825}}}}],["2503",{"pageContent":"> **Note**  \n> If your notifiable models are using [UUID or ULID primary keys](/docs/{{version}}/eloquent#uuid-and-ulid-keys), you should replace the `morphs` method with [`uuidMorphs`](docs/{{version}}/migrations#column-method-uuidMorphs) or [`ulidMorphs`](/docs/{{version}}/migrations#column-method-ulidMorphs) in the notification table migration.\n\n<a name=\"formatting-database-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":828,"to":831}}}}],["2504",{"pageContent":"Formatting Database Notifications\n\nIf a notification supports being stored in a database table, you should define a `toDatabase` or `toArray` method on the notification class. This method will receive a `$notifiable` entity and should return a plain PHP array. The returned array will be encoded as JSON and stored in the `data` column of your `notifications` table. Let's take a look at an example `toArray` method:\n\n    /**\n     * Get the array representation of the notification.\n     *\n     * @return array<string, mixed>\n     */\n    public function toArray(object $notifiable): array\n    {\n        return [\n            'invoice_id' => $this->invoice->id,\n            'amount' => $this->invoice->amount,\n        ];\n    }\n\n<a name=\"todatabase-vs-toarray\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":832,"to":849}}}}],["2505",{"pageContent":"`toDatabase` Vs. `toArray`\n\nThe `toArray` method is also used by the `broadcast` channel to determine which data to broadcast to your JavaScript powered frontend. If you would like to have two different array representations for the `database` and `broadcast` channels, you should define a `toDatabase` method instead of a `toArray` method.\n\n<a name=\"accessing-the-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":850,"to":854}}}}],["2506",{"pageContent":"Accessing The Notifications\n\nOnce notifications are stored in the database, you need a convenient way to access them from your notifiable entities. The `Illuminate\\Notifications\\Notifiable` trait, which is included on Laravel's default `App\\Models\\User` model, includes a `notifications` [Eloquent relationship](/docs/{{version}}/eloquent-relationships) that returns the notifications for the entity. To fetch notifications, you may access this method like any other Eloquent relationship. By default, notifications will be sorted by the `created_at` timestamp with the most recent notifications at the beginning of the collection:\n\n    $user = App\\Models\\User::find(1);\n\n    foreach ($user->notifications as $notification) {\n        echo $notification->type;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":855,"to":863}}}}],["2507",{"pageContent":"$user = App\\Models\\User::find(1);\n\n    foreach ($user->notifications as $notification) {\n        echo $notification->type;\n    }\n\nIf you want to retrieve only the \"unread\" notifications, you may use the `unreadNotifications` relationship. Again, these notifications will be sorted by the `created_at` timestamp with the most recent notifications at the beginning of the collection:\n\n    $user = App\\Models\\User::find(1);\n\n    foreach ($user->unreadNotifications as $notification) {\n        echo $notification->type;\n    }\n\n> **Note**  \n> To access your notifications from your JavaScript client, you should define a notification controller for your application which returns the notifications for a notifiable entity, such as the current user. You may then make an HTTP request to that controller's URL from your JavaScript client.\n\n<a name=\"marking-notifications-as-read\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":863,"to":880}}}}],["2508",{"pageContent":"Marking Notifications As Read\n\nTypically, you will want to mark a notification as \"read\" when a user views it. The `Illuminate\\Notifications\\Notifiable` trait provides a `markAsRead` method, which updates the `read_at` column on the notification's database record:\n\n    $user = App\\Models\\User::find(1);\n\n    foreach ($user->unreadNotifications as $notification) {\n        $notification->markAsRead();\n    }\n\nHowever, instead of looping through each notification, you may use the `markAsRead` method directly on a collection of notifications:\n\n    $user->unreadNotifications->markAsRead();\n\nYou may also use a mass-update query to mark all of the notifications as read without retrieving them from the database:\n\n    $user = App\\Models\\User::find(1);\n\n    $user->unreadNotifications()->update(['read_at' => now()]);\n\nYou may `delete` the notifications to remove them from the table entirely:\n\n    $user->notifications()->delete();\n\n<a name=\"broadcast-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":881,"to":905}}}}],["2509",{"pageContent":"Broadcast Notifications\n\n<a name=\"broadcast-prerequisites\"></a>\n### Prerequisites\n\nBefore broadcasting notifications, you should configure and be familiar with Laravel's [event broadcasting](/docs/{{version}}/broadcasting) services. Event broadcasting provides a way to react to server-side Laravel events from your JavaScript powered frontend.\n\n<a name=\"formatting-broadcast-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":906,"to":913}}}}],["2510",{"pageContent":"Formatting Broadcast Notifications\n\nThe `broadcast` channel broadcasts notifications using Laravel's [event broadcasting](/docs/{{version}}/broadcasting) services, allowing your JavaScript powered frontend to catch notifications in realtime. If a notification supports broadcasting, you can define a `toBroadcast` method on the notification class. This method will receive a `$notifiable` entity and should return a `BroadcastMessage` instance. If the `toBroadcast` method does not exist, the `toArray` method will be used to gather the data that should be broadcast. The returned data will be encoded as JSON and broadcast to your JavaScript powered frontend. Let's take a look at an example `toBroadcast` method:\n\n    use Illuminate\\Notifications\\Messages\\BroadcastMessage;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":914,"to":918}}}}],["2511",{"pageContent":"use Illuminate\\Notifications\\Messages\\BroadcastMessage;\n\n    /**\n     * Get the broadcastable representation of the notification.\n     */\n    public function toBroadcast(object $notifiable): BroadcastMessage\n    {\n        return new BroadcastMessage([\n            'invoice_id' => $this->invoice->id,\n            'amount' => $this->invoice->amount,\n        ]);\n    }\n\n<a name=\"broadcast-queue-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":918,"to":931}}}}],["2512",{"pageContent":"Broadcast Queue Configuration\n\nAll broadcast notifications are queued for broadcasting. If you would like to configure the queue connection or queue name that is used to queue the broadcast operation, you may use the `onConnection` and `onQueue` methods of the `BroadcastMessage`:\n\n    return (new BroadcastMessage($data))\n                    ->onConnection('sqs')\n                    ->onQueue('broadcasts');\n\n<a name=\"customizing-the-notification-type\"></a>\n#### Customizing The Notification Type\n\nIn addition to the data you specify, all broadcast notifications also have a `type` field containing the full class name of the notification. If you would like to customize the notification `type`, you may define a `broadcastType` method on the notification class:\n\n    /**\n     * Get the type of the notification being broadcast.\n     */\n    public function broadcastType(): string\n    {\n        return 'broadcast.message';\n    }\n\n<a name=\"listening-for-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":932,"to":953}}}}],["2513",{"pageContent":"Listening For Notifications\n\nNotifications will broadcast on a private channel formatted using a `{notifiable}.{id}` convention. So, if you are sending a notification to an `App\\Models\\User` instance with an ID of `1`, the notification will be broadcast on the `App.Models.User.1` private channel. When using [Laravel Echo](/docs/{{version}}/broadcasting#client-side-installation), you may easily listen for notifications on a channel using the `notification` method:\n\n    Echo.private('App.Models.User.' + userId)\n        .notification((notification) => {\n            console.log(notification.type);\n        });\n\n<a name=\"customizing-the-notification-channel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":954,"to":963}}}}],["2514",{"pageContent":"Customizing The Notification Channel\n\nIf you would like to customize which channel that an entity's broadcast notifications are broadcast on, you may define a `receivesBroadcastNotificationsOn` method on the notifiable entity:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Broadcasting\\PrivateChannel;\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n\n    class User extends Authenticatable\n    {\n        use Notifiable;\n\n        /**\n         * The channels the user receives notification broadcasts on.\n         */\n        public function receivesBroadcastNotificationsOn(): string\n        {\n            return 'users.'.$this->id;\n        }\n    }\n\n<a name=\"sms-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":964,"to":989}}}}],["2515",{"pageContent":"SMS Notifications\n\n<a name=\"sms-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":990,"to":992}}}}],["2516",{"pageContent":"Prerequisites\n\nSending SMS notifications in Laravel is powered by [Vonage](https://www.vonage.com/) (formerly known as Nexmo). Before you can send notifications via Vonage, you need to install the `laravel/vonage-notification-channel` and `guzzlehttp/guzzle` packages:\n\n    composer require laravel/vonage-notification-channel guzzlehttp/guzzle\n\nThe package includes a [configuration file](https://github.com/laravel/vonage-notification-channel/blob/3.x/config/vonage.php). However, you are not required to export this configuration file to your own application. You can simply use the `VONAGE_KEY` and `VONAGE_SECRET` environment variables to define your Vonage public and secret keys.\n\nAfter defining your keys, you should set a `VONAGE_SMS_FROM` environment variable that defines the phone number that your SMS messages should be sent from by default. You may generate this phone number within the Vonage control panel:\n\n    VONAGE_SMS_FROM=15556666666\n\n<a name=\"formatting-sms-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":993,"to":1005}}}}],["2517",{"pageContent":"Formatting SMS Notifications\n\nIf a notification supports being sent as an SMS, you should define a `toVonage` method on the notification class. This method will receive a `$notifiable` entity and should return an `Illuminate\\Notifications\\Messages\\VonageMessage` instance:\n\n    use Illuminate\\Notifications\\Messages\\VonageMessage;\n\n    /**\n     * Get the Vonage / SMS representation of the notification.\n     */\n    public function toVonage(object $notifiable): VonageMessage\n    {\n        return (new VonageMessage)\n                    ->content('Your SMS message content');\n    }\n\n<a name=\"unicode-content\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1006,"to":1021}}}}],["2518",{"pageContent":"Unicode Content\n\nIf your SMS message will contain unicode characters, you should call the `unicode` method when constructing the `VonageMessage` instance:\n\n    use Illuminate\\Notifications\\Messages\\VonageMessage;\n\n    /**\n     * Get the Vonage / SMS representation of the notification.\n     */\n    public function toVonage(object $notifiable): VonageMessage\n    {\n        return (new VonageMessage)\n                    ->content('Your unicode message')\n                    ->unicode();\n    }\n\n<a name=\"customizing-the-from-number\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1022,"to":1038}}}}],["2519",{"pageContent":"Customizing The \"From\" Number\n\nIf you would like to send some notifications from a phone number that is different from the phone number specified by your `VONAGE_SMS_FROM` environment variable, you may call the `from` method on a `VonageMessage` instance:\n\n    use Illuminate\\Notifications\\Messages\\VonageMessage;\n\n    /**\n     * Get the Vonage / SMS representation of the notification.\n     */\n    public function toVonage(object $notifiable): VonageMessage\n    {\n        return (new VonageMessage)\n                    ->content('Your SMS message content')\n                    ->from('15554443333');\n    }\n\n<a name=\"adding-a-client-reference\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1039,"to":1055}}}}],["2520",{"pageContent":"Adding a Client Reference\n\nIf you would like to keep track of costs per user, team, or client, you may add a \"client reference\" to the notification. Vonage will allow you to generate reports using this client reference so that you can better understand a particular customer's SMS usage. The client reference can be any string up to 40 characters:\n\n    use Illuminate\\Notifications\\Messages\\VonageMessage;\n\n    /**\n     * Get the Vonage / SMS representation of the notification.\n     */\n    public function toVonage(object $notifiable): VonageMessage\n    {\n        return (new VonageMessage)\n                    ->clientReference((string) $notifiable->id)\n                    ->content('Your SMS message content');\n    }\n\n<a name=\"routing-sms-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1056,"to":1072}}}}],["2521",{"pageContent":"Routing SMS Notifications\n\nTo route Vonage notifications to the proper phone number, define a `routeNotificationForVonage` method on your notifiable entity:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n    use Illuminate\\Notifications\\Notification;\n\n    class User extends Authenticatable\n    {\n        use Notifiable;\n\n        /**\n         * Route notifications for the Vonage channel.\n         */\n        public function routeNotificationForVonage(Notification $notification): string\n        {\n            return $this->phone_number;\n        }\n    }\n\n<a name=\"slack-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1073,"to":1098}}}}],["2522",{"pageContent":"Slack Notifications\n\n<a name=\"slack-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1099,"to":1101}}}}],["2523",{"pageContent":"Prerequisites\n\nBefore sending Slack notifications, you should install the Slack notification channel via Composer:\n\n```shell\ncomposer require laravel/slack-notification-channel","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1102,"to":1107}}}}],["2524",{"pageContent":"Additionally, you must create a [Slack App](https://api.slack.com/apps?new_app=1) for your Slack workspace.\n\nIf you only need to send notifications to the same Slack workspace that the App is created in, you should ensure that your App has the `chat:write`, `chat:write.public`, and `chat:write.customize` scopes. These scopes can be added from the \"OAuth & Permissions\" App management tab within Slack.\n\nNext, copy the App's \"Bot User OAuth Token\" and place it within a `slack` configuration array in your application's `services.php` configuration file. This token can be found on the \"OAuth & Permissions\" tab within Slack:\n\n    'slack' => [\n        'notifications' => [\n            'bot_user_oauth_token' => env('SLACK_BOT_USER_OAUTH_TOKEN'),\n            'channel' => env('SLACK_BOT_USER_DEFAULT_CHANNEL'),\n        ],\n    ],\n\n<a name=\"slack-app-distribution\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1110,"to":1123}}}}],["2525",{"pageContent":"App Distribution\n\nIf your application will be sending notifications to external Slack workspaces that are owned by your application's users, you will need to \"distribute\" your App via Slack. App distribution can be managed from your App's \"Manage Distribution\" tab within Slack. Once your App has been distributed, you may use [Socialite](/docs/{{version}}/socialite) to [obtain Slack Bot tokens](/docs/{{version}}/socialite#slack-bot-scopes) on behalf of your application's users.\n\n<a name=\"formatting-slack-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1124,"to":1128}}}}],["2526",{"pageContent":"Formatting Slack Notifications","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":1128,"to":1128}}}}],["2527",{"pageContent":"If a notification supports being sent as a Slack message, you should define a `toSlack` method on the notification class. This method will receive a `$notifiable` entity and should return an `Illuminate\\Notifications\\Slack\\SlackMessage` instance. You can construct rich notifications using [Slack's Block Kit API](https://api.slack.com/block-kit). The following example may be previewed in [Slack's Block Kit","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2182,"to":2182}}}}],["2528",{"pageContent":"an `Illuminate\\Notifications\\Slack\\SlackMessage` instance. You can construct rich notifications using [Slack's Block Kit API](https://api.slack.com/block-kit). The following example may be previewed in [Slack's Block Kit builder](https://app.slack.com/block-kit-builder/T01KWS6K23Z#%7B%22blocks%22:%5B%7B%22type%22:%22header%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22Invoice%20Paid%22%7D%7D,%7B%22type%22:%22context%22,%22elements%22:%5B%7B%22type%22:%22plain_text%22,%22text%22:%22Customer%20%231234%22%7D%5D%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22An%20invoice%20has%20been%20paid.%22%7D,%22fields%22:%5B%7B%22type%22:%22mrkdwn%22,%22text%22:%22*Invoice%20No:*%5Cn1000%22%7D,%7B%22type%22:%22mrkdwn%22,%22text%22:%22*Invoice%20Recipient:*%5Cntaylor@laravel.com%22%7D%5D%7D,%7B%22type%22:%22divider%22%7D,%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22plain_text%22,%22text%22:%22Congratulations!%22%7D%7D%5D%7D):","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2182,"to":2182}}}}],["2529",{"pageContent":"use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\ContextBlock;\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\SectionBlock;\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Composites\\ConfirmObject;\n    use Illuminate\\Notifications\\Slack\\SlackMessage;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2184,"to":2187}}}}],["2530",{"pageContent":"/**\n     * Get the Slack representation of the notification.\n     */\n    public function toSlack(object $notifiable): SlackMessage\n    {\n        return (new SlackMessage)\n                ->text('One of your invoices has been paid!')\n                ->headerBlock('Invoice Paid')\n                ->contextBlock(function (ContextBlock $block) {\n                    $block->text('Customer #1234');\n                })\n                ->sectionBlock(function (SectionBlock $block) {\n                    $block->text('An invoice has been paid.');\n                    $block->field(\"*Invoice No:*\\n1000\")->markdown();\n                    $block->field(\"*Invoice Recipient:*\\ntaylor@laravel.com\")->markdown();\n                })\n                ->dividerBlock()\n                ->sectionBlock(function (SectionBlock $block) {\n                    $block->text('Congratulations!');\n                });\n    }\n\n<a name=\"slack-interactivity\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2189,"to":2211}}}}],["2531",{"pageContent":"Slack Interactivity\n\nSlack's Block Kit notification system provides powerful features to [handle user interaction](https://api.slack.com/interactivity/handling). To utilize these features, your Slack App should have \"Interactivity\" enabled and a \"Request URL\" configured that points to a URL served by your application. These settings can be managed from the \"Interactivity & Shortcuts\" App management tab within Slack.\n\nIn the following example, which utilizes the `actionsBlock` method, Slack will send a `POST` request to your \"Request URL\" with a payload containing the Slack user who clicked the button, the ID of the clicked button, and more. Your application can then determine the action to take based on the payload. You should also [verify the request](https://api.slack.com/authentication/verifying-requests-from-slack) was made by Slack:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2212,"to":2216}}}}],["2532",{"pageContent":"use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\ActionsBlock;\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\ContextBlock;\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\SectionBlock;\n    use Illuminate\\Notifications\\Slack\\SlackMessage;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2218,"to":2221}}}}],["2533",{"pageContent":"/**\n     * Get the Slack representation of the notification.\n     */\n    public function toSlack(object $notifiable): SlackMessage\n    {\n        return (new SlackMessage)\n                ->text('One of your invoices has been paid!')\n                ->headerBlock('Invoice Paid')\n                ->contextBlock(function (ContextBlock $block) {\n                    $block->text('Customer #1234');\n                })\n                ->sectionBlock(function (SectionBlock $block) {\n                    $block->text('An invoice has been paid.');\n                })\n                ->actionsBlock(function (ActionsBlock $block) {\n                     // ID defaults to \"button_acknowledge_invoice\"...\n                    $block->button('Acknowledge Invoice')->primary();\n\n                    // Manually configure the ID...\n                    $block->button('Deny')->danger()->id('deny_invoice');\n                });\n    }\n\n<a name=\"slack-confirmation-modals\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2223,"to":2246}}}}],["2534",{"pageContent":"Confirmation Modals\n\nIf you would like users to be required to confirm an action before it is performed, you may invoke the `confirm` method when defining your button. The `confirm` method accepts a message and a closure which receives a `ConfirmObject` instance:\n\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\ActionsBlock;\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\ContextBlock;\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Blocks\\SectionBlock;\n    use Illuminate\\Notifications\\Slack\\BlockKit\\Composites\\ConfirmObject;\n    use Illuminate\\Notifications\\Slack\\SlackMessage;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2247,"to":2255}}}}],["2535",{"pageContent":"/**\n     * Get the Slack representation of the notification.\n     */\n    public function toSlack(object $notifiable): SlackMessage\n    {\n        return (new SlackMessage)\n                ->text('One of your invoices has been paid!')\n                ->headerBlock('Invoice Paid')\n                ->contextBlock(function (ContextBlock $block) {\n                    $block->text('Customer #1234');\n                })\n                ->sectionBlock(function (SectionBlock $block) {\n                    $block->text('An invoice has been paid.');\n                })\n                ->actionsBlock(function (ActionsBlock $block) {\n                    $block->button('Acknowledge Invoice')\n                        ->primary()\n                        ->confirm(\n                            'Acknowledge the payment and send a thank you email?',\n                            function (ConfirmObject $dialog) {\n                                $dialog->confirm('Yes');\n                                $dialog->deny('No');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2257,"to":2278}}}}],["2536",{"pageContent":"function (ConfirmObject $dialog) {\n                                $dialog->confirm('Yes');\n                                $dialog->deny('No');\n                            }\n                        );\n                });\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2278,"to":2284}}}}],["2537",{"pageContent":"<a name=\"inspecting-slack-blocks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2286,"to":2286}}}}],["2538",{"pageContent":"Inspecting Slack Blocks\n\nIf you would like to quickly inspect the blocks you've been building, you can invoke the `dd` method on the `SlackMessage` instance. The `dd` method will generate and dump a URL to Slack's [Block Kit Builder](https://app.slack.com/block-kit-builder/), which displays a preview of the payload and notification in your browser. You may pass `true` to the `dd` method to dump the raw payload:\n\n    return (new SlackMessage)\n            ->text('One of your invoices has been paid!')\n            ->headerBlock('Invoice Paid')\n            ->dd();\n\n<a name=\"routing-slack-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2287,"to":2296}}}}],["2539",{"pageContent":"Routing Slack Notifications\n\nTo direct Slack notifications to the appropriate Slack team and channel, define a `routeNotificationForSlack` method on your notifiable model. This method can return one of three values:\n\n- `null` - which defers routing to the channel configured in the notification itself. You may use the `to` method when building your `SlackMessage` to configure the channel within the notification.\n- A string specifying the Slack channel to send the notification to, e.g. `#support-channel`.\n- A `SlackRoute` instance, which allows you to specify an OAuth token and channel name, e.g. `SlackRoute::make($this->slack_channel, $this->slack_token)`. This method should be used to send notifications to external workspaces.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2297,"to":2303}}}}],["2540",{"pageContent":"For instance, returning `#support-channel` from the `routeNotificationForSlack` method will send the notification to the `#support-channel` channel in the workspace associated with the Bot User OAuth token located in your application's `services.php` configuration file:\n \n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n    use Illuminate\\Notifications\\Notification;\n\n    class User extends Authenticatable\n    {\n        use Notifiable;\n\n        /**\n         * Route notifications for the Slack channel.\n         */\n        public function routeNotificationForSlack(Notification $notification): mixed\n        {\n            return '#support-channel';\n        }\n    }\n\n<a name=\"notifying-external-slack-workspaces\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2305,"to":2328}}}}],["2541",{"pageContent":"Notifying External Slack Workspaces\n\n> **Note**\n> Before sending notifications to external Slack workspaces, your Slack App must be [distributed](#slack-app-distribution).\n\nOf course, you will often want to send notifications to the Slack workspaces owned by your application's users. To do so, you will first need to obtain a Slack OAuth token for the user. Thankfully, [Laravel Socialite](/docs/{{version}}/socialite) includes a Slack driver that will allow you to easily authenticate your application's users with Slack and [obtain a bot token](/docs/{{version}}/socialite#slack-bot-scopes).\n\nOnce you have obtained the bot token and stored it within your application's database, you may utilize the `SlackRoute::make` method to route a notification to the user's workspace. In addition, your application will likely need to offer an opportunity for the user to specify which channel notifications should be sent to:\n\n    <?php\n\n    namespace App\\Models;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2329,"to":2340}}}}],["2542",{"pageContent":"<?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n    use Illuminate\\Notifications\\Notification;\n    use Illuminate\\Notifications\\Slack\\SlackRoute;\n\n    class User extends Authenticatable\n    {\n        use Notifiable;\n\n        /**\n         * Route notifications for the Slack channel.\n         */\n        public function routeNotificationForSlack(Notification $notification): mixed\n        {\n            return SlackRoute::make($this->slack_channel, $this->slack_token);\n        }\n    }\n\n<a name=\"localizing-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2340,"to":2362}}}}],["2543",{"pageContent":"Localizing Notifications\n\nLaravel allows you to send notifications in a locale other than the HTTP request's current locale, and will even remember this locale if the notification is queued.\n\nTo accomplish this, the `Illuminate\\Notifications\\Notification` class offers a `locale` method to set the desired language. The application will change into this locale when the notification is being evaluated and then revert back to the previous locale when evaluation is complete:\n\n    $user->notify((new InvoicePaid($invoice))->locale('es'));\n\nLocalization of multiple notifiable entries may also be achieved via the `Notification` facade:\n\n    Notification::locale('es')->send(\n        $users, new InvoicePaid($invoice)\n    );\n\n<a name=\"user-preferred-locales\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2363,"to":2377}}}}],["2544",{"pageContent":"User Preferred Locales\n\nSometimes, applications store each user's preferred locale. By implementing the `HasLocalePreference` contract on your notifiable model, you may instruct Laravel to use this stored locale when sending a notification:\n\n    use Illuminate\\Contracts\\Translation\\HasLocalePreference;\n\n    class User extends Model implements HasLocalePreference\n    {\n        /**\n         * Get the user's preferred locale.\n         */\n        public function preferredLocale(): string\n        {\n            return $this->locale;\n        }\n    }\n\nOnce you have implemented the interface, Laravel will automatically use the preferred locale when sending notifications and mailables to the model. Therefore, there is no need to call the `locale` method when using this interface:\n\n    $user->notify(new InvoicePaid($invoice));\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2378,"to":2399}}}}],["2545",{"pageContent":"Testing\n\nYou may use the `Notification` facade's `fake` method to prevent notifications from being sent. Typically, sending notifications is unrelated to the code you are actually testing. Most likely, it is sufficient to simply assert that Laravel was instructed to send a given notification.\n\nAfter calling the `Notification` facade's `fake` method, you may then assert that notifications were instructed to be sent to users and even inspect the data the notifications received:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use App\\Notifications\\OrderShipped;\n    use Illuminate\\Support\\Facades\\Notification;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_orders_can_be_shipped(): void\n        {\n            Notification::fake();\n\n            // Perform order shipping...\n\n            // Assert that no notifications were sent...\n            Notification::assertNothingSent();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2400,"to":2423}}}}],["2546",{"pageContent":"// Perform order shipping...\n\n            // Assert that no notifications were sent...\n            Notification::assertNothingSent();\n\n            // Assert a notification was sent to the given users...\n            Notification::assertSentTo(\n                [$user], OrderShipped::class\n            );\n\n            // Assert a notification was not sent...\n            Notification::assertNotSentTo(\n                [$user], AnotherNotification::class\n            );\n\n            // Assert that a given number of notifications were sent...\n            Notification::assertCount(3);\n        }\n    }\n\nYou may pass a closure to the `assertSentTo` or `assertNotSentTo` methods in order to assert that a notification was sent that passes a given \"truth test\". If at least one notification was sent that passes the given truth test then the assertion will be successful:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2423,"to":2443}}}}],["2547",{"pageContent":"Notification::assertSentTo(\n        $user,\n        function (OrderShipped $notification, array $channels) use ($order) {\n            return $notification->order->id === $order->id;\n        }\n    );\n\n<a name=\"on-demand-notifications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2445,"to":2452}}}}],["2548",{"pageContent":"On-Demand Notifications\n\nIf the code you are testing sends [on-demand notifications](#on-demand-notifications), you can test that the on-demand notification was sent via the `assertSentOnDemand` method:\n\n    Notification::assertSentOnDemand(OrderShipped::class);\n\nBy passing a closure as the second argument to the `assertSentOnDemand` method, you may determine if an on-demand notification was sent to the correct \"route\" address:\n\n    Notification::assertSentOnDemand(\n        OrderShipped::class,\n        function (OrderShipped $notification, array $channels, object $notifiable) use ($user) {\n            return $notifiable->routes['mail'] === $user->email;\n        }\n    );\n\n<a name=\"notification-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2453,"to":2468}}}}],["2549",{"pageContent":"Notification Events\n\n<a name=\"notification-sending-event\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2469,"to":2471}}}}],["2550",{"pageContent":"Notification Sending Event\n\nWhen a notification is sending, the `Illuminate\\Notifications\\Events\\NotificationSending` [event](/docs/{{version}}/events) is dispatched by the notification system. This contains the \"notifiable\" entity and the notification instance itself. You may register listeners for this event in your application's `EventServiceProvider`:\n\n    use App\\Listeners\\CheckNotificationStatus;\n    use Illuminate\\Notifications\\Events\\NotificationSending;\n    \n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        NotificationSending::class => [\n            CheckNotificationStatus::class,\n        ],\n    ];\n\nThe notification will not be sent if an event listener for the `NotificationSending` event returns `false` from its `handle` method:\n\n    use Illuminate\\Notifications\\Events\\NotificationSending;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2472,"to":2492}}}}],["2551",{"pageContent":"The notification will not be sent if an event listener for the `NotificationSending` event returns `false` from its `handle` method:\n\n    use Illuminate\\Notifications\\Events\\NotificationSending;\n\n    /**\n     * Handle the event.\n     */\n    public function handle(NotificationSending $event): bool\n    {\n        return false;\n    }\n\nWithin an event listener, you may access the `notifiable`, `notification`, and `channel` properties on the event to learn more about the notification recipient or the notification itself:\n\n    /**\n     * Handle the event.\n     */\n    public function handle(NotificationSending $event): void\n    {\n        // $event->channel\n        // $event->notifiable\n        // $event->notification\n    }\n\n<a name=\"notification-sent-event\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2492,"to":2516}}}}],["2552",{"pageContent":"Notification Sent Event\n\nWhen a notification is sent, the `Illuminate\\Notifications\\Events\\NotificationSent` [event](/docs/{{version}}/events) is dispatched by the notification system. This contains the \"notifiable\" entity and the notification instance itself. You may register listeners for this event in your `EventServiceProvider`:\n\n    use App\\Listeners\\LogNotification;\n    use Illuminate\\Notifications\\Events\\NotificationSent;\n    \n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        NotificationSent::class => [\n            LogNotification::class,\n        ],\n    ];\n\n> **Note**  \n> After registering listeners in your `EventServiceProvider`, use the `event:generate` Artisan command to quickly generate listener classes.\n\nWithin an event listener, you may access the `notifiable`, `notification`, `channel`, and `response` properties on the event to learn more about the notification recipient or the notification itself:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2517,"to":2538}}}}],["2553",{"pageContent":"Within an event listener, you may access the `notifiable`, `notification`, `channel`, and `response` properties on the event to learn more about the notification recipient or the notification itself:\n\n    /**\n     * Handle the event.\n     */\n    public function handle(NotificationSent $event): void\n    {\n        // $event->channel\n        // $event->notifiable\n        // $event->notification\n        // $event->response\n    }\n\n<a name=\"custom-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2538,"to":2551}}}}],["2554",{"pageContent":"Custom Channels\n\nLaravel ships with a handful of notification channels, but you may want to write your own drivers to deliver notifications via other channels. Laravel makes it simple. To get started, define a class that contains a `send` method. The method should receive two arguments: a `$notifiable` and a `$notification`.\n\nWithin the `send` method, you may call methods on the notification to retrieve a message object understood by your channel and then send the notification to the `$notifiable` instance however you wish:\n\n    <?php\n\n    namespace App\\Notifications;\n\n    use Illuminate\\Notifications\\Notification;\n\n    class VoiceChannel\n    {\n        /**\n         * Send the given notification.\n         */\n        public function send(object $notifiable, Notification $notification): void\n        {\n            $message = $notification->toVoice($notifiable);\n\n            // Send notification to the $notifiable instance...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2552,"to":2575}}}}],["2555",{"pageContent":"// Send notification to the $notifiable instance...\n        }\n    }\n\nOnce your notification channel class has been defined, you may return the class name from the `via` method of any of your notifications. In this example, the `toVoice` method of your notification can return whatever object you choose to represent voice messages. For example, you might define your own `VoiceMessage` class to represent these messages:\n\n    <?php\n\n    namespace App\\Notifications;\n\n    use App\\Notifications\\Messages\\VoiceMessage;\n    use App\\Notifications\\VoiceChannel;\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Notifications\\Notification;\n\n    class InvoicePaid extends Notification\n    {\n        use Queueable;\n\n        /**\n         * Get the notification channels.\n         */\n        public function via(object $notifiable): string\n        {\n            return VoiceChannel::class;\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2575,"to":2601}}}}],["2556",{"pageContent":"/**\n         * Get the notification channels.\n         */\n        public function via(object $notifiable): string\n        {\n            return VoiceChannel::class;\n        }\n\n        /**\n         * Get the voice representation of the notification.\n         */\n        public function toVoice(object $notifiable): VoiceMessage\n        {\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/notifications.md","loc":{"lines":{"from":2601,"to":2616}}}}],["2557",{"pageContent":"# Laravel Octane","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":1,"to":1}}}}],["2558",{"pageContent":"- [Introduction](#introduction)\n- [Installation](#installation)\n- [Server Prerequisites](#server-prerequisites)\n    - [RoadRunner](#roadrunner)\n    - [Swoole](#swoole)\n- [Serving Your Application](#serving-your-application)\n    - [Serving Your Application Via HTTPS](#serving-your-application-via-https)\n    - [Serving Your Application Via Nginx](#serving-your-application-via-nginx)\n    - [Watching For File Changes](#watching-for-file-changes)\n    - [Specifying The Worker Count](#specifying-the-worker-count)\n    - [Specifying The Max Request Count](#specifying-the-max-request-count)\n    - [Reloading The Workers](#reloading-the-workers)\n    - [Stopping The Server](#stopping-the-server)\n- [Dependency Injection & Octane](#dependency-injection-and-octane)\n    - [Container Injection](#container-injection)\n    - [Request Injection](#request-injection)\n    - [Configuration Repository Injection](#configuration-repository-injection)\n- [Managing Memory Leaks](#managing-memory-leaks)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":3,"to":20}}}}],["2559",{"pageContent":"- [Request Injection](#request-injection)\n    - [Configuration Repository Injection](#configuration-repository-injection)\n- [Managing Memory Leaks](#managing-memory-leaks)\n- [Concurrent Tasks](#concurrent-tasks)\n- [Ticks & Intervals](#ticks-and-intervals)\n- [The Octane Cache](#the-octane-cache)\n- [Tables](#tables)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":20,"to":26}}}}],["2560",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":28,"to":28}}}}],["2561",{"pageContent":"Introduction\n\n[Laravel Octane](https://github.com/laravel/octane) supercharges your application's performance by serving your application using high-powered application servers, including [Open Swoole](https://openswoole.com/), [Swoole](https://github.com/swoole/swoole-src), and [RoadRunner](https://roadrunner.dev). Octane boots your application once, keeps it in memory, and then feeds it requests at supersonic speeds.\n\n<a name=\"installation\"></a>\n## Installation\n\nOctane may be installed via the Composer package manager:\n\n```shell\ncomposer require laravel/octane\n```\n\nAfter installing Octane, you may execute the `octane:install` Artisan command, which will install Octane's configuration file into your application:\n\n```shell\nphp artisan octane:install\n```\n\n<a name=\"server-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":29,"to":48}}}}],["2562",{"pageContent":"Server Prerequisites\n\n> **Warning**\n> Laravel Octane requires [PHP 8.1+](https://php.net/releases/).\n\n<a name=\"roadrunner\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":49,"to":54}}}}],["2563",{"pageContent":"RoadRunner\n\n[RoadRunner](https://roadrunner.dev) is powered by the RoadRunner binary, which is built using Go. The first time you start a RoadRunner based Octane server, Octane will offer to download and install the RoadRunner binary for you.\n\n<a name=\"roadrunner-via-laravel-sail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":55,"to":59}}}}],["2564",{"pageContent":"RoadRunner Via Laravel Sail\n\nIf you plan to develop your application using [Laravel Sail](/docs/{{version}}/sail), you should run the following commands to install Octane and RoadRunner:\n\n```shell\n./vendor/bin/sail up\n\n./vendor/bin/sail composer require laravel/octane spiral/roadrunner-cli spiral/roadrunner-http \n```\n\nNext, you should start a Sail shell and use the `rr` executable to retrieve the latest Linux based build of the RoadRunner binary:\n\n```shell\n./vendor/bin/sail shell\n\n# Within the Sail shell...\n./vendor/bin/rr get-binary\n```\n\nAfter installing the RoadRunner binary, you may exit your Sail shell session. You will now need to adjust the `supervisor.conf` file used by Sail to keep your application running. To get started, execute the `sail:publish` Artisan command:\n\n```shell\n./vendor/bin/sail artisan sail:publish","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":60,"to":82}}}}],["2565",{"pageContent":"Next, update the `command` directive of your application's `docker/supervisord.conf` file so that Sail serves your application using Octane instead of the PHP development server:\n\n```ini\ncommand=/usr/bin/php -d variables_order=EGPCS /var/www/html/artisan octane:start --server=roadrunner --host=0.0.0.0 --rpc-port=6001 --port=80\n```\n\nFinally, ensure the `rr` binary is executable and build your Sail images:\n\n```shell\nchmod +x ./rr\n\n./vendor/bin/sail build --no-cache\n```\n\n<a name=\"swoole\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":85,"to":99}}}}],["2566",{"pageContent":"Swoole\n\nIf you plan to use the Swoole application server to serve your Laravel Octane application, you must install the Swoole PHP extension. Typically, this can be done via PECL:\n\n```shell\npecl install swoole\n```\n\n<a name=\"openswoole\"></a>\n#### Open Swoole\n\nIf you want to use the Open Swoole application server to serve your Laravel Octane application, you must install the Open Swoole PHP extension. Typically, this can be done via PECL:\n\n```shell\npecl install openswoole\n```\n\nUsing Laravel Octane with Open Swoole grants the same functionality provided by Swoole, such as concurrent tasks, ticks, and intervals.\n\n<a name=\"swoole-via-laravel-sail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":100,"to":119}}}}],["2567",{"pageContent":"Swoole Via Laravel Sail\n\n> **Warning**\n> Before serving an Octane application via Sail, ensure you have the latest version of Laravel Sail and execute `./vendor/bin/sail build --no-cache` within your application's root directory.\n\nAlternatively, you may develop your Swoole based Octane application using [Laravel Sail](/docs/{{version}}/sail), the official Docker based development environment for Laravel. Laravel Sail includes the Swoole extension by default. However, you will still need to adjust the `supervisor.conf` file used by Sail to keep your application running. To get started, execute the `sail:publish` Artisan command:\n\n```shell\n./vendor/bin/sail artisan sail:publish\n```\n\nNext, update the `command` directive of your application's `docker/supervisord.conf` file so that Sail serves your application using Octane instead of the PHP development server:\n\n```ini\ncommand=/usr/bin/php -d variables_order=EGPCS /var/www/html/artisan octane:start --server=swoole --host=0.0.0.0 --port=80","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":120,"to":134}}}}],["2568",{"pageContent":"Finally, build your Sail images:\n\n```shell\n./vendor/bin/sail build --no-cache\n```\n\n<a name=\"swoole-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":137,"to":143}}}}],["2569",{"pageContent":"Swoole Configuration\n\nSwoole supports a few additional configuration options that you may add to your `octane` configuration file if necessary. Because they rarely need to be modified, these options are not included in the default configuration file:\n\n```php\n'swoole' => [\n    'options' => [\n        'log_file' => storage_path('logs/swoole_http.log'),\n        'package_max_length' => 10 * 1024 * 1024,\n    ],\n],\n```\n\n<a name=\"serving-your-application\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":144,"to":157}}}}],["2570",{"pageContent":"Serving Your Application\n\nThe Octane server can be started via the `octane:start` Artisan command. By default, this command will utilize the server specified by the `server` configuration option of your application's `octane` configuration file:\n\n```shell\nphp artisan octane:start\n```\n\nBy default, Octane will start the server on port 8000, so you may access your application in a web browser via `http://localhost:8000`.\n\n<a name=\"serving-your-application-via-https\"></a>\n### Serving Your Application Via HTTPS\n\nBy default, applications running via Octane generate links prefixed with `http://`. The `OCTANE_HTTPS` environment variable, used within your application's `config/octane.php` configuration file, can be set to `true` when serving your application via HTTPS. When this configuration value is set to `true`, Octane will instruct Laravel to prefix all generated links with `https://`:\n\n```php\n'https' => env('OCTANE_HTTPS', false),\n```\n\n<a name=\"serving-your-application-via-nginx\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":158,"to":177}}}}],["2571",{"pageContent":"Serving Your Application Via Nginx\n\n> **Note**\n> If you aren't quite ready to manage your own server configuration or aren't comfortable configuring all of the various services needed to run a robust Laravel Octane application, check out [Laravel Forge](https://forge.laravel.com).\n\nIn production environments, you should serve your Octane application behind a traditional web server such as Nginx or Apache. Doing so will allow the web server to serve your static assets such as images and stylesheets, as well as manage your SSL certificate termination.\n\nIn the Nginx configuration example below, Nginx will serve the site's static assets and proxy requests to the Octane server that is running on port 8000:\n\n```nginx\nmap $http_upgrade $connection_upgrade {\n    default upgrade;\n    ''      close;\n}\n\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name domain.com;\n    server_tokens off;\n    root /home/forge/domain.com/public;\n\n    index index.php;\n\n    charset utf-8;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":178,"to":202}}}}],["2572",{"pageContent":"server {\n    listen 80;\n    listen [::]:80;\n    server_name domain.com;\n    server_tokens off;\n    root /home/forge/domain.com/public;\n\n    index index.php;\n\n    charset utf-8;\n\n    location /index.php {\n        try_files /not_exists @octane;\n    }\n\n    location / {\n        try_files $uri $uri/ @octane;\n    }\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location = /robots.txt  { access_log off; log_not_found off; }\n\n    access_log off;\n    error_log  /var/log/nginx/domain.com-error.log error;\n\n    error_page 404 /index.php;\n\n    location @octane {\n        set $suffix \"\";\n\n        if ($uri = /index.php) {\n            set $suffix ?$query_string;\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":202,"to":234}}}}],["2573",{"pageContent":"error_page 404 /index.php;\n\n    location @octane {\n        set $suffix \"\";\n\n        if ($uri = /index.php) {\n            set $suffix ?$query_string;\n        }\n\n        proxy_http_version 1.1;\n        proxy_set_header Host $http_host;\n        proxy_set_header Scheme $scheme;\n        proxy_set_header SERVER_PORT $server_port;\n        proxy_set_header REMOTE_ADDR $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n\n        proxy_pass http://127.0.0.1:8000$suffix;\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":234,"to":254}}}}],["2574",{"pageContent":"<a name=\"watching-for-file-changes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":257,"to":257}}}}],["2575",{"pageContent":"Watching For File Changes\n\nSince your application is loaded in memory once when the Octane server starts, any changes to your application's files will not be reflected when you refresh your browser. For example, route definitions added to your `routes/web.php` file will not be reflected until the server is restarted. For convenience, you may use the `--watch` flag to instruct Octane to automatically restart the server on any file changes within your application:\n\n```shell\nphp artisan octane:start --watch\n```\n\nBefore using this feature, you should ensure that [Node](https://nodejs.org) is installed within your local development environment. In addition, you should install the [Chokidar](https://github.com/paulmillr/chokidar) file-watching library within your project:\n\n```shell\nnpm install --save-dev chokidar","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":258,"to":269}}}}],["2576",{"pageContent":"You may configure the directories and files that should be watched using the `watch` configuration option within your application's `config/octane.php` configuration file.\n\n<a name=\"specifying-the-worker-count\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":272,"to":274}}}}],["2577",{"pageContent":"Specifying The Worker Count\n\nBy default, Octane will start an application request worker for each CPU core provided by your machine. These workers will then be used to serve incoming HTTP requests as they enter your application. You may manually specify how many workers you would like to start using the `--workers` option when invoking the `octane:start` command:\n\n```shell\nphp artisan octane:start --workers=4\n```\n\nIf you are using the Swoole application server, you may also specify how many [\"task workers\"](#concurrent-tasks) you wish to start:\n\n```shell\nphp artisan octane:start --workers=4 --task-workers=6\n```\n\n<a name=\"specifying-the-max-request-count\"></a>\n### Specifying The Max Request Count\n\nTo help prevent stray memory leaks, Octane gracefully restarts any worker once it has handled 500 requests. To adjust this number, you may use the `--max-requests` option:\n\n```shell\nphp artisan octane:start --max-requests=250\n```\n\n<a name=\"reloading-the-workers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":275,"to":298}}}}],["2578",{"pageContent":"Reloading The Workers\n\nYou may gracefully restart the Octane server's application workers using the `octane:reload` command. Typically, this should be done after deployment so that your newly deployed code is loaded into memory and is used to serve to subsequent requests:\n\n```shell\nphp artisan octane:reload\n```\n\n<a name=\"stopping-the-server\"></a>\n### Stopping The Server\n\nYou may stop the Octane server using the `octane:stop` Artisan command:\n\n```shell\nphp artisan octane:stop\n```\n\n<a name=\"checking-the-server-status\"></a>\n#### Checking The Server Status\n\nYou may check the current status of the Octane server using the `octane:status` Artisan command:\n\n```shell\nphp artisan octane:status\n```\n\n<a name=\"dependency-injection-and-octane\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":299,"to":325}}}}],["2579",{"pageContent":"Dependency Injection & Octane\n\nSince Octane boots your application once and keeps it in memory while serving requests, there are a few caveats you should consider while building your application. For example, the `register` and `boot` methods of your application's service providers will only be executed once when the request worker initially boots. On subsequent requests, the same application instance will be reused.\n\nIn light of this, you should take special care when injecting the application service container or request into any object's constructor. By doing so, that object may have a  stale version of the container or request on subsequent requests.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":326,"to":330}}}}],["2580",{"pageContent":"Octane will automatically handle resetting any first-party framework state between requests. However, Octane does not always know how to reset the global state created by your application. Therefore, you should be aware of how to build your application in a way that is Octane friendly. Below, we will discuss the most common situations that may cause problems while using Octane.\n\n<a name=\"container-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":332,"to":334}}}}],["2581",{"pageContent":"Container Injection\n\nIn general, you should avoid injecting the application service container or HTTP request instance into the constructors of other objects. For example, the following binding injects the entire application service container into an object that is bound as a singleton:\n\n```php\nuse App\\Service;\nuse Illuminate\\Contracts\\Foundation\\Application;\n\n/**\n * Register any application services.\n */\npublic function register(): void\n{\n    $this->app->singleton(Service::class, function (Application $app) {\n        return new Service($app);\n    });\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":335,"to":351}}}}],["2582",{"pageContent":"In this example, if the `Service` instance is resolved during the application boot process, the container will be injected into the service and that same container will be held by the `Service` instance on subsequent requests. This **may** not be a problem for your particular application; however, it can lead to the container unexpectedly missing bindings that were added later in the boot cycle or by a subsequent request.\n\nAs a work-around, you could either stop registering the binding as a singleton, or you could inject a container resolver closure into the service that always resolves the current container instance:\n\n```php\nuse App\\Service;\nuse Illuminate\\Container\\Container;\nuse Illuminate\\Contracts\\Foundation\\Application;\n\n$this->app->bind(Service::class, function (Application $app) {\n    return new Service($app);\n});\n\n$this->app->singleton(Service::class, function () {\n    return new Service(fn () => Container::getInstance());\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":354,"to":369}}}}],["2583",{"pageContent":"The global `app` helper and the `Container::getInstance()` method will always return the latest version of the application container.\n\n<a name=\"request-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":372,"to":374}}}}],["2584",{"pageContent":"Request Injection\n\nIn general, you should avoid injecting the application service container or HTTP request instance into the constructors of other objects. For example, the following binding injects the entire request instance into an object that is bound as a singleton:\n\n```php\nuse App\\Service;\nuse Illuminate\\Contracts\\Foundation\\Application;\n\n/**\n * Register any application services.\n */\npublic function register(): void\n{\n    $this->app->singleton(Service::class, function (Application $app) {\n        return new Service($app['request']);\n    });\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":375,"to":391}}}}],["2585",{"pageContent":"In this example, if the `Service` instance is resolved during the application boot process, the HTTP request will be injected into the service and that same request will be held by the `Service` instance on subsequent requests. Therefore, all headers, input, and query string data will be incorrect, as well as all other request data.\n\nAs a work-around, you could either stop registering the binding as a singleton, or you could inject a request resolver closure into the service that always resolves the current request instance. Or, the most recommended approach is simply to pass the specific request information your object needs to one of the object's methods at runtime:\n\n```php\nuse App\\Service;\nuse Illuminate\\Contracts\\Foundation\\Application;\n\n$this->app->bind(Service::class, function (Application $app) {\n    return new Service($app['request']);\n});\n\n$this->app->singleton(Service::class, function (Application $app) {\n    return new Service(fn () => $app['request']);\n});\n\n// Or...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":394,"to":410}}}}],["2586",{"pageContent":"$this->app->singleton(Service::class, function (Application $app) {\n    return new Service(fn () => $app['request']);\n});\n\n// Or...\n\n$service->method($request->input('name'));","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":410,"to":416}}}}],["2587",{"pageContent":"The global `request` helper will always return the request the application is currently handling and is therefore safe to use within your application.\n\n> **Warning**\n> It is acceptable to type-hint the `Illuminate\\Http\\Request` instance on your controller methods and route closures.\n\n<a name=\"configuration-repository-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":419,"to":424}}}}],["2588",{"pageContent":"Configuration Repository Injection\n\nIn general, you should avoid injecting the configuration repository instance into the constructors of other objects. For example, the following binding injects the configuration repository into an object that is bound as a singleton:\n\n```php\nuse App\\Service;\nuse Illuminate\\Contracts\\Foundation\\Application;\n\n/**\n * Register any application services.\n */\npublic function register(): void\n{\n    $this->app->singleton(Service::class, function (Application $app) {\n        return new Service($app->make('config'));\n    });\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":425,"to":441}}}}],["2589",{"pageContent":"In this example, if the configuration values change between requests, that service will not have access to the new values because it's depending on the original repository instance.\n\nAs a work-around, you could either stop registering the binding as a singleton, or you could inject a configuration repository resolver closure to the class:\n\n```php\nuse App\\Service;\nuse Illuminate\\Container\\Container;\nuse Illuminate\\Contracts\\Foundation\\Application;\n\n$this->app->bind(Service::class, function (Application $app) {\n    return new Service($app->make('config'));\n});\n\n$this->app->singleton(Service::class, function () {\n    return new Service(fn () => Container::getInstance()->make('config'));\n});\n```\n\nThe global `config` will always return the latest version of the configuration repository and is therefore safe to use within your application.\n\n<a name=\"managing-memory-leaks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":444,"to":464}}}}],["2590",{"pageContent":"Managing Memory Leaks\n\nRemember, Octane keeps your application in memory between requests; therefore, adding data to a statically maintained array will result in a memory leak. For example, the following controller has a memory leak since each request to the application will continue to add data to the static `$data` array:\n\n```php\nuse App\\Service;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Str;\n\n/**\n * Handle an incoming request.\n */\npublic function index(Request $request): array\n{\n    Service::$data[] = Str::random(10);\n\n    return [\n        // ...\n    ];\n}\n```\n\nWhile building your application, you should take special care to avoid creating these types of memory leaks. It is recommended that you monitor your application's memory usage during local development to ensure you are not introducing new memory leaks into your application.\n\n<a name=\"concurrent-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":465,"to":489}}}}],["2591",{"pageContent":"Concurrent Tasks\n\n> **Warning**\n> This feature requires [Swoole](#swoole).\n\nWhen using Swoole, you may execute operations concurrently via light-weight background tasks. You may accomplish this using Octane's `concurrently` method. You may combine this method with PHP array destructuring to retrieve the results of each operation:\n\n```php\nuse App\\Models\\User;\nuse App\\Models\\Server;\nuse Laravel\\Octane\\Facades\\Octane;\n\n[$users, $servers] = Octane::concurrently([\n    fn () => User::all(),\n    fn () => Server::all(),\n]);\n```\n\nConcurrent tasks processed by Octane utilize Swoole's \"task workers\", and execute within an entirely different process than the incoming request. The amount of workers available to process concurrent tasks is determined by the `--task-workers` directive on the `octane:start` command:\n\n```shell\nphp artisan octane:start --workers=4 --task-workers=6","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":490,"to":511}}}}],["2592",{"pageContent":"When invoking the `concurrently` method, you should not provide more than 1024 tasks due to limitations imposed by Swoole's task system.\n\n<a name=\"ticks-and-intervals\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":514,"to":516}}}}],["2593",{"pageContent":"Ticks & Intervals\n\n> **Warning**\n> This feature requires [Swoole](#swoole).\n\nWhen using Swoole, you may register \"tick\" operations that will be executed every specified number of seconds. You may register \"tick\" callbacks via the `tick` method. The first argument provided to the `tick` method should be a string that represents the name of the ticker. The second argument should be a callable that will be invoked at the specified interval.\n\nIn this example, we will register a closure to be invoked every 10 seconds. Typically, the `tick` method should be called within the `boot` method of one of your application's service providers:\n\n```php\nOctane::tick('simple-ticker', fn () => ray('Ticking...'))\n        ->seconds(10);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":517,"to":528}}}}],["2594",{"pageContent":"Using the `immediate` method, you may instruct Octane to immediately invoke the tick callback when the Octane server initially boots, and every N seconds thereafter:\n\n```php\nOctane::tick('simple-ticker', fn () => ray('Ticking...'))\n        ->seconds(10)\n        ->immediate();\n```\n\n<a name=\"the-octane-cache\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":531,"to":539}}}}],["2595",{"pageContent":"The Octane Cache\n\n> **Warning**\n> This feature requires [Swoole](#swoole).\n\nWhen using Swoole, you may leverage the Octane cache driver, which provides read and write speeds of up to 2 million operations per second. Therefore, this cache driver is an excellent choice for applications that need extreme read / write speeds from their caching layer.\n\nThis cache driver is powered by [Swoole tables](https://www.swoole.co.uk/docs/modules/swoole-table). All data stored in the cache is available to all workers on the server. However, the cached data will be flushed when the server is restarted:\n\n```php\nCache::store('octane')->put('framework', 'Laravel', 30);\n```\n\n> **Note**\n> The maximum number of entries allowed in the Octane cache may be defined in your application's `octane` configuration file.\n\n<a name=\"cache-intervals\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":540,"to":556}}}}],["2596",{"pageContent":"Cache Intervals\n\nIn addition to the typical methods provided by Laravel's cache system, the Octane cache driver features interval based caches. These caches are automatically refreshed at the specified interval and should be registered within the `boot` method of one of your application's service providers. For example, the following cache will be refreshed every five seconds:\n\n```php\nuse Illuminate\\Support\\Str;\n\nCache::store('octane')->interval('random', function () {\n    return Str::random(10);\n}, seconds: 5);\n```\n\n<a name=\"tables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":557,"to":569}}}}],["2597",{"pageContent":"Tables\n\n> **Warning**\n> This feature requires [Swoole](#swoole).\n\nWhen using Swoole, you may define and interact with your own arbitrary [Swoole tables](https://www.swoole.co.uk/docs/modules/swoole-table). Swoole tables provide extreme performance throughput and the data in these tables can be accessed by all workers on the server. However, the data within them will be lost when the server is restarted.\n\nTables should be defined within the `tables` configuration array of your application's `octane` configuration file. An example table that allows a maximum of 1000 rows is already configured for you. The maximum size of string columns may be configured by specifying the column size after the column type as seen below:\n\n```php\n'tables' => [\n    'example:1000' => [\n        'name' => 'string:1000',\n        'votes' => 'int',\n    ],\n],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":570,"to":585}}}}],["2598",{"pageContent":"To access a table, you may use the `Octane::table` method:\n\n```php\nuse Laravel\\Octane\\Facades\\Octane;\n\nOctane::table('example')->set('uuid', [\n    'name' => 'Nuno Maduro',\n    'votes' => 1000,\n]);\n\nreturn Octane::table('example')->get('uuid');\n```\n\n> **Warning**\n> The column types supported by Swoole tables are: `string`, `int`, and `float`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/octane.md","loc":{"lines":{"from":588,"to":602}}}}],["2599",{"pageContent":"# Package Development\n\n- [Introduction](#introduction)\n    - [A Note On Facades](#a-note-on-facades)\n- [Package Discovery](#package-discovery)\n- [Service Providers](#service-providers)\n- [Resources](#resources)\n    - [Configuration](#configuration)\n    - [Migrations](#migrations)\n    - [Routes](#routes)\n    - [Language Files](#language-files)\n    - [Views](#views)\n    - [View Components](#view-components)\n    - [\"About\" Artisan Command](#about-artisan-command)\n- [Commands](#commands)\n- [Public Assets](#public-assets)\n- [Publishing File Groups](#publishing-file-groups)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":1,"to":19}}}}],["2600",{"pageContent":"Introduction\n\nPackages are the primary way of adding functionality to Laravel. Packages might be anything from a great way to work with dates like [Carbon](https://github.com/briannesbitt/Carbon) or a package that allows you to associate files with Eloquent models like Spatie's [Laravel Media Library](https://github.com/spatie/laravel-medialibrary).\n\nThere are different types of packages. Some packages are stand-alone, meaning they work with any PHP framework. Carbon and PHPUnit are examples of stand-alone packages. Any of these packages may be used with Laravel by requiring them in your `composer.json` file.\n\nOn the other hand, other packages are specifically intended for use with Laravel. These packages may have routes, controllers, views, and configuration specifically intended to enhance a Laravel application. This guide primarily covers the development of those packages that are Laravel specific.\n\n<a name=\"a-note-on-facades\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":20,"to":28}}}}],["2601",{"pageContent":"A Note On Facades\n\nWhen writing a Laravel application, it generally does not matter if you use contracts or facades since both provide essentially equal levels of testability. However, when writing packages, your package will not typically have access to all of Laravel's testing helpers. If you would like to be able to write your package tests as if the package were installed inside a typical Laravel application, you may use the [Orchestral Testbench](https://github.com/orchestral/testbench) package.\n\n<a name=\"package-discovery\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":29,"to":33}}}}],["2602",{"pageContent":"Package Discovery\n\nIn a Laravel application's `config/app.php` configuration file, the `providers` option defines a list of service providers that should be loaded by Laravel. When someone installs your package, you will typically want your service provider to be included in this list. Instead of requiring users to manually add your service provider to the list, you may define the provider in the `extra` section of your package's `composer.json` file. In addition to service providers, you may also list any [facades](/docs/{{version}}/facades) you would like to be registered:\n\n```json\n\"extra\": {\n    \"laravel\": {\n        \"providers\": [\n            \"Barryvdh\\\\Debugbar\\\\ServiceProvider\"\n        ],\n        \"aliases\": {\n            \"Debugbar\": \"Barryvdh\\\\Debugbar\\\\Facade\"\n        }\n    }\n},","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":34,"to":48}}}}],["2603",{"pageContent":"Once your package has been configured for discovery, Laravel will automatically register its service providers and facades when it is installed, creating a convenient installation experience for your package's users.\n\n<a name=\"opting-out-of-package-discovery\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":51,"to":53}}}}],["2604",{"pageContent":"Opting Out Of Package Discovery\n\nIf you are the consumer of a package and would like to disable package discovery for a package, you may list the package name in the `extra` section of your application's `composer.json` file:\n\n```json\n\"extra\": {\n    \"laravel\": {\n        \"dont-discover\": [\n            \"barryvdh/laravel-debugbar\"\n        ]\n    }\n},\n```\n\nYou may disable package discovery for all packages using the `*` character inside of your application's `dont-discover` directive:\n\n```json\n\"extra\": {\n    \"laravel\": {\n        \"dont-discover\": [\n            \"*\"\n        ]\n    }\n},\n```\n\n<a name=\"service-providers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":54,"to":80}}}}],["2605",{"pageContent":"Service Providers\n\n[Service providers](/docs/{{version}}/providers) are the connection point between your package and Laravel. A service provider is responsible for binding things into Laravel's [service container](/docs/{{version}}/container) and informing Laravel where to load package resources such as views, configuration, and language files.\n\nA service provider extends the `Illuminate\\Support\\ServiceProvider` class and contains two methods: `register` and `boot`. The base `ServiceProvider` class is located in the `illuminate/support` Composer package, which you should add to your own package's dependencies. To learn more about the structure and purpose of service providers, check out [their documentation](/docs/{{version}}/providers).\n\n<a name=\"resources\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":81,"to":87}}}}],["2606",{"pageContent":"Resources\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":88,"to":90}}}}],["2607",{"pageContent":"Configuration\n\nTypically, you will need to publish your package's configuration file to the application's `config` directory. This will allow users of your package to easily override your default configuration options. To allow your configuration files to be published, call the `publishes` method from the `boot` method of your service provider:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->publishes([\n            __DIR__.'/../config/courier.php' => config_path('courier.php'),\n        ]);\n    }\n\nNow, when users of your package execute Laravel's `vendor:publish` command, your file will be copied to the specified publish location. Once your configuration has been published, its values may be accessed like any other configuration file:\n\n    $value = config('courier.option');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":91,"to":107}}}}],["2608",{"pageContent":"$value = config('courier.option');\n\n> **Warning**  \n> You should not define closures in your configuration files. They can not be serialized correctly when users execute the `config:cache` Artisan command.\n\n<a name=\"default-package-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":107,"to":112}}}}],["2609",{"pageContent":"Default Package Configuration\n\nYou may also merge your own package configuration file with the application's published copy. This will allow your users to define only the options they actually want to override in the published copy of the configuration file. To merge the configuration file values, use the `mergeConfigFrom` method within your service provider's `register` method.\n\nThe `mergeConfigFrom` method accepts the path to your package's configuration file as its first argument and the name of the application's copy of the configuration file as its second argument:\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->mergeConfigFrom(\n            __DIR__.'/../config/courier.php', 'courier'\n        );\n    }\n\n> **Warning**  \n> This method only merges the first level of the configuration array. If your users partially define a multi-dimensional configuration array, the missing options will not be merged.\n\n<a name=\"routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":113,"to":132}}}}],["2610",{"pageContent":"Routes\n\nIf your package contains routes, you may load them using the `loadRoutesFrom` method. This method will automatically determine if the application's routes are cached and will not load your routes file if the routes have already been cached:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->loadRoutesFrom(__DIR__.'/../routes/web.php');\n    }\n\n<a name=\"migrations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":133,"to":145}}}}],["2611",{"pageContent":"Migrations\n\nIf your package contains [database migrations](/docs/{{version}}/migrations), you may use the `loadMigrationsFrom` method to inform Laravel how to load them. The `loadMigrationsFrom` method accepts the path to your package's migrations as its only argument:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->loadMigrationsFrom(__DIR__.'/../database/migrations');\n    }\n\nOnce your package's migrations have been registered, they will automatically be run when the `php artisan migrate` command is executed. You do not need to export them to the application's `database/migrations` directory.\n\n<a name=\"language-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":146,"to":160}}}}],["2612",{"pageContent":"Language Files\n\nIf your package contains [language files](/docs/{{version}}/localization), you may use the `loadTranslationsFrom` method to inform Laravel how to load them. For example, if your package is named `courier`, you should add the following to your service provider's `boot` method:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->loadTranslationsFrom(__DIR__.'/../lang', 'courier');\n    }\n\nPackage translation lines are referenced using the `package::file.line` syntax convention. So, you may load the `courier` package's `welcome` line from the `messages` file like so:\n\n    echo trans('courier::messages.welcome');\n\n<a name=\"publishing-language-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":161,"to":177}}}}],["2613",{"pageContent":"Publishing Language Files\n\nIf you would like to publish your package's language files to the application's `lang/vendor` directory, you may use the service provider's `publishes` method. The `publishes` method accepts an array of package paths and their desired publish locations. For example, to publish the language files for the `courier` package, you may do the following:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->loadTranslationsFrom(__DIR__.'/../lang', 'courier');\n\n        $this->publishes([\n            __DIR__.'/../lang' => $this->app->langPath('vendor/courier'),\n        ]);\n    }\n\nNow, when users of your package execute Laravel's `vendor:publish` Artisan command, your package's language files will be published to the specified publish location.\n\n<a name=\"views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":178,"to":196}}}}],["2614",{"pageContent":"Views\n\nTo register your package's [views](/docs/{{version}}/views) with Laravel, you need to tell Laravel where the views are located. You may do this using the service provider's `loadViewsFrom` method. The `loadViewsFrom` method accepts two arguments: the path to your view templates and your package's name. For example, if your package's name is `courier`, you would add the following to your service provider's `boot` method:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->loadViewsFrom(__DIR__.'/../resources/views', 'courier');\n    }\n\nPackage views are referenced using the `package::view` syntax convention. So, once your view path is registered in a service provider, you may load the `dashboard` view from the `courier` package like so:\n\n    Route::get('/dashboard', function () {\n        return view('courier::dashboard');\n    });\n\n<a name=\"overriding-package-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":197,"to":215}}}}],["2615",{"pageContent":"Overriding Package Views\n\nWhen you use the `loadViewsFrom` method, Laravel actually registers two locations for your views: the application's `resources/views/vendor` directory and the directory you specify. So, using the `courier` package as an example, Laravel will first check if a custom version of the view has been placed in the `resources/views/vendor/courier` directory by the developer. Then, if the view has not been customized, Laravel will search the package view directory you specified in your call to `loadViewsFrom`. This makes it easy for package users to customize / override your package's views.\n\n<a name=\"publishing-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":216,"to":220}}}}],["2616",{"pageContent":"Publishing Views\n\nIf you would like to make your views available for publishing to the application's `resources/views/vendor` directory, you may use the service provider's `publishes` method. The `publishes` method accepts an array of package view paths and their desired publish locations:\n\n    /**\n     * Bootstrap the package services.\n     */\n    public function boot(): void\n    {\n        $this->loadViewsFrom(__DIR__.'/../resources/views', 'courier');\n\n        $this->publishes([\n            __DIR__.'/../resources/views' => resource_path('views/vendor/courier'),\n        ]);\n    }\n\nNow, when users of your package execute Laravel's `vendor:publish` Artisan command, your package's views will be copied to the specified publish location.\n\n<a name=\"view-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":221,"to":239}}}}],["2617",{"pageContent":"View Components\n\nIf you are building a package that utilizes Blade components or placing components in non-conventional directories, you will need to manually register your component class and its HTML tag alias so that Laravel knows where to find the component. You should typically register your components in the `boot` method of your package's service provider:\n\n    use Illuminate\\Support\\Facades\\Blade;\n    use VendorPackage\\View\\Components\\AlertComponent;\n\n    /**\n     * Bootstrap your package's services.\n     */\n    public function boot(): void\n    {\n        Blade::component('package-alert', AlertComponent::class);\n    }\n\nOnce your component has been registered, it may be rendered using its tag alias:\n\n```blade\n<x-package-alert/>\n```\n\n<a name=\"autoloading-package-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":240,"to":261}}}}],["2618",{"pageContent":"Autoloading Package Components\n\nAlternatively, you may use the `componentNamespace` method to autoload component classes by convention. For example, a `Nightshade` package might have `Calendar` and `ColorPicker` components that reside within the `Nightshade\\Views\\Components` namespace:\n\n    use Illuminate\\Support\\Facades\\Blade;\n\n    /**\n     * Bootstrap your package's services.\n     */\n    public function boot(): void\n    {\n        Blade::componentNamespace('Nightshade\\\\Views\\\\Components', 'nightshade');\n    }\n\nThis will allow the usage of package components by their vendor namespace using the `package-name::` syntax:\n\n```blade\n<x-nightshade::calendar />\n<x-nightshade::color-picker />\n```\n\nBlade will automatically detect the class that's linked to this component by pascal-casing the component name. Subdirectories are also supported using \"dot\" notation.\n\n<a name=\"anonymous-components\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":262,"to":285}}}}],["2619",{"pageContent":"Anonymous Components\n\nIf your package contains anonymous components, they must be placed within a `components` directory of your package's \"views\" directory (as specified by the [`loadViewsFrom` method](#views)). Then, you may render them by prefixing the component name with the package's view namespace:\n\n```blade\n<x-courier::alert />\n```\n\n<a name=\"about-artisan-command\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":286,"to":294}}}}],["2620",{"pageContent":"\"About\" Artisan Command\n\nLaravel's built-in `about` Artisan command provides a synopsis of the application's environment and configuration. Packages may push additional information to this command's output via the `AboutCommand` class. Typically, this information may be added from your package service provider's `boot` method:\n\n    use Illuminate\\Foundation\\Console\\AboutCommand;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        AboutCommand::add('My Package', fn () => ['Version' => '1.0.0']);\n    }\n\n<a name=\"commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":295,"to":309}}}}],["2621",{"pageContent":"Commands\n\nTo register your package's Artisan commands with Laravel, you may use the `commands` method. This method expects an array of command class names. Once the commands have been registered, you may execute them using the [Artisan CLI](/docs/{{version}}/artisan):\n\n    use Courier\\Console\\Commands\\InstallCommand;\n    use Courier\\Console\\Commands\\NetworkCommand;\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        if ($this->app->runningInConsole()) {\n            $this->commands([\n                InstallCommand::class,\n                NetworkCommand::class,\n            ]);\n        }\n    }\n\n<a name=\"public-assets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":310,"to":330}}}}],["2622",{"pageContent":"Public Assets\n\nYour package may have assets such as JavaScript, CSS, and images. To publish these assets to the application's `public` directory, use the service provider's `publishes` method. In this example, we will also add a `public` asset group tag, which may be used to easily publish groups of related assets:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->publishes([\n            __DIR__.'/../public' => public_path('vendor/courier'),\n        ], 'public');\n    }\n\nNow, when your package's users execute the `vendor:publish` command, your assets will be copied to the specified publish location. Since users will typically need to overwrite the assets every time the package is updated, you may use the `--force` flag:\n\n```shell\nphp artisan vendor:publish --tag=public --force\n```\n\n<a name=\"publishing-file-groups\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":331,"to":351}}}}],["2623",{"pageContent":"Publishing File Groups\n\nYou may want to publish groups of package assets and resources separately. For instance, you might want to allow your users to publish your package's configuration files without being forced to publish your package's assets. You may do this by \"tagging\" them when calling the `publishes` method from a package's service provider. For example, let's use tags to define two publish groups for the `courier` package (`courier-config` and `courier-migrations`) in the `boot` method of the package's service provider:\n\n    /**\n     * Bootstrap any package services.\n     */\n    public function boot(): void\n    {\n        $this->publishes([\n            __DIR__.'/../config/package.php' => config_path('package.php')\n        ], 'courier-config');\n\n        $this->publishes([\n            __DIR__.'/../database/migrations/' => database_path('migrations')\n        ], 'courier-migrations');\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":352,"to":368}}}}],["2624",{"pageContent":"$this->publishes([\n            __DIR__.'/../database/migrations/' => database_path('migrations')\n        ], 'courier-migrations');\n    }\n\nNow your users may publish these groups separately by referencing their tag when executing the `vendor:publish` command:\n\n```shell\nphp artisan vendor:publish --tag=courier-config\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/packages.md","loc":{"lines":{"from":368,"to":377}}}}],["2625",{"pageContent":"# Database: Pagination\n\n- [Introduction](#introduction)\n- [Basic Usage](#basic-usage)\n    - [Paginating Query Builder Results](#paginating-query-builder-results)\n    - [Paginating Eloquent Results](#paginating-eloquent-results)\n    - [Cursor Pagination](#cursor-pagination)\n    - [Manually Creating A Paginator](#manually-creating-a-paginator)\n    - [Customizing Pagination URLs](#customizing-pagination-urls)\n- [Displaying Pagination Results](#displaying-pagination-results)\n    - [Adjusting The Pagination Link Window](#adjusting-the-pagination-link-window)\n    - [Converting Results To JSON](#converting-results-to-json)\n- [Customizing The Pagination View](#customizing-the-pagination-view)\n    - [Using Bootstrap](#using-bootstrap)\n- [Paginator and LengthAwarePaginator Instance Methods](#paginator-instance-methods)\n- [Cursor Paginator Instance Methods](#cursor-paginator-instance-methods)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":1,"to":18}}}}],["2626",{"pageContent":"Introduction\n\nIn other frameworks, pagination can be very painful. We hope Laravel's approach to pagination will be a breath of fresh air. Laravel's paginator is integrated with the [query builder](/docs/{{version}}/queries) and [Eloquent ORM](/docs/{{version}}/eloquent) and provides convenient, easy-to-use pagination of database records with zero configuration.\n\nBy default, the HTML generated by the paginator is compatible with the [Tailwind CSS framework](https://tailwindcss.com/); however, Bootstrap pagination support is also available.\n\n<a name=\"tailwind-jit\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":19,"to":25}}}}],["2627",{"pageContent":"Tailwind JIT\n\nIf you are using Laravel's default Tailwind pagination views and the Tailwind JIT engine, you should ensure your application's `tailwind.config.js` file's `content` key references Laravel's pagination views so that their Tailwind classes are not purged:\n\n```js\ncontent: [\n    './resources/**/*.blade.php',\n    './resources/**/*.js',\n    './resources/**/*.vue',\n    './vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php',\n],\n```\n\n<a name=\"basic-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":26,"to":39}}}}],["2628",{"pageContent":"Basic Usage\n\n<a name=\"paginating-query-builder-results\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":40,"to":42}}}}],["2629",{"pageContent":"Paginating Query Builder Results\n\nThere are several ways to paginate items. The simplest is by using the `paginate` method on the [query builder](/docs/{{version}}/queries) or an [Eloquent query](/docs/{{version}}/eloquent). The `paginate` method automatically takes care of setting the query's \"limit\" and \"offset\" based on the current page being viewed by the user. By default, the current page is detected by the value of the `page` query string argument on the HTTP request. This value is automatically detected by Laravel, and is also automatically inserted into links generated by the paginator.\n\nIn this example, the only argument passed to the `paginate` method is the number of items you would like displayed \"per page\". In this case, let's specify that we would like to display `15` items per page:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\View\\View;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":43,"to":55}}}}],["2630",{"pageContent":"<?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show all application users.\n         */\n        public function index(): View\n        {\n            return view('user.index', [\n                'users' => DB::table('users')->paginate(15)\n            ]);\n        }\n    }\n\n<a name=\"simple-pagination\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":55,"to":76}}}}],["2631",{"pageContent":"Simple Pagination\n\nThe `paginate` method counts the total number of records matched by the query before retrieving the records from the database. This is done so that the paginator knows how many pages of records there are in total. However, if you do not plan to show the total number of pages in your application's UI then the record count query is unnecessary.\n\nTherefore, if you only need to display simple \"Next\" and \"Previous\" links in your application's UI, you may use the `simplePaginate` method to perform a single, efficient query:\n\n    $users = DB::table('users')->simplePaginate(15);\n\n<a name=\"paginating-eloquent-results\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":77,"to":85}}}}],["2632",{"pageContent":"Paginating Eloquent Results\n\nYou may also paginate [Eloquent](/docs/{{version}}/eloquent) queries. In this example, we will paginate the `App\\Models\\User` model and indicate that we plan to display 15 records per page. As you can see, the syntax is nearly identical to paginating query builder results:\n\n    use App\\Models\\User;\n\n    $users = User::paginate(15);\n\nOf course, you may call the `paginate` method after setting other constraints on the query, such as `where` clauses:\n\n    $users = User::where('votes', '>', 100)->paginate(15);\n\nYou may also use the `simplePaginate` method when paginating Eloquent models:\n\n    $users = User::where('votes', '>', 100)->simplePaginate(15);\n\nSimilarly, you may use the `cursorPaginate` method to cursor paginate Eloquent models:\n\n    $users = User::where('votes', '>', 100)->cursorPaginate(15);\n\n<a name=\"multiple-paginator-instances-per-page\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":86,"to":106}}}}],["2633",{"pageContent":"Multiple Paginator Instances Per Page\n\nSometimes you may need to render two separate paginators on a single screen that is rendered by your application. However, if both paginator instances use the `page` query string parameter to store the current page, the two paginator's will conflict. To resolve this conflict, you may pass the name of the query string parameter you wish to use to store the paginator's current page via the third argument provided to the `paginate`, `simplePaginate`, and `cursorPaginate` methods:\n\n    use App\\Models\\User;\n\n    $users = User::where('votes', '>', 100)->paginate(\n        $perPage = 15, $columns = ['*'], $pageName = 'users'\n    );\n\n<a name=\"cursor-pagination\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":107,"to":117}}}}],["2634",{"pageContent":"Cursor Pagination\n\nWhile `paginate` and `simplePaginate` create queries using the SQL \"offset\" clause, cursor pagination works by constructing \"where\" clauses that compare the values of the ordered columns contained in the query, providing the most efficient database performance available amongst all of Laravel's pagination methods. This method of pagination is particularly well-suited for large data-sets and \"infinite\" scrolling user interfaces.\n\nUnlike offset based pagination, which includes a page number in the query string of the URLs generated by the paginator, cursor based pagination places a \"cursor\" string in the query string. The cursor is an encoded string containing the location that the next paginated query should start paginating and the direction that it should paginate:\n\n```nothing\nhttp://localhost/users?cursor=eyJpZCI6MTUsIl9wb2ludHNUb05leHRJdGVtcyI6dHJ1ZX0","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":118,"to":125}}}}],["2635",{"pageContent":"You may create a cursor based paginator instance via the `cursorPaginate` method offered by the query builder. This method returns an instance of `Illuminate\\Pagination\\CursorPaginator`:\n\n    $users = DB::table('users')->orderBy('id')->cursorPaginate(15);\n\nOnce you have retrieved a cursor paginator instance, you may [display the pagination results](#displaying-pagination-results) as you typically would when using the `paginate` and `simplePaginate` methods. For more information on the instance methods offered by the cursor paginator, please consult the [cursor paginator instance method documentation](#cursor-paginator-instance-methods).\n\n> **Warning**  \n> Your query must contain an \"order by\" clause in order to take advantage of cursor pagination.\n\n<a name=\"cursor-vs-offset-pagination\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":128,"to":137}}}}],["2636",{"pageContent":"Cursor vs. Offset Pagination\n\nTo illustrate the differences between offset pagination and cursor pagination, let's examine some example SQL queries. Both of the following queries will both display the \"second page\" of results for a `users` table ordered by `id`:\n\n```sql\n# Offset Pagination...\nselect * from users order by id asc limit 15 offset 15;\n\n# Cursor Pagination...\nselect * from users where id > 15 order by id asc limit 15;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":138,"to":147}}}}],["2637",{"pageContent":"The cursor pagination query offers the following advantages over offset pagination:\n\n- For large data-sets, cursor pagination will offer better performance if the \"order by\" columns are indexed. This is because the \"offset\" clause scans through all previously matched data.\n- For data-sets with frequent writes, offset pagination may skip records or show duplicates if results have been recently added to or deleted from the page a user is currently viewing.\n\nHowever, cursor pagination has the following limitations:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":150,"to":155}}}}],["2638",{"pageContent":"However, cursor pagination has the following limitations:\n\n- Like `simplePaginate`, cursor pagination can only be used to display \"Next\" and \"Previous\" links and does not support generating links with page numbers.\n- It requires that the ordering is based on at least one unique column or a combination of columns that are unique. Columns with `null` values are not supported.\n- Query expressions in \"order by\" clauses are supported only if they are aliased and added to the \"select\" clause as well. \n- Query expressions with parameters are not supported.\n\n<a name=\"manually-creating-a-paginator\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":155,"to":162}}}}],["2639",{"pageContent":"Manually Creating A Paginator\n\nSometimes you may wish to create a pagination instance manually, passing it an array of items that you already have in memory. You may do so by creating either an `Illuminate\\Pagination\\Paginator`, `Illuminate\\Pagination\\LengthAwarePaginator` or `Illuminate\\Pagination\\CursorPaginator` instance, depending on your needs.\n\nThe `Paginator` and `CursorPaginator` classes do not need to know the total number of items in the result set; however, because of this, these classes do not have methods for retrieving the index of the last page. The `LengthAwarePaginator` accepts almost the same arguments as the `Paginator`; however, it requires a count of the total number of items in the result set.\n\nIn other words, the `Paginator` corresponds to the `simplePaginate` method on the query builder, the `CursorPaginator` corresponds to the `cursorPaginate` method, and the `LengthAwarePaginator` corresponds to the `paginate` method.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":163,"to":169}}}}],["2640",{"pageContent":"> **Warning**  \n> When manually creating a paginator instance, you should manually \"slice\" the array of results you pass to the paginator. If you're unsure how to do this, check out the [array_slice](https://secure.php.net/manual/en/function.array-slice.php) PHP function.\n\n<a name=\"customizing-pagination-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":171,"to":174}}}}],["2641",{"pageContent":"Customizing Pagination URLs\n\nBy default, links generated by the paginator will match the current request's URI. However, the paginator's `withPath` method allows you to customize the URI used by the paginator when generating links. For example, if you want the paginator to generate links like `http://example.com/admin/users?page=N`, you should pass `/admin/users` to the `withPath` method:\n\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        $users = User::paginate(15);\n\n        $users->withPath('/admin/users');\n\n        // ...\n    });\n\n<a name=\"appending-query-string-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":175,"to":189}}}}],["2642",{"pageContent":"Appending Query String Values\n\nYou may append to the query string of pagination links using the `appends` method. For example, to append `sort=votes` to each pagination link, you should make the following call to `appends`:\n\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        $users = User::paginate(15);\n\n        $users->appends(['sort' => 'votes']);\n\n        // ...\n    });\n\nYou may use the `withQueryString` method if you would like to append all of the current request's query string values to the pagination links:\n\n    $users = User::paginate(15)->withQueryString();\n\n<a name=\"appending-hash-fragments\"></a>\n#### Appending Hash Fragments\n\nIf you need to append a \"hash fragment\" to URLs generated by the paginator, you may use the `fragment` method. For example, to append `#users` to the end of each pagination link, you should invoke the `fragment` method like so:\n\n    $users = User::paginate(15)->fragment('users');\n\n<a name=\"displaying-pagination-results\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":190,"to":215}}}}],["2643",{"pageContent":"Displaying Pagination Results\n\nWhen calling the `paginate` method, you will receive an instance of `Illuminate\\Pagination\\LengthAwarePaginator`, while calling the `simplePaginate` method returns an instance of `Illuminate\\Pagination\\Paginator`. And, finally, calling the `cursorPaginate` method returns an instance of `Illuminate\\Pagination\\CursorPaginator`.\n\nThese objects provide several methods that describe the result set. In addition to these helper methods, the paginator instances are iterators and may be looped as an array. So, once you have retrieved the results, you may display the results and render the page links using [Blade](/docs/{{version}}/blade):\n\n```blade\n<div class=\"container\">\n    @foreach ($users as $user)\n        {{ $user->name }}\n    @endforeach\n</div>\n\n{{ $users->links() }}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":216,"to":229}}}}],["2644",{"pageContent":"The `links` method will render the links to the rest of the pages in the result set. Each of these links will already contain the proper `page` query string variable. Remember, the HTML generated by the `links` method is compatible with the [Tailwind CSS framework](https://tailwindcss.com).\n\n<a name=\"adjusting-the-pagination-link-window\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":232,"to":234}}}}],["2645",{"pageContent":"Adjusting The Pagination Link Window\n\nWhen the paginator displays pagination links, the current page number is displayed as well as links for the three pages before and after the current page. Using the `onEachSide` method, you may control how many additional links are displayed on each side of the current page within the middle, sliding window of links generated by the paginator:\n\n```blade\n{{ $users->onEachSide(5)->links() }}\n```\n\n<a name=\"converting-results-to-json\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":235,"to":243}}}}],["2646",{"pageContent":"Converting Results To JSON\n\nThe Laravel paginator classes implement the `Illuminate\\Contracts\\Support\\Jsonable` Interface contract and expose the `toJson` method, so it's very easy to convert your pagination results to JSON. You may also convert a paginator instance to JSON by returning it from a route or controller action:\n\n    use App\\Models\\User;\n\n    Route::get('/users', function () {\n        return User::paginate();\n    });\n\nThe JSON from the paginator will include meta information such as `total`, `current_page`, `last_page`, and more. The result records are available via the `data` key in the JSON array. Here is an example of the JSON created by returning a paginator instance from a route:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":244,"to":254}}}}],["2647",{"pageContent":"{\n       \"total\": 50,\n       \"per_page\": 15,\n       \"current_page\": 1,\n       \"last_page\": 4,\n       \"first_page_url\": \"http://laravel.app?page=1\",\n       \"last_page_url\": \"http://laravel.app?page=4\",\n       \"next_page_url\": \"http://laravel.app?page=2\",\n       \"prev_page_url\": null,\n       \"path\": \"http://laravel.app\",\n       \"from\": 1,\n       \"to\": 15,\n       \"data\":[\n            {\n                // Record...\n            },\n            {\n                // Record...\n            }\n       ]\n    }\n\n<a name=\"customizing-the-pagination-view\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":256,"to":278}}}}],["2648",{"pageContent":"Customizing The Pagination View\n\nBy default, the views rendered to display the pagination links are compatible with the [Tailwind CSS](https://tailwindcss.com) framework. However, if you are not using Tailwind, you are free to define your own views to render these links. When calling the `links` method on a paginator instance, you may pass the view name as the first argument to the method:\n\n```blade\n{{ $paginator->links('view.name') }}\n\n<!-- Passing additional data to the view... -->\n{{ $paginator->links('view.name', ['foo' => 'bar']) }}\n```\n\nHowever, the easiest way to customize the pagination views is by exporting them to your `resources/views/vendor` directory using the `vendor:publish` command:\n\n```shell\nphp artisan vendor:publish --tag=laravel-pagination","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":279,"to":293}}}}],["2649",{"pageContent":"This command will place the views in your application's `resources/views/vendor/pagination` directory. The `tailwind.blade.php` file within this directory corresponds to the default pagination view. You may edit this file to modify the pagination HTML.\n\nIf you would like to designate a different file as the default pagination view, you may invoke the paginator's `defaultView` and `defaultSimpleView` methods within the `boot` method of your `App\\Providers\\AppServiceProvider` class:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Pagination\\Paginator;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Paginator::defaultView('view-name');\n\n            Paginator::defaultSimpleView('view-name');\n        }\n    }\n\n<a name=\"using-bootstrap\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":296,"to":320}}}}],["2650",{"pageContent":"Using Bootstrap\n\nLaravel includes pagination views built using [Bootstrap CSS](https://getbootstrap.com/). To use these views instead of the default Tailwind views, you may call the paginator's `useBootstrapFour` or `useBootstrapFive` methods within the `boot` method of your `App\\Providers\\AppServiceProvider` class:\n\n    use Illuminate\\Pagination\\Paginator;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Paginator::useBootstrapFive();\n        Paginator::useBootstrapFour();\n    }\n\n<a name=\"paginator-instance-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":321,"to":336}}}}],["2651",{"pageContent":"Paginator / LengthAwarePaginator Instance Methods\n\nEach paginator instance provides additional pagination information via the following methods:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":337,"to":339}}}}],["2652",{"pageContent":"Method  |  Description\n-------  |  -----------\n`$paginator->count()`  |  Get the number of items for the current page.\n`$paginator->currentPage()`  |  Get the current page number.\n`$paginator->firstItem()`  |  Get the result number of the first item in the results.\n`$paginator->getOptions()`  |  Get the paginator options.\n`$paginator->getUrlRange($start, $end)`  |  Create a range of pagination URLs.\n`$paginator->hasPages()`  |  Determine if there are enough items to split into multiple pages.\n`$paginator->hasMorePages()`  |  Determine if there are more items in the data store.\n`$paginator->items()`  |  Get the items for the current page.\n`$paginator->lastItem()`  |  Get the result number of the last item in the results.\n`$paginator->lastPage()`  |  Get the page number of the last available page. (Not available when using `simplePaginate`).\n`$paginator->nextPageUrl()`  |  Get the URL for the next page.\n`$paginator->onFirstPage()`  |  Determine if the paginator is on the first page.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":341,"to":354}}}}],["2653",{"pageContent":"`$paginator->nextPageUrl()`  |  Get the URL for the next page.\n`$paginator->onFirstPage()`  |  Determine if the paginator is on the first page.\n`$paginator->perPage()`  |  The number of items to be shown per page.\n`$paginator->previousPageUrl()`  |  Get the URL for the previous page.\n`$paginator->total()`  |  Determine the total number of matching items in the data store. (Not available when using `simplePaginate`).\n`$paginator->url($page)`  |  Get the URL for a given page number.\n`$paginator->getPageName()`  |  Get the query string variable used to store the page.\n`$paginator->setPageName($name)`  |  Set the query string variable used to store the page.\n`$paginator->through($callback)`  |  Transform each item using a callback.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":354,"to":362}}}}],["2654",{"pageContent":"<a name=\"cursor-paginator-instance-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":364,"to":364}}}}],["2655",{"pageContent":"Cursor Paginator Instance Methods\n\nEach cursor paginator instance provides additional pagination information via the following methods:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":365,"to":367}}}}],["2656",{"pageContent":"Method  |  Description\n-------  |  -----------\n`$paginator->count()`  |  Get the number of items for the current page.\n`$paginator->cursor()`  |  Get the current cursor instance.\n`$paginator->getOptions()`  |  Get the paginator options.\n`$paginator->hasPages()`  |  Determine if there are enough items to split into multiple pages.\n`$paginator->hasMorePages()`  |  Determine if there are more items in the data store.\n`$paginator->getCursorName()`  |  Get the query string variable used to store the cursor.\n`$paginator->items()`  |  Get the items for the current page.\n`$paginator->nextCursor()`  |  Get the cursor instance for the next set of items.\n`$paginator->nextPageUrl()`  |  Get the URL for the next page.\n`$paginator->onFirstPage()`  |  Determine if the paginator is on the first page.\n`$paginator->onLastPage()`  |  Determine if the paginator is on the last page.\n`$paginator->perPage()`  |  The number of items to be shown per page.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":369,"to":382}}}}],["2657",{"pageContent":"`$paginator->onLastPage()`  |  Determine if the paginator is on the last page.\n`$paginator->perPage()`  |  The number of items to be shown per page.\n`$paginator->previousCursor()`  |  Get the cursor instance for the previous set of items.\n`$paginator->previousPageUrl()`  |  Get the URL for the previous page.\n`$paginator->setCursorName()`  |  Set the query string variable used to store the cursor.\n`$paginator->url($cursor)`  |  Get the URL for a given cursor instance.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pagination.md","loc":{"lines":{"from":382,"to":387}}}}],["2658",{"pageContent":"# Laravel Passport","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1,"to":1}}}}],["2659",{"pageContent":"- [Introduction](#introduction)\n    - [Passport Or Sanctum?](#passport-or-sanctum)\n- [Installation](#installation)\n    - [Deploying Passport](#deploying-passport)\n    - [Migration Customization](#migration-customization)\n    - [Upgrading Passport](#upgrading-passport)\n- [Configuration](#configuration)\n    - [Client Secret Hashing](#client-secret-hashing)\n    - [Token Lifetimes](#token-lifetimes)\n    - [Overriding Default Models](#overriding-default-models)\n    - [Overriding Routes](#overriding-routes)\n- [Issuing Access Tokens](#issuing-access-tokens)\n    - [Managing Clients](#managing-clients)\n    - [Requesting Tokens](#requesting-tokens)\n    - [Refreshing Tokens](#refreshing-tokens)\n    - [Revoking Tokens](#revoking-tokens)\n    - [Purging Tokens](#purging-tokens)\n- [Authorization Code Grant with PKCE](#code-grant-pkce)\n    - [Creating The Client](#creating-a-auth-pkce-grant-client)\n    - [Requesting Tokens](#requesting-auth-pkce-grant-tokens)\n- [Password Grant Tokens](#password-grant-tokens)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":3,"to":23}}}}],["2660",{"pageContent":"- [Creating The Client](#creating-a-auth-pkce-grant-client)\n    - [Requesting Tokens](#requesting-auth-pkce-grant-tokens)\n- [Password Grant Tokens](#password-grant-tokens)\n    - [Creating A Password Grant Client](#creating-a-password-grant-client)\n    - [Requesting Tokens](#requesting-password-grant-tokens)\n    - [Requesting All Scopes](#requesting-all-scopes)\n    - [Customizing The User Provider](#customizing-the-user-provider)\n    - [Customizing The Username Field](#customizing-the-username-field)\n    - [Customizing The Password Validation](#customizing-the-password-validation)\n- [Implicit Grant Tokens](#implicit-grant-tokens)\n- [Client Credentials Grant Tokens](#client-credentials-grant-tokens)\n- [Personal Access Tokens](#personal-access-tokens)\n    - [Creating A Personal Access Client](#creating-a-personal-access-client)\n    - [Managing Personal Access Tokens](#managing-personal-access-tokens)\n- [Protecting Routes](#protecting-routes)\n    - [Via Middleware](#via-middleware)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":23,"to":38}}}}],["2661",{"pageContent":"- [Managing Personal Access Tokens](#managing-personal-access-tokens)\n- [Protecting Routes](#protecting-routes)\n    - [Via Middleware](#via-middleware)\n    - [Passing The Access Token](#passing-the-access-token)\n- [Token Scopes](#token-scopes)\n    - [Defining Scopes](#defining-scopes)\n    - [Default Scope](#default-scope)\n    - [Assigning Scopes To Tokens](#assigning-scopes-to-tokens)\n    - [Checking Scopes](#checking-scopes)\n- [Consuming Your API With JavaScript](#consuming-your-api-with-javascript)\n- [Events](#events)\n- [Testing](#testing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":38,"to":49}}}}],["2662",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":51,"to":51}}}}],["2663",{"pageContent":"Introduction\n\n[Laravel Passport](https://github.com/laravel/passport) provides a full OAuth2 server implementation for your Laravel application in a matter of minutes. Passport is built on top of the [League OAuth2 server](https://github.com/thephpleague/oauth2-server) that is maintained by Andy Millington and Simon Hamp.\n\n> **Warning**  \n> This documentation assumes you are already familiar with OAuth2. If you do not know anything about OAuth2, consider familiarizing yourself with the general [terminology](https://oauth2.thephpleague.com/terminology/) and features of OAuth2 before continuing.\n\n<a name=\"passport-or-sanctum\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":52,"to":59}}}}],["2664",{"pageContent":"Passport Or Sanctum?\n\nBefore getting started, you may wish to determine if your application would be better served by Laravel Passport or [Laravel Sanctum](/docs/{{version}}/sanctum). If your application absolutely needs to support OAuth2, then you should use Laravel Passport.\n\nHowever, if you are attempting to authenticate a single-page application, mobile application, or issue API tokens, you should use [Laravel Sanctum](/docs/{{version}}/sanctum). Laravel Sanctum does not support OAuth2; however, it provides a much simpler API authentication development experience.\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":60,"to":66}}}}],["2665",{"pageContent":"Installation\n\nTo get started, install Passport via the Composer package manager:\n\n```shell\ncomposer require laravel/passport\n```\n\nPassport's [service provider](/docs/{{version}}/providers) registers its own database migration directory, so you should migrate your database after installing the package. The Passport migrations will create the tables your application needs to store OAuth2 clients and access tokens:\n\n```shell\nphp artisan migrate\n```\n\nNext, you should execute the `passport:install` Artisan command. This command will create the encryption keys needed to generate secure access tokens. In addition, the command will create \"personal access\" and \"password grant\" clients which will be used to generate access tokens:\n\n```shell\nphp artisan passport:install","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":67,"to":84}}}}],["2666",{"pageContent":"> **Note**  \n> If you would like to use UUIDs as the primary key value of the Passport `Client` model instead of auto-incrementing integers, please install Passport using [the `uuids` option](#client-uuids).\n\nAfter running the `passport:install` command, add the `Laravel\\Passport\\HasApiTokens` trait to your `App\\Models\\User` model. This trait will provide a few helper methods to your model which allow you to inspect the authenticated user's token and scopes. If your model is already using the `Laravel\\Sanctum\\HasApiTokens` trait, you may remove that trait:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n    use Laravel\\Passport\\HasApiTokens;\n\n    class User extends Authenticatable\n    {\n        use HasApiTokens, HasFactory, Notifiable;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":87,"to":104}}}}],["2667",{"pageContent":"class User extends Authenticatable\n    {\n        use HasApiTokens, HasFactory, Notifiable;\n    }\n\nFinally, in your application's `config/auth.php` configuration file, you should define an `api` authentication guard and set the `driver` option to `passport`. This will instruct your application to use Passport's `TokenGuard` when authenticating incoming API requests:\n\n    'guards' => [\n        'web' => [\n            'driver' => 'session',\n            'provider' => 'users',\n        ],\n\n        'api' => [\n            'driver' => 'passport',\n            'provider' => 'users',\n        ],\n    ],\n\n<a name=\"client-uuids\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":104,"to":123}}}}],["2668",{"pageContent":"Client UUIDs\n\nYou may also run the `passport:install` command with the `--uuids` option present. This option will instruct Passport that you would like to use UUIDs instead of auto-incrementing integers as the Passport `Client` model's primary key values. After running the `passport:install` command with the `--uuids` option, you will be given additional instructions regarding disabling Passport's default migrations:\n\n```shell\nphp artisan passport:install --uuids\n```\n\n<a name=\"deploying-passport\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":124,"to":132}}}}],["2669",{"pageContent":"Deploying Passport\n\nWhen deploying Passport to your application's servers for the first time, you will likely need to run the `passport:keys` command. This command generates the encryption keys Passport needs in order to generate access tokens. The generated keys are not typically kept in source control:\n\n```shell\nphp artisan passport:keys\n```\n\nIf necessary, you may define the path where Passport's keys should be loaded from. You may use the `Passport::loadKeysFrom` method to accomplish this. Typically, this method should be called from the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class:\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Passport::loadKeysFrom(__DIR__.'/../secrets/oauth');\n    }\n\n<a name=\"loading-keys-from-the-environment\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":133,"to":151}}}}],["2670",{"pageContent":"Loading Keys From The Environment\n\nAlternatively, you may publish Passport's configuration file using the `vendor:publish` Artisan command:\n\n```shell\nphp artisan vendor:publish --tag=passport-config\n```\n\nAfter the configuration file has been published, you may load your application's encryption keys by defining them as environment variables:\n\n```ini\nPASSPORT_PRIVATE_KEY=\"-----BEGIN RSA PRIVATE KEY-----\n<private key here>\n-----END RSA PRIVATE KEY-----\"\n\nPASSPORT_PUBLIC_KEY=\"-----BEGIN PUBLIC KEY-----\n<public key here>\n-----END PUBLIC KEY-----\"\n```\n\n<a name=\"migration-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":152,"to":172}}}}],["2671",{"pageContent":"Migration Customization\n\nIf you are not going to use Passport's default migrations, you should call the `Passport::ignoreMigrations` method in the `register` method of your `App\\Providers\\AppServiceProvider` class. You may export the default migrations using the `vendor:publish` Artisan command:\n\n```shell\nphp artisan vendor:publish --tag=passport-migrations\n```\n\n<a name=\"upgrading-passport\"></a>\n### Upgrading Passport\n\nWhen upgrading to a new major version of Passport, it's important that you carefully review [the upgrade guide](https://github.com/laravel/passport/blob/master/UPGRADE.md).\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":173,"to":186}}}}],["2672",{"pageContent":"Configuration\n\n<a name=\"client-secret-hashing\"></a>\n### Client Secret Hashing\n\nIf you would like your client's secrets to be hashed when stored in your database, you should call the `Passport::hashClientSecrets` method in the `boot` method of your `App\\Providers\\AuthServiceProvider` class:\n\n    use Laravel\\Passport\\Passport;\n\n    Passport::hashClientSecrets();\n\nOnce enabled, all of your client secrets will only be displayable to the user immediately after they are created. Since the plain-text client secret value is never stored in the database, it is not possible to recover the secret's value if it is lost.\n\n<a name=\"token-lifetimes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":187,"to":200}}}}],["2673",{"pageContent":"Token Lifetimes\n\nBy default, Passport issues long-lived access tokens that expire after one year. If you would like to configure a longer / shorter token lifetime, you may use the `tokensExpireIn`, `refreshTokensExpireIn`, and `personalAccessTokensExpireIn` methods. These methods should be called from the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class:\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Passport::tokensExpireIn(now()->addDays(15));\n        Passport::refreshTokensExpireIn(now()->addDays(30));\n        Passport::personalAccessTokensExpireIn(now()->addMonths(6));\n    }\n\n> **Warning**  \n> The `expires_at` columns on Passport's database tables are read-only and for display purposes only. When issuing tokens, Passport stores the expiration information within the signed and encrypted tokens. If you need to invalidate a token you should [revoke it](#revoking-tokens).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":201,"to":216}}}}],["2674",{"pageContent":"<a name=\"overriding-default-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":218,"to":218}}}}],["2675",{"pageContent":"Overriding Default Models\n\nYou are free to extend the models used internally by Passport by defining your own model and extending the corresponding Passport model:\n\n    use Laravel\\Passport\\Client as PassportClient;\n\n    class Client extends PassportClient\n    {\n        // ...\n    }\n\nAfter defining your model, you may instruct Passport to use your custom model via the `Laravel\\Passport\\Passport` class. Typically, you should inform Passport about your custom models in the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class:\n\n    use App\\Models\\Passport\\AuthCode;\n    use App\\Models\\Passport\\Client;\n    use App\\Models\\Passport\\PersonalAccessClient;\n    use App\\Models\\Passport\\RefreshToken;\n    use App\\Models\\Passport\\Token;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":219,"to":236}}}}],["2676",{"pageContent":"use App\\Models\\Passport\\AuthCode;\n    use App\\Models\\Passport\\Client;\n    use App\\Models\\Passport\\PersonalAccessClient;\n    use App\\Models\\Passport\\RefreshToken;\n    use App\\Models\\Passport\\Token;\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Passport::useTokenModel(Token::class);\n        Passport::useRefreshTokenModel(RefreshToken::class);\n        Passport::useAuthCodeModel(AuthCode::class);\n        Passport::useClientModel(Client::class);\n        Passport::usePersonalAccessClientModel(PersonalAccessClient::class);\n    }\n\n<a name=\"overriding-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":236,"to":254}}}}],["2677",{"pageContent":"Overriding Routes\n\nSometimes you may wish to customize the routes defined by Passport. To achieve this, you first need to ignore the routes registered by Passport by adding `Passport::ignoreRoutes` to the `register` method of your application's `AppServiceProvider`:\n\n    use Laravel\\Passport\\Passport;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        Passport::ignoreRoutes();\n    }\n\nThen, you may copy the routes defined by Passport in [its routes file](https://github.com/laravel/passport/blob/11.x/routes/web.php) to your application's `routes/web.php` file and modify them to your liking:\n\n    Route::group([\n        'as' => 'passport.',\n        'prefix' => config('passport.path', 'oauth'),\n        'namespace' => '\\Laravel\\Passport\\Http\\Controllers',\n    ], function () {\n        // Passport routes...\n    });\n\n<a name=\"issuing-access-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":255,"to":279}}}}],["2678",{"pageContent":"Issuing Access Tokens\n\nUsing OAuth2 via authorization codes is how most developers are familiar with OAuth2. When using authorization codes, a client application will redirect a user to your server where they will either approve or deny the request to issue an access token to the client.\n\n<a name=\"managing-clients\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":280,"to":284}}}}],["2679",{"pageContent":"Managing Clients\n\nFirst, developers building applications that need to interact with your application's API will need to register their application with yours by creating a \"client\". Typically, this consists of providing the name of their application and a URL that your application can redirect to after users approve their request for authorization.\n\n<a name=\"the-passportclient-command\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":285,"to":289}}}}],["2680",{"pageContent":"The `passport:client` Command\n\nThe simplest way to create a client is using the `passport:client` Artisan command. This command may be used to create your own clients for testing your OAuth2 functionality. When you run the `client` command, Passport will prompt you for more information about your client and will provide you with a client ID and secret:\n\n```shell\nphp artisan passport:client\n```\n\n**Redirect URLs**\n\nIf you would like to allow multiple redirect URLs for your client, you may specify them using a comma-delimited list when prompted for the URL by the `passport:client` command. Any URLs which contain commas should be URL encoded:\n\n```shell\nhttp://example.com/callback,http://examplefoo.com/callback\n```\n\n<a name=\"clients-json-api\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":290,"to":306}}}}],["2681",{"pageContent":"JSON API\n\nSince your application's users will not be able to utilize the `client` command, Passport provides a JSON API that you may use to create clients. This saves you the trouble of having to manually code controllers for creating, updating, and deleting clients.\n\nHowever, you will need to pair Passport's JSON API with your own frontend to provide a dashboard for your users to manage their clients. Below, we'll review all of the API endpoints for managing clients. For convenience, we'll use [Axios](https://github.com/axios/axios) to demonstrate making HTTP requests to the endpoints.\n\nThe JSON API is guarded by the `web` and `auth` middleware; therefore, it may only be called from your own application. It is not able to be called from an external source.\n\n<a name=\"get-oauthclients\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":307,"to":315}}}}],["2682",{"pageContent":"`GET /oauth/clients`\n\nThis route returns all of the clients for the authenticated user. This is primarily useful for listing all of the user's clients so that they may edit or delete them:\n\n```js\naxios.get('/oauth/clients')\n    .then(response => {\n        console.log(response.data);\n    });\n```\n\n<a name=\"post-oauthclients\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":316,"to":327}}}}],["2683",{"pageContent":"`POST /oauth/clients`\n\nThis route is used to create new clients. It requires two pieces of data: the client's `name` and a `redirect` URL. The `redirect` URL is where the user will be redirected after approving or denying a request for authorization.\n\nWhen a client is created, it will be issued a client ID and client secret. These values will be used when requesting access tokens from your application. The client creation route will return the new client instance:\n\n```js\nconst data = {\n    name: 'Client Name',\n    redirect: 'http://example.com/callback'\n};\n\naxios.post('/oauth/clients', data)\n    .then(response => {\n        console.log(response.data);\n    })\n    .catch (response => {\n        // List errors on response...\n    });\n```\n\n<a name=\"put-oauthclientsclient-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":328,"to":349}}}}],["2684",{"pageContent":"`PUT /oauth/clients/{client-id}`\n\nThis route is used to update clients. It requires two pieces of data: the client's `name` and a `redirect` URL. The `redirect` URL is where the user will be redirected after approving or denying a request for authorization. The route will return the updated client instance:\n\n```js\nconst data = {\n    name: 'New Client Name',\n    redirect: 'http://example.com/callback'\n};\n\naxios.put('/oauth/clients/' + clientId, data)\n    .then(response => {\n        console.log(response.data);\n    })\n    .catch (response => {\n        // List errors on response...\n    });\n```\n\n<a name=\"delete-oauthclientsclient-id\"></a>\n#### `DELETE /oauth/clients/{client-id}`\n\nThis route is used to delete clients:\n\n```js\naxios.delete('/oauth/clients/' + clientId)\n    .then(response => {\n        // ...\n    });\n```\n\n<a name=\"requesting-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":350,"to":381}}}}],["2685",{"pageContent":"Requesting Tokens\n\n<a name=\"requesting-tokens-redirecting-for-authorization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":382,"to":384}}}}],["2686",{"pageContent":"Redirecting For Authorization\n\nOnce a client has been created, developers may use their client ID and secret to request an authorization code and access token from your application. First, the consuming application should make a redirect request to your application's `/oauth/authorize` route like so:\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Str;\n\n    Route::get('/redirect', function (Request $request) {\n        $request->session()->put('state', $state = Str::random(40));\n\n        $query = http_build_query([\n            'client_id' => 'client-id',\n            'redirect_uri' => 'http://third-party-app.com/callback',\n            'response_type' => 'code',\n            'scope' => '',\n            'state' => $state,\n            // 'prompt' => '', // \"none\", \"consent\", or \"login\"\n        ]);\n\n        return redirect('http://passport-app.test/oauth/authorize?'.$query);\n    });\n\nThe `prompt` parameter may be used to specify the authentication behavior of the Passport application.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":385,"to":407}}}}],["2687",{"pageContent":"return redirect('http://passport-app.test/oauth/authorize?'.$query);\n    });\n\nThe `prompt` parameter may be used to specify the authentication behavior of the Passport application.\n\nIf the `prompt` value is `none`, Passport will always throw an authentication error if the user is not already authenticated with the Passport application. If the value is `consent`, Passport will always display the authorization approval screen, even if all scopes were previously granted to the consuming application. When the value is `login`, the Passport application will always prompt the user to re-login to the application, even if they already have an existing session.\n\nIf no `prompt` value is provided, the user will be prompted for authorization only if they have not previously authorized access to the consuming application for the requested scopes.\n\n> **Note**  \n> Remember, the `/oauth/authorize` route is already defined by Passport. You do not need to manually define this route.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":407,"to":417}}}}],["2688",{"pageContent":"> **Note**  \n> Remember, the `/oauth/authorize` route is already defined by Passport. You do not need to manually define this route.\n\n<a name=\"approving-the-request\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":417,"to":420}}}}],["2689",{"pageContent":"Approving The Request\n\nWhen receiving authorization requests, Passport will automatically respond based on the value of `prompt` parameter (if present) and may display a template to the user allowing them to approve or deny the authorization request. If they approve the request, they will be redirected back to the `redirect_uri` that was specified by the consuming application. The `redirect_uri` must match the `redirect` URL that was specified when the client was created.\n\nIf you would like to customize the authorization approval screen, you may publish Passport's views using the `vendor:publish` Artisan command. The published views will be placed in the `resources/views/vendor/passport` directory:\n\n```shell\nphp artisan vendor:publish --tag=passport-views","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":421,"to":428}}}}],["2690",{"pageContent":"Sometimes you may wish to skip the authorization prompt, such as when authorizing a first-party client. You may accomplish this by [extending the `Client` model](#overriding-default-models) and defining a `skipsAuthorization` method. If `skipsAuthorization` returns `true` the client will be approved and the user will be redirected back to the `redirect_uri` immediately, unless the consuming application has explicitly set the `prompt` parameter when redirecting for authorization:\n\n    <?php\n\n    namespace App\\Models\\Passport;\n\n    use Laravel\\Passport\\Client as BaseClient;\n\n    class Client extends BaseClient\n    {\n        /**\n         * Determine if the client should skip the authorization prompt.\n         */\n        public function skipsAuthorization(): bool\n        {\n            return $this->firstParty();\n        }\n    }\n\n<a name=\"requesting-tokens-converting-authorization-codes-to-access-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":431,"to":450}}}}],["2691",{"pageContent":"Converting Authorization Codes To Access Tokens\n\nIf the user approves the authorization request, they will be redirected back to the consuming application. The consumer should first verify the `state` parameter against the value that was stored prior to the redirect. If the state parameter matches then the consumer should issue a `POST` request to your application to request an access token. The request should include the authorization code that was issued by your application when the user approved the authorization request:\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Http;\n\n    Route::get('/callback', function (Request $request) {\n        $state = $request->session()->pull('state');\n\n        throw_unless(\n            strlen($state) > 0 && $state === $request->state,\n            InvalidArgumentException::class,\n            'Invalid state value.'\n        );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":451,"to":465}}}}],["2692",{"pageContent":"throw_unless(\n            strlen($state) > 0 && $state === $request->state,\n            InvalidArgumentException::class,\n            'Invalid state value.'\n        );\n\n        $response = Http::asForm()->post('http://passport-app.test/oauth/token', [\n            'grant_type' => 'authorization_code',\n            'client_id' => 'client-id',\n            'client_secret' => 'client-secret',\n            'redirect_uri' => 'http://third-party-app.com/callback',\n            'code' => $request->code,\n        ]);\n\n        return $response->json();\n    });\n\nThis `/oauth/token` route will return a JSON response containing `access_token`, `refresh_token`, and `expires_in` attributes. The `expires_in` attribute contains the number of seconds until the access token expires.\n\n> **Note**  \n> Like the `/oauth/authorize` route, the `/oauth/token` route is defined for you by Passport. There is no need to manually define this route.\n\n<a name=\"tokens-json-api\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":465,"to":487}}}}],["2693",{"pageContent":"JSON API\n\nPassport also includes a JSON API for managing authorized access tokens. You may pair this with your own frontend to offer your users a dashboard for managing access tokens. For convenience, we'll use [Axios](https://github.com/mzabriskie/axios) to demonstrate making HTTP requests to the endpoints. The JSON API is guarded by the `web` and `auth` middleware; therefore, it may only be called from your own application.\n\n<a name=\"get-oauthtokens\"></a>\n#### `GET /oauth/tokens`\n\nThis route returns all of the authorized access tokens that the authenticated user has created. This is primarily useful for listing all of the user's tokens so that they can revoke them:\n\n```js\naxios.get('/oauth/tokens')\n    .then(response => {\n        console.log(response.data);\n    });\n```\n\n<a name=\"delete-oauthtokenstoken-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":488,"to":504}}}}],["2694",{"pageContent":"`DELETE /oauth/tokens/{token-id}`\n\nThis route may be used to revoke authorized access tokens and their related refresh tokens:\n\n```js\naxios.delete('/oauth/tokens/' + tokenId);\n```\n\n<a name=\"refreshing-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":505,"to":513}}}}],["2695",{"pageContent":"Refreshing Tokens\n\nIf your application issues short-lived access tokens, users will need to refresh their access tokens via the refresh token that was provided to them when the access token was issued:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    $response = Http::asForm()->post('http://passport-app.test/oauth/token', [\n        'grant_type' => 'refresh_token',\n        'refresh_token' => 'the-refresh-token',\n        'client_id' => 'client-id',\n        'client_secret' => 'client-secret',\n        'scope' => '',\n    ]);\n\n    return $response->json();\n\nThis `/oauth/token` route will return a JSON response containing `access_token`, `refresh_token`, and `expires_in` attributes. The `expires_in` attribute contains the number of seconds until the access token expires.\n\n<a name=\"revoking-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":514,"to":532}}}}],["2696",{"pageContent":"Revoking Tokens\n\nYou may revoke a token by using the `revokeAccessToken` method on the `Laravel\\Passport\\TokenRepository`. You may revoke a token's refresh tokens using the `revokeRefreshTokensByAccessTokenId` method on the `Laravel\\Passport\\RefreshTokenRepository`. These classes may be resolved using Laravel's [service container](/docs/{{version}}/container):\n\n    use Laravel\\Passport\\TokenRepository;\n    use Laravel\\Passport\\RefreshTokenRepository;\n\n    $tokenRepository = app(TokenRepository::class);\n    $refreshTokenRepository = app(RefreshTokenRepository::class);\n\n    // Revoke an access token...\n    $tokenRepository->revokeAccessToken($tokenId);\n\n    // Revoke all of the token's refresh tokens...\n    $refreshTokenRepository->revokeRefreshTokensByAccessTokenId($tokenId);\n\n<a name=\"purging-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":533,"to":549}}}}],["2697",{"pageContent":"Purging Tokens\n\nWhen tokens have been revoked or expired, you might want to purge them from the database. Passport's included `passport:purge` Artisan command can do this for you:\n\n```shell\n# Purge revoked and expired tokens and auth codes...\nphp artisan passport:purge\n\n# Only purge tokens expired for more than 6 hours...\nphp artisan passport:purge --hours=6\n\n# Only purge revoked tokens and auth codes...\nphp artisan passport:purge --revoked\n\n# Only purge expired tokens and auth codes...\nphp artisan passport:purge --expired\n```\n\nYou may also configure a [scheduled job](/docs/{{version}}/scheduling) in your application's `App\\Console\\Kernel` class to automatically prune your tokens on a schedule:\n\n    /**\n     * Define the application's command schedule.\n     */\n    protected function schedule(Schedule $schedule): void\n    {\n        $schedule->command('passport:purge')->hourly();\n    }\n\n<a name=\"code-grant-pkce\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":550,"to":578}}}}],["2698",{"pageContent":"Authorization Code Grant with PKCE\n\nThe Authorization Code grant with \"Proof Key for Code Exchange\" (PKCE) is a secure way to authenticate single page applications or native applications to access your API. This grant should be used when you can't guarantee that the client secret will be stored confidentially or in order to mitigate the threat of having the authorization code intercepted by an attacker. A combination of a \"code verifier\" and a \"code challenge\" replaces the client secret when exchanging the authorization code for an access token.\n\n<a name=\"creating-a-auth-pkce-grant-client\"></a>\n### Creating The Client\n\nBefore your application can issue tokens via the authorization code grant with PKCE, you will need to create a PKCE-enabled client. You may do this using the `passport:client` Artisan command with the `--public` option:\n\n```shell\nphp artisan passport:client --public\n```\n\n<a name=\"requesting-auth-pkce-grant-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":579,"to":592}}}}],["2699",{"pageContent":"Requesting Tokens\n\n<a name=\"code-verifier-code-challenge\"></a>\n#### Code Verifier & Code Challenge\n\nAs this authorization grant does not provide a client secret, developers will need to generate a combination of a code verifier and a code challenge in order to request a token.\n\nThe code verifier should be a random string of between 43 and 128 characters containing letters, numbers, and  `\"-\"`, `\".\"`, `\"_\"`, `\"~\"` characters, as defined in the [RFC 7636 specification](https://tools.ietf.org/html/rfc7636).\n\nThe code challenge should be a Base64 encoded string with URL and filename-safe characters. The trailing `'='` characters should be removed and no line breaks, whitespace, or other additional characters should be present.\n\n    $encoded = base64_encode(hash('sha256', $code_verifier, true));\n\n    $codeChallenge = strtr(rtrim($encoded, '='), '+/', '-_');\n\n<a name=\"code-grant-pkce-redirecting-for-authorization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":593,"to":608}}}}],["2700",{"pageContent":"Redirecting For Authorization\n\nOnce a client has been created, you may use the client ID and the generated code verifier and code challenge to request an authorization code and access token from your application. First, the consuming application should make a redirect request to your application's `/oauth/authorize` route:\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Str;\n\n    Route::get('/redirect', function (Request $request) {\n        $request->session()->put('state', $state = Str::random(40));\n\n        $request->session()->put(\n            'code_verifier', $code_verifier = Str::random(128)\n        );\n\n        $codeChallenge = strtr(rtrim(\n            base64_encode(hash('sha256', $code_verifier, true))\n        , '='), '+/', '-_');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":609,"to":625}}}}],["2701",{"pageContent":"$codeChallenge = strtr(rtrim(\n            base64_encode(hash('sha256', $code_verifier, true))\n        , '='), '+/', '-_');\n\n        $query = http_build_query([\n            'client_id' => 'client-id',\n            'redirect_uri' => 'http://third-party-app.com/callback',\n            'response_type' => 'code',\n            'scope' => '',\n            'state' => $state,\n            'code_challenge' => $codeChallenge,\n            'code_challenge_method' => 'S256',\n            // 'prompt' => '', // \"none\", \"consent\", or \"login\"\n        ]);\n\n        return redirect('http://passport-app.test/oauth/authorize?'.$query);\n    });\n\n<a name=\"code-grant-pkce-converting-authorization-codes-to-access-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":625,"to":643}}}}],["2702",{"pageContent":"Converting Authorization Codes To Access Tokens\n\nIf the user approves the authorization request, they will be redirected back to the consuming application. The consumer should verify the `state` parameter against the value that was stored prior to the redirect, as in the standard Authorization Code Grant.\n\nIf the state parameter matches, the consumer should issue a `POST` request to your application to request an access token. The request should include the authorization code that was issued by your application when the user approved the authorization request along with the originally generated code verifier:\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Http;\n\n    Route::get('/callback', function (Request $request) {\n        $state = $request->session()->pull('state');\n\n        $codeVerifier = $request->session()->pull('code_verifier');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":644,"to":656}}}}],["2703",{"pageContent":"Route::get('/callback', function (Request $request) {\n        $state = $request->session()->pull('state');\n\n        $codeVerifier = $request->session()->pull('code_verifier');\n\n        throw_unless(\n            strlen($state) > 0 && $state === $request->state,\n            InvalidArgumentException::class\n        );\n\n        $response = Http::asForm()->post('http://passport-app.test/oauth/token', [\n            'grant_type' => 'authorization_code',\n            'client_id' => 'client-id',\n            'redirect_uri' => 'http://third-party-app.com/callback',\n            'code_verifier' => $codeVerifier,\n            'code' => $request->code,\n        ]);\n\n        return $response->json();\n    });\n\n<a name=\"password-grant-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":656,"to":677}}}}],["2704",{"pageContent":"Password Grant Tokens\n\n> **Warning**  \n> We no longer recommend using password grant tokens. Instead, you should choose [a grant type that is currently recommended by OAuth2 Server](https://oauth2.thephpleague.com/authorization-server/which-grant/).\n\nThe OAuth2 password grant allows your other first-party clients, such as a mobile application, to obtain an access token using an email address / username and password. This allows you to issue access tokens securely to your first-party clients without requiring your users to go through the entire OAuth2 authorization code redirect flow.\n\n<a name=\"creating-a-password-grant-client\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":678,"to":685}}}}],["2705",{"pageContent":"Creating A Password Grant Client\n\nBefore your application can issue tokens via the password grant, you will need to create a password grant client. You may do this using the `passport:client` Artisan command with the `--password` option. **If you have already run the `passport:install` command, you do not need to run this command:**\n\n```shell\nphp artisan passport:client --password\n```\n\n<a name=\"requesting-password-grant-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":686,"to":694}}}}],["2706",{"pageContent":"Requesting Tokens\n\nOnce you have created a password grant client, you may request an access token by issuing a `POST` request to the `/oauth/token` route with the user's email address and password. Remember, this route is already registered by Passport so there is no need to define it manually. If the request is successful, you will receive an `access_token` and `refresh_token` in the JSON response from the server:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    $response = Http::asForm()->post('http://passport-app.test/oauth/token', [\n        'grant_type' => 'password',\n        'client_id' => 'client-id',\n        'client_secret' => 'client-secret',\n        'username' => 'taylor@laravel.com',\n        'password' => 'my-password',\n        'scope' => '',\n    ]);\n\n    return $response->json();\n\n> **Note**  \n> Remember, access tokens are long-lived by default. However, you are free to [configure your maximum access token lifetime](#configuration) if needed.\n\n<a name=\"requesting-all-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":695,"to":715}}}}],["2707",{"pageContent":"Requesting All Scopes\n\nWhen using the password grant or client credentials grant, you may wish to authorize the token for all of the scopes supported by your application. You can do this by requesting the `*` scope. If you request the `*` scope, the `can` method on the token instance will always return `true`. This scope may only be assigned to a token that is issued using the `password` or `client_credentials` grant:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    $response = Http::asForm()->post('http://passport-app.test/oauth/token', [\n        'grant_type' => 'password',\n        'client_id' => 'client-id',\n        'client_secret' => 'client-secret',\n        'username' => 'taylor@laravel.com',\n        'password' => 'my-password',\n        'scope' => '*',\n    ]);\n\n<a name=\"customizing-the-user-provider\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":716,"to":731}}}}],["2708",{"pageContent":"Customizing The User Provider\n\nIf your application uses more than one [authentication user provider](/docs/{{version}}/authentication#introduction), you may specify which user provider the password grant client uses by providing a `--provider` option when creating the client via the `artisan passport:client --password` command. The given provider name should match a valid provider defined in your application's `config/auth.php` configuration file. You can then [protect your route using middleware](#via-middleware) to ensure that only users from the guard's specified provider are authorized.\n\n<a name=\"customizing-the-username-field\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":732,"to":736}}}}],["2709",{"pageContent":"Customizing The Username Field\n\nWhen authenticating using the password grant, Passport will use the `email` attribute of your authenticatable model as the \"username\". However, you may customize this behavior by defining a `findForPassport` method on your model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n    use Laravel\\Passport\\HasApiTokens;\n\n    class User extends Authenticatable\n    {\n        use HasApiTokens, Notifiable;\n\n        /**\n         * Find the user instance for the given username.\n         */\n        public function findForPassport(string $username): User\n        {\n            return $this->where('username', $username)->first();\n        }\n    }\n\n<a name=\"customizing-the-password-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":737,"to":762}}}}],["2710",{"pageContent":"Customizing The Password Validation\n\nWhen authenticating using the password grant, Passport will use the `password` attribute of your model to validate the given password. If your model does not have a `password` attribute or you wish to customize the password validation logic, you can define a `validateForPassportPasswordGrant` method on your model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n    use Illuminate\\Support\\Facades\\Hash;\n    use Laravel\\Passport\\HasApiTokens;\n\n    class User extends Authenticatable\n    {\n        use HasApiTokens, Notifiable;\n\n        /**\n         * Validate the password of the user for the Passport password grant.\n         */\n        public function validateForPassportPasswordGrant(string $password): bool\n        {\n            return Hash::check($password, $this->password);\n        }\n    }\n\n<a name=\"implicit-grant-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":763,"to":789}}}}],["2711",{"pageContent":"Implicit Grant Tokens\n\n> **Warning**  \n> We no longer recommend using implicit grant tokens. Instead, you should choose [a grant type that is currently recommended by OAuth2 Server](https://oauth2.thephpleague.com/authorization-server/which-grant/).\n\nThe implicit grant is similar to the authorization code grant; however, the token is returned to the client without exchanging an authorization code. This grant is most commonly used for JavaScript or mobile applications where the client credentials can't be securely stored. To enable the grant, call the `enableImplicitGrant` method in the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class:\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Passport::enableImplicitGrant();\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":790,"to":803}}}}],["2712",{"pageContent":"/**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Passport::enableImplicitGrant();\n    }\n\nOnce the grant has been enabled, developers may use their client ID to request an access token from your application. The consuming application should make a redirect request to your application's `/oauth/authorize` route like so:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/redirect', function (Request $request) {\n        $request->session()->put('state', $state = Str::random(40));\n\n        $query = http_build_query([\n            'client_id' => 'client-id',\n            'redirect_uri' => 'http://third-party-app.com/callback',\n            'response_type' => 'token',\n            'scope' => '',\n            'state' => $state,\n            // 'prompt' => '', // \"none\", \"consent\", or \"login\"\n        ]);\n\n        return redirect('http://passport-app.test/oauth/authorize?'.$query);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":803,"to":828}}}}],["2713",{"pageContent":"return redirect('http://passport-app.test/oauth/authorize?'.$query);\n    });\n\n> **Note**  \n> Remember, the `/oauth/authorize` route is already defined by Passport. You do not need to manually define this route.\n\n<a name=\"client-credentials-grant-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":828,"to":834}}}}],["2714",{"pageContent":"Client Credentials Grant Tokens\n\nThe client credentials grant is suitable for machine-to-machine authentication. For example, you might use this grant in a scheduled job which is performing maintenance tasks over an API.\n\nBefore your application can issue tokens via the client credentials grant, you will need to create a client credentials grant client. You may do this using the `--client` option of the `passport:client` Artisan command:\n\n```shell\nphp artisan passport:client --client","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":835,"to":842}}}}],["2715",{"pageContent":"Next, to use this grant type, you may add the `CheckClientCredentials` middleware to the `$middlewareAliases` property of your application's `app/Http/Kernel.php` file:\n\n    use Laravel\\Passport\\Http\\Middleware\\CheckClientCredentials;\n\n    protected $middlewareAliases = [\n        'client' => CheckClientCredentials::class,\n    ];\n\nThen, attach the middleware to a route:\n\n    Route::get('/orders', function (Request $request) {\n        ...\n    })->middleware('client');\n\nTo restrict access to the route to specific scopes, you may provide a comma-delimited list of the required scopes when attaching the `client` middleware to the route:\n\n    Route::get('/orders', function (Request $request) {\n        ...\n    })->middleware('client:check-status,your-scope');\n\n<a name=\"retrieving-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":845,"to":865}}}}],["2716",{"pageContent":"Retrieving Tokens\n\nTo retrieve a token using this grant type, make a request to the `oauth/token` endpoint:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    $response = Http::asForm()->post('http://passport-app.test/oauth/token', [\n        'grant_type' => 'client_credentials',\n        'client_id' => 'client-id',\n        'client_secret' => 'client-secret',\n        'scope' => 'your-scope',\n    ]);\n\n    return $response->json()['access_token'];\n\n<a name=\"personal-access-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":866,"to":881}}}}],["2717",{"pageContent":"Personal Access Tokens\n\nSometimes, your users may want to issue access tokens to themselves without going through the typical authorization code redirect flow. Allowing users to issue tokens to themselves via your application's UI can be useful for allowing users to experiment with your API or may serve as a simpler approach to issuing access tokens in general.\n\n> **Note**  \n> If your application is primarily using Passport to issue personal access tokens, consider using [Laravel Sanctum](/docs/{{version}}/sanctum), Laravel's light-weight first-party library for issuing API access tokens.\n\n<a name=\"creating-a-personal-access-client\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":882,"to":889}}}}],["2718",{"pageContent":"Creating A Personal Access Client\n\nBefore your application can issue personal access tokens, you will need to create a personal access client. You may do this by executing the `passport:client` Artisan command with the `--personal` option. If you have already run the `passport:install` command, you do not need to run this command:\n\n```shell\nphp artisan passport:client --personal\n```\n\nAfter creating your personal access client, place the client's ID and plain-text secret value in your application's `.env` file:\n\n```ini\nPASSPORT_PERSONAL_ACCESS_CLIENT_ID=\"client-id-value\"\nPASSPORT_PERSONAL_ACCESS_CLIENT_SECRET=\"unhashed-client-secret-value\"\n```\n\n<a name=\"managing-personal-access-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":890,"to":905}}}}],["2719",{"pageContent":"Managing Personal Access Tokens\n\nOnce you have created a personal access client, you may issue tokens for a given user using the `createToken` method on the `App\\Models\\User` model instance. The `createToken` method accepts the name of the token as its first argument and an optional array of [scopes](#token-scopes) as its second argument:\n\n    use App\\Models\\User;\n\n    $user = User::find(1);\n\n    // Creating a token without scopes...\n    $token = $user->createToken('Token Name')->accessToken;\n\n    // Creating a token with scopes...\n    $token = $user->createToken('My Token', ['place-orders'])->accessToken;\n\n<a name=\"personal-access-tokens-json-api\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":906,"to":920}}}}],["2720",{"pageContent":"JSON API\n\nPassport also includes a JSON API for managing personal access tokens. You may pair this with your own frontend to offer your users a dashboard for managing personal access tokens. Below, we'll review all of the API endpoints for managing personal access tokens. For convenience, we'll use [Axios](https://github.com/mzabriskie/axios) to demonstrate making HTTP requests to the endpoints.\n\nThe JSON API is guarded by the `web` and `auth` middleware; therefore, it may only be called from your own application. It is not able to be called from an external source.\n\n<a name=\"get-oauthscopes\"></a>\n#### `GET /oauth/scopes`\n\nThis route returns all of the [scopes](#token-scopes) defined for your application. You may use this route to list the scopes a user may assign to a personal access token:\n\n```js\naxios.get('/oauth/scopes')\n    .then(response => {\n        console.log(response.data);\n    });\n```\n\n<a name=\"get-oauthpersonal-access-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":921,"to":939}}}}],["2721",{"pageContent":"`GET /oauth/personal-access-tokens`\n\nThis route returns all of the personal access tokens that the authenticated user has created. This is primarily useful for listing all of the user's tokens so that they may edit or revoke them:\n\n```js\naxios.get('/oauth/personal-access-tokens')\n    .then(response => {\n        console.log(response.data);\n    });\n```\n\n<a name=\"post-oauthpersonal-access-tokens\"></a>\n#### `POST /oauth/personal-access-tokens`\n\nThis route creates new personal access tokens. It requires two pieces of data: the token's `name` and the `scopes` that should be assigned to the token:\n\n```js\nconst data = {\n    name: 'Token Name',\n    scopes: []\n};\n\naxios.post('/oauth/personal-access-tokens', data)\n    .then(response => {\n        console.log(response.data.accessToken);\n    })\n    .catch (response => {\n        // List errors on response...\n    });\n```\n\n<a name=\"delete-oauthpersonal-access-tokenstoken-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":940,"to":971}}}}],["2722",{"pageContent":"`DELETE /oauth/personal-access-tokens/{token-id}`\n\nThis route may be used to revoke personal access tokens:\n\n```js\naxios.delete('/oauth/personal-access-tokens/' + tokenId);\n```\n\n<a name=\"protecting-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":972,"to":980}}}}],["2723",{"pageContent":"Protecting Routes\n\n<a name=\"via-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":981,"to":983}}}}],["2724",{"pageContent":"Via Middleware\n\nPassport includes an [authentication guard](/docs/{{version}}/authentication#adding-custom-guards) that will validate access tokens on incoming requests. Once you have configured the `api` guard to use the `passport` driver, you only need to specify the `auth:api` middleware on any routes that should require a valid access token:\n\n    Route::get('/user', function () {\n        // ...\n    })->middleware('auth:api');\n\n> **Warning**  \n> If you are using the [client credentials grant](#client-credentials-grant-tokens), you should use [the `client` middleware](#client-credentials-grant-tokens) to protect your routes instead of the `auth:api` middleware.\n\n<a name=\"multiple-authentication-guards\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":984,"to":995}}}}],["2725",{"pageContent":"Multiple Authentication Guards\n\nIf your application authenticates different types of users that perhaps use entirely different Eloquent models, you will likely need to define a guard configuration for each user provider type in your application. This allows you to protect requests intended for specific user providers. For example, given the following guard configuration the `config/auth.php` configuration file:\n\n    'api' => [\n        'driver' => 'passport',\n        'provider' => 'users',\n    ],\n\n    'api-customers' => [\n        'driver' => 'passport',\n        'provider' => 'customers',\n    ],\n\nThe following route will utilize the `api-customers` guard, which uses the `customers` user provider, to authenticate incoming requests:\n\n    Route::get('/customer', function () {\n        // ...\n    })->middleware('auth:api-customers');\n\n> **Note**  \n> For more information on using multiple user providers with Passport, please consult the [password grant documentation](#customizing-the-user-provider).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":996,"to":1017}}}}],["2726",{"pageContent":"> **Note**  \n> For more information on using multiple user providers with Passport, please consult the [password grant documentation](#customizing-the-user-provider).\n\n<a name=\"passing-the-access-token\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1017,"to":1020}}}}],["2727",{"pageContent":"Passing The Access Token\n\nWhen calling routes that are protected by Passport, your application's API consumers should specify their access token as a `Bearer` token in the `Authorization` header of their request. For example, when using the Guzzle HTTP library:\n\n    use Illuminate\\Support\\Facades\\Http;\n\n    $response = Http::withHeaders([\n        'Accept' => 'application/json',\n        'Authorization' => 'Bearer '.$accessToken,\n    ])->get('https://passport-app.test/api/user');\n\n    return $response->json();\n\n<a name=\"token-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1021,"to":1034}}}}],["2728",{"pageContent":"Token Scopes\n\nScopes allow your API clients to request a specific set of permissions when requesting authorization to access an account. For example, if you are building an e-commerce application, not all API consumers will need the ability to place orders. Instead, you may allow the consumers to only request authorization to access order shipment statuses. In other words, scopes allow your application's users to limit the actions a third-party application can perform on their behalf.\n\n<a name=\"defining-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1035,"to":1039}}}}],["2729",{"pageContent":"Defining Scopes\n\nYou may define your API's scopes using the `Passport::tokensCan` method in the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class. The `tokensCan` method accepts an array of scope names and scope descriptions. The scope description may be anything you wish and will be displayed to users on the authorization approval screen:\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Passport::tokensCan([\n            'place-orders' => 'Place orders',\n            'check-status' => 'Check order status',\n        ]);\n    }\n\n<a name=\"default-scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1040,"to":1055}}}}],["2730",{"pageContent":"Default Scope\n\nIf a client does not request any specific scopes, you may configure your Passport server to attach default scope(s) to the token using the `setDefaultScope` method. Typically, you should call this method from the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class:\n\n    use Laravel\\Passport\\Passport;\n\n    Passport::tokensCan([\n        'place-orders' => 'Place orders',\n        'check-status' => 'Check order status',\n    ]);\n\n    Passport::setDefaultScope([\n        'check-status',\n        'place-orders',\n    ]);\n\n> **Note**\n> Passport's default scopes do not apply to personal access tokens that are generated by the user.\n\n<a name=\"assigning-scopes-to-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1056,"to":1075}}}}],["2731",{"pageContent":"Assigning Scopes To Tokens\n\n<a name=\"when-requesting-authorization-codes\"></a>\n#### When Requesting Authorization Codes\n\nWhen requesting an access token using the authorization code grant, consumers should specify their desired scopes as the `scope` query string parameter. The `scope` parameter should be a space-delimited list of scopes:\n\n    Route::get('/redirect', function () {\n        $query = http_build_query([\n            'client_id' => 'client-id',\n            'redirect_uri' => 'http://example.com/callback',\n            'response_type' => 'code',\n            'scope' => 'place-orders check-status',\n        ]);\n\n        return redirect('http://passport-app.test/oauth/authorize?'.$query);\n    });\n\n<a name=\"when-issuing-personal-access-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1076,"to":1094}}}}],["2732",{"pageContent":"When Issuing Personal Access Tokens\n\nIf you are issuing personal access tokens using the `App\\Models\\User` model's `createToken` method, you may pass the array of desired scopes as the second argument to the method:\n\n    $token = $user->createToken('My Token', ['place-orders'])->accessToken;\n\n<a name=\"checking-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1095,"to":1101}}}}],["2733",{"pageContent":"Checking Scopes\n\nPassport includes two middleware that may be used to verify that an incoming request is authenticated with a token that has been granted a given scope. To get started, add the following middleware to the `$middlewareAliases` property of your `app/Http/Kernel.php` file:\n\n    'scopes' => \\Laravel\\Passport\\Http\\Middleware\\CheckScopes::class,\n    'scope' => \\Laravel\\Passport\\Http\\Middleware\\CheckForAnyScope::class,\n\n<a name=\"check-for-all-scopes\"></a>\n#### Check For All Scopes\n\nThe `scopes` middleware may be assigned to a route to verify that the incoming request's access token has all of the listed scopes:\n\n    Route::get('/orders', function () {\n        // Access token has both \"check-status\" and \"place-orders\" scopes...\n    })->middleware(['auth:api', 'scopes:check-status,place-orders']);\n\n<a name=\"check-for-any-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1102,"to":1118}}}}],["2734",{"pageContent":"Check For Any Scopes\n\nThe `scope` middleware may be assigned to a route to verify that the incoming request's access token has *at least one* of the listed scopes:\n\n    Route::get('/orders', function () {\n        // Access token has either \"check-status\" or \"place-orders\" scope...\n    })->middleware(['auth:api', 'scope:check-status,place-orders']);\n\n<a name=\"checking-scopes-on-a-token-instance\"></a>\n#### Checking Scopes On A Token Instance\n\nOnce an access token authenticated request has entered your application, you may still check if the token has a given scope using the `tokenCan` method on the authenticated `App\\Models\\User` instance:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/orders', function (Request $request) {\n        if ($request->user()->tokenCan('place-orders')) {\n            // ...\n        }\n    });\n\n<a name=\"additional-scope-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1119,"to":1140}}}}],["2735",{"pageContent":"Additional Scope Methods\n\nThe `scopeIds` method will return an array of all defined IDs / names:\n\n    use Laravel\\Passport\\Passport;\n\n    Passport::scopeIds();\n\nThe `scopes` method will return an array of all defined scopes as instances of `Laravel\\Passport\\Scope`:\n\n    Passport::scopes();\n\nThe `scopesFor` method will return an array of `Laravel\\Passport\\Scope` instances matching the given IDs / names:\n\n    Passport::scopesFor(['place-orders', 'check-status']);\n\nYou may determine if a given scope has been defined using the `hasScope` method:\n\n    Passport::hasScope('place-orders');\n\n<a name=\"consuming-your-api-with-javascript\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1141,"to":1161}}}}],["2736",{"pageContent":"Consuming Your API With JavaScript\n\nWhen building an API, it can be extremely useful to be able to consume your own API from your JavaScript application. This approach to API development allows your own application to consume the same API that you are sharing with the world. The same API may be consumed by your web application, mobile applications, third-party applications, and any SDKs that you may publish on various package managers.\n\nTypically, if you want to consume your API from your JavaScript application, you would need to manually send an access token to the application and pass it with each request to your application. However, Passport includes a middleware that can handle this for you. All you need to do is add the `CreateFreshApiToken` middleware to your `web` middleware group in your `app/Http/Kernel.php` file:\n\n    'web' => [\n        // Other middleware...\n        \\Laravel\\Passport\\Http\\Middleware\\CreateFreshApiToken::class,\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1162,"to":1171}}}}],["2737",{"pageContent":"'web' => [\n        // Other middleware...\n        \\Laravel\\Passport\\Http\\Middleware\\CreateFreshApiToken::class,\n    ],\n\n> **Warning**  \n> You should ensure that the `CreateFreshApiToken` middleware is the last middleware listed in your middleware stack.\n\nThis middleware will attach a `laravel_token` cookie to your outgoing responses. This cookie contains an encrypted JWT that Passport will use to authenticate API requests from your JavaScript application. The JWT has a lifetime equal to your `session.lifetime` configuration value. Now, since the browser will automatically send the cookie with all subsequent requests, you may make requests to your application's API without explicitly passing an access token:\n\n    axios.get('/api/user')\n        .then(response => {\n            console.log(response.data);\n        });\n\n<a name=\"customizing-the-cookie-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1171,"to":1186}}}}],["2738",{"pageContent":"Customizing The Cookie Name\n\nIf needed, you can customize the `laravel_token` cookie's name using the `Passport::cookie` method. Typically, this method should be called from the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class:\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        Passport::cookie('custom_name');\n    }\n\n<a name=\"csrf-protection\"></a>\n#### CSRF Protection\n\nWhen using this method of authentication, you will need to ensure a valid CSRF token header is included in your requests. The default Laravel JavaScript scaffolding includes an Axios instance, which will automatically use the encrypted `XSRF-TOKEN` cookie value to send an `X-XSRF-TOKEN` header on same-origin requests.\n\n> **Note**  \n> If you choose to send the `X-CSRF-TOKEN` header instead of `X-XSRF-TOKEN`, you will need to use the unencrypted token provided by `csrf_token()`.\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1187,"to":1207}}}}],["2739",{"pageContent":"Events\n\nPassport raises events when issuing access tokens and refresh tokens. You may use these events to prune or revoke other access tokens in your database. If you would like, you may attach listeners to these events in your application's `App\\Providers\\EventServiceProvider` class:\n\n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        'Laravel\\Passport\\Events\\AccessTokenCreated' => [\n            'App\\Listeners\\RevokeOldTokens',\n        ],\n\n        'Laravel\\Passport\\Events\\RefreshTokenCreated' => [\n            'App\\Listeners\\PruneOldTokens',\n        ],\n    ];\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1208,"to":1227}}}}],["2740",{"pageContent":"Testing\n\nPassport's `actingAs` method may be used to specify the currently authenticated user as well as its scopes. The first argument given to the `actingAs` method is the user instance and the second is an array of scopes that should be granted to the user's token:\n\n    use App\\Models\\User;\n    use Laravel\\Passport\\Passport;\n\n    public function test_servers_can_be_created(): void\n    {\n        Passport::actingAs(\n            User::factory()->create(),\n            ['create-servers']\n        );\n\n        $response = $this->post('/api/create-server');\n\n        $response->assertStatus(201);\n    }\n\nPassport's `actingAsClient` method may be used to specify the currently authenticated client as well as its scopes. The first argument given to the `actingAsClient` method is the client instance and the second is an array of scopes that should be granted to the client's token:\n\n    use Laravel\\Passport\\Client;\n    use Laravel\\Passport\\Passport;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1228,"to":1250}}}}],["2741",{"pageContent":"use Laravel\\Passport\\Client;\n    use Laravel\\Passport\\Passport;\n\n    public function test_orders_can_be_retrieved(): void\n    {\n        Passport::actingAsClient(\n            Client::factory()->create(),\n            ['check-status']\n        );\n\n        $response = $this->get('/api/orders');\n\n        $response->assertStatus(200);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passport.md","loc":{"lines":{"from":1250,"to":1263}}}}],["2742",{"pageContent":"# Resetting Passwords\n\n- [Introduction](#introduction)\n    - [Model Preparation](#model-preparation)\n    - [Database Preparation](#database-preparation)\n    - [Configuring Trusted Hosts](#configuring-trusted-hosts)\n- [Routing](#routing)\n    - [Requesting The Password Reset Link](#requesting-the-password-reset-link)\n    - [Resetting The Password](#resetting-the-password)\n- [Deleting Expired Tokens](#deleting-expired-tokens)\n- [Customization](#password-customization)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":1,"to":13}}}}],["2743",{"pageContent":"Introduction\n\nMost web applications provide a way for users to reset their forgotten passwords. Rather than forcing you to re-implement this by hand for every application you create, Laravel provides convenient services for sending password reset links and secure resetting passwords.\n\n> **Note**  \n> Want to get started fast? Install a Laravel [application starter kit](/docs/{{version}}/starter-kits) in a fresh Laravel application. Laravel's starter kits will take care of scaffolding your entire authentication system, including resetting forgotten passwords.\n\n<a name=\"model-preparation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":14,"to":21}}}}],["2744",{"pageContent":"Model Preparation\n\nBefore using the password reset features of Laravel, your application's `App\\Models\\User` model must use the `Illuminate\\Notifications\\Notifiable` trait. Typically, this trait is already included on the default `App\\Models\\User` model that is created with new Laravel applications.\n\nNext, verify that your `App\\Models\\User` model implements the `Illuminate\\Contracts\\Auth\\CanResetPassword` contract. The `App\\Models\\User` model included with the framework already implements this interface, and uses the `Illuminate\\Auth\\Passwords\\CanResetPassword` trait to include the methods needed to implement the interface.\n\n<a name=\"database-preparation\"></a>\n### Database Preparation\n\nA table must be created to store your application's password reset tokens. The migration for this table is included in the default Laravel application, so you only need to migrate your database to create this table:\n\n```shell\nphp artisan migrate\n```\n\n<a name=\"configuring-trusted-hosts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":22,"to":37}}}}],["2745",{"pageContent":"Configuring Trusted Hosts\n\nBy default, Laravel will respond to all requests it receives regardless of the content of the HTTP request's `Host` header. In addition, the `Host` header's value will be used when generating absolute URLs to your application during a web request.\n\nTypically, you should configure your web server, such as Nginx or Apache, to only send requests to your application that match a given host name. However, if you do not have the ability to customize your web server directly and need to instruct Laravel to only respond to certain host names, you may do so by enabling the `App\\Http\\Middleware\\TrustHosts` middleware for your application. This is particularly important when your application offers password reset functionality.\n\nTo learn more about this middleware, please consult the [`TrustHosts` middleware documentation](/docs/{{version}}/requests#configuring-trusted-hosts).\n\n<a name=\"routing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":38,"to":46}}}}],["2746",{"pageContent":"Routing\n\nTo properly implement support for allowing users to reset their passwords, we will need to define several routes. First, we will need a pair of routes to handle allowing the user to request a password reset link via their email address. Second, we will need a pair of routes to handle actually resetting the password once the user visits the password reset link that is emailed to them and completes the password reset form.\n\n<a name=\"requesting-the-password-reset-link\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":47,"to":51}}}}],["2747",{"pageContent":"Requesting The Password Reset Link\n\n<a name=\"the-password-reset-link-request-form\"></a>\n#### The Password Reset Link Request Form\n\nFirst, we will define the routes that are needed to request password reset links. To get started, we will define a route that returns a view with the password reset link request form:\n\n    Route::get('/forgot-password', function () {\n        return view('auth.forgot-password');\n    })->middleware('guest')->name('password.request');\n\nThe view that is returned by this route should have a form containing an `email` field, which will allow the user to request a password reset link for a given email address.\n\n<a name=\"password-reset-link-handling-the-form-submission\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":52,"to":65}}}}],["2748",{"pageContent":"Handling The Form Submission\n\nNext, we will define a route that handles the form submission request from the \"forgot password\" view. This route will be responsible for validating the email address and sending the password reset request to the corresponding user:\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Password;\n\n    Route::post('/forgot-password', function (Request $request) {\n        $request->validate(['email' => 'required|email']);\n\n        $status = Password::sendResetLink(\n            $request->only('email')\n        );\n\n        return $status === Password::RESET_LINK_SENT\n                    ? back()->with(['status' => __($status)])\n                    : back()->withErrors(['email' => __($status)]);\n    })->middleware('guest')->name('password.email');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":66,"to":83}}}}],["2749",{"pageContent":"Before moving on, let's examine this route in more detail. First, the request's `email` attribute is validated. Next, we will use Laravel's built-in \"password broker\" (via the `Password` facade) to send a password reset link to the user. The password broker will take care of retrieving the user by the given field (in this case, the email address) and sending the user a password reset link via Laravel's built-in [notification system](/docs/{{version}}/notifications).\n\nThe `sendResetLink` method returns a \"status\" slug. This status may be translated using Laravel's [localization](/docs/{{version}}/localization) helpers in order to display a user-friendly message to the user regarding the status of their request. The translation of the password reset status is determined by your application's `lang/{lang}/passwords.php` language file. An entry for each possible value of the status slug is located within the `passwords` language file.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":85,"to":87}}}}],["2750",{"pageContent":"> **Note**\n> By default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files, you may publish them via the `lang:publish` Artisan command.\n\nYou may be wondering how Laravel knows how to retrieve the user record from your application's database when calling the `Password` facade's `sendResetLink` method. The Laravel password broker utilizes your authentication system's \"user providers\" to retrieve database records. The user provider used by the password broker is configured within the `passwords` configuration array of your `config/auth.php` configuration file. To learn more about writing custom user providers, consult the [authentication documentation](/docs/{{version}}/authentication#adding-custom-user-providers).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":89,"to":92}}}}],["2751",{"pageContent":"> **Note**  \n> When manually implementing password resets, you are required to define the contents of the views and routes yourself. If you would like scaffolding that includes all necessary authentication and verification logic, check out the [Laravel application starter kits](/docs/{{version}}/starter-kits).\n\n<a name=\"resetting-the-password\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":94,"to":97}}}}],["2752",{"pageContent":"Resetting The Password\n\n<a name=\"the-password-reset-form\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":98,"to":100}}}}],["2753",{"pageContent":"The Password Reset Form\n\nNext, we will define the routes necessary to actually reset the password once the user clicks on the password reset link that has been emailed to them and provides a new password. First, let's define the route that will display the reset password form that is displayed when the user clicks the reset password link. This route will receive a `token` parameter that we will use later to verify the password reset request:\n\n    Route::get('/reset-password/{token}', function (string $token) {\n        return view('auth.reset-password', ['token' => $token]);\n    })->middleware('guest')->name('password.reset');\n\nThe view that is returned by this route should display a form containing an `email` field, a `password` field, a `password_confirmation` field, and a hidden `token` field, which should contain the value of the secret `$token` received by our route.\n\n<a name=\"password-reset-handling-the-form-submission\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":101,"to":111}}}}],["2754",{"pageContent":"Handling The Form Submission\n\nOf course, we need to define a route to actually handle the password reset form submission. This route will be responsible for validating the incoming request and updating the user's password in the database:\n\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Events\\PasswordReset;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Hash;\n    use Illuminate\\Support\\Facades\\Password;\n    use Illuminate\\Support\\Str;\n\n    Route::post('/reset-password', function (Request $request) {\n        $request->validate([\n            'token' => 'required',\n            'email' => 'required|email',\n            'password' => 'required|min:8|confirmed',\n        ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":112,"to":128}}}}],["2755",{"pageContent":"$status = Password::reset(\n            $request->only('email', 'password', 'password_confirmation', 'token'),\n            function (User $user, string $password) {\n                $user->forceFill([\n                    'password' => Hash::make($password)\n                ])->setRememberToken(Str::random(60));\n\n                $user->save();\n\n                event(new PasswordReset($user));\n            }\n        );\n\n        return $status === Password::PASSWORD_RESET\n                    ? redirect()->route('login')->with('status', __($status))\n                    : back()->withErrors(['email' => [__($status)]]);\n    })->middleware('guest')->name('password.update');\n\nBefore moving on, let's examine this route in more detail. First, the request's `token`, `email`, and `password` attributes are validated. Next, we will use Laravel's built-in \"password broker\" (via the `Password` facade) to validate the password reset request credentials.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":130,"to":148}}}}],["2756",{"pageContent":"If the token, email address, and password given to the password broker are valid, the closure passed to the `reset` method will be invoked. Within this closure, which receives the user instance and the plain-text password provided to the password reset form, we may update the user's password in the database.\n\nThe `reset` method returns a \"status\" slug. This status may be translated using Laravel's [localization](/docs/{{version}}/localization) helpers in order to display a user-friendly message to the user regarding the status of their request. The translation of the password reset status is determined by your application's `lang/{lang}/passwords.php` language file. An entry for each possible value of the status slug is located within the `passwords` language file. If your application does not contain a `lang` directory, you may create it using the `lang:publish` Artisan command.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":150,"to":152}}}}],["2757",{"pageContent":"Before moving on, you may be wondering how Laravel knows how to retrieve the user record from your application's database when calling the `Password` facade's `reset` method. The Laravel password broker utilizes your authentication system's \"user providers\" to retrieve database records. The user provider used by the password broker is configured within the `passwords` configuration array of your `config/auth.php` configuration file. To learn more about writing custom user providers, consult the [authentication documentation](/docs/{{version}}/authentication#adding-custom-user-providers).\n\n<a name=\"deleting-expired-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":154,"to":156}}}}],["2758",{"pageContent":"Deleting Expired Tokens\n\nPassword reset tokens that have expired will still be present within your database. However, you may easily delete these records using the `auth:clear-resets` Artisan command:\n\n```shell\nphp artisan auth:clear-resets\n```\n\nIf you would like to automate this process, consider adding the command to your application's [scheduler](/docs/{{version}}/scheduling):\n\n    $schedule->command('auth:clear-resets')->everyFifteenMinutes();\n\n<a name=\"password-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":157,"to":169}}}}],["2759",{"pageContent":"Customization\n\n<a name=\"reset-link-customization\"></a>\n#### Reset Link Customization\n\nYou may customize the password reset link URL using the `createUrlUsing` method provided by the `ResetPassword` notification class. This method accepts a closure which receives the user instance that is receiving the notification as well as the password reset link token. Typically, you should call this method from your `App\\Providers\\AuthServiceProvider` service provider's `boot` method:\n\n    use App\\Models\\User;\n    use Illuminate\\Auth\\Notifications\\ResetPassword;\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        ResetPassword::createUrlUsing(function (User $user, string $token) {\n            return 'https://example.com/reset-password?token='.$token;\n        });\n    }\n\n<a name=\"reset-email-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":170,"to":190}}}}],["2760",{"pageContent":"Reset Email Customization\n\nYou may easily modify the notification class used to send the password reset link to the user. To get started, override the `sendPasswordResetNotification` method on your `App\\Models\\User` model. Within this method, you may send the notification using any [notification class](/docs/{{version}}/notifications) of your own creation. The password reset `$token` is the first argument received by the method. You may use this `$token` to build the password reset URL of your choice and send your notification to the user:\n\n    use App\\Notifications\\ResetPasswordNotification;\n\n    /**\n     * Send a password reset notification to the user.\n     *\n     * @param  string  $token\n     */\n    public function sendPasswordResetNotification($token): void\n    {\n        $url = 'https://example.com/reset-password?token='.$token;\n\n        $this->notify(new ResetPasswordNotification($url));\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/passwords.md","loc":{"lines":{"from":191,"to":207}}}}],["2761",{"pageContent":"# Laravel Pennant","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":1,"to":1}}}}],["2762",{"pageContent":"- [Introduction](#introduction)\n- [Installation](#installation)\n- [Configuration](#configuration)\n- [Defining Features](#defining-features)\n    - [Class Based Features](#class-based-features)\n- [Checking Features](#checking-features)\n    - [Conditional Execution](#conditional-execution)\n    - [The `HasFeatures` Trait](#the-has-features-trait)\n    - [Blade Directive](#blade-directive)\n    - [Middleware](#middleware)\n    - [In-Memory Cache](#in-memory-cache)\n- [Scope](#scope)\n    - [Specifying The Scope](#specifying-the-scope)\n    - [Default Scope](#default-scope)\n    - [Nullable Scope](#nullable-scope)\n    - [Identifying Scope](#identifying-scope)\n    - [Serializing Scope](#serializing-scope)\n- [Rich Feature Values](#rich-feature-values)\n- [Retrieving Multiple Features](#retrieving-multiple-features)\n- [Eager Loading](#eager-loading)\n- [Updating Values](#updating-values)\n    - [Bulk Updates](#bulk-updates)\n    - [Purging Features](#purging-features)\n- [Testing](#testing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":3,"to":26}}}}],["2763",{"pageContent":"- [Eager Loading](#eager-loading)\n- [Updating Values](#updating-values)\n    - [Bulk Updates](#bulk-updates)\n    - [Purging Features](#purging-features)\n- [Testing](#testing)\n- [Adding Custom Pennant Drivers](#adding-custom-pennant-drivers)\n    - [Implementing The Driver](#implementing-the-driver)\n    - [Registering The Driver](#registering-the-driver)\n- [Events](#events)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":26,"to":34}}}}],["2764",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":36,"to":36}}}}],["2765",{"pageContent":"Introduction\n\n[Laravel Pennant](https://github.com/laravel/pennant) is a simple and light-weight feature flag package - without the cruft. Feature flags enable you to incrementally roll out new application features with confidence, A/B test new interface designs, complement a trunk-based development strategy, and much more.\n\n<a name=\"installation\"></a>\n## Installation\n\nFirst, install Pennant into your project using the Composer package manager:\n\n```shell\ncomposer require laravel/pennant\n```\n\nNext, you should publish the Pennant configuration and migration files using the `vendor:publish` Artisan command:\n\n```shell\nphp artisan vendor:publish --provider=\"Laravel\\Pennant\\PennantServiceProvider\"\n```\n\nFinally, you should run your application's database migrations. This will create a `features` table that Pennant uses to power its `database` driver:\n\n```shell\nphp artisan migrate\n```\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":37,"to":62}}}}],["2766",{"pageContent":"Configuration\n\nAfter publishing Pennant's assets, its configuration file will be located at `config/pennant.php`. This configuration file allows you to specify the default storage mechanism that will be used by Pennant to store resolved feature flag values.\n\nPennant includes support for storing resolved feature flag values in an in-memory array via the `array` driver. Or, Pennant can store resolved feature flag values persistently in a relational database via the `database` driver, which is the default storage mechanism used by Pennant.\n\n<a name=\"defining-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":63,"to":69}}}}],["2767",{"pageContent":"Defining Features\n\nTo define a feature, you may use the `define` method offered by the `Feature` facade. You will need to provide a name for the feature, as well as a closure that will be invoked to resolve the feature's initial value.\n\nTypically, features are defined in a service provider using the `Feature` facade. The closure will receive the \"scope\" for the feature check. Most commonly, the scope is the currently authenticated user. In this example, we will define a feature for incrementally rolling out a new API to our application's users:\n\n```php\n<?php\n\nnamespace App\\Providers;\n\nuse App\\Models\\User;\nuse Illuminate\\Support\\Lottery;\nuse Illuminate\\Support\\ServiceProvider;\nuse Laravel\\Pennant\\Feature;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":70,"to":84}}}}],["2768",{"pageContent":"```php\n<?php\n\nnamespace App\\Providers;\n\nuse App\\Models\\User;\nuse Illuminate\\Support\\Lottery;\nuse Illuminate\\Support\\ServiceProvider;\nuse Laravel\\Pennant\\Feature;\n\nclass AppServiceProvider extends ServiceProvider\n{\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Feature::define('new-api', fn (User $user) => match (true) {\n            $user->isInternalTeamMember() => true,\n            $user->isHighTrafficCustomer() => false,\n            default => Lottery::odds(1 / 100),\n        });\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":84,"to":107}}}}],["2769",{"pageContent":"As you can see, we have the following rules for our feature:\n\n- All internal team members should be using the new API.\n- Any high traffic customers should not be using the new API.\n- Otherwise, the feature should be randomly assigned to users with a 1 in 100 chance of being active.\n\nThe first time the `new-api` feature is checked for a given user, the result of the closure will be stored by the storage driver. The next time the feature is checked against the same user, the value will be retrieved from storage and the closure will not be invoked.\n\nFor convenience, if a feature definition only returns a lottery, you may omit the closure completely:\n\n    Feature::define('site-redesign', Lottery::odds(1, 1000));\n\n<a name=\"class-based-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":110,"to":122}}}}],["2770",{"pageContent":"Class Based Features\n\nPennant also allows you to define class based features. Unlike closure based feature definitions, there is no need to register a class based feature in a service provider. To create a class based feature, you may invoke the `pennant:feature` Artisan command. By default the feature class will be placed in your application's `app/Features` directory:\n\n```shell\nphp artisan pennant:feature NewApi","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":123,"to":128}}}}],["2771",{"pageContent":"When writing a feature class, you only need to define a `resolve` method, which will be invoked to resolve the feature's initial value for a given scope. Again, the scope will typically be the currently authenticated user:\n\n```php\n<?php\n\nnamespace App\\Features;\n\nuse Illuminate\\Support\\Lottery;\n\nclass NewApi\n{\n    /**\n     * Resolve the feature's initial value.\n     */\n    public function resolve(User $user): mixed\n    {\n        return match (true) {\n            $user->isInternalTeamMember() => true,\n            $user->isHighTrafficCustomer() => false,\n            default => Lottery::odds(1 / 100),\n        };\n    }\n}\n```\n\n> **Note** Feature classes are resolved via the [container](/docs/{{version}}/container), so you may inject dependencies into the feature class's constructor when needed.\n\n<a name=\"checking-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":131,"to":158}}}}],["2772",{"pageContent":"Checking Features\n\nTo determine if a feature is active, you may use the `active` method on the `Feature` facade. By default, features are checked against the currently authenticated user:\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Laravel\\Pennant\\Feature;\n\nclass PodcastController\n{\n    /**\n     * Display a listing of the resource.\n     */\n    public function index(Request $request): Response\n    {\n        return Feature::active('new-api')\n                ? $this->resolveNewApiResponse($request)\n                : $this->resolveLegacyApiResponse($request);\n    }\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":159,"to":185}}}}],["2773",{"pageContent":"Although features are checked against the currently authenticated user by default, you may easily check the feature against another user or [scope](#scope). To accomplish this, use the `for` method offered by the `Feature` facade:\n\n```php\nreturn Feature::for($user)->active('new-api')\n        ? $this->resolveNewApiResponse($request)\n        : $this->resolveLegacyApiResponse($request);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":188,"to":193}}}}],["2774",{"pageContent":"Pennant also offers some additional convenience methods that may prove useful when determining if a feature is active or not:\n\n```php\n// Determine if all of the given features are active...\nFeature::allAreActive(['new-api', 'site-redesign']);\n\n// Determine if any of the given features are active...\nFeature::someAreActive(['new-api', 'site-redesign']);\n\n// Determine if a feature is inactive...\nFeature::inactive('new-api');\n\n// Determine if all of the given features are inactive...\nFeature::allAreInactive(['new-api', 'site-redesign']);\n\n// Determine if any of the given features are inactive...\nFeature::someAreInactive(['new-api', 'site-redesign']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":196,"to":212}}}}],["2775",{"pageContent":"> **Note**\n> When using Pennant outside of an HTTP context, such as in an Artisan command or a queued job, you should typically [explicitly specify the feature's scope](#specifying-the-scope). Alternatively, you may define a [default scope](#default-scope) that accounts for both authenticated HTTP contexts and unauthenticated contexts.\n\n<a name=\"checking-class-based-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":215,"to":218}}}}],["2776",{"pageContent":"Checking Class Based Features\n\nFor class based features, you should provide the class name when checking the feature:\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Features\\NewApi;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Laravel\\Pennant\\Feature;\n\nclass PodcastController\n{\n    /**\n     * Display a listing of the resource.\n     */\n    public function index(Request $request): Response\n    {\n        return Feature::active(NewApi::class)\n                ? $this->resolveNewApiResponse($request)\n                : $this->resolveLegacyApiResponse($request);\n    }\n\n    // ...\n}\n```\n\n<a name=\"conditional-execution\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":219,"to":249}}}}],["2777",{"pageContent":"Conditional Execution\n\nThe `when` method may be used to fluently execute a given closure if a feature is active. Additionally, a second closure may be provided and will be executed if the feature is inactive:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Features\\NewApi;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Http\\Response;\n    use Laravel\\Pennant\\Feature;\n\n    class PodcastController\n    {\n        /**\n         * Display a listing of the resource.\n         */\n        public function index(Request $request): Response\n        {\n            return Feature::when(NewApi::class,\n                fn () => $this->resolveNewApiResponse($request),\n                fn () => $this->resolveLegacyApiResponse($request),\n            );\n        }\n\n        // ...\n    }\n\nThe `unless` method serves as the inverse of the `when` method, executing the first closure if the feature is inactive:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":250,"to":279}}}}],["2778",{"pageContent":"// ...\n    }\n\nThe `unless` method serves as the inverse of the `when` method, executing the first closure if the feature is inactive:\n\n    return Feature::unless(NewApi::class,\n        fn () => $this->resolveLegacyApiResponse($request),\n        fn () => $this->resolveNewApiResponse($request),\n    );\n\n<a name=\"the-has-features-trait\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":279,"to":289}}}}],["2779",{"pageContent":"The `HasFeatures` Trait\n\nPennant's `HasFeatures` trait may be added to your application's `User` model (or any other model that has features) to provide a fluent, convenient way to check features directly from the model:\n\n```php\n<?php\n\nnamespace App\\Models;\n\nuse Illuminate\\Foundation\\Auth\\User as Authenticatable;\nuse Laravel\\Pennant\\Concerns\\HasFeatures;\n\nclass User extends Authenticatable\n{\n    use HasFeatures;\n\n    // ...\n}\n```\n\nOnce the trait has been added to your model, you may easily check features by invoking the `features` method:\n\n```php\nif ($user->features()->active('new-api')) {\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":290,"to":315}}}}],["2780",{"pageContent":"Once the trait has been added to your model, you may easily check features by invoking the `features` method:\n\n```php\nif ($user->features()->active('new-api')) {\n    // ...\n}\n```\n\nOf course, the `features` method provides access to many other convenient methods for interacting with features:\n\n```php\n// Values...\n$value = $user->features()->value('purchase-button')\n$values = $user->features()->values(['new-api', 'purchase-button']);\n\n// State...\n$user->features()->active('new-api');\n$user->features()->allAreActive(['new-api', 'server-api']);\n$user->features()->someAreActive(['new-api', 'server-api']);\n\n$user->features()->inactive('new-api');\n$user->features()->allAreInactive(['new-api', 'server-api']);\n$user->features()->someAreInactive(['new-api', 'server-api']);\n\n// Conditional execution...\n$user->features()->when('new-api',\n    fn () => /* ... */,\n    fn () => /* ... */,\n);\n\n$user->features()->unless('new-api',\n    fn () => /* ... */,\n    fn () => /* ... */,\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":315,"to":348}}}}],["2781",{"pageContent":"<a name=\"blade-directive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":351,"to":351}}}}],["2782",{"pageContent":"Blade Directive\n\nTo make checking features in Blade a seamless experience, Pennant offers a `@feature` directive:\n\n```blade\n@feature('site-redesign')\n    <!-- 'site-redesign' is active -->\n@else\n    <!-- 'site-redesign' is inactive -->\n@endfeature\n```\n\n<a name=\"middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":352,"to":364}}}}],["2783",{"pageContent":"Middleware\n\nPennant also includes a [middleware](/docs/{{version}}/middleware) that may be used to verify the currently authenticated user has access to a feature before a route is even invoked. You may assign the middleware to a route and specify the features that are required to access the route. If any of the specified features are inactive for the currently authenticated user, a `400 Bad Request` HTTP response will be returned by the route. Multiple features may be passed to the static `using` method.\n\n```php\nuse Illuminate\\Support\\Facades\\Route;\nuse Laravel\\Pennant\\Middleware\\EnsureFeaturesAreActive;\n\nRoute::get('/api/servers', function () {\n    // ...\n})->middleware(EnsureFeaturesAreActive::using('new-api', 'servers-api'));\n```\n\n<a name=\"customizing-the-response\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":365,"to":378}}}}],["2784",{"pageContent":"Customizing The Response\n\nIf you would like to customize the response that is returned by the middleware when one of the listed features is inactive, you may use the `whenInactive` method provided by the `EnsureFeaturesAreActive` middleware. Typically, this method should be invoked within the `boot` method of one of your application's service providers:\n\n```php\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Http\\Response;\nuse Laravel\\Pennant\\Middleware\\EnsureFeaturesAreActive;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    EnsureFeaturesAreActive::whenInactive(\n        function (Request $request, array $features) {\n            return new Response(status: 403);\n        }\n    );\n\n    // ...\n}\n```\n\n<a name=\"in-memory-cache\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":379,"to":403}}}}],["2785",{"pageContent":"In-Memory Cache\n\nWhen checking a feature, Pennant will create an in-memory cache of the result. If you are using the `database` driver, this means that re-checking the same feature flag within a single request will not trigger additional database queries. This also ensures that the feature has a consistent result for the duration of the request.\n\nIf you need to manually flush the in-memory cache, you may use the `flushCache` method offered by the `Feature` facade:\n\n    Feature::flushCache();\n\n<a name=\"scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":404,"to":412}}}}],["2786",{"pageContent":"Scope\n\n<a name=\"specifying-the-scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":413,"to":415}}}}],["2787",{"pageContent":"Specifying The Scope\n\nAs discussed, features are typically checked against the currently authenticated user. However, this may not always suit your needs. Therefore, it is possible to specify the scope you would like to check a given feature against via the `Feature` facade's `for` method:\n\n```php\nreturn Feature::for($user)->active('new-api')\n        ? $this->resolveNewApiResponse($request)\n        : $this->resolveLegacyApiResponse($request);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":416,"to":423}}}}],["2788",{"pageContent":"Of course, feature scopes are not limited to \"users\". Imagine you have built a new billing experience that you are rolling out to entire teams rather than individual users. Perhaps you would like the oldest teams to have a slower rollout than the newer teams. Your feature resolution closure might look something like the following:\n\n```php\nuse App\\Models\\Team;\nuse Carbon\\Carbon;\nuse Illuminate\\Support\\Lottery;\nuse Laravel\\Pennant\\Feature;\n\nFeature::define('billing-v2', function (Team $team) {\n    if ($team->created_at->isAfter(new Carbon('1st Jan, 2023'))) {\n        return true;\n    }\n\n    if ($team->created_at->isAfter(new Carbon('1st Jan, 2019'))) {\n        return Lottery::odds(1 / 100);\n    }\n\n    return Lottery::odds(1 / 1000);\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":426,"to":444}}}}],["2789",{"pageContent":"You will notice that the closure we have defined is not expecting a `User`, but is instead expecting a `Team` model. To determine if this feature is active for a user's team, you should pass the team to the `for` method offered by the `Feature` facade:\n\n```php\nif (Feature::for($user->team)->active('billing-v2')) {\n    return redirect()->to('/billing/v2');\n}\n\n// ...\n```\n\n<a name=\"default-scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":447,"to":457}}}}],["2790",{"pageContent":"Default Scope\n\nIt is also possible to customize the default scope Pennant uses to check features. For example, maybe all of your features are checked against the currently authenticated user's team instead of the user. Instead of having to call `Feature::for($user->team)` every time you check a feature, you may instead specify the team as the default scope. Typically, this should be done in one of your application's service providers:\n\n```php\n<?php\n\nnamespace App\\Providers;\n\nuse Illuminate\\Support\\Facades\\Auth;\nuse Illuminate\\Support\\ServiceProvider;\nuse Laravel\\Pennant\\Feature;\n\nclass AppServiceProvider extends ServiceProvider\n{\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Feature::resolveScopeUsing(fn ($driver) => Auth::user()?->team);\n\n        // ...\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":458,"to":482}}}}],["2791",{"pageContent":"If no scope is explicitly provided via the `for` method, the feature check will now use the currently authenticated user's team as the default scope:\n\n```php\nFeature::active('billing-v2');\n\n// Is now equivalent to...\n\nFeature::for($user->team)->active('billing-v2');\n```\n\n<a name=\"nullable-scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":485,"to":495}}}}],["2792",{"pageContent":"Nullable Scope\n\nIf the scope you provide when checking a feature is `null` and the feature's definition does not support `null` via a nullable type or by including `null` in a union type, Pennant will automatically return `false` as the feature's result value.\n\nSo, if the scope you are passing to a feature is potentially `null` and you want the feature's value resolver to be invoked, you should account for that in your feature's definition. A `null` scope may occur if you check a feature within an Artisan command, queued job, or unauthenticated route. Since there is usually not an authenticated user in these contexts, the default scope will be `null`.\n\nIf you do not always [explicitly specify your feature scope](#specifying-the-scope) then you should ensure the scope's type is \"nullable\" and handle the `null` scope value within your feature definition logic:\n\n```php\nuse App\\Models\\User;\nuse Illuminate\\Support\\Lottery;\nuse Laravel\\Pennant\\Feature;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":496,"to":507}}}}],["2793",{"pageContent":"```php\nuse App\\Models\\User;\nuse Illuminate\\Support\\Lottery;\nuse Laravel\\Pennant\\Feature;\n\nFeature::define('new-api', fn (User $user) => match (true) {// [tl! remove]\nFeature::define('new-api', fn (User|null $user) => match (true) {// [tl! add]\n    $user === null => true,// [tl! add]\n    $user->isInternalTeamMember() => true,\n    $user->isHighTrafficCustomer() => false,\n    default => Lottery::odds(1 / 100),\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":507,"to":518}}}}],["2794",{"pageContent":"<a name=\"identifying-scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":521,"to":521}}}}],["2795",{"pageContent":"Identifying Scope\n\nPennant's built-in `array` and `database` storage drivers know how to properly store scope identifiers for all PHP data types as well as Eloquent models. However, if your application utilizes a third-party Pennant driver, that driver may not know how to properly store an identifier for an Eloquent model or other custom types in your application.\n\nIn light of this, Pennant allows you to format scope values for storage by implementing the `FeatureScopeable` contract on the objects in your application that are used as Pennant scopes.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":522,"to":526}}}}],["2796",{"pageContent":"In light of this, Pennant allows you to format scope values for storage by implementing the `FeatureScopeable` contract on the objects in your application that are used as Pennant scopes.\n\nFor example, imagine you are using two different feature drivers in a single application: the built-in `database` driver and a third-party \"Flag Rocket\" driver. The \"Flag Rocket\" driver does not know how to properly store an Eloquent model. Instead, it requires a `FlagRocketUser` instance. By implementing the `toFeatureIdentifier` defined by the `FeatureScopeable` contract, we can customize the storable scope value provided to each driver used by our application:\n\n```php\n<?php\n\nnamespace App\\Models;\n\nuse FlagRocket\\FlagRocketUser;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Laravel\\Pennant\\Contracts\\FeatureScopeable;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":526,"to":537}}}}],["2797",{"pageContent":"```php\n<?php\n\nnamespace App\\Models;\n\nuse FlagRocket\\FlagRocketUser;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Laravel\\Pennant\\Contracts\\FeatureScopeable;\n\nclass User extends Model implements FeatureScopeable\n{\n    /**\n     * Cast the object to a feature scope identifier for the given driver.\n     */\n    public function toFeatureIdentifier(string $driver): mixed\n    {\n        return match($driver) {\n            'database' => $this,\n            'flag-rocket' => FlagRocketUser::fromId($this->flag_rocket_id),\n        };\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":537,"to":558}}}}],["2798",{"pageContent":"<a name=\"serializing-scope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":561,"to":561}}}}],["2799",{"pageContent":"Serializing Scope\n\nBy default, Pennant will use a fully qualified class name when storing a feature associated with an Eloquent model. If you are already using an [Eloquent morph map](/docs/{{version}}/eloquent-relationships#custom-polymorphic-types), you may choose to have Pennant also use the morph map to decouple the stored feature from your application structure.\n\nTo achieve this, after defining your Eloquent morph map in a service provider, you may invoke the `Feature` facade's `useMorphMap` method:\n\n```php\nuse Illuminate\\Database\\Eloquent\\Relations\\Relation;\nuse Laravel\\Pennant\\Feature;\n\nRelation::enforceMorphMap([\n    'post' => 'App\\Models\\Post',\n    'video' => 'App\\Models\\Video',\n]);\n\nFeature::useMorphMap();\n```\n\n<a name=\"rich-feature-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":562,"to":580}}}}],["2800",{"pageContent":"Rich Feature Values\n\nUntil now, we have primarily shown features as being in a binary state, meaning they are either \"active\" or \"inactive\", but Pennant also allows you to store rich values as well.\n\nFor example, imagine you are testing three new colors for the \"Buy now\" button of your application. Instead of returning `true` or `false` from the feature definition, you may instead return a string:\n\n```php\nuse Illuminate\\Support\\Arr;\nuse Laravel\\Pennant\\Feature;\n\nFeature::define('purchase-button', fn (User $user) => Arr::random([\n    'blue-sapphire',\n    'seafoam-green',\n    'tart-orange',\n]));\n```\n\nYou may retrieve the value of the `purchase-button` feature using the `value` method:\n\n```php\n$color = Feature::value('purchase-button');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":581,"to":601}}}}],["2801",{"pageContent":"You may retrieve the value of the `purchase-button` feature using the `value` method:\n\n```php\n$color = Feature::value('purchase-button');\n```\n\nPennant's included Blade directive also makes it easy to conditionally render content based on the current value of the feature:\n\n```blade\n@feature('purchase-button', 'blue-sapphire')\n    <!-- 'blue-sapphire' is active -->\n@elsefeature('purchase-button', 'seafoam-green')\n    <!-- 'seafoam-green' is active -->\n@elsefeature('purchase-button', 'tart-orange')\n    <!-- 'tart-orange' is active -->\n@endfeature","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":601,"to":616}}}}],["2802",{"pageContent":"> **Note** When using rich values, it is important to know that a feature is considered \"active\" when it has any value other than `false`.\n\nWhen calling the [conditional `when`](#conditional-execution) method, the feature's rich value will be provided to the first closure:\n\n    Feature::when('purchase-button',\n        fn ($color) => /* ... */,\n        fn () => /* ... */,\n    );\n\nLikewise, when calling the conditional `unless` method, the feature's rich value will be provided to the optional second closure:\n\n    Feature::unless('purchase-button',\n        fn () => /* ... */,\n        fn ($color) => /* ... */,\n    );\n\n<a name=\"retrieving-multiple-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":619,"to":635}}}}],["2803",{"pageContent":"Retrieving Multiple Features\n\nThe `values` method allows the retrieval of multiple features for a given scope:\n\n```php\nFeature::values(['billing-v2', 'purchase-button']);\n\n// [\n//     'billing-v2' => false,\n//     'purchase-button' => 'blue-sapphire',\n// ]\n```\n\nOr, you may use the `all` method to retrieve the values of all defined features for a given scope:\n\n```php\nFeature::all();\n\n// [\n//     'billing-v2' => false,\n//     'purchase-button' => 'blue-sapphire',\n//     'site-redesign' => true,\n// ]","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":636,"to":658}}}}],["2804",{"pageContent":"However, class based features are dynamically registered and are not known by Pennant until they are explicitly checked. This means your application's class based features may not appear in the results returned by the `all` method if they have not already been checked during the current request.\n\nIf you would like to ensure that feature classes are always included when using the `all` method, you may use Pennant's feature discovery capabilities. To get started, invoke the `discover` method in one of your application's service providers:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\ServiceProvider;\n    use Laravel\\Pennant\\Feature;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Feature::discover();\n\n            // ...\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":661,"to":683}}}}],["2805",{"pageContent":"// ...\n        }\n    }\n\nThe `discover` method will register all of the feature classes in your application's `app/Features` directory. The `all` method will now include these classes in its results, regardless of whether they have been checked during the current request:\n\n```php\nFeature::all();\n\n// [\n//     'App\\Features\\NewApi' => true,\n//     'billing-v2' => false,\n//     'purchase-button' => 'blue-sapphire',\n//     'site-redesign' => true,\n// ]","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":683,"to":697}}}}],["2806",{"pageContent":"<a name=\"eager-loading\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":700,"to":700}}}}],["2807",{"pageContent":"Eager Loading\n\nAlthough Pennant keeps an in-memory cache of all resolved features for a single request, it is still possible to encounter performance issues. To alleviate this, Pennant offers the ability to eager load feature values.\n\nTo illustrate this, imagine that we are checking if a feature is active within a loop:\n\n```php\nuse Laravel\\Pennant\\Feature;\n\nforeach ($users as $user) {\n    if (Feature::for($user)->active('notifications-beta')) {\n        $user->notify(new RegistrationSuccess);\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":701,"to":714}}}}],["2808",{"pageContent":"Assuming we are using the database driver, this code will execute a database query for every user in the loop - executing potentially hundreds of queries. However, using Pennant's `load` method, we can remove this potential performance bottleneck by eager loading the feature values for a collection of users or scopes:\n\n```php\nFeature::for($users)->load(['notifications-beta']);\n\nforeach ($users as $user) {\n    if (Feature::for($user)->active('notifications-beta')) {\n        $user->notify(new RegistrationSuccess);\n    }\n}\n```\n\nTo load feature values only when they have not already been loaded, you may use the `loadMissing` method:\n\n```php\nFeature::for($users)->loadMissing([\n    'new-api',\n    'purchase-button',\n    'notifications-beta',\n]);\n```\n\n<a name=\"updating-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":717,"to":739}}}}],["2809",{"pageContent":"Updating Values\n\nWhen a feature's value is resolved for the first time, the underlying driver will store the result in storage. This is often necessary to ensure a consistent experience for your users across requests. However, at times, you may want to manually update the feature's stored value.\n\nTo accomplish this, you may use the `activate` and `deactivate` methods to toggle a feature \"on\" or \"off\":\n\n```php\nuse Laravel\\Pennant\\Feature;\n\n// Activate the feature for the default scope...\nFeature::activate('new-api');\n\n// Deactivate the feature for the given scope...\nFeature::for($user->team)->deactivate('billing-v2');\n```\n\nIt is also possible to manually set a rich value for a feature by providing a second argument to the `activate` method:\n\n```php\nFeature::activate('purchase-button', 'seafoam-green');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":740,"to":759}}}}],["2810",{"pageContent":"It is also possible to manually set a rich value for a feature by providing a second argument to the `activate` method:\n\n```php\nFeature::activate('purchase-button', 'seafoam-green');\n```\n\nTo instruct Pennant to forget the stored value for a feature, you may use the `forget` method. When the feature is checked again, Pennant will resolve the feature's value from its feature definition:\n\n```php\nFeature::forget('purchase-button');\n```\n\n<a name=\"bulk-updates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":759,"to":771}}}}],["2811",{"pageContent":"Bulk Updates\n\nTo update stored feature values in bulk, you may use the `activateForEveryone` and `deactivateForEveryone` methods.\n\nFor example, imagine you are now confident in the `new-api` feature's stability and have landed on the best `'purchase-button'` color for your checkout flow - you can update the stored value for all users accordingly:\n\n```php\nuse Laravel\\Pennant\\Feature;\n\nFeature::activateForEveryone('new-api');\n\nFeature::activateForEveryone('purchase-button', 'seafoam-green');\n```\n\nAlternatively, you may deactivate the feature for all users:\n\n```php\nFeature::deactivateForEveryone('new-api');\n```\n\n> **Note** This will only update the resolved feature values that have been stored by Pennant's storage driver. You will also need to update the feature definition in your application.\n\n<a name=\"purging-features\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":772,"to":794}}}}],["2812",{"pageContent":"Purging Features\n\nSometimes, it can be useful to purge an entire feature from storage. This is typically necessary if you have removed the feature from your application or you have made adjustments to the feature's definition that you would like to rollout to all users.\n\nYou may remove all stored values for a feature using the `purge` method:\n\n```php\n// Purging a single feature...\nFeature::purge('new-api');\n\n// Purging multiple features...\nFeature::purge(['new-api', 'purchase-button']);\n```\n\nIf you would like to purge _all_ features from storage, you may invoke the `purge` method without any arguments:\n\n```php\nFeature::purge();\n```\n\nAs it can be useful to purge features as part of your application's deployment pipeline, Pennant includes a `pennant:purge` Artisan command:\n\n```sh\nphp artisan pennant:purge new-api\n\nphp artisan pennant:purge new-api purchase-button\n```\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":795,"to":823}}}}],["2813",{"pageContent":"Testing\n\nWhen testing code that interacts with feature flags, the easiest way to control the feature flag's returned value in your tests is to simply re-define the feature. For example, imagine you have the following feature defined in one of your application's service provider:\n\n```php\nuse Illuminate\\Support\\Arr;\nuse Laravel\\Pennant\\Feature;\n\nFeature::define('purchase-button', fn () => Arr::random([\n    'blue-sapphire',\n    'seafoam-green',\n    'tart-orange',\n]));\n```\n\nTo modify the feature's returned value in your tests, you may re-define the feature at the beginning of the test. The following test will always pass, even though the `Arr::random()` implementation is still present in the service provider:\n\n```php\nuse Laravel\\Pennant\\Feature;\n\npublic function test_it_can_control_feature_values()\n{\n    Feature::define('purchase-button', 'seafoam-green');\n\n    $this->assertSame('seafoam-green', Feature::value('purchase-button'));\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":824,"to":849}}}}],["2814",{"pageContent":"The same approach may be used for class based features:\n\n```php\nuse App\\Features\\NewApi;\nuse Laravel\\Pennant\\Feature;\n\npublic function test_it_can_control_feature_values()\n{\n    Feature::define(NewApi::class, true);\n\n    $this->assertTrue(Feature::value(NewApi::class));\n}\n```\n\nIf your feature is returning a `Lottery` instance, there are a handful of useful [testing helpers available](/docs/{{version}}/helpers#testing-lotteries).\n\n<a name=\"store-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":852,"to":868}}}}],["2815",{"pageContent":"Store Configuration\n\nYou may configure the store that Pennant will use during testing by defining the `PENNANT_STORE` environment variable in your application's `phpunit.xml` file:\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit colors=\"true\">\n    <!-- ... -->\n    <php>\n        <env name=\"PENNANT_STORE\" value=\"array\"/>\n        <!-- ... -->\n    </php>\n</phpunit>\n```\n\n<a name=\"adding-custom-pennant-drivers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":869,"to":884}}}}],["2816",{"pageContent":"Adding Custom Pennant Drivers\n\n<a name=\"implementing-the-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":885,"to":887}}}}],["2817",{"pageContent":"Implementing The Driver\n\nIf none of Pennant's existing storage drivers fit your application's needs, you may write your own storage driver. Your custom driver should implement the `Laravel\\Pennant\\Contracts\\Driver` interface:\n\n```php\n<?php\n\nnamespace App\\Extensions;\n\nuse Laravel\\Pennant\\Contracts\\Driver;\n\nclass RedisFeatureDriver implements Driver\n{\n    public function define(string $feature, callable $resolver): void {}\n    public function defined(): array {}\n    public function getAll(array $features): array {}\n    public function get(string $feature, mixed $scope): mixed {}\n    public function set(string $feature, mixed $scope, mixed $value): void {}\n    public function setForAllScopes(string $feature, mixed $value): void {}\n    public function delete(string $feature, mixed $scope): void {}\n    public function purge(array|null $features): void {}\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":888,"to":909}}}}],["2818",{"pageContent":"Now, we just need to implement each of these methods using a Redis connection. For an example of how to implement each of these methods, take a look at the `Laravel\\Pennant\\Drivers\\DatabaseDriver` in the [Pennant source code](https://github.com/laravel/pennant/blob/1.x/src/Drivers/DatabaseDriver.php)\n\n> **Note**\n> Laravel does not ship with a directory to contain your extensions. You are free to place them anywhere you like. In this example, we have created an `Extensions` directory to house the `RedisFeatureDriver`.\n\n<a name=\"registering-the-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":912,"to":917}}}}],["2819",{"pageContent":"Registering The Driver\n\nOnce your driver has been implemented, you are ready to register it with Laravel. To add additional drivers to Pennant, you may use the `extend` method provided by the `Feature` facade. You should call the `extend` method from the `boot` method of one of your application's [service provider](/docs/{{version}}/providers):\n\n```php\n<?php\n\nnamespace App\\Providers;\n\nuse App\\Extensions\\RedisFeatureDriver;\nuse Illuminate\\Contracts\\Foundation\\Application;\nuse Illuminate\\Support\\ServiceProvider;\nuse Laravel\\Pennant\\Feature;\n\nclass AppServiceProvider extends ServiceProvider\n{\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        // ...\n    }\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Feature::extend('redis', function (Application $app) {\n            return new RedisFeatureDriver($app->make('redis'), $app->make('events'), []);\n        });\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":918,"to":951}}}}],["2820",{"pageContent":"Once the driver has been registered, you may use the `redis` driver in your application's `config/pennant.php` configuration file:\n\n    'stores' => [\n\n        'redis' => [\n            'driver' => 'redis',\n            'connection' => null,\n        ],\n\n        // ...\n\n    ],\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":954,"to":967}}}}],["2821",{"pageContent":"Events\n\nPennant dispatches a variety of events that can be useful when tracking feature flags throughout your application.\n\n### `Laravel\\Pennant\\Events\\RetrievingKnownFeature`\n\nThis event is dispatched the first time a known feature is retrieved during a request for a specific scope. This event can be useful to create and track metrics against the feature flags that are being used throughout your application.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":968,"to":974}}}}],["2822",{"pageContent":"`Laravel\\Pennant\\Events\\RetrievingUnknownFeature`\n\nThis event is dispatched the first time an unknown feature is retrieved during a request for a specific scope. This event can be useful if you have intended to remove a feature flag, but may have accidentally left some stray references to it throughout your application.\n\nFor example, you may find it useful to listen for this event and `report` or throw an exception when it occurs:\n\n```php\n<?php\n\nnamespace App\\Providers;\n\nuse Illuminate\\Foundation\\Support\\Providers\\EventServiceProvider as ServiceProvider;\nuse Illuminate\\Support\\Facades\\Event;\nuse Laravel\\Pennant\\Events\\RetrievingUnknownFeature;\n\nclass EventServiceProvider extends ServiceProvider\n{\n    /**\n     * Register any other events for your application.\n     */\n    public function boot(): void\n    {\n        Event::listen(function (RetrievingUnknownFeature $event) {\n            report(\"Resolving unknown feature [{$event->feature}].\");\n        });\n    }\n}\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":976,"to":1003}}}}],["2823",{"pageContent":"`Laravel\\Pennant\\Events\\DynamicallyDefiningFeature`\n\nThis event is dispatched when a class based feature is being dynamically checked for the first time during a request.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pennant.md","loc":{"lines":{"from":1005,"to":1007}}}}],["2824",{"pageContent":"# Laravel Pint\n\n- [Introduction](#introduction)\n- [Installation](#installation)\n- [Running Pint](#running-pint)\n- [Configuring Pint](#configuring-pint)\n    - [Presets](#presets)\n    - [Rules](#rules)\n    - [Excluding Files / Folders](#excluding-files-or-folders)\n\n<a name=\"introduction\"></a>\n## Introduction\n\n[Laravel Pint](https://github.com/laravel/pint) is an opinionated PHP code style fixer for minimalists. Pint is built on top of PHP-CS-Fixer and makes it simple to ensure that your code style stays clean and consistent.\n\nPint is automatically installed with all new Laravel applications so you may start using it immediately. By default, Pint does not require any configuration and will fix code style issues in your code by following the opinionated coding style of Laravel.\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pint.md","loc":{"lines":{"from":1,"to":18}}}}],["2825",{"pageContent":"Installation\n\nPint is included in recent releases of the Laravel framework, so installation is typically unnecessary. However, for older applications, you may install Laravel Pint via Composer:\n\n```shell\ncomposer require laravel/pint --dev\n```\n\n<a name=\"running-pint\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pint.md","loc":{"lines":{"from":19,"to":27}}}}],["2826",{"pageContent":"Running Pint\n\nYou can instruct Pint to fix code style issues by invoking the `pint` binary that is available in your project's `vendor/bin` directory:\n\n```shell\n./vendor/bin/pint\n```\n\nYou may also run Pint on specific files or directories:\n\n```shell\n./vendor/bin/pint app/Models\n\n./vendor/bin/pint app/Models/User.php\n```\n\nPint will display a thorough list of all of the files that it updates. You can view even more detail about Pint's changes by providing the `-v` option when invoking Pint:\n\n```shell\n./vendor/bin/pint -v\n```\n\nIf you would like Pint to simply inspect your code for style errors without actually changing the files, you may use the `--test` option:\n\n```shell\n./vendor/bin/pint --test\n```\n\nIf you would like Pint to only modify the files that have uncommitted changes according to Git, you may use the `--dirty` option:\n\n```shell\n./vendor/bin/pint --dirty\n```\n\n<a name=\"configuring-pint\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pint.md","loc":{"lines":{"from":28,"to":62}}}}],["2827",{"pageContent":"Configuring Pint\n\nAs previously mentioned, Pint does not require any configuration. However, if you wish to customize the presets, rules, or inspected folders, you may do so by creating a `pint.json` file in your project's root directory:\n\n```json\n{\n    \"preset\": \"laravel\"\n}\n```\n\nIn addition, if you wish to use a `pint.json` from a specific directory, you may provide the `--config` option when invoking Pint:\n\n```shell\npint --config vendor/my-company/coding-style/pint.json\n```\n\n<a name=\"presets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pint.md","loc":{"lines":{"from":63,"to":79}}}}],["2828",{"pageContent":"Presets\n\nPresets defines a set of rules that can be used to fix code style issues in your code. By default, Pint uses the `laravel` preset, which fixes issues by following the opinionated coding style of Laravel. However, you may specify a different preset by providing the `--preset` option to Pint:\n\n```shell\npint --preset psr12\n```\n\nIf you wish, you may also set the preset in your project's `pint.json` file:\n\n```json\n{\n    \"preset\": \"psr12\"\n}\n```\n\nPint's currently supported presets are: `laravel`, `per`, `psr12`, and `symfony`.\n\n<a name=\"rules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pint.md","loc":{"lines":{"from":80,"to":98}}}}],["2829",{"pageContent":"Rules\n\nRules are style guidelines that Pint will use to fix code style issues in your code. As mentioned above, presets are predefined groups of rules that should be perfect for most PHP projects, so you typically will not need to worry about the individual rules they contain.\n\nHowever, if you wish, you may enable or disable specific rules in your `pint.json` file:\n\n```json\n{\n    \"preset\": \"laravel\",\n    \"rules\": {\n        \"simplified_null_return\": true,\n        \"braces\": false,\n        \"new_with_braces\": {\n            \"anonymous_class\": false,\n            \"named_class\": false\n        }\n    }\n}\n```\n\nPint is built on top of [PHP-CS-Fixer](https://github.com/FriendsOfPHP/PHP-CS-Fixer). Therefore, you may use any of its rules to fix code style issues in your project: [PHP-CS-Fixer Configurator](https://mlocati.github.io/php-cs-fixer-configurator).\n\n<a name=\"excluding-files-or-folders\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pint.md","loc":{"lines":{"from":99,"to":121}}}}],["2830",{"pageContent":"Excluding Files / Folders\n\nBy default, Pint will inspect all `.php` files in your project except those in the `vendor` directory. If you wish to exclude more folders, you may do so using the `exclude` configuration option:\n\n```json\n{\n    \"exclude\": [\n        \"my-specific/folder\"\n    ]\n}\n```\n\nIf you wish to exclude all files that contain a given name pattern, you may do so using the `notName` configuration option:\n\n```json\n{\n    \"notName\": [\n        \"*-my-file.php\"\n    ]\n}\n```\n\nIf you would like to exclude a file by providing an exact path to the file, you may do so using the `notPath` configuration option:\n\n```json\n{\n    \"notPath\": [\n        \"path/to/excluded-file.php\"\n    ]\n}\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/pint.md","loc":{"lines":{"from":122,"to":152}}}}],["2831",{"pageContent":"# Precognition\n\n- [Introduction](#introduction)\n- [Live Validation](#live-validation)\n    - [Using Vue](#using-vue)\n    - [Using Vue & Inertia](#using-vue-and-inertia)\n    - [Using React](#using-react)\n    - [Using React & Inertia](#using-react-and-inertia)\n    - [Using Alpine & Blade](#using-alpine)\n    - [Configuring Axios](#configuring-axios)\n- [Customizing Validation Rules](#customizing-validation-rules)\n- [Handling File Uploads](#handling-file-uploads)\n- [Managing Side-Effects](#managing-side-effects)\n- [Testing](#testing)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":1,"to":16}}}}],["2832",{"pageContent":"Introduction\n\nLaravel Precognition allows you to anticipate the outcome of a future HTTP request. One of the primary use cases of Precognition is the ability to provide \"live\" validation for your frontend JavaScript application without having to duplicate your application's backend validation rules. Precognition pairs especially well with Laravel's Inertia-based [starter kits](/docs/{{version}}/starter-kits).\n\nWhen Laravel receives a \"precognitive request\", it will execute all of the route's middleware and resolve the route's controller dependencies, including validating [form requests](/docs/{{version}}/validation#form-request-validation) - but it will not actually execute the route's controller method.\n\n<a name=\"live-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":17,"to":23}}}}],["2833",{"pageContent":"Live Validation\n\n<a name=\"using-vue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":24,"to":26}}}}],["2834",{"pageContent":"Using Vue\n\nUsing Laravel Precognition, you can offer live validation experiences to your users without having to duplicate your validation rules in your frontend Vue application. To illustrate how it works, let's build a form for creating new users within our application.\n\nFirst, to enable Precognition for a route, the `HandlePrecognitiveRequests` middleware should be added to the route definition. You should also create a [form request](/docs/{{version}}/validation#form-request-validation) to house the route's validation rules:\n\n```php\nuse App\\Http\\Requests\\StoreUserRequest;\nuse Illuminate\\Foundation\\Http\\Middleware\\HandlePrecognitiveRequests;\n\nRoute::post('/users', function (StoreUserRequest $request) {\n    // ...\n})->middleware([HandlePrecognitiveRequests::class]);\n```\n\nNext, you should install the Laravel Precognition frontend helpers for Vue via NPM:\n\n```shell\nnpm install laravel-precognition-vue","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":27,"to":45}}}}],["2835",{"pageContent":"With the Laravel Precognition package installed, you can now create a form object using Precognition's `useForm` function, providing the HTTP method (`post`), the target URL (`/users`), and the initial form data.\n\nThen, to enable live validation, invoke the form's `validate` method on each input's `change` event, providing the input's name:\n\n```vue\n<script setup>\nimport { useForm } from 'laravel-precognition-vue';\n\nconst form = useForm('post', '/users', {\n    name: '',\n    email: '',\n});\n\nconst submit = () => form.submit();\n</script>\n\n<template>\n    <form @submit.prevent=\"submit\">\n        <label for=\"name\">Name</label>\n        <input\n            id=\"name\"\n            v-model=\"form.name\"\n            @change=\"form.validate('name')\"\n        />\n        <div v-if=\"form.invalid('name')\">\n            {{ form.errors.name }}\n        </div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":48,"to":74}}}}],["2836",{"pageContent":"<label for=\"email\">Email</label>\n        <input\n            id=\"email\"\n            type=\"email\"\n            v-model=\"form.email\"\n            @change=\"form.validate('email')\"\n        />\n        <div v-if=\"form.invalid('email')\">\n            {{ form.errors.email }}\n        </div>\n\n        <button :disabled=\"form.processing\">\n            Create User\n        </button>\n    </form>\n</template>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":76,"to":91}}}}],["2837",{"pageContent":"Now, as the form is filled by the user, Precognition will provide live validation output powered by the validation rules in the route's form request. When the form's inputs are changed, a debounced \"precognitive\" validation request will be sent to your Laravel application. You may configure the debounce timeout by calling the form's `setValidationTimeout` function:\n\n```js\nform.setValidationTimeout(3000);\n```\n\nWhen a validation request is in-flight, the form's `validating` property will be `true`:\n\n```html\n<div v-if=\"form.validating\">\n    Validating...\n</div>\n```\n\nAny validation errors returned during a validation request or a form submission will automatically populate the form's `errors` object:\n\n```html\n<div v-if=\"form.invalid('email')\">\n    {{ form.errors.email }}\n</div>\n```\n\nYou can determine if the form has any errors using the form's `hasErrors` property:\n\n```html\n<div v-if=\"form.hasErrors\">\n    <!-- ... -->\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":94,"to":121}}}}],["2838",{"pageContent":"You can determine if the form has any errors using the form's `hasErrors` property:\n\n```html\n<div v-if=\"form.hasErrors\">\n    <!-- ... -->\n</div>\n```\n\nYou may also determine if an input has passed or failed validation by passing the input's name to the form's `valid` and `invalid` functions, respectively:\n\n```html\n<span v-if=\"form.valid('email')\">\n    ✅\n</span>\n\n<span v-else-if=\"form.invalid('email')\">\n    ❌\n</span>\n```\n\n> **Warning**\n> A form input will only appear as valid or invalid once it has changed and a validation response has been received.\n\nIf you are validating a subset of a form's inputs with Precognition, it can be useful to manually clear errors. You may use the form's `forgetError` function to achieve this:\n\n```html\n<input\n    id=\"avatar\"\n    type=\"file\"\n    @change=\"(e) => {\n        form.avatar = e.target.files[0]\n\n        form.forgetError('avatar')\n    }\"\n>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":121,"to":155}}}}],["2839",{"pageContent":"Of course, you may also execute code in reaction to the response to the form submission. The form's `submit` function returns an Axios request promise. This provides a convenient way to access the response payload, reset the form inputs on successful submission, or handle a failed request:\n\n```js\nconst submit = () => form.submit()\n    .then(response => {\n        form.reset();\n\n        alert('User created.');\n    })\n    .catch(error => {\n        alert('An error occurred.');\n    });\n```\n\nYou may determine if a form submission request is in-flight by inspecting the form's `processing` property:\n\n```html\n<button :disabled=\"form.processing\">\n    Submit\n</button>\n```\n\n<a name=\"using-vue-and-inertia\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":158,"to":180}}}}],["2840",{"pageContent":"Using Vue & Inertia\n\n> **Note**\n> If you would like a head start when developing your Laravel application with Vue and Inertia, consider using one of our [starter kits](/docs/{{version}}/starter-kits). Laravel's starter kits provide backend and frontend authentication scaffolding for your new Laravel application.\n\nBefore using Precognition with Vue and Inertia, be sure to review our general documentation on [using Precognition with Vue](#using-vue). When using Vue with Inertia, you will need to install the Inertia compatible Precognition library via NPM:\n\n```shell\nnpm install laravel-precognition-vue-inertia","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":181,"to":189}}}}],["2841",{"pageContent":"Once installed, Precognition's `useForm` function will return an Inertia [form helper](https://inertiajs.com/forms#form-helper) augmented with the validation features discussed above.\n\nThe form helper's `submit` method has been streamlined, removing the need to specify the HTTP method or URL. Instead, you may pass Inertia's [visit options](https://inertiajs.com/manual-visits) as the first and only argument. In addition, the `submit` method does not return a Promise as seen in the Vue example above. Instead, you may provide any of Inertia's supported [event callbacks](https://inertiajs.com/manual-visits#event-callbacks) in the visit options given to the `submit` method:\n\n```vue\n<script setup>\nimport { useForm } from 'laravel-precognition-vue-inertia';\n\nconst form = useForm('post', '/users', {\n    name: '',\n    email: '',\n});\n\nconst submit = () => form.submit({\n    preserveScroll: true,\n    onSuccess: () => form.reset(),\n});\n</script>\n```\n\n<a name=\"using-react\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":192,"to":212}}}}],["2842",{"pageContent":"Using React\n\nUsing Laravel Precognition, you can offer live validation experiences to your users without having to duplicate your validation rules in your frontend React application. To illustrate how it works, let's build a form for creating new users within our application.\n\nFirst, to enable Precognition for a route, the `HandlePrecognitiveRequests` middleware should be added to the route definition. You should also create a [form request](/docs/{{version}}/validation#form-request-validation) to house the route's validation rules:\n\n```php\nuse App\\Http\\Requests\\StoreUserRequest;\nuse Illuminate\\Foundation\\Http\\Middleware\\HandlePrecognitiveRequests;\n\nRoute::post('/users', function (StoreUserRequest $request) {\n    // ...\n})->middleware([HandlePrecognitiveRequests::class]);\n```\n\nNext, you should install the Laravel Precognition frontend helpers for React via NPM:\n\n```shell\nnpm install laravel-precognition-react","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":213,"to":231}}}}],["2843",{"pageContent":"With the Laravel Precognition package installed, you can now create a form object using Precognition's `useForm` function, providing the HTTP method (`post`), the target URL (`/users`), and the initial form data.\n\nTo enable live validation, you should listen to each input's `change` and `blur` event. In the `change` event handler, you should set the form's data with the `setData` function, passing the input's name and new value. Then, in the `blur` event handler invoke the form's `validate` method, providing the input's name:\n\n```jsx\nimport { useForm } from 'laravel-precognition-react';\n\nexport default function Form() {\n    const form = useForm('post', '/users', {\n        name: '',\n        email: '',\n    });\n\n    const submit = (e) => {\n        e.preventDefault();\n\n        form.submit();\n    };","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":234,"to":251}}}}],["2844",{"pageContent":"const submit = (e) => {\n        e.preventDefault();\n\n        form.submit();\n    };\n\n    return (\n        <form onSubmit={submit}>\n            <label for=\"name\">Name</label>\n            <input\n                id=\"name\"\n                value={form.data.name}\n                onChange={(e) => form.setData('name', e.target.value)}\n                onBlur={() => form.validate('name')}\n            />\n            {form.invalid('name') && <div>{form.errors.name}</div>}\n\n            <label for=\"email\">Email</label>\n            <input\n                id=\"email\"\n                value={form.data.email}\n                onChange={(e) => form.setData('email', e.target.value)}\n                onBlur={() => form.validate('email')}\n            />\n            {form.invalid('email') && <div>{form.errors.email}</div>}\n\n            <button disabled={form.processing}>\n                Create User\n            </button>\n        </form>\n    );\n};","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":251,"to":282}}}}],["2845",{"pageContent":"Now, as the form is filled by the user, Precognition will provide live validation output powered by the validation rules in the route's form request. When the form's inputs are changed, a debounced \"precognitive\" validation request will be sent to your Laravel application. You may configure the debounce timeout by calling the form's `setValidationTimeout` function:\n\n```js\nform.setValidationTimeout(3000);\n```\n\nWhen a validation request is in-flight, the form's `validating` property will be `true`:\n\n```jsx\n{form.validating && <div>Validating...</div>}\n```\n\nAny validation errors returned during a validation request or a form submission will automatically populate the form's `errors` object:\n\n```jsx\n{form.invalid('email') && <div>{form.errors.email}</div>}\n```\n\nYou can determine if the form has any errors using the form's `hasErrors` property:\n\n```jsx\n{form.hasErrors && <div><!-- ... --></div>}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":285,"to":306}}}}],["2846",{"pageContent":"You can determine if the form has any errors using the form's `hasErrors` property:\n\n```jsx\n{form.hasErrors && <div><!-- ... --></div>}\n```\n\nYou may also determine if an input has passed or failed validation by passing the input's name to the form's `valid` and `invalid` functions, respectively:\n\n```jsx\n{form.valid('email') && <span>✅</span>}\n\n{form.invalid('email') && <span>❌</span>}\n```\n\n> **Warning**\n> A form input will only appear as valid or invalid once it has changed and a validation response has been received.\n\nIf you are validating a subset of a form's inputs with Precognition, it can be useful to manually clear errors. You may use the form's `forgetError` function to achieve this:\n\n```jsx\n<input\n    id=\"avatar\"\n    type=\"file\"\n    onChange={(e) => \n        form.setData('avatar', e.target.value);\n\n        form.forgetError('avatar');\n    }\n>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":306,"to":334}}}}],["2847",{"pageContent":"Of course, you may also execute code in reaction to the response to the form submission. The form's `submit` function returns an Axios request promise. This provides a convenient way to access the response payload, reset the form's inputs on a successful form submission, or handle a failed request:\n\n```js\nconst submit = (e) => {\n    e.preventDefault();\n\n    form.submit()\n        .then(response => {\n            form.reset();\n\n            alert('User created.');\n        })\n        .catch(error => {\n            alert('An error occurred.');\n        });\n};\n```\n\nYou may determine if a form submission request is in-flight by inspecting the form's `processing` property:\n\n```html\n<button disabled={form.processing}>\n    Submit\n</button>\n```\n\n<a name=\"using-react-and-inertia\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":337,"to":363}}}}],["2848",{"pageContent":"Using React & Inertia\n\n> **Note**\n> If you would like a head start when developing your Laravel application with React and Inertia, consider using one of our [starter kits](/docs/{{version}}/starter-kits). Laravel's starter kits provide backend and frontend authentication scaffolding for your new Laravel application.\n\nBefore using Precognition with React and Inertia, be sure to review our general documentation on [using Precognition with React](#using-react). When using React with Inertia, you will need to install the Inertia compatible Precognition library via NPM:\n\n```shell\nnpm install laravel-precognition-react-inertia","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":364,"to":372}}}}],["2849",{"pageContent":"Once installed, Precognition's `useForm` function will return an Inertia [form helper](https://inertiajs.com/forms#form-helper) augmented with the validation features discussed above.\n\nThe form helper's `submit` method has been streamlined, removing the need to specify the HTTP method or URL. Instead, you may pass Inertia's [visit options](https://inertiajs.com/manual-visits) as the first and only argument. In addition, the `submit` method does not return a Promise as seen in the React example above. Instead, you may provide any of Inertia's supported [event callbacks](https://inertiajs.com/manual-visits#event-callbacks) in the visit options given to the `submit` method:\n\n```js\nimport { useForm } from 'laravel-precognition-react-inertia';\n\nconst form = useForm('post', '/users', {\n    name: '',\n    email: '',\n});\n\nconst submit = (e) => {\n    e.preventDefault();\n\n    form.submit({\n        preserveScroll: true,\n        onSuccess: () => form.reset(),\n    });\n};\n```\n\n<a name=\"using-alpine\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":375,"to":397}}}}],["2850",{"pageContent":"Using Alpine & Blade\n\nUsing Laravel Precognition, you can offer live validation experiences to your users without having to duplicate your validation rules in your frontend Alpine application. To illustrate how it works, let's build a form for creating new users within our application.\n\nFirst, to enable Precognition for a route, the `HandlePrecognitiveRequests` middleware should be added to the route definition. You should also create a [form request](/docs/{{version}}/validation#form-request-validation) to house the route's validation rules:\n\n```php\nuse App\\Http\\Requests\\CreateUserRequest;\nuse Illuminate\\Foundation\\Http\\Middleware\\HandlePrecognitiveRequests;\n\nRoute::post('/users', function (CreateUserRequest $request) {\n    // ...\n})->middleware([HandlePrecognitiveRequests::class]);\n```\n\nNext, you should install the Laravel Precognition frontend helpers for Alpine via NPM:\n\n```shell\nnpm install laravel-precognition-alpine","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":398,"to":416}}}}],["2851",{"pageContent":"Next, you should install the Laravel Precognition frontend helpers for Alpine via NPM:\n\n```shell\nnpm install laravel-precognition-alpine\n```\n\nThen, register the Precognition plugin with Alpine in your `resources/js/app.js` file:\n\n```js\nimport Alpine from 'alpinejs';\nimport Precognition from 'laravel-precognition-alpine';\n\nwindow.Alpine = Alpine;\n\nAlpine.plugin(Precognition);\nAlpine.start();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":416,"to":431}}}}],["2852",{"pageContent":"With the Laravel Precognition package installed and registered, you can now create a form object using Precognition's `$form` \"magic\", providing the HTTP method (`post`), the target URL (`/users`), and the initial form data.\n\nTo enable live validation, you should bind the form's data to its relevant input and then listen to each input's `change` event. In the `change` event handler, you should invoke the form's `validate` method, providing the input's name:\n\n```html\n<form x-data=\"{\n    form: $form('post', '/register', {\n        name: '',\n        email: '',\n    }),\n}\">\n    @csrf\n    <label for=\"name\">Name</label>\n    <input\n        id=\"name\"\n        name=\"name\"\n        x-model=\"form.name\"\n        @change=\"form.validate('name')\"\n    />\n    <template x-if=\"form.invalid('name')\">\n        <div x-text=\"form.errors.name\"></div>\n    </template>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":434,"to":455}}}}],["2853",{"pageContent":"<label for=\"email\">Email</label>\n    <input\n        id=\"email\"\n        name=\"email\"\n        x-model=\"form.email\"\n        @change=\"form.validate('email')\"\n    />\n    <template x-if=\"form.invalid('email')\">\n        <div x-text=\"form.errors.email\"></div>\n    </template>\n\n    <button :disabled=\"form.processing\">\n        Create User\n    </button>\n</form>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":457,"to":471}}}}],["2854",{"pageContent":"Now, as the form is filled by the user, Precognition will provide live validation output powered by the validation rules in the route's form request. When the form's inputs are changed, a debounced \"precognitive\" validation request will be sent to your Laravel application. You may configure the debounce timeout by calling the form's `setValidationTimeout` function:\n\n```js\nform.setValidationTimeout(3000);\n```\n\nWhen a validation request is in-flight, the form's `validating` property will be `true`:\n\n```html\n<template x-if=\"form.validating\">\n    <div>Validating...</div>\n</template>\n```\n\nAny validation errors returned during a validation request or a form submission will automatically populate the form's `errors` object:\n\n```html\n<template x-if=\"form.invalid('email')\">\n    <div x-text=\"form.errors.email\"></div>\n</template>\n```\n\nYou can determine if the form has any errors using the form's `hasErrors` property:\n\n```html\n<template x-if=\"form.hasErrors\">\n    <div><!-- ... --></div>\n</template>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":474,"to":501}}}}],["2855",{"pageContent":"You can determine if the form has any errors using the form's `hasErrors` property:\n\n```html\n<template x-if=\"form.hasErrors\">\n    <div><!-- ... --></div>\n</template>\n```\n\nYou may also determine if an input has passed or failed validation by passing the input's name to the form's `valid` and `invalid` functions, respectively:\n\n```html\n<template x-if=\"form.valid('email')\">\n    <span>✅</span>\n</template>\n\n<template x-if=\"form.invalid('email')\">\n    <span>❌</span>\n</template>\n```\n\n> **Warning**\n> A form input will only appear as valid or invalid once it has changed and a validation response has been received.\n\nYou may determine if a form submission request is in-flight by inspecting the form's `processing` property:\n\n```html\n<button :disabled=\"form.processing\">\n    Submit\n</button>\n```\n\n<a name=\"repopulating-old-form-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":501,"to":532}}}}],["2856",{"pageContent":"Repopulating Old Form Data\n\nIn the user creation example discussed above, we are using Precognition to perform live validation; however, we are performing a traditional server-side form submission to submit the form. So, the form should be populated with any \"old\" input and validation errors returned from the server-side form submission:\n\n```html\n<form x-data=\"{\n    form: $form('post', '/register', {\n        name: '{{ old('name') }}',\n        email: '{{ old('email') }}',\n    }).setErrors({{ Js::from($errors->messages()) }}),\n}\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":533,"to":543}}}}],["2857",{"pageContent":"Alternatively, if you would like to submit the form via XHR you may use the form's `submit` function, which returns an Axios request promise:\n\n```html\n<form \n    x-data=\"{\n        form: $form('post', '/register', {\n            name: '',\n            email: '',\n        }),\n        submit() {\n            this.form.submit()\n                .then(response => {\n                    form.reset();\n\n                    alert('User created.')\n                })\n                .catch(error => {\n                    alert('An error occurred.');\n                });\n        },\n    }\"\n    @submit.prevent=\"submit\"\n>\n```\n\n<a name=\"configuring-axios\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":546,"to":571}}}}],["2858",{"pageContent":"Configuring Axios\n\nThe Precognition validation libraries use the [Axios](https://github.com/axios/axios) HTTP client to send requests to your application's backend. For convenience, the Axios instance may be customized if required by your application. For example, when using the `laravel-precognition-vue` library, you may add additional request headers to each outgoing request in your application's `resources/js/app.js` file:\n\n```js\nimport { client } from 'laravel-precognition-vue';\n\nclient.axios().defaults.headers.common['Authorization'] = authToken;\n```\n\nOr, if you already have a configured Axios instance for your application, you may tell Precognition to use that instance instead:\n\n```js\nimport Axios from 'axios';\nimport { client } from 'laravel-precognition-vue';\n\nwindow.axios = Axios.create()\nwindow.axios.defaults.headers.common['Authorization'] = authToken;\n\nclient.use(window.axios)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":572,"to":591}}}}],["2859",{"pageContent":"> **Warning**\n> The Inertia flavored Precognition libraries will only use the configured Axios instance for validation requests. Form submissions will always be sent by Inertia.\n\n<a name=\"customizing-validation-rules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":594,"to":597}}}}],["2860",{"pageContent":"Customizing Validation Rules\n\nIt is possible to customize the validation rules executed during a precognitive request by using the request's `isPrecognitive` method.\n\nFor example, on a user creation form, we may want to validate that a password is \"uncompromised\" only on the final form submission. For precognitive validation requests, we will simply validate that the password is required and has a minimum of 8 characters. Using the `isPrecognitive` method, we can customize the rules defined by our form request:\n\n```php\n<?php\n\nnamespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse Illuminate\\Validation\\Rules\\Password;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":598,"to":610}}}}],["2861",{"pageContent":"```php\n<?php\n\nnamespace App\\Http\\Requests;\n\nuse Illuminate\\Foundation\\Http\\FormRequest;\nuse Illuminate\\Validation\\Rules\\Password;\n\nclass StoreUserRequest extends FormRequest\n{\n    /**\n     * Get the validation rules that apply to the request.\n     *\n     * @return array\n     */\n    protected function rules()\n    {\n        return [\n            'password' => [\n                'required',\n                $this->isPrecognitive()\n                    ? Password::min(8)\n                    : Password::min(8)->uncompromised(),\n            ],\n            // ...\n        ];\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":610,"to":637}}}}],["2862",{"pageContent":"<a name=\"handling-file-uploads\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":640,"to":640}}}}],["2863",{"pageContent":"Handling File Uploads\n\nBy default, Laravel Precognition does not upload or validate files during a precognitive validation request. This ensure that large files are not unnecessarily uploaded multiple times.\n\nBecause of this behavior, you should ensure that your application [customizes the corresponding form request's validation rules](#customizing-validation-rules) to specify the field is only required for full form submissions:\n\n```php\n/**\n * Get the validation rules that apply to the request.\n *\n * @return array\n */\nprotected function rules()\n{\n    return [\n        'avatar' => [\n            ...$this->isPrecognitive() ? [] : ['required'],\n            'image',\n            'mimes:jpg,png'\n            'dimensions:ratio=3/2',\n        ],\n        // ...\n    ];\n}\n```\n\nIf you would like to include files in every validation request, you may invoke the `validateFiles` function on your client-side form instance:\n\n```js\nform.validateFiles();\n```\n\n<a name=\"managing-side-effects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":641,"to":673}}}}],["2864",{"pageContent":"Managing Side-Effects\n\nWhen adding the `HandlePrecognitiveRequests` middleware to a route, you should consider if there are any side-effects in _other_ middleware that should be skipped during a precognitive request.\n\nFor example, you may have a middleware that increments the total number of \"interactions\" each user has with your application, but you may not want precognitive requests to be counted as an interaction. To accomplish this, we may check the request's `isPrecognitive` method before incrementing the interaction count:\n\n```php\n<?php\n\nnamespace App\\Http\\Middleware;\n\nuse App\\Facades\\Interaction;\nuse Closure;\nuse Illuminate\\Http\\Request;\n\nclass InteractionMiddleware\n{\n    /**\n     * Handle an incoming request.\n     */\n    public function handle(Request $request, Closure $next): mixed\n    {\n        if (! $request->isPrecognitive()) {\n            Interaction::incrementFor($request->user());\n        }\n\n        return $next($request);\n    }\n}\n```\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":674,"to":705}}}}],["2865",{"pageContent":"Testing\n\nIf you would like to make precognitive requests in your tests, Laravel's `TestCase` includes a `withPrecognition` helper which will add the `Precognition` request header.\n\nAdditionally, if you would like to assert that a precognitive request was successful, e.g., did not return any validation errors, you may use the `assertSuccessfulPrecognition` method on the response:\n\n```php\npublic function test_it_validates_registration_form_with_precognition()\n{\n    $response = $this->withPrecognition()\n        ->post('/register', [\n            'name' => 'Taylor Otwell',\n        ]);\n\n    $response->assertSuccessfulPrecognition();\n    $this->assertSame(0, User::count());\n}\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/precognition.md","loc":{"lines":{"from":706,"to":723}}}}],["2866",{"pageContent":"# Processes\n\n- [Introduction](#introduction)\n- [Invoking Processes](#invoking-processes)\n    - [Process Options](#process-options)\n    - [Process Output](#process-output)\n    - [Pipelines](#process-pipelines)\n- [Asynchronous Processes](#asynchronous-processes)\n    - [Process IDs & Signals](#process-ids-and-signals)\n    - [Asynchronous Process Output](#asynchronous-process-output)\n- [Concurrent Processes](#concurrent-processes)\n    - [Naming Pool Processes](#naming-pool-processes)\n    - [Pool Process IDs & Signals](#pool-process-ids-and-signals)\n- [Testing](#testing)\n    - [Faking Processes](#faking-processes)\n    - [Faking Specific Processes](#faking-specific-processes)\n    - [Faking Process Sequences](#faking-process-sequences)\n    - [Faking Asynchronous Process Lifecycles](#faking-asynchronous-process-lifecycles)\n    - [Available Assertions](#available-assertions)\n    - [Preventing Stray Processes](#preventing-stray-processes)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":1,"to":22}}}}],["2867",{"pageContent":"Introduction\n\nLaravel provides an expressive, minimal API around the [Symfony Process component](https://symfony.com/doc/current/components/process.html), allowing you to conveniently invoke external processes from your Laravel application. Laravel's process features are focused on the most common use cases and a wonderful developer experience.\n\n<a name=\"invoking-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":23,"to":27}}}}],["2868",{"pageContent":"Invoking Processes\n\nTo invoke a process, you may use the `run` and `start` methods offered by the `Process` facade. The `run` method will invoke a process and wait for the process to finish executing, while the `start` method is used for asynchronous process execution. We'll examine both approaches within this documentation. First, let's examine how to invoke a basic, synchronous process and inspect its result:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\n\n$result = Process::run('ls -la');\n\nreturn $result->output();\n```\n\nOf course, the `Illuminate\\Contracts\\Process\\ProcessResult` instance returned by the `run` method offers a variety of helpful methods that may be used to inspect the process result:\n\n```php\n$result = Process::run('ls -la');\n\n$result->successful();\n$result->failed();\n$result->exitCode();\n$result->output();\n$result->errorOutput();\n```\n\n<a name=\"throwing-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":28,"to":52}}}}],["2869",{"pageContent":"Throwing Exceptions\n\nIf you have a process result and would like to throw an instance of `Illuminate\\Process\\Exceptions\\ProcessFailedException` if the exit code is greater than zero (thus indicating failure), you may use the `throw` and `throwIf` methods. If the process did not fail, the process result instance will be returned:\n\n```php\n$result = Process::run('ls -la')->throw();\n\n$result = Process::run('ls -la')->throwIf($condition);\n```\n\n<a name=\"process-options\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":53,"to":63}}}}],["2870",{"pageContent":"Process Options\n\nOf course, you may need to customize the behavior of a process before invoking it. Thankfully, Laravel allows you to tweak a variety of process features, such as the working directory, timeout, and environment variables.\n\n<a name=\"working-directory-path\"></a>\n#### Working Directory Path\n\nYou may use the `path` method to specify the working directory of the process. If this method is not invoked, the process will inherit the working directory of the currently executing PHP script:\n\n```php\n$result = Process::path(__DIR__)->run('ls -la');\n```\n\n<a name=\"input\"></a>\n#### Input\n\nYou may provide input via the \"standard input\" of the process using the `input` method:\n\n```php\n$result = Process::input('Hello World')->run('cat');\n```\n\n<a name=\"timeouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":64,"to":86}}}}],["2871",{"pageContent":"Input\n\nYou may provide input via the \"standard input\" of the process using the `input` method:\n\n```php\n$result = Process::input('Hello World')->run('cat');\n```\n\n<a name=\"timeouts\"></a>\n#### Timeouts\n\nBy default, processes will throw an instance of `Illuminate\\Process\\Exceptions\\ProcessTimedOutException` after executing for more than 60 seconds. However, you can customize this behavior via the `timeout` method:\n\n```php\n$result = Process::timeout(120)->run('bash import.sh');\n```\n\nOr, if you would like to disable the process timeout entirely, you may invoke the `forever` method:\n\n```php\n$result = Process::forever()->run('bash import.sh');\n```\n\nThe `idleTimeout` method may be used to specify the maximum number of seconds the process may run without returning any output:\n\n```php\n$result = Process::timeout(60)->idleTimeout(30)->run('bash import.sh');\n```\n\n<a name=\"environment-variables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":86,"to":115}}}}],["2872",{"pageContent":"Environment Variables\n\nEnvironment variables may be provided to the process via the `env` method. The invoked process will also inherit all of the environment variables defined by your system:\n\n```php\n$result = Process::forever()\n            ->env(['IMPORT_PATH' => __DIR__])\n            ->run('bash import.sh');\n```\n\nIf you wish to remove an inherited environment variable from the invoked process, you may provide that environment variable with a value of `false`:\n\n```php\n$result = Process::forever()\n            ->env(['LOAD_PATH' => false])\n            ->run('bash import.sh');\n```\n\n<a name=\"tty-mode\"></a>\n#### TTY Mode\n\nThe `tty` method may be used to enable TTY mode for your process. TTY mode connects the input and output of the process to the input and output of your program, allowing your process to open an editor like Vim or Nano as a process:\n\n```php\nProcess::forever()->tty()->run('vim');\n```\n\n<a name=\"process-output\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":116,"to":143}}}}],["2873",{"pageContent":"Process Output\n\nAs previously discussed, process output may be accessed using the `output` (stdout) and `errorOutput` (stderr) methods on a process result:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\n\n$result = Process::run('ls -la');\n\necho $result->output();\necho $result->errorOutput();\n```\n\nHowever, output may also be gathered in real-time by passing a closure as the second argument to the `run` method. The closure will receive two arguments: the \"type\" of output (`stdout` or `stderr`) and the output string itself:\n\n```php\n$result = Process::run('ls -la', function (string $type, string $output) {\n    echo $output;\n});\n```\n\nLaravel also offers the `seeInOutput` and `seeInErrorOutput` methods, which provide a convenient way to determine if a given string was contained in the process' output:\n\n```php\nif (Process::run('ls -la')->seeInOutput('laravel')) {\n    // ...\n}\n```\n\n<a name=\"disabling-process-output\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":144,"to":173}}}}],["2874",{"pageContent":"Disabling Process Output\n\nIf your process is writing a significant amount of output that you are not interested in, you can conserve memory by disabling output retrieval entirely. To accomplish this, invoke the `quietly` method while building the process:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\n\n$result = Process::quietly()->run('bash import.sh');\n```\n\n<a name=\"process-pipelines\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":174,"to":184}}}}],["2875",{"pageContent":"Pipelines\n\nSometimes you may want to make the output of one process the input of another process. This is often referred to as \"piping\" the output of a process into another. The `pipe` method provided by the `Process` facades makes this easy to accomplish. The `pipe` method will execute the piped processes synchronously and return the process result for the last process in the pipeline:\n\n```php\nuse Illuminate\\Process\\Pipe;\nuse Illuminate\\Support\\Facades\\Process;\n\n$result = Process::pipe(function (Pipe $pipe) {\n    $pipe->command('cat example.txt');\n    $pipe->command('grep -i \"laravel\"');\n});\n\nif ($result->successful()) {\n    // ...\n}\n```\n\nIf you do not need to customize the individual processes that make up the pipeline, you may simply pass an array of command strings to the `pipe` method:\n\n```php\n$result = Process::pipe([\n    'cat example.txt',\n    'grep -i \"laravel\"',\n]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":185,"to":209}}}}],["2876",{"pageContent":"The process output may be gathered in real-time by passing a closure as the second argument to the `pipe` method. The closure will receive two arguments: the \"type\" of output (`stdout` or `stderr`) and the output string itself:\n\n```php\n$result = Process::pipe(function (Pipe $pipe) {\n    $pipe->command('cat example.txt');\n    $pipe->command('grep -i \"laravel\"');\n}, function (string $type, string $output) {\n    echo $output;\n});\n```\n\nLaravel also allows you to assign string keys to each process within a pipeline via the `as` method. This key will also be passed to the output closure provided to the `pipe` method, allowing you to determine which process the output belongs to:\n\n```php\n$result = Process::pipe(function (Pipe $pipe) {\n    $pipe->as('first')->command('cat example.txt');\n    $pipe->as('second')->command('grep -i \"laravel\"');\n})->start(function (string $type, string $output, string $key) {\n    // ...\n});\n```\n\n<a name=\"asynchronous-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":212,"to":234}}}}],["2877",{"pageContent":"Asynchronous Processes\n\nWhile the `run` method invokes processes synchronously, the `start` method may be used to invoke a process asynchronously. This allows your application to continue performing other tasks while the process runs in the background. Once the process has been invoked, you may utilize the `running` method to determine if the process is still running:\n\n```php\n$process = Process::timeout(120)->start('bash import.sh');\n\nwhile ($process->running()) {\n    // ...\n}\n\n$result = $process->wait();\n```\n\nAs you may have noticed, you may invoke the `wait` method to wait until the process is finished executing and retrieve the process result instance:\n\n```php\n$process = Process::timeout(120)->start('bash import.sh');\n\n// ...\n\n$result = $process->wait();\n```\n\n<a name=\"process-ids-and-signals\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":235,"to":259}}}}],["2878",{"pageContent":"Process IDs & Signals\n\nThe `id` method may be used to retrieve the operating system assigned process ID of the running process:\n\n```php\n$process = Process::start('bash import.sh');\n\nreturn $process->id();\n```\n\nYou may use the `signal` method to send a \"signal\" to the running process. A list of predefined signal constants can be found within the [PHP documentation](https://www.php.net/manual/en/pcntl.constants.php):\n\n```php\n$process->signal(SIGUSR2);\n```\n\n<a name=\"asynchronous-process-output\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":260,"to":276}}}}],["2879",{"pageContent":"Asynchronous Process Output\n\nWhile an asynchronous process is running, you may access its entire current output using the `output` and `errorOutput` methods; however, you may utilize the `latestOutput` and `latestErrorOutput` to access the output from the process that has occurred since the output was last retrieved:\n\n```php\n$process = Process::timeout(120)->start('bash import.sh');\n\nwhile ($process->running()) {\n    echo $process->latestOutput();\n    echo $process->latestErrorOutput();\n\n    sleep(1);\n}\n```\n\nLike the `run` method, output may also be gathered in real-time from asynchronous processes by passing a closure as the second argument to the `start` method. The closure will receive two arguments: the \"type\" of output (`stdout` or `stderr`) and the output string itself:\n\n```php\n$process = Process::start('bash import.sh', function (string $type, string $output) {\n    echo $output;\n});\n\n$result = $process->wait();\n```\n\n<a name=\"concurrent-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":277,"to":302}}}}],["2880",{"pageContent":"Concurrent Processes\n\nLaravel also makes it a breeze to manage a pool of concurrent, asynchronous processes, allowing you to easily execute many tasks simultaneously. To get started, invoke the `pool` method, which accepts a closure that receives an instance of `Illuminate\\Process\\Pool`.\n\nWithin this closure, you may define the processes that belong to the pool. Once a process pool is started via the `start` method, you may access the [collection](/docs/{{version}}/collections) of running processes via the `running` method:\n\n```php\nuse Illuminate\\Process\\Pool;\nuse Illuminate\\Support\\Facades\\Process;\n\n$pool = Process::pool(function (Pool $pool) {\n    $pool->path(__DIR__)->command('bash import-1.sh');\n    $pool->path(__DIR__)->command('bash import-2.sh');\n    $pool->path(__DIR__)->command('bash import-3.sh');\n})->start(function (string $type, string $output, int $key) {\n    // ...\n});\n\nwhile ($pool->running()->isNotEmpty()) {\n    // ...\n}\n\n$results = $pool->wait();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":303,"to":325}}}}],["2881",{"pageContent":"As you can see, you may wait for all of the pool processes to finish executing and resolve their results via the `wait` method. The `wait` method returns an array accessible object that allows you to access the process result instance of each process in the pool by its key:\n\n```php\n$results = $pool->wait();\n\necho $results[0]->output();\n```\n\nOr, for convenience, the `concurrently` method may be used to start an asynchronous process pool and immediately wait on its results. This can provide particularly expressive syntax when combined with PHP's array destructuring capabilities:\n\n```php\n[$first, $second, $third] = Process::concurrently(function (Pool $pool) {\n    $pool->path(__DIR__)->command('ls -la');\n    $pool->path(app_path())->command('ls -la');\n    $pool->path(storage_path())->command('ls -la');\n});\n\necho $first->output();\n```\n\n<a name=\"naming-pool-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":328,"to":348}}}}],["2882",{"pageContent":"Naming Pool Processes\n\nAccessing process pool results via a numeric key is not very expressive; therefore, Laravel allows you to assign string keys to each process within a pool via the `as` method. This key will also be passed to the closure provided to the `start` method, allowing you to determine which process the output belongs to:\n\n```php\n$pool = Process::pool(function (Pool $pool) {\n    $pool->as('first')->command('bash import-1.sh');\n    $pool->as('second')->command('bash import-2.sh');\n    $pool->as('third')->command('bash import-3.sh');\n})->start(function (string $type, string $output, string $key) {\n    // ...\n});\n\n$results = $pool->wait();\n\nreturn $results['first']->output();\n```\n\n<a name=\"pool-process-ids-and-signals\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":349,"to":367}}}}],["2883",{"pageContent":"Pool Process IDs & Signals\n\nSince the process pool's `running` method provides a collection of all invoked processes within the pool, you may easily access the underlying pool process IDs:\n\n```php\n$processIds = $pool->running()->each->id();\n```\n\nAnd, for convenience, you may invoke the `signal` method on a process pool to send a signal to every process within the pool:\n\n```php\n$pool->signal(SIGUSR2);\n```\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":368,"to":382}}}}],["2884",{"pageContent":"Testing\n\nMany Laravel services provide functionality to help you easily and expressively write tests, and Laravel's process service is no exception. The `Process` facade's `fake` method allows you to instruct Laravel to return stubbed / dummy results when processes are invoked.\n\n<a name=\"faking-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":383,"to":387}}}}],["2885",{"pageContent":"Faking Processes\n\nTo explore Laravel's ability to fake processes, let's imagine a route that invokes a process:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\nuse Illuminate\\Support\\Facades\\Route;\n\nRoute::get('/import', function () {\n    Process::run('bash import.sh');\n\n    return 'Import complete!';\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":388,"to":400}}}}],["2886",{"pageContent":"When testing this route, we can instruct Laravel to return a fake, successful process result for every invoked process by calling the `fake` method on the `Process` facade with no arguments. In addition, we can even [assert](#available-assertions) that a given process was \"run\":\n\n```php\n<?php\n\nnamespace Tests\\Feature;\n\nuse Illuminate\\Process\\PendingProcess;\nuse Illuminate\\Contracts\\Process\\ProcessResult;\nuse Illuminate\\Support\\Facades\\Process;\nuse Tests\\TestCase;\n\nclass ExampleTest extends TestCase\n{\n    public function test_process_is_invoked(): void\n    {\n        Process::fake();\n\n        $response = $this->get('/');\n\n        // Simple process assertion...\n        Process::assertRan('bash import.sh');\n\n        // Or, inspecting the process configuration...\n        Process::assertRan(function (PendingProcess $process, ProcessResult $result) {\n            return $process->command === 'bash import.sh' &&\n                   $process->timeout === 60;\n        });\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":403,"to":432}}}}],["2887",{"pageContent":"As discussed, invoking the `fake` method on the `Process` facade will instruct Laravel to always return a successful process result with no output. However, you may easily specify the output and exit code for faked processes using the `Process` facade's `result` method:\n\n```php\nProcess::fake([\n    '*' => Process::result(\n        output: 'Test output',\n        errorOutput: 'Test error output',\n        exitCode: 1,\n    ),\n]);\n```\n\n<a name=\"faking-specific-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":435,"to":447}}}}],["2888",{"pageContent":"Faking Specific Processes\n\nAs you may have noticed in a previous example, the `Process` facade allows you to specify different fake results per process by passing an array to the `fake` method.\n\nThe array's keys should represent command patterns that you wish to fake and their associated results. The `*` character may be used as a wildcard character. Any process commands that have not been faked will actually be invoked. You may use the `Process` facade's `result` method to construct stub / fake results for these commands:\n\n```php\nProcess::fake([\n    'cat *' => Process::result(\n        output: 'Test \"cat\" output',\n    ),\n    'ls *' => Process::result(\n        output: 'Test \"ls\" output',\n    ),\n]);\n```\n\nIf you do not need to customize the exit code or error output of a faked process, you may find it more convenient to specify the fake process results as simple strings:\n\n```php\nProcess::fake([\n    'cat *' => 'Test \"cat\" output',\n    'ls *' => 'Test \"ls\" output',\n]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":448,"to":471}}}}],["2889",{"pageContent":"<a name=\"faking-process-sequences\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":474,"to":474}}}}],["2890",{"pageContent":"Faking Process Sequences\n\nIf the code you are testing invokes multiple processes with the same command, you may wish to assign a different fake process result to each process invocation. You may accomplish this via the `Process` facade's `sequence` method:\n\n```php\nProcess::fake([\n    'ls *' => Process::sequence()\n                ->push(Process::result('First invocation'))\n                ->push(Process::result('Second invocation')),\n]);\n```\n\n<a name=\"faking-asynchronous-process-lifecycles\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":475,"to":487}}}}],["2891",{"pageContent":"Faking Asynchronous Process Lifecycles\n\nThus far, we have primarily discussed faking processes which are invoked synchronously using the `run` method. However, if you are attempting to test code that interacts with asynchronous processes invoked via `start`, you may need a more sophisticated approach to describing your fake processes.\n\nFor example, let's imagine the following route which interacts with an asynchronous process:\n\n```php\nuse Illuminate\\Support\\Facades\\Log;\nuse Illuminate\\Support\\Facades\\Route;\n\nRoute::get('/import', function () {\n    $process = Process::start('bash import.sh');\n\n    while ($process->running()) {\n        Log::info($process->latestOutput());\n        Log::info($process->latestErrorOutput());\n    }\n\n    return 'Done';\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":488,"to":507}}}}],["2892",{"pageContent":"To properly fake this process, we need to be able to describe how many times the `running` method should return `true`. In addition, we may want to specify multiple lines of output that should be returned in sequence. To accomplish this, we can use the `Process` facade's `describe` method:\n\n```php\nProcess::fake([\n    'bash import.sh' => Process::describe()\n            ->output('First line of standard output')\n            ->errorOutput('First line of error output')\n            ->output('Second line of standard output')\n            ->exitCode(0)\n            ->iterations(3),\n]);\n```\n\nLet's dig into the example above. Using the `output` and `errorOutput` methods, we may specify multiple lines of output that will be returned in sequence. The `exitCode` method may be used to specify the final exit code of the fake process. Finally, the `iterations` method may be used to specify how many times the `running` method should return `true`.\n\n<a name=\"available-assertions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":510,"to":525}}}}],["2893",{"pageContent":"Available Assertions\n\nAs [previously discussed](#faking-processes), Laravel provides several process assertions for your feature tests. We'll discuss each of these assertions below.\n\n<a name=\"assert-process-ran\"></a>\n#### assertRan\n\nAssert that a given process was invoked:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\n\nProcess::assertRan('ls -la');\n```\n\nThe `assertRan` method also accepts a closure, which will receive an instance of a process and a process result, allowing you to inspect the process' configured options. If this closure returns `true`, the assertion will \"pass\":\n\n```php\nProcess::assertRan(fn ($process, $result) =>\n    $process->command === 'ls -la' &&\n    $process->path === __DIR__ &&\n    $process->timeout === 60\n);\n```\n\nThe `$process` passed to the `assertRan` closure is an instance of `Illuminate\\Process\\PendingProcess`, while the `$result` is an instance of `Illuminate\\Contracts\\Process\\ProcessResult`.\n\n<a name=\"assert-process-didnt-run\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":526,"to":553}}}}],["2894",{"pageContent":"assertDidntRun\n\nAssert that a given process was not invoked:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\n\nProcess::assertDidntRun('ls -la');\n```\n\nLike the `assertRan` method, the `assertDidntRun` method also accepts a closure, which will receive an instance of a process and a process result, allowing you to inspect the process' configured options. If this closure returns `true`, the assertion will \"fail\":\n\n```php\nProcess::assertDidntRun(fn (PendingProcess $process, ProcessResult $result) =>\n    $process->command === 'ls -la'\n);\n```\n\n<a name=\"assert-process-ran-times\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":554,"to":572}}}}],["2895",{"pageContent":"assertRanTimes\n\nAssert that a given process was invoked a given number of times:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\n\nProcess::assertRanTimes('ls -la', times: 3);\n```\n\nThe `assertRanTimes` method also accepts a closure, which will receive an instance of a process and a process result, allowing you to inspect the process' configured options. If this closure returns `true` and the process was invoked the specified number of times, the assertion will \"pass\":\n\n```php\nProcess::assertRanTimes(function (PendingProcess $process, ProcessResult $result) {\n    return $process->command === 'ls -la';\n}, times: 3);\n```\n\n<a name=\"preventing-stray-processes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":573,"to":591}}}}],["2896",{"pageContent":"Preventing Stray Processes\n\nIf you would like to ensure that all invoked processes have been faked throughout your individual test or complete test suite, you can call the `preventStrayProcesses` method. After calling this method, any processes that do not have a corresponding fake result will throw an exception rather than starting an actual process:\n\n    use Illuminate\\Support\\Facades\\Process;\n\n    Process::preventStrayProcesses();\n\n    Process::fake([\n        'ls *' => 'Test output...',\n    ]);\n\n    // Fake response is returned...\n    Process::run('ls -la');\n\n    // An exception is thrown...\n    Process::run('bash import.sh');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/processes.md","loc":{"lines":{"from":592,"to":608}}}}],["2897",{"pageContent":"# Prompts\n\n- [Introduction](#introduction)\n- [Installation](#installation)\n- [Available Prompts](#available-prompts)\n    - [Text](#text)\n    - [Password](#password)\n    - [Confirm](#confirm)\n    - [Select](#select)\n    - [Multi-select](#multiselect)\n    - [Suggest](#suggest)\n    - [Search](#search)\n    - [Multi-search](#multisearch)\n- [Informational Messages](#informational-messages)\n- [Tables](#tables)\n- [Spin](#spin)\n- [Progress Bar](#progress)\n- [Terminal Considerations](#terminal-considerations)\n- [Unsupported Environments & Fallbacks](#fallbacks)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":1,"to":21}}}}],["2898",{"pageContent":"Introduction\n\n[Laravel Prompts](https://github.com/laravel/prompts) is a PHP package for adding beautiful and user-friendly forms to your command-line applications, with browser-like features including placeholder text and validation.\n\n<img src=\"https://laravel.com/img/docs/prompts-example.png\">\n\nLaravel Prompts is perfect for accepting user input in your [Artisan console commands](/docs/{{version}}/artisan#writing-commands), but it may also be used in any command-line PHP project.\n\n> **Note**  \n> Laravel Prompts supports macOS, Linux, and Windows with WSL. For more information, please see our documentation on [unsupported environments & fallbacks](#fallbacks).\n\n<a name=\"installation\"></a>\n## Installation\n\nLaravel Prompts is already included with the latest release of Laravel.\n\nLaravel Prompts may also be installed in your other PHP projects by using the Composer package manager:\n\n```shell\ncomposer require laravel/prompts\n```\n\n<a name=\"available-prompts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":22,"to":44}}}}],["2899",{"pageContent":"Available Prompts\n\n<a name=\"text\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":45,"to":47}}}}],["2900",{"pageContent":"Text\n\nThe `text` function will prompt the user with the given question, accept their input, and then return it:\n\n```php\nuse function Laravel\\Prompts\\text;\n\n$name = text('What is your name?');\n```\n\nYou may also include placeholder text, a default value, and an informational hint:\n\n```php\n$name = text(\n    label: 'What is your name?',\n    placeholder: 'E.g. Taylor Otwell',\n    default: $user?->name,\n    hint: 'This will be displayed on your profile.'\n);\n```\n\n<a name=\"text-required\"></a>\n#### Required Values\n\nIf you require a value to be entered, you may pass the `required` argument:\n\n```php\n$name = text(\n    label: 'What is your name?',\n    required: true\n);\n```\n\nIf you would like to customize the validation message, you may also pass a string:\n\n```php\n$name = text(\n    label: 'What is your name?',\n    required: 'Your name is required.'\n);\n```\n\n<a name=\"text-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":48,"to":90}}}}],["2901",{"pageContent":"Additional Validation\n\nFinally, if you would like to perform additional validation logic, you may pass a closure to the `validate` argument:\n\n```php\n$name = text(\n    label: 'What is your name?',\n    validate: fn (string $value) => match (true) {\n        strlen($value) < 3 => 'The name must be at least 3 characters.',\n        strlen($value) > 255 => 'The name must not exceed 255 characters.',\n        default => null\n    }\n);\n```\n\nThe closure will receive the value that has been entered and may return an error message, or `null` if the validation passes.\n\n<a name=\"password\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":91,"to":108}}}}],["2902",{"pageContent":"Password\n\nThe `password` function is similar to the `text` function, but the user's input will be masked as they type in the console. This is useful when asking for sensitive information such as passwords:\n\n```php\nuse function Laravel\\Prompts\\password;\n\n$password = password('What is your password?');\n```\n\nYou may also include placeholder text and an informational hint:\n\n```php\n$password = password(\n    label: 'What is your password?',\n    placeholder: 'password',\n    hint: 'Minimum 8 characters.'\n);\n```\n\n<a name=\"password-required\"></a>\n#### Required Values\n\nIf you require a value to be entered, you may pass the `required` argument:\n\n```php\n$password = password(\n    label: 'What is your password?',\n    required: true\n);\n```\n\nIf you would like to customize the validation message, you may also pass a string:\n\n```php\n$password = password(\n    label: 'What is your password?',\n    required: 'The password is required.'\n);\n```\n\n<a name=\"password-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":109,"to":150}}}}],["2903",{"pageContent":"Additional Validation\n\nFinally, if you would like to perform additional validation logic, you may pass a closure to the `validate` argument:\n\n```php\n$password = password(\n    label: 'What is your password?',\n    validate: fn (string $value) => match (true) {\n        strlen($value) < 8 => 'The password must be at least 8 characters.',\n        default => null\n    }\n);\n```\n\nThe closure will receive the value that has been entered and may return an error message, or `null` if the validation passes.\n\n<a name=\"confirm\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":151,"to":167}}}}],["2904",{"pageContent":"Confirm\n\nIf you need to ask the user for a \"yes or no\" confirmation, you may use the `confirm` function. Users may use the arrow keys or press `y` or `n` to select their response. This function will return either `true` or `false`.\n\n```php\nuse function Laravel\\Prompts\\confirm;\n\n$confirmed = confirm('Do you accept the terms?');\n```\n\nYou may also include a default value, customized wording for the \"Yes\" and \"No\" labels, and an informational hint:\n\n```php\n$confirmed = confirm(\n    label: 'Do you accept the terms?',\n    default: false,\n    yes: 'I accept',\n    no: 'I decline',\n    hint: 'The terms must be accepted to continue.'\n);\n```\n\n<a name=\"confirm-required\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":168,"to":190}}}}],["2905",{"pageContent":"Requiring \"Yes\"\n\nIf necessary, you may require your users to select \"Yes\" by passing the `required` argument:\n\n```php\n$confirmed = confirm(\n    label: 'Do you accept the terms?',\n    required: true\n);\n```\n\nIf you would like to customize the validation message, you may also pass a string:\n\n```php\n$confirmed = confirm(\n    label: 'Do you accept the terms?',\n    required: 'You must accept the terms to continue.'\n);\n```\n\n<a name=\"select\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":191,"to":211}}}}],["2906",{"pageContent":"Select\n\nIf you need the user to select from a predefined set of choices, you may use the `select` function:\n\n```php\nuse function Laravel\\Prompts\\select;\n\n$role = select(\n    'What role should the user have?',\n    ['Member', 'Contributor', 'Owner'],\n);\n```\n\nYou may also specify the default choice and an informational hint:\n\n```php\n$role = select(\n    label: 'What role should the user have?',\n    options: ['Member', 'Contributor', 'Owner'],\n    default: 'Owner',\n    hint: 'The role may be changed at any time.'\n);\n```\n\nYou may also pass an associative array to the `options` argument to have the selected key returned instead of its value:\n\n```php\n$role = select(\n    label: 'What role should the user have?',\n    options: [\n        'member' => 'Member',\n        'contributor' => 'Contributor',\n        'owner' => 'Owner'\n    ],\n    default: 'owner'\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":212,"to":247}}}}],["2907",{"pageContent":"Up to five options will be displayed before the list begins to scroll. You may customize this by passing the `scroll` argument:\n\n```php\n$role = select(\n    label: 'Which category would you like to assign?',\n    options: Category::pluck('name', 'id'),\n    scroll: 10\n);\n```\n\n<a name=\"select-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":250,"to":260}}}}],["2908",{"pageContent":"Validation\n\nUnlike other prompt functions, the `select` function doesn't accept the `required` argument because it is not possible to select nothing. However, you may pass a closure to the `validate` argument if you need to present an option but prevent it from being selected:\n\n```php\n$role = select(\n    label: 'What role should the user have?',\n    options: [\n        'member' => 'Member',\n        'contributor' => 'Contributor',\n        'owner' => 'Owner'\n    ],\n    validate: fn (string $value) =>\n        $value === 'owner' && User::where('role', 'owner')->exists()\n            ? 'An owner already exists.'\n            : null\n);\n```\n\nIf the `options` argument is an associative array, then the closure will receive the selected key, otherwise it will receive the selected value. The closure may return an error message, or `null` if the validation passes.\n\n<a name=\"multiselect\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":261,"to":282}}}}],["2909",{"pageContent":"Multi-select\n\nIf you need to the user to be able to select multiple options, you may use the `multiselect` function:\n\n```php\nuse function Laravel\\Prompts\\multiselect;\n\n$permissions = multiselect(\n    'What permissions should be assigned?',\n    ['Read', 'Create', 'Update', 'Delete']\n);\n```\n\nYou may also specify default choices and an informational hint:\n\n```php\nuse function Laravel\\Prompts\\multiselect;\n\n$permissions = multiselect(\n    label: 'What permissions should be assigned?',\n    options: ['Read', 'Create', 'Update', 'Delete'],\n    default: ['Read', 'Create'],\n    hint: 'Permissions may be updated at any time.'\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":283,"to":306}}}}],["2910",{"pageContent":"You may also pass an associative array to the `options` argument to return the selected options' keys instead of their values:\n\n```\n$permissions = multiselect(\n    label: 'What permissions should be assigned?',\n    options: [\n        'read' => 'Read',\n        'create' => 'Create',\n        'update' => 'Update',\n        'delete' => 'Delete'\n    ],\n    default: ['read', 'create']\n);\n```\n\nUp to five options will be displayed before the list begins to scroll. You may customize this by passing the `scroll` argument:\n\n```php\n$categories = multiselect(\n    label: 'What categories should be assigned?',\n    options: Category::pluck('name', 'id'),\n    scroll: 10\n);\n```\n\n<a name=\"multiselect-required\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":309,"to":334}}}}],["2911",{"pageContent":"Requiring a Value\n\nBy default, the user may select zero or more options. You may pass the `required` argument to enforce one or more options instead:\n\n```php\n$categories = multiselect(\n    label: 'What categories should be assigned?',\n    options: Category::pluck('name', 'id'),\n    required: true,\n);\n```\n\nIf you would like to customize the validation message, you may provide a string to the `required` argument:\n\n```php\n$categories = multiselect(\n    label: 'What categories should be assigned?',\n    options: Category::pluck('name', 'id'),\n    required: 'You must select at least one category',\n);\n```\n\n<a name=\"multiselect-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":335,"to":357}}}}],["2912",{"pageContent":"Validation\n\nYou may pass a closure to the `validate` argument if you need to present an option but prevent it from being selected:\n\n```\n$permissions = select(\n    label: 'What permissions should the user have?',\n    options: [\n        'read' => 'Read',\n        'create' => 'Create',\n        'update' => 'Update',\n        'delete' => 'Delete'\n    ],\n    validate: fn (array $values) => ! in_array('read', $values)\n        ? 'All users require the read permission.'\n        : null\n);\n```\n\nIf the `options` argument is an associative array then the closure will receive the selected keys, otherwise it will receive the selected values. The closure may return an error message, or `null` if the validation passes.\n\n<a name=\"suggest\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":358,"to":379}}}}],["2913",{"pageContent":"Suggest\n\nThe `suggest` function can be used to provide auto-completion for possible choices. The user can still provide any answer, regardless of the auto-completion hints:\n\n```php\nuse function Laravel\\Prompts\\suggest;\n\n$name = suggest('What is your name?', ['Taylor', 'Dayle']);\n```\n\nAlternatively, you may pass a closure as the second argument to the `suggest` function. The closure will be called each time the user types an input character. The closure should accept a string parameter containing the user's input so far and return an array of options for auto-completion:\n\n```php\n$name = suggest(\n    'What is your name?',\n    fn ($value) => collect(['Taylor', 'Dayle'])\n        ->filter(fn ($name) => Str::contains($name, $value, ignoreCase: true))\n)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":380,"to":397}}}}],["2914",{"pageContent":"You may also include placeholder text, a default value, and an informational hint:\n\n```php\n$name = suggest(\n    label: 'What is your name?',\n    options: ['Taylor', 'Dayle'],\n    placeholder: 'E.g. Taylor',\n    default: $user?->name,\n    hint: 'This will be displayed on your profile.'\n);\n```\n\n<a name=\"suggest-required\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":400,"to":412}}}}],["2915",{"pageContent":"Required Values\n\nIf you require a value to be entered, you may pass the `required` argument:\n\n```php\n$name = suggest(\n    label: 'What is your name?',\n    options: ['Taylor', 'Dayle'],\n    required: true\n);\n```\n\nIf you would like to customize the validation message, you may also pass a string:\n\n```php\n$name = suggest(\n    label: 'What is your name?',\n    options: ['Taylor', 'Dayle'],\n    required: 'Your name is required.'\n);\n```\n\n<a name=\"suggest-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":413,"to":435}}}}],["2916",{"pageContent":"Additional Validation\n\nFinally, if you would like to perform additional validation logic, you may pass a closure to the `validate` argument:\n\n```php\n$name = suggest(\n    label: 'What is your name?',\n    options: ['Taylor', 'Dayle'],\n    validate: fn (string $value) => match (true) {\n        strlen($value) < 3 => 'The name must be at least 3 characters.',\n        strlen($value) > 255 => 'The name must not exceed 255 characters.',\n        default => null\n    }\n);\n```\n\nThe closure will receive the value that has been entered and may return an error message, or `null` if the validation passes.\n\n<a name=\"search\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":436,"to":454}}}}],["2917",{"pageContent":"Search\n\nIf you have a lot of options for the user to select from, the `search` function allows the user to type a search query to filter the results before using the arrow keys to select an option:\n\n```php\nuse function Laravel\\Prompts\\search;\n\n$id = search(\n    'Search for the user that should receive the mail',\n    fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : []\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":455,"to":467}}}}],["2918",{"pageContent":"The closure will receive the text that has been typed by the user so far and must return an array of options. If you return an associative array then the selected option's key will be returned, otherwise its value will be returned instead.\n\nYou may also include placeholder text and an informational hint:\n\n```php\n$id = search(\n    label: 'Search for the user that should receive the mail',\n    placeholder: 'E.g. Taylor Otwell',\n    options: fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    hint: 'The user will receive an email immediately.'\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":470,"to":482}}}}],["2919",{"pageContent":"Up to five options will be displayed before the list begins to scroll. You may customize this by passing the `scroll` argument:\n\n```php\n$id = search(\n    label: 'Search for the user that should receive the mail',\n    options: fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    scroll: 10\n);\n```\n\n<a name=\"search-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":485,"to":497}}}}],["2920",{"pageContent":"Validation\n\nIf you would like to perform additional validation logic, you may pass a closure to the `validate` argument:\n\n```php\n$id = search(\n    label: 'Search for the user that should receive the mail',\n    options: fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    validate: function (int|string $value) {\n        $user = User::findOrFail($value);\n\n        if ($user->opted_out) {\n            return 'This user has opted-out of receiving mail.';\n        }\n    }\n);\n```\n\nIf the `options` closure returns an associative array, then the closure will receive the selected key, otherwise, it will receive the selected value. The closure may return an error message, or `null` if the validation passes.\n\n<a name=\"multisearch\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":498,"to":520}}}}],["2921",{"pageContent":"Multi-search\n\nIf you have a lot of searchable options and need the user to be able to select multiple items, the `multisearch` function allows the user to type a search query to filter the results before using the arrow keys and space-bar to select options:\n\n```php\nuse function Laravel\\Prompts\\multisearch;\n\n$ids = multisearch(\n    'Search for the users that should receive the mail',\n    fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : []\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":521,"to":533}}}}],["2922",{"pageContent":"The closure will receive the text that has been typed by the user so far and must return an array of options. If you return an associative array then the selected options' keys will be returned; otherwise, their values will be returned instead.\n\nYou may also include placeholder text and an informational hint:\n\n```php\n$ids = multisearch(\n    label: 'Search for the users that should receive the mail',\n    placeholder: 'E.g. Taylor Otwell',\n    options: fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    hint: 'The user will receive an email immediately.'\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":536,"to":548}}}}],["2923",{"pageContent":"Up to five options will be displayed before the list begins to scroll. You may customize this by providing the `scroll` argument:\n\n```php\n$ids = multisearch(\n    label: 'Search for the users that should receive the mail',\n    options: fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    scroll: 10\n);\n```\n\n<a name=\"multisearch-required\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":551,"to":563}}}}],["2924",{"pageContent":"Requiring a Value\n\nBy default, the user may select zero or more options. You may pass the `required` argument to enforce one or more options instead:\n\n```php\n$ids = multisearch(\n    'Search for the users that should receive the mail',\n    fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    required: true,\n);\n```\n\nIf you would like to customize the validation message, you may also provide a string to the `required` argument:\n\n```php\n$ids = multisearch(\n    'Search for the users that should receive the mail',\n    fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    required: 'You must select at least one user.'\n);\n```\n\n<a name=\"multisearch-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":564,"to":590}}}}],["2925",{"pageContent":"Validation\n\nIf you would like to perform additional validation logic, you may pass a closure to the `validate` argument:\n\n```php\n$ids = multisearch(\n    label: 'Search for the users that should receive the mail',\n    options: fn (string $value) => strlen($value) > 0\n        ? User::where('name', 'like', \"%{$value}%\")->pluck('name', 'id')->all()\n        : [],\n    validate: function (array $values) {\n        $optedOut = User::where('name', 'like', '%a%')->findMany($values);\n\n        if ($optedOut->isNotEmpty()) {\n            return $optedOut->pluck('name')->join(', ', ', and ').' have opted out.';\n        }\n    }\n);\n```\n\nIf the `options` closure returns an associative array, then the closure will receive the selected keys; otherwise, it will receive the selected values. The closure may return an error message, or `null` if the validation passes.\n\n<a name=\"informational-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":591,"to":613}}}}],["2926",{"pageContent":"Informational Messages\n\nThe `note`, `info`, `warning`, `error`, and `alert` functions may be used to display informational messages:\n\n```php\nuse function Laravel\\Prompts\\info;\n\ninfo('Package installed successfully.');\n```\n\n<a name=\"tables\"></a>\n### Tables\n\nThe `table` function makes it easy to display multiple rows and columns of data. All you need to do is provide the column names and the data for the table:\n\n```php\nuse function Laravel\\Prompts\\table;\n\ntable(\n    ['Name', 'Email'],\n    User::all(['name', 'email'])\n);\n```\n\n<a name=\"spin\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":614,"to":638}}}}],["2927",{"pageContent":"Spin\n\nThe `spin` function displays a spinner along with an optional message while executing a specified callback. It serves to indicate ongoing processes and returns the callback's results upon completion:\n\n```php\nuse function Laravel\\Prompts\\spin;\n\n$response = spin(\n    fn () => Http::get('http://example.com'),\n    'Fetching response...'\n);\n```\n\n> **Warning**  \n> The `spin` function requires the `pcntl` PHP extension to animate the spinner. When this extension is not available, a static version of the spinner will appear instead.\n\n<a name=\"progress\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":639,"to":655}}}}],["2928",{"pageContent":"Progress Bars\n\nFor long running tasks, it can be helpful to show a progress bar that informs users how complete the task is. Using the `progress` function, Laravel will display a progress bar and advance its progress for each iteration over a given iterable value:\n\n```php\nuse function Laravel\\Prompts\\progress;\n\n$users = progress(\n    label: 'Updating users',\n    steps: User::all(),\n    callback: fn ($user) => $this->performTask($user),\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":656,"to":667}}}}],["2929",{"pageContent":"The `progress` function acts like a map function and will return an array containing the return value of each iteration of your callback.\n\nThe callback may also accept the `\\Laravel\\Prompts\\Progress` instance, allowing you to modify the label and hint on each iteration:\n\n```php\n$users = progress(\n    label: 'Updating users',\n    steps: User::all(),\n    callback: function ($user, $progress) {\n        $progress\n            ->label(\"Updating {$user->name}\")\n            ->hint(\"Created on {$user->created_at}\");\n\n        return $this->performTask($user);\n    },\n    hint: 'This may take some time.',\n);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":670,"to":686}}}}],["2930",{"pageContent":"Sometimes, you may need more manual control over how a progress bar is advanced. First, define the total number of steps the process will iterate through. Then, advance the progress bar via the `advance` method after processing each item:\n\n```php\n$progress = progress(label: 'Updating users', steps: 10);\n\n$users = User::all();\n\n$progress->start();\n\nforeach ($users as $user) {\n    $this->performTask($user);\n\n    $progress->advance();\n}\n\n$progress->finish();\n```\n\n<a name=\"terminal-considerations\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":689,"to":707}}}}],["2931",{"pageContent":"Terminal Considerations\n\n<a name=\"terminal-width\"></a>\n#### Terminal Width\n\nIf the length of any label, option, or validation message exceeds the number of \"columns\" in the user's terminal, it will be automatically truncated to fit. Consider minimizing the length of these strings if your users may be using narrower terminals. A typically safe maximum length is 74 characters to support an 80-character terminal.\n\n<a name=\"terminal-height\"></a>\n#### Terminal Height\n\nFor any prompts that accept the `scroll` argument, the configured value will automatically be reduced to fit the height of the user's terminal, including space for a validation message.\n\n<a name=\"fallbacks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":708,"to":720}}}}],["2932",{"pageContent":"Unsupported Environments & Fallbacks\n\nLaravel Prompts supports macOS, Linux, and Windows with WSL. Due to limitations in the Windows version of PHP, it is not currently possible to use Laravel Prompts on Windows outside of WSL.\n\nFor this reason, Laravel Prompts supports falling back to an alternative implementation such as the [Symfony Console Question Helper](https://symfony.com/doc/current/components/console/helpers/questionhelper.html).\n\n> **Note**  \n> When using Laravel Prompts with the Laravel framework, fallbacks for each prompt have been configured for you and will be automatically enabled in unsupported environments.\n\n<a name=\"fallback-conditions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":721,"to":730}}}}],["2933",{"pageContent":"Fallback Conditions\n\nIf you are not using Laravel or need to customize when the fallback behavior is used, you may pass a boolean to the `fallbackWhen` static method on the `Prompt` class:\n\n```php\nuse Laravel\\Prompts\\Prompt;\n\nPrompt::fallbackWhen(\n    ! $input->isInteractive() || windows_os() || app()->runningUnitTests()\n);\n```\n\n<a name=\"fallback-behavior\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":731,"to":743}}}}],["2934",{"pageContent":"Fallback Behavior\n\nIf you are not using Laravel or need to customize the fallback behavior, you may pass a closure to the `fallbackUsing` static method on each prompt class:\n\n```php\nuse Laravel\\Prompts\\TextPrompt;\nuse Symfony\\Component\\Console\\Question\\Question;\nuse Symfony\\Component\\Console\\Style\\SymfonyStyle;\n\nTextPrompt::fallbackUsing(function (TextPrompt $prompt) use ($input, $output) {\n    $question = (new Question($prompt->label, $prompt->default ?: null))\n        ->setValidator(function ($answer) use ($prompt) {\n            if ($prompt->required && $answer === null) {\n                throw new \\RuntimeException(is_string($prompt->required) ? $prompt->required : 'Required.');\n            }\n\n            if ($prompt->validate) {\n                $error = ($prompt->validate)($answer ?? '');\n\n                if ($error) {\n                    throw new \\RuntimeException($error);\n                }\n            }\n\n            return $answer;\n        });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":744,"to":769}}}}],["2935",{"pageContent":"if ($error) {\n                    throw new \\RuntimeException($error);\n                }\n            }\n\n            return $answer;\n        });\n\n    return (new SymfonyStyle($input, $output))\n        ->askQuestion($question);\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":769,"to":779}}}}],["2936",{"pageContent":"Fallbacks must be configured individually for each prompt class. The closure will receive an instance of the prompt class and must return an appropriate type for the prompt.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/prompts.md","loc":{"lines":{"from":782,"to":782}}}}],["2937",{"pageContent":"# Service Providers\n\n- [Introduction](#introduction)\n- [Writing Service Providers](#writing-service-providers)\n    - [The Register Method](#the-register-method)\n    - [The Boot Method](#the-boot-method)\n- [Registering Providers](#registering-providers)\n- [Deferred Providers](#deferred-providers)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":1,"to":10}}}}],["2938",{"pageContent":"Introduction\n\nService providers are the central place of all Laravel application bootstrapping. Your own application, as well as all of Laravel's core services, are bootstrapped via service providers.\n\nBut, what do we mean by \"bootstrapped\"? In general, we mean **registering** things, including registering service container bindings, event listeners, middleware, and even routes. Service providers are the central place to configure your application.\n\nIf you open the `config/app.php` file included with Laravel, you will see a `providers` array. These are all of the service provider classes that will be loaded for your application. By default, a set of Laravel core service providers are listed in this array. These providers bootstrap the core Laravel components, such as the mailer, queue, cache, and others. Many of these providers are \"deferred\" providers, meaning they will not be loaded on every request, but only when the services they provide are actually needed.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":11,"to":17}}}}],["2939",{"pageContent":"In this overview, you will learn how to write your own service providers and register them with your Laravel application.\n\n> **Note**  \n> If you would like to learn more about how Laravel handles requests and works internally, check out our documentation on the Laravel [request lifecycle](/docs/{{version}}/lifecycle).\n\n<a name=\"writing-service-providers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":19,"to":24}}}}],["2940",{"pageContent":"Writing Service Providers\n\nAll service providers extend the `Illuminate\\Support\\ServiceProvider` class. Most service providers contain a `register` and a `boot` method. Within the `register` method, you should **only bind things into the [service container](/docs/{{version}}/container)**. You should never attempt to register any event listeners, routes, or any other piece of functionality within the `register` method.\n\nThe Artisan CLI can generate a new provider via the `make:provider` command:\n\n```shell\nphp artisan make:provider RiakServiceProvider\n```\n\n<a name=\"the-register-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":25,"to":35}}}}],["2941",{"pageContent":"The Register Method\n\nAs mentioned previously, within the `register` method, you should only bind things into the [service container](/docs/{{version}}/container). You should never attempt to register any event listeners, routes, or any other piece of functionality within the `register` method. Otherwise, you may accidentally use a service that is provided by a service provider which has not loaded yet.\n\nLet's take a look at a basic service provider. Within any of your service provider methods, you always have access to the `$app` property which provides access to the service container:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Services\\Riak\\Connection;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Support\\ServiceProvider;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":36,"to":48}}}}],["2942",{"pageContent":"<?php\n\n    namespace App\\Providers;\n\n    use App\\Services\\Riak\\Connection;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class RiakServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            $this->app->singleton(Connection::class, function (Application $app) {\n                return new Connection(config('riak'));\n            });\n        }\n    }\n\nThis service provider only defines a `register` method, and uses that method to define an implementation of `App\\Services\\Riak\\Connection` in the service container. If you're not yet familiar with Laravel's service container, check out [its documentation](/docs/{{version}}/container).\n\n<a name=\"the-bindings-and-singletons-properties\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":48,"to":71}}}}],["2943",{"pageContent":"The `bindings` And `singletons` Properties\n\nIf your service provider registers many simple bindings, you may wish to use the `bindings` and `singletons` properties instead of manually registering each container binding. When the service provider is loaded by the framework, it will automatically check for these properties and register their bindings:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Contracts\\DowntimeNotifier;\n    use App\\Contracts\\ServerProvider;\n    use App\\Services\\DigitalOceanServerProvider;\n    use App\\Services\\PingdomDowntimeNotifier;\n    use App\\Services\\ServerToolsProvider;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * All of the container bindings that should be registered.\n         *\n         * @var array\n         */\n        public $bindings = [\n            ServerProvider::class => DigitalOceanServerProvider::class,\n        ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":72,"to":96}}}}],["2944",{"pageContent":"/**\n         * All of the container singletons that should be registered.\n         *\n         * @var array\n         */\n        public $singletons = [\n            DowntimeNotifier::class => PingdomDowntimeNotifier::class,\n            ServerProvider::class => ServerToolsProvider::class,\n        ];\n    }\n\n<a name=\"the-boot-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":98,"to":109}}}}],["2945",{"pageContent":"The Boot Method\n\nSo, what if we need to register a [view composer](/docs/{{version}}/views#view-composers) within our service provider? This should be done within the `boot` method. **This method is called after all other service providers have been registered**, meaning you have access to all other services that have been registered by the framework:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\View;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class ComposerServiceProvider extends ServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            View::composer('view', function () {\n                // ...\n            });\n        }\n    }\n\n<a name=\"boot-method-dependency-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":110,"to":134}}}}],["2946",{"pageContent":"Boot Method Dependency Injection\n\nYou may type-hint dependencies for your service provider's `boot` method. The [service container](/docs/{{version}}/container) will automatically inject any dependencies you need:\n\n    use Illuminate\\Contracts\\Routing\\ResponseFactory;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(ResponseFactory $response): void\n    {\n        $response->macro('serialized', function (mixed $value) {\n            // ...\n        });\n    }\n\n<a name=\"registering-providers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":135,"to":151}}}}],["2947",{"pageContent":"Registering Providers\n\nAll service providers are registered in the `config/app.php` configuration file. This file contains a `providers` array where you can list the class names of your service providers. By default, a set of Laravel core service providers are registered in this array. The default providers bootstrap the core Laravel components, such as the mailer, queue, cache, and others.\n\nTo register your provider, add it to the array:\n\n    'providers' => ServiceProvider::defaultProviders()->merge([\n        // Other Service Providers\n\n        App\\Providers\\ComposerServiceProvider::class,\n    ])->toArray(),\n\n<a name=\"deferred-providers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":152,"to":164}}}}],["2948",{"pageContent":"Deferred Providers\n\nIf your provider is **only** registering bindings in the [service container](/docs/{{version}}/container), you may choose to defer its registration until one of the registered bindings is actually needed. Deferring the loading of such a provider will improve the performance of your application, since it is not loaded from the filesystem on every request.\n\nLaravel compiles and stores a list of all of the services supplied by deferred service providers, along with the name of its service provider class. Then, only when you attempt to resolve one of these services does Laravel load the service provider.\n\nTo defer the loading of a provider, implement the `\\Illuminate\\Contracts\\Support\\DeferrableProvider` interface and define a `provides` method. The `provides` method should return the service container bindings registered by the provider:\n\n    <?php\n\n    namespace App\\Providers;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":165,"to":175}}}}],["2949",{"pageContent":"<?php\n\n    namespace App\\Providers;\n\n    use App\\Services\\Riak\\Connection;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Contracts\\Support\\DeferrableProvider;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class RiakServiceProvider extends ServiceProvider implements DeferrableProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            $this->app->singleton(Connection::class, function (Application $app) {\n                return new Connection($app['config']['riak']);\n            });\n        }\n\n        /**\n         * Get the services provided by the provider.\n         *\n         * @return array<int, string>\n         */\n        public function provides(): array\n        {\n            return [Connection::class];\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/providers.md","loc":{"lines":{"from":175,"to":205}}}}],["2950",{"pageContent":"# Database: Query Builder","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":1,"to":1}}}}],["2951",{"pageContent":"- [Introduction](#introduction)\n- [Running Database Queries](#running-database-queries)\n    - [Chunking Results](#chunking-results)\n    - [Streaming Results Lazily](#streaming-results-lazily)\n    - [Aggregates](#aggregates)\n- [Select Statements](#select-statements)\n- [Raw Expressions](#raw-expressions)\n- [Joins](#joins)\n- [Unions](#unions)\n- [Basic Where Clauses](#basic-where-clauses)\n    - [Where Clauses](#where-clauses)\n    - [Or Where Clauses](#or-where-clauses)\n    - [Where Not Clauses](#where-not-clauses)\n    - [JSON Where Clauses](#json-where-clauses)\n    - [Additional Where Clauses](#additional-where-clauses)\n    - [Logical Grouping](#logical-grouping)\n- [Advanced Where Clauses](#advanced-where-clauses)\n    - [Where Exists Clauses](#where-exists-clauses)\n    - [Subquery Where Clauses](#subquery-where-clauses)\n    - [Full Text Where Clauses](#full-text-where-clauses)\n- [Ordering, Grouping, Limit & Offset](#ordering-grouping-limit-and-offset)\n    - [Ordering](#ordering)\n    - [Grouping](#grouping)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":3,"to":25}}}}],["2952",{"pageContent":"- [Full Text Where Clauses](#full-text-where-clauses)\n- [Ordering, Grouping, Limit & Offset](#ordering-grouping-limit-and-offset)\n    - [Ordering](#ordering)\n    - [Grouping](#grouping)\n    - [Limit & Offset](#limit-and-offset)\n- [Conditional Clauses](#conditional-clauses)\n- [Insert Statements](#insert-statements)\n    - [Upserts](#upserts)\n- [Update Statements](#update-statements)\n    - [Updating JSON Columns](#updating-json-columns)\n    - [Increment & Decrement](#increment-and-decrement)\n- [Delete Statements](#delete-statements)\n- [Pessimistic Locking](#pessimistic-locking)\n- [Debugging](#debugging)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":25,"to":38}}}}],["2953",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":40,"to":40}}}}],["2954",{"pageContent":"Introduction\n\nLaravel's database query builder provides a convenient, fluent interface to creating and running database queries. It can be used to perform most database operations in your application and works perfectly with all of Laravel's supported database systems.\n\nThe Laravel query builder uses PDO parameter binding to protect your application against SQL injection attacks. There is no need to clean or sanitize strings passed to the query builder as query bindings.\n\n> **Warning**  \n> PDO does not support binding column names. Therefore, you should never allow user input to dictate the column names referenced by your queries, including \"order by\" columns.\n\n<a name=\"running-database-queries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":41,"to":50}}}}],["2955",{"pageContent":"Running Database Queries\n\n<a name=\"retrieving-all-rows-from-a-table\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":51,"to":53}}}}],["2956",{"pageContent":"Retrieving All Rows From A Table\n\nYou may use the `table` method provided by the `DB` facade to begin a query. The `table` method returns a fluent query builder instance for the given table, allowing you to chain more constraints onto the query and then finally retrieve the results of the query using the `get` method:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show a list of all of the application's users.\n         */\n        public function index(): View\n        {\n            $users = DB::table('users')->get();\n\n            return view('user.index', ['users' => $users]);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":54,"to":77}}}}],["2957",{"pageContent":"return view('user.index', ['users' => $users]);\n        }\n    }\n\nThe `get` method returns an `Illuminate\\Support\\Collection` instance containing the results of the query where each result is an instance of the PHP `stdClass` object. You may access each column's value by accessing the column as a property of the object:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $users = DB::table('users')->get();\n\n    foreach ($users as $user) {\n        echo $user->name;\n    }\n\n> **Note**  \n> Laravel collections provide a variety of extremely powerful methods for mapping and reducing data. For more information on Laravel collections, check out the [collection documentation](/docs/{{version}}/collections).\n\n<a name=\"retrieving-a-single-row-column-from-a-table\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":77,"to":94}}}}],["2958",{"pageContent":"Retrieving A Single Row / Column From A Table\n\nIf you just need to retrieve a single row from a database table, you may use the `DB` facade's `first` method. This method will return a single `stdClass` object:\n\n    $user = DB::table('users')->where('name', 'John')->first();\n\n    return $user->email;\n\nIf you don't need an entire row, you may extract a single value from a record using the `value` method. This method will return the value of the column directly:\n\n    $email = DB::table('users')->where('name', 'John')->value('email');\n\nTo retrieve a single row by its `id` column value, use the `find` method:\n\n    $user = DB::table('users')->find(3);\n\n<a name=\"retrieving-a-list-of-column-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":95,"to":111}}}}],["2959",{"pageContent":"Retrieving A List Of Column Values\n\nIf you would like to retrieve an `Illuminate\\Support\\Collection` instance containing the values of a single column, you may use the `pluck` method. In this example, we'll retrieve a collection of user titles:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $titles = DB::table('users')->pluck('title');\n\n    foreach ($titles as $title) {\n        echo $title;\n    }\n\n You may specify the column that the resulting collection should use as its keys by providing a second argument to the `pluck` method:\n\n    $titles = DB::table('users')->pluck('title', 'name');\n\n    foreach ($titles as $name => $title) {\n        echo $title;\n    }\n\n<a name=\"chunking-results\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":112,"to":132}}}}],["2960",{"pageContent":"Chunking Results\n\nIf you need to work with thousands of database records, consider using the `chunk` method provided by the `DB` facade. This method retrieves a small chunk of results at a time and feeds each chunk into a closure for processing. For example, let's retrieve the entire `users` table in chunks of 100 records at a time:\n\n    use Illuminate\\Support\\Collection;\n    use Illuminate\\Support\\Facades\\DB;\n\n    DB::table('users')->orderBy('id')->chunk(100, function (Collection $users) {\n        foreach ($users as $user) {\n            // ...\n        }\n    });\n\nYou may stop further chunks from being processed by returning `false` from the closure:\n\n    DB::table('users')->orderBy('id')->chunk(100, function (Collection $users) {\n        // Process the records...\n\n        return false;\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":133,"to":152}}}}],["2961",{"pageContent":"DB::table('users')->orderBy('id')->chunk(100, function (Collection $users) {\n        // Process the records...\n\n        return false;\n    });\n\nIf you are updating database records while chunking results, your chunk results could change in unexpected ways. If you plan to update the retrieved records while chunking, it is always best to use the `chunkById` method instead. This method will automatically paginate the results based on the record's primary key:\n\n    DB::table('users')->where('active', false)\n        ->chunkById(100, function (Collection $users) {\n            foreach ($users as $user) {\n                DB::table('users')\n                    ->where('id', $user->id)\n                    ->update(['active' => true]);\n            }\n        });\n\n> **Warning**  \n> When updating or deleting records inside the chunk callback, any changes to the primary key or foreign keys could affect the chunk query. This could potentially result in records not being included in the chunked results.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":152,"to":170}}}}],["2962",{"pageContent":"<a name=\"streaming-results-lazily\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":172,"to":172}}}}],["2963",{"pageContent":"Streaming Results Lazily\n\nThe `lazy` method works similarly to [the `chunk` method](#chunking-results) in the sense that it executes the query in chunks. However, instead of passing each chunk into a callback, the `lazy()` method returns a [`LazyCollection`](/docs/{{version}}/collections#lazy-collections), which lets you interact with the results as a single stream:\n\n```php\nuse Illuminate\\Support\\Facades\\DB;\n\nDB::table('users')->orderBy('id')->lazy()->each(function (object $user) {\n    // ...\n});\n```\n\nOnce again, if you plan to update the retrieved records while iterating over them, it is best to use the `lazyById` or `lazyByIdDesc` methods instead. These methods will automatically paginate the results based on the record's primary key:\n\n```php\nDB::table('users')->where('active', false)\n    ->lazyById()->each(function (object $user) {\n        DB::table('users')\n            ->where('id', $user->id)\n            ->update(['active' => true]);\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":173,"to":193}}}}],["2964",{"pageContent":"> **Warning**  \n> When updating or deleting records while iterating over them, any changes to the primary key or foreign keys could affect the chunk query. This could potentially result in records not being included in the results.\n\n<a name=\"aggregates\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":196,"to":199}}}}],["2965",{"pageContent":"Aggregates\n\nThe query builder also provides a variety of methods for retrieving aggregate values like `count`, `max`, `min`, `avg`, and `sum`. You may call any of these methods after constructing your query:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $users = DB::table('users')->count();\n\n    $price = DB::table('orders')->max('price');\n\nOf course, you may combine these methods with other clauses to fine-tune how your aggregate value is calculated:\n\n    $price = DB::table('orders')\n                    ->where('finalized', 1)\n                    ->avg('price');\n\n<a name=\"determining-if-records-exist\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":200,"to":216}}}}],["2966",{"pageContent":"Determining If Records Exist\n\nInstead of using the `count` method to determine if any records exist that match your query's constraints, you may use the `exists` and `doesntExist` methods:\n\n    if (DB::table('orders')->where('finalized', 1)->exists()) {\n        // ...\n    }\n\n    if (DB::table('orders')->where('finalized', 1)->doesntExist()) {\n        // ...\n    }\n\n<a name=\"select-statements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":217,"to":229}}}}],["2967",{"pageContent":"Select Statements\n\n<a name=\"specifying-a-select-clause\"></a>\n#### Specifying A Select Clause\n\nYou may not always want to select all columns from a database table. Using the `select` method, you can specify a custom \"select\" clause for the query:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $users = DB::table('users')\n                ->select('name', 'email as user_email')\n                ->get();\n\nThe `distinct` method allows you to force the query to return distinct results:\n\n    $users = DB::table('users')->distinct()->get();\n\nIf you already have a query builder instance and you wish to add a column to its existing select clause, you may use the `addSelect` method:\n\n    $query = DB::table('users')->select('name');\n\n    $users = $query->addSelect('age')->get();\n\n<a name=\"raw-expressions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":230,"to":253}}}}],["2968",{"pageContent":"Raw Expressions\n\nSometimes you may need to insert an arbitrary string into a query. To create a raw string expression, you may use the `raw` method provided by the `DB` facade:\n\n    $users = DB::table('users')\n                 ->select(DB::raw('count(*) as user_count, status'))\n                 ->where('status', '<>', 1)\n                 ->groupBy('status')\n                 ->get();\n\n> **Warning**  \n> Raw statements will be injected into the query as strings, so you should be extremely careful to avoid creating SQL injection vulnerabilities.\n\n<a name=\"raw-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":254,"to":267}}}}],["2969",{"pageContent":"Raw Methods\n\nInstead of using the `DB::raw` method, you may also use the following methods to insert a raw expression into various parts of your query. **Remember, Laravel can not guarantee that any query using raw expressions is protected against SQL injection vulnerabilities.**\n\n<a name=\"selectraw\"></a>\n#### `selectRaw`\n\nThe `selectRaw` method can be used in place of `addSelect(DB::raw(/* ... */))`. This method accepts an optional array of bindings as its second argument:\n\n    $orders = DB::table('orders')\n                    ->selectRaw('price * ? as price_with_tax', [1.0825])\n                    ->get();\n\n<a name=\"whereraw-orwhereraw\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":268,"to":281}}}}],["2970",{"pageContent":"`whereRaw / orWhereRaw`\n\nThe `whereRaw` and `orWhereRaw` methods can be used to inject a raw \"where\" clause into your query. These methods accept an optional array of bindings as their second argument:\n\n    $orders = DB::table('orders')\n                    ->whereRaw('price > IF(state = \"TX\", ?, 100)', [200])\n                    ->get();\n\n<a name=\"havingraw-orhavingraw\"></a>\n#### `havingRaw / orHavingRaw`\n\nThe `havingRaw` and `orHavingRaw` methods may be used to provide a raw string as the value of the \"having\" clause. These methods accept an optional array of bindings as their second argument:\n\n    $orders = DB::table('orders')\n                    ->select('department', DB::raw('SUM(price) as total_sales'))\n                    ->groupBy('department')\n                    ->havingRaw('SUM(price) > ?', [2500])\n                    ->get();\n\n<a name=\"orderbyraw\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":282,"to":301}}}}],["2971",{"pageContent":"`orderByRaw`\n\nThe `orderByRaw` method may be used to provide a raw string as the value of the \"order by\" clause:\n\n    $orders = DB::table('orders')\n                    ->orderByRaw('updated_at - created_at DESC')\n                    ->get();\n\n<a name=\"groupbyraw\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":302,"to":310}}}}],["2972",{"pageContent":"`groupByRaw`\n\nThe `groupByRaw` method may be used to provide a raw string as the value of the `group by` clause:\n\n    $orders = DB::table('orders')\n                    ->select('city', 'state')\n                    ->groupByRaw('city, state')\n                    ->get();\n\n<a name=\"joins\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":311,"to":320}}}}],["2973",{"pageContent":"Joins\n\n<a name=\"inner-join-clause\"></a>\n#### Inner Join Clause\n\nThe query builder may also be used to add join clauses to your queries. To perform a basic \"inner join\", you may use the `join` method on a query builder instance. The first argument passed to the `join` method is the name of the table you need to join to, while the remaining arguments specify the column constraints for the join. You may even join multiple tables in a single query:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $users = DB::table('users')\n                ->join('contacts', 'users.id', '=', 'contacts.user_id')\n                ->join('orders', 'users.id', '=', 'orders.user_id')\n                ->select('users.*', 'contacts.phone', 'orders.price')\n                ->get();\n\n<a name=\"left-join-right-join-clause\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":321,"to":336}}}}],["2974",{"pageContent":"Left Join / Right Join Clause\n\nIf you would like to perform a \"left join\" or \"right join\" instead of an \"inner join\", use the `leftJoin` or `rightJoin` methods. These methods have the same signature as the `join` method:\n\n    $users = DB::table('users')\n                ->leftJoin('posts', 'users.id', '=', 'posts.user_id')\n                ->get();\n\n    $users = DB::table('users')\n                ->rightJoin('posts', 'users.id', '=', 'posts.user_id')\n                ->get();\n\n<a name=\"cross-join-clause\"></a>\n#### Cross Join Clause\n\nYou may use the `crossJoin` method to perform a \"cross join\". Cross joins generate a cartesian product between the first table and the joined table:\n\n    $sizes = DB::table('sizes')\n                ->crossJoin('colors')\n                ->get();\n\n<a name=\"advanced-join-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":337,"to":358}}}}],["2975",{"pageContent":"Advanced Join Clauses\n\nYou may also specify more advanced join clauses. To get started, pass a closure as the second argument to the `join` method. The closure will receive a `Illuminate\\Database\\Query\\JoinClause` instance which allows you to specify constraints on the \"join\" clause:\n\n    DB::table('users')\n            ->join('contacts', function (JoinClause $join) {\n                $join->on('users.id', '=', 'contacts.user_id')->orOn(/* ... */);\n            })\n            ->get();\n\nIf you would like to use a \"where\" clause on your joins, you may use the `where` and `orWhere` methods provided by the `JoinClause` instance. Instead of comparing two columns, these methods will compare the column against a value:\n\n    DB::table('users')\n            ->join('contacts', function (JoinClause $join) {\n                $join->on('users.id', '=', 'contacts.user_id')\n                     ->where('contacts.user_id', '>', 5);\n            })\n            ->get();\n\n<a name=\"subquery-joins\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":359,"to":378}}}}],["2976",{"pageContent":"Subquery Joins\n\nYou may use the `joinSub`, `leftJoinSub`, and `rightJoinSub` methods to join a query to a subquery. Each of these methods receives three arguments: the subquery, its table alias, and a closure that defines the related columns. In this example, we will retrieve a collection of users where each user record also contains the `created_at` timestamp of the user's most recently published blog post:\n\n    $latestPosts = DB::table('posts')\n                       ->select('user_id', DB::raw('MAX(created_at) as last_post_created_at'))\n                       ->where('is_published', true)\n                       ->groupBy('user_id');\n\n    $users = DB::table('users')\n            ->joinSub($latestPosts, 'latest_posts', function (JoinClause $join) {\n                $join->on('users.id', '=', 'latest_posts.user_id');\n            })->get();\n\n<a name=\"unions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":379,"to":393}}}}],["2977",{"pageContent":"Unions\n\nThe query builder also provides a convenient method to \"union\" two or more queries together. For example, you may create an initial query and use the `union` method to union it with more queries:\n\n    use Illuminate\\Support\\Facades\\DB;\n\n    $first = DB::table('users')\n                ->whereNull('first_name');\n\n    $users = DB::table('users')\n                ->whereNull('last_name')\n                ->union($first)\n                ->get();\n\nIn addition to the `union` method, the query builder provides a `unionAll` method. Queries that are combined using the `unionAll` method will not have their duplicate results removed. The `unionAll` method has the same method signature as the `union` method.\n\n<a name=\"basic-where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":394,"to":410}}}}],["2978",{"pageContent":"Basic Where Clauses\n\n<a name=\"where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":411,"to":413}}}}],["2979",{"pageContent":"Where Clauses\n\nYou may use the query builder's `where` method to add \"where\" clauses to the query. The most basic call to the `where` method requires three arguments. The first argument is the name of the column. The second argument is an operator, which can be any of the database's supported operators. The third argument is the value to compare against the column's value.\n\nFor example, the following query retrieves users where the value of the `votes` column is equal to `100` and the value of the `age` column is greater than `35`:\n\n    $users = DB::table('users')\n                    ->where('votes', '=', 100)\n                    ->where('age', '>', 35)\n                    ->get();\n\nFor convenience, if you want to verify that a column is `=` to a given value, you may pass the value as the second argument to the `where` method. Laravel will assume you would like to use the `=` operator:\n\n    $users = DB::table('users')->where('votes', 100)->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":414,"to":427}}}}],["2980",{"pageContent":"$users = DB::table('users')->where('votes', 100)->get();\n\nAs previously mentioned, you may use any operator that is supported by your database system:\n\n    $users = DB::table('users')\n                    ->where('votes', '>=', 100)\n                    ->get();\n\n    $users = DB::table('users')\n                    ->where('votes', '<>', 100)\n                    ->get();\n\n    $users = DB::table('users')\n                    ->where('name', 'like', 'T%')\n                    ->get();\n\nYou may also pass an array of conditions to the `where` function. Each element of the array should be an array containing the three arguments typically passed to the `where` method:\n\n    $users = DB::table('users')->where([\n        ['status', '=', '1'],\n        ['subscribed', '<>', '1'],\n    ])->get();\n\n> **Warning**  \n> PDO does not support binding column names. Therefore, you should never allow user input to dictate the column names referenced by your queries, including \"order by\" columns.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":427,"to":451}}}}],["2981",{"pageContent":"> **Warning**  \n> PDO does not support binding column names. Therefore, you should never allow user input to dictate the column names referenced by your queries, including \"order by\" columns.\n\n<a name=\"or-where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":451,"to":454}}}}],["2982",{"pageContent":"Or Where Clauses\n\nWhen chaining together calls to the query builder's `where` method, the \"where\" clauses will be joined together using the `and` operator. However, you may use the `orWhere` method to join a clause to the query using the `or` operator. The `orWhere` method accepts the same arguments as the `where` method:\n\n    $users = DB::table('users')\n                        ->where('votes', '>', 100)\n                        ->orWhere('name', 'John')\n                        ->get();\n\nIf you need to group an \"or\" condition within parentheses, you may pass a closure as the first argument to the `orWhere` method:\n\n    $users = DB::table('users')\n                ->where('votes', '>', 100)\n                ->orWhere(function (Builder $query) {\n                    $query->where('name', 'Abigail')\n                          ->where('votes', '>', 50);\n                })\n                ->get();\n\nThe example above will produce the following SQL:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":455,"to":474}}}}],["2983",{"pageContent":"The example above will produce the following SQL:\n\n```sql\nselect * from users where votes > 100 or (name = 'Abigail' and votes > 50)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":474,"to":477}}}}],["2984",{"pageContent":"> **Warning**  \n> You should always group `orWhere` calls in order to avoid unexpected behavior when global scopes are applied.\n\n<a name=\"where-not-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":480,"to":483}}}}],["2985",{"pageContent":"Where Not Clauses\n\nThe `whereNot` and `orWhereNot` methods may be used to negate a given group of query constraints. For example, the following query excludes products that are on clearance or which have a price that is less than ten:\n\n    $products = DB::table('products')\n                    ->whereNot(function (Builder $query) {\n                        $query->where('clearance', true)\n                              ->orWhere('price', '<', 10);\n                    })\n                    ->get();\n\n<a name=\"json-where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":484,"to":495}}}}],["2986",{"pageContent":"JSON Where Clauses\n\nLaravel also supports querying JSON column types on databases that provide support for JSON column types. Currently, this includes MySQL 5.7+, PostgreSQL, SQL Server 2016, and SQLite 3.39.0 (with the [JSON1 extension](https://www.sqlite.org/json1.html)). To query a JSON column, use the `->` operator:\n\n    $users = DB::table('users')\n                    ->where('preferences->dining->meal', 'salad')\n                    ->get();\n\nYou may use `whereJsonContains` to query JSON arrays. This feature is not supported by SQLite database versions less than 3.38.0:\n\n    $users = DB::table('users')\n                    ->whereJsonContains('options->languages', 'en')\n                    ->get();\n\nIf your application uses the MySQL or PostgreSQL databases, you may pass an array of values to the `whereJsonContains` method:\n\n    $users = DB::table('users')\n                    ->whereJsonContains('options->languages', ['en', 'de'])\n                    ->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":496,"to":514}}}}],["2987",{"pageContent":"$users = DB::table('users')\n                    ->whereJsonContains('options->languages', ['en', 'de'])\n                    ->get();\n\nYou may use `whereJsonLength` method to query JSON arrays by their length:\n\n    $users = DB::table('users')\n                    ->whereJsonLength('options->languages', 0)\n                    ->get();\n\n    $users = DB::table('users')\n                    ->whereJsonLength('options->languages', '>', 1)\n                    ->get();\n\n<a name=\"additional-where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":514,"to":528}}}}],["2988",{"pageContent":"Additional Where Clauses\n\n**whereBetween / orWhereBetween**\n\nThe `whereBetween` method verifies that a column's value is between two values:\n\n    $users = DB::table('users')\n               ->whereBetween('votes', [1, 100])\n               ->get();\n\n**whereNotBetween / orWhereNotBetween**\n\nThe `whereNotBetween` method verifies that a column's value lies outside of two values:\n\n    $users = DB::table('users')\n                        ->whereNotBetween('votes', [1, 100])\n                        ->get();\n\n**whereBetweenColumns / whereNotBetweenColumns / orWhereBetweenColumns / orWhereNotBetweenColumns**\n\nThe `whereBetweenColumns` method verifies that a column's value is between the two values of two columns in the same table row:\n\n    $patients = DB::table('patients')\n                           ->whereBetweenColumns('weight', ['minimum_allowed_weight', 'maximum_allowed_weight'])\n                           ->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":529,"to":553}}}}],["2989",{"pageContent":"$patients = DB::table('patients')\n                           ->whereBetweenColumns('weight', ['minimum_allowed_weight', 'maximum_allowed_weight'])\n                           ->get();\n\nThe `whereNotBetweenColumns` method verifies that a column's value lies outside the two values of two columns in the same table row:\n\n    $patients = DB::table('patients')\n                           ->whereNotBetweenColumns('weight', ['minimum_allowed_weight', 'maximum_allowed_weight'])\n                           ->get();\n\n**whereIn / whereNotIn / orWhereIn / orWhereNotIn**\n\nThe `whereIn` method verifies that a given column's value is contained within the given array:\n\n    $users = DB::table('users')\n                        ->whereIn('id', [1, 2, 3])\n                        ->get();\n\nThe `whereNotIn` method verifies that the given column's value is not contained in the given array:\n\n    $users = DB::table('users')\n                        ->whereNotIn('id', [1, 2, 3])\n                        ->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":553,"to":575}}}}],["2990",{"pageContent":"$users = DB::table('users')\n                        ->whereNotIn('id', [1, 2, 3])\n                        ->get();\n\nYou may also provide a query object as the `whereIn` method's second argument:\n\n    $activeUsers = DB::table('users')->select('id')->where('is_active', 1);\n\n    $users = DB::table('comments')\n                        ->whereIn('user_id', $activeUsers)\n                        ->get();\n\nThe example above will produce the following SQL:\n\n```sql\nselect * from comments where user_id in (\n    select id\n    from users\n    where is_active = 1\n)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":575,"to":594}}}}],["2991",{"pageContent":"> **Warning**  \n> If you are adding a large array of integer bindings to your query, the `whereIntegerInRaw` or `whereIntegerNotInRaw` methods may be used to greatly reduce your memory usage.\n\n**whereNull / whereNotNull / orWhereNull / orWhereNotNull**\n\nThe `whereNull` method verifies that the value of the given column is `NULL`:\n\n    $users = DB::table('users')\n                    ->whereNull('updated_at')\n                    ->get();\n\nThe `whereNotNull` method verifies that the column's value is not `NULL`:\n\n    $users = DB::table('users')\n                    ->whereNotNull('updated_at')\n                    ->get();\n\n**whereDate / whereMonth / whereDay / whereYear / whereTime**\n\nThe `whereDate` method may be used to compare a column's value against a date:\n\n    $users = DB::table('users')\n                    ->whereDate('created_at', '2016-12-31')\n                    ->get();\n\nThe `whereMonth` method may be used to compare a column's value against a specific month:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":597,"to":622}}}}],["2992",{"pageContent":"The `whereMonth` method may be used to compare a column's value against a specific month:\n\n    $users = DB::table('users')\n                    ->whereMonth('created_at', '12')\n                    ->get();\n\nThe `whereDay` method may be used to compare a column's value against a specific day of the month:\n\n    $users = DB::table('users')\n                    ->whereDay('created_at', '31')\n                    ->get();\n\nThe `whereYear` method may be used to compare a column's value against a specific year:\n\n    $users = DB::table('users')\n                    ->whereYear('created_at', '2016')\n                    ->get();\n\nThe `whereTime` method may be used to compare a column's value against a specific time:\n\n    $users = DB::table('users')\n                    ->whereTime('created_at', '=', '11:20:45')\n                    ->get();\n\n**whereColumn / orWhereColumn**\n\nThe `whereColumn` method may be used to verify that two columns are equal:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":622,"to":648}}}}],["2993",{"pageContent":"**whereColumn / orWhereColumn**\n\nThe `whereColumn` method may be used to verify that two columns are equal:\n\n    $users = DB::table('users')\n                    ->whereColumn('first_name', 'last_name')\n                    ->get();\n\nYou may also pass a comparison operator to the `whereColumn` method:\n\n    $users = DB::table('users')\n                    ->whereColumn('updated_at', '>', 'created_at')\n                    ->get();\n\nYou may also pass an array of column comparisons to the `whereColumn` method. These conditions will be joined using the `and` operator:\n\n    $users = DB::table('users')\n                    ->whereColumn([\n                        ['first_name', '=', 'last_name'],\n                        ['updated_at', '>', 'created_at'],\n                    ])->get();\n\n<a name=\"logical-grouping\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":648,"to":670}}}}],["2994",{"pageContent":"Logical Grouping\n\nSometimes you may need to group several \"where\" clauses within parentheses in order to achieve your query's desired logical grouping. In fact, you should generally always group calls to the `orWhere` method in parentheses in order to avoid unexpected query behavior. To accomplish this, you may pass a closure to the `where` method:\n\n    $users = DB::table('users')\n               ->where('name', '=', 'John')\n               ->where(function (Builder $query) {\n                   $query->where('votes', '>', 100)\n                         ->orWhere('title', '=', 'Admin');\n               })\n               ->get();\n\nAs you can see, passing a closure into the `where` method instructs the query builder to begin a constraint group. The closure will receive a query builder instance which you can use to set the constraints that should be contained within the parenthesis group. The example above will produce the following SQL:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":671,"to":683}}}}],["2995",{"pageContent":"```sql\nselect * from users where name = 'John' and (votes > 100 or title = 'Admin')","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":685,"to":686}}}}],["2996",{"pageContent":"> **Warning**  \n> You should always group `orWhere` calls in order to avoid unexpected behavior when global scopes are applied.\n\n<a name=\"advanced-where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":689,"to":692}}}}],["2997",{"pageContent":"Advanced Where Clauses\n\n<a name=\"where-exists-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":693,"to":695}}}}],["2998",{"pageContent":"Where Exists Clauses\n\nThe `whereExists` method allows you to write \"where exists\" SQL clauses. The `whereExists` method accepts a closure which will receive a query builder instance, allowing you to define the query that should be placed inside of the \"exists\" clause:\n\n    $users = DB::table('users')\n               ->whereExists(function (Builder $query) {\n                   $query->select(DB::raw(1))\n                         ->from('orders')\n                         ->whereColumn('orders.user_id', 'users.id');\n               })\n               ->get();\n\nAlternatively, you may provide a query object to the `whereExists` method instead of a closure:\n\n    $orders = DB::table('orders')\n                    ->select(DB::raw(1))\n                    ->whereColumn('orders.user_id', 'users.id');\n\n    $users = DB::table('users')\n                        ->whereExists($orders)\n                        ->get();\n\nBoth of the examples above will produce the following SQL:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":696,"to":718}}}}],["2999",{"pageContent":"$users = DB::table('users')\n                        ->whereExists($orders)\n                        ->get();\n\nBoth of the examples above will produce the following SQL:\n\n```sql\nselect * from users\nwhere exists (\n    select 1\n    from orders\n    where orders.user_id = users.id\n)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":718,"to":730}}}}],["3000",{"pageContent":"<a name=\"subquery-where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":733,"to":733}}}}],["3001",{"pageContent":"Subquery Where Clauses\n\nSometimes you may need to construct a \"where\" clause that compares the results of a subquery to a given value. You may accomplish this by passing a closure and a value to the `where` method. For example, the following query will retrieve all users who have a recent \"membership\" of a given type;\n\n    use App\\Models\\User;\n    use Illuminate\\Database\\Query\\Builder;\n\n    $users = User::where(function (Builder $query) {\n        $query->select('type')\n            ->from('membership')\n            ->whereColumn('membership.user_id', 'users.id')\n            ->orderByDesc('membership.start_date')\n            ->limit(1);\n    }, 'Pro')->get();\n\nOr, you may need to construct a \"where\" clause that compares a column to the results of a subquery. You may accomplish this by passing a column, operator, and closure to the `where` method. For example, the following query will retrieve all income records where the amount is less than average;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":734,"to":749}}}}],["3002",{"pageContent":"use App\\Models\\Income;\n    use Illuminate\\Database\\Query\\Builder;\n\n    $incomes = Income::where('amount', '<', function (Builder $query) {\n        $query->selectRaw('avg(i.amount)')->from('incomes as i');\n    })->get();\n\n<a name=\"full-text-where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":751,"to":758}}}}],["3003",{"pageContent":"Full Text Where Clauses\n\n> **Warning**  \n> Full text where clauses are currently supported by MySQL and PostgreSQL.\n\nThe `whereFullText` and `orWhereFullText` methods may be used to add full text \"where\" clauses to a query for columns that have [full text indexes](/docs/{{version}}/migrations#available-index-types). These methods will be transformed into the appropriate SQL for the underlying database system by Laravel. For example, a `MATCH AGAINST` clause will be generated for applications utilizing MySQL:\n\n    $users = DB::table('users')\n               ->whereFullText('bio', 'web developer')\n               ->get();\n\n<a name=\"ordering-grouping-limit-and-offset\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":759,"to":770}}}}],["3004",{"pageContent":"Ordering, Grouping, Limit & Offset\n\n<a name=\"ordering\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":771,"to":773}}}}],["3005",{"pageContent":"Ordering\n\n<a name=\"orderby\"></a>\n#### The `orderBy` Method\n\nThe `orderBy` method allows you to sort the results of the query by a given column. The first argument accepted by the `orderBy` method should be the column you wish to sort by, while the second argument determines the direction of the sort and may be either `asc` or `desc`:\n\n    $users = DB::table('users')\n                    ->orderBy('name', 'desc')\n                    ->get();\n\nTo sort by multiple columns, you may simply invoke `orderBy` as many times as necessary:\n\n    $users = DB::table('users')\n                    ->orderBy('name', 'desc')\n                    ->orderBy('email', 'asc')\n                    ->get();\n\n<a name=\"latest-oldest\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":774,"to":792}}}}],["3006",{"pageContent":"The `latest` & `oldest` Methods\n\nThe `latest` and `oldest` methods allow you to easily order results by date. By default, the result will be ordered by the table's `created_at` column. Or, you may pass the column name that you wish to sort by:\n\n    $user = DB::table('users')\n                    ->latest()\n                    ->first();\n\n<a name=\"random-ordering\"></a>\n#### Random Ordering\n\nThe `inRandomOrder` method may be used to sort the query results randomly. For example, you may use this method to fetch a random user:\n\n    $randomUser = DB::table('users')\n                    ->inRandomOrder()\n                    ->first();\n\n<a name=\"removing-existing-orderings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":793,"to":810}}}}],["3007",{"pageContent":"Removing Existing Orderings\n\nThe `reorder` method removes all of the \"order by\" clauses that have previously been applied to the query:\n\n    $query = DB::table('users')->orderBy('name');\n\n    $unorderedUsers = $query->reorder()->get();\n\nYou may pass a column and direction when calling the `reorder` method in order to remove all existing \"order by\" clauses and apply an entirely new order to the query:\n\n    $query = DB::table('users')->orderBy('name');\n\n    $usersOrderedByEmail = $query->reorder('email', 'desc')->get();\n\n<a name=\"grouping\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":811,"to":825}}}}],["3008",{"pageContent":"Grouping\n\n<a name=\"groupby-having\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":826,"to":828}}}}],["3009",{"pageContent":"The `groupBy` & `having` Methods\n\nAs you might expect, the `groupBy` and `having` methods may be used to group the query results. The `having` method's signature is similar to that of the `where` method:\n\n    $users = DB::table('users')\n                    ->groupBy('account_id')\n                    ->having('account_id', '>', 100)\n                    ->get();\n\nYou can use the `havingBetween` method to filter the results within a given range:\n\n    $report = DB::table('orders')\n                    ->selectRaw('count(id) as number_of_orders, customer_id')\n                    ->groupBy('customer_id')\n                    ->havingBetween('number_of_orders', [5, 15])\n                    ->get();\n\nYou may pass multiple arguments to the `groupBy` method to group by multiple columns:\n\n    $users = DB::table('users')\n                    ->groupBy('first_name', 'status')\n                    ->having('account_id', '>', 100)\n                    ->get();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":829,"to":851}}}}],["3010",{"pageContent":"$users = DB::table('users')\n                    ->groupBy('first_name', 'status')\n                    ->having('account_id', '>', 100)\n                    ->get();\n\nTo build more advanced `having` statements, see the [`havingRaw`](#raw-methods) method.\n\n<a name=\"limit-and-offset\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":851,"to":858}}}}],["3011",{"pageContent":"Limit & Offset\n\n<a name=\"skip-take\"></a>\n#### The `skip` & `take` Methods\n\nYou may use the `skip` and `take` methods to limit the number of results returned from the query or to skip a given number of results in the query:\n\n    $users = DB::table('users')->skip(10)->take(5)->get();\n\nAlternatively, you may use the `limit` and `offset` methods. These methods are functionally equivalent to the `take` and `skip` methods, respectively:\n\n    $users = DB::table('users')\n                    ->offset(10)\n                    ->limit(5)\n                    ->get();\n\n<a name=\"conditional-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":859,"to":875}}}}],["3012",{"pageContent":"Conditional Clauses\n\nSometimes you may want certain query clauses to apply to a query based on another condition. For instance, you may only want to apply a `where` statement if a given input value is present on the incoming HTTP request. You may accomplish this using the `when` method:\n\n    $role = $request->string('role');\n\n    $users = DB::table('users')\n                    ->when($role, function (Builder $query, string $role) {\n                        $query->where('role_id', $role);\n                    })\n                    ->get();\n\nThe `when` method only executes the given closure when the first argument is `true`. If the first argument is `false`, the closure will not be executed. So, in the example above, the closure given to the `when` method will only be invoked if the `role` field is present on the incoming request and evaluates to `true`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":876,"to":888}}}}],["3013",{"pageContent":"You may pass another closure as the third argument to the `when` method. This closure will only execute if the first argument evaluates as `false`. To illustrate how this feature may be used, we will use it to configure the default ordering of a query:\n\n    $sortByVotes = $request->boolean('sort_by_votes');\n\n    $users = DB::table('users')\n                    ->when($sortByVotes, function (Builder $query, bool $sortByVotes) {\n                        $query->orderBy('votes');\n                    }, function (Builder $query) {\n                        $query->orderBy('name');\n                    })\n                    ->get();\n\n<a name=\"insert-statements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":890,"to":902}}}}],["3014",{"pageContent":"Insert Statements\n\nThe query builder also provides an `insert` method that may be used to insert records into the database table. The `insert` method accepts an array of column names and values:\n\n    DB::table('users')->insert([\n        'email' => 'kayla@example.com',\n        'votes' => 0\n    ]);\n\nYou may insert several records at once by passing an array of arrays. Each array represents a record that should be inserted into the table:\n\n    DB::table('users')->insert([\n        ['email' => 'picard@example.com', 'votes' => 0],\n        ['email' => 'janeway@example.com', 'votes' => 0],\n    ]);\n\nThe `insertOrIgnore` method will ignore errors while inserting records into the database. When using this method, you should be aware that duplicate record errors will be ignored and other types of errors may also be ignored depending on the database engine. For example, `insertOrIgnore` will [bypass MySQL's strict mode](https://dev.mysql.com/doc/refman/en/sql-mode.html#ignore-effect-on-execution):","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":903,"to":919}}}}],["3015",{"pageContent":"DB::table('users')->insertOrIgnore([\n        ['id' => 1, 'email' => 'sisko@example.com'],\n        ['id' => 2, 'email' => 'archer@example.com'],\n    ]);\n\nThe `insertUsing` method will insert new records into the table while using a subquery to determine the data that should be inserted:\n\n    DB::table('pruned_users')->insertUsing([\n        'id', 'name', 'email', 'email_verified_at'\n    ], DB::table('users')->select(\n        'id', 'name', 'email', 'email_verified_at'\n    )->where('updated_at', '<=', now()->subMonth()));\n\n<a name=\"auto-incrementing-ids\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":921,"to":934}}}}],["3016",{"pageContent":"Auto-Incrementing IDs\n\nIf the table has an auto-incrementing id, use the `insertGetId` method to insert a record and then retrieve the ID:\n\n    $id = DB::table('users')->insertGetId(\n        ['email' => 'john@example.com', 'votes' => 0]\n    );\n\n> **Warning**  \n> When using PostgreSQL the `insertGetId` method expects the auto-incrementing column to be named `id`. If you would like to retrieve the ID from a different \"sequence\", you may pass the column name as the second parameter to the `insertGetId` method.\n\n<a name=\"upserts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":935,"to":946}}}}],["3017",{"pageContent":"Upserts\n\nThe `upsert` method will insert records that do not exist and update the records that already exist with new values that you may specify. The method's first argument consists of the values to insert or update, while the second argument lists the column(s) that uniquely identify records within the associated table. The method's third and final argument is an array of columns that should be updated if a matching record already exists in the database:\n\n    DB::table('flights')->upsert(\n        [\n            ['departure' => 'Oakland', 'destination' => 'San Diego', 'price' => 99],\n            ['departure' => 'Chicago', 'destination' => 'New York', 'price' => 150]\n        ],\n        ['departure', 'destination'],\n        ['price']\n    );\n\nIn the example above, Laravel will attempt to insert two records. If a record already exists with the same `departure` and `destination` column values, Laravel will update that record's `price` column.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":947,"to":960}}}}],["3018",{"pageContent":"> **Warning**  \n> All databases except SQL Server require the columns in the second argument of the `upsert` method to have a \"primary\" or \"unique\" index. In addition, the MySQL database driver ignores the second argument of the `upsert` method and always uses the \"primary\" and \"unique\" indexes of the table to detect existing records.\n\n<a name=\"update-statements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":962,"to":965}}}}],["3019",{"pageContent":"Update Statements\n\nIn addition to inserting records into the database, the query builder can also update existing records using the `update` method. The `update` method, like the `insert` method, accepts an array of column and value pairs indicating the columns to be updated. The `update` method returns the number of affected rows. You may constrain the `update` query using `where` clauses:\n\n    $affected = DB::table('users')\n                  ->where('id', 1)\n                  ->update(['votes' => 1]);\n\n<a name=\"update-or-insert\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":966,"to":974}}}}],["3020",{"pageContent":"Update Or Insert\n\nSometimes you may want to update an existing record in the database or create it if no matching record exists. In this scenario, the `updateOrInsert` method may be used. The `updateOrInsert` method accepts two arguments: an array of conditions by which to find the record, and an array of column and value pairs indicating the columns to be updated.\n\nThe `updateOrInsert` method will attempt to locate a matching database record using the first argument's column and value pairs. If the record exists, it will be updated with the values in the second argument. If the record can not be found, a new record will be inserted with the merged attributes of both arguments:\n\n    DB::table('users')\n        ->updateOrInsert(\n            ['email' => 'john@example.com', 'name' => 'John'],\n            ['votes' => '2']\n        );\n\n<a name=\"updating-json-columns\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":975,"to":987}}}}],["3021",{"pageContent":"Updating JSON Columns\n\nWhen updating a JSON column, you should use `->` syntax to update the appropriate key in the JSON object. This operation is supported on MySQL 5.7+ and PostgreSQL 9.5+:\n\n    $affected = DB::table('users')\n                  ->where('id', 1)\n                  ->update(['options->enabled' => true]);\n\n<a name=\"increment-and-decrement\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":988,"to":996}}}}],["3022",{"pageContent":"Increment & Decrement\n\nThe query builder also provides convenient methods for incrementing or decrementing the value of a given column. Both of these methods accept at least one argument: the column to modify. A second argument may be provided to specify the amount by which the column should be incremented or decremented:\n\n    DB::table('users')->increment('votes');\n\n    DB::table('users')->increment('votes', 5);\n\n    DB::table('users')->decrement('votes');\n\n    DB::table('users')->decrement('votes', 5);\n\nIf needed, you may also specify additional columns to update during the increment or decrement operation:\n\n    DB::table('users')->increment('votes', 1, ['name' => 'John']);\n\nIn addition, you may increment or decrement multiple columns at once using the `incrementEach` and `decrementEach` methods:\n\n    DB::table('users')->incrementEach([\n        'votes' => 5,\n        'balance' => 100,\n    ]);\n\n<a name=\"delete-statements\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":997,"to":1020}}}}],["3023",{"pageContent":"Delete Statements\n\nThe query builder's `delete` method may be used to delete records from the table. The `delete` method returns the number of affected rows. You may constrain `delete` statements by adding \"where\" clauses before calling the `delete` method:\n\n    $deleted = DB::table('users')->delete();\n\n    $deleted = DB::table('users')->where('votes', '>', 100)->delete();\n\nIf you wish to truncate an entire table, which will remove all records from the table and reset the auto-incrementing ID to zero, you may use the `truncate` method:\n\n    DB::table('users')->truncate();\n\n<a name=\"table-truncation-and-postgresql\"></a>\n#### Table Truncation & PostgreSQL\n\nWhen truncating a PostgreSQL database, the `CASCADE` behavior will be applied. This means that all foreign key related records in other tables will be deleted as well.\n\n<a name=\"pessimistic-locking\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":1021,"to":1038}}}}],["3024",{"pageContent":"Pessimistic Locking\n\nThe query builder also includes a few functions to help you achieve \"pessimistic locking\" when executing your `select` statements. To execute a statement with a \"shared lock\", you may call the `sharedLock` method. A shared lock prevents the selected rows from being modified until your transaction is committed:\n\n    DB::table('users')\n            ->where('votes', '>', 100)\n            ->sharedLock()\n            ->get();\n\nAlternatively, you may use the `lockForUpdate` method. A \"for update\" lock prevents the selected records from being modified or from being selected with another shared lock:\n\n    DB::table('users')\n            ->where('votes', '>', 100)\n            ->lockForUpdate()\n            ->get();\n\n<a name=\"debugging\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":1039,"to":1055}}}}],["3025",{"pageContent":"Debugging\n\nYou may use the `dd` and `dump` methods while building a query to dump the current query bindings and SQL. The `dd` method will display the debug information and then stop executing the request. The `dump` method will display the debug information but allow the request to continue executing:\n\n    DB::table('users')->where('votes', '>', 100)->dd();\n\n    DB::table('users')->where('votes', '>', 100)->dump();\n\nThe `dumpRawSql` and `ddRawSql` methods may be invoked on a query to dump the query's SQL with all parameter bindings properly substituted:\n\n    DB::table('users')->where('votes', '>', 100)->dumpRawSql();\n\n    DB::table('users')->where('votes', '>', 100)->ddRawSql();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queries.md","loc":{"lines":{"from":1056,"to":1068}}}}],["3026",{"pageContent":"# Queues","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1,"to":1}}}}],["3027",{"pageContent":"- [Introduction](#introduction)\n    - [Connections Vs. Queues](#connections-vs-queues)\n    - [Driver Notes & Prerequisites](#driver-prerequisites)\n- [Creating Jobs](#creating-jobs)\n    - [Generating Job Classes](#generating-job-classes)\n    - [Class Structure](#class-structure)\n    - [Unique Jobs](#unique-jobs)\n    - [Encrypted Jobs](#encrypted-jobs)\n- [Job Middleware](#job-middleware)\n    - [Rate Limiting](#rate-limiting)\n    - [Preventing Job Overlaps](#preventing-job-overlaps)\n    - [Throttling Exceptions](#throttling-exceptions)\n- [Dispatching Jobs](#dispatching-jobs)\n    - [Delayed Dispatching](#delayed-dispatching)\n    - [Synchronous Dispatching](#synchronous-dispatching)\n    - [Jobs & Database Transactions](#jobs-and-database-transactions)\n    - [Job Chaining](#job-chaining)\n    - [Customizing The Queue & Connection](#customizing-the-queue-and-connection)\n    - [Specifying Max Job Attempts / Timeout Values](#max-job-attempts-and-timeout)\n    - [Error Handling](#error-handling)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":3,"to":22}}}}],["3028",{"pageContent":"- [Specifying Max Job Attempts / Timeout Values](#max-job-attempts-and-timeout)\n    - [Error Handling](#error-handling)\n- [Job Batching](#job-batching)\n    - [Defining Batchable Jobs](#defining-batchable-jobs)\n    - [Dispatching Batches](#dispatching-batches)\n    - [Chains & Batches](#chains-and-batches)\n    - [Adding Jobs To Batches](#adding-jobs-to-batches)\n    - [Inspecting Batches](#inspecting-batches)\n    - [Cancelling Batches](#cancelling-batches)\n    - [Batch Failures](#batch-failures)\n    - [Pruning Batches](#pruning-batches)\n- [Queueing Closures](#queueing-closures)\n- [Running The Queue Worker](#running-the-queue-worker)\n    - [The `queue:work` Command](#the-queue-work-command)\n    - [Queue Priorities](#queue-priorities)\n    - [Queue Workers & Deployment](#queue-workers-and-deployment)\n    - [Job Expirations & Timeouts](#job-expirations-and-timeouts)\n- [Supervisor Configuration](#supervisor-configuration)\n- [Dealing With Failed Jobs](#dealing-with-failed-jobs)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":22,"to":40}}}}],["3029",{"pageContent":"- [Job Expirations & Timeouts](#job-expirations-and-timeouts)\n- [Supervisor Configuration](#supervisor-configuration)\n- [Dealing With Failed Jobs](#dealing-with-failed-jobs)\n    - [Cleaning Up After Failed Jobs](#cleaning-up-after-failed-jobs)\n    - [Retrying Failed Jobs](#retrying-failed-jobs)\n    - [Ignoring Missing Models](#ignoring-missing-models)\n    - [Pruning Failed Jobs](#pruning-failed-jobs)\n    - [Storing Failed Jobs In DynamoDB](#storing-failed-jobs-in-dynamodb)\n    - [Disabling Failed Job Storage](#disabling-failed-job-storage)\n    - [Failed Job Events](#failed-job-events)\n- [Clearing Jobs From Queues](#clearing-jobs-from-queues)\n- [Monitoring Your Queues](#monitoring-your-queues)\n- [Testing](#testing)\n    - [Faking A Subset Of Jobs](#faking-a-subset-of-jobs)\n    - [Testing Job Chains](#testing-job-chains)\n    - [Testing Job Batches](#testing-job-batches)\n- [Job Events](#job-events)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":40,"to":56}}}}],["3030",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":58,"to":58}}}}],["3031",{"pageContent":"Introduction\n\nWhile building your web application, you may have some tasks, such as parsing and storing an uploaded CSV file, that take too long to perform during a typical web request. Thankfully, Laravel allows you to easily create queued jobs that may be processed in the background. By moving time intensive tasks to a queue, your application can respond to web requests with blazing speed and provide a better user experience to your customers.\n\nLaravel queues provide a unified queueing API across a variety of different queue backends, such as [Amazon SQS](https://aws.amazon.com/sqs/), [Redis](https://redis.io), or even a relational database.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":59,"to":63}}}}],["3032",{"pageContent":"Laravel queues provide a unified queueing API across a variety of different queue backends, such as [Amazon SQS](https://aws.amazon.com/sqs/), [Redis](https://redis.io), or even a relational database.\n\nLaravel's queue configuration options are stored in your application's `config/queue.php` configuration file. In this file, you will find connection configurations for each of the queue drivers that are included with the framework, including the database, [Amazon SQS](https://aws.amazon.com/sqs/), [Redis](https://redis.io), and [Beanstalkd](https://beanstalkd.github.io/) drivers, as well as a synchronous driver that will execute jobs immediately (for use during local development). A `null` queue driver is also included which discards queued jobs.\n\n> **Note**  \n> Laravel now offers Horizon, a beautiful dashboard and configuration system for your Redis powered queues. Check out the full [Horizon documentation](/docs/{{version}}/horizon) for more information.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":63,"to":68}}}}],["3033",{"pageContent":"<a name=\"connections-vs-queues\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":70,"to":70}}}}],["3034",{"pageContent":"Connections Vs. Queues\n\nBefore getting started with Laravel queues, it is important to understand the distinction between \"connections\" and \"queues\". In your `config/queue.php` configuration file, there is a `connections` configuration array. This option defines the connections to backend queue services such as Amazon SQS, Beanstalk, or Redis. However, any given queue connection may have multiple \"queues\" which may be thought of as different stacks or piles of queued jobs.\n\nNote that each connection configuration example in the `queue` configuration file contains a `queue` attribute. This is the default queue that jobs will be dispatched to when they are sent to a given connection. In other words, if you dispatch a job without explicitly defining which queue it should be dispatched to, the job will be placed on the queue that is defined in the `queue` attribute of the connection configuration:\n\n    use App\\Jobs\\ProcessPodcast;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":71,"to":77}}}}],["3035",{"pageContent":"use App\\Jobs\\ProcessPodcast;\n\n    // This job is sent to the default connection's default queue...\n    ProcessPodcast::dispatch();\n\n    // This job is sent to the default connection's \"emails\" queue...\n    ProcessPodcast::dispatch()->onQueue('emails');\n\nSome applications may not need to ever push jobs onto multiple queues, instead preferring to have one simple queue. However, pushing jobs to multiple queues can be especially useful for applications that wish to prioritize or segment how jobs are processed, since the Laravel queue worker allows you to specify which queues it should process by priority. For example, if you push jobs to a `high` queue, you may run a worker that gives them higher processing priority:\n\n```shell\nphp artisan queue:work --queue=high,default","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":77,"to":88}}}}],["3036",{"pageContent":"<a name=\"driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":91,"to":91}}}}],["3037",{"pageContent":"Driver Notes & Prerequisites\n\n<a name=\"database\"></a>\n#### Database\n\nIn order to use the `database` queue driver, you will need a database table to hold the jobs. To generate a migration that creates this table, run the `queue:table` Artisan command. Once the migration has been created, you may migrate your database using the `migrate` command:\n\n```shell\nphp artisan queue:table\n\nphp artisan migrate\n```\n\nFinally, don't forget to instruct your application to use the `database` driver by updating the `QUEUE_CONNECTION` variable in your application's `.env` file:\n\n    QUEUE_CONNECTION=database\n\n<a name=\"redis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":92,"to":109}}}}],["3038",{"pageContent":"Redis\n\nIn order to use the `redis` queue driver, you should configure a Redis database connection in your `config/database.php` configuration file.\n\n> **Warning**  \n> The `serializer` and `compression` Redis options are not supported by the `redis` queue driver.\n\n**Redis Cluster**\n\nIf your Redis queue connection uses a Redis Cluster, your queue names must contain a [key hash tag](https://redis.io/docs/reference/cluster-spec/#hash-tags). This is required in order to ensure all of the Redis keys for a given queue are placed into the same hash slot:\n\n    'redis' => [\n        'driver' => 'redis',\n        'connection' => 'default',\n        'queue' => '{default}',\n        'retry_after' => 90,\n    ],\n\n**Blocking**\n\nWhen using the Redis queue, you may use the `block_for` configuration option to specify how long the driver should wait for a job to become available before iterating through the worker loop and re-polling the Redis database.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":110,"to":130}}}}],["3039",{"pageContent":"Adjusting this value based on your queue load can be more efficient than continually polling the Redis database for new jobs. For instance, you may set the value to `5` to indicate that the driver should block for five seconds while waiting for a job to become available:\n\n    'redis' => [\n        'driver' => 'redis',\n        'connection' => 'default',\n        'queue' => 'default',\n        'retry_after' => 90,\n        'block_for' => 5,\n    ],\n\n> **Warning**  \n> Setting `block_for` to `0` will cause queue workers to block indefinitely until a job is available. This will also prevent signals such as `SIGTERM` from being handled until the next job has been processed.\n\n<a name=\"other-driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":132,"to":145}}}}],["3040",{"pageContent":"Other Driver Prerequisites\n\nThe following dependencies are needed for the listed queue drivers. These dependencies may be installed via the Composer package manager:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- Amazon SQS: `aws/aws-sdk-php ~3.0`\n- Beanstalkd: `pda/pheanstalk ~4.0`\n- Redis: `predis/predis ~1.0` or phpredis PHP extension\n\n</div>\n\n<a name=\"creating-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":146,"to":158}}}}],["3041",{"pageContent":"Creating Jobs\n\n<a name=\"generating-job-classes\"></a>\n### Generating Job Classes\n\nBy default, all of the queueable jobs for your application are stored in the `app/Jobs` directory. If the `app/Jobs` directory doesn't exist, it will be created when you run the `make:job` Artisan command:\n\n```shell\nphp artisan make:job ProcessPodcast\n```\n\nThe generated class will implement the `Illuminate\\Contracts\\Queue\\ShouldQueue` interface, indicating to Laravel that the job should be pushed onto the queue to run asynchronously.\n\n> **Note**  \n> Job stubs may be customized using [stub publishing](/docs/{{version}}/artisan#stub-customization).\n\n<a name=\"class-structure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":159,"to":175}}}}],["3042",{"pageContent":"Class Structure\n\nJob classes are very simple, normally containing only a `handle` method that is invoked when the job is processed by the queue. To get started, let's take a look at an example job class. In this example, we'll pretend we manage a podcast publishing service and need to process the uploaded podcast files before they are published:\n\n    <?php\n\n    namespace App\\Jobs;\n\n    use App\\Models\\Podcast;\n    use App\\Services\\AudioProcessor;\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Foundation\\Bus\\Dispatchable;\n    use Illuminate\\Queue\\InteractsWithQueue;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class ProcessPodcast implements ShouldQueue\n    {\n        use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;\n\n        /**\n         * Create a new job instance.\n         */\n        public function __construct(\n            public Podcast $podcast,\n        ) {}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":176,"to":201}}}}],["3043",{"pageContent":"/**\n         * Create a new job instance.\n         */\n        public function __construct(\n            public Podcast $podcast,\n        ) {}\n\n        /**\n         * Execute the job.\n         */\n        public function handle(AudioProcessor $processor): void\n        {\n            // Process uploaded podcast...\n        }\n    }\n\nIn this example, note that we were able to pass an [Eloquent model](/docs/{{version}}/eloquent) directly into the queued job's constructor. Because of the `SerializesModels` trait that the job is using, Eloquent models and their loaded relationships will be gracefully serialized and unserialized when the job is processing.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":201,"to":217}}}}],["3044",{"pageContent":"If your queued job accepts an Eloquent model in its constructor, only the identifier for the model will be serialized onto the queue. When the job is actually handled, the queue system will automatically re-retrieve the full model instance and its loaded relationships from the database. This approach to model serialization allows for much smaller job payloads to be sent to your queue driver.\n\n<a name=\"handle-method-dependency-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":219,"to":221}}}}],["3045",{"pageContent":"`handle` Method Dependency Injection\n\nThe `handle` method is invoked when the job is processed by the queue. Note that we are able to type-hint dependencies on the `handle` method of the job. The Laravel [service container](/docs/{{version}}/container) automatically injects these dependencies.\n\nIf you would like to take total control over how the container injects dependencies into the `handle` method, you may use the container's `bindMethod` method. The `bindMethod` method accepts a callback which receives the job and the container. Within the callback, you are free to invoke the `handle` method however you wish. Typically, you should call this method from the `boot` method of your `App\\Providers\\AppServiceProvider` [service provider](/docs/{{version}}/providers):\n\n    use App\\Jobs\\ProcessPodcast;\n    use App\\Services\\AudioProcessor;\n    use Illuminate\\Contracts\\Foundation\\Application;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":222,"to":230}}}}],["3046",{"pageContent":"use App\\Jobs\\ProcessPodcast;\n    use App\\Services\\AudioProcessor;\n    use Illuminate\\Contracts\\Foundation\\Application;\n\n    $this->app->bindMethod([ProcessPodcast::class, 'handle'], function (ProcessPodcast $job, Application $app) {\n        return $job->handle($app->make(AudioProcessor::class));\n    });\n\n> **Warning**  \n> Binary data, such as raw image contents, should be passed through the `base64_encode` function before being passed to a queued job. Otherwise, the job may not properly serialize to JSON when being placed on the queue.\n\n<a name=\"handling-relationships\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":230,"to":241}}}}],["3047",{"pageContent":"Queued Relationships\n\nBecause all loaded Eloquent model relationships also get serialized when a job is queued, the serialized job string can sometimes become quite large. Furthermore, when a job is deserialized and model relationships are re-retrieved from the database, they will be retrieved in their entirety. Any previous relationship constraints that were applied before the model was serialized during the job queueing process will not be applied when the job is deserialized. Therefore, if you wish to work with a subset of a given relationship, you should re-constrain that relationship within your queued job.\n\nOr, to prevent relations from being serialized, you can call the `withoutRelations` method on the model when setting a property value. This method will return an instance of the model without its loaded relationships:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":242,"to":246}}}}],["3048",{"pageContent":"/**\n     * Create a new job instance.\n     */\n    public function __construct(Podcast $podcast)\n    {\n        $this->podcast = $podcast->withoutRelations();\n    }\n\nIf you are using PHP constructor property promotion and would like to indicate that an Eloquent model should not have its relations serialized, you may use the `WithoutRelations` attribute:\n\n    use Illuminate\\Queue\\Attributes\\WithoutRelations;\n\n    /**\n     * Create a new job instance.\n     */\n    public function __construct(\n        #[WithoutRelations]\n        public Podcast $podcast\n    ) {\n    }\n\nIf a job receives a collection or array of Eloquent models instead of a single model, the models within that collection will not have their relationships restored when the job is deserialized and executed. This is to prevent excessive resource usage on jobs that deal with large numbers of models.\n\n<a name=\"unique-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":248,"to":271}}}}],["3049",{"pageContent":"Unique Jobs\n\n> **Warning**  \n> Unique jobs require a cache driver that supports [locks](/docs/{{version}}/cache#atomic-locks). Currently, the `memcached`, `redis`, `dynamodb`, `database`, `file`, and `array` cache drivers support atomic locks. In addition, unique job constraints do not apply to jobs within batches.\n\nSometimes, you may want to ensure that only one instance of a specific job is on the queue at any point in time. You may do so by implementing the `ShouldBeUnique` interface on your job class. This interface does not require you to define any additional methods on your class:\n\n    <?php\n\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Contracts\\Queue\\ShouldBeUnique;\n\n    class UpdateSearchIndex implements ShouldQueue, ShouldBeUnique\n    {\n        ...\n    }\n\nIn the example above, the `UpdateSearchIndex` job is unique. So, the job will not be dispatched if another instance of the job is already on the queue and has not finished processing.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":272,"to":289}}}}],["3050",{"pageContent":"In the example above, the `UpdateSearchIndex` job is unique. So, the job will not be dispatched if another instance of the job is already on the queue and has not finished processing.\n\nIn certain cases, you may want to define a specific \"key\" that makes the job unique or you may want to specify a timeout beyond which the job no longer stays unique. To accomplish this, you may define `uniqueId` and `uniqueFor` properties or methods on your job class:\n\n    <?php\n\n    use App\\Models\\Product;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Contracts\\Queue\\ShouldBeUnique;\n\n    class UpdateSearchIndex implements ShouldQueue, ShouldBeUnique\n    {\n        /**\n         * The product instance.\n         *\n         * @var \\App\\Product\n         */\n        public $product;\n\n        /**\n         * The number of seconds after which the job's unique lock will be released.\n         *\n         * @var int\n         */\n        public $uniqueFor = 3600;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":289,"to":313}}}}],["3051",{"pageContent":"/**\n         * The number of seconds after which the job's unique lock will be released.\n         *\n         * @var int\n         */\n        public $uniqueFor = 3600;\n\n        /**\n         * Get the unique ID for the job.\n         */\n        public function uniqueId(): string\n        {\n            return $this->product->id;\n        }\n    }\n\nIn the example above, the `UpdateSearchIndex` job is unique by a product ID. So, any new dispatches of the job with the same product ID will be ignored until the existing job has completed processing. In addition, if the existing job is not processed within one hour, the unique lock will be released and another job with the same unique key can be dispatched to the queue.\n\n> **Warning**  \n> If your application dispatches jobs from multiple web servers or containers, you should ensure that all of your servers are communicating with the same central cache server so that Laravel can accurately determine if a job is unique.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":313,"to":332}}}}],["3052",{"pageContent":"<a name=\"keeping-jobs-unique-until-processing-begins\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":334,"to":334}}}}],["3053",{"pageContent":"Keeping Jobs Unique Until Processing Begins\n\nBy default, unique jobs are \"unlocked\" after a job completes processing or fails all of its retry attempts. However, there may be situations where you would like your job to unlock immediately before it is processed. To accomplish this, your job should implement the `ShouldBeUniqueUntilProcessing` contract instead of the `ShouldBeUnique` contract:\n\n    <?php\n\n    use App\\Models\\Product;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Contracts\\Queue\\ShouldBeUniqueUntilProcessing;\n\n    class UpdateSearchIndex implements ShouldQueue, ShouldBeUniqueUntilProcessing\n    {\n        // ...\n    }\n\n<a name=\"unique-job-locks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":335,"to":350}}}}],["3054",{"pageContent":"Unique Job Locks\n\nBehind the scenes, when a `ShouldBeUnique` job is dispatched, Laravel attempts to acquire a [lock](/docs/{{version}}/cache#atomic-locks) with the `uniqueId` key. If the lock is not acquired, the job is not dispatched. This lock is released when the job completes processing or fails all of its retry attempts. By default, Laravel will use the default cache driver to obtain this lock. However, if you wish to use another driver for acquiring the lock, you may define a `uniqueVia` method that returns the cache driver that should be used:\n\n    use Illuminate\\Contracts\\Cache\\Repository;\n    use Illuminate\\Support\\Facades\\Cache;\n\n    class UpdateSearchIndex implements ShouldQueue, ShouldBeUnique\n    {\n        ...\n\n        /**\n         * Get the cache driver for the unique job lock.\n         */\n        public function uniqueVia(): Repository\n        {\n            return Cache::driver('redis');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":351,"to":369}}}}],["3055",{"pageContent":"/**\n         * Get the cache driver for the unique job lock.\n         */\n        public function uniqueVia(): Repository\n        {\n            return Cache::driver('redis');\n        }\n    }\n\n> **Note**  \n> If you only need to limit the concurrent processing of a job, use the [`WithoutOverlapping`](/docs/{{version}}/queues#preventing-job-overlaps) job middleware instead.\n\n<a name=\"encrypted-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":369,"to":381}}}}],["3056",{"pageContent":"Encrypted Jobs\n\nLaravel allows you to ensure the privacy and integrity of a job's data via [encryption](/docs/{{version}}/encryption). To get started, simply add the `ShouldBeEncrypted` interface to the job class. Once this interface has been added to the class, Laravel will automatically encrypt your job before pushing it onto a queue:\n\n    <?php\n\n    use Illuminate\\Contracts\\Queue\\ShouldBeEncrypted;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n\n    class UpdateSearchIndex implements ShouldQueue, ShouldBeEncrypted\n    {\n        // ...\n    }\n\n<a name=\"job-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":382,"to":396}}}}],["3057",{"pageContent":"Job Middleware\n\nJob middleware allow you to wrap custom logic around the execution of queued jobs, reducing boilerplate in the jobs themselves. For example, consider the following `handle` method which leverages Laravel's Redis rate limiting features to allow only one job to process every five seconds:\n\n    use Illuminate\\Support\\Facades\\Redis;\n\n    /**\n     * Execute the job.\n     */\n    public function handle(): void\n    {\n        Redis::throttle('key')->block(0)->allow(1)->every(5)->then(function () {\n            info('Lock obtained...');\n\n            // Handle job...\n        }, function () {\n            // Could not obtain lock...\n\n            return $this->release(5);\n        });\n    }\n\nWhile this code is valid, the implementation of the `handle` method becomes noisy since it is cluttered with Redis rate limiting logic. In addition, this rate limiting logic must be duplicated for any other jobs that we want to rate limit.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":397,"to":419}}}}],["3058",{"pageContent":"Instead of rate limiting in the handle method, we could define a job middleware that handles rate limiting. Laravel does not have a default location for job middleware, so you are welcome to place job middleware anywhere in your application. In this example, we will place the middleware in an `app/Jobs/Middleware` directory:\n\n    <?php\n\n    namespace App\\Jobs\\Middleware;\n\n    use Closure;\n    use Illuminate\\Support\\Facades\\Redis;\n\n    class RateLimited\n    {\n        /**\n         * Process the queued job.\n         *\n         * @param  \\Closure(object): void  $next\n         */\n        public function handle(object $job, Closure $next): void\n        {\n            Redis::throttle('key')\n                    ->block(0)->allow(1)->every(5)\n                    ->then(function () use ($job, $next) {\n                        // Lock obtained...\n\n                        $next($job);\n                    }, function () use ($job) {\n                        // Could not obtain lock...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":421,"to":446}}}}],["3059",{"pageContent":"$next($job);\n                    }, function () use ($job) {\n                        // Could not obtain lock...\n\n                        $job->release(5);\n                    });\n        }\n    }\n\nAs you can see, like [route middleware](/docs/{{version}}/middleware), job middleware receive the job being processed and a callback that should be invoked to continue processing the job.\n\nAfter creating job middleware, they may be attached to a job by returning them from the job's `middleware` method. This method does not exist on jobs scaffolded by the `make:job` Artisan command, so you will need to manually add it to your job class:\n\n    use App\\Jobs\\Middleware\\RateLimited;\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [new RateLimited];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":446,"to":469}}}}],["3060",{"pageContent":"/**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [new RateLimited];\n    }\n\n> **Note**  \n> Job middleware can also be assigned to queueable event listeners, mailables, and notifications.\n\n<a name=\"rate-limiting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":469,"to":482}}}}],["3061",{"pageContent":"Rate Limiting\n\nAlthough we just demonstrated how to write your own rate limiting job middleware, Laravel actually includes a rate limiting middleware that you may utilize to rate limit jobs. Like [route rate limiters](/docs/{{version}}/routing#defining-rate-limiters), job rate limiters are defined using the `RateLimiter` facade's `for` method.\n\nFor example, you may wish to allow users to backup their data once per hour while imposing no such limit on premium customers. To accomplish this, you may define a `RateLimiter` in the `boot` method of your `AppServiceProvider`:\n\n    use Illuminate\\Cache\\RateLimiting\\Limit;\n    use Illuminate\\Support\\Facades\\RateLimiter;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        RateLimiter::for('backups', function (object $job) {\n            return $job->user->vipCustomer()\n                        ? Limit::none()\n                        : Limit::perHour(1)->by($job->user->id);\n        });\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":483,"to":502}}}}],["3062",{"pageContent":"In the example above, we defined an hourly rate limit; however, you may easily define a rate limit based on minutes using the `perMinute` method. In addition, you may pass any value you wish to the `by` method of the rate limit; however, this value is most often used to segment rate limits by customer:\n\n    return Limit::perMinute(50)->by($job->user->id);\n\nOnce you have defined your rate limit, you may attach the rate limiter to your job using the `Illuminate\\Queue\\Middleware\\RateLimited` middleware. Each time the job exceeds the rate limit, this middleware will release the job back to the queue with an appropriate delay based on the rate limit duration.\n\n    use Illuminate\\Queue\\Middleware\\RateLimited;\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [new RateLimited('backups')];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":504,"to":520}}}}],["3063",{"pageContent":"Releasing a rate limited job back onto the queue will still increment the job's total number of `attempts`. You may wish to tune your `tries` and `maxExceptions` properties on your job class accordingly. Or, you may wish to use the [`retryUntil` method](#time-based-attempts) to define the amount of time until the job should no longer be attempted.\n\nIf you do not want a job to be retried when it is rate limited, you may use the `dontRelease` method:\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [(new RateLimited('backups'))->dontRelease()];\n    }\n\n> **Note**  \n> If you are using Redis, you may use the `Illuminate\\Queue\\Middleware\\RateLimitedWithRedis` middleware, which is fine-tuned for Redis and more efficient than the basic rate limiting middleware.\n\n<a name=\"preventing-job-overlaps\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":522,"to":539}}}}],["3064",{"pageContent":"Preventing Job Overlaps\n\nLaravel includes an `Illuminate\\Queue\\Middleware\\WithoutOverlapping` middleware that allows you to prevent job overlaps based on an arbitrary key. This can be helpful when a queued job is modifying a resource that should only be modified by one job at a time.\n\nFor example, let's imagine you have a queued job that updates a user's credit score and you want to prevent credit score update job overlaps for the same user ID. To accomplish this, you can return the `WithoutOverlapping` middleware from your job's `middleware` method:\n\n    use Illuminate\\Queue\\Middleware\\WithoutOverlapping;\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [new WithoutOverlapping($this->user->id)];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":540,"to":556}}}}],["3065",{"pageContent":"Any overlapping jobs of the same type will be released back to the queue. You may also specify the number of seconds that must elapse before the released job will be attempted again:\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [(new WithoutOverlapping($this->order->id))->releaseAfter(60)];\n    }\n\nIf you wish to immediately delete any overlapping jobs so that they will not be retried, you may use the `dontRelease` method:\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [(new WithoutOverlapping($this->order->id))->dontRelease()];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":558,"to":580}}}}],["3066",{"pageContent":"The `WithoutOverlapping` middleware is powered by Laravel's atomic lock feature. Sometimes, your job may unexpectedly fail or timeout in such a way that the lock is not released. Therefore, you may explicitly define a lock expiration time using the `expireAfter` method. For example, the example below will instruct Laravel to release the `WithoutOverlapping` lock three minutes after the job has started processing:\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [(new WithoutOverlapping($this->order->id))->expireAfter(180)];\n    }\n\n> **Warning**\n> The `WithoutOverlapping` middleware requires a cache driver that supports [locks](/docs/{{version}}/cache#atomic-locks). Currently, the `memcached`, `redis`, `dynamodb`, `database`, `file`, and `array` cache drivers support atomic locks.\n\n<a name=\"sharing-lock-keys\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":582,"to":597}}}}],["3067",{"pageContent":"Sharing Lock Keys Across Job Classes\n\nBy default, the `WithoutOverlapping` middleware will only prevent overlapping jobs of the same class. So, although two different job classes may use the same lock key, they will not be prevented from overlapping. However, you can instruct Laravel to apply the key across job classes using the `shared` method:\n\n```php\nuse Illuminate\\Queue\\Middleware\\WithoutOverlapping;\n\nclass ProviderIsDown\n{\n    // ...\n\n\n    public function middleware(): array\n    {\n        return [\n            (new WithoutOverlapping(\"status:{$this->provider}\"))->shared(),\n        ];\n    }\n}\n\nclass ProviderIsUp\n{\n    // ...\n\n\n    public function middleware(): array\n    {\n        return [\n            (new WithoutOverlapping(\"status:{$this->provider}\"))->shared(),\n        ];\n    }\n}\n```\n\n<a name=\"throttling-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":598,"to":632}}}}],["3068",{"pageContent":"Throttling Exceptions\n\nLaravel includes a `Illuminate\\Queue\\Middleware\\ThrottlesExceptions` middleware that allows you to throttle exceptions. Once the job throws a given number of exceptions, all further attempts to execute the job are delayed until a specified time interval lapses. This middleware is particularly useful for jobs that interact with third-party services that are unstable.\n\nFor example, let's imagine a queued job that interacts with a third-party API that begins throwing exceptions. To throttle exceptions, you can return the `ThrottlesExceptions` middleware from your job's `middleware` method. Typically, this middleware should be paired with a job that implements [time based attempts](#time-based-attempts):\n\n    use DateTime;\n    use Illuminate\\Queue\\Middleware\\ThrottlesExceptions;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":633,"to":640}}}}],["3069",{"pageContent":"use DateTime;\n    use Illuminate\\Queue\\Middleware\\ThrottlesExceptions;\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [new ThrottlesExceptions(10, 5)];\n    }\n\n    /**\n     * Determine the time at which the job should timeout.\n     */\n    public function retryUntil(): DateTime\n    {\n        return now()->addMinutes(5);\n    }\n\nThe first constructor argument accepted by the middleware is the number of exceptions the job can throw before being throttled, while the second constructor argument is the number of minutes that should elapse before the job is attempted again once it has been throttled. In the code example above, if the job throws 10 exceptions within 5 minutes, we will wait 5 minutes before attempting the job again.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":640,"to":661}}}}],["3070",{"pageContent":"When a job throws an exception but the exception threshold has not yet been reached, the job will typically be retried immediately. However, you may specify the number of minutes such a job should be delayed by calling the `backoff` method when attaching the middleware to the job:\n\n    use Illuminate\\Queue\\Middleware\\ThrottlesExceptions;\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [(new ThrottlesExceptions(10, 5))->backoff(5)];\n    }\n\nInternally, this middleware uses Laravel's cache system to implement rate limiting, and the job's class name is utilized as the cache \"key\". You may override this key by calling the `by` method when attaching the middleware to your job. This may be useful if you have multiple jobs interacting with the same third-party service and you would like them to share a common throttling \"bucket\":","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":663,"to":677}}}}],["3071",{"pageContent":"use Illuminate\\Queue\\Middleware\\ThrottlesExceptions;\n\n    /**\n     * Get the middleware the job should pass through.\n     *\n     * @return array<int, object>\n     */\n    public function middleware(): array\n    {\n        return [(new ThrottlesExceptions(10, 10))->by('key')];\n    }\n\n> **Note**  \n> If you are using Redis, you may use the `Illuminate\\Queue\\Middleware\\ThrottlesExceptionsWithRedis` middleware, which is fine-tuned for Redis and more efficient than the basic exception throttling middleware.\n\n<a name=\"dispatching-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":679,"to":694}}}}],["3072",{"pageContent":"Dispatching Jobs\n\nOnce you have written your job class, you may dispatch it using the `dispatch` method on the job itself. The arguments passed to the `dispatch` method will be given to the job's constructor:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Jobs\\ProcessPodcast;\n    use App\\Models\\Podcast;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PodcastController extends Controller\n    {\n        /**\n         * Store a new podcast.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $podcast = Podcast::create(/* ... */);\n\n            // ...\n\n            ProcessPodcast::dispatch($podcast);\n\n            return redirect('/podcasts');\n        }\n    }\n\nIf you would like to conditionally dispatch a job, you may use the `dispatchIf` and `dispatchUnless` methods:\n\n    ProcessPodcast::dispatchIf($accountActive, $podcast);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":695,"to":728}}}}],["3073",{"pageContent":"If you would like to conditionally dispatch a job, you may use the `dispatchIf` and `dispatchUnless` methods:\n\n    ProcessPodcast::dispatchIf($accountActive, $podcast);\n\n    ProcessPodcast::dispatchUnless($accountSuspended, $podcast);\n\nIn new Laravel applications, the `sync` driver is the default queue driver. This driver executes jobs synchronously in the foreground of the current request, which is often convenient during local development. If you would like to actually begin queueing jobs for background processing, you may specify a different queue driver within your application's `config/queue.php` configuration file.\n\n<a name=\"delayed-dispatching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":728,"to":736}}}}],["3074",{"pageContent":"Delayed Dispatching\n\nIf you would like to specify that a job should not be immediately available for processing by a queue worker, you may use the `delay` method when dispatching the job. For example, let's specify that a job should not be available for processing until 10 minutes after it has been dispatched:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Jobs\\ProcessPodcast;\n    use App\\Models\\Podcast;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PodcastController extends Controller\n    {\n        /**\n         * Store a new podcast.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $podcast = Podcast::create(/* ... */);\n\n            // ...\n\n            ProcessPodcast::dispatch($podcast)\n                        ->delay(now()->addMinutes(10));\n\n            return redirect('/podcasts');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":737,"to":767}}}}],["3075",{"pageContent":"// ...\n\n            ProcessPodcast::dispatch($podcast)\n                        ->delay(now()->addMinutes(10));\n\n            return redirect('/podcasts');\n        }\n    }\n\n> **Warning**  \n> The Amazon SQS queue service has a maximum delay time of 15 minutes.\n\n<a name=\"dispatching-after-the-response-is-sent-to-browser\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":767,"to":779}}}}],["3076",{"pageContent":"Dispatching After The Response Is Sent To Browser\n\nAlternatively, the `dispatchAfterResponse` method delays dispatching a job until after the HTTP response is sent to the user's browser if your web server is using FastCGI. This will still allow the user to begin using the application even though a queued job is still executing. This should typically only be used for jobs that take about a second, such as sending an email. Since they are processed within the current HTTP request, jobs dispatched in this fashion do not require a queue worker to be running in order for them to be processed:\n\n    use App\\Jobs\\SendNotification;\n\n    SendNotification::dispatchAfterResponse();\n\nYou may also `dispatch` a closure and chain the `afterResponse` method onto the `dispatch` helper to execute a closure after the HTTP response has been sent to the browser:\n\n    use App\\Mail\\WelcomeMessage;\n    use Illuminate\\Support\\Facades\\Mail;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":780,"to":791}}}}],["3077",{"pageContent":"use App\\Mail\\WelcomeMessage;\n    use Illuminate\\Support\\Facades\\Mail;\n\n    dispatch(function () {\n        Mail::to('taylor@example.com')->send(new WelcomeMessage);\n    })->afterResponse();\n\n<a name=\"synchronous-dispatching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":791,"to":798}}}}],["3078",{"pageContent":"Synchronous Dispatching\n\nIf you would like to dispatch a job immediately (synchronously), you may use the `dispatchSync` method. When using this method, the job will not be queued and will be executed immediately within the current process:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Jobs\\ProcessPodcast;\n    use App\\Models\\Podcast;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PodcastController extends Controller\n    {\n        /**\n         * Store a new podcast.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $podcast = Podcast::create(/* ... */);\n\n            // Create podcast...\n\n            ProcessPodcast::dispatchSync($podcast);\n\n            return redirect('/podcasts');\n        }\n    }\n\n<a name=\"jobs-and-database-transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":799,"to":830}}}}],["3079",{"pageContent":"Jobs & Database Transactions\n\nWhile it is perfectly fine to dispatch jobs within database transactions, you should take special care to ensure that your job will actually be able to execute successfully. When dispatching a job within a transaction, it is possible that the job will be processed by a worker before the parent transaction has committed. When this happens, any updates you have made to models or database records during the database transaction(s) may not yet be reflected in the database. In addition, any models or database records created within the transaction(s) may not exist in the database.\n\nThankfully, Laravel provides several methods of working around this problem. First, you may set the `after_commit` connection option in your queue connection's configuration array:\n\n    'redis' => [\n        'driver' => 'redis',\n        // ...\n        'after_commit' => true,\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":831,"to":841}}}}],["3080",{"pageContent":"'redis' => [\n        'driver' => 'redis',\n        // ...\n        'after_commit' => true,\n    ],\n\nWhen the `after_commit` option is `true`, you may dispatch jobs within database transactions; however, Laravel will wait until the open parent database transactions have been committed before actually dispatching the job. Of course, if no database transactions are currently open, the job will be dispatched immediately.\n\nIf a transaction is rolled back due to an exception that occurs during the transaction, the jobs that were dispatched during that transaction will be discarded.\n\n> **Note**  \n> Setting the `after_commit` configuration option to `true` will also cause any queued event listeners, mailables, notifications, and broadcast events to be dispatched after all open database transactions have been committed.\n\n<a name=\"specifying-commit-dispatch-behavior-inline\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":841,"to":854}}}}],["3081",{"pageContent":"Specifying Commit Dispatch Behavior Inline\n\nIf you do not set the `after_commit` queue connection configuration option to `true`, you may still indicate that a specific job should be dispatched after all open database transactions have been committed. To accomplish this, you may chain the `afterCommit` method onto your dispatch operation:\n\n    use App\\Jobs\\ProcessPodcast;\n\n    ProcessPodcast::dispatch($podcast)->afterCommit();\n\nLikewise, if the `after_commit` configuration option is set to `true`, you may indicate that a specific job should be dispatched immediately without waiting for any open database transactions to commit:\n\n    ProcessPodcast::dispatch($podcast)->beforeCommit();\n\n<a name=\"job-chaining\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":855,"to":867}}}}],["3082",{"pageContent":"Job Chaining\n\nJob chaining allows you to specify a list of queued jobs that should be run in sequence after the primary job has executed successfully. If one job in the sequence fails, the rest of the jobs will not be run. To execute a queued job chain, you may use the `chain` method provided by the `Bus` facade. Laravel's command bus is a lower level component that queued job dispatching is built on top of:\n\n    use App\\Jobs\\OptimizePodcast;\n    use App\\Jobs\\ProcessPodcast;\n    use App\\Jobs\\ReleasePodcast;\n    use Illuminate\\Support\\Facades\\Bus;\n\n    Bus::chain([\n        new ProcessPodcast,\n        new OptimizePodcast,\n        new ReleasePodcast,\n    ])->dispatch();\n\nIn addition to chaining job class instances, you may also chain closures:\n\n    Bus::chain([\n        new ProcessPodcast,\n        new OptimizePodcast,\n        function () {\n            Podcast::update(/* ... */);\n        },\n    ])->dispatch();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":868,"to":891}}}}],["3083",{"pageContent":"Bus::chain([\n        new ProcessPodcast,\n        new OptimizePodcast,\n        function () {\n            Podcast::update(/* ... */);\n        },\n    ])->dispatch();\n\n> **Warning**  \n> Deleting jobs using the `$this->delete()` method within the job will not prevent chained jobs from being processed. The chain will only stop executing if a job in the chain fails.\n\n<a name=\"chain-connection-queue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":891,"to":902}}}}],["3084",{"pageContent":"Chain Connection & Queue\n\nIf you would like to specify the connection and queue that should be used for the chained jobs, you may use the `onConnection` and `onQueue` methods. These methods specify the queue connection and queue name that should be used unless the queued job is explicitly assigned a different connection / queue:\n\n    Bus::chain([\n        new ProcessPodcast,\n        new OptimizePodcast,\n        new ReleasePodcast,\n    ])->onConnection('redis')->onQueue('podcasts')->dispatch();\n\n<a name=\"chain-failures\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":903,"to":913}}}}],["3085",{"pageContent":"Chain Failures\n\nWhen chaining jobs, you may use the `catch` method to specify a closure that should be invoked if a job within the chain fails. The given callback will receive the `Throwable` instance that caused the job failure:\n\n    use Illuminate\\Support\\Facades\\Bus;\n    use Throwable;\n\n    Bus::chain([\n        new ProcessPodcast,\n        new OptimizePodcast,\n        new ReleasePodcast,\n    ])->catch(function (Throwable $e) {\n        // A job within the chain has failed...\n    })->dispatch();\n\n> **Warning**  \n> Since chain callbacks are serialized and executed at a later time by the Laravel queue, you should not use the `$this` variable within chain callbacks.\n\n<a name=\"customizing-the-queue-and-connection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":914,"to":932}}}}],["3086",{"pageContent":"Customizing The Queue & Connection\n\n<a name=\"dispatching-to-a-particular-queue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":933,"to":935}}}}],["3087",{"pageContent":"Dispatching To A Particular Queue\n\nBy pushing jobs to different queues, you may \"categorize\" your queued jobs and even prioritize how many workers you assign to various queues. Keep in mind, this does not push jobs to different queue \"connections\" as defined by your queue configuration file, but only to specific queues within a single connection. To specify the queue, use the `onQueue` method when dispatching the job:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Jobs\\ProcessPodcast;\n    use App\\Models\\Podcast;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PodcastController extends Controller\n    {\n        /**\n         * Store a new podcast.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $podcast = Podcast::create(/* ... */);\n\n            // Create podcast...\n\n            ProcessPodcast::dispatch($podcast)->onQueue('processing');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":936,"to":961}}}}],["3088",{"pageContent":"// Create podcast...\n\n            ProcessPodcast::dispatch($podcast)->onQueue('processing');\n\n            return redirect('/podcasts');\n        }\n    }\n\nAlternatively, you may specify the job's queue by calling the `onQueue` method within the job's constructor:\n\n    <?php\n\n    namespace App\\Jobs;\n\n     use Illuminate\\Bus\\Queueable;\n     use Illuminate\\Contracts\\Queue\\ShouldQueue;\n     use Illuminate\\Foundation\\Bus\\Dispatchable;\n     use Illuminate\\Queue\\InteractsWithQueue;\n     use Illuminate\\Queue\\SerializesModels;\n\n    class ProcessPodcast implements ShouldQueue\n    {\n        use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;\n\n        /**\n         * Create a new job instance.\n         */\n        public function __construct()\n        {\n            $this->onQueue('processing');\n        }\n    }\n\n<a name=\"dispatching-to-a-particular-connection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":961,"to":994}}}}],["3089",{"pageContent":"Dispatching To A Particular Connection\n\nIf your application interacts with multiple queue connections, you may specify which connection to push a job to using the `onConnection` method:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use App\\Jobs\\ProcessPodcast;\n    use App\\Models\\Podcast;\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class PodcastController extends Controller\n    {\n        /**\n         * Store a new podcast.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $podcast = Podcast::create(/* ... */);\n\n            // Create podcast...\n\n            ProcessPodcast::dispatch($podcast)->onConnection('sqs');\n\n            return redirect('/podcasts');\n        }\n    }\n\nYou may chain the `onConnection` and `onQueue` methods together to specify the connection and the queue for a job:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":995,"to":1026}}}}],["3090",{"pageContent":"return redirect('/podcasts');\n        }\n    }\n\nYou may chain the `onConnection` and `onQueue` methods together to specify the connection and the queue for a job:\n\n    ProcessPodcast::dispatch($podcast)\n                  ->onConnection('sqs')\n                  ->onQueue('processing');\n\nAlternatively, you may specify the job's connection by calling the `onConnection` method within the job's constructor:\n\n    <?php\n\n    namespace App\\Jobs;\n\n     use Illuminate\\Bus\\Queueable;\n     use Illuminate\\Contracts\\Queue\\ShouldQueue;\n     use Illuminate\\Foundation\\Bus\\Dispatchable;\n     use Illuminate\\Queue\\InteractsWithQueue;\n     use Illuminate\\Queue\\SerializesModels;\n\n    class ProcessPodcast implements ShouldQueue\n    {\n        use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;\n\n        /**\n         * Create a new job instance.\n         */\n        public function __construct()\n        {\n            $this->onConnection('sqs');\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1026,"to":1059}}}}],["3091",{"pageContent":"/**\n         * Create a new job instance.\n         */\n        public function __construct()\n        {\n            $this->onConnection('sqs');\n        }\n    }\n\n<a name=\"max-job-attempts-and-timeout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1059,"to":1068}}}}],["3092",{"pageContent":"Specifying Max Job Attempts / Timeout Values\n\n<a name=\"max-attempts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1069,"to":1071}}}}],["3093",{"pageContent":"Max Attempts\n\nIf one of your queued jobs is encountering an error, you likely do not want it to keep retrying indefinitely. Therefore, Laravel provides various ways to specify how many times or for how long a job may be attempted.\n\nOne approach to specifying the maximum number of times a job may be attempted is via the `--tries` switch on the Artisan command line. This will apply to all jobs processed by the worker unless the job being processed specifies the number of times it may be attempted:\n\n```shell\nphp artisan queue:work --tries=3","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1072,"to":1079}}}}],["3094",{"pageContent":"If a job exceeds its maximum number of attempts, it will be considered a \"failed\" job. For more information on handling failed jobs, consult the [failed job documentation](#dealing-with-failed-jobs). If `--tries=0` is provided to the `queue:work` command, the job will be retried indefinitely.\n\nYou may take a more granular approach by defining the maximum number of times a job may be attempted on the job class itself. If the maximum number of attempts is specified on the job, it will take precedence over the `--tries` value provided on the command line:\n\n    <?php\n\n    namespace App\\Jobs;\n\n    class ProcessPodcast implements ShouldQueue\n    {\n        /**\n         * The number of times the job may be attempted.\n         *\n         * @var int\n         */\n        public $tries = 5;\n    }\n\n<a name=\"time-based-attempts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1082,"to":1100}}}}],["3095",{"pageContent":"Time Based Attempts\n\nAs an alternative to defining how many times a job may be attempted before it fails, you may define a time at which the job should no longer be attempted. This allows a job to be attempted any number of times within a given time frame. To define the time at which a job should no longer be attempted, add a `retryUntil` method to your job class. This method should return a `DateTime` instance:\n\n    use DateTime;\n\n    /**\n     * Determine the time at which the job should timeout.\n     */\n    public function retryUntil(): DateTime\n    {\n        return now()->addMinutes(10);\n    }\n\n> **Note**  \n> You may also define a `tries` property or `retryUntil` method on your [queued event listeners](/docs/{{version}}/events#queued-event-listeners).\n\n<a name=\"max-exceptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1101,"to":1118}}}}],["3096",{"pageContent":"Max Exceptions\n\nSometimes you may wish to specify that a job may be attempted many times, but should fail if the retries are triggered by a given number of unhandled exceptions (as opposed to being released by the `release` method directly). To accomplish this, you may define a `maxExceptions` property on your job class:\n\n    <?php\n\n    namespace App\\Jobs;\n\n    use Illuminate\\Support\\Facades\\Redis;\n\n    class ProcessPodcast implements ShouldQueue\n    {\n        /**\n         * The number of times the job may be attempted.\n         *\n         * @var int\n         */\n        public $tries = 25;\n\n        /**\n         * The maximum number of unhandled exceptions to allow before failing.\n         *\n         * @var int\n         */\n        public $maxExceptions = 3;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1119,"to":1143}}}}],["3097",{"pageContent":"/**\n         * The maximum number of unhandled exceptions to allow before failing.\n         *\n         * @var int\n         */\n        public $maxExceptions = 3;\n\n        /**\n         * Execute the job.\n         */\n        public function handle(): void\n        {\n            Redis::throttle('key')->allow(10)->every(60)->then(function () {\n                // Lock obtained, process the podcast...\n            }, function () {\n                // Unable to obtain lock...\n                return $this->release(10);\n            });\n        }\n    }\n\nIn this example, the job is released for ten seconds if the application is unable to obtain a Redis lock and will continue to be retried up to 25 times. However, the job will fail if three unhandled exceptions are thrown by the job.\n\n<a name=\"timeout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1143,"to":1166}}}}],["3098",{"pageContent":"Timeout\n\nOften, you know roughly how long you expect your queued jobs to take. For this reason, Laravel allows you to specify a \"timeout\" value. By default, the timeout value is 60 seconds. If a job is processing for longer than the number of seconds specified by the timeout value, the worker processing the job will exit with an error. Typically, the worker will be restarted automatically by a [process manager configured on your server](#supervisor-configuration).\n\nThe maximum number of seconds that jobs can run may be specified using the `--timeout` switch on the Artisan command line:\n\n```shell\nphp artisan queue:work --timeout=30","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1167,"to":1174}}}}],["3099",{"pageContent":"If the job exceeds its maximum attempts by continually timing out, it will be marked as failed.\n\nYou may also define the maximum number of seconds a job should be allowed to run on the job class itself. If the timeout is specified on the job, it will take precedence over any timeout specified on the command line:\n\n    <?php\n\n    namespace App\\Jobs;\n\n    class ProcessPodcast implements ShouldQueue\n    {\n        /**\n         * The number of seconds the job can run before timing out.\n         *\n         * @var int\n         */\n        public $timeout = 120;\n    }\n\nSometimes, IO blocking processes such as sockets or outgoing HTTP connections may not respect your specified timeout. Therefore, when using these features, you should always attempt to specify a timeout using their APIs as well. For example, when using Guzzle, you should always specify a connection and request timeout value.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1177,"to":1195}}}}],["3100",{"pageContent":"> **Warning**\n> The `pcntl` PHP extension must be installed in order to specify job timeouts. In addition, a job's \"timeout\" value should always be less than its [\"retry after\"](#job-expiration) value. Otherwise, the job may be re-attempted before it has actually finished executing or timed out.\n\n<a name=\"failing-on-timeout\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1197,"to":1200}}}}],["3101",{"pageContent":"Failing On Timeout\n\nIf you would like to indicate that a job should be marked as [failed](#dealing-with-failed-jobs) on timeout, you may define the `$failOnTimeout` property on the job class:\n\n```php\n/**\n * Indicate if the job should be marked as failed on timeout.\n *\n * @var bool\n */\npublic $failOnTimeout = true;\n```\n\n<a name=\"error-handling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1201,"to":1214}}}}],["3102",{"pageContent":"Error Handling\n\nIf an exception is thrown while the job is being processed, the job will automatically be released back onto the queue so it may be attempted again. The job will continue to be released until it has been attempted the maximum number of times allowed by your application. The maximum number of attempts is defined by the `--tries` switch used on the `queue:work` Artisan command. Alternatively, the maximum number of attempts may be defined on the job class itself. More information on running the queue worker [can be found below](#running-the-queue-worker).\n\n<a name=\"manually-releasing-a-job\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1215,"to":1219}}}}],["3103",{"pageContent":"Manually Releasing A Job\n\nSometimes you may wish to manually release a job back onto the queue so that it can be attempted again at a later time. You may accomplish this by calling the `release` method:\n\n    /**\n     * Execute the job.\n     */\n    public function handle(): void\n    {\n        // ...\n\n        $this->release();\n    }\n\nBy default, the `release` method will release the job back onto the queue for immediate processing. However, you may instruct the queue to not make the job available for processing until a given number of seconds has elapsed by passing an integer or date instance to the `release` method:\n\n    $this->release(10);\n\n    $this->release(now()->addSeconds(10));\n\n<a name=\"manually-failing-a-job\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1220,"to":1240}}}}],["3104",{"pageContent":"Manually Failing A Job\n\nOccasionally you may need to manually mark a job as \"failed\". To do so, you may call the `fail` method:\n\n    /**\n     * Execute the job.\n     */\n    public function handle(): void\n    {\n        // ...\n\n        $this->fail();\n    }\n\nIf you would like to mark your job as failed because of an exception that you have caught, you may pass the exception to the `fail` method. Or, for convenience, you may pass a string error message which will be converted to an exception for you:\n\n    $this->fail($exception);\n\n    $this->fail('Something went wrong.');\n\n> **Note**  \n> For more information on failed jobs, check out the [documentation on dealing with job failures](#dealing-with-failed-jobs).\n\n<a name=\"job-batching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1241,"to":1264}}}}],["3105",{"pageContent":"Job Batching\n\nLaravel's job batching feature allows you to easily execute a batch of jobs and then perform some action when the batch of jobs has completed executing. Before getting started, you should create a database migration to build a table to contain meta information about your job batches, such as their completion percentage. This migration may be generated using the `queue:batches-table` Artisan command:\n\n```shell\nphp artisan queue:batches-table\n\nphp artisan migrate\n```\n\n<a name=\"defining-batchable-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1265,"to":1275}}}}],["3106",{"pageContent":"Defining Batchable Jobs\n\nTo define a batchable job, you should [create a queueable job](#creating-jobs) as normal; however, you should add the `Illuminate\\Bus\\Batchable` trait to the job class. This trait provides access to a `batch` method which may be used to retrieve the current batch that the job is executing within:\n\n    <?php\n\n    namespace App\\Jobs;\n\n    use Illuminate\\Bus\\Batchable;\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Foundation\\Bus\\Dispatchable;\n    use Illuminate\\Queue\\InteractsWithQueue;\n    use Illuminate\\Queue\\SerializesModels;\n\n    class ImportCsv implements ShouldQueue\n    {\n        use Batchable, Dispatchable, InteractsWithQueue, Queueable, SerializesModels;\n\n        /**\n         * Execute the job.\n         */\n        public function handle(): void\n        {\n            if ($this->batch()->cancelled()) {\n                // Determine if the batch has been cancelled...\n\n                return;\n            }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1276,"to":1304}}}}],["3107",{"pageContent":"return;\n            }\n\n            // Import a portion of the CSV file...\n        }\n    }\n\n<a name=\"dispatching-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1304,"to":1311}}}}],["3108",{"pageContent":"Dispatching Batches\n\nTo dispatch a batch of jobs, you should use the `batch` method of the `Bus` facade. Of course, batching is primarily useful when combined with completion callbacks. So, you may use the `then`, `catch`, and `finally` methods to define completion callbacks for the batch. Each of these callbacks will receive an `Illuminate\\Bus\\Batch` instance when they are invoked. In this example, we will imagine we are queueing a batch of jobs that each process a given number of rows from a CSV file:\n\n    use App\\Jobs\\ImportCsv;\n    use Illuminate\\Bus\\Batch;\n    use Illuminate\\Support\\Facades\\Bus;\n    use Throwable;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1312,"to":1319}}}}],["3109",{"pageContent":"use App\\Jobs\\ImportCsv;\n    use Illuminate\\Bus\\Batch;\n    use Illuminate\\Support\\Facades\\Bus;\n    use Throwable;\n\n    $batch = Bus::batch([\n        new ImportCsv(1, 100),\n        new ImportCsv(101, 200),\n        new ImportCsv(201, 300),\n        new ImportCsv(301, 400),\n        new ImportCsv(401, 500),\n    ])->then(function (Batch $batch) {\n        // All jobs completed successfully...\n    })->catch(function (Batch $batch, Throwable $e) {\n        // First batch job failure detected...\n    })->finally(function (Batch $batch) {\n        // The batch has finished executing...\n    })->dispatch();\n\n    return $batch->id;\n\nThe batch's ID, which may be accessed via the `$batch->id` property, may be used to [query the Laravel command bus](#inspecting-batches) for information about the batch after it has been dispatched.\n\n> **Warning**  \n> Since batch callbacks are serialized and executed at a later time by the Laravel queue, you should not use the `$this` variable within the callbacks.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1319,"to":1343}}}}],["3110",{"pageContent":"> **Warning**  \n> Since batch callbacks are serialized and executed at a later time by the Laravel queue, you should not use the `$this` variable within the callbacks.\n\n<a name=\"naming-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1343,"to":1346}}}}],["3111",{"pageContent":"Naming Batches\n\nSome tools such as Laravel Horizon and Laravel Telescope may provide more user-friendly debug information for batches if batches are named. To assign an arbitrary name to a batch, you may call the `name` method while defining the batch:\n\n    $batch = Bus::batch([\n        // ...\n    ])->then(function (Batch $batch) {\n        // All jobs completed successfully...\n    })->name('Import CSV')->dispatch();\n\n<a name=\"batch-connection-queue\"></a>\n#### Batch Connection & Queue\n\nIf you would like to specify the connection and queue that should be used for the batched jobs, you may use the `onConnection` and `onQueue` methods. All batched jobs must execute within the same connection and queue:\n\n    $batch = Bus::batch([\n        // ...\n    ])->then(function (Batch $batch) {\n        // All jobs completed successfully...\n    })->onConnection('redis')->onQueue('imports')->dispatch();\n\n<a name=\"chains-and-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1347,"to":1368}}}}],["3112",{"pageContent":"Chains & Batches\n\nYou may define a set of [chained jobs](#job-chaining) within a batch by placing the chained jobs within an array. For example, we may execute two job chains in parallel and execute a callback when both job chains have finished processing:\n\n    use App\\Jobs\\ReleasePodcast;\n    use App\\Jobs\\SendPodcastReleaseNotification;\n    use Illuminate\\Bus\\Batch;\n    use Illuminate\\Support\\Facades\\Bus;\n\n    Bus::batch([\n        [\n            new ReleasePodcast(1),\n            new SendPodcastReleaseNotification(1),\n        ],\n        [\n            new ReleasePodcast(2),\n            new SendPodcastReleaseNotification(2),\n        ],\n    ])->then(function (Batch $batch) {\n        // ...\n    })->dispatch();\n\nConversely, you may run batches of jobs within a [chain](#job-chaining) by defining batches within the chain. For example, you could first run a batch of jobs to release multiple podcasts then a batch of jobs to send the release notifications:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1369,"to":1391}}}}],["3113",{"pageContent":"use App\\Jobs\\FlushPodcastCache;\n    use App\\Jobs\\ReleasePodcast;\n    use App\\Jobs\\SendPodcastReleaseNotification;\n    use Illuminate\\Support\\Facades\\Bus;\n\n    Bus::chain([\n        new FlushPodcastCache,\n        Bus::batch([\n            new ReleasePodcast(1),\n            new ReleasePodcast(2),\n        ]),\n        Bus::batch([\n            new SendPodcastReleaseNotification(1),\n            new SendPodcastReleaseNotification(2),\n        ]),\n    ])->then(function () {\n        // ...\n    })->dispatch();\n\n<a name=\"adding-jobs-to-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1393,"to":1412}}}}],["3114",{"pageContent":"Adding Jobs To Batches\n\nSometimes it may be useful to add additional jobs to a batch from within a batched job. This pattern can be useful when you need to batch thousands of jobs which may take too long to dispatch during a web request. So, instead, you may wish to dispatch an initial batch of \"loader\" jobs that hydrate the batch with even more jobs:\n\n    $batch = Bus::batch([\n        new LoadImportBatch,\n        new LoadImportBatch,\n        new LoadImportBatch,\n    ])->then(function (Batch $batch) {\n        // All jobs completed successfully...\n    })->name('Import Contacts')->dispatch();\n\nIn this example, we will use the `LoadImportBatch` job to hydrate the batch with additional jobs. To accomplish this, we may use the `add` method on the batch instance that may be accessed via the job's `batch` method:\n\n    use App\\Jobs\\ImportContacts;\n    use Illuminate\\Support\\Collection;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1413,"to":1428}}}}],["3115",{"pageContent":"use App\\Jobs\\ImportContacts;\n    use Illuminate\\Support\\Collection;\n\n    /**\n     * Execute the job.\n     */\n    public function handle(): void\n    {\n        if ($this->batch()->cancelled()) {\n            return;\n        }\n\n        $this->batch()->add(Collection::times(1000, function () {\n            return new ImportContacts;\n        }));\n    }\n\n> **Warning**  \n> You may only add jobs to a batch from within a job that belongs to the same batch.\n\n<a name=\"inspecting-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1428,"to":1448}}}}],["3116",{"pageContent":"Inspecting Batches\n\nThe `Illuminate\\Bus\\Batch` instance that is provided to batch completion callbacks has a variety of properties and methods to assist you in interacting with and inspecting a given batch of jobs:\n\n    // The UUID of the batch...\n    $batch->id;\n\n    // The name of the batch (if applicable)...\n    $batch->name;\n\n    // The number of jobs assigned to the batch...\n    $batch->totalJobs;\n\n    // The number of jobs that have not been processed by the queue...\n    $batch->pendingJobs;\n\n    // The number of jobs that have failed...\n    $batch->failedJobs;\n\n    // The number of jobs that have been processed thus far...\n    $batch->processedJobs();\n\n    // The completion percentage of the batch (0-100)...\n    $batch->progress();\n\n    // Indicates if the batch has finished executing...\n    $batch->finished();\n\n    // Cancel the execution of the batch...\n    $batch->cancel();\n\n    // Indicates if the batch has been cancelled...\n    $batch->cancelled();\n\n<a name=\"returning-batches-from-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1449,"to":1483}}}}],["3117",{"pageContent":"Returning Batches From Routes\n\nAll `Illuminate\\Bus\\Batch` instances are JSON serializable, meaning you can return them directly from one of your application's routes to retrieve a JSON payload containing information about the batch, including its completion progress. This makes it convenient to display information about the batch's completion progress in your application's UI.\n\nTo retrieve a batch by its ID, you may use the `Bus` facade's `findBatch` method:\n\n    use Illuminate\\Support\\Facades\\Bus;\n    use Illuminate\\Support\\Facades\\Route;\n\n    Route::get('/batch/{batchId}', function (string $batchId) {\n        return Bus::findBatch($batchId);\n    });\n\n<a name=\"cancelling-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1484,"to":1497}}}}],["3118",{"pageContent":"Cancelling Batches\n\nSometimes you may need to cancel a given batch's execution. This can be accomplished by calling the `cancel` method on the `Illuminate\\Bus\\Batch` instance:\n\n    /**\n     * Execute the job.\n     */\n    public function handle(): void\n    {\n        if ($this->user->exceedsImportLimit()) {\n            return $this->batch()->cancel();\n        }\n\n        if ($this->batch()->cancelled()) {\n            return;\n        }\n    }\n\nAs you may have noticed in the previous examples, batched jobs should typically determine if their corresponding batch has been cancelled before continuing execution. However, for convenience, you may assign the `SkipIfBatchCancelled` [middleware](#job-middleware) to the job instead. As its name indicates, this middleware will instruct Laravel to not process the job if its corresponding batch has been cancelled:\n\n    use Illuminate\\Queue\\Middleware\\SkipIfBatchCancelled;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1498,"to":1518}}}}],["3119",{"pageContent":"use Illuminate\\Queue\\Middleware\\SkipIfBatchCancelled;\n\n    /**\n     * Get the middleware the job should pass through.\n     */\n    public function middleware(): array\n    {\n        return [new SkipIfBatchCancelled];\n    }\n\n<a name=\"batch-failures\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1518,"to":1528}}}}],["3120",{"pageContent":"Batch Failures\n\nWhen a batched job fails, the `catch` callback (if assigned) will be invoked. This callback is only invoked for the first job that fails within the batch.\n\n<a name=\"allowing-failures\"></a>\n#### Allowing Failures\n\nWhen a job within a batch fails, Laravel will automatically mark the batch as \"cancelled\". If you wish, you may disable this behavior so that a job failure does not automatically mark the batch as cancelled. This may be accomplished by calling the `allowFailures` method while dispatching the batch:\n\n    $batch = Bus::batch([\n        // ...\n    ])->then(function (Batch $batch) {\n        // All jobs completed successfully...\n    })->allowFailures()->dispatch();\n\n<a name=\"retrying-failed-batch-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1529,"to":1544}}}}],["3121",{"pageContent":"Retrying Failed Batch Jobs\n\nFor convenience, Laravel provides a `queue:retry-batch` Artisan command that allows you to easily retry all of the failed jobs for a given batch. The `queue:retry-batch` command accepts the UUID of the batch whose failed jobs should be retried:\n\n```shell\nphp artisan queue:retry-batch 32dbc76c-4f82-4749-b610-a639fe0099b5\n```\n\n<a name=\"pruning-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1545,"to":1553}}}}],["3122",{"pageContent":"Pruning Batches\n\nWithout pruning, the `job_batches` table can accumulate records very quickly. To mitigate this, you should [schedule](/docs/{{version}}/scheduling) the `queue:prune-batches` Artisan command to run daily:\n\n    $schedule->command('queue:prune-batches')->daily();\n\nBy default, all finished batches that are more than 24 hours old will be pruned. You may use the `hours` option when calling the command to determine how long to retain batch data. For example, the following command will delete all batches that finished over 48 hours ago:\n\n    $schedule->command('queue:prune-batches --hours=48')->daily();\n\nSometimes, your `jobs_batches` table may accumulate batch records for batches that never completed successfully, such as batches where a job failed and that job was never retried successfully. You may instruct the `queue:prune-batches` command to prune these unfinished batch records using the `unfinished` option:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1554,"to":1564}}}}],["3123",{"pageContent":"$schedule->command('queue:prune-batches --hours=48 --unfinished=72')->daily();\n\nLikewise, your `jobs_batches` table may also accumulate batch records for cancelled batches. You may instruct the `queue:prune-batches` command to prune these cancelled batch records using the `cancelled` option:\n\n    $schedule->command('queue:prune-batches --hours=48 --cancelled=72')->daily();\n\n<a name=\"queueing-closures\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1566,"to":1572}}}}],["3124",{"pageContent":"Queueing Closures\n\nInstead of dispatching a job class to the queue, you may also dispatch a closure. This is great for quick, simple tasks that need to be executed outside of the current request cycle. When dispatching closures to the queue, the closure's code content is cryptographically signed so that it can not be modified in transit:\n\n    $podcast = App\\Podcast::find(1);\n\n    dispatch(function () use ($podcast) {\n        $podcast->publish();\n    });\n\nUsing the `catch` method, you may provide a closure that should be executed if the queued closure fails to complete successfully after exhausting all of your queue's [configured retry attempts](#max-job-attempts-and-timeout):\n\n    use Throwable;\n\n    dispatch(function () use ($podcast) {\n        $podcast->publish();\n    })->catch(function (Throwable $e) {\n        // This job has failed...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1573,"to":1591}}}}],["3125",{"pageContent":"use Throwable;\n\n    dispatch(function () use ($podcast) {\n        $podcast->publish();\n    })->catch(function (Throwable $e) {\n        // This job has failed...\n    });\n\n> **Warning**  \n> Since `catch` callbacks are serialized and executed at a later time by the Laravel queue, you should not use the `$this` variable within `catch` callbacks.\n\n<a name=\"running-the-queue-worker\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1591,"to":1602}}}}],["3126",{"pageContent":"Running The Queue Worker\n\n<a name=\"the-queue-work-command\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1603,"to":1605}}}}],["3127",{"pageContent":"The `queue:work` Command\n\nLaravel includes an Artisan command that will start a queue worker and process new jobs as they are pushed onto the queue. You may run the worker using the `queue:work` Artisan command. Note that once the `queue:work` command has started, it will continue to run until it is manually stopped or you close your terminal:\n\n```shell\nphp artisan queue:work\n```\n\n> **Note**  \n> To keep the `queue:work` process running permanently in the background, you should use a process monitor such as [Supervisor](#supervisor-configuration) to ensure that the queue worker does not stop running.\n\nYou may include the `-v` flag when invoking the `queue:work` command if you would like the processed job IDs to be included in the command's output:\n\n```shell\nphp artisan queue:work -v","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1606,"to":1620}}}}],["3128",{"pageContent":"Remember, queue workers are long-lived processes and store the booted application state in memory. As a result, they will not notice changes in your code base after they have been started. So, during your deployment process, be sure to [restart your queue workers](#queue-workers-and-deployment). In addition, remember that any static state created or modified by your application will not be automatically reset between jobs.\n\nAlternatively, you may run the `queue:listen` command. When using the `queue:listen` command, you don't have to manually restart the worker when you want to reload your updated code or reset the application state; however, this command is significantly less efficient than the `queue:work` command:\n\n```shell\nphp artisan queue:listen\n```\n\n<a name=\"running-multiple-queue-workers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1623,"to":1631}}}}],["3129",{"pageContent":"Running Multiple Queue Workers\n\nTo assign multiple workers to a queue and process jobs concurrently, you should simply start multiple `queue:work` processes. This can either be done locally via multiple tabs in your terminal or in production using your process manager's configuration settings. [When using Supervisor](#supervisor-configuration), you may use the `numprocs` configuration value.\n\n<a name=\"specifying-the-connection-queue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1632,"to":1636}}}}],["3130",{"pageContent":"Specifying The Connection & Queue\n\nYou may also specify which queue connection the worker should utilize. The connection name passed to the `work` command should correspond to one of the connections defined in your `config/queue.php` configuration file:\n\n```shell\nphp artisan queue:work redis\n```\n\nBy default, the `queue:work` command only processes jobs for the default queue on a given connection. However, you may customize your queue worker even further by only processing particular queues for a given connection. For example, if all of your emails are processed in an `emails` queue on your `redis` queue connection, you may issue the following command to start a worker that only processes that queue:\n\n```shell\nphp artisan queue:work redis --queue=emails\n```\n\n<a name=\"processing-a-specified-number-of-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1637,"to":1651}}}}],["3131",{"pageContent":"Processing A Specified Number Of Jobs\n\nThe `--once` option may be used to instruct the worker to only process a single job from the queue:\n\n```shell\nphp artisan queue:work --once\n```\n\nThe `--max-jobs` option may be used to instruct the worker to process the given number of jobs and then exit. This option may be useful when combined with [Supervisor](#supervisor-configuration) so that your workers are automatically restarted after processing a given number of jobs, releasing any memory they may have accumulated:\n\n```shell\nphp artisan queue:work --max-jobs=1000\n```\n\n<a name=\"processing-all-queued-jobs-then-exiting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1652,"to":1666}}}}],["3132",{"pageContent":"Processing All Queued Jobs & Then Exiting\n\nThe `--stop-when-empty` option may be used to instruct the worker to process all jobs and then exit gracefully. This option can be useful when processing Laravel queues within a Docker container if you wish to shutdown the container after the queue is empty:\n\n```shell\nphp artisan queue:work --stop-when-empty\n```\n\n<a name=\"processing-jobs-for-a-given-number-of-seconds\"></a>\n#### Processing Jobs For A Given Number Of Seconds\n\nThe `--max-time` option may be used to instruct the worker to process jobs for the given number of seconds and then exit. This option may be useful when combined with [Supervisor](#supervisor-configuration) so that your workers are automatically restarted after processing jobs for a given amount of time, releasing any memory they may have accumulated:\n\n```shell\n# Process jobs for one hour and then exit...\nphp artisan queue:work --max-time=3600\n```\n\n<a name=\"worker-sleep-duration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1667,"to":1685}}}}],["3133",{"pageContent":"Worker Sleep Duration\n\nWhen jobs are available on the queue, the worker will keep processing jobs with no delay in between jobs. However, the `sleep` option determines how many seconds the worker will \"sleep\" if there are no jobs available. Of course, while sleeping, the worker will not process any new jobs:\n\n```shell\nphp artisan queue:work --sleep=3\n```\n\n<a name=\"resource-considerations\"></a>\n#### Resource Considerations\n\nDaemon queue workers do not \"reboot\" the framework before processing each job. Therefore, you should release any heavy resources after each job completes. For example, if you are doing image manipulation with the GD library, you should free the memory with `imagedestroy` when you are done processing the image.\n\n<a name=\"queue-priorities\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1686,"to":1699}}}}],["3134",{"pageContent":"Queue Priorities\n\nSometimes you may wish to prioritize how your queues are processed. For example, in your `config/queue.php` configuration file, you may set the default `queue` for your `redis` connection to `low`. However, occasionally you may wish to push a job to a `high` priority queue like so:\n\n    dispatch((new Job)->onQueue('high'));\n\nTo start a worker that verifies that all of the `high` queue jobs are processed before continuing to any jobs on the `low` queue, pass a comma-delimited list of queue names to the `work` command:\n\n```shell\nphp artisan queue:work --queue=high,low\n```\n\n<a name=\"queue-workers-and-deployment\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1700,"to":1712}}}}],["3135",{"pageContent":"Queue Workers & Deployment\n\nSince queue workers are long-lived processes, they will not notice changes to your code without being restarted. So, the simplest way to deploy an application using queue workers is to restart the workers during your deployment process. You may gracefully restart all of the workers by issuing the `queue:restart` command:\n\n```shell\nphp artisan queue:restart\n```\n\nThis command will instruct all queue workers to gracefully exit after they finish processing their current job so that no existing jobs are lost. Since the queue workers will exit when the `queue:restart` command is executed, you should be running a process manager such as [Supervisor](#supervisor-configuration) to automatically restart the queue workers.\n\n> **Note**  \n> The queue uses the [cache](/docs/{{version}}/cache) to store restart signals, so you should verify that a cache driver is properly configured for your application before using this feature.\n\n<a name=\"job-expirations-and-timeouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1713,"to":1726}}}}],["3136",{"pageContent":"Job Expirations & Timeouts\n\n<a name=\"job-expiration\"></a>\n#### Job Expiration\n\nIn your `config/queue.php` configuration file, each queue connection defines a `retry_after` option. This option specifies how many seconds the queue connection should wait before retrying a job that is being processed. For example, if the value of `retry_after` is set to `90`, the job will be released back onto the queue if it has been processing for 90 seconds without being released or deleted. Typically, you should set the `retry_after` value to the maximum number of seconds your jobs should reasonably take to complete processing.\n\n> **Warning**  \n> The only queue connection which does not contain a `retry_after` value is Amazon SQS. SQS will retry the job based on the [Default Visibility Timeout](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/AboutVT.html) which is managed within the AWS console.\n\n<a name=\"worker-timeouts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1727,"to":1737}}}}],["3137",{"pageContent":"Worker Timeouts\n\nThe `queue:work` Artisan command exposes a `--timeout` option. By default, the `--timeout` value is 60 seconds. If a job is processing for longer than the number of seconds specified by the timeout value, the worker processing the job will exit with an error. Typically, the worker will be restarted automatically by a [process manager configured on your server](#supervisor-configuration):\n\n```shell\nphp artisan queue:work --timeout=60","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1738,"to":1743}}}}],["3138",{"pageContent":"The `retry_after` configuration option and the `--timeout` CLI option are different, but work together to ensure that jobs are not lost and that jobs are only successfully processed once.\n\n> **Warning**  \n> The `--timeout` value should always be at least several seconds shorter than your `retry_after` configuration value. This will ensure that a worker processing a frozen job is always terminated before the job is retried. If your `--timeout` option is longer than your `retry_after` configuration value, your jobs may be processed twice.\n\n<a name=\"supervisor-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1746,"to":1751}}}}],["3139",{"pageContent":"Supervisor Configuration\n\nIn production, you need a way to keep your `queue:work` processes running. A `queue:work` process may stop running for a variety of reasons, such as an exceeded worker timeout or the execution of the `queue:restart` command.\n\nFor this reason, you need to configure a process monitor that can detect when your `queue:work` processes exit and automatically restart them. In addition, process monitors can allow you to specify how many `queue:work` processes you would like to run concurrently. Supervisor is a process monitor commonly used in Linux environments and we will discuss how to configure it in the following documentation.\n\n<a name=\"installing-supervisor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1752,"to":1758}}}}],["3140",{"pageContent":"Installing Supervisor\n\nSupervisor is a process monitor for the Linux operating system, and will automatically restart your `queue:work` processes if they fail. To install Supervisor on Ubuntu, you may use the following command:\n\n```shell\nsudo apt-get install supervisor\n```\n\n> **Note**  \n> If configuring and managing Supervisor yourself sounds overwhelming, consider using [Laravel Forge](https://forge.laravel.com), which will automatically install and configure Supervisor for your production Laravel projects.\n\n<a name=\"configuring-supervisor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1759,"to":1770}}}}],["3141",{"pageContent":"Configuring Supervisor\n\nSupervisor configuration files are typically stored in the `/etc/supervisor/conf.d` directory. Within this directory, you may create any number of configuration files that instruct supervisor how your processes should be monitored. For example, let's create a `laravel-worker.conf` file that starts and monitors `queue:work` processes:\n\n```ini\n[program:laravel-worker]\nprocess_name=%(program_name)s_%(process_num)02d\ncommand=php /home/forge/app.com/artisan queue:work sqs --sleep=3 --tries=3 --max-time=3600\nautostart=true\nautorestart=true\nstopasgroup=true\nkillasgroup=true\nuser=forge\nnumprocs=8\nredirect_stderr=true\nstdout_logfile=/home/forge/app.com/worker.log\nstopwaitsecs=3600","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1771,"to":1787}}}}],["3142",{"pageContent":"In this example, the `numprocs` directive will instruct Supervisor to run eight `queue:work` processes and monitor all of them, automatically restarting them if they fail. You should change the `command` directive of the configuration to reflect your desired queue connection and worker options.\n\n> **Warning**  \n> You should ensure that the value of `stopwaitsecs` is greater than the number of seconds consumed by your longest running job. Otherwise, Supervisor may kill the job before it is finished processing.\n\n<a name=\"starting-supervisor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1790,"to":1795}}}}],["3143",{"pageContent":"Starting Supervisor\n\nOnce the configuration file has been created, you may update the Supervisor configuration and start the processes using the following commands:\n\n```shell\nsudo supervisorctl reread\n\nsudo supervisorctl update\n\nsudo supervisorctl start \"laravel-worker:*\"\n```\n\nFor more information on Supervisor, consult the [Supervisor documentation](http://supervisord.org/index.html).\n\n<a name=\"dealing-with-failed-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1796,"to":1810}}}}],["3144",{"pageContent":"Dealing With Failed Jobs\n\nSometimes your queued jobs will fail. Don't worry, things don't always go as planned! Laravel includes a convenient way to [specify the maximum number of times a job should be attempted](#max-job-attempts-and-timeout). After an asynchronous job has exceeded this number of attempts, it will be inserted into the `failed_jobs` database table. [Synchronously dispatched jobs](/docs/{{version}}/queues#synchronous-dispatching) that fail are not stored in this table and their exceptions are immediately handled by the application.\n\nA migration to create the `failed_jobs` table is typically already present in new Laravel applications. However, if your application does not contain a migration for this table, you may use the `queue:failed-table` command to create the migration:\n\n```shell\nphp artisan queue:failed-table\n\nphp artisan migrate","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1811,"to":1820}}}}],["3145",{"pageContent":"When running a [queue worker](#running-the-queue-worker) process, you may specify the maximum number of times a job should be attempted using the `--tries` switch on the `queue:work` command. If you do not specify a value for the `--tries` option, jobs will only be attempted once or as many times as specified by the job class' `$tries` property:\n\n```shell\nphp artisan queue:work redis --tries=3\n```\n\nUsing the `--backoff` option, you may specify how many seconds Laravel should wait before retrying a job that has encountered an exception. By default, a job is immediately released back onto the queue so that it may be attempted again:\n\n```shell\nphp artisan queue:work redis --tries=3 --backoff=3","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1823,"to":1832}}}}],["3146",{"pageContent":"If you would like to configure how many seconds Laravel should wait before retrying a job that has encountered an exception on a per-job basis, you may do so by defining a `backoff` property on your job class:\n\n    /**\n     * The number of seconds to wait before retrying the job.\n     *\n     * @var int\n     */\n    public $backoff = 3;\n\nIf you require more complex logic for determining the job's backoff time, you may define a `backoff` method on your job class:\n\n    /**\n    * Calculate the number of seconds to wait before retrying the job.\n    */\n    public function backoff(): int\n    {\n        return 3;\n    }\n\nYou may easily configure \"exponential\" backoffs by returning an array of backoff values from the `backoff` method. In this example, the retry delay will be 1 second for the first retry, 5 seconds for the second retry, 10 seconds for the third retry, and 10 seconds for every subsequent retry if there are more attempts remaining:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1835,"to":1854}}}}],["3147",{"pageContent":"/**\n    * Calculate the number of seconds to wait before retrying the job.\n    *\n    * @return array<int, int>\n    */\n    public function backoff(): array\n    {\n        return [1, 5, 10];\n    }\n\n<a name=\"cleaning-up-after-failed-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1856,"to":1866}}}}],["3148",{"pageContent":"Cleaning Up After Failed Jobs\n\nWhen a particular job fails, you may want to send an alert to your users or revert any actions that were partially completed by the job. To accomplish this, you may define a `failed` method on your job class. The `Throwable` instance that caused the job to fail will be passed to the `failed` method:\n\n    <?php\n\n    namespace App\\Jobs;\n\n    use App\\Models\\Podcast;\n    use App\\Services\\AudioProcessor;\n    use Illuminate\\Bus\\Queueable;\n    use Illuminate\\Contracts\\Queue\\ShouldQueue;\n    use Illuminate\\Queue\\InteractsWithQueue;\n    use Illuminate\\Queue\\SerializesModels;\n    use Throwable;\n\n    class ProcessPodcast implements ShouldQueue\n    {\n        use InteractsWithQueue, Queueable, SerializesModels;\n\n        /**\n         * Create a new job instance.\n         */\n        public function __construct(\n            public Podcast $podcast,\n        ) {}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1867,"to":1892}}}}],["3149",{"pageContent":"/**\n         * Create a new job instance.\n         */\n        public function __construct(\n            public Podcast $podcast,\n        ) {}\n\n        /**\n         * Execute the job.\n         */\n        public function handle(AudioProcessor $processor): void\n        {\n            // Process uploaded podcast...\n        }\n\n        /**\n         * Handle a job failure.\n         */\n        public function failed(Throwable $exception): void\n        {\n            // Send user notification of failure, etc...\n        }\n    }\n\n> **Warning**  \n> A new instance of the job is instantiated before invoking the `failed` method; therefore, any class property modifications that may have occurred within the `handle` method will be lost.\n\n<a name=\"retrying-failed-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1892,"to":1919}}}}],["3150",{"pageContent":"Retrying Failed Jobs\n\nTo view all of the failed jobs that have been inserted into your `failed_jobs` database table, you may use the `queue:failed` Artisan command:\n\n```shell\nphp artisan queue:failed\n```\n\nThe `queue:failed` command will list the job ID, connection, queue, failure time, and other information about the job. The job ID may be used to retry the failed job. For instance, to retry a failed job that has an ID of `ce7bb17c-cdd8-41f0-a8ec-7b4fef4e5ece`, issue the following command:\n\n```shell\nphp artisan queue:retry ce7bb17c-cdd8-41f0-a8ec-7b4fef4e5ece\n```\n\nIf necessary, you may pass multiple IDs to the command:\n\n```shell\nphp artisan queue:retry ce7bb17c-cdd8-41f0-a8ec-7b4fef4e5ece 91401d2c-0784-4f43-824c-34f94a33c24d\n```\n\nYou may also retry all of the failed jobs for a particular queue:\n\n```shell\nphp artisan queue:retry --queue=name\n```\n\nTo retry all of your failed jobs, execute the `queue:retry` command and pass `all` as the ID:\n\n```shell\nphp artisan queue:retry all","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1920,"to":1949}}}}],["3151",{"pageContent":"To retry all of your failed jobs, execute the `queue:retry` command and pass `all` as the ID:\n\n```shell\nphp artisan queue:retry all\n```\n\nIf you would like to delete a failed job, you may use the `queue:forget` command:\n\n```shell\nphp artisan queue:forget 91401d2c-0784-4f43-824c-34f94a33c24d\n```\n\n> **Note**  \n> When using [Horizon](/docs/{{version}}/horizon), you should use the `horizon:forget` command to delete a failed job instead of the `queue:forget` command.\n\nTo delete all of your failed jobs from the `failed_jobs` table, you may use the `queue:flush` command:\n\n```shell\nphp artisan queue:flush\n```\n\n<a name=\"ignoring-missing-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1949,"to":1970}}}}],["3152",{"pageContent":"Ignoring Missing Models\n\nWhen injecting an Eloquent model into a job, the model is automatically serialized before being placed on the queue and re-retrieved from the database when the job is processed. However, if the model has been deleted while the job was waiting to be processed by a worker, your job may fail with a `ModelNotFoundException`.\n\nFor convenience, you may choose to automatically delete jobs with missing models by setting your job's `deleteWhenMissingModels` property to `true`. When this property is set to `true`, Laravel will quietly discard the job without raising an exception:\n\n    /**\n     * Delete the job if its models no longer exist.\n     *\n     * @var bool\n     */\n    public $deleteWhenMissingModels = true;\n\n<a name=\"pruning-failed-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1971,"to":1984}}}}],["3153",{"pageContent":"Pruning Failed Jobs\n\nYou may prune the records in your application's `failed_jobs` table by invoking the `queue:prune-failed` Artisan command:\n\n```shell\nphp artisan queue:prune-failed\n```\n\nBy default, all the failed job records that are more than 24 hours old will be pruned. If you provide the `--hours` option to the command, only the failed job records that were inserted within the last N number of hours will be retained. For example, the following command will delete all the failed job records that were inserted more than 48 hours ago:\n\n```shell\nphp artisan queue:prune-failed --hours=48\n```\n\n<a name=\"storing-failed-jobs-in-dynamodb\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":1985,"to":1999}}}}],["3154",{"pageContent":"Storing Failed Jobs In DynamoDB\n\nLaravel also provides support for storing your failed job records in [DynamoDB](https://aws.amazon.com/dynamodb) instead of a relational database table. However, you must create a DynamoDB table to store all of the failed job records. Typically, this table should be named `failed_jobs`, but you should name the table based on the value of the `queue.failed.table` configuration value within your application's `queue` configuration file.\n\nThe `failed_jobs` table should have a string primary partition key named `application` and a string primary sort key named `uuid`. The `application` portion of the key will contain your application's name as defined by the `name` configuration value within your application's `app` configuration file. Since the application name is part of the DynamoDB table's key, you can use the same table to store failed jobs for multiple Laravel applications.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2000,"to":2004}}}}],["3155",{"pageContent":"In addition, ensure that you install the AWS SDK so that your Laravel application can communicate with Amazon DynamoDB:\n\n```shell\ncomposer require aws/aws-sdk-php","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2006,"to":2009}}}}],["3156",{"pageContent":"Next, set the `queue.failed.driver` configuration option's value to `dynamodb`. In addition, you should define `key`, `secret`, and `region` configuration options within the failed job configuration array. These options will be used to authenticate with AWS. When using the `dynamodb` driver, the `queue.failed.database` configuration option is unnecessary:\n\n```php\n'failed' => [\n    'driver' => env('QUEUE_FAILED_DRIVER', 'dynamodb'),\n    'key' => env('AWS_ACCESS_KEY_ID'),\n    'secret' => env('AWS_SECRET_ACCESS_KEY'),\n    'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),\n    'table' => 'failed_jobs',\n],\n```\n\n<a name=\"disabling-failed-job-storage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2012,"to":2024}}}}],["3157",{"pageContent":"Disabling Failed Job Storage\n\nYou may instruct Laravel to discard failed jobs without storing them by setting the `queue.failed.driver` configuration option's value to `null`. Typically, this may be accomplished via the `QUEUE_FAILED_DRIVER` environment variable:\n\n```ini\nQUEUE_FAILED_DRIVER=null\n```\n\n<a name=\"failed-job-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2025,"to":2033}}}}],["3158",{"pageContent":"Failed Job Events\n\nIf you would like to register an event listener that will be invoked when a job fails, you may use the `Queue` facade's `failing` method. For example, we may attach a closure to this event from the `boot` method of the `AppServiceProvider` that is included with Laravel:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\Queue;\n    use Illuminate\\Support\\ServiceProvider;\n    use Illuminate\\Queue\\Events\\JobFailed;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }\n\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Queue::failing(function (JobFailed $event) {\n                // $event->connectionName\n                // $event->job\n                // $event->exception\n            });\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2034,"to":2067}}}}],["3159",{"pageContent":"<a name=\"clearing-jobs-from-queues\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2069,"to":2069}}}}],["3160",{"pageContent":"Clearing Jobs From Queues\n\n> **Note**  \n> When using [Horizon](/docs/{{version}}/horizon), you should use the `horizon:clear` command to clear jobs from the queue instead of the `queue:clear` command.\n\nIf you would like to delete all jobs from the default queue of the default connection, you may do so using the `queue:clear` Artisan command:\n\n```shell\nphp artisan queue:clear\n```\n\nYou may also provide the `connection` argument and `queue` option to delete jobs from a specific connection and queue:\n\n```shell\nphp artisan queue:clear redis --queue=emails\n```\n\n> **Warning**  \n> Clearing jobs from queues is only available for the SQS, Redis, and database queue drivers. In addition, the SQS message deletion process takes up to 60 seconds, so jobs sent to the SQS queue up to 60 seconds after you clear the queue might also be deleted.\n\n<a name=\"monitoring-your-queues\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2070,"to":2090}}}}],["3161",{"pageContent":"Monitoring Your Queues\n\nIf your queue receives a sudden influx of jobs, it could become overwhelmed, leading to a long wait time for jobs to complete. If you wish, Laravel can alert you when your queue job count exceeds a specified threshold.\n\nTo get started, you should schedule the `queue:monitor` command to [run every minute](/docs/{{version}}/scheduling). The command accepts the names of the queues you wish to monitor as well as your desired job count threshold:\n\n```shell\nphp artisan queue:monitor redis:default,redis:deployments --max=100","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2091,"to":2098}}}}],["3162",{"pageContent":"Scheduling this command alone is not enough to trigger a notification alerting you of the queue's overwhelmed status. When the command encounters a queue that has a job count exceeding your threshold, an `Illuminate\\Queue\\Events\\QueueBusy` event will be dispatched. You may listen for this event within your application's `EventServiceProvider` in order to send a notification to you or your development team:\n\n```php\nuse App\\Notifications\\QueueHasLongWaitTime;\nuse Illuminate\\Queue\\Events\\QueueBusy;\nuse Illuminate\\Support\\Facades\\Event;\nuse Illuminate\\Support\\Facades\\Notification;\n\n/**\n * Register any other events for your application.\n */\npublic function boot(): void\n{\n    Event::listen(function (QueueBusy $event) {\n        Notification::route('mail', 'dev@example.com')\n                ->notify(new QueueHasLongWaitTime(\n                    $event->connection,\n                    $event->queue,\n                    $event->size\n                ));\n    });\n}\n```\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2101,"to":2125}}}}],["3163",{"pageContent":"Testing\n\nWhen testing code that dispatches jobs, you may wish to instruct Laravel to not actually execute the job itself, since the job's code can be tested directly and separately of the code that dispatches it. Of course, to test the job itself, you may instantiate a job instance and invoke the `handle` method directly in your test.\n\nYou may use the `Queue` facade's `fake` method to prevent queued jobs from actually being pushed to the queue. After calling the `Queue` facade's `fake` method, you may then assert that the application attempted to push jobs to the queue:\n\n    <?php\n\n    namespace Tests\\Feature;\n\n    use App\\Jobs\\AnotherJob;\n    use App\\Jobs\\FinalJob;\n    use App\\Jobs\\ShipOrder;\n    use Illuminate\\Support\\Facades\\Queue;\n    use Tests\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        public function test_orders_can_be_shipped(): void\n        {\n            Queue::fake();\n\n            // Perform order shipping...","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2126,"to":2148}}}}],["3164",{"pageContent":"class ExampleTest extends TestCase\n    {\n        public function test_orders_can_be_shipped(): void\n        {\n            Queue::fake();\n\n            // Perform order shipping...\n\n            // Assert that no jobs were pushed...\n            Queue::assertNothingPushed();\n\n            // Assert a job was pushed to a given queue...\n            Queue::assertPushedOn('queue-name', ShipOrder::class);\n\n            // Assert a job was pushed twice...\n            Queue::assertPushed(ShipOrder::class, 2);\n\n            // Assert a job was not pushed...\n            Queue::assertNotPushed(AnotherJob::class);\n\n            // Assert that a Closure was pushed to the queue...\n            Queue::assertClosurePushed();\n        }\n    }\n\nYou may pass a closure to the `assertPushed` or `assertNotPushed` methods in order to assert that a job was pushed that passes a given \"truth test\". If at least one job was pushed that passes the given truth test then the assertion will be successful:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2148,"to":2173}}}}],["3165",{"pageContent":"Queue::assertPushed(function (ShipOrder $job) use ($order) {\n        return $job->order->id === $order->id;\n    });\n\n<a name=\"faking-a-subset-of-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2175,"to":2179}}}}],["3166",{"pageContent":"Faking A Subset Of Jobs\n\nIf you only need to fake specific jobs while allowing your other jobs to execute normally, you may pass the class names of the jobs that should be faked to the `fake` method:\n\n    public function test_orders_can_be_shipped(): void\n    {\n        Queue::fake([\n            ShipOrder::class,\n        ]);\n\n        // Perform order shipping...\n\n        // Assert a job was pushed twice...\n        Queue::assertPushed(ShipOrder::class, 2);\n    }\n\nYou may fake all jobs except for a set of specified jobs using the `except` method:\n\n    Queue::fake()->except([\n        ShipOrder::class,\n    ]);\n\n<a name=\"testing-job-chains\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2180,"to":2202}}}}],["3167",{"pageContent":"Testing Job Chains\n\nTo test job chains, you will need to utilize the `Bus` facade's faking capabilities. The `Bus` facade's `assertChained` method may be used to assert that a [chain of jobs](/docs/{{version}}/queues#job-chaining) was dispatched. The `assertChained` method accepts an array of chained jobs as its first argument:\n\n    use App\\Jobs\\RecordShipment;\n    use App\\Jobs\\ShipOrder;\n    use App\\Jobs\\UpdateInventory;\n    use Illuminate\\Support\\Facades\\Bus;\n\n    Bus::fake();\n\n    // ...\n\n    Bus::assertChained([\n        ShipOrder::class,\n        RecordShipment::class,\n        UpdateInventory::class\n    ]);\n\nAs you can see in the example above, the array of chained jobs may be an array of the job's class names. However, you may also provide an array of actual job instances. When doing so, Laravel will ensure that the job instances are of the same class and have the same property values of the chained jobs dispatched by your application:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2203,"to":2222}}}}],["3168",{"pageContent":"Bus::assertChained([\n        new ShipOrder,\n        new RecordShipment,\n        new UpdateInventory,\n    ]);\n\nYou may use the `assertDispatchedWithoutChain` method to assert that a job was pushed without a chain of jobs:\n\n    Bus::assertDispatchedWithoutChain(ShipOrder::class);\n\n<a name=\"testing-job-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2224,"to":2234}}}}],["3169",{"pageContent":"Testing Job Batches\n\nThe `Bus` facade's `assertBatched` method may be used to assert that a [batch of jobs](/docs/{{version}}/queues#job-batching) was dispatched. The closure given to the `assertBatched` method receives an instance of `Illuminate\\Bus\\PendingBatch`, which may be used to inspect the jobs within the batch:\n\n    use Illuminate\\Bus\\PendingBatch;\n    use Illuminate\\Support\\Facades\\Bus;\n\n    Bus::fake();\n\n    // ...\n\n    Bus::assertBatched(function (PendingBatch $batch) {\n        return $batch->name == 'import-csv' &&\n               $batch->jobs->count() === 10;\n    });\n\nYou may use the `assertBatchCount` method to assert that a given number of batches were dispatched:\n\n    Bus::assertBatchCount(3);\n\nYou may use `assertNothingBatched` to assert that no batches were dispatched:\n\n    Bus::assertNothingBatched();\n\n<a name=\"testing-job-batch-interaction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2235,"to":2259}}}}],["3170",{"pageContent":"Testing Job / Batch Interaction\n\nIn addition, you may occasionally need to test an individual job's interaction with its underlying batch. For example, you may need to test if a job cancelled further processing for its batch. To accomplish this, you need to assign a fake batch to the job via the `withFakeBatch` method. The `withFakeBatch` method returns a tuple containing the job instance and the fake batch:\n\n    [$job, $batch] = (new ShipOrder)->withFakeBatch();\n\n    $job->handle();\n\n    $this->assertTrue($batch->cancelled());\n    $this->assertEmpty($batch->added);\n\n<a name=\"job-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2260,"to":2271}}}}],["3171",{"pageContent":"Job Events\n\nUsing the `before` and `after` methods on the `Queue` [facade](/docs/{{version}}/facades), you may specify callbacks to be executed before or after a queued job is processed. These callbacks are a great opportunity to perform additional logging or increment statistics for a dashboard. Typically, you should call these methods from the `boot` method of a [service provider](/docs/{{version}}/providers). For example, we may use the `AppServiceProvider` that is included with Laravel:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\Queue;\n    use Illuminate\\Support\\ServiceProvider;\n    use Illuminate\\Queue\\Events\\JobProcessed;\n    use Illuminate\\Queue\\Events\\JobProcessing;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2272,"to":2293}}}}],["3172",{"pageContent":"/**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Queue::before(function (JobProcessing $event) {\n                // $event->connectionName\n                // $event->job\n                // $event->job->payload()\n            });\n\n            Queue::after(function (JobProcessed $event) {\n                // $event->connectionName\n                // $event->job\n                // $event->job->payload()\n            });\n        }\n    }\n\nUsing the `looping` method on the `Queue` [facade](/docs/{{version}}/facades), you may specify callbacks that execute before the worker attempts to fetch a job from a queue. For example, you might register a closure to rollback any transactions that were left open by a previously failed job:\n\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\Support\\Facades\\Queue;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2295,"to":2317}}}}],["3173",{"pageContent":"use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\Support\\Facades\\Queue;\n\n    Queue::looping(function () {\n        while (DB::transactionLevel() > 0) {\n            DB::rollBack();\n        }\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/queues.md","loc":{"lines":{"from":2317,"to":2324}}}}],["3174",{"pageContent":"# Rate Limiting\n\n- [Introduction](#introduction)\n    - [Cache Configuration](#cache-configuration)\n- [Basic Usage](#basic-usage)\n    - [Manually Incrementing Attempts](#manually-incrementing-attempts)\n    - [Clearing Attempts](#clearing-attempts)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":1,"to":9}}}}],["3175",{"pageContent":"Introduction\n\nLaravel includes a simple to use rate limiting abstraction which, in conjunction with your application's [cache](cache), provides an easy way to limit any action during a specified window of time.\n\n> **Note**  \n> If you are interested in rate limiting incoming HTTP requests, please consult the [rate limiter middleware documentation](routing#rate-limiting).\n\n<a name=\"cache-configuration\"></a>\n### Cache Configuration\n\nTypically, the rate limiter utilizes your default application cache as defined by the `default` key within your application's `cache` configuration file. However, you may specify which cache driver the rate limiter should use by defining a `limiter` key within your application's `cache` configuration file:\n\n    'default' => 'memcached',\n\n    'limiter' => 'redis',\n\n<a name=\"basic-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":10,"to":26}}}}],["3176",{"pageContent":"Basic Usage\n\nThe `Illuminate\\Support\\Facades\\RateLimiter` facade may be used to interact with the rate limiter. The simplest method offered by the rate limiter is the `attempt` method, which rate limits a given callback for a given number of seconds.\n\nThe `attempt` method returns `false` when the callback has no remaining attempts available; otherwise, the `attempt` method will return the callback's result or `true`. The first argument accepted by the `attempt` method is a rate limiter \"key\", which may be any string of your choosing that represents the action being rate limited:\n\n    use Illuminate\\Support\\Facades\\RateLimiter;\n\n    $executed = RateLimiter::attempt(\n        'send-message:'.$user->id,\n        $perMinute = 5,\n        function() {\n            // Send message...\n        }\n    );\n\n    if (! $executed) {\n      return 'Too many messages sent!';\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":27,"to":45}}}}],["3177",{"pageContent":"if (! $executed) {\n      return 'Too many messages sent!';\n    }\n\nIf necessary, you may provide a fourth argument to the `attempt` method, which is the \"decay rate\", or the number of seconds until the available attempts are reset. For example, we can modify the example above to allow five attempts every two minutes:\n\n    $executed = RateLimiter::attempt(\n        'send-message:'.$user->id,\n        $perTwoMinutes = 5,\n        function() {\n            // Send message...\n        },\n        $decayRate = 120,\n    );\n\n<a name=\"manually-incrementing-attempts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":45,"to":60}}}}],["3178",{"pageContent":"Manually Incrementing Attempts\n\nIf you would like to manually interact with the rate limiter, a variety of other methods are available. For example, you may invoke the `tooManyAttempts` method to determine if a given rate limiter key has exceeded its maximum number of allowed attempts per minute:\n\n    use Illuminate\\Support\\Facades\\RateLimiter;\n\n    if (RateLimiter::tooManyAttempts('send-message:'.$user->id, $perMinute = 5)) {\n        return 'Too many attempts!';\n    }\n\n    RateLimiter::hit('send-message:'.$user->id);\n\n    // Send message...\n\nAlternatively, you may use the `remaining` method to retrieve the number of attempts remaining for a given key. If a given key has retries remaining, you may invoke the `hit` method to increment the number of total attempts:\n\n    use Illuminate\\Support\\Facades\\RateLimiter;\n\n    if (RateLimiter::remaining('send-message:'.$user->id, $perMinute = 5)) {\n        RateLimiter::hit('send-message:'.$user->id);\n\n        // Send message...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":61,"to":83}}}}],["3179",{"pageContent":"if (RateLimiter::remaining('send-message:'.$user->id, $perMinute = 5)) {\n        RateLimiter::hit('send-message:'.$user->id);\n\n        // Send message...\n    }\n\n<a name=\"determining-limiter-availability\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":83,"to":89}}}}],["3180",{"pageContent":"Determining Limiter Availability\n\nWhen a key has no more attempts left, the `availableIn` method returns the number of seconds remaining until more attempts will be available:\n\n    use Illuminate\\Support\\Facades\\RateLimiter;\n\n    if (RateLimiter::tooManyAttempts('send-message:'.$user->id, $perMinute = 5)) {\n        $seconds = RateLimiter::availableIn('send-message:'.$user->id);\n\n        return 'You may try again in '.$seconds.' seconds.';\n    }\n\n    RateLimiter::hit('send-message:'.$user->id);\n\n    // Send message...\n\n<a name=\"clearing-attempts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":90,"to":106}}}}],["3181",{"pageContent":"Clearing Attempts\n\nYou may reset the number of attempts for a given rate limiter key using the `clear` method. For example, you may reset the number of attempts when a given message is read by the receiver:\n\n    use App\\Models\\Message;\n    use Illuminate\\Support\\Facades\\RateLimiter;\n\n    /**\n     * Mark the message as read.\n     */\n    public function read(Message $message): Message\n    {\n        $message->markAsRead();\n\n        RateLimiter::clear('send-message:'.$message->user_id);\n\n        return $message;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/rate-limiting.md","loc":{"lines":{"from":107,"to":124}}}}],["3182",{"pageContent":"# Laravel Documentation\n\nYou can find the online version of the Laravel documentation at [https://laravel.com/docs](https://laravel.com/docs)\n\n## Contribution Guidelines\n\nIf you are submitting documentation for the **current stable release**, submit it to the corresponding branch. For example, documentation for Laravel 10 would be submitted to the `10.x` branch. Documentation intended for the next release of Laravel should be submitted to the `master` branch.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/readme.md","loc":{"lines":{"from":1,"to":7}}}}],["3183",{"pageContent":"# HTTP Redirects\n\n- [Creating Redirects](#creating-redirects)\n- [Redirecting To Named Routes](#redirecting-named-routes)\n- [Redirecting To Controller Actions](#redirecting-controller-actions)\n- [Redirecting With Flashed Session Data](#redirecting-with-flashed-session-data)\n\n<a name=\"creating-redirects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redirects.md","loc":{"lines":{"from":1,"to":8}}}}],["3184",{"pageContent":"Creating Redirects\n\nRedirect responses are instances of the `Illuminate\\Http\\RedirectResponse` class, and contain the proper headers needed to redirect the user to another URL. There are several ways to generate a `RedirectResponse` instance. The simplest method is to use the global `redirect` helper:\n\n    Route::get('/dashboard', function () {\n        return redirect('/home/dashboard');\n    });\n\nSometimes you may wish to redirect the user to their previous location, such as when a submitted form is invalid. You may do so by using the global `back` helper function. Since this feature utilizes the [session](/docs/{{version}}/session), make sure the route calling the `back` function is using the `web` middleware group or has all of the session middleware applied:\n\n    Route::post('/user/profile', function () {\n        // Validate the request...\n\n        return back()->withInput();\n    });\n\n<a name=\"redirecting-named-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redirects.md","loc":{"lines":{"from":9,"to":25}}}}],["3185",{"pageContent":"Redirecting To Named Routes\n\nWhen you call the `redirect` helper with no parameters, an instance of `Illuminate\\Routing\\Redirector` is returned, allowing you to call any method on the `Redirector` instance. For example, to generate a `RedirectResponse` to a named route, you may use the `route` method:\n\n    return redirect()->route('login');\n\nIf your route has parameters, you may pass them as the second argument to the `route` method:\n\n    // For a route with the following URI: profile/{id}\n\n    return redirect()->route('profile', ['id' => 1]);\n\nFor convenience, Laravel also offers the global `to_route` function:\n\n    return to_route('profile', ['id' => 1]);\n\n<a name=\"populating-parameters-via-eloquent-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redirects.md","loc":{"lines":{"from":26,"to":42}}}}],["3186",{"pageContent":"Populating Parameters Via Eloquent Models\n\nIf you are redirecting to a route with an \"ID\" parameter that is being populated from an Eloquent model, you may pass the model itself. The ID will be extracted automatically:\n\n    // For a route with the following URI: profile/{id}\n\n    return redirect()->route('profile', [$user]);\n\nIf you would like to customize the value that is placed in the route parameter, you should override the `getRouteKey` method on your Eloquent model:\n\n    /**\n     * Get the value of the model's route key.\n     */\n    public function getRouteKey(): mixed\n    {\n        return $this->slug;\n    }\n\n<a name=\"redirecting-controller-actions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redirects.md","loc":{"lines":{"from":43,"to":61}}}}],["3187",{"pageContent":"Redirecting To Controller Actions\n\nYou may also generate redirects to [controller actions](/docs/{{version}}/controllers). To do so, pass the controller and action name to the `action` method:\n\n    use App\\Http\\Controllers\\HomeController;\n\n    return redirect()->action([HomeController::class, 'index']);\n\nIf your controller route requires parameters, you may pass them as the second argument to the `action` method:\n\n    return redirect()->action(\n        [UserController::class, 'profile'], ['id' => 1]\n    );\n\n<a name=\"redirecting-with-flashed-session-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redirects.md","loc":{"lines":{"from":62,"to":76}}}}],["3188",{"pageContent":"Redirecting With Flashed Session Data\n\nRedirecting to a new URL and [flashing data to the session](/docs/{{version}}/session#flash-data) are usually done at the same time. Typically, this is done after successfully performing an action when you flash a success message to the session. For convenience, you may create a `RedirectResponse` instance and flash data to the session in a single, fluent method chain:\n\n    Route::post('/user/profile', function () {\n        // Update the user's profile...\n\n        return redirect('/dashboard')->with('status', 'Profile updated!');\n    });\n\nYou may use the `withInput` method provided by the `RedirectResponse` instance to flash the current request's input data to the session before redirecting the user to a new location. Once the input has been flashed to the session, you may easily [retrieve it](/docs/{{version}}/requests#retrieving-old-input) during the next request:\n\n    return back()->withInput();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redirects.md","loc":{"lines":{"from":77,"to":89}}}}],["3189",{"pageContent":"return back()->withInput();\n\nAfter the user is redirected, you may display the flashed message from the [session](/docs/{{version}}/session). For example, using [Blade syntax](/docs/{{version}}/blade):\n\n    @if (session('status'))\n        <div class=\"alert alert-success\">\n            {{ session('status') }}\n        </div>\n    @endif","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redirects.md","loc":{"lines":{"from":89,"to":97}}}}],["3190",{"pageContent":"# Redis\n\n- [Introduction](#introduction)\n- [Configuration](#configuration)\n    - [Clusters](#clusters)\n    - [Predis](#predis)\n    - [phpredis](#phpredis)\n- [Interacting With Redis](#interacting-with-redis)\n    - [Transactions](#transactions)\n    - [Pipelining Commands](#pipelining-commands)\n- [Pub / Sub](#pubsub)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":1,"to":13}}}}],["3191",{"pageContent":"Introduction\n\n[Redis](https://redis.io) is an open source, advanced key-value store. It is often referred to as a data structure server since keys can contain [strings](https://redis.io/topics/data-types#strings), [hashes](https://redis.io/topics/data-types#hashes), [lists](https://redis.io/topics/data-types#lists), [sets](https://redis.io/topics/data-types#sets), and [sorted sets](https://redis.io/topics/data-types#sorted-sets).\n\nBefore using Redis with Laravel, we encourage you to install and use the [phpredis](https://github.com/phpredis/phpredis) PHP extension via PECL. The extension is more complex to install compared to \"user-land\" PHP packages but may yield better performance for applications that make heavy use of Redis. If you are using [Laravel Sail](/docs/{{version}}/sail), this extension is already installed in your application's Docker container.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":14,"to":18}}}}],["3192",{"pageContent":"If you are unable to install the phpredis extension, you may install the `predis/predis` package via Composer. Predis is a Redis client written entirely in PHP and does not require any additional extensions:\n\n```shell\ncomposer require predis/predis","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":20,"to":23}}}}],["3193",{"pageContent":"<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":26,"to":26}}}}],["3194",{"pageContent":"Configuration\n\nYou may configure your application's Redis settings via the `config/database.php` configuration file. Within this file, you will see a `redis` array containing the Redis servers utilized by your application:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),\n\n        'default' => [\n            'host' => env('REDIS_HOST', '127.0.0.1'),\n            'password' => env('REDIS_PASSWORD'),\n            'port' => env('REDIS_PORT', 6379),\n            'database' => env('REDIS_DB', 0),\n        ],\n\n        'cache' => [\n            'host' => env('REDIS_HOST', '127.0.0.1'),\n            'password' => env('REDIS_PASSWORD'),\n            'port' => env('REDIS_PORT', 6379),\n            'database' => env('REDIS_CACHE_DB', 1),\n        ],\n\n    ],\n\nEach Redis server defined in your configuration file is required to have a name, host, and a port unless you define a single URL to represent the Redis connection:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":27,"to":55}}}}],["3195",{"pageContent":"'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),\n\n        'default' => [\n            'url' => 'tcp://127.0.0.1:6379?database=0',\n        ],\n\n        'cache' => [\n            'url' => 'tls://user:password@127.0.0.1:6380?database=1',\n        ],\n\n    ],\n\n<a name=\"configuring-the-connection-scheme\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":55,"to":69}}}}],["3196",{"pageContent":"Configuring The Connection Scheme\n\nBy default, Redis clients will use the `tcp` scheme when connecting to your Redis servers; however, you may use TLS / SSL encryption by specifying a `scheme` configuration option in your Redis server's configuration array:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),\n\n        'default' => [\n            'scheme' => 'tls',\n            'host' => env('REDIS_HOST', '127.0.0.1'),\n            'password' => env('REDIS_PASSWORD'),\n            'port' => env('REDIS_PORT', 6379),\n            'database' => env('REDIS_DB', 0),\n        ],\n\n    ],\n\n<a name=\"clusters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":70,"to":88}}}}],["3197",{"pageContent":"Clusters\n\nIf your application is utilizing a cluster of Redis servers, you should define these clusters within a `clusters` key of your Redis configuration. This configuration key does not exist by default so you will need to create it within your application's `config/database.php` configuration file:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),\n\n        'clusters' => [\n            'default' => [\n                [\n                    'host' => env('REDIS_HOST', 'localhost'),\n                    'password' => env('REDIS_PASSWORD'),\n                    'port' => env('REDIS_PORT', 6379),\n                    'database' => 0,\n                ],\n            ],\n        ],\n\n    ],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":89,"to":108}}}}],["3198",{"pageContent":"],\n\nBy default, clusters will perform client-side sharding across your nodes, allowing you to pool nodes and create a large amount of available RAM. However, client-side sharding does not handle failover; therefore, it is primarily suited for transient cached data that is available from another primary data store.\n\nIf you would like to use native Redis clustering instead of client-side sharding, you may specify this by setting the `options.cluster` configuration value to `redis` within your application's `config/database.php` configuration file:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),\n\n        'options' => [\n            'cluster' => env('REDIS_CLUSTER', 'redis'),\n        ],\n\n        'clusters' => [\n            // ...\n        ],\n\n    ],\n\n<a name=\"predis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":108,"to":128}}}}],["3199",{"pageContent":"Predis\n\nIf you would like your application to interact with Redis via the Predis package, you should ensure the `REDIS_CLIENT` environment variable's value is `predis`:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'predis'),\n\n        // ...\n    ],\n\nIn addition to the default `host`, `port`, `database`, and `password` server configuration options, Predis supports additional [connection parameters](https://github.com/nrk/predis/wiki/Connection-Parameters) that may be defined for each of your Redis servers. To utilize these additional configuration options, add them to your Redis server configuration in your application's `config/database.php` configuration file:\n\n    'default' => [\n        'host' => env('REDIS_HOST', 'localhost'),\n        'password' => env('REDIS_PASSWORD'),\n        'port' => env('REDIS_PORT', 6379),\n        'database' => 0,\n        'read_write_timeout' => 60,\n    ],\n\n<a name=\"the-redis-facade-alias\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":129,"to":150}}}}],["3200",{"pageContent":"The Redis Facade Alias\n\nLaravel's `config/app.php` configuration file contains an `aliases` array which defines all of the class aliases that will be registered by the framework. By default, no `Redis` alias is included because it would conflict with the `Redis` class name provided by the phpredis extension. If you are using the Predis client and would like to add a `Redis` alias, you may add it to the `aliases` array in your application's `config/app.php` configuration file:\n\n    'aliases' => Facade::defaultAliases()->merge([\n        'Redis' => Illuminate\\Support\\Facades\\Redis::class,\n    ])->toArray(),\n\n<a name=\"phpredis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":151,"to":159}}}}],["3201",{"pageContent":"phpredis\n\nBy default, Laravel will use the phpredis extension to communicate with Redis. The client that Laravel will use to communicate with Redis is dictated by the value of the `redis.client` configuration option, which typically reflects the value of the `REDIS_CLIENT` environment variable:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),\n\n        // Rest of Redis configuration...\n    ],\n\nIn addition to the default `scheme`, `host`, `port`, `database`, and `password` server configuration options, phpredis supports the following additional connection parameters: `name`, `persistent`, `persistent_id`, `prefix`, `read_timeout`, `retry_interval`, `timeout`, and `context`. You may add any of these options to your Redis server configuration in the `config/database.php` configuration file:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":160,"to":171}}}}],["3202",{"pageContent":"'default' => [\n        'host' => env('REDIS_HOST', 'localhost'),\n        'password' => env('REDIS_PASSWORD'),\n        'port' => env('REDIS_PORT', 6379),\n        'database' => 0,\n        'read_timeout' => 60,\n        'context' => [\n            // 'auth' => ['username', 'secret'],\n            // 'stream' => ['verify_peer' => false],\n        ],\n    ],\n\n<a name=\"phpredis-serialization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":173,"to":185}}}}],["3203",{"pageContent":"phpredis Serialization & Compression\n\nThe phpredis extension may also be configured to use a variety of serialization and compression algorithms. These algorithms can be configured via the `options` array of your Redis configuration:\n\n    'redis' => [\n\n        'client' => env('REDIS_CLIENT', 'phpredis'),\n\n        'options' => [\n            'serializer' => Redis::SERIALIZER_MSGPACK,\n            'compression' => Redis::COMPRESSION_LZ4,\n        ],\n\n        // Rest of Redis configuration...\n    ],\n\nCurrently supported serialization algorithms include: `Redis::SERIALIZER_NONE` (default), `Redis::SERIALIZER_PHP`, `Redis::SERIALIZER_JSON`, `Redis::SERIALIZER_IGBINARY`, and `Redis::SERIALIZER_MSGPACK`.\n\nSupported compression algorithms include: `Redis::COMPRESSION_NONE` (default), `Redis::COMPRESSION_LZF`, `Redis::COMPRESSION_ZSTD`, and `Redis::COMPRESSION_LZ4`.\n\n<a name=\"interacting-with-redis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":186,"to":206}}}}],["3204",{"pageContent":"Interacting With Redis\n\nYou may interact with Redis by calling various methods on the `Redis` [facade](/docs/{{version}}/facades). The `Redis` facade supports dynamic methods, meaning you may call any [Redis command](https://redis.io/commands) on the facade and the command will be passed directly to Redis. In this example, we will call the Redis `GET` command by calling the `get` method on the `Redis` facade:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use App\\Http\\Controllers\\Controller;\n    use Illuminate\\Support\\Facades\\Redis;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show the profile for the given user.\n         */\n        public function show(string $id): View\n        {\n            return view('user.profile', [\n                'user' => Redis::get('user:profile:'.$id)\n            ]);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":207,"to":230}}}}],["3205",{"pageContent":"As mentioned above, you may call any of Redis' commands on the `Redis` facade. Laravel uses magic methods to pass the commands to the Redis server. If a Redis command expects arguments, you should pass those to the facade's corresponding method:\n\n    use Illuminate\\Support\\Facades\\Redis;\n\n    Redis::set('name', 'Taylor');\n\n    $values = Redis::lrange('names', 5, 10);\n\nAlternatively, you may pass commands to the server using the `Redis` facade's `command` method, which accepts the name of the command as its first argument and an array of values as its second argument:\n\n    $values = Redis::command('lrange', ['name', 5, 10]);\n\n<a name=\"using-multiple-redis-connections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":232,"to":244}}}}],["3206",{"pageContent":"Using Multiple Redis Connections\n\nYour application's `config/database.php` configuration file allows you to define multiple Redis connections / servers. You may obtain a connection to a specific Redis connection using the `Redis` facade's `connection` method:\n\n    $redis = Redis::connection('connection-name');\n\nTo obtain an instance of the default Redis connection, you may call the `connection` method without any additional arguments:\n\n    $redis = Redis::connection();\n\n<a name=\"transactions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":245,"to":255}}}}],["3207",{"pageContent":"Transactions\n\nThe `Redis` facade's `transaction` method provides a convenient wrapper around Redis' native `MULTI` and `EXEC` commands. The `transaction` method accepts a closure as its only argument. This closure will receive a Redis connection instance and may issue any commands it would like to this instance. All of the Redis commands issued within the closure will be executed in a single, atomic transaction:\n\n    use Redis;\n    use Illuminate\\Support\\Facades;\n\n    Facades\\Redis::transaction(function (Redis $redis) {\n        $redis->incr('user_visits', 1);\n        $redis->incr('total_visits', 1);\n    });\n\n> **Warning**  \n> When defining a Redis transaction, you may not retrieve any values from the Redis connection. Remember, your transaction is executed as a single, atomic operation and that operation is not executed until your entire closure has finished executing its commands.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":256,"to":269}}}}],["3208",{"pageContent":"Lua Scripts\n\nThe `eval` method provides another method of executing multiple Redis commands in a single, atomic operation. However, the `eval` method has the benefit of being able to interact with and inspect Redis key values during that operation. Redis scripts are written in the [Lua programming language](https://www.lua.org).\n\nThe `eval` method can be a bit scary at first, but we'll explore a basic example to break the ice. The `eval` method expects several arguments. First, you should pass the Lua script (as a string) to the method. Secondly, you should pass the number of keys (as an integer) that the script interacts with. Thirdly, you should pass the names of those keys. Finally, you may pass any other additional arguments that you need to access within your script.\n\nIn this example, we will increment a counter, inspect its new value, and increment a second counter if the first counter's value is greater than five. Finally, we will return the value of the first counter:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":271,"to":277}}}}],["3209",{"pageContent":"$value = Redis::eval(<<<'LUA'\n        local counter = redis.call(\"incr\", KEYS[1])\n\n        if counter > 5 then\n            redis.call(\"incr\", KEYS[2])\n        end\n\n        return counter\n    LUA, 2, 'first-counter', 'second-counter');\n\n> **Warning**  \n> Please consult the [Redis documentation](https://redis.io/commands/eval) for more information on Redis scripting.\n\n<a name=\"pipelining-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":279,"to":292}}}}],["3210",{"pageContent":"Pipelining Commands\n\nSometimes you may need to execute dozens of Redis commands. Instead of making a network trip to your Redis server for each command, you may use the `pipeline` method. The `pipeline` method accepts one argument: a closure that receives a Redis instance. You may issue all of your commands to this Redis instance and they will all be sent to the Redis server at the same time to reduce network trips to the server. The commands will still be executed in the order they were issued:\n\n    use Redis;\n    use Illuminate\\Support\\Facades;\n\n    Facades\\Redis::pipeline(function (Redis $pipe) {\n        for ($i = 0; $i < 1000; $i++) {\n            $pipe->set(\"key:$i\", $i);\n        }\n    });\n\n<a name=\"pubsub\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":293,"to":306}}}}],["3211",{"pageContent":"Pub / Sub\n\nLaravel provides a convenient interface to the Redis `publish` and `subscribe` commands. These Redis commands allow you to listen for messages on a given \"channel\". You may publish messages to the channel from another application, or even using another programming language, allowing easy communication between applications and processes.\n\nFirst, let's setup a channel listener using the `subscribe` method. We'll place this method call within an [Artisan command](/docs/{{version}}/artisan) since calling the `subscribe` method begins a long-running process:\n\n    <?php\n\n    namespace App\\Console\\Commands;\n\n    use Illuminate\\Console\\Command;\n    use Illuminate\\Support\\Facades\\Redis;\n\n    class RedisSubscribe extends Command\n    {\n        /**\n         * The name and signature of the console command.\n         *\n         * @var string\n         */\n        protected $signature = 'redis:subscribe';","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":307,"to":327}}}}],["3212",{"pageContent":"/**\n         * The console command description.\n         *\n         * @var string\n         */\n        protected $description = 'Subscribe to a Redis channel';\n\n        /**\n         * Execute the console command.\n         */\n        public function handle(): void\n        {\n            Redis::subscribe(['test-channel'], function (string $message) {\n                echo $message;\n            });\n        }\n    }\n\nNow we may publish messages to the channel using the `publish` method:\n\n    use Illuminate\\Support\\Facades\\Redis;\n\n    Route::get('/publish', function () {\n        // ...\n\n        Redis::publish('test-channel', json_encode([\n            'name' => 'Adam Wathan'\n        ]));\n    });\n\n<a name=\"wildcard-subscriptions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":329,"to":359}}}}],["3213",{"pageContent":"Wildcard Subscriptions\n\nUsing the `psubscribe` method, you may subscribe to a wildcard channel, which may be useful for catching all messages on all channels. The channel name will be passed as the second argument to the provided closure:\n\n    Redis::psubscribe(['*'], function (string $message, string $channel) {\n        echo $message;\n    });\n\n    Redis::psubscribe(['users.*'], function (string $message, string $channel) {\n        echo $message;\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/redis.md","loc":{"lines":{"from":360,"to":370}}}}],["3214",{"pageContent":"# Release Notes\n\n- [Versioning Scheme](#versioning-scheme)\n- [Support Policy](#support-policy)\n- [Laravel 10](#laravel-10)\n\n<a name=\"versioning-scheme\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":1,"to":7}}}}],["3215",{"pageContent":"Versioning Scheme\n\nLaravel and its other first-party packages follow [Semantic Versioning](https://semver.org). Major framework releases are released every year (~Q1), while minor and patch releases may be released as often as every week. Minor and patch releases should **never** contain breaking changes.\n\nWhen referencing the Laravel framework or its components from your application or package, you should always use a version constraint such as `^10.0`, since major releases of Laravel do include breaking changes. However, we strive to always ensure you may update to a new major release in one day or less.\n\n<a name=\"named-arguments\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":8,"to":14}}}}],["3216",{"pageContent":"Named Arguments\n\n[Named arguments](https://www.php.net/manual/en/functions.arguments.php#functions.named-arguments) are not covered by Laravel's backwards compatibility guidelines. We may choose to rename function arguments when necessary in order to improve the Laravel codebase. Therefore, using named arguments when calling Laravel methods should be done cautiously and with the understanding that the parameter names may change in the future.\n\n<a name=\"support-policy\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":15,"to":19}}}}],["3217",{"pageContent":"Support Policy\n\nFor all Laravel releases, bug fixes are provided for 18 months and security fixes are provided for 2 years. For all additional libraries, including Lumen, only the latest major release receives bug fixes. In addition, please review the database versions [supported by Laravel](/docs/{{version}}/database#introduction).\n\n\n<div class=\"overflow-auto\">\n\n| Version | PHP (*) | Release | Bug Fixes Until | Security Fixes Until |\n| --- | --- | --- | --- | --- |\n| 8 | 7.3 - 8.1 | September 8th, 2020 | July 26th, 2022 | January 24th, 2023 |\n| 9 | 8.0 - 8.2 | February 8th, 2022 | August 8th, 2023 | February 6th, 2024 |\n| 10 | 8.1 - 8.2 | February 14th, 2023 | August 6th, 2024 | February 4th, 2025 |\n| 11 | 8.2 | Q1 2024 | August 5th, 2025 | February 3rd, 2026 |\n\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":20,"to":34}}}}],["3218",{"pageContent":"</div>\n\n<div class=\"version-colors\">\n    <div class=\"end-of-life\">\n        <div class=\"color-box\"></div>\n        <div>End of life</div>\n    </div>\n    <div class=\"security-fixes\">\n        <div class=\"color-box\"></div>\n        <div>Security fixes only</div>\n    </div>\n</div>\n\n(*) Supported PHP versions\n\n<a name=\"laravel-10\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":34,"to":49}}}}],["3219",{"pageContent":"Laravel 10\n\nAs you may know, Laravel transitioned to yearly releases with the release of Laravel 8. Previously, major versions were released every 6 months. This transition is intended to ease the maintenance burden on the community and challenge our development team to ship amazing, powerful new features without introducing breaking changes. Therefore, we have shipped a variety of robust features to Laravel 9 without breaking backwards compatibility.\n\nTherefore, this commitment to ship great new features during the current release will likely lead to future \"major\" releases being primarily used for \"maintenance\" tasks such as upgrading upstream dependencies, which can be seen in these release notes.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":50,"to":54}}}}],["3220",{"pageContent":"Laravel 10 continues the improvements made in Laravel 9.x by introducing argument and return types to all application skeleton methods, as well as all stub files used to generate classes throughout the framework. In addition, a new, developer-friendly abstraction layer has been introduced for starting and interacting with external processes. Further, Laravel Pennant has been introduced to provide a wonderful approach to managing your application's \"feature flags\".\n\n<a name=\"php-8\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":56,"to":58}}}}],["3221",{"pageContent":"PHP 8.1\n\nLaravel 10.x requires a minimum PHP version of 8.1.\n\n<a name=\"types\"></a>\n### Types\n\n_Application skeleton and stub type-hints were contributed by [Nuno Maduro](https://github.com/nunomaduro)_.\n\nOn its initial release, Laravel utilized all of the type-hinting features available in PHP at the time. However, many new features have been added to PHP in the subsequent years, including additional primitive type-hints, return types, and union types.\n\nLaravel 10.x thoroughly updates the application skeleton and all stubs utilized by the framework to introduce argument and return types to all method signatures. In addition, extraneous \"doc block\" type-hint information has been deleted.\n\nThis change is entirely backwards compatible with existing applications. Therefore, existing applications that do not have these type-hints will continue to function normally.\n\n<a name=\"laravel-pennant\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":59,"to":74}}}}],["3222",{"pageContent":"Laravel Pennant\n\n_Laravel Pennant was developed by [Tim MacDonald](https://github.com/timacdonald)_.\n\nA new first-party package, Laravel Pennant, has been released. Laravel Pennant offers a light-weight, streamlined approach to managing your application's feature flags. Out of the box, Pennant includes an in-memory `array` driver and a `database` driver for persistent feature storage.\n\nFeatures can be easily defined via the `Feature::define` method:\n\n```php\nuse Laravel\\Pennant\\Feature;\nuse Illuminate\\Support\\Lottery;\n\nFeature::define('new-onboarding-flow', function () {\n    return Lottery::odds(1, 10);\n});\n```\n\nOnce a feature has been defined, you may easily determine if the current user has access to the given feature:\n\n```php\nif (Feature::active('new-onboarding-flow')) {\n    // ...\n}\n```\n\nOf course, for convenience, Blade directives are also available:\n\n```blade\n@feature('new-onboarding-flow')\n    <div>\n        <!-- ... -->\n    </div>\n@endfeature","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":75,"to":107}}}}],["3223",{"pageContent":"Of course, for convenience, Blade directives are also available:\n\n```blade\n@feature('new-onboarding-flow')\n    <div>\n        <!-- ... -->\n    </div>\n@endfeature\n```\n\nPennant offers a variety of more advanced features and APIs. For more information, please consult the [comprehensive Pennant documentation](/docs/{{version}}/pennant).\n\n<a name=\"process\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":107,"to":119}}}}],["3224",{"pageContent":"Process Interaction\n\n_The process abstraction layer was contributed by [Nuno Maduro](https://github.com/nunomaduro) and [Taylor Otwell](https://github.com/taylorotwell)_.\n\nLaravel 10.x introduces a beautiful abstraction layer for starting and interacting with external processes via a new `Process` facade:\n\n```php\nuse Illuminate\\Support\\Facades\\Process;\n\n$result = Process::run('ls -la');\n\nreturn $result->output();\n```\n\nProcesses may even be started in pools, allowing for the convenient execution and management of concurrent processes:\n\n```php\nuse Illuminate\\Process\\Pool;\nuse Illuminate\\Support\\Facades\\Process;\n\n[$first, $second, $third] = Process::concurrently(function (Pool $pool) {\n    $pool->command('cat first.txt');\n    $pool->command('cat second.txt');\n    $pool->command('cat third.txt');\n});\n\nreturn $first->output();\n```\n\nIn addition, processes may be faked for convenient testing:\n\n```php\nProcess::fake();\n\n// ...\n\nProcess::assertRan('ls -la');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":120,"to":156}}}}],["3225",{"pageContent":"In addition, processes may be faked for convenient testing:\n\n```php\nProcess::fake();\n\n// ...\n\nProcess::assertRan('ls -la');\n```\n\nFor more information on interacting with processes, please consult the [comprehensive process documentation](/docs/{{version}}/processes).\n\n<a name=\"test-profiling\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":156,"to":168}}}}],["3226",{"pageContent":"Test Profiling\n\n_Test profiling was contributed by [Nuno Maduro](https://github.com/nunomaduro)_.\n\nThe Artisan `test` command has received a new `--profile` option that allows you to easily identify the slowest tests in your application:\n\n```shell\nphp artisan test --profile\n```\n\nFor convenience, the slowest tests will be displayed directly within the CLI output:\n\n<p align=\"center\">\n    <img width=\"100%\" src=\"https://user-images.githubusercontent.com/5457236/217328439-d8d983ec-d0fc-4cde-93d9-ae5bccf5df14.png\"/>\n</p>\n\n<a name=\"pest-scaffolding\"></a>\n### Pest Scaffolding\n\nNew Laravel projects may now be created with Pest test scaffolding by default. To opt-in to this feature, provide the `--pest` flag when creating a new application via the Laravel installer:\n\n```shell\nlaravel new example-application --pest\n```\n\n<a name=\"generator-cli-prompts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":169,"to":194}}}}],["3227",{"pageContent":"Generator CLI Prompts\n\n_Generator CLI prompts were contributed by [Jess Archer](https://github.com/jessarcher)_.\n\nTo improve the framework's developer experience, all of Laravel's built-in `make` commands no longer require any input. If the commands are invoked without input, you will be prompted for the required arguments:\n\n```shell\nphp artisan make:controller\n```\n\n<a name=\"horizon-telescope-facelift\"></a>\n### Horizon / Telescope Facelift\n\n[Horizon](/docs/{{version}}/horizon) and [Telescope](/docs/{{version}}/telescope) have been updated with a fresh, modern look including improved typography, spacing, and design:\n\n<img src=\"https://laravel.com/img/docs/horizon-example.png\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/releases.md","loc":{"lines":{"from":195,"to":210}}}}],["3228",{"pageContent":"# HTTP Requests\n\n- [Introduction](#introduction)\n- [Interacting With The Request](#interacting-with-the-request)\n    - [Accessing The Request](#accessing-the-request)\n    - [Request Path, Host, & Method](#request-path-and-method)\n    - [Request Headers](#request-headers)\n    - [Request IP Address](#request-ip-address)\n    - [Content Negotiation](#content-negotiation)\n    - [PSR-7 Requests](#psr7-requests)\n- [Input](#input)\n    - [Retrieving Input](#retrieving-input)\n    - [Determining If Input Is Present](#determining-if-input-is-present)\n    - [Merging Additional Input](#merging-additional-input)\n    - [Old Input](#old-input)\n    - [Cookies](#cookies)\n    - [Input Trimming & Normalization](#input-trimming-and-normalization)\n- [Files](#files)\n    - [Retrieving Uploaded Files](#retrieving-uploaded-files)\n    - [Storing Uploaded Files](#storing-uploaded-files)\n- [Configuring Trusted Proxies](#configuring-trusted-proxies)\n- [Configuring Trusted Hosts](#configuring-trusted-hosts)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":1,"to":22}}}}],["3229",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":24,"to":24}}}}],["3230",{"pageContent":"Introduction\n\nLaravel's `Illuminate\\Http\\Request` class provides an object-oriented way to interact with the current HTTP request being handled by your application as well as retrieve the input, cookies, and files that were submitted with the request.\n\n<a name=\"interacting-with-the-request\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":25,"to":29}}}}],["3231",{"pageContent":"Interacting With The Request\n\n<a name=\"accessing-the-request\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":30,"to":32}}}}],["3232",{"pageContent":"Accessing The Request\n\nTo obtain an instance of the current HTTP request via dependency injection, you should type-hint the `Illuminate\\Http\\Request` class on your route closure or controller method. The incoming request instance will automatically be injected by the Laravel [service container](/docs/{{version}}/container):\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class UserController extends Controller\n    {\n        /**\n         * Store a new user.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $name = $request->input('name');\n\n            // Store the user...\n\n            return redirect('/users');\n        }\n    }\n\nAs mentioned, you may also type-hint the `Illuminate\\Http\\Request` class on a route closure. The service container will automatically inject the incoming request into the closure when it is executed:\n\n    use Illuminate\\Http\\Request;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":33,"to":61}}}}],["3233",{"pageContent":"use Illuminate\\Http\\Request;\n\n    Route::get('/', function (Request $request) {\n        // ...\n    });\n\n<a name=\"dependency-injection-route-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":61,"to":67}}}}],["3234",{"pageContent":"Dependency Injection & Route Parameters\n\nIf your controller method is also expecting input from a route parameter you should list your route parameters after your other dependencies. For example, if your route is defined like so:\n\n    use App\\Http\\Controllers\\UserController;\n\n    Route::put('/user/{id}', [UserController::class, 'update']);\n\nYou may still type-hint the `Illuminate\\Http\\Request` and access your `id` route parameter by defining your controller method as follows:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n\n    class UserController extends Controller\n    {\n        /**\n         * Update the specified user.\n         */\n        public function update(Request $request, string $id): RedirectResponse\n        {\n            // Update the user...\n\n            return redirect('/users');\n        }\n    }\n\n<a name=\"request-path-and-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":68,"to":98}}}}],["3235",{"pageContent":"Request Path, Host, & Method\n\nThe `Illuminate\\Http\\Request` instance provides a variety of methods for examining the incoming HTTP request and extends the `Symfony\\Component\\HttpFoundation\\Request` class. We will discuss a few of the most important methods below.\n\n<a name=\"retrieving-the-request-path\"></a>\n#### Retrieving The Request Path\n\nThe `path` method returns the request's path information. So, if the incoming request is targeted at `http://example.com/foo/bar`, the `path` method will return `foo/bar`:\n\n    $uri = $request->path();\n\n<a name=\"inspecting-the-request-path\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":99,"to":110}}}}],["3236",{"pageContent":"Inspecting The Request Path / Route\n\nThe `is` method allows you to verify that the incoming request path matches a given pattern. You may use the `*` character as a wildcard when utilizing this method:\n\n    if ($request->is('admin/*')) {\n        // ...\n    }\n\nUsing the `routeIs` method, you may determine if the incoming request has matched a [named route](/docs/{{version}}/routing#named-routes):\n\n    if ($request->routeIs('admin.*')) {\n        // ...\n    }\n\n<a name=\"retrieving-the-request-url\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":111,"to":125}}}}],["3237",{"pageContent":"Retrieving The Request URL\n\nTo retrieve the full URL for the incoming request you may use the `url` or `fullUrl` methods. The `url` method will return the URL without the query string, while the `fullUrl` method includes the query string:\n\n    $url = $request->url();\n\n    $urlWithQueryString = $request->fullUrl();\n\nIf you would like to append query string data to the current URL, you may call the `fullUrlWithQuery` method. This method merges the given array of query string variables with the current query string:\n\n    $request->fullUrlWithQuery(['type' => 'phone']);\n\nIf you would like to get the current URL without a given query string parameter, you may utilize the `fullUrlWithoutQuery` method:\n\n```php\n$request->fullUrlWithoutQuery(['type']);\n```\n\n<a name=\"retrieving-the-request-host\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":126,"to":144}}}}],["3238",{"pageContent":"Retrieving The Request Host\n\nYou may retrieve the \"host\" of the incoming request via the `host`, `httpHost`, and `schemeAndHttpHost` methods:\n\n    $request->host();\n    $request->httpHost();\n    $request->schemeAndHttpHost();\n\n<a name=\"retrieving-the-request-method\"></a>\n#### Retrieving The Request Method\n\nThe `method` method will return the HTTP verb for the request. You may use the `isMethod` method to verify that the HTTP verb matches a given string:\n\n    $method = $request->method();\n\n    if ($request->isMethod('post')) {\n        // ...\n    }\n\n<a name=\"request-headers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":145,"to":164}}}}],["3239",{"pageContent":"Request Headers\n\nYou may retrieve a request header from the `Illuminate\\Http\\Request` instance using the `header` method. If the header is not present on the request, `null` will be returned. However, the `header` method accepts an optional second argument that will be returned if the header is not present on the request:\n\n    $value = $request->header('X-Header-Name');\n\n    $value = $request->header('X-Header-Name', 'default');\n\nThe `hasHeader` method may be used to determine if the request contains a given header:\n\n    if ($request->hasHeader('X-Header-Name')) {\n        // ...\n    }\n\nFor convenience, the `bearerToken` method may be used to retrieve a bearer token from the `Authorization` header. If no such header is present, an empty string will be returned:\n\n    $token = $request->bearerToken();\n\n<a name=\"request-ip-address\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":165,"to":183}}}}],["3240",{"pageContent":"Request IP Address\n\nThe `ip` method may be used to retrieve the IP address of the client that made the request to your application:\n\n    $ipAddress = $request->ip();\n\n<a name=\"content-negotiation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":184,"to":190}}}}],["3241",{"pageContent":"Content Negotiation\n\nLaravel provides several methods for inspecting the incoming request's requested content types via the `Accept` header. First, the `getAcceptableContentTypes` method will return an array containing all of the content types accepted by the request:\n\n    $contentTypes = $request->getAcceptableContentTypes();\n\nThe `accepts` method accepts an array of content types and returns `true` if any of the content types are accepted by the request. Otherwise, `false` will be returned:\n\n    if ($request->accepts(['text/html', 'application/json'])) {\n        // ...\n    }\n\nYou may use the `prefers` method to determine which content type out of a given array of content types is most preferred by the request. If none of the provided content types are accepted by the request, `null` will be returned:\n\n    $preferred = $request->prefers(['text/html', 'application/json']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":191,"to":205}}}}],["3242",{"pageContent":"$preferred = $request->prefers(['text/html', 'application/json']);\n\nSince many applications only serve HTML or JSON, you may use the `expectsJson` method to quickly determine if the incoming request expects a JSON response:\n\n    if ($request->expectsJson()) {\n        // ...\n    }\n\n<a name=\"psr7-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":205,"to":213}}}}],["3243",{"pageContent":"PSR-7 Requests\n\nThe [PSR-7 standard](https://www.php-fig.org/psr/psr-7/) specifies interfaces for HTTP messages, including requests and responses. If you would like to obtain an instance of a PSR-7 request instead of a Laravel request, you will first need to install a few libraries. Laravel uses the *Symfony HTTP Message Bridge* component to convert typical Laravel requests and responses into PSR-7 compatible implementations:\n\n```shell\ncomposer require symfony/psr-http-message-bridge\ncomposer require nyholm/psr7","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":214,"to":220}}}}],["3244",{"pageContent":"Once you have installed these libraries, you may obtain a PSR-7 request by type-hinting the request interface on your route closure or controller method:\n\n    use Psr\\Http\\Message\\ServerRequestInterface;\n\n    Route::get('/', function (ServerRequestInterface $request) {\n        // ...\n    });\n\n> **Note**  \n> If you return a PSR-7 response instance from a route or controller, it will automatically be converted back to a Laravel response instance and be displayed by the framework.\n\n<a name=\"input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":223,"to":234}}}}],["3245",{"pageContent":"Input\n\n<a name=\"retrieving-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":235,"to":237}}}}],["3246",{"pageContent":"Retrieving Input\n\n<a name=\"retrieving-all-input-data\"></a>\n#### Retrieving All Input Data\n\nYou may retrieve all of the incoming request's input data as an `array` using the `all` method. This method may be used regardless of whether the incoming request is from an HTML form or is an XHR request:\n\n    $input = $request->all();\n\nUsing the `collect` method, you may retrieve all of the incoming request's input data as a [collection](/docs/{{version}}/collections):\n\n    $input = $request->collect();\n\nThe `collect` method also allows you to retrieve a subset of the incoming request's input as a collection:\n\n    $request->collect('users')->each(function (string $user) {\n        // ...\n    });\n\n<a name=\"retrieving-an-input-value\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":238,"to":257}}}}],["3247",{"pageContent":"Retrieving An Input Value\n\nUsing a few simple methods, you may access all of the user input from your `Illuminate\\Http\\Request` instance without worrying about which HTTP verb was used for the request. Regardless of the HTTP verb, the `input` method may be used to retrieve user input:\n\n    $name = $request->input('name');\n\nYou may pass a default value as the second argument to the `input` method. This value will be returned if the requested input value is not present on the request:\n\n    $name = $request->input('name', 'Sally');\n\nWhen working with forms that contain array inputs, use \"dot\" notation to access the arrays:\n\n    $name = $request->input('products.0.name');\n\n    $names = $request->input('products.*.name');\n\nYou may call the `input` method without any arguments in order to retrieve all of the input values as an associative array:\n\n    $input = $request->input();\n\n<a name=\"retrieving-input-from-the-query-string\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":258,"to":278}}}}],["3248",{"pageContent":"Retrieving Input From The Query String\n\nWhile the `input` method retrieves values from the entire request payload (including the query string), the `query` method will only retrieve values from the query string:\n\n    $name = $request->query('name');\n\nIf the requested query string value data is not present, the second argument to this method will be returned:\n\n    $name = $request->query('name', 'Helen');\n\nYou may call the `query` method without any arguments in order to retrieve all of the query string values as an associative array:\n\n    $query = $request->query();\n\n<a name=\"retrieving-json-input-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":279,"to":293}}}}],["3249",{"pageContent":"Retrieving JSON Input Values\n\nWhen sending JSON requests to your application, you may access the JSON data via the `input` method as long as the `Content-Type` header of the request is properly set to `application/json`. You may even use \"dot\" syntax to retrieve values that are nested within JSON arrays / objects:\n\n    $name = $request->input('user.name');\n\n<a name=\"retrieving-stringable-input-values\"></a>\n#### Retrieving Stringable Input Values\n\nInstead of retrieving the request's input data as a primitive `string`, you may use the `string` method to retrieve the request data as an instance of [`Illuminate\\Support\\Stringable`](/docs/{{version}}/helpers#fluent-strings):\n\n    $name = $request->string('name')->trim();\n\n<a name=\"retrieving-boolean-input-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":294,"to":307}}}}],["3250",{"pageContent":"Retrieving Boolean Input Values\n\nWhen dealing with HTML elements like checkboxes, your application may receive \"truthy\" values that are actually strings. For example, \"true\" or \"on\". For convenience, you may use the `boolean` method to retrieve these values as booleans. The `boolean` method returns `true` for 1, \"1\", true, \"true\", \"on\", and \"yes\". All other values will return `false`:\n\n    $archived = $request->boolean('archived');\n\n<a name=\"retrieving-date-input-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":308,"to":314}}}}],["3251",{"pageContent":"Retrieving Date Input Values\n\nFor convenience, input values containing dates / times may be retrieved as Carbon instances using the `date` method. If the request does not contain an input value with the given name, `null` will be returned:\n\n    $birthday = $request->date('birthday');\n\nThe second and third arguments accepted by the `date` method may be used to specify the date's format and timezone, respectively:\n\n    $elapsed = $request->date('elapsed', '!H:i', 'Europe/Madrid');\n\nIf the input value is present but has an invalid format, an `InvalidArgumentException` will be thrown; therefore, it is recommended that you validate the input before invoking the `date` method.\n\n<a name=\"retrieving-enum-input-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":315,"to":327}}}}],["3252",{"pageContent":"Retrieving Enum Input Values\n\nInput values that correspond to [PHP enums](https://www.php.net/manual/en/language.types.enumerations.php) may also be retrieved from the request. If the request does not contain an input value with the given name or the enum does not have a backing value that matches the input value, `null` will be returned. The `enum` method accepts the name of the input value and the enum class as its first and second arguments:\n\n    use App\\Enums\\Status;\n\n    $status = $request->enum('status', Status::class);\n\n<a name=\"retrieving-input-via-dynamic-properties\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":328,"to":336}}}}],["3253",{"pageContent":"Retrieving Input Via Dynamic Properties\n\nYou may also access user input using dynamic properties on the `Illuminate\\Http\\Request` instance. For example, if one of your application's forms contains a `name` field, you may access the value of the field like so:\n\n    $name = $request->name;\n\nWhen using dynamic properties, Laravel will first look for the parameter's value in the request payload. If it is not present, Laravel will search for the field in the matched route's parameters.\n\n<a name=\"retrieving-a-portion-of-the-input-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":337,"to":345}}}}],["3254",{"pageContent":"Retrieving A Portion Of The Input Data\n\nIf you need to retrieve a subset of the input data, you may use the `only` and `except` methods. Both of these methods accept a single `array` or a dynamic list of arguments:\n\n    $input = $request->only(['username', 'password']);\n\n    $input = $request->only('username', 'password');\n\n    $input = $request->except(['credit_card']);\n\n    $input = $request->except('credit_card');\n\n> **Warning**  \n> The `only` method returns all of the key / value pairs that you request; however, it will not return key / value pairs that are not present on the request.\n\n<a name=\"determining-if-input-is-present\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":346,"to":361}}}}],["3255",{"pageContent":"Determining If Input Is Present\n\nYou may use the `has` method to determine if a value is present on the request. The `has` method returns `true` if the value is present on the request:\n\n    if ($request->has('name')) {\n        // ...\n    }\n\nWhen given an array, the `has` method will determine if all of the specified values are present:\n\n    if ($request->has(['name', 'email'])) {\n        // ...\n    }\n\nThe `hasAny` method returns `true` if any of the specified values are present:\n\n    if ($request->hasAny(['name', 'email'])) {\n        // ...\n    }\n\nThe `whenHas` method will execute the given closure if a value is present on the request:\n\n    $request->whenHas('name', function (string $input) {\n        // ...\n    });\n\nA second closure may be passed to the `whenHas` method that will be executed if the specified value is not present on the request:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":362,"to":388}}}}],["3256",{"pageContent":"A second closure may be passed to the `whenHas` method that will be executed if the specified value is not present on the request:\n\n    $request->whenHas('name', function (string $input) {\n        // The \"name\" value is present...\n    }, function () {\n        // The \"name\" value is not present...\n    });\n\nIf you would like to determine if a value is present on the request and is not an empty string, you may use the `filled` method:\n\n    if ($request->filled('name')) {\n        // ...\n    }\n\nThe `anyFilled` method returns `true` if any of the specified values is not an empty string:\n\n    if ($request->anyFilled(['name', 'email'])) {\n        // ...\n    }\n\nThe `whenFilled` method will execute the given closure if a value is present on the request and is not an empty string:\n\n    $request->whenFilled('name', function (string $input) {\n        // ...\n    });\n\nA second closure may be passed to the `whenFilled` method that will be executed if the specified value is not \"filled\":","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":388,"to":414}}}}],["3257",{"pageContent":"A second closure may be passed to the `whenFilled` method that will be executed if the specified value is not \"filled\":\n\n    $request->whenFilled('name', function (string $input) {\n        // The \"name\" value is filled...\n    }, function () {\n        // The \"name\" value is not filled...\n    });\n\nTo determine if a given key is absent from the request, you may use the `missing` and `whenMissing` methods:\n\n    if ($request->missing('name')) {\n        // ...\n    }\n\n    $request->whenMissing('name', function (array $input) {\n        // The \"name\" value is missing...\n    }, function () {\n        // The \"name\" value is present...\n    });\n\n<a name=\"merging-additional-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":414,"to":434}}}}],["3258",{"pageContent":"Merging Additional Input\n\nSometimes you may need to manually merge additional input into the request's existing input data. To accomplish this, you may use the `merge` method. If a given input key already exists on the request, it will be overwritten by the data provided to the `merge` method:\n\n    $request->merge(['votes' => 0]);\n\nThe `mergeIfMissing` method may be used to merge input into the request if the corresponding keys do not already exist within the request's input data:\n\n    $request->mergeIfMissing(['votes' => 0]);\n\n<a name=\"old-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":435,"to":445}}}}],["3259",{"pageContent":"Old Input\n\nLaravel allows you to keep input from one request during the next request. This feature is particularly useful for re-populating forms after detecting validation errors. However, if you are using Laravel's included [validation features](/docs/{{version}}/validation), it is possible that you will not need to manually use these session input flashing methods directly, as some of Laravel's built-in validation facilities will call them automatically.\n\n<a name=\"flashing-input-to-the-session\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":446,"to":450}}}}],["3260",{"pageContent":"Flashing Input To The Session\n\nThe `flash` method on the `Illuminate\\Http\\Request` class will flash the current input to the [session](/docs/{{version}}/session) so that it is available during the user's next request to the application:\n\n    $request->flash();\n\nYou may also use the `flashOnly` and `flashExcept` methods to flash a subset of the request data to the session. These methods are useful for keeping sensitive information such as passwords out of the session:\n\n    $request->flashOnly(['username', 'email']);\n\n    $request->flashExcept('password');\n\n<a name=\"flashing-input-then-redirecting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":451,"to":463}}}}],["3261",{"pageContent":"Flashing Input Then Redirecting\n\nSince you often will want to flash input to the session and then redirect to the previous page, you may easily chain input flashing onto a redirect using the `withInput` method:\n\n    return redirect('form')->withInput();\n\n    return redirect()->route('user.create')->withInput();\n\n    return redirect('form')->withInput(\n        $request->except('password')\n    );\n\n<a name=\"retrieving-old-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":464,"to":476}}}}],["3262",{"pageContent":"Retrieving Old Input\n\nTo retrieve flashed input from the previous request, invoke the `old` method on an instance of `Illuminate\\Http\\Request`. The `old` method will pull the previously flashed input data from the [session](/docs/{{version}}/session):\n\n    $username = $request->old('username');\n\nLaravel also provides a global `old` helper. If you are displaying old input within a [Blade template](/docs/{{version}}/blade), it is more convenient to use the `old` helper to repopulate the form. If no old input exists for the given field, `null` will be returned:\n\n    <input type=\"text\" name=\"username\" value=\"{{ old('username') }}\">\n\n<a name=\"cookies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":477,"to":487}}}}],["3263",{"pageContent":"Cookies\n\n<a name=\"retrieving-cookies-from-requests\"></a>\n#### Retrieving Cookies From Requests\n\nAll cookies created by the Laravel framework are encrypted and signed with an authentication code, meaning they will be considered invalid if they have been changed by the client. To retrieve a cookie value from the request, use the `cookie` method on an `Illuminate\\Http\\Request` instance:\n\n    $value = $request->cookie('name');\n\n<a name=\"input-trimming-and-normalization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":488,"to":497}}}}],["3264",{"pageContent":"Input Trimming & Normalization\n\nBy default, Laravel includes the `App\\Http\\Middleware\\TrimStrings` and `Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull` middleware in your application's global middleware stack. These middleware are listed in the global middleware stack by the `App\\Http\\Kernel` class. These middleware will automatically trim all incoming string fields on the request, as well as convert any empty string fields to `null`. This allows you to not have to worry about these normalization concerns in your routes and controllers.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":498,"to":500}}}}],["3265",{"pageContent":"Disabling Input Normalization\n\nIf you would like to disable this behavior for all requests, you may remove the two middleware from your application's middleware stack by removing them from the `$middleware` property of your `App\\Http\\Kernel` class.\n\nIf you would like to disable string trimming and empty string conversion for a subset of requests to your application, you may use the `skipWhen` method offered by both middleware. This method accepts a closure which should return `true` or `false` to indicate if input normalization should be skipped. Typically, the `skipWhen` method should be invoked in the `boot` method of your application's `AppServiceProvider`.\n\n```php\nuse App\\Http\\Middleware\\TrimStrings;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    TrimStrings::skipWhen(function (Request $request) {\n        return $request->is('admin/*');\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":502,"to":520}}}}],["3266",{"pageContent":"/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    TrimStrings::skipWhen(function (Request $request) {\n        return $request->is('admin/*');\n    });\n\n    ConvertEmptyStringsToNull::skipWhen(function (Request $request) {\n        // ...\n    });\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":520,"to":532}}}}],["3267",{"pageContent":"<a name=\"files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":535,"to":535}}}}],["3268",{"pageContent":"Files\n\n<a name=\"retrieving-uploaded-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":536,"to":538}}}}],["3269",{"pageContent":"Retrieving Uploaded Files\n\nYou may retrieve uploaded files from an `Illuminate\\Http\\Request` instance using the `file` method or using dynamic properties. The `file` method returns an instance of the `Illuminate\\Http\\UploadedFile` class, which extends the PHP `SplFileInfo` class and provides a variety of methods for interacting with the file:\n\n    $file = $request->file('photo');\n\n    $file = $request->photo;\n\nYou may determine if a file is present on the request using the `hasFile` method:\n\n    if ($request->hasFile('photo')) {\n        // ...\n    }\n\n<a name=\"validating-successful-uploads\"></a>\n#### Validating Successful Uploads\n\nIn addition to checking if the file is present, you may verify that there were no problems uploading the file via the `isValid` method:\n\n    if ($request->file('photo')->isValid()) {\n        // ...\n    }\n\n<a name=\"file-paths-extensions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":539,"to":562}}}}],["3270",{"pageContent":"File Paths & Extensions\n\nThe `UploadedFile` class also contains methods for accessing the file's fully-qualified path and its extension. The `extension` method will attempt to guess the file's extension based on its contents. This extension may be different from the extension that was supplied by the client:\n\n    $path = $request->photo->path();\n\n    $extension = $request->photo->extension();\n\n<a name=\"other-file-methods\"></a>\n#### Other File Methods\n\nThere are a variety of other methods available on `UploadedFile` instances. Check out the [API documentation for the class](https://github.com/symfony/symfony/blob/6.0/src/Symfony/Component/HttpFoundation/File/UploadedFile.php) for more information regarding these methods.\n\n<a name=\"storing-uploaded-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":563,"to":576}}}}],["3271",{"pageContent":"Storing Uploaded Files\n\nTo store an uploaded file, you will typically use one of your configured [filesystems](/docs/{{version}}/filesystem). The `UploadedFile` class has a `store` method that will move an uploaded file to one of your disks, which may be a location on your local filesystem or a cloud storage location like Amazon S3.\n\nThe `store` method accepts the path where the file should be stored relative to the filesystem's configured root directory. This path should not contain a filename, since a unique ID will automatically be generated to serve as the filename.\n\nThe `store` method also accepts an optional second argument for the name of the disk that should be used to store the file. The method will return the path of the file relative to the disk's root:\n\n    $path = $request->photo->store('images');\n\n    $path = $request->photo->store('images', 's3');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":577,"to":587}}}}],["3272",{"pageContent":"$path = $request->photo->store('images');\n\n    $path = $request->photo->store('images', 's3');\n\nIf you do not want a filename to be automatically generated, you may use the `storeAs` method, which accepts the path, filename, and disk name as its arguments:\n\n    $path = $request->photo->storeAs('images', 'filename.jpg');\n\n    $path = $request->photo->storeAs('images', 'filename.jpg', 's3');\n\n> **Note**  \n> For more information about file storage in Laravel, check out the complete [file storage documentation](/docs/{{version}}/filesystem).\n\n<a name=\"configuring-trusted-proxies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":587,"to":600}}}}],["3273",{"pageContent":"Configuring Trusted Proxies\n\nWhen running your applications behind a load balancer that terminates TLS / SSL certificates, you may notice your application sometimes does not generate HTTPS links when using the `url` helper. Typically this is because your application is being forwarded traffic from your load balancer on port 80 and does not know it should generate secure links.\n\nTo solve this, you may use the `App\\Http\\Middleware\\TrustProxies` middleware that is included in your Laravel application, which allows you to quickly customize the load balancers or proxies that should be trusted by your application. Your trusted proxies should be listed as an array on the `$proxies` property of this middleware. In addition to configuring the trusted proxies, you may configure the proxy `$headers` that should be trusted:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Illuminate\\Http\\Middleware\\TrustProxies as Middleware;\n    use Illuminate\\Http\\Request;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":601,"to":612}}}}],["3274",{"pageContent":"<?php\n\n    namespace App\\Http\\Middleware;\n\n    use Illuminate\\Http\\Middleware\\TrustProxies as Middleware;\n    use Illuminate\\Http\\Request;\n\n    class TrustProxies extends Middleware\n    {\n        /**\n         * The trusted proxies for this application.\n         *\n         * @var string|array\n         */\n        protected $proxies = [\n            '192.168.1.1',\n            '192.168.1.2',\n        ];\n\n        /**\n         * The headers that should be used to detect proxies.\n         *\n         * @var int\n         */\n        protected $headers = Request::HEADER_X_FORWARDED_FOR | Request::HEADER_X_FORWARDED_HOST | Request::HEADER_X_FORWARDED_PORT | Request::HEADER_X_FORWARDED_PROTO;\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":612,"to":637}}}}],["3275",{"pageContent":"> **Note**  \n> If you are using AWS Elastic Load Balancing, your `$headers` value should be `Request::HEADER_X_FORWARDED_AWS_ELB`. For more information on the constants that may be used in the `$headers` property, check out Symfony's documentation on [trusting proxies](https://symfony.com/doc/current/deployment/proxies.html).\n\n<a name=\"trusting-all-proxies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":639,"to":642}}}}],["3276",{"pageContent":"Trusting All Proxies\n\nIf you are using Amazon AWS or another \"cloud\" load balancer provider, you may not know the IP addresses of your actual balancers. In this case, you may use `*` to trust all proxies:\n\n    /**\n     * The trusted proxies for this application.\n     *\n     * @var string|array\n     */\n    protected $proxies = '*';\n\n<a name=\"configuring-trusted-hosts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":643,"to":654}}}}],["3277",{"pageContent":"Configuring Trusted Hosts\n\nBy default, Laravel will respond to all requests it receives regardless of the content of the HTTP request's `Host` header. In addition, the `Host` header's value will be used when generating absolute URLs to your application during a web request.\n\nTypically, you should configure your web server, such as Nginx or Apache, to only send requests to your application that match a given host name. However, if you do not have the ability to customize your web server directly and need to instruct Laravel to only respond to certain host names, you may do so by enabling the `App\\Http\\Middleware\\TrustHosts` middleware for your application.\n\nThe `TrustHosts` middleware is already included in the `$middleware` stack of your application; however, you should uncomment it so that it becomes active. Within this middleware's `hosts` method, you may specify the host names that your application should respond to. Incoming requests with other `Host` value headers will be rejected:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":655,"to":661}}}}],["3278",{"pageContent":"/**\n     * Get the host patterns that should be trusted.\n     *\n     * @return array<int, string>\n     */\n    public function hosts(): array\n    {\n        return [\n            'laravel.test',\n            $this->allSubdomainsOfApplicationUrl(),\n        ];\n    }\n\nThe `allSubdomainsOfApplicationUrl` helper method will return a regular expression matching all subdomains of your application's `app.url` configuration value. This helper method provides a convenient way to allow all of your application's subdomains when building an application that utilizes wildcard subdomains.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/requests.md","loc":{"lines":{"from":663,"to":676}}}}],["3279",{"pageContent":"# HTTP Responses\n\n- [Creating Responses](#creating-responses)\n    - [Attaching Headers To Responses](#attaching-headers-to-responses)\n    - [Attaching Cookies To Responses](#attaching-cookies-to-responses)\n    - [Cookies & Encryption](#cookies-and-encryption)\n- [Redirects](#redirects)\n    - [Redirecting To Named Routes](#redirecting-named-routes)\n    - [Redirecting To Controller Actions](#redirecting-controller-actions)\n    - [Redirecting To External Domains](#redirecting-external-domains)\n    - [Redirecting With Flashed Session Data](#redirecting-with-flashed-session-data)\n- [Other Response Types](#other-response-types)\n    - [View Responses](#view-responses)\n    - [JSON Responses](#json-responses)\n    - [File Downloads](#file-downloads)\n    - [File Responses](#file-responses)\n- [Response Macros](#response-macros)\n\n<a name=\"creating-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":1,"to":19}}}}],["3280",{"pageContent":"Creating Responses\n\n<a name=\"strings-arrays\"></a>\n#### Strings & Arrays\n\nAll routes and controllers should return a response to be sent back to the user's browser. Laravel provides several different ways to return responses. The most basic response is returning a string from a route or controller. The framework will automatically convert the string into a full HTTP response:\n\n    Route::get('/', function () {\n        return 'Hello World';\n    });\n\nIn addition to returning strings from your routes and controllers, you may also return arrays. The framework will automatically convert the array into a JSON response:\n\n    Route::get('/', function () {\n        return [1, 2, 3];\n    });\n\n> **Note**  \n> Did you know you can also return [Eloquent collections](/docs/{{version}}/eloquent-collections) from your routes or controllers? They will automatically be converted to JSON. Give it a shot!\n\n<a name=\"response-objects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":20,"to":40}}}}],["3281",{"pageContent":"Response Objects\n\nTypically, you won't just be returning simple strings or arrays from your route actions. Instead, you will be returning full `Illuminate\\Http\\Response` instances or [views](/docs/{{version}}/views).\n\nReturning a full `Response` instance allows you to customize the response's HTTP status code and headers. A `Response` instance inherits from the `Symfony\\Component\\HttpFoundation\\Response` class, which provides a variety of methods for building HTTP responses:\n\n    Route::get('/home', function () {\n        return response('Hello World', 200)\n                      ->header('Content-Type', 'text/plain');\n    });\n\n<a name=\"eloquent-models-and-collections\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":41,"to":52}}}}],["3282",{"pageContent":"Eloquent Models & Collections\n\nYou may also return [Eloquent ORM](/docs/{{version}}/eloquent) models and collections directly from your routes and controllers. When you do, Laravel will automatically convert the models and collections to JSON responses while respecting the model's [hidden attributes](/docs/{{version}}/eloquent-serialization#hiding-attributes-from-json):\n\n    use App\\Models\\User;\n\n    Route::get('/user/{user}', function (User $user) {\n        return $user;\n    });\n\n<a name=\"attaching-headers-to-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":53,"to":63}}}}],["3283",{"pageContent":"Attaching Headers To Responses\n\nKeep in mind that most response methods are chainable, allowing for the fluent construction of response instances. For example, you may use the `header` method to add a series of headers to the response before sending it back to the user:\n\n    return response($content)\n                ->header('Content-Type', $type)\n                ->header('X-Header-One', 'Header Value')\n                ->header('X-Header-Two', 'Header Value');\n\nOr, you may use the `withHeaders` method to specify an array of headers to be added to the response:\n\n    return response($content)\n                ->withHeaders([\n                    'Content-Type' => $type,\n                    'X-Header-One' => 'Header Value',\n                    'X-Header-Two' => 'Header Value',\n                ]);\n\n<a name=\"cache-control-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":64,"to":82}}}}],["3284",{"pageContent":"Cache Control Middleware\n\nLaravel includes a `cache.headers` middleware, which may be used to quickly set the `Cache-Control` header for a group of routes. Directives should be provided using the \"snake case\" equivalent of the corresponding cache-control directive and should be separated by a semicolon. If `etag` is specified in the list of directives, an MD5 hash of the response content will automatically be set as the ETag identifier:\n\n    Route::middleware('cache.headers:public;max_age=2628000;etag')->group(function () {\n        Route::get('/privacy', function () {\n            // ...\n        });\n\n        Route::get('/terms', function () {\n            // ...\n        });\n    });\n\n<a name=\"attaching-cookies-to-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":83,"to":97}}}}],["3285",{"pageContent":"Attaching Cookies To Responses\n\nYou may attach a cookie to an outgoing `Illuminate\\Http\\Response` instance using the `cookie` method. You should pass the name, value, and the number of minutes the cookie should be considered valid to this method:\n\n    return response('Hello World')->cookie(\n        'name', 'value', $minutes\n    );\n\nThe `cookie` method also accepts a few more arguments which are used less frequently. Generally, these arguments have the same purpose and meaning as the arguments that would be given to PHP's native [setcookie](https://secure.php.net/manual/en/function.setcookie.php) method:\n\n    return response('Hello World')->cookie(\n        'name', 'value', $minutes, $path, $domain, $secure, $httpOnly\n    );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":98,"to":110}}}}],["3286",{"pageContent":"return response('Hello World')->cookie(\n        'name', 'value', $minutes, $path, $domain, $secure, $httpOnly\n    );\n\nIf you would like to ensure that a cookie is sent with the outgoing response but you do not yet have an instance of that response, you can use the `Cookie` facade to \"queue\" cookies for attachment to the response when it is sent. The `queue` method accepts the arguments needed to create a cookie instance. These cookies will be attached to the outgoing response before it is sent to the browser:\n\n    use Illuminate\\Support\\Facades\\Cookie;\n\n    Cookie::queue('name', 'value', $minutes);\n\n<a name=\"generating-cookie-instances\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":110,"to":120}}}}],["3287",{"pageContent":"Generating Cookie Instances\n\nIf you would like to generate a `Symfony\\Component\\HttpFoundation\\Cookie` instance that can be attached to a response instance at a later time, you may use the global `cookie` helper. This cookie will not be sent back to the client unless it is attached to a response instance:\n\n    $cookie = cookie('name', 'value', $minutes);\n\n    return response('Hello World')->cookie($cookie);\n\n<a name=\"expiring-cookies-early\"></a>\n#### Expiring Cookies Early\n\nYou may remove a cookie by expiring it via the `withoutCookie` method of an outgoing response:\n\n    return response('Hello World')->withoutCookie('name');\n\nIf you do not yet have an instance of the outgoing response, you may use the `Cookie` facade's `expire` method to expire a cookie:\n\n    Cookie::expire('name');\n\n<a name=\"cookies-and-encryption\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":121,"to":140}}}}],["3288",{"pageContent":"Cookies & Encryption\n\nBy default, all cookies generated by Laravel are encrypted and signed so that they can't be modified or read by the client. If you would like to disable encryption for a subset of cookies generated by your application, you may use the `$except` property of the `App\\Http\\Middleware\\EncryptCookies` middleware, which is located in the `app/Http/Middleware` directory:\n\n    /**\n     * The names of the cookies that should not be encrypted.\n     *\n     * @var array\n     */\n    protected $except = [\n        'cookie_name',\n    ];\n\n<a name=\"redirects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":141,"to":154}}}}],["3289",{"pageContent":"Redirects\n\nRedirect responses are instances of the `Illuminate\\Http\\RedirectResponse` class, and contain the proper headers needed to redirect the user to another URL. There are several ways to generate a `RedirectResponse` instance. The simplest method is to use the global `redirect` helper:\n\n    Route::get('/dashboard', function () {\n        return redirect('home/dashboard');\n    });\n\nSometimes you may wish to redirect the user to their previous location, such as when a submitted form is invalid. You may do so by using the global `back` helper function. Since this feature utilizes the [session](/docs/{{version}}/session), make sure the route calling the `back` function is using the `web` middleware group:\n\n    Route::post('/user/profile', function () {\n        // Validate the request...\n\n        return back()->withInput();\n    });\n\n<a name=\"redirecting-named-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":155,"to":171}}}}],["3290",{"pageContent":"Redirecting To Named Routes\n\nWhen you call the `redirect` helper with no parameters, an instance of `Illuminate\\Routing\\Redirector` is returned, allowing you to call any method on the `Redirector` instance. For example, to generate a `RedirectResponse` to a named route, you may use the `route` method:\n\n    return redirect()->route('login');\n\nIf your route has parameters, you may pass them as the second argument to the `route` method:\n\n    // For a route with the following URI: /profile/{id}\n\n    return redirect()->route('profile', ['id' => 1]);\n\n<a name=\"populating-parameters-via-eloquent-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":172,"to":184}}}}],["3291",{"pageContent":"Populating Parameters Via Eloquent Models\n\nIf you are redirecting to a route with an \"ID\" parameter that is being populated from an Eloquent model, you may pass the model itself. The ID will be extracted automatically:\n\n    // For a route with the following URI: /profile/{id}\n\n    return redirect()->route('profile', [$user]);\n\nIf you would like to customize the value that is placed in the route parameter, you can specify the column in the route parameter definition (`/profile/{id:slug}`) or you can override the `getRouteKey` method on your Eloquent model:\n\n    /**\n     * Get the value of the model's route key.\n     */\n    public function getRouteKey(): mixed\n    {\n        return $this->slug;\n    }\n\n<a name=\"redirecting-controller-actions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":185,"to":203}}}}],["3292",{"pageContent":"Redirecting To Controller Actions\n\nYou may also generate redirects to [controller actions](/docs/{{version}}/controllers). To do so, pass the controller and action name to the `action` method:\n\n    use App\\Http\\Controllers\\UserController;\n\n    return redirect()->action([UserController::class, 'index']);\n\nIf your controller route requires parameters, you may pass them as the second argument to the `action` method:\n\n    return redirect()->action(\n        [UserController::class, 'profile'], ['id' => 1]\n    );\n\n<a name=\"redirecting-external-domains\"></a>\n### Redirecting To External Domains\n\nSometimes you may need to redirect to a domain outside of your application. You may do so by calling the `away` method, which creates a `RedirectResponse` without any additional URL encoding, validation, or verification:\n\n    return redirect()->away('https://www.google.com');\n\n<a name=\"redirecting-with-flashed-session-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":204,"to":225}}}}],["3293",{"pageContent":"Redirecting With Flashed Session Data\n\nRedirecting to a new URL and [flashing data to the session](/docs/{{version}}/session#flash-data) are usually done at the same time. Typically, this is done after successfully performing an action when you flash a success message to the session. For convenience, you may create a `RedirectResponse` instance and flash data to the session in a single, fluent method chain:\n\n    Route::post('/user/profile', function () {\n        // ...\n\n        return redirect('dashboard')->with('status', 'Profile updated!');\n    });\n\nAfter the user is redirected, you may display the flashed message from the [session](/docs/{{version}}/session). For example, using [Blade syntax](/docs/{{version}}/blade):\n\n    @if (session('status'))\n        <div class=\"alert alert-success\">\n            {{ session('status') }}\n        </div>\n    @endif\n\n<a name=\"redirecting-with-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":226,"to":244}}}}],["3294",{"pageContent":"Redirecting With Input\n\nYou may use the `withInput` method provided by the `RedirectResponse` instance to flash the current request's input data to the session before redirecting the user to a new location. This is typically done if the user has encountered a validation error. Once the input has been flashed to the session, you may easily [retrieve it](/docs/{{version}}/requests#retrieving-old-input) during the next request to repopulate the form:\n\n    return back()->withInput();\n\n<a name=\"other-response-types\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":245,"to":251}}}}],["3295",{"pageContent":"Other Response Types\n\nThe `response` helper may be used to generate other types of response instances. When the `response` helper is called without arguments, an implementation of the `Illuminate\\Contracts\\Routing\\ResponseFactory` [contract](/docs/{{version}}/contracts) is returned. This contract provides several helpful methods for generating responses.\n\n<a name=\"view-responses\"></a>\n### View Responses\n\nIf you need control over the response's status and headers but also need to return a [view](/docs/{{version}}/views) as the response's content, you should use the `view` method:\n\n    return response()\n                ->view('hello', $data, 200)\n                ->header('Content-Type', $type);\n\nOf course, if you do not need to pass a custom HTTP status code or custom headers, you may use the global `view` helper function.\n\n<a name=\"json-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":252,"to":267}}}}],["3296",{"pageContent":"JSON Responses\n\nThe `json` method will automatically set the `Content-Type` header to `application/json`, as well as convert the given array to JSON using the `json_encode` PHP function:\n\n    return response()->json([\n        'name' => 'Abigail',\n        'state' => 'CA',\n    ]);\n\nIf you would like to create a JSONP response, you may use the `json` method in combination with the `withCallback` method:\n\n    return response()\n                ->json(['name' => 'Abigail', 'state' => 'CA'])\n                ->withCallback($request->input('callback'));\n\n<a name=\"file-downloads\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":268,"to":283}}}}],["3297",{"pageContent":"File Downloads\n\nThe `download` method may be used to generate a response that forces the user's browser to download the file at the given path. The `download` method accepts a filename as the second argument to the method, which will determine the filename that is seen by the user downloading the file. Finally, you may pass an array of HTTP headers as the third argument to the method:\n\n    return response()->download($pathToFile);\n\n    return response()->download($pathToFile, $name, $headers);\n\n> **Warning**  \n> Symfony HttpFoundation, which manages file downloads, requires the file being downloaded to have an ASCII filename.\n\n<a name=\"streamed-downloads\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":284,"to":295}}}}],["3298",{"pageContent":"Streamed Downloads\n\nSometimes you may wish to turn the string response of a given operation into a downloadable response without having to write the contents of the operation to disk. You may use the `streamDownload` method in this scenario. This method accepts a callback, filename, and an optional array of headers as its arguments:\n\n    use App\\Services\\GitHub;\n\n    return response()->streamDownload(function () {\n        echo GitHub::api('repo')\n                    ->contents()\n                    ->readme('laravel', 'laravel')['contents'];\n    }, 'laravel-readme.md');\n\n<a name=\"file-responses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":296,"to":308}}}}],["3299",{"pageContent":"File Responses\n\nThe `file` method may be used to display a file, such as an image or PDF, directly in the user's browser instead of initiating a download. This method accepts the path to the file as its first argument and an array of headers as its second argument:\n\n    return response()->file($pathToFile);\n\n    return response()->file($pathToFile, $headers);\n\n<a name=\"response-macros\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":309,"to":317}}}}],["3300",{"pageContent":"Response Macros\n\nIf you would like to define a custom response that you can re-use in a variety of your routes and controllers, you may use the `macro` method on the `Response` facade. Typically, you should call this method from the `boot` method of one of your application's [service providers](/docs/{{version}}/providers), such as the `App\\Providers\\AppServiceProvider` service provider:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\Response;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Response::macro('caps', function (string $value) {\n                return Response::make(strtoupper($value));\n            });\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":318,"to":340}}}}],["3301",{"pageContent":"The `macro` function accepts a name as its first argument and a closure as its second argument. The macro's closure will be executed when calling the macro name from a `ResponseFactory` implementation or the `response` helper:\n\n    return response()->caps('foo');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/responses.md","loc":{"lines":{"from":342,"to":344}}}}],["3302",{"pageContent":"# Routing","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":1,"to":1}}}}],["3303",{"pageContent":"- [Basic Routing](#basic-routing)\n    - [Redirect Routes](#redirect-routes)\n    - [View Routes](#view-routes)\n    - [The Route List](#the-route-list)\n- [Route Parameters](#route-parameters)\n    - [Required Parameters](#required-parameters)\n    - [Optional Parameters](#parameters-optional-parameters)\n    - [Regular Expression Constraints](#parameters-regular-expression-constraints)\n- [Named Routes](#named-routes)\n- [Route Groups](#route-groups)\n    - [Middleware](#route-group-middleware)\n    - [Controllers](#route-group-controllers)\n    - [Subdomain Routing](#route-group-subdomain-routing)\n    - [Route Prefixes](#route-group-prefixes)\n    - [Route Name Prefixes](#route-group-name-prefixes)\n- [Route Model Binding](#route-model-binding)\n    - [Implicit Binding](#implicit-binding)\n    - [Implicit Enum Binding](#implicit-enum-binding)\n    - [Explicit Binding](#explicit-binding)\n- [Fallback Routes](#fallback-routes)\n- [Rate Limiting](#rate-limiting)\n    - [Defining Rate Limiters](#defining-rate-limiters)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":3,"to":24}}}}],["3304",{"pageContent":"- [Explicit Binding](#explicit-binding)\n- [Fallback Routes](#fallback-routes)\n- [Rate Limiting](#rate-limiting)\n    - [Defining Rate Limiters](#defining-rate-limiters)\n    - [Attaching Rate Limiters To Routes](#attaching-rate-limiters-to-routes)\n- [Form Method Spoofing](#form-method-spoofing)\n- [Accessing The Current Route](#accessing-the-current-route)\n- [Cross-Origin Resource Sharing (CORS)](#cors)\n- [Route Caching](#route-caching)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":24,"to":32}}}}],["3305",{"pageContent":"<a name=\"basic-routing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":34,"to":34}}}}],["3306",{"pageContent":"Basic Routing\n\nThe most basic Laravel routes accept a URI and a closure, providing a very simple and expressive method of defining routes and behavior without complicated routing configuration files:\n\n    use Illuminate\\Support\\Facades\\Route;\n\n    Route::get('/greeting', function () {\n        return 'Hello World';\n    });\n\n<a name=\"the-default-route-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":35,"to":45}}}}],["3307",{"pageContent":"The Default Route Files\n\nAll Laravel routes are defined in your route files, which are located in the `routes` directory. These files are automatically loaded by your application's `App\\Providers\\RouteServiceProvider`. The `routes/web.php` file defines routes that are for your web interface. These routes are assigned the `web` middleware group, which provides features like session state and CSRF protection. The routes in `routes/api.php` are stateless and are assigned the `api` middleware group.\n\nFor most applications, you will begin by defining routes in your `routes/web.php` file. The routes defined in `routes/web.php` may be accessed by entering the defined route's URL in your browser. For example, you may access the following route by navigating to `http://example.com/user` in your browser:\n\n    use App\\Http\\Controllers\\UserController;\n\n    Route::get('/user', [UserController::class, 'index']);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":46,"to":54}}}}],["3308",{"pageContent":"use App\\Http\\Controllers\\UserController;\n\n    Route::get('/user', [UserController::class, 'index']);\n\nRoutes defined in the `routes/api.php` file are nested within a route group by the `RouteServiceProvider`. Within this group, the `/api` URI prefix is automatically applied so you do not need to manually apply it to every route in the file. You may modify the prefix and other route group options by modifying your `RouteServiceProvider` class.\n\n<a name=\"available-router-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":54,"to":60}}}}],["3309",{"pageContent":"Available Router Methods\n\nThe router allows you to register routes that respond to any HTTP verb:\n\n    Route::get($uri, $callback);\n    Route::post($uri, $callback);\n    Route::put($uri, $callback);\n    Route::patch($uri, $callback);\n    Route::delete($uri, $callback);\n    Route::options($uri, $callback);\n\nSometimes you may need to register a route that responds to multiple HTTP verbs. You may do so using the `match` method. Or, you may even register a route that responds to all HTTP verbs using the `any` method:\n\n    Route::match(['get', 'post'], '/', function () {\n        // ...\n    });\n\n    Route::any('/', function () {\n        // ...\n    });\n\n> **Note**  \n> When defining multiple routes that share the same URI, routes using the `get`, `post`, `put`, `patch`, `delete`, and `options` methods should be defined before routes using the `any`, `match`, and `redirect` methods. This ensures the incoming request is matched with the correct route.\n\n<a name=\"dependency-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":61,"to":85}}}}],["3310",{"pageContent":"Dependency Injection\n\nYou may type-hint any dependencies required by your route in your route's callback signature. The declared dependencies will automatically be resolved and injected into the callback by the Laravel [service container](/docs/{{version}}/container). For example, you may type-hint the `Illuminate\\Http\\Request` class to have the current HTTP request automatically injected into your route callback:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/users', function (Request $request) {\n        // ...\n    });\n\n<a name=\"csrf-protection\"></a>\n#### CSRF Protection\n\nRemember, any HTML forms pointing to `POST`, `PUT`, `PATCH`, or `DELETE` routes that are defined in the `web` routes file should include a CSRF token field. Otherwise, the request will be rejected. You can read more about CSRF protection in the [CSRF documentation](/docs/{{version}}/csrf):\n\n    <form method=\"POST\" action=\"/profile\">\n        @csrf\n        ...\n    </form>\n\n<a name=\"redirect-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":86,"to":106}}}}],["3311",{"pageContent":"Redirect Routes\n\nIf you are defining a route that redirects to another URI, you may use the `Route::redirect` method. This method provides a convenient shortcut so that you do not have to define a full route or controller for performing a simple redirect:\n\n    Route::redirect('/here', '/there');\n\nBy default, `Route::redirect` returns a `302` status code. You may customize the status code using the optional third parameter:\n\n    Route::redirect('/here', '/there', 301);\n\nOr, you may use the `Route::permanentRedirect` method to return a `301` status code:\n\n    Route::permanentRedirect('/here', '/there');\n\n> **Warning**  \n> When using route parameters in redirect routes, the following parameters are reserved by Laravel and cannot be used: `destination` and `status`.\n\n<a name=\"view-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":107,"to":124}}}}],["3312",{"pageContent":"View Routes\n\nIf your route only needs to return a [view](/docs/{{version}}/views), you may use the `Route::view` method. Like the `redirect` method, this method provides a simple shortcut so that you do not have to define a full route or controller. The `view` method accepts a URI as its first argument and a view name as its second argument. In addition, you may provide an array of data to pass to the view as an optional third argument:\n\n    Route::view('/welcome', 'welcome');\n\n    Route::view('/welcome', 'welcome', ['name' => 'Taylor']);\n\n> **Warning**  \n> When using route parameters in view routes, the following parameters are reserved by Laravel and cannot be used: `view`, `data`, `status`, and `headers`.\n\n<a name=\"the-route-list\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":125,"to":136}}}}],["3313",{"pageContent":"The Route List\n\nThe `route:list` Artisan command can easily provide an overview of all of the routes that are defined by your application:\n\n```shell\nphp artisan route:list\n```\n\nBy default, the route middleware that are assigned to each route will not be displayed in the `route:list` output; however, you can instruct Laravel to display the route middleware and middleware group names by adding the `-v` option to the command:\n\n```shell\nphp artisan route:list -v\n\n# Expand middleware groups...\nphp artisan route:list -vv\n```\n\nYou may also instruct Laravel to only show routes that begin with a given URI:\n\n```shell\nphp artisan route:list --path=api\n```\n\nIn addition, you may instruct Laravel to hide any routes that are defined by third-party packages by providing the `--except-vendor` option when executing the `route:list` command:\n\n```shell\nphp artisan route:list --except-vendor","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":137,"to":163}}}}],["3314",{"pageContent":"Likewise, you may also instruct Laravel to only show routes that are defined by third-party packages by providing the `--only-vendor` option when executing the `route:list` command:\n\n```shell\nphp artisan route:list --only-vendor\n```\n\n<a name=\"route-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":166,"to":172}}}}],["3315",{"pageContent":"Route Parameters\n\n<a name=\"required-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":173,"to":175}}}}],["3316",{"pageContent":"Required Parameters\n\nSometimes you will need to capture segments of the URI within your route. For example, you may need to capture a user's ID from the URL. You may do so by defining route parameters:\n\n    Route::get('/user/{id}', function (string $id) {\n        return 'User '.$id;\n    });\n\nYou may define as many route parameters as required by your route:\n\n    Route::get('/posts/{post}/comments/{comment}', function (string $postId, string $commentId) {\n        // ...\n    });\n\nRoute parameters are always encased within `{}` braces and should consist of alphabetic characters. Underscores (`_`) are also acceptable within route parameter names. Route parameters are injected into route callbacks / controllers based on their order - the names of the route callback / controller arguments do not matter.\n\n<a name=\"parameters-and-dependency-injection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":176,"to":192}}}}],["3317",{"pageContent":"Parameters & Dependency Injection\n\nIf your route has dependencies that you would like the Laravel service container to automatically inject into your route's callback, you should list your route parameters after your dependencies:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/user/{id}', function (Request $request, string $id) {\n        return 'User '.$id;\n    });\n\n<a name=\"parameters-optional-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":193,"to":203}}}}],["3318",{"pageContent":"Optional Parameters\n\nOccasionally you may need to specify a route parameter that may not always be present in the URI. You may do so by placing a `?` mark after the parameter name. Make sure to give the route's corresponding variable a default value:\n\n    Route::get('/user/{name?}', function (?string $name = null) {\n        return $name;\n    });\n\n    Route::get('/user/{name?}', function (?string $name = 'John') {\n        return $name;\n    });\n\n<a name=\"parameters-regular-expression-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":204,"to":216}}}}],["3319",{"pageContent":"Regular Expression Constraints\n\nYou may constrain the format of your route parameters using the `where` method on a route instance. The `where` method accepts the name of the parameter and a regular expression defining how the parameter should be constrained:\n\n    Route::get('/user/{name}', function (string $name) {\n        // ...\n    })->where('name', '[A-Za-z]+');\n\n    Route::get('/user/{id}', function (string $id) {\n        // ...\n    })->where('id', '[0-9]+');\n\n    Route::get('/user/{id}/{name}', function (string $id, string $name) {\n        // ...\n    })->where(['id' => '[0-9]+', 'name' => '[a-z]+']);\n\nFor convenience, some commonly used regular expression patterns have helper methods that allow you to quickly add pattern constraints to your routes:\n\n    Route::get('/user/{id}/{name}', function (string $id, string $name) {\n        // ...\n    })->whereNumber('id')->whereAlpha('name');\n\n    Route::get('/user/{name}', function (string $name) {\n        // ...\n    })->whereAlphaNumeric('name');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":217,"to":241}}}}],["3320",{"pageContent":"Route::get('/user/{name}', function (string $name) {\n        // ...\n    })->whereAlphaNumeric('name');\n\n    Route::get('/user/{id}', function (string $id) {\n        // ...\n    })->whereUuid('id');\n\n    Route::get('/user/{id}', function (string $id) {\n        //\n    })->whereUlid('id');\n\n    Route::get('/category/{category}', function (string $category) {\n        // ...\n    })->whereIn('category', ['movie', 'song', 'painting']);\n\nIf the incoming request does not match the route pattern constraints, a 404 HTTP response will be returned.\n\n<a name=\"parameters-global-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":241,"to":259}}}}],["3321",{"pageContent":"Global Constraints\n\nIf you would like a route parameter to always be constrained by a given regular expression, you may use the `pattern` method. You should define these patterns in the `boot` method of your `App\\Providers\\RouteServiceProvider` class:\n\n    /**\n     * Define your route model bindings, pattern filters, etc.\n     */\n    public function boot(): void\n    {\n        Route::pattern('id', '[0-9]+');\n    }\n\nOnce the pattern has been defined, it is automatically applied to all routes using that parameter name:\n\n    Route::get('/user/{id}', function (string $id) {\n        // Only executed if {id} is numeric...\n    });\n\n<a name=\"parameters-encoded-forward-slashes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":260,"to":278}}}}],["3322",{"pageContent":"Encoded Forward Slashes\n\nThe Laravel routing component allows all characters except `/` to be present within route parameter values. You must explicitly allow `/` to be part of your placeholder using a `where` condition regular expression:\n\n    Route::get('/search/{search}', function (string $search) {\n        return $search;\n    })->where('search', '.*');\n\n> **Warning**  \n> Encoded forward slashes are only supported within the last route segment.\n\n<a name=\"named-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":279,"to":290}}}}],["3323",{"pageContent":"Named Routes\n\nNamed routes allow the convenient generation of URLs or redirects for specific routes. You may specify a name for a route by chaining the `name` method onto the route definition:\n\n    Route::get('/user/profile', function () {\n        // ...\n    })->name('profile');\n\nYou may also specify route names for controller actions:\n\n    Route::get(\n        '/user/profile',\n        [UserProfileController::class, 'show']\n    )->name('profile');\n\n> **Warning**  \n> Route names should always be unique.\n\n<a name=\"generating-urls-to-named-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":291,"to":309}}}}],["3324",{"pageContent":"Generating URLs To Named Routes\n\nOnce you have assigned a name to a given route, you may use the route's name when generating URLs or redirects via Laravel's `route` and `redirect` helper functions:\n\n    // Generating URLs...\n    $url = route('profile');\n\n    // Generating Redirects...\n    return redirect()->route('profile');\n\n    return to_route('profile');\n\nIf the named route defines parameters, you may pass the parameters as the second argument to the `route` function. The given parameters will automatically be inserted into the generated URL in their correct positions:\n\n    Route::get('/user/{id}/profile', function (string $id) {\n        // ...\n    })->name('profile');\n\n    $url = route('profile', ['id' => 1]);\n\nIf you pass additional parameters in the array, those key / value pairs will automatically be added to the generated URL's query string:\n\n    Route::get('/user/{id}/profile', function (string $id) {\n        // ...\n    })->name('profile');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":310,"to":334}}}}],["3325",{"pageContent":"Route::get('/user/{id}/profile', function (string $id) {\n        // ...\n    })->name('profile');\n\n    $url = route('profile', ['id' => 1, 'photos' => 'yes']);\n\n    // /user/1/profile?photos=yes\n\n> **Note**  \n> Sometimes, you may wish to specify request-wide default values for URL parameters, such as the current locale. To accomplish this, you may use the [`URL::defaults` method](/docs/{{version}}/urls#default-values).\n\n<a name=\"inspecting-the-current-route\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":334,"to":345}}}}],["3326",{"pageContent":"Inspecting The Current Route\n\nIf you would like to determine if the current request was routed to a given named route, you may use the `named` method on a Route instance. For example, you may check the current route name from a route middleware:\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    /**\n     * Handle an incoming request.\n     *\n     * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n     */\n    public function handle(Request $request, Closure $next): Response\n    {\n        if ($request->route()->named('profile')) {\n            // ...\n        }\n\n        return $next($request);\n    }\n\n<a name=\"route-groups\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":346,"to":368}}}}],["3327",{"pageContent":"Route Groups\n\nRoute groups allow you to share route attributes, such as middleware, across a large number of routes without needing to define those attributes on each individual route.\n\nNested groups attempt to intelligently \"merge\" attributes with their parent group. Middleware and `where` conditions are merged while names and prefixes are appended. Namespace delimiters and slashes in URI prefixes are automatically added where appropriate.\n\n<a name=\"route-group-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":369,"to":375}}}}],["3328",{"pageContent":"Middleware\n\nTo assign [middleware](/docs/{{version}}/middleware) to all routes within a group, you may use the `middleware` method before defining the group. Middleware are executed in the order they are listed in the array:\n\n    Route::middleware(['first', 'second'])->group(function () {\n        Route::get('/', function () {\n            // Uses first & second middleware...\n        });\n\n        Route::get('/user/profile', function () {\n            // Uses first & second middleware...\n        });\n    });\n\n<a name=\"route-group-controllers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":376,"to":390}}}}],["3329",{"pageContent":"Controllers\n\nIf a group of routes all utilize the same [controller](/docs/{{version}}/controllers), you may use the `controller` method to define the common controller for all of the routes within the group. Then, when defining the routes, you only need to provide the controller method that they invoke:\n\n    use App\\Http\\Controllers\\OrderController;\n\n    Route::controller(OrderController::class)->group(function () {\n        Route::get('/orders/{id}', 'show');\n        Route::post('/orders', 'store');\n    });\n\n<a name=\"route-group-subdomain-routing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":391,"to":402}}}}],["3330",{"pageContent":"Subdomain Routing\n\nRoute groups may also be used to handle subdomain routing. Subdomains may be assigned route parameters just like route URIs, allowing you to capture a portion of the subdomain for usage in your route or controller. The subdomain may be specified by calling the `domain` method before defining the group:\n\n    Route::domain('{account}.example.com')->group(function () {\n        Route::get('user/{id}', function (string $account, string $id) {\n            // ...\n        });\n    });\n\n> **Warning**  \n> In order to ensure your subdomain routes are reachable, you should register subdomain routes before registering root domain routes. This will prevent root domain routes from overwriting subdomain routes which have the same URI path.\n\n<a name=\"route-group-prefixes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":403,"to":416}}}}],["3331",{"pageContent":"Route Prefixes\n\nThe `prefix` method may be used to prefix each route in the group with a given URI. For example, you may want to prefix all route URIs within the group with `admin`:\n\n    Route::prefix('admin')->group(function () {\n        Route::get('/users', function () {\n            // Matches The \"/admin/users\" URL\n        });\n    });\n\n<a name=\"route-group-name-prefixes\"></a>\n### Route Name Prefixes\n\nThe `name` method may be used to prefix each route name in the group with a given string. For example, you may want to prefix the names of all of the routes in the group with `admin`. The given string is prefixed to the route name exactly as it is specified, so we will be sure to provide the trailing `.` character in the prefix:\n\n    Route::name('admin.')->group(function () {\n        Route::get('/users', function () {\n            // Route assigned name \"admin.users\"...\n        })->name('users');\n    });\n\n<a name=\"route-model-binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":417,"to":438}}}}],["3332",{"pageContent":"Route Model Binding\n\nWhen injecting a model ID to a route or controller action, you will often query the database to retrieve the model that corresponds to that ID. Laravel route model binding provides a convenient way to automatically inject the model instances directly into your routes. For example, instead of injecting a user's ID, you can inject the entire `User` model instance that matches the given ID.\n\n<a name=\"implicit-binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":439,"to":443}}}}],["3333",{"pageContent":"Implicit Binding\n\nLaravel automatically resolves Eloquent models defined in routes or controller actions whose type-hinted variable names match a route segment name. For example:\n\n    use App\\Models\\User;\n\n    Route::get('/users/{user}', function (User $user) {\n        return $user->email;\n    });\n\nSince the `$user` variable is type-hinted as the `App\\Models\\User` Eloquent model and the variable name matches the `{user}` URI segment, Laravel will automatically inject the model instance that has an ID matching the corresponding value from the request URI. If a matching model instance is not found in the database, a 404 HTTP response will automatically be generated.\n\nOf course, implicit binding is also possible when using controller methods. Again, note the `{user}` URI segment matches the `$user` variable in the controller which contains an `App\\Models\\User` type-hint:\n\n    use App\\Http\\Controllers\\UserController;\n    use App\\Models\\User;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":444,"to":459}}}}],["3334",{"pageContent":"use App\\Http\\Controllers\\UserController;\n    use App\\Models\\User;\n\n    // Route definition...\n    Route::get('/users/{user}', [UserController::class, 'show']);\n\n    // Controller method definition...\n    public function show(User $user)\n    {\n        return view('user.profile', ['user' => $user]);\n    }\n\n<a name=\"implicit-soft-deleted-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":459,"to":471}}}}],["3335",{"pageContent":"Soft Deleted Models\n\nTypically, implicit model binding will not retrieve models that have been [soft deleted](/docs/{{version}}/eloquent#soft-deleting). However, you may instruct the implicit binding to retrieve these models by chaining the `withTrashed` method onto your route's definition:\n\n    use App\\Models\\User;\n\n    Route::get('/users/{user}', function (User $user) {\n        return $user->email;\n    })->withTrashed();\n\n<a name=\"customizing-the-key\"></a>\n<a name=\"customizing-the-default-key-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":472,"to":483}}}}],["3336",{"pageContent":"Customizing The Key\n\nSometimes you may wish to resolve Eloquent models using a column other than `id`. To do so, you may specify the column in the route parameter definition:\n\n    use App\\Models\\Post;\n\n    Route::get('/posts/{post:slug}', function (Post $post) {\n        return $post;\n    });\n\nIf you would like model binding to always use a database column other than `id` when retrieving a given model class, you may override the `getRouteKeyName` method on the Eloquent model:\n\n    /**\n     * Get the route key for the model.\n     */\n    public function getRouteKeyName(): string\n    {\n        return 'slug';\n    }\n\n<a name=\"implicit-model-binding-scoping\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":484,"to":504}}}}],["3337",{"pageContent":"Custom Keys & Scoping\n\nWhen implicitly binding multiple Eloquent models in a single route definition, you may wish to scope the second Eloquent model such that it must be a child of the previous Eloquent model. For example, consider this route definition that retrieves a blog post by slug for a specific user:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n\n    Route::get('/users/{user}/posts/{post:slug}', function (User $user, Post $post) {\n        return $post;\n    });\n\nWhen using a custom keyed implicit binding as a nested route parameter, Laravel will automatically scope the query to retrieve the nested model by its parent using conventions to guess the relationship name on the parent. In this case, it will be assumed that the `User` model has a relationship named `posts` (the plural form of the route parameter name) which can be used to retrieve the `Post` model.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":505,"to":516}}}}],["3338",{"pageContent":"If you wish, you may instruct Laravel to scope \"child\" bindings even when a custom key is not provided. To do so, you may invoke the `scopeBindings` method when defining your route:\n\n    use App\\Models\\Post;\n    use App\\Models\\User;\n\n    Route::get('/users/{user}/posts/{post}', function (User $user, Post $post) {\n        return $post;\n    })->scopeBindings();\n\nOr, you may instruct an entire group of route definitions to use scoped bindings:\n\n    Route::scopeBindings()->group(function () {\n        Route::get('/users/{user}/posts/{post}', function (User $user, Post $post) {\n            return $post;\n        });\n    });\n\nSimilarly, you may explicitly instruct Laravel to not scope bindings by invoking the `withoutScopedBindings` method:\n\n    Route::get('/users/{user}/posts/{post:slug}', function (User $user, Post $post) {\n        return $post;\n    })->withoutScopedBindings();\n\n<a name=\"customizing-missing-model-behavior\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":518,"to":541}}}}],["3339",{"pageContent":"Customizing Missing Model Behavior\n\nTypically, a 404 HTTP response will be generated if an implicitly bound model is not found. However, you may customize this behavior by calling the `missing` method when defining your route. The `missing` method accepts a closure that will be invoked if an implicitly bound model can not be found:\n\n    use App\\Http\\Controllers\\LocationsController;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Redirect;\n\n    Route::get('/locations/{location:slug}', [LocationsController::class, 'show'])\n            ->name('locations.view')\n            ->missing(function (Request $request) {\n                return Redirect::route('locations.index');\n            });\n\n<a name=\"implicit-enum-binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":542,"to":556}}}}],["3340",{"pageContent":"Implicit Enum Binding\n\nPHP 8.1 introduced support for [Enums](https://www.php.net/manual/en/language.enumerations.backed.php). To compliment this feature, Laravel allows you to type-hint a [string-backed Enum](https://www.php.net/manual/en/language.enumerations.backed.php) on your route definition and Laravel will only invoke the route if that route segment corresponds to a valid Enum value. Otherwise, a 404 HTTP response will be returned automatically. For example, given the following Enum:\n\n```php\n<?php\n\nnamespace App\\Enums;\n\nenum Category: string\n{\n    case Fruits = 'fruits';\n    case People = 'people';\n}\n```\n\nYou may define a route that will only be invoked if the `{category}` route segment is `fruits` or `people`. Otherwise, Laravel will return a 404 HTTP response:\n\n```php\nuse App\\Enums\\Category;\nuse Illuminate\\Support\\Facades\\Route;\n\nRoute::get('/categories/{category}', function (Category $category) {\n    return $category->value;\n});\n```\n\n<a name=\"explicit-binding\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":557,"to":584}}}}],["3341",{"pageContent":"Explicit Binding\n\nYou are not required to use Laravel's implicit, convention based model resolution in order to use model binding. You can also explicitly define how route parameters correspond to models. To register an explicit binding, use the router's `model` method to specify the class for a given parameter. You should define your explicit model bindings at the beginning of the `boot` method of your `RouteServiceProvider` class:\n\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Route;\n\n    /**\n     * Define your route model bindings, pattern filters, etc.\n     */\n    public function boot(): void\n    {\n        Route::model('user', User::class);\n\n        // ...\n    }\n\nNext, define a route that contains a `{user}` parameter:\n\n    use App\\Models\\User;\n\n    Route::get('/users/{user}', function (User $user) {\n        // ...\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":585,"to":608}}}}],["3342",{"pageContent":"// ...\n    }\n\nNext, define a route that contains a `{user}` parameter:\n\n    use App\\Models\\User;\n\n    Route::get('/users/{user}', function (User $user) {\n        // ...\n    });\n\nSince we have bound all `{user}` parameters to the `App\\Models\\User` model, an instance of that class will be injected into the route. So, for example, a request to `users/1` will inject the `User` instance from the database which has an ID of `1`.\n\nIf a matching model instance is not found in the database, a 404 HTTP response will be automatically generated.\n\n<a name=\"customizing-the-resolution-logic\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":608,"to":623}}}}],["3343",{"pageContent":"Customizing The Resolution Logic\n\nIf you wish to define your own model binding resolution logic, you may use the `Route::bind` method. The closure you pass to the `bind` method will receive the value of the URI segment and should return the instance of the class that should be injected into the route. Again, this customization should take place in the `boot` method of your application's `RouteServiceProvider`:\n\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Route;\n\n    /**\n     * Define your route model bindings, pattern filters, etc.\n     */\n    public function boot(): void\n    {\n        Route::bind('user', function (string $value) {\n            return User::where('name', $value)->firstOrFail();\n        });\n\n        // ...\n    }\n\nAlternatively, you may override the `resolveRouteBinding` method on your Eloquent model. This method will receive the value of the URI segment and should return the instance of the class that should be injected into the route:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":624,"to":643}}}}],["3344",{"pageContent":"/**\n     * Retrieve the model for a bound value.\n     *\n     * @param  mixed  $value\n     * @param  string|null  $field\n     * @return \\Illuminate\\Database\\Eloquent\\Model|null\n     */\n    public function resolveRouteBinding($value, $field = null)\n    {\n        return $this->where('name', $value)->firstOrFail();\n    }\n\nIf a route is utilizing [implicit binding scoping](#implicit-model-binding-scoping), the `resolveChildRouteBinding` method will be used to resolve the child binding of the parent model:\n\n    /**\n     * Retrieve the child model for a bound value.\n     *\n     * @param  string  $childType\n     * @param  mixed  $value\n     * @param  string|null  $field\n     * @return \\Illuminate\\Database\\Eloquent\\Model|null\n     */\n    public function resolveChildRouteBinding($childType, $value, $field)\n    {\n        return parent::resolveChildRouteBinding($childType, $value, $field);\n    }\n\n<a name=\"fallback-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":645,"to":672}}}}],["3345",{"pageContent":"Fallback Routes\n\nUsing the `Route::fallback` method, you may define a route that will be executed when no other route matches the incoming request. Typically, unhandled requests will automatically render a \"404\" page via your application's exception handler. However, since you would typically define the `fallback` route within your `routes/web.php` file, all middleware in the `web` middleware group will apply to the route. You are free to add additional middleware to this route as needed:\n\n    Route::fallback(function () {\n        // ...\n    });\n\n> **Warning**  \n> The fallback route should always be the last route registered by your application.\n\n<a name=\"rate-limiting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":673,"to":684}}}}],["3346",{"pageContent":"Rate Limiting\n\n<a name=\"defining-rate-limiters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":685,"to":687}}}}],["3347",{"pageContent":"Defining Rate Limiters\n\nLaravel includes powerful and customizable rate limiting services that you may utilize to restrict the amount of traffic for a given route or group of routes. To get started, you should define rate limiter configurations that meet your application's needs.\n\nTypically, rate limiters are defined within the `boot` method of your application's `App\\Providers\\RouteServiceProvider` class. In fact, this class already includes a rate limiter definition that is applied to the routes in your application's `routes/api.php` file:\n\n```php\nuse Illuminate\\Cache\\RateLimiting\\Limit;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\RateLimiter;\n\n/**\n * Define your route model bindings, pattern filters, and other route configuration.\n */\nprotected function boot(): void\n{\n    RateLimiter::for('api', function (Request $request) {\n        return Limit::perMinute(60)->by($request->user()?->id ?: $request->ip());\n    });\n\n    // ...\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":688,"to":709}}}}],["3348",{"pageContent":"Rate limiters are defined using the `RateLimiter` facade's `for` method. The `for` method accepts a rate limiter name and a closure that returns the limit configuration that should apply to routes that are assigned to the rate limiter. Limit configuration are instances of the `Illuminate\\Cache\\RateLimiting\\Limit` class. This class contains helpful \"builder\" methods so that you can quickly define your limit. The rate limiter name may be any string you wish:\n\n    use Illuminate\\Cache\\RateLimiting\\Limit;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\RateLimiter;\n\n    /**\n     * Define your route model bindings, pattern filters, and other route configuration.\n     */\n    protected function boot(): void\n    {\n        RateLimiter::for('global', function (Request $request) {\n            return Limit::perMinute(1000);\n        });\n\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":712,"to":728}}}}],["3349",{"pageContent":"// ...\n    }\n\nIf the incoming request exceeds the specified rate limit, a response with a 429 HTTP status code will automatically be returned by Laravel. If you would like to define your own response that should be returned by a rate limit, you may use the `response` method:\n\n    RateLimiter::for('global', function (Request $request) {\n        return Limit::perMinute(1000)->response(function (Request $request, array $headers) {\n            return response('Custom response...', 429, $headers);\n        });\n    });\n\nSince rate limiter callbacks receive the incoming HTTP request instance, you may build the appropriate rate limit dynamically based on the incoming request or authenticated user:\n\n    RateLimiter::for('uploads', function (Request $request) {\n        return $request->user()->vipCustomer()\n                    ? Limit::none()\n                    : Limit::perMinute(100);\n    });\n\n<a name=\"segmenting-rate-limits\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":728,"to":747}}}}],["3350",{"pageContent":"Segmenting Rate Limits\n\nSometimes you may wish to segment rate limits by some arbitrary value. For example, you may wish to allow users to access a given route 100 times per minute per IP address. To accomplish this, you may use the `by` method when building your rate limit:\n\n    RateLimiter::for('uploads', function (Request $request) {\n        return $request->user()->vipCustomer()\n                    ? Limit::none()\n                    : Limit::perMinute(100)->by($request->ip());\n    });\n\nTo illustrate this feature using another example, we can limit access to the route to 100 times per minute per authenticated user ID or 10 times per minute per IP address for guests:\n\n    RateLimiter::for('uploads', function (Request $request) {\n        return $request->user()\n                    ? Limit::perMinute(100)->by($request->user()->id)\n                    : Limit::perMinute(10)->by($request->ip());\n    });\n\n<a name=\"multiple-rate-limits\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":748,"to":766}}}}],["3351",{"pageContent":"Multiple Rate Limits\n\nIf needed, you may return an array of rate limits for a given rate limiter configuration. Each rate limit will be evaluated for the route based on the order they are placed within the array:\n\n    RateLimiter::for('login', function (Request $request) {\n        return [\n            Limit::perMinute(500),\n            Limit::perMinute(3)->by($request->input('email')),\n        ];\n    });\n\n<a name=\"attaching-rate-limiters-to-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":767,"to":778}}}}],["3352",{"pageContent":"Attaching Rate Limiters To Routes\n\nRate limiters may be attached to routes or route groups using the `throttle` [middleware](/docs/{{version}}/middleware). The throttle middleware accepts the name of the rate limiter you wish to assign to the route:\n\n    Route::middleware(['throttle:uploads'])->group(function () {\n        Route::post('/audio', function () {\n            // ...\n        });\n\n        Route::post('/video', function () {\n            // ...\n        });\n    });\n\n<a name=\"throttling-with-redis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":779,"to":793}}}}],["3353",{"pageContent":"Throttling With Redis\n\nTypically, the `throttle` middleware is mapped to the `Illuminate\\Routing\\Middleware\\ThrottleRequests` class. This mapping is defined in your application's HTTP kernel (`App\\Http\\Kernel`). However, if you are using Redis as your application's cache driver, you may wish to change this mapping to use the `Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis` class. This class is more efficient at managing rate limiting using Redis:\n\n    'throttle' => \\Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis::class,\n\n<a name=\"form-method-spoofing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":794,"to":800}}}}],["3354",{"pageContent":"Form Method Spoofing\n\nHTML forms do not support `PUT`, `PATCH`, or `DELETE` actions. So, when defining `PUT`, `PATCH`, or `DELETE` routes that are called from an HTML form, you will need to add a hidden `_method` field to the form. The value sent with the `_method` field will be used as the HTTP request method:\n\n    <form action=\"/example\" method=\"POST\">\n        <input type=\"hidden\" name=\"_method\" value=\"PUT\">\n        <input type=\"hidden\" name=\"_token\" value=\"{{ csrf_token() }}\">\n    </form>\n\nFor convenience, you may use the `@method` [Blade directive](/docs/{{version}}/blade) to generate the `_method` input field:\n\n    <form action=\"/example\" method=\"POST\">\n        @method('PUT')\n        @csrf\n    </form>\n\n<a name=\"accessing-the-current-route\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":801,"to":817}}}}],["3355",{"pageContent":"Accessing The Current Route\n\nYou may use the `current`, `currentRouteName`, and `currentRouteAction` methods on the `Route` facade to access information about the route handling the incoming request:\n\n    use Illuminate\\Support\\Facades\\Route;\n\n    $route = Route::current(); // Illuminate\\Routing\\Route\n    $name = Route::currentRouteName(); // string\n    $action = Route::currentRouteAction(); // string\n\nYou may refer to the API documentation for both the [underlying class of the Route facade](https://laravel.com/api/{{version}}/Illuminate/Routing/Router.html) and [Route instance](https://laravel.com/api/{{version}}/Illuminate/Routing/Route.html) to review all of the methods that are available on the router and route classes.\n\n<a name=\"cors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":818,"to":830}}}}],["3356",{"pageContent":"Cross-Origin Resource Sharing (CORS)\n\nLaravel can automatically respond to CORS `OPTIONS` HTTP requests with values that you configure. All CORS settings may be configured in your application's `config/cors.php` configuration file. The `OPTIONS` requests will automatically be handled by the `HandleCors` [middleware](/docs/{{version}}/middleware) that is included by default in your global middleware stack. Your global middleware stack is located in your application's HTTP kernel (`App\\Http\\Kernel`).\n\n> **Note**  \n> For more information on CORS and CORS headers, please consult the [MDN web documentation on CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#The_HTTP_response_headers).\n\n<a name=\"route-caching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":831,"to":838}}}}],["3357",{"pageContent":"Route Caching\n\nWhen deploying your application to production, you should take advantage of Laravel's route cache. Using the route cache will drastically decrease the amount of time it takes to register all of your application's routes. To generate a route cache, execute the `route:cache` Artisan command:\n\n```shell\nphp artisan route:cache\n```\n\nAfter running this command, your cached routes file will be loaded on every request. Remember, if you add any new routes you will need to generate a fresh route cache. Because of this, you should only run the `route:cache` command during your project's deployment.\n\nYou may use the `route:clear` command to clear the route cache:\n\n```shell\nphp artisan route:clear\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/routing.md","loc":{"lines":{"from":839,"to":853}}}}],["3358",{"pageContent":"# Laravel Sail","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":1,"to":1}}}}],["3359",{"pageContent":"- [Introduction](#introduction)\n- [Installation & Setup](#installation)\n    - [Installing Sail Into Existing Applications](#installing-sail-into-existing-applications)\n    - [Configuring A Shell Alias](#configuring-a-shell-alias)\n- [Starting & Stopping Sail](#starting-and-stopping-sail)\n- [Executing Commands](#executing-sail-commands)\n    - [Executing PHP Commands](#executing-php-commands)\n    - [Executing Composer Commands](#executing-composer-commands)\n    - [Executing Artisan Commands](#executing-artisan-commands)\n    - [Executing Node / NPM Commands](#executing-node-npm-commands)\n- [Interacting With Databases](#interacting-with-sail-databases)\n    - [MySQL](#mysql)\n    - [Redis](#redis)\n    - [Meilisearch](#meilisearch)\n- [File Storage](#file-storage)\n- [Running Tests](#running-tests)\n    - [Laravel Dusk](#laravel-dusk)\n- [Previewing Emails](#previewing-emails)\n- [Container CLI](#sail-container-cli)\n- [PHP Versions](#sail-php-versions)\n- [Node Versions](#sail-node-versions)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":3,"to":23}}}}],["3360",{"pageContent":"- [Laravel Dusk](#laravel-dusk)\n- [Previewing Emails](#previewing-emails)\n- [Container CLI](#sail-container-cli)\n- [PHP Versions](#sail-php-versions)\n- [Node Versions](#sail-node-versions)\n- [Sharing Your Site](#sharing-your-site)\n- [Debugging With Xdebug](#debugging-with-xdebug)\n  - [Xdebug CLI Usage](#xdebug-cli-usage)\n  - [Xdebug Browser Usage](#xdebug-browser-usage)\n- [Customization](#sail-customization)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":23,"to":32}}}}],["3361",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":34,"to":34}}}}],["3362",{"pageContent":"Introduction\n\n[Laravel Sail](https://github.com/laravel/sail) is a light-weight command-line interface for interacting with Laravel's default Docker development environment. Sail provides a great starting point for building a Laravel application using PHP, MySQL, and Redis without requiring prior Docker experience.\n\nAt its heart, Sail is the `docker-compose.yml` file and the `sail` script that is stored at the root of your project. The `sail` script provides a CLI with convenient methods for interacting with the Docker containers defined by the `docker-compose.yml` file.\n\nLaravel Sail is supported on macOS, Linux, and Windows (via [WSL2](https://docs.microsoft.com/en-us/windows/wsl/about)).\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":35,"to":43}}}}],["3363",{"pageContent":"Installation & Setup\n\nLaravel Sail is automatically installed with all new Laravel applications so you may start using it immediately. To learn how to create a new Laravel application, please consult Laravel's [installation documentation](/docs/{{version}}/installation#laravel-and-docker) for your operating system. During installation, you will be asked to choose which Sail supported services your application will be interacting with.\n\n<a name=\"installing-sail-into-existing-applications\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":44,"to":48}}}}],["3364",{"pageContent":"Installing Sail Into Existing Applications\n\nIf you are interested in using Sail with an existing Laravel application, you may simply install Sail using the Composer package manager. Of course, these steps assume that your existing local development environment allows you to install Composer dependencies:\n\n```shell\ncomposer require laravel/sail --dev\n```\n\nAfter Sail has been installed, you may run the `sail:install` Artisan command. This command will publish Sail's `docker-compose.yml` file to the root of your application and modify your `.env` file with the required environment variables in order to connect to the Docker services:\n\n```shell\nphp artisan sail:install\n```\n\nFinally, you may start Sail. To continue learning how to use Sail, please continue reading the remainder of this documentation:\n\n```shell\n./vendor/bin/sail up","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":49,"to":66}}}}],["3365",{"pageContent":"Finally, you may start Sail. To continue learning how to use Sail, please continue reading the remainder of this documentation:\n\n```shell\n./vendor/bin/sail up\n```\n\n> **Warning**\n> If you are using Docker Desktop for Linux, you should use the `default` Docker context by executing the following command: `docker context use default`.\n\n<a name=\"adding-additional-services\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":66,"to":75}}}}],["3366",{"pageContent":"Adding Additional Services\n\nIf you would like to add an additional service to your existing Sail installation, you may run the `sail:add` Artisan command:\n\n```shell\nphp artisan sail:add\n```\n\n<a name=\"using-devcontainers\"></a>\n#### Using Devcontainers\n\nIf you would like to develop within a [Devcontainer](https://code.visualstudio.com/docs/remote/containers), you may provide the `--devcontainer` option to the `sail:install` command. The `--devcontainer` option will instruct the `sail:install` command to publish a default `.devcontainer/devcontainer.json ` file to the root of your application:\n\n```shell\nphp artisan sail:install --devcontainer\n```\n\n<a name=\"configuring-a-shell-alias\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":76,"to":93}}}}],["3367",{"pageContent":"Configuring A Shell Alias\n\nBy default, Sail commands are invoked using the `vendor/bin/sail` script that is included with all new Laravel applications:\n\n```shell\n./vendor/bin/sail up\n```\n\nHowever, instead of repeatedly typing `vendor/bin/sail` to execute Sail commands, you may wish to configure a shell alias that allows you to execute Sail's commands more easily:\n\n```shell\nalias sail='[ -f sail ] && sh sail || sh vendor/bin/sail'\n```\n\nTo make sure this is always available, you may add this to your shell configuration file in your home directory, such as `~/.zshrc` or `~/.bashrc`, and then restart your shell.\n\nOnce the shell alias has been configured, you may execute Sail commands by simply typing `sail`. The remainder of this documentation's examples will assume that you have configured this alias:\n\n```shell\nsail up\n```\n\n<a name=\"starting-and-stopping-sail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":94,"to":116}}}}],["3368",{"pageContent":"Starting & Stopping Sail\n\nLaravel Sail's `docker-compose.yml` file defines a variety of Docker containers that work together to help you build Laravel applications. Each of these containers is an entry within the `services` configuration of your `docker-compose.yml` file. The `laravel.test` container is the primary application container that will be serving your application.\n\nBefore starting Sail, you should ensure that no other web servers or databases are running on your local computer. To start all of the Docker containers defined in your application's `docker-compose.yml` file, you should execute the `up` command:\n\n```shell\nsail up\n```\n\nTo start all of the Docker containers in the background, you may start Sail in \"detached\" mode:\n\n```shell\nsail up -d","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":117,"to":130}}}}],["3369",{"pageContent":"To start all of the Docker containers in the background, you may start Sail in \"detached\" mode:\n\n```shell\nsail up -d\n```\n\nOnce the application's containers have been started, you may access the project in your web browser at: http://localhost.\n\nTo stop all of the containers, you may simply press Control + C to stop the container's execution. Or, if the containers are running in the background, you may use the `stop` command:\n\n```shell\nsail stop\n```\n\n<a name=\"executing-sail-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":130,"to":144}}}}],["3370",{"pageContent":"Executing Commands\n\nWhen using Laravel Sail, your application is executing within a Docker container and is isolated from your local computer. However, Sail provides a convenient way to run various commands against your application such as arbitrary PHP commands, Artisan commands, Composer commands, and Node / NPM commands.\n\n**When reading the Laravel documentation, you will often see references to Composer, Artisan, and Node / NPM commands that do not reference Sail.** Those examples assume that these tools are installed on your local computer. If you are using Sail for your local Laravel development environment, you should execute those commands using Sail:\n\n```shell\n# Running Artisan commands locally...\nphp artisan queue:work\n\n# Running Artisan commands within Laravel Sail...\nsail artisan queue:work\n```\n\n<a name=\"executing-php-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":145,"to":159}}}}],["3371",{"pageContent":"Executing PHP Commands\n\nPHP commands may be executed using the `php` command. Of course, these commands will execute using the PHP version that is configured for your application. To learn more about the PHP versions available to Laravel Sail, consult the [PHP version documentation](#sail-php-versions):\n\n```shell\nsail php --version\n\nsail php script.php\n```\n\n<a name=\"executing-composer-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":160,"to":170}}}}],["3372",{"pageContent":"Executing Composer Commands\n\nComposer commands may be executed using the `composer` command. Laravel Sail's application container includes a Composer 2.x installation:\n\n```nothing\nsail composer require laravel/sanctum\n```\n\n<a name=\"installing-composer-dependencies-for-existing-projects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":171,"to":179}}}}],["3373",{"pageContent":"Installing Composer Dependencies For Existing Applications\n\nIf you are developing an application with a team, you may not be the one that initially creates the Laravel application. Therefore, none of the application's Composer dependencies, including Sail, will be installed after you clone the application's repository to your local computer.\n\nYou may install the application's dependencies by navigating to the application's directory and executing the following command. This command uses a small Docker container containing PHP and Composer to install the application's dependencies:\n\n```shell\ndocker run --rm \\\n    -u \"$(id -u):$(id -g)\" \\\n    -v \"$(pwd):/var/www/html\" \\\n    -w /var/www/html \\\n    laravelsail/php82-composer:latest \\\n    composer install --ignore-platform-reqs\n```\n\nWhen using the `laravelsail/phpXX-composer` image, you should use the same version of PHP that you plan to use for your application (`80`, `81`, or `82`).\n\n<a name=\"executing-artisan-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":180,"to":197}}}}],["3374",{"pageContent":"Executing Artisan Commands\n\nLaravel Artisan commands may be executed using the `artisan` command:\n\n```shell\nsail artisan queue:work\n```\n\n<a name=\"executing-node-npm-commands\"></a>\n### Executing Node / NPM Commands\n\nNode commands may be executed using the `node` command while NPM commands may be executed using the `npm` command:\n\n```shell\nsail node --version\n\nsail npm run dev\n```\n\nIf you wish, you may use Yarn instead of NPM:\n\n```shell\nsail yarn\n```\n\n<a name=\"interacting-with-sail-databases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":198,"to":223}}}}],["3375",{"pageContent":"Interacting With Databases\n\n<a name=\"mysql\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":224,"to":226}}}}],["3376",{"pageContent":"MySQL\n\nAs you may have noticed, your application's `docker-compose.yml` file contains an entry for a MySQL container. This container uses a [Docker volume](https://docs.docker.com/storage/volumes/) so that the data stored in your database is persisted even when stopping and restarting your containers.\n\nIn addition, the first time the MySQL container starts, it will create two databases for you. The first database is named using the value of your `DB_DATABASE` environment variable and is for your local development. The second is a dedicated testing database named `testing` and will ensure that your tests do not interfere with your development data.\n\nOnce you have started your containers, you may connect to the MySQL instance within your application by setting your `DB_HOST` environment variable within your application's `.env` file to `mysql`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":227,"to":233}}}}],["3377",{"pageContent":"Once you have started your containers, you may connect to the MySQL instance within your application by setting your `DB_HOST` environment variable within your application's `.env` file to `mysql`.\n\nTo connect to your application's MySQL database from your local machine, you may use a graphical database management application such as [TablePlus](https://tableplus.com). By default, the MySQL database is accessible at `localhost` port 3306 and the access credentials correspond to the values of your `DB_USERNAME` and `DB_PASSWORD` environment variables. Or, you may connect as the `root` user, which also utilizes the value of your `DB_PASSWORD` environment variable as its password.\n\n<a name=\"redis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":233,"to":237}}}}],["3378",{"pageContent":"Redis\n\nYour application's `docker-compose.yml` file also contains an entry for a [Redis](https://redis.io) container. This container uses a [Docker volume](https://docs.docker.com/storage/volumes/) so that the data stored in your Redis data is persisted even when stopping and restarting your containers. Once you have started your containers, you may connect to the Redis instance within your application by setting your `REDIS_HOST` environment variable within your application's `.env` file to `redis`.\n\nTo connect to your application's Redis database from your local machine, you may use a graphical database management application such as [TablePlus](https://tableplus.com). By default, the Redis database is accessible at `localhost` port 6379.\n\n<a name=\"meilisearch\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":238,"to":244}}}}],["3379",{"pageContent":"Meilisearch\n\nIf you chose to install the [Meilisearch](https://www.meilisearch.com) service when installing Sail, your application's `docker-compose.yml` file will contain an entry for this powerful search-engine that is [compatible](https://github.com/meilisearch/meilisearch-laravel-scout) with [Laravel Scout](/docs/{{version}}/scout). Once you have started your containers, you may connect to the Meilisearch instance within your application by setting your `MEILISEARCH_HOST` environment variable to `http://meilisearch:7700`.\n\nFrom your local machine, you may access Meilisearch's web based administration panel by navigating to `http://localhost:7700` in your web browser.\n\n<a name=\"file-storage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":245,"to":251}}}}],["3380",{"pageContent":"File Storage\n\nIf you plan to use Amazon S3 to store files while running your application in its production environment, you may wish to install the [MinIO](https://min.io) service when installing Sail. MinIO provides an S3 compatible API that you may use to develop locally using Laravel's `s3` file storage driver without creating \"test\" storage buckets in your production S3 environment. If you choose to install MinIO while installing Sail, a MinIO configuration section will be added to your application's `docker-compose.yml` file.\n\nBy default, your application's `filesystems` configuration file already contains a disk configuration for the `s3` disk. In addition to using this disk to interact with Amazon S3, you may use it to interact with any S3 compatible file storage service such as MinIO by simply modifying the associated environment variables that control its configuration. For example, when using MinIO, your filesystem environment variable configuration should be defined as follows:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":252,"to":256}}}}],["3381",{"pageContent":"```ini\nFILESYSTEM_DISK=s3\nAWS_ACCESS_KEY_ID=sail\nAWS_SECRET_ACCESS_KEY=password\nAWS_DEFAULT_REGION=us-east-1\nAWS_BUCKET=local\nAWS_ENDPOINT=http://minio:9000\nAWS_USE_PATH_STYLE_ENDPOINT=true","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":258,"to":265}}}}],["3382",{"pageContent":"In order for Laravel's Flysystem integration to generate proper URLs when using MinIO, you should define the `AWS_URL` environment variable so that it matches your application's local URL and includes the bucket name in the URL path:\n\n```ini\nAWS_URL=http://localhost:9000/local\n```\n\nYou may create buckets via the MinIO console, which is available at `http://localhost:8900`. The default username for the MinIO console is `sail` while the default password is `password`.\n\n> **Warning**  \n> Generating temporary storage URLs via the `temporaryUrl` method is not supported when using MinIO.\n\n<a name=\"running-tests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":268,"to":279}}}}],["3383",{"pageContent":"Running Tests\n\nLaravel provides amazing testing support out of the box, and you may use Sail's `test` command to run your applications [feature and unit tests](/docs/{{version}}/testing). Any CLI options that are accepted by PHPUnit may also be passed to the `test` command:\n\n```shell\nsail test\n\nsail test --group orders\n```\n\nThe Sail `test` command is equivalent to running the `test` Artisan command:\n\n```shell\nsail artisan test\n```\n\nBy default, Sail will create a dedicated `testing` database so that your tests do not interfere with the current state of your database. In a default Laravel installation, Sail will also configure your `phpunit.xml` file to use this database when executing your tests:\n\n```xml\n<env name=\"DB_DATABASE\" value=\"testing\"/>\n```\n\n<a name=\"laravel-dusk\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":280,"to":302}}}}],["3384",{"pageContent":"Laravel Dusk\n\n[Laravel Dusk](/docs/{{version}}/dusk) provides an expressive, easy-to-use browser automation and testing API. Thanks to Sail, you may run these tests without ever installing Selenium or other tools on your local computer. To get started, uncomment the Selenium service in your application's `docker-compose.yml` file:\n\n```yaml\nselenium:\n    image: 'selenium/standalone-chrome'\n    extra_hosts:\n      - 'host.docker.internal:host-gateway'\n    volumes:\n        - '/dev/shm:/dev/shm'\n    networks:\n        - sail\n```\n\nNext, ensure that the `laravel.test` service in your application's `docker-compose.yml` file has a `depends_on` entry for `selenium`:\n\n```yaml\ndepends_on:\n    - mysql\n    - redis\n    - selenium\n```\n\nFinally, you may run your Dusk test suite by starting Sail and running the `dusk` command:\n\n```shell\nsail dusk\n```\n\n<a name=\"selenium-on-apple-silicon\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":303,"to":333}}}}],["3385",{"pageContent":"Selenium On Apple Silicon\n\nIf your local machine contains an Apple Silicon chip, your `selenium` service must use the `seleniarm/standalone-chromium` image:\n\n```yaml\nselenium:\n    image: 'seleniarm/standalone-chromium'\n    extra_hosts:\n        - 'host.docker.internal:host-gateway'\n    volumes:\n        - '/dev/shm:/dev/shm'\n    networks:\n        - sail\n```\n\n<a name=\"previewing-emails\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":334,"to":349}}}}],["3386",{"pageContent":"Previewing Emails\n\nLaravel Sail's default `docker-compose.yml` file contains a service entry for [Mailpit](https://github.com/axllent/mailpit). Mailpit intercepts emails sent by your application during local development and provides a convenient web interface so that you can preview your email messages in your browser. When using Sail, Mailpit's default host is `mailpit` and is available via port 1025:\n\n```ini\nMAIL_HOST=mailpit\nMAIL_PORT=1025\nMAIL_ENCRYPTION=null\n```\n\nWhen Sail is running, you may access the Mailpit web interface at: http://localhost:8025\n\n<a name=\"sail-container-cli\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":350,"to":362}}}}],["3387",{"pageContent":"Container CLI\n\nSometimes you may wish to start a Bash session within your application's container. You may use the `shell` command to connect to your application's container, allowing you to inspect its files and installed services as well execute arbitrary shell commands within the container:\n\n```shell\nsail shell\n\nsail root-shell\n```\n\nTo start a new [Laravel Tinker](https://github.com/laravel/tinker) session, you may execute the `tinker` command:\n\n```shell\nsail tinker\n```\n\n<a name=\"sail-php-versions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":363,"to":379}}}}],["3388",{"pageContent":"PHP Versions\n\nSail currently supports serving your application via PHP 8.3, 8.2, 8.1, or PHP 8.0. The default PHP version used by Sail is currently PHP 8.2. To change the PHP version that is used to serve your application, you should update the `build` definition of the `laravel.test` container in your application's `docker-compose.yml` file:\n\n```yaml\n# PHP 8.3\ncontext: ./vendor/laravel/sail/runtimes/8.3\n\n# PHP 8.2\ncontext: ./vendor/laravel/sail/runtimes/8.2\n\n# PHP 8.1\ncontext: ./vendor/laravel/sail/runtimes/8.1\n\n# PHP 8.0\ncontext: ./vendor/laravel/sail/runtimes/8.0\n```\n\nIn addition, you may wish to update your `image` name to reflect the version of PHP being used by your application. This option is also defined in your application's `docker-compose.yml` file:\n\n```yaml\nimage: sail-8.1/app\n```\n\nAfter updating your application's `docker-compose.yml` file, you should rebuild your container images:\n\n```shell\nsail build --no-cache\n\nsail up\n```\n\n<a name=\"sail-node-versions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":380,"to":412}}}}],["3389",{"pageContent":"Node Versions\n\nSail installs Node 20 by default. To change the Node version that is installed when building your images, you may update the `build.args` definition of the `laravel.test` service in your application's `docker-compose.yml` file:\n\n```yaml\nbuild:\n    args:\n        WWWGROUP: '${WWWGROUP}'\n        NODE_VERSION: '18'\n```\n\nAfter updating your application's `docker-compose.yml` file, you should rebuild your container images:\n\n```shell\nsail build --no-cache\n\nsail up\n```\n\n<a name=\"sharing-your-site\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":413,"to":432}}}}],["3390",{"pageContent":"Sharing Your Site\n\nSometimes you may need to share your site publicly in order to preview your site for a colleague or to test webhook integrations with your application. To share your site, you may use the `share` command. After executing this command, you will be issued a random `laravel-sail.site` URL that you may use to access your application:\n\n```shell\nsail share\n```\n\nWhen sharing your site via the `share` command, you should configure your application's trusted proxies within the `TrustProxies` middleware. Otherwise, URL generation helpers such as `url` and `route` will be unable to determine the correct HTTP host that should be used during URL generation:\n\n    /**\n     * The trusted proxies for this application.\n     *\n     * @var array|string|null\n     */\n    protected $proxies = '*';\n\nIf you would like to choose the subdomain for your shared site, you may provide the `subdomain` option when executing the `share` command:\n\n```shell\nsail share --subdomain=my-sail-site","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":433,"to":453}}}}],["3391",{"pageContent":"> **Note**  \n> The `share` command is powered by [Expose](https://github.com/beyondcode/expose), an open source tunneling service by [BeyondCode](https://beyondco.de).\n\n<a name=\"debugging-with-xdebug\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":456,"to":459}}}}],["3392",{"pageContent":"Debugging With Xdebug\n\nLaravel Sail's Docker configuration includes support for [Xdebug](https://xdebug.org/), a popular and powerful debugger for PHP. In order to enable Xdebug, you will need to add a few variables to your application's `.env` file to [configure Xdebug](https://xdebug.org/docs/step_debug#mode). To enable Xdebug you must set the appropriate mode(s) before starting Sail:\n\n```ini\nSAIL_XDEBUG_MODE=develop,debug,coverage\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":460,"to":466}}}}],["3393",{"pageContent":"Linux Host IP Configuration\n\nInternally, the `XDEBUG_CONFIG` environment variable is defined as `client_host=host.docker.internal` so that Xdebug will be properly configured for Mac and Windows (WSL2). If your local machine is running Linux, you should ensure that you are running Docker Engine 17.06.0+ and Compose 1.16.0+. Otherwise, you will need to manually define this environment variable as shown below.\n\nFirst, you should determine the correct host IP address to add to the environment variable by running the following command. Typically, the `<container-name>` should be the name of the container that serves your application and often ends with `_laravel.test_1`:\n\n```shell\ndocker inspect -f {{range.NetworkSettings.Networks}}{{.Gateway}}{{end}} <container-name>\n```\n\nOnce you have obtained the correct host IP address, you should define the `SAIL_XDEBUG_CONFIG` variable within your application's `.env` file:\n\n```ini\nSAIL_XDEBUG_CONFIG=\"client_host=<host-ip-address>\"","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":468,"to":481}}}}],["3394",{"pageContent":"<a name=\"xdebug-cli-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":484,"to":484}}}}],["3395",{"pageContent":"Xdebug CLI Usage\n\nA `sail debug` command may be used to start a debugging session when running an Artisan command:\n\n```shell\n# Run an Artisan command without Xdebug...\nsail artisan migrate\n\n# Run an Artisan command with Xdebug...\nsail debug migrate\n```\n\n<a name=\"xdebug-browser-usage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":485,"to":497}}}}],["3396",{"pageContent":"Xdebug Browser Usage\n\nTo debug your application while interacting with the application via a web browser, follow the [instructions provided by Xdebug](https://xdebug.org/docs/step_debug#web-application) for initiating an Xdebug session from the web browser.\n\nIf you're using PhpStorm, please review JetBrain's documentation regarding [zero-configuration debugging](https://www.jetbrains.com/help/phpstorm/zero-configuration-debugging.html).\n\n> **Warning**  \n> Laravel Sail relies on `artisan serve` to serve your application. The `artisan serve` command only accepts the `XDEBUG_CONFIG` and `XDEBUG_MODE` variables as of Laravel version 8.53.0. Older versions of Laravel (8.52.0 and below) do not support these variables and will not accept debug connections.\n\n<a name=\"sail-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":498,"to":507}}}}],["3397",{"pageContent":"Customization\n\nSince Sail is just Docker, you are free to customize nearly everything about it. To publish Sail's own Dockerfiles, you may execute the `sail:publish` command:\n\n```shell\nsail artisan sail:publish\n```\n\nAfter running this command, the Dockerfiles and other configuration files used by Laravel Sail will be placed within a `docker` directory in your application's root directory. After customizing your Sail installation, you may wish to change the image name for the application container in your application's `docker-compose.yml` file. After doing so, rebuild your application's containers using the `build` command. Assigning a unique name to the application image is particularly important if you are using Sail to develop multiple Laravel applications on a single machine:\n\n```shell\nsail build --no-cache\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sail.md","loc":{"lines":{"from":508,"to":520}}}}],["3398",{"pageContent":"# Laravel Sanctum","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":1,"to":1}}}}],["3399",{"pageContent":"- [Introduction](#introduction)\n    - [How It Works](#how-it-works)\n- [Installation](#installation)\n- [Configuration](#configuration)\n    - [Overriding Default Models](#overriding-default-models)\n- [API Token Authentication](#api-token-authentication)\n    - [Issuing API Tokens](#issuing-api-tokens)\n    - [Token Abilities](#token-abilities)\n    - [Protecting Routes](#protecting-routes)\n    - [Revoking Tokens](#revoking-tokens)\n    - [Token Expiration](#token-expiration)\n- [SPA Authentication](#spa-authentication)\n    - [Configuration](#spa-configuration)\n    - [Authenticating](#spa-authenticating)\n    - [Protecting Routes](#protecting-spa-routes)\n    - [Authorizing Private Broadcast Channels](#authorizing-private-broadcast-channels)\n- [Mobile Application Authentication](#mobile-application-authentication)\n    - [Issuing API Tokens](#issuing-mobile-api-tokens)\n    - [Protecting Routes](#protecting-mobile-api-routes)\n    - [Revoking Tokens](#revoking-mobile-api-tokens)\n- [Testing](#testing)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":3,"to":23}}}}],["3400",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":25,"to":25}}}}],["3401",{"pageContent":"Introduction\n\n[Laravel Sanctum](https://github.com/laravel/sanctum) provides a featherweight authentication system for SPAs (single page applications), mobile applications, and simple, token based APIs. Sanctum allows each user of your application to generate multiple API tokens for their account. These tokens may be granted abilities / scopes which specify which actions the tokens are allowed to perform.\n\n<a name=\"how-it-works\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":26,"to":30}}}}],["3402",{"pageContent":"How It Works\n\nLaravel Sanctum exists to solve two separate problems. Let's discuss each before digging deeper into the library.\n\n<a name=\"how-it-works-api-tokens\"></a>\n#### API Tokens\n\nFirst, Sanctum is a simple package you may use to issue API tokens to your users without the complication of OAuth. This feature is inspired by GitHub and other applications which issue \"personal access tokens\". For example, imagine the \"account settings\" of your application has a screen where a user may generate an API token for their account. You may use Sanctum to generate and manage those tokens. These tokens typically have a very long expiration time (years), but may be manually revoked by the user at anytime.\n\nLaravel Sanctum offers this feature by storing user API tokens in a single database table and authenticating incoming HTTP requests via the `Authorization` header which should contain a valid API token.\n\n<a name=\"how-it-works-spa-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":31,"to":42}}}}],["3403",{"pageContent":"SPA Authentication\n\nSecond, Sanctum exists to offer a simple way to authenticate single page applications (SPAs) that need to communicate with a Laravel powered API. These SPAs might exist in the same repository as your Laravel application or might be an entirely separate repository, such as a SPA created using Vue CLI or a Next.js application.\n\nFor this feature, Sanctum does not use tokens of any kind. Instead, Sanctum uses Laravel's built-in cookie based session authentication services. Typically, Sanctum utilizes Laravel's `web` authentication guard to accomplish this. This provides the benefits of CSRF protection, session authentication, as well as protects against leakage of the authentication credentials via XSS.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":43,"to":47}}}}],["3404",{"pageContent":"Sanctum will only attempt to authenticate using cookies when the incoming request originates from your own SPA frontend. When Sanctum examines an incoming HTTP request, it will first check for an authentication cookie and, if none is present, Sanctum will then examine the `Authorization` header for a valid API token.\n\n> **Note**  \n> It is perfectly fine to use Sanctum only for API token authentication or only for SPA authentication. Just because you use Sanctum does not mean you are required to use both features it offers.\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":49,"to":54}}}}],["3405",{"pageContent":"Installation\n\n> **Note**  \n> The most recent versions of Laravel already include Laravel Sanctum. However, if your application's `composer.json` file does not include `laravel/sanctum`, you may follow the installation instructions below.\n\nYou may install Laravel Sanctum via the Composer package manager:\n\n```shell\ncomposer require laravel/sanctum\n```\n\nNext, you should publish the Sanctum configuration and migration files using the `vendor:publish` Artisan command. The `sanctum` configuration file will be placed in your application's `config` directory:\n\n```shell\nphp artisan vendor:publish --provider=\"Laravel\\Sanctum\\SanctumServiceProvider\"\n```\n\nFinally, you should run your database migrations. Sanctum will create one database table in which to store API tokens:\n\n```shell\nphp artisan migrate","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":55,"to":75}}}}],["3406",{"pageContent":"Finally, you should run your database migrations. Sanctum will create one database table in which to store API tokens:\n\n```shell\nphp artisan migrate\n```\n\nNext, if you plan to utilize Sanctum to authenticate a SPA, you should add Sanctum's middleware to your `api` middleware group within your application's `app/Http/Kernel.php` file:\n\n    'api' => [\n        \\Laravel\\Sanctum\\Http\\Middleware\\EnsureFrontendRequestsAreStateful::class,\n        \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class.':api',\n        \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n    ],\n\n<a name=\"migration-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":75,"to":89}}}}],["3407",{"pageContent":"Migration Customization\n\nIf you are not going to use Sanctum's default migrations, you should call the `Sanctum::ignoreMigrations` method in the `register` method of your `App\\Providers\\AppServiceProvider` class. You may export the default migrations by executing the following command: `php artisan vendor:publish --tag=sanctum-migrations`\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":90,"to":94}}}}],["3408",{"pageContent":"Configuration\n\n<a name=\"overriding-default-models\"></a>\n### Overriding Default Models\n\nAlthough not typically required, you are free to extend the `PersonalAccessToken` model used internally by Sanctum:\n\n    use Laravel\\Sanctum\\PersonalAccessToken as SanctumPersonalAccessToken;\n\n    class PersonalAccessToken extends SanctumPersonalAccessToken\n    {\n        // ...\n    }\n\nThen, you may instruct Sanctum to use your custom model via the `usePersonalAccessTokenModel` method provided by Sanctum. Typically, you should call this method in the `boot` method of one of your application's service providers:\n\n    use App\\Models\\Sanctum\\PersonalAccessToken;\n    use Laravel\\Sanctum\\Sanctum;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Sanctum::usePersonalAccessTokenModel(PersonalAccessToken::class);\n    }\n\n<a name=\"api-token-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":95,"to":122}}}}],["3409",{"pageContent":"API Token Authentication\n\n> **Note**  \n> You should not use API tokens to authenticate your own first-party SPA. Instead, use Sanctum's built-in [SPA authentication features](#spa-authentication).\n\n<a name=\"issuing-api-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":123,"to":128}}}}],["3410",{"pageContent":"Issuing API Tokens\n\nSanctum allows you to issue API tokens / personal access tokens that may be used to authenticate API requests to your application. When making requests using API tokens, the token should be included in the `Authorization` header as a `Bearer` token.\n\nTo begin issuing tokens for users, your User model should use the `Laravel\\Sanctum\\HasApiTokens` trait:\n\n    use Laravel\\Sanctum\\HasApiTokens;\n\n    class User extends Authenticatable\n    {\n        use HasApiTokens, HasFactory, Notifiable;\n    }\n\nTo issue a token, you may use the `createToken` method. The `createToken` method returns a `Laravel\\Sanctum\\NewAccessToken` instance. API tokens are hashed using SHA-256 hashing before being stored in your database, but you may access the plain-text value of the token using the `plainTextToken` property of the `NewAccessToken` instance. You should display this value to the user immediately after the token has been created:\n\n    use Illuminate\\Http\\Request;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":129,"to":144}}}}],["3411",{"pageContent":"use Illuminate\\Http\\Request;\n\n    Route::post('/tokens/create', function (Request $request) {\n        $token = $request->user()->createToken($request->token_name);\n\n        return ['token' => $token->plainTextToken];\n    });\n\nYou may access all of the user's tokens using the `tokens` Eloquent relationship provided by the `HasApiTokens` trait:\n\n    foreach ($user->tokens as $token) {\n        // ...\n    }\n\n<a name=\"token-abilities\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":144,"to":158}}}}],["3412",{"pageContent":"Token Abilities\n\nSanctum allows you to assign \"abilities\" to tokens. Abilities serve a similar purpose as OAuth's \"scopes\". You may pass an array of string abilities as the second argument to the `createToken` method:\n\n    return $user->createToken('token-name', ['server:update'])->plainTextToken;\n\nWhen handling an incoming request authenticated by Sanctum, you may determine if the token has a given ability using the `tokenCan` method:\n\n    if ($user->tokenCan('server:update')) {\n        // ...\n    }\n\n<a name=\"token-ability-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":159,"to":171}}}}],["3413",{"pageContent":"Token Ability Middleware\n\nSanctum also includes two middleware that may be used to verify that an incoming request is authenticated with a token that has been granted a given ability. To get started, add the following middleware to the `$middlewareAliases` property of your application's `app/Http/Kernel.php` file:\n\n    'abilities' => \\Laravel\\Sanctum\\Http\\Middleware\\CheckAbilities::class,\n    'ability' => \\Laravel\\Sanctum\\Http\\Middleware\\CheckForAnyAbility::class,\n\nThe `abilities` middleware may be assigned to a route to verify that the incoming request's token has all of the listed abilities:\n\n    Route::get('/orders', function () {\n        // Token has both \"check-status\" and \"place-orders\" abilities...\n    })->middleware(['auth:sanctum', 'abilities:check-status,place-orders']);\n\nThe `ability` middleware may be assigned to a route to verify that the incoming request's token has *at least one* of the listed abilities:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":172,"to":185}}}}],["3414",{"pageContent":"The `ability` middleware may be assigned to a route to verify that the incoming request's token has *at least one* of the listed abilities:\n\n    Route::get('/orders', function () {\n        // Token has the \"check-status\" or \"place-orders\" ability...\n    })->middleware(['auth:sanctum', 'ability:check-status,place-orders']);\n\n<a name=\"first-party-ui-initiated-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":185,"to":191}}}}],["3415",{"pageContent":"First-Party UI Initiated Requests\n\nFor convenience, the `tokenCan` method will always return `true` if the incoming authenticated request was from your first-party SPA and you are using Sanctum's built-in [SPA authentication](#spa-authentication).\n\nHowever, this does not necessarily mean that your application has to allow the user to perform the action. Typically, your application's [authorization policies](/docs/{{version}}/authorization#creating-policies) will determine if the token has been granted the permission to perform the abilities as well as check that the user instance itself should be allowed to perform the action.\n\nFor example, if we imagine an application that manages servers, this might mean checking that token is authorized to update servers **and** that the server belongs to the user:\n\n```php\nreturn $request->user()->id === $server->user_id &&\n       $request->user()->tokenCan('server:update')","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":192,"to":202}}}}],["3416",{"pageContent":"At first, allowing the `tokenCan` method to be called and always return `true` for first-party UI initiated requests may seem strange; however, it is convenient to be able to always assume an API token is available and can be inspected via the `tokenCan` method. By taking this approach, you may always call the `tokenCan` method within your application's authorizations policies without worrying about whether the request was triggered from your application's UI or was initiated by one of your API's third-party consumers.\n\n<a name=\"protecting-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":205,"to":207}}}}],["3417",{"pageContent":"Protecting Routes\n\nTo protect routes so that all incoming requests must be authenticated, you should attach the `sanctum` authentication guard to your protected routes within your `routes/web.php` and `routes/api.php` route files. This guard will ensure that incoming requests are authenticated as either stateful, cookie authenticated requests or contain a valid API token header if the request is from a third party.\n\nYou may be wondering why we suggest that you authenticate the routes within your application's `routes/web.php` file using the `sanctum` guard. Remember, Sanctum will first attempt to authenticate incoming requests using Laravel's typical session authentication cookie. If that cookie is not present then Sanctum will attempt to authenticate the request using a token in the request's `Authorization` header. In addition, authenticating all requests using Sanctum ensures that we may always call the `tokenCan` method on the currently authenticated user instance:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":208,"to":212}}}}],["3418",{"pageContent":"use Illuminate\\Http\\Request;\n\n    Route::middleware('auth:sanctum')->get('/user', function (Request $request) {\n        return $request->user();\n    });\n\n<a name=\"revoking-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":214,"to":220}}}}],["3419",{"pageContent":"Revoking Tokens\n\nYou may \"revoke\" tokens by deleting them from your database using the `tokens` relationship that is provided by the `Laravel\\Sanctum\\HasApiTokens` trait:\n\n    // Revoke all tokens...\n    $user->tokens()->delete();\n\n    // Revoke the token that was used to authenticate the current request...\n    $request->user()->currentAccessToken()->delete();\n\n    // Revoke a specific token...\n    $user->tokens()->where('id', $tokenId)->delete();\n\n<a name=\"token-expiration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":221,"to":234}}}}],["3420",{"pageContent":"Token Expiration\n\nBy default, Sanctum tokens never expire and may only be invalidated by [revoking the token](#revoking-tokens). However, if you would like to configure an expiration time for your application's API tokens, you may do so via the `expiration` configuration option defined in your application's `sanctum` configuration file. This configuration option defines the number of minutes until an issued token will be considered expired:\n\n```php\n'expiration' => 525600,\n```\n\nIf you have configured a token expiration time for your application, you may also wish to [schedule a task](/docs/{{version}}/scheduling) to prune your application's expired tokens. Thankfully, Sanctum includes a `sanctum:prune-expired` Artisan command that you may use to accomplish this. For example, you may configure a scheduled tasks to delete all expired token database records that have been expired for at least 24 hours:\n\n```php\n$schedule->command('sanctum:prune-expired --hours=24')->daily();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":235,"to":246}}}}],["3421",{"pageContent":"<a name=\"spa-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":249,"to":249}}}}],["3422",{"pageContent":"SPA Authentication\n\nSanctum also exists to provide a simple method of authenticating single page applications (SPAs) that need to communicate with a Laravel powered API. These SPAs might exist in the same repository as your Laravel application or might be an entirely separate repository.\n\nFor this feature, Sanctum does not use tokens of any kind. Instead, Sanctum uses Laravel's built-in cookie based session authentication services. This approach to authentication provides the benefits of CSRF protection, session authentication, as well as protects against leakage of the authentication credentials via XSS.\n\n> **Warning**  \n> In order to authenticate, your SPA and API must share the same top-level domain. However, they may be placed on different subdomains. Additionally, you should ensure that you send the `Accept: application/json` header and either the `Referer` or `Origin` header with your request.\n\n\n<a name=\"spa-configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":250,"to":260}}}}],["3423",{"pageContent":"Configuration\n\n<a name=\"configuring-your-first-party-domains\"></a>\n#### Configuring Your First-Party Domains\n\nFirst, you should configure which domains your SPA will be making requests from. You may configure these domains using the `stateful` configuration option in your `sanctum` configuration file. This configuration setting determines which domains will maintain \"stateful\" authentication using Laravel session cookies when making requests to your API.\n\n> **Warning**  \n> If you are accessing your application via a URL that includes a port (`127.0.0.1:8000`), you should ensure that you include the port number with the domain.\n\n<a name=\"sanctum-middleware\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":261,"to":271}}}}],["3424",{"pageContent":"Sanctum Middleware\n\nNext, you should add Sanctum's middleware to your `api` middleware group within your `app/Http/Kernel.php` file. This middleware is responsible for ensuring that incoming requests from your SPA can authenticate using Laravel's session cookies, while still allowing requests from third parties or mobile applications to authenticate using API tokens:\n\n    'api' => [\n        \\Laravel\\Sanctum\\Http\\Middleware\\EnsureFrontendRequestsAreStateful::class,\n        \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class.':api',\n        \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n    ],\n\n<a name=\"cors-and-cookies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":272,"to":282}}}}],["3425",{"pageContent":"CORS & Cookies\n\nIf you are having trouble authenticating with your application from a SPA that executes on a separate subdomain, you have likely misconfigured your CORS (Cross-Origin Resource Sharing) or session cookie settings.\n\nYou should ensure that your application's CORS configuration is returning the `Access-Control-Allow-Credentials` header with a value of `True`. This may be accomplished by setting the `supports_credentials` option within your application's `config/cors.php` configuration file to `true`.\n\nIn addition, you should enable the `withCredentials` option on your application's global `axios` instance. Typically, this should be performed in your `resources/js/bootstrap.js` file. If you are not using Axios to make HTTP requests from your frontend, you should perform the equivalent configuration on your own HTTP client:\n\n```js\naxios.defaults.withCredentials = true;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":283,"to":292}}}}],["3426",{"pageContent":"Finally, you should ensure your application's session cookie domain configuration supports any subdomain of your root domain. You may accomplish this by prefixing the domain with a leading `.` within your application's `config/session.php` configuration file:\n\n    'domain' => '.domain.com',\n\n<a name=\"spa-authenticating\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":295,"to":299}}}}],["3427",{"pageContent":"Authenticating\n\n<a name=\"csrf-protection\"></a>\n#### CSRF Protection\n\nTo authenticate your SPA, your SPA's \"login\" page should first make a request to the `/sanctum/csrf-cookie` endpoint to initialize CSRF protection for the application:\n\n```js\naxios.get('/sanctum/csrf-cookie').then(response => {\n    // Login...\n});\n```\n\nDuring this request, Laravel will set an `XSRF-TOKEN` cookie containing the current CSRF token. This token should then be passed in an `X-XSRF-TOKEN` header on subsequent requests, which some HTTP client libraries like Axios and the Angular HttpClient will do automatically for you. If your JavaScript HTTP library does not set the value for you, you will need to manually set the `X-XSRF-TOKEN` header to match the value of the `XSRF-TOKEN` cookie that is set by this route.\n\n<a name=\"logging-in\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":300,"to":315}}}}],["3428",{"pageContent":"Logging In\n\nOnce CSRF protection has been initialized, you should make a `POST` request to your Laravel application's `/login` route. This `/login` route may be [implemented manually](/docs/{{version}}/authentication#authenticating-users) or using a headless authentication package like [Laravel Fortify](/docs/{{version}}/fortify).\n\nIf the login request is successful, you will be authenticated and subsequent requests to your application's routes will automatically be authenticated via the session cookie that the Laravel application issued to your client. In addition, since your application already made a request to the `/sanctum/csrf-cookie` route, subsequent requests should automatically receive CSRF protection as long as your JavaScript HTTP client sends the value of the `XSRF-TOKEN` cookie in the `X-XSRF-TOKEN` header.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":316,"to":320}}}}],["3429",{"pageContent":"Of course, if your user's session expires due to lack of activity, subsequent requests to the Laravel application may receive 401 or 419 HTTP error response. In this case, you should redirect the user to your SPA's login page.\n\n> **Warning**  \n> You are free to write your own `/login` endpoint; however, you should ensure that it authenticates the user using the standard, [session based authentication services that Laravel provides](/docs/{{version}}/authentication#authenticating-users). Typically, this means using the `web` authentication guard.\n\n<a name=\"protecting-spa-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":322,"to":327}}}}],["3430",{"pageContent":"Protecting Routes\n\nTo protect routes so that all incoming requests must be authenticated, you should attach the `sanctum` authentication guard to your API routes within your `routes/api.php` file. This guard will ensure that incoming requests are authenticated as either a stateful authenticated requests from your SPA or contain a valid API token header if the request is from a third party:\n\n    use Illuminate\\Http\\Request;\n\n    Route::middleware('auth:sanctum')->get('/user', function (Request $request) {\n        return $request->user();\n    });\n\n<a name=\"authorizing-private-broadcast-channels\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":328,"to":338}}}}],["3431",{"pageContent":"Authorizing Private Broadcast Channels\n\nIf your SPA needs to authenticate with [private / presence broadcast channels](/docs/{{version}}/broadcasting#authorizing-channels), you should place the `Broadcast::routes` method call within your `routes/api.php` file:\n\n    Broadcast::routes(['middleware' => ['auth:sanctum']]);\n\nNext, in order for Pusher's authorization requests to succeed, you will need to provide a custom Pusher `authorizer` when initializing [Laravel Echo](/docs/{{version}}/broadcasting#client-side-installation). This allows your application to configure Pusher to use the `axios` instance that is [properly configured for cross-domain requests](#cors-and-cookies):","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":339,"to":345}}}}],["3432",{"pageContent":"```js\nwindow.Echo = new Echo({\n    broadcaster: \"pusher\",\n    cluster: import.meta.env.VITE_PUSHER_APP_CLUSTER,\n    encrypted: true,\n    key: import.meta.env.VITE_PUSHER_APP_KEY,\n    authorizer: (channel, options) => {\n        return {\n            authorize: (socketId, callback) => {\n                axios.post('/api/broadcasting/auth', {\n                    socket_id: socketId,\n                    channel_name: channel.name\n                })\n                .then(response => {\n                    callback(false, response.data);\n                })\n                .catch(error => {\n                    callback(true, error);\n                });\n            }\n        };\n    },\n})","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":347,"to":369}}}}],["3433",{"pageContent":"<a name=\"mobile-application-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":372,"to":372}}}}],["3434",{"pageContent":"Mobile Application Authentication\n\nYou may also use Sanctum tokens to authenticate your mobile application's requests to your API. The process for authenticating mobile application requests is similar to authenticating third-party API requests; however, there are small differences in how you will issue the API tokens.\n\n<a name=\"issuing-mobile-api-tokens\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":373,"to":377}}}}],["3435",{"pageContent":"Issuing API Tokens\n\nTo get started, create a route that accepts the user's email / username, password, and device name, then exchanges those credentials for a new Sanctum token. The \"device name\" given to this endpoint is for informational purposes and may be any value you wish. In general, the device name value should be a name the user would recognize, such as \"Nuno's iPhone 12\".\n\nTypically, you will make a request to the token endpoint from your mobile application's \"login\" screen. The endpoint will return the plain-text API token which may then be stored on the mobile device and used to make additional API requests:\n\n    use App\\Models\\User;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Hash;\n    use Illuminate\\Validation\\ValidationException;\n\n    Route::post('/sanctum/token', function (Request $request) {\n        $request->validate([\n            'email' => 'required|email',\n            'password' => 'required',\n            'device_name' => 'required',\n        ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":378,"to":394}}}}],["3436",{"pageContent":"$user = User::where('email', $request->email)->first();\n\n        if (! $user || ! Hash::check($request->password, $user->password)) {\n            throw ValidationException::withMessages([\n                'email' => ['The provided credentials are incorrect.'],\n            ]);\n        }\n\n        return $user->createToken($request->device_name)->plainTextToken;\n    });\n\nWhen the mobile application uses the token to make an API request to your application, it should pass the token in the `Authorization` header as a `Bearer` token.\n\n> **Note**  \n> When issuing tokens for a mobile application, you are also free to specify [token abilities](#token-abilities).\n\n<a name=\"protecting-mobile-api-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":396,"to":412}}}}],["3437",{"pageContent":"Protecting Routes\n\nAs previously documented, you may protect routes so that all incoming requests must be authenticated by attaching the `sanctum` authentication guard to the routes:\n\n    Route::middleware('auth:sanctum')->get('/user', function (Request $request) {\n        return $request->user();\n    });\n\n<a name=\"revoking-mobile-api-tokens\"></a>\n### Revoking Tokens\n\nTo allow users to revoke API tokens issued to mobile devices, you may list them by name, along with a \"Revoke\" button, within an \"account settings\" portion of your web application's UI. When the user clicks the \"Revoke\" button, you can delete the token from the database. Remember, you can access a user's API tokens via the `tokens` relationship provided by the `Laravel\\Sanctum\\HasApiTokens` trait:\n\n    // Revoke all tokens...\n    $user->tokens()->delete();\n\n    // Revoke a specific token...\n    $user->tokens()->where('id', $tokenId)->delete();\n\n<a name=\"testing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":413,"to":432}}}}],["3438",{"pageContent":"Testing\n\nWhile testing, the `Sanctum::actingAs` method may be used to authenticate a user and specify which abilities should be granted to their token:\n\n    use App\\Models\\User;\n    use Laravel\\Sanctum\\Sanctum;\n\n    public function test_task_list_can_be_retrieved(): void\n    {\n        Sanctum::actingAs(\n            User::factory()->create(),\n            ['view-tasks']\n        );\n\n        $response = $this->get('/api/task');\n\n        $response->assertOk();\n    }\n\nIf you would like to grant all abilities to the token, you should include `*` in the ability list provided to the `actingAs` method:\n\n    Sanctum::actingAs(\n        User::factory()->create(),\n        ['*']\n    );","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/sanctum.md","loc":{"lines":{"from":433,"to":457}}}}],["3439",{"pageContent":"# Task Scheduling\n\n- [Introduction](#introduction)\n- [Defining Schedules](#defining-schedules)\n    - [Scheduling Artisan Commands](#scheduling-artisan-commands)\n    - [Scheduling Queued Jobs](#scheduling-queued-jobs)\n    - [Scheduling Shell Commands](#scheduling-shell-commands)\n    - [Schedule Frequency Options](#schedule-frequency-options)\n    - [Timezones](#timezones)\n    - [Preventing Task Overlaps](#preventing-task-overlaps)\n    - [Running Tasks On One Server](#running-tasks-on-one-server)\n    - [Background Tasks](#background-tasks)\n    - [Maintenance Mode](#maintenance-mode)\n- [Running The Scheduler](#running-the-scheduler)\n    - [Sub-Minute Scheduled Tasks](#sub-minute-scheduled-tasks)\n    - [Running The Scheduler Locally](#running-the-scheduler-locally)\n- [Task Output](#task-output)\n- [Task Hooks](#task-hooks)\n- [Events](#events)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":1,"to":21}}}}],["3440",{"pageContent":"Introduction\n\nIn the past, you may have written a cron configuration entry for each task you needed to schedule on your server. However, this can quickly become a pain because your task schedule is no longer in source control and you must SSH into your server to view your existing cron entries or add additional entries.\n\nLaravel's command scheduler offers a fresh approach to managing scheduled tasks on your server. The scheduler allows you to fluently and expressively define your command schedule within your Laravel application itself. When using the scheduler, only a single cron entry is needed on your server. Your task schedule is defined in the `app/Console/Kernel.php` file's `schedule` method. To help you get started, a simple example is defined within the method.\n\n<a name=\"defining-schedules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":22,"to":28}}}}],["3441",{"pageContent":"Defining Schedules\n\nYou may define all of your scheduled tasks in the `schedule` method of your application's `App\\Console\\Kernel` class. To get started, let's take a look at an example. In this example, we will schedule a closure to be called every day at midnight. Within the closure we will execute a database query to clear a table:\n\n    <?php\n\n    namespace App\\Console;\n\n    use Illuminate\\Console\\Scheduling\\Schedule;\n    use Illuminate\\Foundation\\Console\\Kernel as ConsoleKernel;\n    use Illuminate\\Support\\Facades\\DB;\n\n    class Kernel extends ConsoleKernel\n    {\n        /**\n         * Define the application's command schedule.\n         */\n        protected function schedule(Schedule $schedule): void\n        {\n            $schedule->call(function () {\n                DB::table('recent_users')->delete();\n            })->daily();\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":29,"to":52}}}}],["3442",{"pageContent":"In addition to scheduling using closures, you may also schedule [invokable objects](https://secure.php.net/manual/en/language.oop5.magic.php#object.invoke). Invokable objects are simple PHP classes that contain an `__invoke` method:\n\n    $schedule->call(new DeleteRecentUsers)->daily();\n\nIf you would like to view an overview of your scheduled tasks and the next time they are scheduled to run, you may use the `schedule:list` Artisan command:\n\n```bash\nphp artisan schedule:list","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":54,"to":61}}}}],["3443",{"pageContent":"<a name=\"scheduling-artisan-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":64,"to":64}}}}],["3444",{"pageContent":"Scheduling Artisan Commands\n\nIn addition to scheduling closures, you may also schedule [Artisan commands](/docs/{{version}}/artisan) and system commands. For example, you may use the `command` method to schedule an Artisan command using either the command's name or class.\n\nWhen scheduling Artisan commands using the command's class name, you may pass an array of additional command-line arguments that should be provided to the command when it is invoked:\n\n    use App\\Console\\Commands\\SendEmailsCommand;\n\n    $schedule->command('emails:send Taylor --force')->daily();\n\n    $schedule->command(SendEmailsCommand::class, ['Taylor', '--force'])->daily();\n\n<a name=\"scheduling-queued-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":65,"to":77}}}}],["3445",{"pageContent":"Scheduling Queued Jobs\n\nThe `job` method may be used to schedule a [queued job](/docs/{{version}}/queues). This method provides a convenient way to schedule queued jobs without using the `call` method to define closures to queue the job:\n\n    use App\\Jobs\\Heartbeat;\n\n    $schedule->job(new Heartbeat)->everyFiveMinutes();\n\nOptional second and third arguments may be provided to the `job` method which specifies the queue name and queue connection that should be used to queue the job:\n\n    use App\\Jobs\\Heartbeat;\n\n    // Dispatch the job to the \"heartbeats\" queue on the \"sqs\" connection...\n    $schedule->job(new Heartbeat, 'heartbeats', 'sqs')->everyFiveMinutes();\n\n<a name=\"scheduling-shell-commands\"></a>\n### Scheduling Shell Commands\n\nThe `exec` method may be used to issue a command to the operating system:\n\n    $schedule->exec('node /home/forge/script.js')->daily();\n\n<a name=\"schedule-frequency-options\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":78,"to":100}}}}],["3446",{"pageContent":"Schedule Frequency Options\n\nWe've already seen a few examples of how you may configure a task to run at specified intervals. However, there are many more task schedule frequencies that you may assign to a task:\n\n<div class=\"overflow-auto\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":101,"to":105}}}}],["3447",{"pageContent":"Method  | Description\n------------- | -------------\n`->cron('* * * * *');`  |  Run the task on a custom cron schedule\n`->everySecond();`  |  Run the task every second\n`->everyTwoSeconds();`  |  Run the task every two seconds\n`->everyFiveSeconds();`  |  Run the task every five seconds\n`->everyTenSeconds();`  |  Run the task every ten seconds\n`->everyFifteenSeconds();`  |  Run the task every fifteen seconds\n`->everyTwentySeconds();`  |  Run the task every twenty seconds\n`->everyThirtySeconds();`  |  Run the task every thirty seconds\n`->everyMinute();`  |  Run the task every minute\n`->everyTwoMinutes();`  |  Run the task every two minutes\n`->everyThreeMinutes();`  |  Run the task every three minutes\n`->everyFourMinutes();`  |  Run the task every four minutes\n`->everyFiveMinutes();`  |  Run the task every five minutes\n`->everyTenMinutes();`  |  Run the task every ten minutes\n`->everyFifteenMinutes();`  |  Run the task every fifteen minutes\n`->everyThirtyMinutes();`  |  Run the task every thirty minutes","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":107,"to":124}}}}],["3448",{"pageContent":"`->everyTenMinutes();`  |  Run the task every ten minutes\n`->everyFifteenMinutes();`  |  Run the task every fifteen minutes\n`->everyThirtyMinutes();`  |  Run the task every thirty minutes\n`->hourly();`  |  Run the task every hour\n`->hourlyAt(17);`  |  Run the task every hour at 17 minutes past the hour\n`->everyOddHour($minutes = 0);`  |  Run the task every odd hour\n`->everyTwoHours($minutes = 0);`  |  Run the task every two hours\n`->everyThreeHours($minutes = 0);`  |  Run the task every three hours\n`->everyFourHours($minutes = 0);`  |  Run the task every four hours\n`->everySixHours($minutes = 0);`  |  Run the task every six hours\n`->daily();`  |  Run the task every day at midnight\n`->dailyAt('13:00');`  |  Run the task every day at 13:00\n`->twiceDaily(1, 13);`  |  Run the task daily at 1:00 & 13:00\n`->twiceDailyAt(1, 13, 15);`  |  Run the task daily at 1:15 & 13:15\n`->weekly();`  |  Run the task every Sunday at 00:00\n`->weeklyOn(1, '8:00');`  |  Run the task every week on Monday at 8:00","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":124,"to":139}}}}],["3449",{"pageContent":"`->twiceDailyAt(1, 13, 15);`  |  Run the task daily at 1:15 & 13:15\n`->weekly();`  |  Run the task every Sunday at 00:00\n`->weeklyOn(1, '8:00');`  |  Run the task every week on Monday at 8:00\n`->monthly();`  |  Run the task on the first day of every month at 00:00\n`->monthlyOn(4, '15:00');`  |  Run the task every month on the 4th at 15:00\n`->twiceMonthly(1, 16, '13:00');`  |  Run the task monthly on the 1st and 16th at 13:00\n`->lastDayOfMonth('15:00');` | Run the task on the last day of the month at 15:00\n`->quarterly();` |  Run the task on the first day of every quarter at 00:00\n`->quarterlyOn(4, '14:00');` |  Run the task every quarter on the 4th at 14:00\n`->yearly();`  |  Run the task on the first day of every year at 00:00\n`->yearlyOn(6, 1, '17:00');`  |  Run the task every year on June 1st at 17:00\n`->timezone('America/New_York');` | Set the timezone for the task","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":139,"to":150}}}}],["3450",{"pageContent":"</div>\n\nThese methods may be combined with additional constraints to create even more finely tuned schedules that only run on certain days of the week. For example, you may schedule a command to run weekly on Monday:\n\n    // Run once per week on Monday at 1 PM...\n    $schedule->call(function () {\n        // ...\n    })->weekly()->mondays()->at('13:00');\n\n    // Run hourly from 8 AM to 5 PM on weekdays...\n    $schedule->command('foo')\n              ->weekdays()\n              ->hourly()\n              ->timezone('America/Chicago')\n              ->between('8:00', '17:00');\n\nA list of additional schedule constraints may be found below:\n\n<div class=\"overflow-auto\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":152,"to":170}}}}],["3451",{"pageContent":"A list of additional schedule constraints may be found below:\n\n<div class=\"overflow-auto\">\n\nMethod  | Description\n------------- | -------------\n`->weekdays();`  |  Limit the task to weekdays\n`->weekends();`  |  Limit the task to weekends\n`->sundays();`  |  Limit the task to Sunday\n`->mondays();`  |  Limit the task to Monday\n`->tuesdays();`  |  Limit the task to Tuesday\n`->wednesdays();`  |  Limit the task to Wednesday\n`->thursdays();`  |  Limit the task to Thursday\n`->fridays();`  |  Limit the task to Friday\n`->saturdays();`  |  Limit the task to Saturday\n`->days(array\\|mixed);`  |  Limit the task to specific days\n`->between($startTime, $endTime);`  |  Limit the task to run between start and end times\n`->unlessBetween($startTime, $endTime);`  |  Limit the task to not run between start and end times\n`->when(Closure);`  |  Limit the task based on a truth test\n`->environments($env);`  |  Limit the task to specific environments\n\n</div>\n\n<a name=\"day-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":170,"to":193}}}}],["3452",{"pageContent":"Day Constraints\n\nThe `days` method may be used to limit the execution of a task to specific days of the week. For example, you may schedule a command to run hourly on Sundays and Wednesdays:\n\n    $schedule->command('emails:send')\n                    ->hourly()\n                    ->days([0, 3]);\n\nAlternatively, you may use the constants available on the `Illuminate\\Console\\Scheduling\\Schedule` class when defining the days on which a task should run:\n\n    use Illuminate\\Console\\Scheduling\\Schedule;\n\n    $schedule->command('emails:send')\n                    ->hourly()\n                    ->days([Schedule::SUNDAY, Schedule::WEDNESDAY]);\n\n<a name=\"between-time-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":194,"to":210}}}}],["3453",{"pageContent":"Between Time Constraints\n\nThe `between` method may be used to limit the execution of a task based on the time of day:\n\n    $schedule->command('emails:send')\n                        ->hourly()\n                        ->between('7:00', '22:00');\n\nSimilarly, the `unlessBetween` method can be used to exclude the execution of a task for a period of time:\n\n    $schedule->command('emails:send')\n                        ->hourly()\n                        ->unlessBetween('23:00', '4:00');\n\n<a name=\"truth-test-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":211,"to":225}}}}],["3454",{"pageContent":"Truth Test Constraints\n\nThe `when` method may be used to limit the execution of a task based on the result of a given truth test. In other words, if the given closure returns `true`, the task will execute as long as no other constraining conditions prevent the task from running:\n\n    $schedule->command('emails:send')->daily()->when(function () {\n        return true;\n    });\n\nThe `skip` method may be seen as the inverse of `when`. If the `skip` method returns `true`, the scheduled task will not be executed:\n\n    $schedule->command('emails:send')->daily()->skip(function () {\n        return true;\n    });\n\nWhen using chained `when` methods, the scheduled command will only execute if all `when` conditions return `true`.\n\n<a name=\"environment-constraints\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":226,"to":242}}}}],["3455",{"pageContent":"Environment Constraints\n\nThe `environments` method may be used to execute tasks only on the given environments (as defined by the `APP_ENV` [environment variable](/docs/{{version}}/configuration#environment-configuration)):\n\n    $schedule->command('emails:send')\n                ->daily()\n                ->environments(['staging', 'production']);\n\n<a name=\"timezones\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":243,"to":251}}}}],["3456",{"pageContent":"Timezones\n\nUsing the `timezone` method, you may specify that a scheduled task's time should be interpreted within a given timezone:\n\n    $schedule->command('report:generate')\n             ->timezone('America/New_York')\n             ->at('2:00')\n\nIf you are repeatedly assigning the same timezone to all of your scheduled tasks, you may wish to define a `scheduleTimezone` method in your `App\\Console\\Kernel` class. This method should return the default timezone that should be assigned to all scheduled tasks:\n\n    use DateTimeZone;\n\n    /**\n     * Get the timezone that should be used by default for scheduled events.\n     */\n    protected function scheduleTimezone(): DateTimeZone|string|null\n    {\n        return 'America/Chicago';\n    }\n\n> **Warning**  \n> Remember that some timezones utilize daylight savings time. When daylight saving time changes occur, your scheduled task may run twice or even not run at all. For this reason, we recommend avoiding timezone scheduling when possible.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":252,"to":273}}}}],["3457",{"pageContent":"<a name=\"preventing-task-overlaps\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":275,"to":275}}}}],["3458",{"pageContent":"Preventing Task Overlaps\n\nBy default, scheduled tasks will be run even if the previous instance of the task is still running. To prevent this, you may use the `withoutOverlapping` method:\n\n    $schedule->command('emails:send')->withoutOverlapping();\n\nIn this example, the `emails:send` [Artisan command](/docs/{{version}}/artisan) will be run every minute if it is not already running. The `withoutOverlapping` method is especially useful if you have tasks that vary drastically in their execution time, preventing you from predicting exactly how long a given task will take.\n\nIf needed, you may specify how many minutes must pass before the \"without overlapping\" lock expires. By default, the lock will expire after 24 hours:\n\n    $schedule->command('emails:send')->withoutOverlapping(10);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":276,"to":286}}}}],["3459",{"pageContent":"$schedule->command('emails:send')->withoutOverlapping(10);\n\nBehind the scenes, the `withoutOverlapping` method utilizes your application's [cache](/docs/{{version}}/cache) to obtain locks. If necessary, you can clear these cache locks using the `schedule:clear-cache` Artisan command. This is typically only necessary if a task becomes stuck due to an unexpected server problem.\n\n<a name=\"running-tasks-on-one-server\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":286,"to":290}}}}],["3460",{"pageContent":"Running Tasks On One Server\n\n> **Warning**  \n> To utilize this feature, your application must be using the `database`, `memcached`, `dynamodb`, or `redis` cache driver as your application's default cache driver. In addition, all servers must be communicating with the same central cache server.\n\nIf your application's scheduler is running on multiple servers, you may limit a scheduled job to only execute on a single server. For instance, assume you have a scheduled task that generates a new report every Friday night. If the task scheduler is running on three worker servers, the scheduled task will run on all three servers and generate the report three times. Not good!\n\nTo indicate that the task should run on only one server, use the `onOneServer` method when defining the scheduled task. The first server to obtain the task will secure an atomic lock on the job to prevent other servers from running the same task at the same time:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":291,"to":298}}}}],["3461",{"pageContent":"$schedule->command('report:generate')\n                    ->fridays()\n                    ->at('17:00')\n                    ->onOneServer();\n\n<a name=\"naming-unique-jobs\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":300,"to":305}}}}],["3462",{"pageContent":"Naming Single Server Jobs\n\nSometimes you may need to schedule the same job to be dispatched with different parameters, while still instructing Laravel to run each permutation of the job on a single server. To accomplish this, you may assign each schedule definition a unique name via the `name` method:\n\n```php\n$schedule->job(new CheckUptime('https://laravel.com'))\n            ->name('check_uptime:laravel.com')\n            ->everyFiveMinutes()\n            ->onOneServer();\n\n$schedule->job(new CheckUptime('https://vapor.laravel.com'))\n            ->name('check_uptime:vapor.laravel.com')\n            ->everyFiveMinutes()\n            ->onOneServer();\n```\n\nSimilarly, scheduled closures must be assigned a name if they are intended to be run on one server:\n\n```php\n$schedule->call(fn () => User::resetApiRequestCount())\n    ->name('reset-api-request-count')\n    ->daily()\n    ->onOneServer();\n```\n\n\n<a name=\"background-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":306,"to":332}}}}],["3463",{"pageContent":"Background Tasks\n\nBy default, multiple tasks scheduled at the same time will execute sequentially based on the order they are defined in your `schedule` method. If you have long-running tasks, this may cause subsequent tasks to start much later than anticipated. If you would like to run tasks in the background so that they may all run simultaneously, you may use the `runInBackground` method:\n\n    $schedule->command('analytics:report')\n             ->daily()\n             ->runInBackground();\n\n> **Warning**  \n> The `runInBackground` method may only be used when scheduling tasks via the `command` and `exec` methods.\n\n<a name=\"maintenance-mode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":333,"to":344}}}}],["3464",{"pageContent":"Maintenance Mode\n\nYour application's scheduled tasks will not run when the application is in [maintenance mode](/docs/{{version}}/configuration#maintenance-mode), since we don't want your tasks to interfere with any unfinished maintenance you may be performing on your server. However, if you would like to force a task to run even in maintenance mode, you may call the `evenInMaintenanceMode` method when defining the task:\n\n    $schedule->command('emails:send')->evenInMaintenanceMode();\n\n<a name=\"running-the-scheduler\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":345,"to":351}}}}],["3465",{"pageContent":"Running The Scheduler\n\nNow that we have learned how to define scheduled tasks, let's discuss how to actually run them on our server. The `schedule:run` Artisan command will evaluate all of your scheduled tasks and determine if they need to run based on the server's current time.\n\nSo, when using Laravel's scheduler, we only need to add a single cron configuration entry to our server that runs the `schedule:run` command every minute. If you do not know how to add cron entries to your server, consider using a service such as [Laravel Forge](https://forge.laravel.com) which can manage the cron entries for you:\n\n```shell\n* * * * * cd /path-to-your-project && php artisan schedule:run >> /dev/null 2>&1\n```\n\n<a name=\"sub-minute-scheduled-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":352,"to":362}}}}],["3466",{"pageContent":"Sub-Minute Scheduled Tasks\n\nOn most operating systems, cron jobs are limited to running a maximum of once per minute. However, Laravel's scheduler allows you to schedule tasks to run at more frequent intervals, even as often as once per second:\n\n    $schedule->call(function () {\n        DB::table('recent_users')->delete();\n    })->everySecond();\n\nWhen sub-minute tasks are defined within your application, the `schedule:run` command will continue running until the end of the current minute instead of exiting immediately. This allows the command to invoke all required sub-minute tasks throughout the minute.\n\nSince sub-minute tasks that take longer than expected to run could delay the execution of later sub-minute tasks, it is recommend that all sub-minute tasks dispatch queued jobs or background commands to handle the actual task processing:\n\n    use App\\Jobs\\DeleteRecentUsers;\n\n    $schedule->job(new DeleteRecentUsers)->everyTenSeconds();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":363,"to":377}}}}],["3467",{"pageContent":"use App\\Jobs\\DeleteRecentUsers;\n\n    $schedule->job(new DeleteRecentUsers)->everyTenSeconds();\n\n    $schedule->command('users:delete')->everyTenSeconds()->runInBackground();\n\n<a name=\"interrupting-sub-minute-tasks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":377,"to":383}}}}],["3468",{"pageContent":"Interrupting Sub-Minute Tasks\n\nAs the `schedule:run` command runs for the entire minute of invocation when sub-minute tasks are defined, you may sometimes need to interrupt the command when deploying your application. Otherwise, an instance of the `schedule:run` command that is already running would continue using your application's previously deployed code until the current minute ends.\n\nTo interrupt in-progress `schedule:run` invocations, you may add the `schedule:interrupt` command to your application's deployment script. This command should be invoked after your application is finished deploying:\n\n```shell\nphp artisan schedule:interrupt\n```\n\n<a name=\"running-the-scheduler-locally\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":384,"to":394}}}}],["3469",{"pageContent":"Running The Scheduler Locally\n\nTypically, you would not add a scheduler cron entry to your local development machine. Instead, you may use the `schedule:work` Artisan command. This command will run in the foreground and invoke the scheduler every minute until you terminate the command:\n\n```shell\nphp artisan schedule:work\n```\n\n<a name=\"task-output\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":395,"to":403}}}}],["3470",{"pageContent":"Task Output\n\nThe Laravel scheduler provides several convenient methods for working with the output generated by scheduled tasks. First, using the `sendOutputTo` method, you may send the output to a file for later inspection:\n\n    $schedule->command('emails:send')\n             ->daily()\n             ->sendOutputTo($filePath);\n\nIf you would like to append the output to a given file, you may use the `appendOutputTo` method:\n\n    $schedule->command('emails:send')\n             ->daily()\n             ->appendOutputTo($filePath);\n\nUsing the `emailOutputTo` method, you may email the output to an email address of your choice. Before emailing the output of a task, you should configure Laravel's [email services](/docs/{{version}}/mail):\n\n    $schedule->command('report:generate')\n             ->daily()\n             ->sendOutputTo($filePath)\n             ->emailOutputTo('taylor@example.com');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":404,"to":423}}}}],["3471",{"pageContent":"$schedule->command('report:generate')\n             ->daily()\n             ->sendOutputTo($filePath)\n             ->emailOutputTo('taylor@example.com');\n\nIf you only want to email the output if the scheduled Artisan or system command terminates with a non-zero exit code, use the `emailOutputOnFailure` method:\n\n    $schedule->command('report:generate')\n             ->daily()\n             ->emailOutputOnFailure('taylor@example.com');\n\n> **Warning**  \n> The `emailOutputTo`, `emailOutputOnFailure`, `sendOutputTo`, and `appendOutputTo` methods are exclusive to the `command` and `exec` methods.\n\n<a name=\"task-hooks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":423,"to":437}}}}],["3472",{"pageContent":"Task Hooks\n\nUsing the `before` and `after` methods, you may specify code to be executed before and after the scheduled task is executed:\n\n    $schedule->command('emails:send')\n             ->daily()\n             ->before(function () {\n                 // The task is about to execute...\n             })\n             ->after(function () {\n                 // The task has executed...\n             });\n\nThe `onSuccess` and `onFailure` methods allow you to specify code to be executed if the scheduled task succeeds or fails. A failure indicates that the scheduled Artisan or system command terminated with a non-zero exit code:\n\n    $schedule->command('emails:send')\n             ->daily()\n             ->onSuccess(function () {\n                 // The task succeeded...\n             })\n             ->onFailure(function () {\n                 // The task failed...\n             });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":438,"to":460}}}}],["3473",{"pageContent":"If output is available from your command, you may access it in your `after`, `onSuccess` or `onFailure` hooks by type-hinting an `Illuminate\\Support\\Stringable` instance as the `$output` argument of your hook's closure definition:\n\n    use Illuminate\\Support\\Stringable;\n\n    $schedule->command('emails:send')\n             ->daily()\n             ->onSuccess(function (Stringable $output) {\n                 // The task succeeded...\n             })\n             ->onFailure(function (Stringable $output) {\n                 // The task failed...\n             });\n\n<a name=\"pinging-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":462,"to":475}}}}],["3474",{"pageContent":"Pinging URLs\n\nUsing the `pingBefore` and `thenPing` methods, the scheduler can automatically ping a given URL before or after a task is executed. This method is useful for notifying an external service, such as [Envoyer](https://envoyer.io), that your scheduled task is beginning or has finished execution:\n\n    $schedule->command('emails:send')\n             ->daily()\n             ->pingBefore($url)\n             ->thenPing($url);\n\nThe `pingBeforeIf` and `thenPingIf` methods may be used to ping a given URL only if a given condition is `true`:\n\n    $schedule->command('emails:send')\n             ->daily()\n             ->pingBeforeIf($condition, $url)\n             ->thenPingIf($condition, $url);\n\nThe `pingOnSuccess` and `pingOnFailure` methods may be used to ping a given URL only if the task succeeds or fails. A failure indicates that the scheduled Artisan or system command terminated with a non-zero exit code:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":476,"to":492}}}}],["3475",{"pageContent":"$schedule->command('emails:send')\n             ->daily()\n             ->pingOnSuccess($successUrl)\n             ->pingOnFailure($failureUrl);\n\nAll of the ping methods require the Guzzle HTTP library. Guzzle is typically installed in all new Laravel projects by default, but, you may manually install Guzzle into your project using the Composer package manager if it has been accidentally removed:\n\n```shell\ncomposer require guzzlehttp/guzzle","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":494,"to":502}}}}],["3476",{"pageContent":"<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":505,"to":505}}}}],["3477",{"pageContent":"Events\n\nIf needed, you may listen to [events](/docs/{{version}}/events) dispatched by the scheduler. Typically, event listener mappings will be defined within your application's `App\\Providers\\EventServiceProvider` class:\n\n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        'Illuminate\\Console\\Events\\ScheduledTaskStarting' => [\n            'App\\Listeners\\LogScheduledTaskStarting',\n        ],\n\n        'Illuminate\\Console\\Events\\ScheduledTaskFinished' => [\n            'App\\Listeners\\LogScheduledTaskFinished',\n        ],\n\n        'Illuminate\\Console\\Events\\ScheduledBackgroundTaskFinished' => [\n            'App\\Listeners\\LogScheduledBackgroundTaskFinished',\n        ],\n\n        'Illuminate\\Console\\Events\\ScheduledTaskSkipped' => [\n            'App\\Listeners\\LogScheduledTaskSkipped',\n        ],\n\n        'Illuminate\\Console\\Events\\ScheduledTaskFailed' => [\n            'App\\Listeners\\LogScheduledTaskFailed',\n        ],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scheduling.md","loc":{"lines":{"from":506,"to":535}}}}],["3478",{"pageContent":"# Laravel Scout","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":1,"to":1}}}}],["3479",{"pageContent":"- [Introduction](#introduction)\n- [Installation](#installation)\n    - [Driver Prerequisites](#driver-prerequisites)\n    - [Queueing](#queueing)\n- [Configuration](#configuration)\n    - [Configuring Model Indexes](#configuring-model-indexes)\n    - [Configuring Searchable Data](#configuring-searchable-data)\n    - [Configuring The Model ID](#configuring-the-model-id)\n    - [Configuring Search Engines Per Model](#configuring-search-engines-per-model)\n    - [Identifying Users](#identifying-users)\n- [Database / Collection Engines](#database-and-collection-engines)\n    - [Database Engine](#database-engine)\n    - [Collection Engine](#collection-engine)\n- [Indexing](#indexing)\n    - [Batch Import](#batch-import)\n    - [Adding Records](#adding-records)\n    - [Updating Records](#updating-records)\n    - [Removing Records](#removing-records)\n    - [Pausing Indexing](#pausing-indexing)\n    - [Conditionally Searchable Model Instances](#conditionally-searchable-model-instances)\n- [Searching](#searching)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":3,"to":23}}}}],["3480",{"pageContent":"- [Pausing Indexing](#pausing-indexing)\n    - [Conditionally Searchable Model Instances](#conditionally-searchable-model-instances)\n- [Searching](#searching)\n    - [Where Clauses](#where-clauses)\n    - [Pagination](#pagination)\n    - [Soft Deleting](#soft-deleting)\n    - [Customizing Engine Searches](#customizing-engine-searches)\n- [Custom Engines](#custom-engines)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":23,"to":30}}}}],["3481",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":32,"to":32}}}}],["3482",{"pageContent":"Introduction\n\n[Laravel Scout](https://github.com/laravel/scout) provides a simple, driver based solution for adding full-text search to your [Eloquent models](/docs/{{version}}/eloquent). Using model observers, Scout will automatically keep your search indexes in sync with your Eloquent records.\n\nCurrently, Scout ships with [Algolia](https://www.algolia.com/), [Meilisearch](https://www.meilisearch.com), and MySQL / PostgreSQL (`database`) drivers. In addition, Scout includes a \"collection\" driver that is designed for local development usage and does not require any external dependencies or third-party services. Furthermore, writing custom drivers is simple and you are free to extend Scout with your own search implementations.\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":33,"to":39}}}}],["3483",{"pageContent":"Installation\n\nFirst, install Scout via the Composer package manager:\n\n```shell\ncomposer require laravel/scout\n```\n\nAfter installing Scout, you should publish the Scout configuration file using the `vendor:publish` Artisan command. This command will publish the `scout.php` configuration file to your application's `config` directory:\n\n```shell\nphp artisan vendor:publish --provider=\"Laravel\\Scout\\ScoutServiceProvider\"\n```\n\nFinally, add the `Laravel\\Scout\\Searchable` trait to the model you would like to make searchable. This trait will register a model observer that will automatically keep the model in sync with your search driver:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Laravel\\Scout\\Searchable;\n\n    class Post extends Model\n    {\n        use Searchable;\n    }\n\n<a name=\"driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":40,"to":68}}}}],["3484",{"pageContent":"Driver Prerequisites\n\n<a name=\"algolia\"></a>\n#### Algolia\n\nWhen using the Algolia driver, you should configure your Algolia `id` and `secret` credentials in your `config/scout.php` configuration file. Once your credentials have been configured, you will also need to install the Algolia PHP SDK via the Composer package manager:\n\n```shell\ncomposer require algolia/algoliasearch-client-php\n```\n\n<a name=\"meilisearch\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":69,"to":80}}}}],["3485",{"pageContent":"Meilisearch\n\n[Meilisearch](https://www.meilisearch.com) is a blazingly fast and open source search engine. If you aren't sure how to install Meilisearch on your local machine, you may use [Laravel Sail](/docs/{{version}}/sail#meilisearch), Laravel's officially supported Docker development environment.\n\nWhen using the Meilisearch driver you will need to install the Meilisearch PHP SDK via the Composer package manager:\n\n```shell\ncomposer require meilisearch/meilisearch-php http-interop/http-factory-guzzle\n```\n\nThen, set the `SCOUT_DRIVER` environment variable as well as your Meilisearch `host` and `key` credentials within your application's `.env` file:\n\n```ini\nSCOUT_DRIVER=meilisearch\nMEILISEARCH_HOST=http://127.0.0.1:7700\nMEILISEARCH_KEY=masterKey","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":81,"to":96}}}}],["3486",{"pageContent":"For more information regarding Meilisearch, please consult the [Meilisearch documentation](https://docs.meilisearch.com/learn/getting_started/quick_start.html).\n\nIn addition, you should ensure that you install a version of `meilisearch/meilisearch-php` that is compatible with your Meilisearch binary version by reviewing [Meilisearch's documentation regarding binary compatibility](https://github.com/meilisearch/meilisearch-php#-compatibility-with-meilisearch).\n\n> **Warning**  \n> When upgrading Scout on an application that utilizes Meilisearch, you should always [review any additional breaking changes](https://github.com/meilisearch/Meilisearch/releases) to the Meilisearch service itself.\n\n<a name=\"queueing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":99,"to":106}}}}],["3487",{"pageContent":"Queueing\n\nWhile not strictly required to use Scout, you should strongly consider configuring a [queue driver](/docs/{{version}}/queues) before using the library. Running a queue worker will allow Scout to queue all operations that sync your model information to your search indexes, providing much better response times for your application's web interface.\n\nOnce you have configured a queue driver, set the value of the `queue` option in your `config/scout.php` configuration file to `true`:\n\n    'queue' => true,\n\nEven when the `queue` option is set to `false`, it's important to remember that some Scout drivers like Algolia and Meilisearch always index records asynchronously. Meaning, even though the index operation has completed within your Laravel application, the search engine itself may not reflect the new and updated records immediately.\n\nTo specify the connection and queue that your Scout jobs utilize, you may define the `queue` configuration option as an array:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":107,"to":117}}}}],["3488",{"pageContent":"To specify the connection and queue that your Scout jobs utilize, you may define the `queue` configuration option as an array:\n\n    'queue' => [\n        'connection' => 'redis',\n        'queue' => 'scout'\n    ],\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":117,"to":124}}}}],["3489",{"pageContent":"Configuration\n\n<a name=\"configuring-model-indexes\"></a>\n### Configuring Model Indexes\n\nEach Eloquent model is synced with a given search \"index\", which contains all of the searchable records for that model. In other words, you can think of each index like a MySQL table. By default, each model will be persisted to an index matching the model's typical \"table\" name. Typically, this is the plural form of the model name; however, you are free to customize the model's index by overriding the `searchableAs` method on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Laravel\\Scout\\Searchable;\n\n    class Post extends Model\n    {\n        use Searchable;\n\n        /**\n         * Get the name of the index associated with the model.\n         */\n        public function searchableAs(): string\n        {\n            return 'posts_index';\n        }\n    }\n\n<a name=\"configuring-searchable-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":125,"to":152}}}}],["3490",{"pageContent":"Configuring Searchable Data\n\nBy default, the entire `toArray` form of a given model will be persisted to its search index. If you would like to customize the data that is synchronized to the search index, you may override the `toSearchableArray` method on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Laravel\\Scout\\Searchable;\n\n    class Post extends Model\n    {\n        use Searchable;\n\n        /**\n         * Get the indexable data array for the model.\n         *\n         * @return array<string, mixed>\n         */\n        public function toSearchableArray(): array\n        {\n            $array = $this->toArray();\n\n            // Customize the data array...\n\n            return $array;\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":153,"to":181}}}}],["3491",{"pageContent":"// Customize the data array...\n\n            return $array;\n        }\n    }\n\nSome search engines such as Meilisearch will only perform filter operations (`>`, `<`, etc.) on data of the correct type. So, when using these search engines and customizing your searchable data, you should ensure that numeric values are cast to their correct type:\n\n    public function toSearchableArray()\n    {\n        return [\n            'id' => (int) $this->id,\n            'name' => $this->name,\n            'price' => (float) $this->price,\n        ];\n    }\n\n<a name=\"configuring-filterable-data-for-meilisearch\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":181,"to":198}}}}],["3492",{"pageContent":"Configuring Filterable Data & Index Settings (Meilisearch)\n\nUnlike Scout's other drivers, Meilisearch requires you to pre-define index search settings such as filterable attributes, sortable attributes, and [other supported settings fields](https://docs.meilisearch.com/reference/api/settings.html).\n\nFilterable attributes are any attributes you plan to filter on when invoking Scout's `where` method, while sortable attributes are any attributes you plan to sort by when invoking Scout's `orderBy` method. To define your index settings, adjust the `index-settings` portion of your `meilisearch` configuration entry in your application's `scout` configuration file:\n\n```php\nuse App\\Models\\User;\nuse App\\Models\\Flight;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":199,"to":207}}}}],["3493",{"pageContent":"```php\nuse App\\Models\\User;\nuse App\\Models\\Flight;\n\n'meilisearch' => [\n    'host' => env('MEILISEARCH_HOST', 'http://localhost:7700'),\n    'key' => env('MEILISEARCH_KEY', null),\n    'index-settings' => [\n        User::class => [\n            'filterableAttributes'=> ['id', 'name', 'email'],\n            'sortableAttributes' => ['created_at'],\n            // Other settings fields...\n        ],\n        Flight::class => [\n            'filterableAttributes'=> ['id', 'destination'],\n            'sortableAttributes' => ['updated_at'],\n        ],\n    ],\n],","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":207,"to":225}}}}],["3494",{"pageContent":"If the model underlying a given index is soft deletable and is included in the `index-settings` array, Scout will automatically include support for filtering on soft deleted models on that index. If you have no other filterable or sortable attributes to define for a soft deletable model index, you may simply add an empty entry to the `index-settings` array for that model:\n\n```php\n'index-settings' => [\n    Flight::class => []\n],\n```\n\nAfter configuring your application's index settings, you must invoke the `scout:sync-index-settings` Artisan command. This command will inform Meilisearch of your currently configured index settings. For convenience, you may wish to make this command part of your deployment process:\n\n```shell\nphp artisan scout:sync-index-settings\n```\n\n<a name=\"configuring-the-model-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":228,"to":242}}}}],["3495",{"pageContent":"Configuring The Model ID\n\nBy default, Scout will use the primary key of the model as the model's unique ID / key that is stored in the search index. If you need to customize this behavior, you may override the `getScoutKey` and the `getScoutKeyName` methods on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Laravel\\Scout\\Searchable;\n\n    class User extends Model\n    {\n        use Searchable;\n\n        /**\n         * Get the value used to index the model.\n         */\n        public function getScoutKey(): mixed\n        {\n            return $this->email;\n        }\n\n        /**\n         * Get the key name used to index the model.\n         */\n        public function getScoutKeyName(): mixed\n        {\n            return 'email';\n        }\n    }\n\n<a name=\"configuring-search-engines-per-model\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":243,"to":275}}}}],["3496",{"pageContent":"Configuring Search Engines Per Model\n\nWhen searching, Scout will typically use the default search engine specified in your application's `scout` configuration file. However, the search engine for a particular model can be changed by overriding the `searchableUsing` method on the model:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Database\\Eloquent\\Model;\n    use Laravel\\Scout\\Engines\\Engine;\n    use Laravel\\Scout\\EngineManager;\n    use Laravel\\Scout\\Searchable;\n\n    class User extends Model\n    {\n        use Searchable;\n\n        /**\n         * Get the engine used to index the model.\n         */\n        public function searchableUsing(): Engine\n        {\n            return app(EngineManager::class)->engine('meilisearch');\n        }\n    }\n\n<a name=\"identifying-users\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":276,"to":302}}}}],["3497",{"pageContent":"Identifying Users\n\nScout also allows you to auto identify users when using [Algolia](https://algolia.com). Associating the authenticated user with search operations may be helpful when viewing your search analytics within Algolia's dashboard. You can enable user identification by defining a `SCOUT_IDENTIFY` environment variable as `true` in your application's `.env` file:\n\n```ini\nSCOUT_IDENTIFY=true\n```\n\nEnabling this feature will also pass the request's IP address and your authenticated user's primary identifier to Algolia so this data is associated with any search request that is made by the user.\n\n<a name=\"database-and-collection-engines\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":303,"to":313}}}}],["3498",{"pageContent":"Database / Collection Engines\n\n<a name=\"database-engine\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":314,"to":316}}}}],["3499",{"pageContent":"Database Engine\n\n> **Warning**  \n> The database engine currently supports MySQL and PostgreSQL.\n\nIf your application interacts with small to medium sized databases or has a light workload, you may find it more convenient to get started with Scout's \"database\" engine. The database engine will use \"where like\" clauses and full text indexes when filtering results from your existing database to determine the applicable search results for your query.\n\nTo use the database engine, you may simply set the value of the `SCOUT_DRIVER` environment variable to `database`, or specify the `database` driver directly in your application's `scout` configuration file:\n\n```ini\nSCOUT_DRIVER=database","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":317,"to":327}}}}],["3500",{"pageContent":"Once you have specified the database engine as your preferred driver, you must [configure your searchable data](#configuring-searchable-data). Then, you may start [executing search queries](#searching) against your models. Search engine indexing, such as the indexing needed to seed Algolia or Meilisearch indexes, is unnecessary when using the database engine.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":330,"to":330}}}}],["3501",{"pageContent":"Customizing Database Searching Strategies\n\nBy default, the database engine will execute a \"where like\" query against every model attribute that you have [configured as searchable](#configuring-searchable-data). However, in some situations, this may result in poor performance. Therefore, the database engine's search strategy can be configured so that some specified columns utilize full text search queries or only use \"where like\" constraints to search the prefixes of strings (`example%`) instead of searching within the entire string (`%example%`).\n\nTo define this behavior, you may assign PHP attributes to your model's `toSearchableArray` method. Any columns that are not assigned additional search strategy behavior will continue to use the default \"where like\" strategy:\n\n```php\nuse Laravel\\Scout\\Attributes\\SearchUsingFullText;\nuse Laravel\\Scout\\Attributes\\SearchUsingPrefix;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":332,"to":340}}}}],["3502",{"pageContent":"```php\nuse Laravel\\Scout\\Attributes\\SearchUsingFullText;\nuse Laravel\\Scout\\Attributes\\SearchUsingPrefix;\n\n/**\n * Get the indexable data array for the model.\n *\n * @return array<string, mixed>\n */\n#[SearchUsingPrefix(['id', 'email'])]\n#[SearchUsingFullText(['bio'])]\npublic function toSearchableArray(): array\n{\n    return [\n        'id' => $this->id,\n        'name' => $this->name,\n        'email' => $this->email,\n        'bio' => $this->bio,\n    ];\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":340,"to":359}}}}],["3503",{"pageContent":"> **Warning**  \n> Before specifying that a column should use full text query constraints, ensure that the column has been assigned a [full text index](/docs/{{version}}/migrations#available-index-types).\n\n<a name=\"collection-engine\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":362,"to":365}}}}],["3504",{"pageContent":"Collection Engine\n\nWhile you are free to use the Algolia or Meilisearch search engines during local development, you may find it more convenient to get started with the \"collection\" engine. The collection engine will use \"where\" clauses and collection filtering on results from your existing database to determine the applicable search results for your query. When using this engine, it is not necessary to \"index\" your searchable models, as they will simply be retrieved from your local database.\n\nTo use the collection engine, you may simply set the value of the `SCOUT_DRIVER` environment variable to `collection`, or specify the `collection` driver directly in your application's `scout` configuration file:\n\n```ini\nSCOUT_DRIVER=collection","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":366,"to":373}}}}],["3505",{"pageContent":"Once you have specified the collection driver as your preferred driver, you may start [executing search queries](#searching) against your models. Search engine indexing, such as the indexing needed to seed Algolia or Meilisearch indexes, is unnecessary when using the collection engine.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":376,"to":376}}}}],["3506",{"pageContent":"Differences From Database Engine\n\nOn first glance, the \"database\" and \"collections\" engines are fairly similar. They both interact directly with your database to retrieve search results. However, the collection engine does not utilize full text indexes or `LIKE` clauses to find matching records. Instead, it pulls all possible records and uses Laravel's `Str::is` helper to determine if the search string exists within the model attribute values.\n\nThe collection engine is the most portable search engine as it works across all relational databases supported by Laravel (including SQLite and SQL Server); however, it is less efficient than Scout's database engine.\n\n<a name=\"indexing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":378,"to":384}}}}],["3507",{"pageContent":"Indexing\n\n<a name=\"batch-import\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":385,"to":387}}}}],["3508",{"pageContent":"Batch Import\n\nIf you are installing Scout into an existing project, you may already have database records you need to import into your indexes. Scout provides a `scout:import` Artisan command that you may use to import all of your existing records into your search indexes:\n\n```shell\nphp artisan scout:import \"App\\Models\\Post\"\n```\n\nThe `flush` command may be used to remove all of a model's records from your search indexes:\n\n```shell\nphp artisan scout:flush \"App\\Models\\Post\"\n```\n\n<a name=\"modifying-the-import-query\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":388,"to":402}}}}],["3509",{"pageContent":"Modifying The Import Query\n\nIf you would like to modify the query that is used to retrieve all of your models for batch importing, you may define a `makeAllSearchableUsing` method on your model. This is a great place to add any eager relationship loading that may be necessary before importing your models:\n\n    use Illuminate\\Database\\Eloquent\\Builder;\n\n    /**\n     * Modify the query used to retrieve models when making all of the models searchable.\n     */\n    protected function makeAllSearchableUsing(Builder $query): Builder\n    {\n        return $query->with('author');\n    }\n\n> **Warning**  \n> The `makeAllSearchableUsing` method may not be applicable when using a queue to batch import models. Relationships are [not restored](/docs/{{version}}/queues#handling-relationships) when model collections are processed by jobs.\n\n<a name=\"adding-records\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":403,"to":420}}}}],["3510",{"pageContent":"Adding Records\n\nOnce you have added the `Laravel\\Scout\\Searchable` trait to a model, all you need to do is `save` or `create` a model instance and it will automatically be added to your search index. If you have configured Scout to [use queues](#queueing) this operation will be performed in the background by your queue worker:\n\n    use App\\Models\\Order;\n\n    $order = new Order;\n\n    // ...\n\n    $order->save();\n\n<a name=\"adding-records-via-query\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":421,"to":433}}}}],["3511",{"pageContent":"Adding Records Via Query\n\nIf you would like to add a collection of models to your search index via an Eloquent query, you may chain the `searchable` method onto the Eloquent query. The `searchable` method will [chunk the results](/docs/{{version}}/eloquent#chunking-results) of the query and add the records to your search index. Again, if you have configured Scout to use queues, all of the chunks will be imported in the background by your queue workers:\n\n    use App\\Models\\Order;\n\n    Order::where('price', '>', 100)->searchable();\n\nYou may also call the `searchable` method on an Eloquent relationship instance:\n\n    $user->orders()->searchable();\n\nOr, if you already have a collection of Eloquent models in memory, you may call the `searchable` method on the collection instance to add the model instances to their corresponding index:\n\n    $orders->searchable();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":434,"to":448}}}}],["3512",{"pageContent":"$orders->searchable();\n\n> **Note**  \n> The `searchable` method can be considered an \"upsert\" operation. In other words, if the model record is already in your index, it will be updated. If it does not exist in the search index, it will be added to the index.\n\n<a name=\"updating-records\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":448,"to":453}}}}],["3513",{"pageContent":"Updating Records\n\nTo update a searchable model, you only need to update the model instance's properties and `save` the model to your database. Scout will automatically persist the changes to your search index:\n\n    use App\\Models\\Order;\n\n    $order = Order::find(1);\n\n    // Update the order...\n\n    $order->save();\n\nYou may also invoke the `searchable` method on an Eloquent query instance to update a collection of models. If the models do not exist in your search index, they will be created:\n\n    Order::where('price', '>', 100)->searchable();\n\nIf you would like to update the search index records for all of the models in a relationship, you may invoke the `searchable` on the relationship instance:\n\n    $user->orders()->searchable();\n\nOr, if you already have a collection of Eloquent models in memory, you may call the `searchable` method on the collection instance to update the model instances in their corresponding index:\n\n    $orders->searchable();\n\n<a name=\"modifying-records-before-importing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":454,"to":478}}}}],["3514",{"pageContent":"Modifying Records Before Importing\n\nSometimes you may need to prepare the collection of models before they are made searchable. For instance, you may want to eager load a relationship so that the relationship data can be efficiently added to your search index. To accomplish this, define a `makeSearchableUsing` method on the corresponding model:\n\n    use Illuminate\\Database\\Eloquent\\Collection;\n\n    /**\n     * Modify the collection of models being made searchable.\n     */\n    public function makeSearchableUsing(Collection $models): Collection\n    {\n        return $models->load('author');\n    }\n\n<a name=\"removing-records\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":479,"to":493}}}}],["3515",{"pageContent":"Removing Records\n\nTo remove a record from your index you may simply `delete` the model from the database. This may be done even if you are using [soft deleted](/docs/{{version}}/eloquent#soft-deleting) models:\n\n    use App\\Models\\Order;\n\n    $order = Order::find(1);\n\n    $order->delete();\n\nIf you do not want to retrieve the model before deleting the record, you may use the `unsearchable` method on an Eloquent query instance:\n\n    Order::where('price', '>', 100)->unsearchable();\n\nIf you would like to remove the search index records for all of the models in a relationship, you may invoke the `unsearchable` on the relationship instance:\n\n    $user->orders()->unsearchable();\n\nOr, if you already have a collection of Eloquent models in memory, you may call the `unsearchable` method on the collection instance to remove the model instances from their corresponding index:\n\n    $orders->unsearchable();\n\n<a name=\"pausing-indexing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":494,"to":516}}}}],["3516",{"pageContent":"Pausing Indexing\n\nSometimes you may need to perform a batch of Eloquent operations on a model without syncing the model data to your search index. You may do this using the `withoutSyncingToSearch` method. This method accepts a single closure which will be immediately executed. Any model operations that occur within the closure will not be synced to the model's index:\n\n    use App\\Models\\Order;\n\n    Order::withoutSyncingToSearch(function () {\n        // Perform model actions...\n    });\n\n<a name=\"conditionally-searchable-model-instances\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":517,"to":527}}}}],["3517",{"pageContent":"Conditionally Searchable Model Instances\n\nSometimes you may need to only make a model searchable under certain conditions. For example, imagine you have `App\\Models\\Post` model that may be in one of two states: \"draft\" and \"published\". You may only want to allow \"published\" posts to be searchable. To accomplish this, you may define a `shouldBeSearchable` method on your model:\n\n    /**\n     * Determine if the model should be searchable.\n     */\n    public function shouldBeSearchable(): bool\n    {\n        return $this->isPublished();\n    }\n\nThe `shouldBeSearchable` method is only applied when manipulating models through the `save` and `create` methods, queries, or relationships. Directly making models or collections searchable using the `searchable` method will override the result of the `shouldBeSearchable` method.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":528,"to":540}}}}],["3518",{"pageContent":"> **Warning**  \n> The `shouldBeSearchable` method is not applicable when using Scout's \"database\" engine, as all searchable data is always stored in the database. To achieve similar behavior when using the database engine, you should use [where clauses](#where-clauses) instead.\n\n<a name=\"searching\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":542,"to":545}}}}],["3519",{"pageContent":"Searching\n\nYou may begin searching a model using the `search` method. The search method accepts a single string that will be used to search your models. You should then chain the `get` method onto the search query to retrieve the Eloquent models that match the given search query:\n\n    use App\\Models\\Order;\n\n    $orders = Order::search('Star Trek')->get();\n\nSince Scout searches return a collection of Eloquent models, you may even return the results directly from a route or controller and they will automatically be converted to JSON:\n\n    use App\\Models\\Order;\n    use Illuminate\\Http\\Request;\n\n    Route::get('/search', function (Request $request) {\n        return Order::search($request->search)->get();\n    });\n\nIf you would like to get the raw search results before they are converted to Eloquent models, you may use the `raw` method:\n\n    $orders = Order::search('Star Trek')->raw();\n\n<a name=\"custom-indexes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":546,"to":567}}}}],["3520",{"pageContent":"Custom Indexes\n\nSearch queries will typically be performed on the index specified by the model's [`searchableAs`](#configuring-model-indexes) method. However, you may use the `within` method to specify a custom index that should be searched instead:\n\n    $orders = Order::search('Star Trek')\n        ->within('tv_shows_popularity_desc')\n        ->get();\n\n<a name=\"where-clauses\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":568,"to":576}}}}],["3521",{"pageContent":"Where Clauses\n\nScout allows you to add simple \"where\" clauses to your search queries. Currently, these clauses only support basic numeric equality checks and are primarily useful for scoping search queries by an owner ID:\n\n    use App\\Models\\Order;\n\n    $orders = Order::search('Star Trek')->where('user_id', 1)->get();\n\nIn addition, the `whereIn` method may be used to verify that a given column's value is contained within the given array:\n\n    $orders = Order::search('Star Trek')->whereIn(\n        'status', ['open', 'paid']\n    )->get();\n\nThe `whereNotIn` method verifies that the given column's value is not contained in the given array:\n\n    $orders = Order::search('Star Trek')->whereNotIn(\n        'status', ['closed']\n    )->get();\n\nSince a search index is not a relational database, more advanced \"where\" clauses are not currently supported.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":577,"to":597}}}}],["3522",{"pageContent":"Since a search index is not a relational database, more advanced \"where\" clauses are not currently supported.\n\n> **Warning**\n> If your application is using Meilisearch, you must configure your application's [filterable attributes](#configuring-filterable-data-for-meilisearch) before utilizing Scout's \"where\" clauses.\n\n<a name=\"pagination\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":597,"to":602}}}}],["3523",{"pageContent":"Pagination\n\nIn addition to retrieving a collection of models, you may paginate your search results using the `paginate` method. This method will return an `Illuminate\\Pagination\\LengthAwarePaginator` instance just as if you had [paginated a traditional Eloquent query](/docs/{{version}}/pagination):\n\n    use App\\Models\\Order;\n\n    $orders = Order::search('Star Trek')->paginate();\n\nYou may specify how many models to retrieve per page by passing the amount as the first argument to the `paginate` method:\n\n    $orders = Order::search('Star Trek')->paginate(15);\n\nOnce you have retrieved the results, you may display the results and render the page links using [Blade](/docs/{{version}}/blade) just as if you had paginated a traditional Eloquent query:\n\n```html\n<div class=\"container\">\n    @foreach ($orders as $order)\n        {{ $order->price }}\n    @endforeach\n</div>\n\n{{ $orders->links() }}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":603,"to":624}}}}],["3524",{"pageContent":"Of course, if you would like to retrieve the pagination results as JSON, you may return the paginator instance directly from a route or controller:\n\n    use App\\Models\\Order;\n    use Illuminate\\Http\\Request;\n\n    Route::get('/orders', function (Request $request) {\n        return Order::search($request->input('query'))->paginate(15);\n    });\n\n> **Warning**  \n> Since search engines are not aware of your Eloquent model's global scope definitions, you should not utilize global scopes in applications that utilize Scout pagination. Or, you should recreate the global scope's constraints when searching via Scout.\n\n<a name=\"soft-deleting\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":627,"to":639}}}}],["3525",{"pageContent":"Soft Deleting\n\nIf your indexed models are [soft deleting](/docs/{{version}}/eloquent#soft-deleting) and you need to search your soft deleted models, set the `soft_delete` option of the `config/scout.php` configuration file to `true`:\n\n    'soft_delete' => true,\n\nWhen this configuration option is `true`, Scout will not remove soft deleted models from the search index. Instead, it will set a hidden `__soft_deleted` attribute on the indexed record. Then, you may use the `withTrashed` or `onlyTrashed` methods to retrieve the soft deleted records when searching:\n\n    use App\\Models\\Order;\n\n    // Include trashed records when retrieving results...\n    $orders = Order::search('Star Trek')->withTrashed()->get();\n\n    // Only include trashed records when retrieving results...\n    $orders = Order::search('Star Trek')->onlyTrashed()->get();\n\n> **Note**  \n> When a soft deleted model is permanently deleted using `forceDelete`, Scout will remove it from the search index automatically.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":640,"to":657}}}}],["3526",{"pageContent":"> **Note**  \n> When a soft deleted model is permanently deleted using `forceDelete`, Scout will remove it from the search index automatically.\n\n<a name=\"customizing-engine-searches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":657,"to":660}}}}],["3527",{"pageContent":"Customizing Engine Searches\n\nIf you need to perform advanced customization of the search behavior of an engine you may pass a closure as the second argument to the `search` method. For example, you could use this callback to add geo-location data to your search options before the search query is passed to Algolia:\n\n    use Algolia\\AlgoliaSearch\\SearchIndex;\n    use App\\Models\\Order;\n\n    Order::search(\n        'Star Trek',\n        function (SearchIndex $algolia, string $query, array $options) {\n            $options['body']['query']['bool']['filter']['geo_distance'] = [\n                'distance' => '1000km',\n                'location' => ['lat' => 36, 'lon' => 111],\n            ];\n\n            return $algolia->search($query, $options);\n        }\n    )->get();\n\n<a name=\"customizing-the-eloquent-results-query\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":661,"to":680}}}}],["3528",{"pageContent":"Customizing The Eloquent Results Query\n\nAfter Scout retrieves a list of matching Eloquent models from your application's search engine, Eloquent is used to retrieve all of the matching models by their primary keys. You may customize this query by invoking the `query` method. The `query` method accepts a closure that will receive the Eloquent query builder instance as an argument:\n\n```php\nuse App\\Models\\Order;\nuse Illuminate\\Database\\Eloquent\\Builder;\n\n$orders = Order::search('Star Trek')\n    ->query(fn (Builder $query) => $query->with('invoices'))\n    ->get();\n```\n\nSince this callback is invoked after the relevant models have already been retrieved from your application's search engine, the `query` method should not be used for \"filtering\" results. Instead, you should use [Scout where clauses](#where-clauses).\n\n<a name=\"custom-engines\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":681,"to":696}}}}],["3529",{"pageContent":"Custom Engines\n\n<a name=\"writing-the-engine\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":697,"to":699}}}}],["3530",{"pageContent":"Writing The Engine\n\nIf one of the built-in Scout search engines doesn't fit your needs, you may write your own custom engine and register it with Scout. Your engine should extend the `Laravel\\Scout\\Engines\\Engine` abstract class. This abstract class contains eight methods your custom engine must implement:\n\n    use Laravel\\Scout\\Builder;\n\n    abstract public function update($models);\n    abstract public function delete($models);\n    abstract public function search(Builder $builder);\n    abstract public function paginate(Builder $builder, $perPage, $page);\n    abstract public function mapIds($results);\n    abstract public function map(Builder $builder, $results, $model);\n    abstract public function getTotalCount($results);\n    abstract public function flush($model);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":700,"to":713}}}}],["3531",{"pageContent":"You may find it helpful to review the implementations of these methods on the `Laravel\\Scout\\Engines\\AlgoliaEngine` class. This class will provide you with a good starting point for learning how to implement each of these methods in your own engine.\n\n<a name=\"registering-the-engine\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":715,"to":717}}}}],["3532",{"pageContent":"Registering The Engine\n\nOnce you have written your custom engine, you may register it with Scout using the `extend` method of the Scout engine manager. Scout's engine manager may be resolved from the Laravel service container. You should call the `extend` method from the `boot` method of your `App\\Providers\\AppServiceProvider` class or any other service provider used by your application:\n\n    use App\\ScoutExtensions\\MySqlSearchEngine;\n    use Laravel\\Scout\\EngineManager;\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        resolve(EngineManager::class)->extend('mysql', function () {\n            return new MySqlSearchEngine;\n        });\n    }\n\nOnce your engine has been registered, you may specify it as your default Scout `driver` in your application's `config/scout.php` configuration file:\n\n    'driver' => 'mysql',","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/scout.md","loc":{"lines":{"from":718,"to":737}}}}],["3533",{"pageContent":"# Database: Seeding\n\n- [Introduction](#introduction)\n- [Writing Seeders](#writing-seeders)\n    - [Using Model Factories](#using-model-factories)\n    - [Calling Additional Seeders](#calling-additional-seeders)\n    - [Muting Model Events](#muting-model-events)\n- [Running Seeders](#running-seeders)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nLaravel includes the ability to seed your database with data using seed classes. All seed classes are stored in the `database/seeders` directory. By default, a `DatabaseSeeder` class is defined for you. From this class, you may use the `call` method to run other seed classes, allowing you to control the seeding order.\n\n> **Note**  \n> [Mass assignment protection](/docs/{{version}}/eloquent#mass-assignment) is automatically disabled during database seeding.\n\n<a name=\"writing-seeders\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":1,"to":18}}}}],["3534",{"pageContent":"Writing Seeders\n\nTo generate a seeder, execute the `make:seeder` [Artisan command](/docs/{{version}}/artisan). All seeders generated by the framework will be placed in the `database/seeders` directory:\n\n```shell\nphp artisan make:seeder UserSeeder","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":19,"to":24}}}}],["3535",{"pageContent":"A seeder class only contains one method by default: `run`. This method is called when the `db:seed` [Artisan command](/docs/{{version}}/artisan) is executed. Within the `run` method, you may insert data into your database however you wish. You may use the [query builder](/docs/{{version}}/queries) to manually insert data or you may use [Eloquent model factories](/docs/{{version}}/eloquent-factories).\n\nAs an example, let's modify the default `DatabaseSeeder` class and add a database insert statement to the `run` method:\n\n    <?php\n\n    namespace Database\\Seeders;\n\n    use Illuminate\\Database\\Seeder;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\Support\\Facades\\Hash;\n    use Illuminate\\Support\\Str;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":27,"to":38}}}}],["3536",{"pageContent":"<?php\n\n    namespace Database\\Seeders;\n\n    use Illuminate\\Database\\Seeder;\n    use Illuminate\\Support\\Facades\\DB;\n    use Illuminate\\Support\\Facades\\Hash;\n    use Illuminate\\Support\\Str;\n\n    class DatabaseSeeder extends Seeder\n    {\n        /**\n         * Run the database seeders.\n         */\n        public function run(): void\n        {\n            DB::table('users')->insert([\n                'name' => Str::random(10),\n                'email' => Str::random(10).'@gmail.com',\n                'password' => Hash::make('password'),\n            ]);\n        }\n    }\n\n> **Note**  \n> You may type-hint any dependencies you need within the `run` method's signature. They will automatically be resolved via the Laravel [service container](/docs/{{version}}/container).\n\n<a name=\"using-model-factories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":38,"to":65}}}}],["3537",{"pageContent":"Using Model Factories\n\nOf course, manually specifying the attributes for each model seed is cumbersome. Instead, you can use [model factories](/docs/{{version}}/eloquent-factories) to conveniently generate large amounts of database records. First, review the [model factory documentation](/docs/{{version}}/eloquent-factories) to learn how to define your factories.\n\nFor example, let's create 50 users that each has one related post:\n\n    use App\\Models\\User;\n\n    /**\n     * Run the database seeders.\n     */\n    public function run(): void\n    {\n        User::factory()\n                ->count(50)\n                ->hasPosts(1)\n                ->create();\n    }\n\n<a name=\"calling-additional-seeders\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":66,"to":85}}}}],["3538",{"pageContent":"Calling Additional Seeders\n\nWithin the `DatabaseSeeder` class, you may use the `call` method to execute additional seed classes. Using the `call` method allows you to break up your database seeding into multiple files so that no single seeder class becomes too large. The `call` method accepts an array of seeder classes that should be executed:\n\n    /**\n     * Run the database seeders.\n     */\n    public function run(): void\n    {\n        $this->call([\n            UserSeeder::class,\n            PostSeeder::class,\n            CommentSeeder::class,\n        ]);\n    }\n\n<a name=\"muting-model-events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":86,"to":102}}}}],["3539",{"pageContent":"Muting Model Events\n\nWhile running seeds, you may want to prevent models from dispatching events. You may achieve this using the `WithoutModelEvents` trait. When used, the `WithoutModelEvents` trait ensures no model events are dispatched, even if additional seed classes are executed via the `call` method:\n\n    <?php\n\n    namespace Database\\Seeders;\n\n    use Illuminate\\Database\\Seeder;\n    use Illuminate\\Database\\Console\\Seeds\\WithoutModelEvents;\n\n    class DatabaseSeeder extends Seeder\n    {\n        use WithoutModelEvents;\n\n        /**\n         * Run the database seeders.\n         */\n        public function run(): void\n        {\n            $this->call([\n                UserSeeder::class,\n            ]);\n        }\n    }\n\n<a name=\"running-seeders\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":103,"to":129}}}}],["3540",{"pageContent":"Running Seeders\n\nYou may execute the `db:seed` Artisan command to seed your database. By default, the `db:seed` command runs the `Database\\Seeders\\DatabaseSeeder` class, which may in turn invoke other seed classes. However, you may use the `--class` option to specify a specific seeder class to run individually:\n\n```shell\nphp artisan db:seed\n\nphp artisan db:seed --class=UserSeeder\n```\n\nYou may also seed your database using the `migrate:fresh` command in combination with the `--seed` option, which will drop all tables and re-run all of your migrations. This command is useful for completely re-building your database. The `--seeder` option may be used to specify a specific seeder to run:\n\n```shell\nphp artisan migrate:fresh --seed\n\nphp artisan migrate:fresh --seed --seeder=UserSeeder \n```\n\n<a name=\"forcing-seeding-production\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":130,"to":148}}}}],["3541",{"pageContent":"Forcing Seeders To Run In Production\n\nSome seeding operations may cause you to alter or lose data. In order to protect you from running seeding commands against your production database, you will be prompted for confirmation before the seeders are executed in the `production` environment. To force the seeders to run without a prompt, use the `--force` flag:\n\n```shell\nphp artisan db:seed --force\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/seeding.md","loc":{"lines":{"from":149,"to":155}}}}],["3542",{"pageContent":"# HTTP Session\n\n- [Introduction](#introduction)\n    - [Configuration](#configuration)\n    - [Driver Prerequisites](#driver-prerequisites)\n- [Interacting With The Session](#interacting-with-the-session)\n    - [Retrieving Data](#retrieving-data)\n    - [Storing Data](#storing-data)\n    - [Flash Data](#flash-data)\n    - [Deleting Data](#deleting-data)\n    - [Regenerating The Session ID](#regenerating-the-session-id)\n- [Session Blocking](#session-blocking)\n- [Adding Custom Session Drivers](#adding-custom-session-drivers)\n    - [Implementing The Driver](#implementing-the-driver)\n    - [Registering The Driver](#registering-the-driver)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":1,"to":17}}}}],["3543",{"pageContent":"Introduction\n\nSince HTTP driven applications are stateless, sessions provide a way to store information about the user across multiple requests. That user information is typically placed in a persistent store / backend that can be accessed from subsequent requests.\n\nLaravel ships with a variety of session backends that are accessed through an expressive, unified API. Support for popular backends such as [Memcached](https://memcached.org), [Redis](https://redis.io), and databases is included.\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":18,"to":24}}}}],["3544",{"pageContent":"Configuration\n\nYour application's session configuration file is stored at `config/session.php`. Be sure to review the options available to you in this file. By default, Laravel is configured to use the `file` session driver, which will work well for many applications. If your application will be load balanced across multiple web servers, you should choose a centralized store that all servers can access, such as Redis or a database.\n\nThe session `driver` configuration option defines where session data will be stored for each request. Laravel ships with several great drivers out of the box:\n\n<div class=\"content-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":25,"to":31}}}}],["3545",{"pageContent":"The session `driver` configuration option defines where session data will be stored for each request. Laravel ships with several great drivers out of the box:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- `file` - sessions are stored in `storage/framework/sessions`.\n- `cookie` - sessions are stored in secure, encrypted cookies.\n- `database` - sessions are stored in a relational database.\n- `memcached` / `redis` - sessions are stored in one of these fast, cache based stores.\n- `dynamodb` - sessions are stored in AWS DynamoDB.\n- `array` - sessions are stored in a PHP array and will not be persisted.\n\n</div>\n\n> **Note**  \n> The array driver is primarily used during [testing](/docs/{{version}}/testing) and prevents the data stored in the session from being persisted.\n\n<a name=\"driver-prerequisites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":31,"to":47}}}}],["3546",{"pageContent":"Driver Prerequisites\n\n<a name=\"database\"></a>\n#### Database\n\nWhen using the `database` session driver, you will need to create a table to contain the session records. An example `Schema` declaration for the table may be found below:\n\n    use Illuminate\\Database\\Schema\\Blueprint;\n    use Illuminate\\Support\\Facades\\Schema;\n\n    Schema::create('sessions', function (Blueprint $table) {\n        $table->string('id')->primary();\n        $table->foreignId('user_id')->nullable()->index();\n        $table->string('ip_address', 45)->nullable();\n        $table->text('user_agent')->nullable();\n        $table->text('payload');\n        $table->integer('last_activity')->index();\n    });\n\nYou may use the `session:table` Artisan command to generate this migration. To learn more about database migrations, you may consult the complete [migration documentation](/docs/{{version}}/migrations):\n\n```shell\nphp artisan session:table\n\nphp artisan migrate\n```\n\n<a name=\"redis\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":48,"to":75}}}}],["3547",{"pageContent":"Redis\n\nBefore using Redis sessions with Laravel, you will need to either install the PhpRedis PHP extension via PECL or install the `predis/predis` package (~1.0) via Composer. For more information on configuring Redis, consult Laravel's [Redis documentation](/docs/{{version}}/redis#configuration).\n\n> **Note**  \n> In the `session` configuration file, the `connection` option may be used to specify which Redis connection is used by the session.\n\n<a name=\"interacting-with-the-session\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":76,"to":83}}}}],["3548",{"pageContent":"Interacting With The Session\n\n<a name=\"retrieving-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":84,"to":86}}}}],["3549",{"pageContent":"Retrieving Data\n\nThere are two primary ways of working with session data in Laravel: the global `session` helper and via a `Request` instance. First, let's look at accessing the session via a `Request` instance, which can be type-hinted on a route closure or controller method. Remember, controller method dependencies are automatically injected via the Laravel [service container](/docs/{{version}}/container):\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\Request;\n    use Illuminate\\View\\View;\n\n    class UserController extends Controller\n    {\n        /**\n         * Show the profile for the given user.\n         */\n        public function show(Request $request, string $id): View\n        {\n            $value = $request->session()->get('key');\n\n            // ...\n\n            $user = $this->users->find($id);\n\n            return view('user.profile', ['user' => $user]);\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":87,"to":113}}}}],["3550",{"pageContent":"// ...\n\n            $user = $this->users->find($id);\n\n            return view('user.profile', ['user' => $user]);\n        }\n    }\n\nWhen you retrieve an item from the session, you may also pass a default value as the second argument to the `get` method. This default value will be returned if the specified key does not exist in the session. If you pass a closure as the default value to the `get` method and the requested key does not exist, the closure will be executed and its result returned:\n\n    $value = $request->session()->get('key', 'default');\n\n    $value = $request->session()->get('key', function () {\n        return 'default';\n    });\n\n<a name=\"the-global-session-helper\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":113,"to":129}}}}],["3551",{"pageContent":"The Global Session Helper\n\nYou may also use the global `session` PHP function to retrieve and store data in the session. When the `session` helper is called with a single, string argument, it will return the value of that session key. When the helper is called with an array of key / value pairs, those values will be stored in the session:\n\n    Route::get('/home', function () {\n        // Retrieve a piece of data from the session...\n        $value = session('key');\n\n        // Specifying a default value...\n        $value = session('key', 'default');\n\n        // Store a piece of data in the session...\n        session(['key' => 'value']);\n    });\n\n> **Note**  \n> There is little practical difference between using the session via an HTTP request instance versus using the global `session` helper. Both methods are [testable](/docs/{{version}}/testing) via the `assertSessionHas` method which is available in all of your test cases.\n\n<a name=\"retrieving-all-session-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":130,"to":148}}}}],["3552",{"pageContent":"Retrieving All Session Data\n\nIf you would like to retrieve all the data in the session, you may use the `all` method:\n\n    $data = $request->session()->all();\n\n<a name=\"determining-if-an-item-exists-in-the-session\"></a>\n#### Determining If An Item Exists In The Session\n\nTo determine if an item is present in the session, you may use the `has` method. The `has` method returns `true` if the item is present and is not `null`:\n\n    if ($request->session()->has('users')) {\n        // ...\n    }\n\nTo determine if an item is present in the session, even if its value is `null`, you may use the `exists` method:\n\n    if ($request->session()->exists('users')) {\n        // ...\n    }\n\nTo determine if an item is not present in the session, you may use the `missing` method. The `missing` method returns `true` if the item is not present:\n\n    if ($request->session()->missing('users')) {\n        // ...\n    }\n\n<a name=\"storing-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":149,"to":176}}}}],["3553",{"pageContent":"Storing Data\n\nTo store data in the session, you will typically use the request instance's `put` method or the global `session` helper:\n\n    // Via a request instance...\n    $request->session()->put('key', 'value');\n\n    // Via the global \"session\" helper...\n    session(['key' => 'value']);\n\n<a name=\"pushing-to-array-session-values\"></a>\n#### Pushing To Array Session Values\n\nThe `push` method may be used to push a new value onto a session value that is an array. For example, if the `user.teams` key contains an array of team names, you may push a new value onto the array like so:\n\n    $request->session()->push('user.teams', 'developers');\n\n<a name=\"retrieving-deleting-an-item\"></a>\n#### Retrieving & Deleting An Item\n\nThe `pull` method will retrieve and delete an item from the session in a single statement:\n\n    $value = $request->session()->pull('key', 'default');\n\n<a name=\"#incrementing-and-decrementing-session-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":177,"to":201}}}}],["3554",{"pageContent":"Incrementing & Decrementing Session Values\n\nIf your session data contains an integer you wish to increment or decrement, you may use the `increment` and `decrement` methods:\n\n    $request->session()->increment('count');\n\n    $request->session()->increment('count', $incrementBy = 2);\n\n    $request->session()->decrement('count');\n\n    $request->session()->decrement('count', $decrementBy = 2);\n\n<a name=\"flash-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":202,"to":214}}}}],["3555",{"pageContent":"Flash Data\n\nSometimes you may wish to store items in the session for the next request. You may do so using the `flash` method. Data stored in the session using this method will be available immediately and during the subsequent HTTP request. After the subsequent HTTP request, the flashed data will be deleted. Flash data is primarily useful for short-lived status messages:\n\n    $request->session()->flash('status', 'Task was successful!');\n\nIf you need to persist your flash data for several requests, you may use the `reflash` method, which will keep all of the flash data for an additional request. If you only need to keep specific flash data, you may use the `keep` method:\n\n    $request->session()->reflash();\n\n    $request->session()->keep(['username', 'email']);\n\nTo persist your flash data only for the current request, you may use the `now` method:\n\n    $request->session()->now('status', 'Task was successful!');\n\n<a name=\"deleting-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":215,"to":231}}}}],["3556",{"pageContent":"Deleting Data\n\nThe `forget` method will remove a piece of data from the session. If you would like to remove all data from the session, you may use the `flush` method:\n\n    // Forget a single key...\n    $request->session()->forget('name');\n\n    // Forget multiple keys...\n    $request->session()->forget(['name', 'status']);\n\n    $request->session()->flush();\n\n<a name=\"regenerating-the-session-id\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":232,"to":244}}}}],["3557",{"pageContent":"Regenerating The Session ID\n\nRegenerating the session ID is often done in order to prevent malicious users from exploiting a [session fixation](https://owasp.org/www-community/attacks/Session_fixation) attack on your application.\n\nLaravel automatically regenerates the session ID during authentication if you are using one of the Laravel [application starter kits](/docs/{{version}}/starter-kits) or [Laravel Fortify](/docs/{{version}}/fortify); however, if you need to manually regenerate the session ID, you may use the `regenerate` method:\n\n    $request->session()->regenerate();\n\nIf you need to regenerate the session ID and remove all data from the session in a single statement, you may use the `invalidate` method:\n\n    $request->session()->invalidate();\n\n<a name=\"session-blocking\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":245,"to":257}}}}],["3558",{"pageContent":"Session Blocking\n\n> **Warning**  \n> To utilize session blocking, your application must be using a cache driver that supports [atomic locks](/docs/{{version}}/cache#atomic-locks). Currently, those cache drivers include the `memcached`, `dynamodb`, `redis`, and `database` drivers. In addition, you may not use the `cookie` session driver.\n\nBy default, Laravel allows requests using the same session to execute concurrently. So, for example, if you use a JavaScript HTTP library to make two HTTP requests to your application, they will both execute at the same time. For many applications, this is not a problem; however, session data loss can occur in a small subset of applications that make concurrent requests to two different application endpoints which both write data to the session.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":258,"to":263}}}}],["3559",{"pageContent":"To mitigate this, Laravel provides functionality that allows you to limit concurrent requests for a given session. To get started, you may simply chain the `block` method onto your route definition. In this example, an incoming request to the `/profile` endpoint would acquire a session lock. While this lock is being held, any incoming requests to the `/profile` or `/order` endpoints which share the same session ID will wait for the first request to finish executing before continuing their execution:\n\n    Route::post('/profile', function () {\n        // ...\n    })->block($lockSeconds = 10, $waitSeconds = 10)\n\n    Route::post('/order', function () {\n        // ...\n    })->block($lockSeconds = 10, $waitSeconds = 10)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":265,"to":273}}}}],["3560",{"pageContent":"Route::post('/order', function () {\n        // ...\n    })->block($lockSeconds = 10, $waitSeconds = 10)\n\nThe `block` method accepts two optional arguments. The first argument accepted by the `block` method is the maximum number of seconds the session lock should be held for before it is released. Of course, if the request finishes executing before this time the lock will be released earlier.\n\nThe second argument accepted by the `block` method is the number of seconds a request should wait while attempting to obtain a session lock. An `Illuminate\\Contracts\\Cache\\LockTimeoutException` will be thrown if the request is unable to obtain a session lock within the given number of seconds.\n\nIf neither of these arguments is passed, the lock will be obtained for a maximum of 10 seconds and requests will wait a maximum of 10 seconds while attempting to obtain a lock:\n\n    Route::post('/profile', function () {\n        // ...\n    })->block()\n\n<a name=\"adding-custom-session-drivers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":273,"to":287}}}}],["3561",{"pageContent":"Adding Custom Session Drivers\n\n<a name=\"implementing-the-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":288,"to":290}}}}],["3562",{"pageContent":"Implementing The Driver\n\nIf none of the existing session drivers fit your application's needs, Laravel makes it possible to write your own session handler. Your custom session driver should implement PHP's built-in `SessionHandlerInterface`. This interface contains just a few simple methods. A stubbed MongoDB implementation looks like the following:\n\n    <?php\n\n    namespace App\\Extensions;\n\n    class MongoSessionHandler implements \\SessionHandlerInterface\n    {\n        public function open($savePath, $sessionName) {}\n        public function close() {}\n        public function read($sessionId) {}\n        public function write($sessionId, $data) {}\n        public function destroy($sessionId) {}\n        public function gc($lifetime) {}\n    }\n\n> **Note**  \n> Laravel does not ship with a directory to contain your extensions. You are free to place them anywhere you like. In this example, we have created an `Extensions` directory to house the `MongoSessionHandler`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":291,"to":310}}}}],["3563",{"pageContent":"Since the purpose of these methods is not readily understandable, let's quickly cover what each of the methods do:\n\n<div class=\"content-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":312,"to":314}}}}],["3564",{"pageContent":"- The `open` method would typically be used in file based session store systems. Since Laravel ships with a `file` session driver, you will rarely need to put anything in this method. You can simply leave this method empty.\n- The `close` method, like the `open` method, can also usually be disregarded. For most drivers, it is not needed.\n- The `read` method should return the string version of the session data associated with the given `$sessionId`. There is no need to do any serialization or other encoding when retrieving or storing session data in your driver, as Laravel will perform the serialization for you.\n- The `write` method should write the given `$data` string associated with the `$sessionId` to some persistent storage system, such as MongoDB or another storage system of your choice.  Again, you should not perform any serialization - Laravel will have already handled that for you.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":316,"to":319}}}}],["3565",{"pageContent":"- The `destroy` method should remove the data associated with the `$sessionId` from persistent storage.\n- The `gc` method should destroy all session data that is older than the given `$lifetime`, which is a UNIX timestamp. For self-expiring systems like Memcached and Redis, this method may be left empty.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":320,"to":321}}}}],["3566",{"pageContent":"</div>\n\n<a name=\"registering-the-driver\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":323,"to":325}}}}],["3567",{"pageContent":"Registering The Driver\n\nOnce your driver has been implemented, you are ready to register it with Laravel. To add additional drivers to Laravel's session backend, you may use the `extend` method provided by the `Session` [facade](/docs/{{version}}/facades). You should call the `extend` method from the `boot` method of a [service provider](/docs/{{version}}/providers). You may do this from the existing `App\\Providers\\AppServiceProvider` or create an entirely new provider:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use App\\Extensions\\MongoSessionHandler;\n    use Illuminate\\Contracts\\Foundation\\Application;\n    use Illuminate\\Support\\Facades\\Session;\n    use Illuminate\\Support\\ServiceProvider;\n\n    class SessionServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":326,"to":347}}}}],["3568",{"pageContent":"/**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            Session::extend('mongo', function (Application $app) {\n                // Return an implementation of SessionHandlerInterface...\n                return new MongoSessionHandler;\n            });\n        }\n    }\n\nOnce the session driver has been registered, you may use the `mongo` driver in your `config/session.php` configuration file.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/session.md","loc":{"lines":{"from":349,"to":361}}}}],["3569",{"pageContent":"# Laravel Socialite\n\n- [Introduction](#introduction)\n- [Installation](#installation)\n- [Upgrading Socialite](#upgrading-socialite)\n- [Configuration](#configuration)\n- [Authentication](#authentication)\n    - [Routing](#routing)\n    - [Authentication & Storage](#authentication-and-storage)\n    - [Access Scopes](#access-scopes)\n    - [Slack Bot Scopes](#slack-bot-scopes)\n    - [Optional Parameters](#optional-parameters)\n- [Retrieving User Details](#retrieving-user-details)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":1,"to":15}}}}],["3570",{"pageContent":"Introduction\n\nIn addition to typical, form based authentication, Laravel also provides a simple, convenient way to authenticate with OAuth providers using [Laravel Socialite](https://github.com/laravel/socialite). Socialite currently supports authentication via Facebook, Twitter, LinkedIn, Google, GitHub, GitLab, Bitbucket, and Slack.\n\n> **Note**  \n> Adapters for other platforms are available via the community driven [Socialite Providers](https://socialiteproviders.com/) website.\n\n<a name=\"installation\"></a>\n## Installation\n\nTo get started with Socialite, use the Composer package manager to add the package to your project's dependencies:\n\n```shell\ncomposer require laravel/socialite\n```\n\n<a name=\"upgrading-socialite\"></a>\n## Upgrading Socialite\n\nWhen upgrading to a new major version of Socialite, it's important that you carefully review [the upgrade guide](https://github.com/laravel/socialite/blob/master/UPGRADE.md).\n\n<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":16,"to":37}}}}],["3571",{"pageContent":"Configuration\n\nBefore using Socialite, you will need to add credentials for the OAuth providers your application utilizes. Typically, these credentials may be retrieved by creating a \"developer application\" within the dashboard of the service you will be authenticating with.\n\nThese credentials should be placed in your application's `config/services.php` configuration file, and should use the key `facebook`, `twitter` (OAuth 1.0), `twitter-oauth-2` (OAuth 2.0), `linkedin-openid`, `google`, `github`, `gitlab`, `bitbucket`, or `slack`, depending on the providers your application requires:\n\n    'github' => [\n        'client_id' => env('GITHUB_CLIENT_ID'),\n        'client_secret' => env('GITHUB_CLIENT_SECRET'),\n        'redirect' => 'http://example.com/callback-url',\n    ],\n\n> **Note**  \n> If the `redirect` option contains a relative path, it will automatically be resolved to a fully qualified URL.\n\n<a name=\"authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":38,"to":53}}}}],["3572",{"pageContent":"Authentication\n\n<a name=\"routing\"></a>\n### Routing\n\nTo authenticate users using an OAuth provider, you will need two routes: one for redirecting the user to the OAuth provider, and another for receiving the callback from the provider after authentication. The example routes below demonstrate the implementation of both routes:\n\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    Route::get('/auth/redirect', function () {\n        return Socialite::driver('github')->redirect();\n    });\n\n    Route::get('/auth/callback', function () {\n        $user = Socialite::driver('github')->user();\n\n        // $user->token\n    });\n\nThe `redirect` method provided by the `Socialite` facade takes care of redirecting the user to the OAuth provider, while the `user` method will examine the incoming request and retrieve the user's information from the provider after they have approved the authentication request.\n\n<a name=\"authentication-and-storage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":54,"to":75}}}}],["3573",{"pageContent":"Authentication & Storage\n\nOnce the user has been retrieved from the OAuth provider, you may determine if the user exists in your application's database and [authenticate the user](/docs/{{version}}/authentication#authenticate-a-user-instance). If the user does not exist in your application's database, you will typically create a new record in your database to represent the user:\n\n    use App\\Models\\User;\n    use Illuminate\\Support\\Facades\\Auth;\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    Route::get('/auth/callback', function () {\n        $githubUser = Socialite::driver('github')->user();\n\n        $user = User::updateOrCreate([\n            'github_id' => $githubUser->id,\n        ], [\n            'name' => $githubUser->name,\n            'email' => $githubUser->email,\n            'github_token' => $githubUser->token,\n            'github_refresh_token' => $githubUser->refreshToken,\n        ]);\n\n        Auth::login($user);\n\n        return redirect('/dashboard');\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":76,"to":99}}}}],["3574",{"pageContent":"Auth::login($user);\n\n        return redirect('/dashboard');\n    });\n\n> **Note**  \n> For more information regarding what user information is available from specific OAuth providers, please consult the documentation on [retrieving user details](#retrieving-user-details).\n\n<a name=\"access-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":99,"to":107}}}}],["3575",{"pageContent":"Access Scopes\n\nBefore redirecting the user, you may use the `scopes` method to specify the \"scopes\" that should be included in the authentication request. This method will merge all previously specified scopes with the scopes that you specify:\n\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    return Socialite::driver('github')\n        ->scopes(['read:user', 'public_repo'])\n        ->redirect();\n\nYou can overwrite all existing scopes on the authentication request using the `setScopes` method:\n\n    return Socialite::driver('github')\n        ->setScopes(['read:user', 'public_repo'])\n        ->redirect();\n\n<a name=\"slack-bot-scopes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":108,"to":124}}}}],["3576",{"pageContent":"Slack Bot Scopes\n\nSlack's API provides [different types of access tokens](https://api.slack.com/authentication/token-types), each with their own set of [permission scopes](https://api.slack.com/scopes). Socialite is compatible with both of the following Slack access tokens types:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- Bot (prefixed with `xoxb-`)\n- User (prefixed with `xoxp-`)\n\n</div>\n\nBy default, the `slack` driver will generate a `user` token and invoking the driver's `user` method will return the user's details.\n\nBot tokens are primarily useful if your application will be sending notifications to external Slack workspaces that are owned by your application's users. To generate a bot token, invoke the `asBotUser` method before redirecting the user to Slack for authentication:\n\n    return Socialite::driver('slack')\n        ->asBotUser()\n        ->setScopes(['chat:write', 'chat:write.public', 'chat:write.customize'])\n        ->redirect();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":125,"to":143}}}}],["3577",{"pageContent":"return Socialite::driver('slack')\n        ->asBotUser()\n        ->setScopes(['chat:write', 'chat:write.public', 'chat:write.customize'])\n        ->redirect();\n\nIn addition, you must invoke the `asBotUser` method before invoking the `user` method after Slack redirects the user back to your application after authentication:\n\n    $user = Socialite::driver('slack')->asBotUser()->user();\n\nWhen generating a bot token, the `user` method will still return a `Laravel\\Socialite\\Two\\User` instance; however, only the `token` property will be hydrated. This token may be stored in order to [send notifications to the authenticated user's Slack workspaces](/docs/{{version}}/notifications#notifying-external-slack-workspaces).\n\n<a name=\"optional-parameters\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":143,"to":154}}}}],["3578",{"pageContent":"Optional Parameters\n\nA number of OAuth providers support other optional parameters on the redirect request. To include any optional parameters in the request, call the `with` method with an associative array:\n\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    return Socialite::driver('google')\n        ->with(['hd' => 'example.com'])\n        ->redirect();\n\n> **Warning**  \n> When using the `with` method, be careful not to pass any reserved keywords such as `state` or `response_type`.\n\n<a name=\"retrieving-user-details\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":155,"to":168}}}}],["3579",{"pageContent":"Retrieving User Details\n\nAfter the user is redirected back to your application's authentication callback route, you may retrieve the user's details using Socialite's `user` method. The user object returned by the `user` method provides a variety of properties and methods you may use to store information about the user in your own database.\n\nDiffering properties and methods may be available on this object depending on whether the OAuth provider you are authenticating with supports OAuth 1.0 or OAuth 2.0:\n\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    Route::get('/auth/callback', function () {\n        $user = Socialite::driver('github')->user();\n\n        // OAuth 2.0 providers...\n        $token = $user->token;\n        $refreshToken = $user->refreshToken;\n        $expiresIn = $user->expiresIn;\n\n        // OAuth 1.0 providers...\n        $token = $user->token;\n        $tokenSecret = $user->tokenSecret;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":169,"to":187}}}}],["3580",{"pageContent":"// OAuth 1.0 providers...\n        $token = $user->token;\n        $tokenSecret = $user->tokenSecret;\n\n        // All providers...\n        $user->getId();\n        $user->getNickname();\n        $user->getName();\n        $user->getEmail();\n        $user->getAvatar();\n    });\n\n<a name=\"retrieving-user-details-from-a-token-oauth2\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":187,"to":199}}}}],["3581",{"pageContent":"Retrieving User Details From A Token (OAuth2)\n\nIf you already have a valid access token for a user, you can retrieve their user details using Socialite's `userFromToken` method:\n\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    $user = Socialite::driver('github')->userFromToken($token);\n\n<a name=\"retrieving-user-details-from-a-token-and-secret-oauth1\"></a>\n#### Retrieving User Details From A Token And Secret (OAuth1)\n\nIf you already have a valid token and secret for a user, you can retrieve their user details using Socialite's `userFromTokenAndSecret` method:\n\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    $user = Socialite::driver('twitter')->userFromTokenAndSecret($token, $secret);\n\n<a name=\"stateless-authentication\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":200,"to":217}}}}],["3582",{"pageContent":"Stateless Authentication\n\nThe `stateless` method may be used to disable session state verification. This is useful when adding social authentication to a stateless API that does not utilize cookie based sessions:\n\n    use Laravel\\Socialite\\Facades\\Socialite;\n\n    return Socialite::driver('google')->stateless()->user();\n\n> **Warning**  \n> Stateless authentication is not available for the Twitter OAuth 1.0 driver.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/socialite.md","loc":{"lines":{"from":218,"to":227}}}}],["3583",{"pageContent":"# Starter Kits\n\n- [Introduction](#introduction)\n- [Laravel Breeze](#laravel-breeze)\n    - [Installation](#laravel-breeze-installation)\n    - [Breeze & Blade](#breeze-and-blade)\n    - [Breeze & Livewire](#breeze-and-livewire)\n    - [Breeze & React / Vue](#breeze-and-inertia)\n    - [Breeze & Next.js / API](#breeze-and-next)\n- [Laravel Jetstream](#laravel-jetstream)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nTo give you a head start building your new Laravel application, we are happy to offer authentication and application starter kits. These kits automatically scaffold your application with the routes, controllers, and views you need to register and authenticate your application's users.\n\nWhile you are welcome to use these starter kits, they are not required. You are free to build your own application from the ground up by simply installing a fresh copy of Laravel. Either way, we know you will build something great!\n\n<a name=\"laravel-breeze\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":1,"to":19}}}}],["3584",{"pageContent":"Laravel Breeze\n\n[Laravel Breeze](https://github.com/laravel/breeze) is a minimal, simple implementation of all of Laravel's [authentication features](/docs/{{version}}/authentication), including login, registration, password reset, email verification, and password confirmation. In addition, Breeze includes a simple \"profile\" page where the user may update their name, email address, and password.\n\nLaravel Breeze's default view layer is made up of simple [Blade templates](/docs/{{version}}/blade) styled with [Tailwind CSS](https://tailwindcss.com). Additionally, Breeze provides scaffolding options based on [Livewire](https://livewire.laravel.com) or [Inertia](https://inertiajs.com), with the choice of using Vue or React for the Inertia-based scaffolding.\n\n<img src=\"https://laravel.com/img/docs/breeze-register.png\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":20,"to":26}}}}],["3585",{"pageContent":"Laravel Bootcamp\n\nIf you're new to Laravel, feel free to jump into the [Laravel Bootcamp](https://bootcamp.laravel.com). The Laravel Bootcamp will walk you through building your first Laravel application using Breeze. It's a great way to get a tour of everything that Laravel and Breeze have to offer.\n\n<a name=\"laravel-breeze-installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":28,"to":32}}}}],["3586",{"pageContent":"Installation\n\nFirst, you should [create a new Laravel application](/docs/{{version}}/installation), configure your database, and run your [database migrations](/docs/{{version}}/migrations). Once you have created a new Laravel application, you may install Laravel Breeze using Composer:\n\n```shell\ncomposer require laravel/breeze --dev\n```\n\nAfter Composer has installed the Laravel Breeze package, you may run the `breeze:install` Artisan command. This command publishes the authentication views, routes, controllers, and other resources to your application. Laravel Breeze publishes all of its code to your application so that you have full control and visibility over its features and implementation.\n\nThe `breeze:install` command will prompt you for your preferred frontend stack and testing framework:\n\n```shell\nphp artisan breeze:install\n\nphp artisan migrate\nnpm install\nnpm run dev\n```\n\n<a name=\"breeze-and-blade\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":33,"to":53}}}}],["3587",{"pageContent":"Breeze & Blade\n\nThe default Breeze \"stack\" is the Blade stack, which utilizes simple [Blade templates](/docs/{{version}}/blade) to render your application's frontend. The Blade stack may be installed by invoking the `breeze:install` command with no other additional arguments and selecting the Blade frontend stack. After Breeze's scaffolding is installed, you should also compile your application's frontend assets:\n\n```shell\nphp artisan breeze:install\n\nphp artisan migrate\nnpm install\nnpm run dev\n```\n\nNext, you may navigate to your application's `/login` or `/register` URLs in your web browser. All of Breeze's routes are defined within the `routes/auth.php` file.\n\n> **Note**\n> To learn more about compiling your application's CSS and JavaScript, check out Laravel's [Vite documentation](/docs/{{version}}/vite#running-vite).\n\n<a name=\"breeze-and-livewire\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":54,"to":71}}}}],["3588",{"pageContent":"Breeze & Livewire\n\nLaravel Breeze also offers [Livewire](https://livewire.laravel.com) scaffolding. Livewire is a powerful way of building dynamic, reactive, front-end UIs using just PHP.\n\nLivewire is a great fit for teams that primarily use Blade templates and are looking for a simpler alternative to JavaScript-driven SPA frameworks like Vue and React.\n\nTo use the Livewire stack, you may select the Livewire frontend stack when executing the `breeze:install` Artisan command. After Breeze's scaffolding is installed, you should run your database migrations:\n\n```shell\nphp artisan breeze:install\n\nphp artisan migrate\n```\n\n<a name=\"breeze-and-inertia\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":72,"to":86}}}}],["3589",{"pageContent":"Breeze & React / Vue\n\nLaravel Breeze also offers React and Vue scaffolding via an [Inertia](https://inertiajs.com) frontend implementation. Inertia allows you to build modern, single-page React and Vue applications using classic server-side routing and controllers.\n\nInertia lets you enjoy the frontend power of React and Vue combined with the incredible backend productivity of Laravel and lightning-fast [Vite](https://vitejs.dev) compilation. To use an Inertia stack, you may select the Vue or React frontend stacks when executing the `breeze:install` Artisan command.\n\nWhen selecting the Vue or React frontend stack, the Breeze installer will also prompt you to determine if you would like [Inertia SSR](https://inertiajs.com/server-side-rendering) or TypeScript support. After Breeze's scaffolding is installed, you should also compile your application's frontend assets:\n\n```shell\nphp artisan breeze:install\n\nphp artisan migrate\nnpm install\nnpm run dev","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":87,"to":100}}}}],["3590",{"pageContent":"Next, you may navigate to your application's `/login` or `/register` URLs in your web browser. All of Breeze's routes are defined within the `routes/auth.php` file.\n\n<a name=\"breeze-and-next\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":103,"to":105}}}}],["3591",{"pageContent":"Breeze & Next.js / API\n\nLaravel Breeze can also scaffold an authentication API that is ready to authenticate modern JavaScript applications such as those powered by [Next](https://nextjs.org), [Nuxt](https://nuxt.com), and others. To get started, select the API stack as your desired stack when executing the `breeze:install` Artisan command:\n\n```shell\nphp artisan breeze:install\n\nphp artisan migrate\n```\n\nDuring installation, Breeze will add a `FRONTEND_URL` environment variable to your application's `.env` file. This URL should be the URL of your JavaScript application. This will typically be `http://localhost:3000` during local development. In addition, you should ensure that your `APP_URL` is set to `http://localhost:8000`, which is the default URL used by the `serve` Artisan command.\n\n<a name=\"next-reference-implementation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":106,"to":118}}}}],["3592",{"pageContent":"Next.js Reference Implementation\n\nFinally, you are ready to pair this backend with the frontend of your choice. A Next reference implementation of the Breeze frontend is [available on GitHub](https://github.com/laravel/breeze-next). This frontend is maintained by Laravel and contains the same user interface as the traditional Blade and Inertia stacks provided by Breeze.\n\n<a name=\"laravel-jetstream\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":119,"to":123}}}}],["3593",{"pageContent":"Laravel Jetstream\n\nWhile Laravel Breeze provides a simple and minimal starting point for building a Laravel application, Jetstream augments that functionality with more robust features and additional frontend technology stacks. **For those brand new to Laravel, we recommend learning the ropes with Laravel Breeze before graduating to Laravel Jetstream.**\n\nJetstream provides a beautifully designed application scaffolding for Laravel and includes login, registration, email verification, two-factor authentication, session management, API support via Laravel Sanctum, and optional team management. Jetstream is designed using [Tailwind CSS](https://tailwindcss.com) and offers your choice of [Livewire](https://livewire.laravel.com) or [Inertia](https://inertiajs.com) driven frontend scaffolding.\n\nComplete documentation for installing Laravel Jetstream can be found within the [official Jetstream documentation](https://jetstream.laravel.com).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/starter-kits.md","loc":{"lines":{"from":124,"to":130}}}}],["3594",{"pageContent":"# Strings\n\n- [Introduction](#introduction)\n- [Available Methods](#available-methods)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nLaravel includes a variety of functions for manipulating string values. Many of these functions are used by the framework itself; however, you are free to use them in your own applications if you find them convenient.\n\n<a name=\"available-methods\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1,"to":11}}}}],["3595",{"pageContent":"Available Methods\n\n<style>\n    .collection-method-list > p {\n        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n</style>\n\n<a name=\"strings-method-list\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":12,"to":27}}}}],["3596",{"pageContent":"Strings\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":28,"to":30}}}}],["3597",{"pageContent":"[\\__](#method-__)\n[class_basename](#method-class-basename)\n[e](#method-e)\n[preg_replace_array](#method-preg-replace-array)\n[Str::after](#method-str-after)\n[Str::afterLast](#method-str-after-last)\n[Str::ascii](#method-str-ascii)\n[Str::before](#method-str-before)\n[Str::beforeLast](#method-str-before-last)\n[Str::between](#method-str-between)\n[Str::betweenFirst](#method-str-between-first)\n[Str::camel](#method-camel-case)\n[Str::contains](#method-str-contains)\n[Str::containsAll](#method-str-contains-all)\n[Str::endsWith](#method-ends-with)\n[Str::excerpt](#method-excerpt)\n[Str::finish](#method-str-finish)\n[Str::headline](#method-str-headline)\n[Str::inlineMarkdown](#method-str-inline-markdown)\n[Str::is](#method-str-is)\n[Str::isAscii](#method-str-is-ascii)\n[Str::isJson](#method-str-is-json)\n[Str::isUlid](#method-str-is-ulid)\n[Str::isUrl](#method-str-is-url)\n[Str::isUuid](#method-str-is-uuid)\n[Str::kebab](#method-kebab-case)\n[Str::lcfirst](#method-str-lcfirst)\n[Str::length](#method-str-length)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":32,"to":59}}}}],["3598",{"pageContent":"[Str::isUlid](#method-str-is-ulid)\n[Str::isUrl](#method-str-is-url)\n[Str::isUuid](#method-str-is-uuid)\n[Str::kebab](#method-kebab-case)\n[Str::lcfirst](#method-str-lcfirst)\n[Str::length](#method-str-length)\n[Str::limit](#method-str-limit)\n[Str::lower](#method-str-lower)\n[Str::markdown](#method-str-markdown)\n[Str::mask](#method-str-mask)\n[Str::orderedUuid](#method-str-ordered-uuid)\n[Str::padBoth](#method-str-padboth)\n[Str::padLeft](#method-str-padleft)\n[Str::padRight](#method-str-padright)\n[Str::password](#method-str-password)\n[Str::plural](#method-str-plural)\n[Str::pluralStudly](#method-str-plural-studly)\n[Str::position](#method-str-position)\n[Str::random](#method-str-random)\n[Str::remove](#method-str-remove)\n[Str::repeat](#method-str-repeat)\n[Str::replace](#method-str-replace)\n[Str::replaceArray](#method-str-replace-array)\n[Str::replaceFirst](#method-str-replace-first)\n[Str::replaceLast](#method-str-replace-last)\n[Str::replaceMatches](#method-str-replace-matches)\n[Str::replaceStart](#method-str-replace-start)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":59,"to":85}}}}],["3599",{"pageContent":"[Str::replaceFirst](#method-str-replace-first)\n[Str::replaceLast](#method-str-replace-last)\n[Str::replaceMatches](#method-str-replace-matches)\n[Str::replaceStart](#method-str-replace-start)\n[Str::replaceEnd](#method-str-replace-end)\n[Str::reverse](#method-str-reverse)\n[Str::singular](#method-str-singular)\n[Str::slug](#method-str-slug)\n[Str::snake](#method-snake-case)\n[Str::squish](#method-str-squish)\n[Str::start](#method-str-start)\n[Str::startsWith](#method-starts-with)\n[Str::studly](#method-studly-case)\n[Str::substr](#method-str-substr)\n[Str::substrCount](#method-str-substrcount)\n[Str::substrReplace](#method-str-substrreplace)\n[Str::swap](#method-str-swap)\n[Str::take](#method-take)\n[Str::title](#method-title-case)\n[Str::toHtmlString](#method-str-to-html-string)\n[Str::ucfirst](#method-str-ucfirst)\n[Str::ucsplit](#method-str-ucsplit)\n[Str::upper](#method-str-upper)\n[Str::ulid](#method-str-ulid)\n[Str::uuid](#method-str-uuid)\n[Str::wordCount](#method-str-word-count)\n[Str::wordWrap](#method-str-word-wrap)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":85,"to":111}}}}],["3600",{"pageContent":"[Str::upper](#method-str-upper)\n[Str::ulid](#method-str-ulid)\n[Str::uuid](#method-str-uuid)\n[Str::wordCount](#method-str-word-count)\n[Str::wordWrap](#method-str-word-wrap)\n[Str::words](#method-str-words)\n[Str::wrap](#method-str-wrap)\n[str](#method-str)\n[trans](#method-trans)\n[trans_choice](#method-trans-choice)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":111,"to":120}}}}],["3601",{"pageContent":"</div>\n\n<a name=\"fluent-strings-method-list\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":122,"to":124}}}}],["3602",{"pageContent":"Fluent Strings\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":125,"to":127}}}}],["3603",{"pageContent":"[after](#method-fluent-str-after)\n[afterLast](#method-fluent-str-after-last)\n[append](#method-fluent-str-append)\n[ascii](#method-fluent-str-ascii)\n[basename](#method-fluent-str-basename)\n[before](#method-fluent-str-before)\n[beforeLast](#method-fluent-str-before-last)\n[between](#method-fluent-str-between)\n[betweenFirst](#method-fluent-str-between-first)\n[camel](#method-fluent-str-camel)\n[classBasename](#method-fluent-str-class-basename)\n[contains](#method-fluent-str-contains)\n[containsAll](#method-fluent-str-contains-all)\n[dirname](#method-fluent-str-dirname)\n[endsWith](#method-fluent-str-ends-with)\n[excerpt](#method-fluent-str-excerpt)\n[exactly](#method-fluent-str-exactly)\n[explode](#method-fluent-str-explode)\n[finish](#method-fluent-str-finish)\n[headline](#method-fluent-str-headline)\n[inlineMarkdown](#method-fluent-str-inline-markdown)\n[is](#method-fluent-str-is)\n[isAscii](#method-fluent-str-is-ascii)\n[isEmpty](#method-fluent-str-is-empty)\n[isNotEmpty](#method-fluent-str-is-not-empty)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":129,"to":153}}}}],["3604",{"pageContent":"[inlineMarkdown](#method-fluent-str-inline-markdown)\n[is](#method-fluent-str-is)\n[isAscii](#method-fluent-str-is-ascii)\n[isEmpty](#method-fluent-str-is-empty)\n[isNotEmpty](#method-fluent-str-is-not-empty)\n[isJson](#method-fluent-str-is-json)\n[isUlid](#method-fluent-str-is-ulid)\n[isUrl](#method-fluent-str-is-url)\n[isUuid](#method-fluent-str-is-uuid)\n[kebab](#method-fluent-str-kebab)\n[lcfirst](#method-fluent-str-lcfirst)\n[length](#method-fluent-str-length)\n[limit](#method-fluent-str-limit)\n[lower](#method-fluent-str-lower)\n[ltrim](#method-fluent-str-ltrim)\n[markdown](#method-fluent-str-markdown)\n[mask](#method-fluent-str-mask)\n[match](#method-fluent-str-match)\n[matchAll](#method-fluent-str-match-all)\n[isMatch](#method-fluent-str-is-match)\n[newLine](#method-fluent-str-new-line)\n[padBoth](#method-fluent-str-padboth)\n[padLeft](#method-fluent-str-padleft)\n[padRight](#method-fluent-str-padright)\n[pipe](#method-fluent-str-pipe)\n[plural](#method-fluent-str-plural)\n[position](#method-fluent-str-position)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":153,"to":179}}}}],["3605",{"pageContent":"[padLeft](#method-fluent-str-padleft)\n[padRight](#method-fluent-str-padright)\n[pipe](#method-fluent-str-pipe)\n[plural](#method-fluent-str-plural)\n[position](#method-fluent-str-position)\n[prepend](#method-fluent-str-prepend)\n[remove](#method-fluent-str-remove)\n[repeat](#method-fluent-str-repeat)\n[replace](#method-fluent-str-replace)\n[replaceArray](#method-fluent-str-replace-array)\n[replaceFirst](#method-fluent-str-replace-first)\n[replaceLast](#method-fluent-str-replace-last)\n[replaceMatches](#method-fluent-str-replace-matches)\n[replaceStart](#method-fluent-str-replace-start)\n[replaceEnd](#method-fluent-str-replace-end)\n[rtrim](#method-fluent-str-rtrim)\n[scan](#method-fluent-str-scan)\n[singular](#method-fluent-str-singular)\n[slug](#method-fluent-str-slug)\n[snake](#method-fluent-str-snake)\n[split](#method-fluent-str-split)\n[squish](#method-fluent-str-squish)\n[start](#method-fluent-str-start)\n[startsWith](#method-fluent-str-starts-with)\n[studly](#method-fluent-str-studly)\n[substr](#method-fluent-str-substr)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":179,"to":204}}}}],["3606",{"pageContent":"[squish](#method-fluent-str-squish)\n[start](#method-fluent-str-start)\n[startsWith](#method-fluent-str-starts-with)\n[studly](#method-fluent-str-studly)\n[substr](#method-fluent-str-substr)\n[substrReplace](#method-fluent-str-substrreplace)\n[swap](#method-fluent-str-swap)\n[take](#method-fluent-str-take)\n[tap](#method-fluent-str-tap)\n[test](#method-fluent-str-test)\n[title](#method-fluent-str-title)\n[trim](#method-fluent-str-trim)\n[ucfirst](#method-fluent-str-ucfirst)\n[ucsplit](#method-fluent-str-ucsplit)\n[upper](#method-fluent-str-upper)\n[when](#method-fluent-str-when)\n[whenContains](#method-fluent-str-when-contains)\n[whenContainsAll](#method-fluent-str-when-contains-all)\n[whenEmpty](#method-fluent-str-when-empty)\n[whenNotEmpty](#method-fluent-str-when-not-empty)\n[whenStartsWith](#method-fluent-str-when-starts-with)\n[whenEndsWith](#method-fluent-str-when-ends-with)\n[whenExactly](#method-fluent-str-when-exactly)\n[whenNotExactly](#method-fluent-str-when-not-exactly)\n[whenIs](#method-fluent-str-when-is)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":204,"to":228}}}}],["3607",{"pageContent":"[whenEndsWith](#method-fluent-str-when-ends-with)\n[whenExactly](#method-fluent-str-when-exactly)\n[whenNotExactly](#method-fluent-str-when-not-exactly)\n[whenIs](#method-fluent-str-when-is)\n[whenIsAscii](#method-fluent-str-when-is-ascii)\n[whenIsUlid](#method-fluent-str-when-is-ulid)\n[whenIsUuid](#method-fluent-str-when-is-uuid)\n[whenTest](#method-fluent-str-when-test)\n[wordCount](#method-fluent-str-word-count)\n[words](#method-fluent-str-words)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":228,"to":237}}}}],["3608",{"pageContent":"</div>\n\n<a name=\"strings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":239,"to":241}}}}],["3609",{"pageContent":"Strings\n\n<a name=\"method-__\"></a>\n#### `__()` {.collection-method}\n\nThe `__` function translates the given translation string or translation key using your [language files](/docs/{{version}}/localization):\n\n    echo __('Welcome to our application');\n\n    echo __('messages.welcome');\n\nIf the specified translation string or key does not exist, the `__` function will return the given value. So, using the example above, the `__` function would return `messages.welcome` if that translation key does not exist.\n\n<a name=\"method-class-basename\"></a>\n#### `class_basename()` {.collection-method}\n\nThe `class_basename` function returns the class name of the given class with the class's namespace removed:\n\n    $class = class_basename('Foo\\Bar\\Baz');\n\n    // Baz\n\n<a name=\"method-e\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":242,"to":264}}}}],["3610",{"pageContent":"`e()` {.collection-method}\n\nThe `e` function runs PHP's `htmlspecialchars` function with the `double_encode` option set to `true` by default:\n\n    echo e('<html>foo</html>');\n\n    // &lt;html&gt;foo&lt;/html&gt;\n\n<a name=\"method-preg-replace-array\"></a>\n#### `preg_replace_array()` {.collection-method}\n\nThe `preg_replace_array` function replaces a given pattern in the string sequentially using an array:\n\n    $string = 'The event will take place between :start and :end';\n\n    $replaced = preg_replace_array('/:[a-z_]+/', ['8:30', '9:00'], $string);\n\n    // The event will take place between 8:30 and 9:00\n\n<a name=\"method-str-after\"></a>\n#### `Str::after()` {.collection-method}\n\nThe `Str::after` method returns everything after the given value in a string. The entire string will be returned if the value does not exist within the string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::after('This is my name', 'This is');\n\n    // ' my name'\n\n<a name=\"method-str-after-last\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":265,"to":295}}}}],["3611",{"pageContent":"`Str::afterLast()` {.collection-method}\n\nThe `Str::afterLast` method returns everything after the last occurrence of the given value in a string. The entire string will be returned if the value does not exist within the string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::afterLast('App\\Http\\Controllers\\Controller', '\\\\');\n\n    // 'Controller'\n\n<a name=\"method-str-ascii\"></a>\n#### `Str::ascii()` {.collection-method}\n\nThe `Str::ascii` method will attempt to transliterate the string into an ASCII value:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::ascii('û');\n\n    // 'u'\n\n<a name=\"method-str-before\"></a>\n#### `Str::before()` {.collection-method}\n\nThe `Str::before` method returns everything before the given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::before('This is my name', 'my name');\n\n    // 'This is '\n\n<a name=\"method-str-before-last\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":296,"to":328}}}}],["3612",{"pageContent":"`Str::beforeLast()` {.collection-method}\n\nThe `Str::beforeLast` method returns everything before the last occurrence of the given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::beforeLast('This is my name', 'is');\n\n    // 'This '\n\n<a name=\"method-str-between\"></a>\n#### `Str::between()` {.collection-method}\n\nThe `Str::between` method returns the portion of a string between two values:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::between('This is my name', 'This', 'name');\n\n    // ' is my '\n\n<a name=\"method-str-between-first\"></a>\n#### `Str::betweenFirst()` {.collection-method}\n\nThe `Str::betweenFirst` method returns the smallest possible portion of a string between two values:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::betweenFirst('[a] bc [d]', '[', ']');\n\n    // 'a'\n\n<a name=\"method-camel-case\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":329,"to":361}}}}],["3613",{"pageContent":"`Str::camel()` {.collection-method}\n\nThe `Str::camel` method converts the given string to `camelCase`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::camel('foo_bar');\n\n    // fooBar\n\n<a name=\"method-str-contains\"></a>\n#### `Str::contains()` {.collection-method}\n\nThe `Str::contains` method determines if the given string contains the given value. This method is case sensitive:\n\n    use Illuminate\\Support\\Str;\n\n    $contains = Str::contains('This is my name', 'my');\n\n    // true\n\nYou may also pass an array of values to determine if the given string contains any of the values in the array:\n\n    use Illuminate\\Support\\Str;\n\n    $contains = Str::contains('This is my name', ['my', 'foo']);\n\n    // true\n\n<a name=\"method-str-contains-all\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":362,"to":391}}}}],["3614",{"pageContent":"`Str::containsAll()` {.collection-method}\n\nThe `Str::containsAll` method determines if the given string contains all of the values in a given array:\n\n    use Illuminate\\Support\\Str;\n\n    $containsAll = Str::containsAll('This is my name', ['my', 'name']);\n\n    // true\n\n<a name=\"method-ends-with\"></a>\n#### `Str::endsWith()` {.collection-method}\n\nThe `Str::endsWith` method determines if the given string ends with the given value:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::endsWith('This is my name', 'name');\n\n    // true\n\n\nYou may also pass an array of values to determine if the given string ends with any of the values in the array:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::endsWith('This is my name', ['name', 'foo']);\n\n    // true\n\n    $result = Str::endsWith('This is my name', ['this', 'foo']);\n\n    // false\n\n<a name=\"method-excerpt\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":392,"to":426}}}}],["3615",{"pageContent":"`Str::excerpt()` {.collection-method}\n\nThe `Str::excerpt` method extracts an excerpt from a given string that matches the first instance of a phrase within that string:\n\n    use Illuminate\\Support\\Str;\n\n    $excerpt = Str::excerpt('This is my name', 'my', [\n        'radius' => 3\n    ]);\n\n    // '...is my na...'\n\nThe `radius` option, which defaults to `100`, allows you to define the number of characters that should appear on each side of the truncated string.\n\nIn addition, you may use the `omission` option to define the string that will be prepended and appended to the truncated string:\n\n    use Illuminate\\Support\\Str;\n\n    $excerpt = Str::excerpt('This is my name', 'name', [\n        'radius' => 3,\n        'omission' => '(...) '\n    ]);\n\n    // '(...) my name'\n\n<a name=\"method-str-finish\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":427,"to":452}}}}],["3616",{"pageContent":"`Str::finish()` {.collection-method}\n\nThe `Str::finish` method adds a single instance of the given value to a string if it does not already end with that value:\n\n    use Illuminate\\Support\\Str;\n\n    $adjusted = Str::finish('this/string', '/');\n\n    // this/string/\n\n    $adjusted = Str::finish('this/string/', '/');\n\n    // this/string/\n\n<a name=\"method-str-headline\"></a>\n#### `Str::headline()` {.collection-method}\n\nThe `Str::headline` method will convert strings delimited by casing, hyphens, or underscores into a space delimited string with each word's first letter capitalized:\n\n    use Illuminate\\Support\\Str;\n\n    $headline = Str::headline('steve_jobs');\n\n    // Steve Jobs\n\n    $headline = Str::headline('EmailNotificationSent');\n\n    // Email Notification Sent\n\n<a name=\"method-str-inline-markdown\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":453,"to":482}}}}],["3617",{"pageContent":"`Str::inlineMarkdown()` {.collection-method}\n\nThe `Str::inlineMarkdown` method converts GitHub flavored Markdown into inline HTML using [CommonMark](https://commonmark.thephpleague.com/). However, unlike the `markdown` method, it does not wrap all generated HTML in a block-level element:\n\n    use Illuminate\\Support\\Str;\n\n    $html = Str::inlineMarkdown('**Laravel**');\n\n    // <strong>Laravel</strong>\n\n<a name=\"method-str-is\"></a>\n#### `Str::is()` {.collection-method}\n\nThe `Str::is` method determines if a given string matches a given pattern. Asterisks may be used as wildcard values:\n\n    use Illuminate\\Support\\Str;\n\n    $matches = Str::is('foo*', 'foobar');\n\n    // true\n\n    $matches = Str::is('baz*', 'foobar');\n\n    // false\n\n<a name=\"method-str-is-ascii\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":483,"to":508}}}}],["3618",{"pageContent":"`Str::isAscii()` {.collection-method}\n\nThe `Str::isAscii` method determines if a given string is 7 bit ASCII:\n\n    use Illuminate\\Support\\Str;\n\n    $isAscii = Str::isAscii('Taylor');\n\n    // true\n\n    $isAscii = Str::isAscii('ü');\n\n    // false\n\n<a name=\"method-str-is-json\"></a>\n#### `Str::isJson()` {.collection-method}\n\nThe `Str::isJson` method determines if the given string is valid JSON:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::isJson('[1,2,3]');\n\n    // true\n\n    $result = Str::isJson('{\"first\": \"John\", \"last\": \"Doe\"}');\n\n    // true\n\n    $result = Str::isJson('{first: \"John\", last: \"Doe\"}');\n\n    // false\n\n<a name=\"method-str-is-url\"></a>\n#### `Str::isUrl()` {.collection-method}\n\nThe `Str::isUrl` method determines if the given string is a valid URL:\n\n    use Illuminate\\Support\\Str;\n\n    $isUrl = Str::isUrl('http://example.com');\n\n    // true\n\n    $isUrl = Str::isUrl('laravel');\n\n    // false\n\n<a name=\"method-str-is-ulid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":509,"to":557}}}}],["3619",{"pageContent":"`Str::isUlid()` {.collection-method}\n\nThe `Str::isUlid` method determines if the given string is a valid ULID:\n\n    use Illuminate\\Support\\Str;\n\n    $isUlid = Str::isUlid('01gd6r360bp37zj17nxb55yv40');\n\n    // true\n\n    $isUlid = Str::isUlid('laravel');\n\n    // false\n\n<a name=\"method-str-is-uuid\"></a>\n#### `Str::isUuid()` {.collection-method}\n\nThe `Str::isUuid` method determines if the given string is a valid UUID:\n\n    use Illuminate\\Support\\Str;\n\n    $isUuid = Str::isUuid('a0a2a2d2-0b87-4a18-83f2-2529882be2de');\n\n    // true\n\n    $isUuid = Str::isUuid('laravel');\n\n    // false\n\n<a name=\"method-kebab-case\"></a>\n#### `Str::kebab()` {.collection-method}\n\nThe `Str::kebab` method converts the given string to `kebab-case`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::kebab('fooBar');\n\n    // foo-bar\n\n<a name=\"method-str-lcfirst\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":558,"to":598}}}}],["3620",{"pageContent":"`Str::lcfirst()` {.collection-method}\n\nThe `Str::lcfirst` method returns the given string with the first character lowercased:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::lcfirst('Foo Bar');\n\n    // foo Bar\n\n<a name=\"method-str-length\"></a>\n#### `Str::length()` {.collection-method}\n\nThe `Str::length` method returns the length of the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $length = Str::length('Laravel');\n\n    // 7\n\n<a name=\"method-str-limit\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":599,"to":620}}}}],["3621",{"pageContent":"`Str::limit()` {.collection-method}\n\nThe `Str::limit` method truncates the given string to the specified length:\n\n    use Illuminate\\Support\\Str;\n\n    $truncated = Str::limit('The quick brown fox jumps over the lazy dog', 20);\n\n    // The quick brown fox...\n\nYou may pass a third argument to the method to change the string that will be appended to the end of the truncated string:\n\n    use Illuminate\\Support\\Str;\n\n    $truncated = Str::limit('The quick brown fox jumps over the lazy dog', 20, ' (...)');\n\n    // The quick brown fox (...)\n\n<a name=\"method-str-lower\"></a>\n#### `Str::lower()` {.collection-method}\n\nThe `Str::lower` method converts the given string to lowercase:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::lower('LARAVEL');\n\n    // laravel\n\n<a name=\"method-str-markdown\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":621,"to":650}}}}],["3622",{"pageContent":"`Str::markdown()` {.collection-method}\n\nThe `Str::markdown` method converts GitHub flavored Markdown into HTML using [CommonMark](https://commonmark.thephpleague.com/):\n\n    use Illuminate\\Support\\Str;\n\n    $html = Str::markdown('# Laravel');\n\n    // <h1>Laravel</h1>\n\n    $html = Str::markdown('# Taylor <b>Otwell</b>', [\n        'html_input' => 'strip',\n    ]);\n\n    // <h1>Taylor Otwell</h1>\n\n<a name=\"method-str-mask\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":651,"to":667}}}}],["3623",{"pageContent":"`Str::mask()` {.collection-method}\n\nThe `Str::mask` method masks a portion of a string with a repeated character, and may be used to obfuscate segments of strings such as email addresses and phone numbers:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::mask('taylor@example.com', '*', 3);\n\n    // tay***************\n\nIf needed, you provide a negative number as the third argument to the `mask` method, which will instruct the method to begin masking at the given distance from the end of the string:\n\n    $string = Str::mask('taylor@example.com', '*', -15, 3);\n\n    // tay***@example.com\n\n<a name=\"method-str-ordered-uuid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":668,"to":684}}}}],["3624",{"pageContent":"`Str::orderedUuid()` {.collection-method}\n\nThe `Str::orderedUuid` method generates a \"timestamp first\" UUID that may be efficiently stored in an indexed database column. Each UUID that is generated using this method will be sorted after UUIDs previously generated using the method:\n\n    use Illuminate\\Support\\Str;\n\n    return (string) Str::orderedUuid();\n\n<a name=\"method-str-padboth\"></a>\n#### `Str::padBoth()` {.collection-method}\n\nThe `Str::padBoth` method wraps PHP's `str_pad` function, padding both sides of a string with another string until the final string reaches a desired length:\n\n    use Illuminate\\Support\\Str;\n\n    $padded = Str::padBoth('James', 10, '_');\n\n    // '__James___'\n\n    $padded = Str::padBoth('James', 10);\n\n    // '  James   '\n\n<a name=\"method-str-padleft\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":685,"to":708}}}}],["3625",{"pageContent":"`Str::padLeft()` {.collection-method}\n\nThe `Str::padLeft` method wraps PHP's `str_pad` function, padding the left side of a string with another string until the final string reaches a desired length:\n\n    use Illuminate\\Support\\Str;\n\n    $padded = Str::padLeft('James', 10, '-=');\n\n    // '-=-=-James'\n\n    $padded = Str::padLeft('James', 10);\n\n    // '     James'\n\n<a name=\"method-str-padright\"></a>\n#### `Str::padRight()` {.collection-method}\n\nThe `Str::padRight` method wraps PHP's `str_pad` function, padding the right side of a string with another string until the final string reaches a desired length:\n\n    use Illuminate\\Support\\Str;\n\n    $padded = Str::padRight('James', 10, '-');\n\n    // 'James-----'\n\n    $padded = Str::padRight('James', 10);\n\n    // 'James     '\n\n<a name=\"method-str-password\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":709,"to":738}}}}],["3626",{"pageContent":"`Str::password()` {.collection-method}\n\nThe `Str::password` method may be used to generate a secure, random password of a given length. The password will consist of a combination of letters, numbers, symbols, and spaces. By default, passwords are 32 characters long:\n\n    use Illuminate\\Support\\Str;\n\n    $password = Str::password();\n\n    // 'EbJo2vE-AS:U,$%_gkrV4n,q~1xy/-_4'\n\n    $password = Str::password(12);\n\n    // 'qwuar>#V|i]N'\n\n<a name=\"method-str-plural\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":739,"to":753}}}}],["3627",{"pageContent":"`Str::plural()` {.collection-method}\n\nThe `Str::plural` method converts a singular word string to its plural form. This function supports [any of the languages support by Laravel's pluralizer](/docs/{{version}}/localization#pluralization-language):\n\n    use Illuminate\\Support\\Str;\n\n    $plural = Str::plural('car');\n\n    // cars\n\n    $plural = Str::plural('child');\n\n    // children\n\nYou may provide an integer as a second argument to the function to retrieve the singular or plural form of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $plural = Str::plural('child', 2);\n\n    // children\n\n    $singular = Str::plural('child', 1);\n\n    // child\n\n<a name=\"method-str-plural-studly\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":754,"to":780}}}}],["3628",{"pageContent":"`Str::pluralStudly()` {.collection-method}\n\nThe `Str::pluralStudly` method converts a singular word string formatted in studly caps case to its plural form. This function supports [any of the languages support by Laravel's pluralizer](/docs/{{version}}/localization#pluralization-language):\n\n    use Illuminate\\Support\\Str;\n\n    $plural = Str::pluralStudly('VerifiedHuman');\n\n    // VerifiedHumans\n\n    $plural = Str::pluralStudly('UserFeedback');\n\n    // UserFeedback\n\nYou may provide an integer as a second argument to the function to retrieve the singular or plural form of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $plural = Str::pluralStudly('VerifiedHuman', 2);\n\n    // VerifiedHumans\n\n    $singular = Str::pluralStudly('VerifiedHuman', 1);\n\n    // VerifiedHuman\n\n<a name=\"method-str-position\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":781,"to":807}}}}],["3629",{"pageContent":"`Str::position()` {.collection-method}\n\nThe `Str::position` method returns the position of the first occurrence of a substring in a string. If the substring does not exist in the given string, `false` is returned:\n\n    use Illuminate\\Support\\Str;\n\n    $position = Str::position('Hello, World!', 'Hello');\n\n    // 0\n\n    $position = Str::position('Hello, World!', 'W');\n\n    // 7\n\n<a name=\"method-str-random\"></a>\n#### `Str::random()` {.collection-method}\n\nThe `Str::random` method generates a random string of the specified length. This function uses PHP's `random_bytes` function:\n\n    use Illuminate\\Support\\Str;\n\n    $random = Str::random(40);\n\n<a name=\"method-str-remove\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":808,"to":831}}}}],["3630",{"pageContent":"`Str::remove()` {.collection-method}\n\nThe `Str::remove` method removes the given value or array of values from the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = 'Peter Piper picked a peck of pickled peppers.';\n\n    $removed = Str::remove('e', $string);\n\n    // Ptr Pipr pickd a pck of pickld ppprs.\n\nYou may also pass `false` as a third argument to the `remove` method to ignore case when removing strings.\n\n<a name=\"method-str-repeat\"></a>\n#### `Str::repeat()` {.collection-method}\n\nThe `Str::repeat` method repeats the given string:\n\n```php\nuse Illuminate\\Support\\Str;\n\n$string = 'a';\n\n$repeat = Str::repeat($string, 5);\n\n// aaaaa\n```\n\n<a name=\"method-str-replace\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":832,"to":861}}}}],["3631",{"pageContent":"`Str::replace()` {.collection-method}\n\nThe `Str::replace` method replaces a given string within the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = 'Laravel 8.x';\n\n    $replaced = Str::replace('8.x', '9.x', $string);\n\n    // Laravel 9.x\n\nThe `replace` method also accepts a `caseSensitive` argument. By default, the `replace` method is case sensitive:\n\n    Str::replace('Framework', 'Laravel', caseSensitive: false);\n\n<a name=\"method-str-replace-array\"></a>\n#### `Str::replaceArray()` {.collection-method}\n\nThe `Str::replaceArray` method replaces a given value in the string sequentially using an array:\n\n    use Illuminate\\Support\\Str;\n\n    $string = 'The event will take place between ? and ?';\n\n    $replaced = Str::replaceArray('?', ['8:30', '9:00'], $string);\n\n    // The event will take place between 8:30 and 9:00\n\n<a name=\"method-str-replace-first\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":862,"to":891}}}}],["3632",{"pageContent":"`Str::replaceFirst()` {.collection-method}\n\nThe `Str::replaceFirst` method replaces the first occurrence of a given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::replaceFirst('the', 'a', 'the quick brown fox jumps over the lazy dog');\n\n    // a quick brown fox jumps over the lazy dog\n\n<a name=\"method-str-replace-last\"></a>\n#### `Str::replaceLast()` {.collection-method}\n\nThe `Str::replaceLast` method replaces the last occurrence of a given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::replaceLast('the', 'a', 'the quick brown fox jumps over the lazy dog');\n\n    // the quick brown fox jumps over a lazy dog\n\n<a name=\"method-str-replace-matches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":892,"to":913}}}}],["3633",{"pageContent":"`Str::replaceMatches()` {.collection-method}\n\nThe `Str::replaceMatches` method replaces all portions of a string matching a pattern with the given replacement string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::replaceMatches(\n        pattern: '/[^A-Za-z0-9]++/',\n        replace: '',\n        subject: '(+1) 501-555-1000'\n    )\n\n    // '15015551000'\n\nThe `replaceMatches` method also accepts a closure that will be invoked with each portion of the string matching the given pattern, allowing you to perform the replacement logic within the closure and return the replaced value:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::replaceMatches('/\\d/', function (array $matches) {\n        return '['.$matches[0].']';\n    }, '123');\n\n    // '[1][2][3]'\n\n<a name=\"method-str-replace-start\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":914,"to":938}}}}],["3634",{"pageContent":"`Str::replaceStart()` {.collection-method}\n\nThe `Str::replaceStart` method replaces the first occurrence of the given value only if the value appears at the start of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::replaceStart('Hello', 'Laravel', 'Hello World');\n\n    // Laravel World\n\n    $replaced = Str::replaceStart('World', 'Laravel', 'Hello World');\n\n    // Hello World\n\n<a name=\"method-str-replace-end\"></a>\n#### `Str::replaceEnd()` {.collection-method}\n\nThe `Str::replaceEnd` method replaces the last occurrence of the given value only if the value appears at the end of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::replaceEnd('World', 'Laravel', 'Hello World');\n\n    // Hello Laravel\n\n    $replaced = Str::replaceEnd('Hello', 'Laravel', 'Hello World');\n\n    // Hello World\n\n<a name=\"method-str-reverse\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":939,"to":968}}}}],["3635",{"pageContent":"`Str::reverse()` {.collection-method}\n\nThe `Str::reverse` method reverses the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $reversed = Str::reverse('Hello World');\n\n    // dlroW olleH\n\n<a name=\"method-str-singular\"></a>\n#### `Str::singular()` {.collection-method}\n\nThe `Str::singular` method converts a string to its singular form. This function supports [any of the languages support by Laravel's pluralizer](/docs/{{version}}/localization#pluralization-language):\n\n    use Illuminate\\Support\\Str;\n\n    $singular = Str::singular('cars');\n\n    // car\n\n    $singular = Str::singular('children');\n\n    // child\n\n<a name=\"method-str-slug\"></a>\n#### `Str::slug()` {.collection-method}\n\nThe `Str::slug` method generates a URL friendly \"slug\" from the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $slug = Str::slug('Laravel 5 Framework', '-');\n\n    // laravel-5-framework\n\n<a name=\"method-snake-case\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":969,"to":1005}}}}],["3636",{"pageContent":"`Str::snake()` {.collection-method}\n\nThe `Str::snake` method converts the given string to `snake_case`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::snake('fooBar');\n\n    // foo_bar\n\n    $converted = Str::snake('fooBar', '-');\n\n    // foo-bar\n\n<a name=\"method-str-squish\"></a>\n#### `Str::squish()` {.collection-method}\n\nThe `Str::squish` method removes all extraneous white space from a string, including extraneous white space between words:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::squish('    laravel    framework    ');\n\n    // laravel framework\n\n<a name=\"method-str-start\"></a>\n#### `Str::start()` {.collection-method}\n\nThe `Str::start` method adds a single instance of the given value to a string if it does not already start with that value:\n\n    use Illuminate\\Support\\Str;\n\n    $adjusted = Str::start('this/string', '/');\n\n    // /this/string\n\n    $adjusted = Str::start('/this/string', '/');\n\n    // /this/string\n\n<a name=\"method-starts-with\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1006,"to":1046}}}}],["3637",{"pageContent":"`Str::startsWith()` {.collection-method}\n\nThe `Str::startsWith` method determines if the given string begins with the given value:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::startsWith('This is my name', 'This');\n\n    // true\n\nIf an array of possible values is passed, the `startsWith` method will return `true` if the string begins with any of the given values:\n\n    $result = Str::startsWith('This is my name', ['This', 'That', 'There']);\n\n    // true\n\n<a name=\"method-studly-case\"></a>\n#### `Str::studly()` {.collection-method}\n\nThe `Str::studly` method converts the given string to `StudlyCase`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::studly('foo_bar');\n\n    // FooBar\n\n<a name=\"method-str-substr\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1047,"to":1074}}}}],["3638",{"pageContent":"`Str::substr()` {.collection-method}\n\nThe `Str::substr` method returns the portion of string specified by the start and length parameters:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::substr('The Laravel Framework', 4, 7);\n\n    // Laravel\n\n<a name=\"method-str-substrcount\"></a>\n#### `Str::substrCount()` {.collection-method}\n\nThe `Str::substrCount` method returns the number of occurrences of a given value in the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $count = Str::substrCount('If you like ice cream, you will like snow cones.', 'like');\n\n    // 2\n\n<a name=\"method-str-substrreplace\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1075,"to":1096}}}}],["3639",{"pageContent":"`Str::substrReplace()` {.collection-method}\n\nThe `Str::substrReplace` method replaces text within a portion of a string, starting at the position specified by the third argument and replacing the number of characters specified by the fourth argument. Passing `0` to the method's fourth argument will insert the string at the specified position without replacing any of the existing characters in the string:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::substrReplace('1300', ':', 2);\n    // 13:\n\n    $result = Str::substrReplace('1300', ':', 2, 0);\n    // 13:00\n\n<a name=\"method-str-swap\"></a>\n#### `Str::swap()` {.collection-method}\n\nThe `Str::swap` method replaces multiple values in the given string using PHP's `strtr` function:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::swap([\n        'Tacos' => 'Burritos',\n        'great' => 'fantastic',\n    ], 'Tacos are great!');\n\n    // Burritos are fantastic!\n\n<a name=\"method-take\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1097,"to":1123}}}}],["3640",{"pageContent":"`Str::take()` {.collection-method}\n\nThe `Str::take` method returns a specified number of characters from the beginning of a string:\n\n    use Illuminate\\Support\\Str;\n\n    $taken = Str::take('Build something amazing!', 5);\n\n    // Build\n\n<a name=\"method-title-case\"></a>\n#### `Str::title()` {.collection-method}\n\nThe `Str::title` method converts the given string to `Title Case`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::title('a nice title uses the correct case');\n\n    // A Nice Title Uses The Correct Case\n\n<a name=\"method-str-to-html-string\"></a>\n#### `Str::toHtmlString()` {.collection-method}\n\nThe `Str::toHtmlString` method converts the string instance to an instance of `Illuminate\\Support\\HtmlString`, which may be displayed in Blade templates:\n\n    use Illuminate\\Support\\Str;\n\n    $htmlString = Str::of('Nuno Maduro')->toHtmlString();\n\n<a name=\"method-str-ucfirst\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1124,"to":1154}}}}],["3641",{"pageContent":"`Str::ucfirst()` {.collection-method}\n\nThe `Str::ucfirst` method returns the given string with the first character capitalized:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::ucfirst('foo bar');\n\n    // Foo bar\n\n<a name=\"method-str-ucsplit\"></a>\n#### `Str::ucsplit()` {.collection-method}\n\nThe `Str::ucsplit` method splits the given string into an array by uppercase characters:\n\n    use Illuminate\\Support\\Str;\n\n    $segments = Str::ucsplit('FooBar');\n\n    // [0 => 'Foo', 1 => 'Bar']\n\n<a name=\"method-str-upper\"></a>\n#### `Str::upper()` {.collection-method}\n\nThe `Str::upper` method converts the given string to uppercase:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::upper('laravel');\n\n    // LARAVEL\n\n<a name=\"method-str-ulid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1155,"to":1187}}}}],["3642",{"pageContent":"`Str::ulid()` {.collection-method}\n\nThe `Str::ulid` method generates a ULID, which is a compact, time-ordered unique identifier:\n\n    use Illuminate\\Support\\Str;\n\n    return (string) Str::ulid();\n    \n    // 01gd6r360bp37zj17nxb55yv40\n\nIf you would like to retrieve a `Illuminate\\Support\\Carbon` date instance representing the date and time that a given ULID was created, you may use the `createFromId` method provided by Laravel's Carbon integration:\n\n```php\nuse Illuminate\\Support\\Carbon;\nuse Illuminate\\Support\\Str;\n\n$date = Carbon::createFromId((string) Str::ulid());\n```\n\n<a name=\"method-str-uuid\"></a>\n#### `Str::uuid()` {.collection-method}\n\nThe `Str::uuid` method generates a UUID (version 4):\n\n    use Illuminate\\Support\\Str;\n\n    return (string) Str::uuid();\n\n<a name=\"method-str-word-count\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1188,"to":1216}}}}],["3643",{"pageContent":"`Str::uuid()` {.collection-method}\n\nThe `Str::uuid` method generates a UUID (version 4):\n\n    use Illuminate\\Support\\Str;\n\n    return (string) Str::uuid();\n\n<a name=\"method-str-word-count\"></a>\n#### `Str::wordCount()` {.collection-method}\n\nThe `Str::wordCount` method returns the number of words that a string contains:\n\n```php\nuse Illuminate\\Support\\Str;\n\nStr::wordCount('Hello, world!'); // 2\n```\n\n<a name=\"method-str-word-wrap\"></a>\n#### `Str::wordWrap()` {.collection-method}\n\nThe `Str::wordWrap` method wraps a string to a given number of characters:\n\n    use Illuminate\\Support\\Str;\n\n    $text = \"The quick brown fox jumped over the lazy dog.\"\n\n    Str::wordWrap($text, characters: 20, break: \"<br />\\n\");\n\n    /*\n    The quick brown fox<br />\n    jumped over the lazy<br />\n    dog.\n    */\n\n<a name=\"method-str-words\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1216,"to":1252}}}}],["3644",{"pageContent":"`Str::words()` {.collection-method}\n\nThe `Str::words` method limits the number of words in a string. An additional string may be passed to this method via its third argument to specify which string should be appended to the end of the truncated string:\n\n    use Illuminate\\Support\\Str;\n\n    return Str::words('Perfectly balanced, as all things should be.', 3, ' >>>');\n\n    // Perfectly balanced, as >>>\n\n<a name=\"method-str-wrap\"></a>\n#### `Str::wrap()` {.collection-method}\n\nThe `Str::wrap` method wraps the given string with an additional string or pair of strings:\n\n    use Illuminate\\Support\\Str;\n\n    Str::wrap('Laravel', '\"');\n\n    // \"Laravel\"\n\n    Str::wrap('is', before: 'This ', after: ' Laravel!');\n\n    // This is Laravel!\n\n<a name=\"method-str\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1253,"to":1278}}}}],["3645",{"pageContent":"`str()` {.collection-method}\n\nThe `str` function returns a new `Illuminate\\Support\\Stringable` instance of the given string. This function is equivalent to the `Str::of` method:\n\n    $string = str('Taylor')->append(' Otwell');\n\n    // 'Taylor Otwell'\n\nIf no argument is provided to the `str` function, the function returns an instance of `Illuminate\\Support\\Str`:\n\n    $snake = str()->snake('FooBar');\n\n    // 'foo_bar'\n\n<a name=\"method-trans\"></a>\n#### `trans()` {.collection-method}\n\nThe `trans` function translates the given translation key using your [language files](/docs/{{version}}/localization):\n\n    echo trans('messages.welcome');\n\nIf the specified translation key does not exist, the `trans` function will return the given key. So, using the example above, the `trans` function would return `messages.welcome` if the translation key does not exist.\n\n<a name=\"method-trans-choice\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1279,"to":1302}}}}],["3646",{"pageContent":"`trans_choice()` {.collection-method}\n\nThe `trans_choice` function translates the given translation key with inflection:\n\n    echo trans_choice('messages.notifications', $unreadCount);\n\nIf the specified translation key does not exist, the `trans_choice` function will return the given key. So, using the example above, the `trans_choice` function would return `messages.notifications` if the translation key does not exist.\n\n<a name=\"fluent-strings\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1303,"to":1311}}}}],["3647",{"pageContent":"Fluent Strings\n\nFluent strings provide a more fluent, object-oriented interface for working with string values, allowing you to chain multiple string operations together using a more readable syntax compared to traditional string operations.\n\n<a name=\"method-fluent-str-after\"></a>\n#### `after` {.collection-method}\n\nThe `after` method returns everything after the given value in a string. The entire string will be returned if the value does not exist within the string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::of('This is my name')->after('This is');\n\n    // ' my name'\n\n<a name=\"method-fluent-str-after-last\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1312,"to":1327}}}}],["3648",{"pageContent":"`afterLast` {.collection-method}\n\nThe `afterLast` method returns everything after the last occurrence of the given value in a string. The entire string will be returned if the value does not exist within the string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::of('App\\Http\\Controllers\\Controller')->afterLast('\\\\');\n\n    // 'Controller'\n\n<a name=\"method-fluent-str-append\"></a>\n#### `append` {.collection-method}\n\nThe `append` method appends the given values to the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Taylor')->append(' Otwell');\n\n    // 'Taylor Otwell'\n\n<a name=\"method-fluent-str-ascii\"></a>\n#### `ascii` {.collection-method}\n\nThe `ascii` method will attempt to transliterate the string into an ASCII value:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('ü')->ascii();\n\n    // 'u'\n\n<a name=\"method-fluent-str-basename\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1328,"to":1360}}}}],["3649",{"pageContent":"`basename` {.collection-method}\n\nThe `basename` method will return the trailing name component of the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('/foo/bar/baz')->basename();\n\n    // 'baz'\n\nIf needed, you may provide an \"extension\" that will be removed from the trailing component:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('/foo/bar/baz.jpg')->basename('.jpg');\n\n    // 'baz'\n\n<a name=\"method-fluent-str-before\"></a>\n#### `before` {.collection-method}\n\nThe `before` method returns everything before the given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::of('This is my name')->before('my name');\n\n    // 'This is '\n\n<a name=\"method-fluent-str-before-last\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1361,"to":1390}}}}],["3650",{"pageContent":"`beforeLast` {.collection-method}\n\nThe `beforeLast` method returns everything before the last occurrence of the given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $slice = Str::of('This is my name')->beforeLast('is');\n\n    // 'This '\n\n<a name=\"method-fluent-str-between\"></a>\n#### `between` {.collection-method}\n\nThe `between` method returns the portion of a string between two values:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::of('This is my name')->between('This', 'name');\n\n    // ' is my '\n\n<a name=\"method-fluent-str-between-first\"></a>\n#### `betweenFirst` {.collection-method}\n\nThe `betweenFirst` method returns the smallest possible portion of a string between two values:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::of('[a] bc [d]')->betweenFirst('[', ']');\n\n    // 'a'\n\n<a name=\"method-fluent-str-camel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1391,"to":1423}}}}],["3651",{"pageContent":"`camel` {.collection-method}\n\nThe `camel` method converts the given string to `camelCase`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::of('foo_bar')->camel();\n\n    // fooBar\n\n<a name=\"method-fluent-str-class-basename\"></a>\n#### `classBasename` {.collection-method}\n\nThe `classBasename` method returns the class name of the given class with the class's namespace removed:\n\n    use Illuminate\\Support\\Str;\n\n    $class = Str::of('Foo\\Bar\\Baz')->classBasename();\n\n    // Baz\n\n<a name=\"method-fluent-str-contains\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1424,"to":1445}}}}],["3652",{"pageContent":"`contains` {.collection-method}\n\nThe `contains` method determines if the given string contains the given value. This method is case sensitive:\n\n    use Illuminate\\Support\\Str;\n\n    $contains = Str::of('This is my name')->contains('my');\n\n    // true\n\nYou may also pass an array of values to determine if the given string contains any of the values in the array:\n\n    use Illuminate\\Support\\Str;\n\n    $contains = Str::of('This is my name')->contains(['my', 'foo']);\n\n    // true\n\n<a name=\"method-fluent-str-contains-all\"></a>\n#### `containsAll` {.collection-method}\n\nThe `containsAll` method determines if the given string contains all of the values in the given array:\n\n    use Illuminate\\Support\\Str;\n\n    $containsAll = Str::of('This is my name')->containsAll(['my', 'name']);\n\n    // true\n\n<a name=\"method-fluent-str-dirname\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1446,"to":1475}}}}],["3653",{"pageContent":"`dirname` {.collection-method}\n\nThe `dirname` method returns the parent directory portion of the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('/foo/bar/baz')->dirname();\n\n    // '/foo/bar'\n\nIf necessary, you may specify how many directory levels you wish to trim from the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('/foo/bar/baz')->dirname(2);\n\n    // '/foo'\n\n<a name=\"method-fluent-str-excerpt\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1476,"to":1494}}}}],["3654",{"pageContent":"`excerpt` {.collection-method}\n\nThe `excerpt` method extracts an excerpt from the string that matches the first instance of a phrase within that string:\n\n    use Illuminate\\Support\\Str;\n\n    $excerpt = Str::of('This is my name')->excerpt('my', [\n        'radius' => 3\n    ]);\n\n    // '...is my na...'\n\nThe `radius` option, which defaults to `100`, allows you to define the number of characters that should appear on each side of the truncated string.\n\nIn addition, you may use the `omission` option to change the string that will be prepended and appended to the truncated string:\n\n    use Illuminate\\Support\\Str;\n\n    $excerpt = Str::of('This is my name')->excerpt('name', [\n        'radius' => 3,\n        'omission' => '(...) '\n    ]);\n\n    // '(...) my name'\n\n<a name=\"method-fluent-str-ends-with\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1495,"to":1520}}}}],["3655",{"pageContent":"`endsWith` {.collection-method}\n\nThe `endsWith` method determines if the given string ends with the given value:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('This is my name')->endsWith('name');\n\n    // true\n\nYou may also pass an array of values to determine if the given string ends with any of the values in the array:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('This is my name')->endsWith(['name', 'foo']);\n\n    // true\n\n    $result = Str::of('This is my name')->endsWith(['this', 'foo']);\n\n    // false\n\n<a name=\"method-fluent-str-exactly\"></a>\n#### `exactly` {.collection-method}\n\nThe `exactly` method determines if the given string is an exact match with another string:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('Laravel')->exactly('Laravel');\n\n    // true\n\n<a name=\"method-fluent-str-explode\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1521,"to":1554}}}}],["3656",{"pageContent":"`explode` {.collection-method}\n\nThe `explode` method splits the string by the given delimiter and returns a collection containing each section of the split string:\n\n    use Illuminate\\Support\\Str;\n\n    $collection = Str::of('foo bar baz')->explode(' ');\n\n    // collect(['foo', 'bar', 'baz'])\n\n<a name=\"method-fluent-str-finish\"></a>\n#### `finish` {.collection-method}\n\nThe `finish` method adds a single instance of the given value to a string if it does not already end with that value:\n\n    use Illuminate\\Support\\Str;\n\n    $adjusted = Str::of('this/string')->finish('/');\n\n    // this/string/\n\n    $adjusted = Str::of('this/string/')->finish('/');\n\n    // this/string/\n\n<a name=\"method-fluent-str-headline\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1555,"to":1580}}}}],["3657",{"pageContent":"`headline` {.collection-method}\n\nThe `headline` method will convert strings delimited by casing, hyphens, or underscores into a space delimited string with each word's first letter capitalized:\n\n    use Illuminate\\Support\\Str;\n\n    $headline = Str::of('taylor_otwell')->headline();\n\n    // Taylor Otwell\n\n    $headline = Str::of('EmailNotificationSent')->headline();\n\n    // Email Notification Sent\n\n<a name=\"method-fluent-str-inline-markdown\"></a>\n#### `inlineMarkdown` {.collection-method}\n\nThe `inlineMarkdown` method converts GitHub flavored Markdown into inline HTML using [CommonMark](https://commonmark.thephpleague.com/). However, unlike the `markdown` method, it does not wrap all generated HTML in a block-level element:\n\n    use Illuminate\\Support\\Str;\n\n    $html = Str::of('**Laravel**')->inlineMarkdown();\n\n    // <strong>Laravel</strong>\n\n<a name=\"method-fluent-str-is\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1581,"to":1606}}}}],["3658",{"pageContent":"`is` {.collection-method}\n\nThe `is` method determines if a given string matches a given pattern. Asterisks may be used as wildcard values\n\n    use Illuminate\\Support\\Str;\n\n    $matches = Str::of('foobar')->is('foo*');\n\n    // true\n\n    $matches = Str::of('foobar')->is('baz*');\n\n    // false\n\n<a name=\"method-fluent-str-is-ascii\"></a>\n#### `isAscii` {.collection-method}\n\nThe `isAscii` method determines if a given string is an ASCII string:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('Taylor')->isAscii();\n\n    // true\n\n    $result = Str::of('ü')->isAscii();\n\n    // false\n\n<a name=\"method-fluent-str-is-empty\"></a>\n#### `isEmpty` {.collection-method}\n\nThe `isEmpty` method determines if the given string is empty:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('  ')->trim()->isEmpty();\n\n    // true\n\n    $result = Str::of('Laravel')->trim()->isEmpty();\n\n    // false\n\n<a name=\"method-fluent-str-is-not-empty\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1607,"to":1651}}}}],["3659",{"pageContent":"`isNotEmpty` {.collection-method}\n\nThe `isNotEmpty` method determines if the given string is not empty:\n\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('  ')->trim()->isNotEmpty();\n\n    // false\n\n    $result = Str::of('Laravel')->trim()->isNotEmpty();\n\n    // true\n\n<a name=\"method-fluent-str-is-json\"></a>\n#### `isJson` {.collection-method}\n\nThe `isJson` method determines if a given string is valid JSON:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('[1,2,3]')->isJson();\n\n    // true\n\n    $result = Str::of('{\"first\": \"John\", \"last\": \"Doe\"}')->isJson();\n\n    // true\n\n    $result = Str::of('{first: \"John\", last: \"Doe\"}')->isJson();\n\n    // false\n\n<a name=\"method-fluent-str-is-ulid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1652,"to":1686}}}}],["3660",{"pageContent":"`isUlid` {.collection-method}\n\nThe `isUlid` method determines if a given string is a ULID:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('01gd6r360bp37zj17nxb55yv40')->isUlid();\n\n    // true\n\n    $result = Str::of('Taylor')->isUlid();\n\n    // false\n\n<a name=\"method-fluent-str-is-url\"></a>\n#### `isUrl` {.collection-method}\n\nThe `isUrl` method determines if a given string is a URL:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('http://example.com')->isUrl();\n\n    // true\n\n    $result = Str::of('Taylor')->isUrl();\n\n    // false\n\n<a name=\"method-fluent-str-is-uuid\"></a>\n#### `isUuid` {.collection-method}\n\nThe `isUuid` method determines if a given string is a UUID:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('5ace9ab9-e9cf-4ec6-a19d-5881212a452c')->isUuid();\n\n    // true\n\n    $result = Str::of('Taylor')->isUuid();\n\n    // false\n\n<a name=\"method-fluent-str-kebab\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1687,"to":1731}}}}],["3661",{"pageContent":"`kebab` {.collection-method}\n\nThe `kebab` method converts the given string to `kebab-case`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::of('fooBar')->kebab();\n\n    // foo-bar\n\n<a name=\"method-fluent-str-lcfirst\"></a>\n#### `lcfirst` {.collection-method}\n\nThe `lcfirst` method returns the given string with the first character lowercased:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Foo Bar')->lcfirst();\n\n    // foo Bar\n\n\n<a name=\"method-fluent-str-length\"></a>\n#### `length` {.collection-method}\n\nThe `length` method returns the length of the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $length = Str::of('Laravel')->length();\n\n    // 7\n\n<a name=\"method-fluent-str-limit\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1732,"to":1765}}}}],["3662",{"pageContent":"`limit` {.collection-method}\n\nThe `limit` method truncates the given string to the specified length:\n\n    use Illuminate\\Support\\Str;\n\n    $truncated = Str::of('The quick brown fox jumps over the lazy dog')->limit(20);\n\n    // The quick brown fox...\n\nYou may also pass a second argument to change the string that will be appended to the end of the truncated string:\n\n    use Illuminate\\Support\\Str;\n\n    $truncated = Str::of('The quick brown fox jumps over the lazy dog')->limit(20, ' (...)');\n\n    // The quick brown fox (...)\n\n<a name=\"method-fluent-str-lower\"></a>\n#### `lower` {.collection-method}\n\nThe `lower` method converts the given string to lowercase:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('LARAVEL')->lower();\n\n    // 'laravel'\n\n<a name=\"method-fluent-str-ltrim\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1766,"to":1795}}}}],["3663",{"pageContent":"`ltrim` {.collection-method}\n\nThe `ltrim` method trims the left side of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('  Laravel  ')->ltrim();\n\n    // 'Laravel  '\n\n    $string = Str::of('/Laravel/')->ltrim('/');\n\n    // 'Laravel/'\n\n<a name=\"method-fluent-str-markdown\"></a>\n#### `markdown` {.collection-method}\n\nThe `markdown` method converts GitHub flavored Markdown into HTML:\n\n    use Illuminate\\Support\\Str;\n\n    $html = Str::of('# Laravel')->markdown();\n\n    // <h1>Laravel</h1>\n\n    $html = Str::of('# Taylor <b>Otwell</b>')->markdown([\n        'html_input' => 'strip',\n    ]);\n\n    // <h1>Taylor Otwell</h1>\n\n<a name=\"method-fluent-str-mask\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1796,"to":1827}}}}],["3664",{"pageContent":"`mask` {.collection-method}\n\nThe `mask` method masks a portion of a string with a repeated character, and may be used to obfuscate segments of strings such as email addresses and phone numbers:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('taylor@example.com')->mask('*', 3);\n\n    // tay***************\n\nIf needed, you may provide negative numbers as the third or fourth argument to the `mask` method, which will instruct the method to begin masking at the given distance from the end of the string:\n\n    $string = Str::of('taylor@example.com')->mask('*', -15, 3);\n\n    // tay***@example.com\n\n    $string = Str::of('taylor@example.com')->mask('*', 4, -4);\n\n    // tayl**********.com\n\n<a name=\"method-fluent-str-match\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1828,"to":1848}}}}],["3665",{"pageContent":"`match` {.collection-method}\n\nThe `match` method will return the portion of a string that matches a given regular expression pattern:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('foo bar')->match('/bar/');\n\n    // 'bar'\n\n    $result = Str::of('foo bar')->match('/foo (.*)/');\n\n    // 'bar'\n\n<a name=\"method-fluent-str-match-all\"></a>\n#### `matchAll` {.collection-method}\n\nThe `matchAll` method will return a collection containing the portions of a string that match a given regular expression pattern:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('bar foo bar')->matchAll('/bar/');\n\n    // collect(['bar', 'bar'])\n\nIf you specify a matching group within the expression, Laravel will return a collection of that group's matches:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('bar fun bar fly')->matchAll('/f(\\w*)/');\n\n    // collect(['un', 'ly']);\n\nIf no matches are found, an empty collection will be returned.\n\n<a name=\"method-fluent-str-is-match\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1849,"to":1884}}}}],["3666",{"pageContent":"`isMatch` {.collection-method}\n\nThe `isMatch` method will return `true` if the string matches a given regular expression:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('foo bar')->isMatch('/foo (.*)/');\n\n    // true\n\n    $result = Str::of('laravel')->isMatch('/foo (.*)/');\n\n    // false\n\n<a name=\"method-fluent-str-new-line\"></a>\n#### `newLine` {.collection-method}\n\nThe `newLine` method appends an \"end of line\" character to a string:\n\n    use Illuminate\\Support\\Str;\n\n    $padded = Str::of('Laravel')->newLine()->append('Framework');\n\n    // 'Laravel\n    //  Framework'\n\n<a name=\"method-fluent-str-padboth\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1885,"to":1911}}}}],["3667",{"pageContent":"`padBoth` {.collection-method}\n\nThe `padBoth` method wraps PHP's `str_pad` function, padding both sides of a string with another string until the final string reaches the desired length:\n\n    use Illuminate\\Support\\Str;\n\n    $padded = Str::of('James')->padBoth(10, '_');\n\n    // '__James___'\n\n    $padded = Str::of('James')->padBoth(10);\n\n    // '  James   '\n\n<a name=\"method-fluent-str-padleft\"></a>\n#### `padLeft` {.collection-method}\n\nThe `padLeft` method wraps PHP's `str_pad` function, padding the left side of a string with another string until the final string reaches the desired length:\n\n    use Illuminate\\Support\\Str;\n\n    $padded = Str::of('James')->padLeft(10, '-=');\n\n    // '-=-=-James'\n\n    $padded = Str::of('James')->padLeft(10);\n\n    // '     James'\n\n<a name=\"method-fluent-str-padright\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1912,"to":1941}}}}],["3668",{"pageContent":"`padRight` {.collection-method}\n\nThe `padRight` method wraps PHP's `str_pad` function, padding the right side of a string with another string until the final string reaches the desired length:\n\n    use Illuminate\\Support\\Str;\n\n    $padded = Str::of('James')->padRight(10, '-');\n\n    // 'James-----'\n\n    $padded = Str::of('James')->padRight(10);\n\n    // 'James     '\n\n<a name=\"method-fluent-str-pipe\"></a>\n#### `pipe` {.collection-method}\n\nThe `pipe` method allows you to transform the string by passing its current value to the given callable:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $hash = Str::of('Laravel')->pipe('md5')->prepend('Checksum: ');\n\n    // 'Checksum: a5c95b86291ea299fcbe64458ed12702'\n\n    $closure = Str::of('foo')->pipe(function (Stringable $str) {\n        return 'bar';\n    });\n\n    // 'bar'\n\n<a name=\"method-fluent-str-plural\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1942,"to":1974}}}}],["3669",{"pageContent":"`plural` {.collection-method}\n\nThe `plural` method converts a singular word string to its plural form. This function supports [any of the languages support by Laravel's pluralizer](/docs/{{version}}/localization#pluralization-language):\n\n    use Illuminate\\Support\\Str;\n\n    $plural = Str::of('car')->plural();\n\n    // cars\n\n    $plural = Str::of('child')->plural();\n\n    // children\n\nYou may provide an integer as a second argument to the function to retrieve the singular or plural form of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $plural = Str::of('child')->plural(2);\n\n    // children\n\n    $plural = Str::of('child')->plural(1);\n\n    // child\n\n<a name=\"method-fluent-str-position\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":1975,"to":2001}}}}],["3670",{"pageContent":"`position` {.collection-method}\n\nThe `position` method returns the position of the first occurrence of a substring in a string. If the substring does not exist within the string, `false` is returned:\n\n    use Illuminate\\Support\\Str;\n\n    $position = Str::of('Hello, World!')->position('Hello');\n\n    // 0\n\n    $position = Str::of('Hello, World!')->position('W');\n\n    // 7\n\n<a name=\"method-fluent-str-prepend\"></a>\n#### `prepend` {.collection-method}\n\nThe `prepend` method prepends the given values onto the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Framework')->prepend('Laravel ');\n\n    // Laravel Framework\n\n<a name=\"method-fluent-str-remove\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2002,"to":2027}}}}],["3671",{"pageContent":"`remove` {.collection-method}\n\nThe `remove` method removes the given value or array of values from the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Arkansas is quite beautiful!')->remove('quite');\n\n    // Arkansas is beautiful!\n\nYou may also pass `false` as a second parameter to ignore case when removing strings.\n\n<a name=\"method-fluent-str-repeat\"></a>\n#### `repeat` {.collection-method}\n\nThe `repeat` method repeats the given string:\n\n```php\nuse Illuminate\\Support\\Str;\n\n$repeated = Str::of('a')->repeat(5);\n\n// aaaaa\n```\n\n<a name=\"method-fluent-str-replace\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2028,"to":2053}}}}],["3672",{"pageContent":"`replace` {.collection-method}\n\nThe `replace` method replaces a given string within the string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::of('Laravel 6.x')->replace('6.x', '7.x');\n\n    // Laravel 7.x\n\nThe `replace` method also accepts a `caseSensitive` argument. By default, the `replace` method is case sensitive:\n\n    $replaced = Str::of('macOS 13.x')->replace(\n        'macOS', 'iOS', caseSensitive: false\n    );\n\n<a name=\"method-fluent-str-replace-array\"></a>\n#### `replaceArray` {.collection-method}\n\nThe `replaceArray` method replaces a given value in the string sequentially using an array:\n\n    use Illuminate\\Support\\Str;\n\n    $string = 'The event will take place between ? and ?';\n\n    $replaced = Str::of($string)->replaceArray('?', ['8:30', '9:00']);\n\n    // The event will take place between 8:30 and 9:00\n\n<a name=\"method-fluent-str-replace-first\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2054,"to":2083}}}}],["3673",{"pageContent":"`replaceFirst` {.collection-method}\n\nThe `replaceFirst` method replaces the first occurrence of a given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::of('the quick brown fox jumps over the lazy dog')->replaceFirst('the', 'a');\n\n    // a quick brown fox jumps over the lazy dog\n\n<a name=\"method-fluent-str-replace-last\"></a>\n#### `replaceLast` {.collection-method}\n\nThe `replaceLast` method replaces the last occurrence of a given value in a string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::of('the quick brown fox jumps over the lazy dog')->replaceLast('the', 'a');\n\n    // the quick brown fox jumps over a lazy dog\n\n<a name=\"method-fluent-str-replace-matches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2084,"to":2105}}}}],["3674",{"pageContent":"`replaceMatches` {.collection-method}\n\nThe `replaceMatches` method replaces all portions of a string matching a pattern with the given replacement string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::of('(+1) 501-555-1000')->replaceMatches('/[^A-Za-z0-9]++/', '')\n\n    // '15015551000'\n\nThe `replaceMatches` method also accepts a closure that will be invoked with each portion of the string matching the given pattern, allowing you to perform the replacement logic within the closure and return the replaced value:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::of('123')->replaceMatches('/\\d/', function (array $matches) {\n        return '['.$matches[0].']';\n    });\n\n    // '[1][2][3]'\n\n<a name=\"method-fluent-str-replace-start\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2106,"to":2126}}}}],["3675",{"pageContent":"`replaceStart` {.collection-method}\n\nThe `replaceStart` method replaces the first occurrence of the given value only if the value appears at the start of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::of('Hello World')->replaceStart('Hello', 'Laravel');\n\n    // Laravel World\n\n    $replaced = Str::of('Hello World')->replaceStart('World', 'Laravel');\n\n    // Hello World\n\n<a name=\"method-fluent-str-replace-end\"></a>\n#### `replaceEnd` {.collection-method}\n\nThe `replaceEnd` method replaces the last occurrence of the given value only if the value appears at the end of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $replaced = Str::of('Hello World')->replaceEnd('World', 'Laravel');\n\n    // Hello Laravel\n\n    $replaced = Str::of('Hello World')->replaceEnd('Hello', 'Laravel');\n\n    // Hello World\n\n<a name=\"method-fluent-str-rtrim\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2127,"to":2156}}}}],["3676",{"pageContent":"`rtrim` {.collection-method}\n\nThe `rtrim` method trims the right side of the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('  Laravel  ')->rtrim();\n\n    // '  Laravel'\n\n    $string = Str::of('/Laravel/')->rtrim('/');\n\n    // '/Laravel'\n\n<a name=\"method-fluent-str-scan\"></a>\n#### `scan` {.collection-method}\n\nThe `scan` method parses input from a string into a collection according to a format supported by the [`sscanf` PHP function](https://www.php.net/manual/en/function.sscanf.php):\n\n    use Illuminate\\Support\\Str;\n\n    $collection = Str::of('filename.jpg')->scan('%[^.].%s');\n\n    // collect(['filename', 'jpg'])\n\n<a name=\"method-fluent-str-singular\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2157,"to":2182}}}}],["3677",{"pageContent":"`singular` {.collection-method}\n\nThe `singular` method converts a string to its singular form. This function supports [any of the languages support by Laravel's pluralizer](/docs/{{version}}/localization#pluralization-language):\n\n    use Illuminate\\Support\\Str;\n\n    $singular = Str::of('cars')->singular();\n\n    // car\n\n    $singular = Str::of('children')->singular();\n\n    // child\n\n<a name=\"method-fluent-str-slug\"></a>\n#### `slug` {.collection-method}\n\nThe `slug` method generates a URL friendly \"slug\" from the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $slug = Str::of('Laravel Framework')->slug('-');\n\n    // laravel-framework\n\n<a name=\"method-fluent-str-snake\"></a>\n#### `snake` {.collection-method}\n\nThe `snake` method converts the given string to `snake_case`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::of('fooBar')->snake();\n\n    // foo_bar\n\n<a name=\"method-fluent-str-split\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2183,"to":2219}}}}],["3678",{"pageContent":"`split` {.collection-method}\n\nThe `split` method splits a string into a collection using a regular expression:\n\n    use Illuminate\\Support\\Str;\n\n    $segments = Str::of('one, two, three')->split('/[\\s,]+/');\n\n    // collect([\"one\", \"two\", \"three\"])\n\n<a name=\"method-fluent-str-squish\"></a>\n#### `squish` {.collection-method}\n\nThe `squish` method removes all extraneous white space from a string, including extraneous white space between words:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('    laravel    framework    ')->squish();\n\n    // laravel framework\n\n<a name=\"method-fluent-str-start\"></a>\n#### `start` {.collection-method}\n\nThe `start` method adds a single instance of the given value to a string if it does not already start with that value:\n\n    use Illuminate\\Support\\Str;\n\n    $adjusted = Str::of('this/string')->start('/');\n\n    // /this/string\n\n    $adjusted = Str::of('/this/string')->start('/');\n\n    // /this/string\n\n<a name=\"method-fluent-str-starts-with\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2220,"to":2256}}}}],["3679",{"pageContent":"`startsWith` {.collection-method}\n\nThe `startsWith` method determines if the given string begins with the given value:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('This is my name')->startsWith('This');\n\n    // true\n\n<a name=\"method-fluent-str-studly\"></a>\n#### `studly` {.collection-method}\n\nThe `studly` method converts the given string to `StudlyCase`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::of('foo_bar')->studly();\n\n    // FooBar\n\n<a name=\"method-fluent-str-substr\"></a>\n#### `substr` {.collection-method}\n\nThe `substr` method returns the portion of the string specified by the given start and length parameters:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Laravel Framework')->substr(8);\n\n    // Framework\n\n    $string = Str::of('Laravel Framework')->substr(8, 5);\n\n    // Frame\n\n<a name=\"method-fluent-str-substrreplace\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2257,"to":2293}}}}],["3680",{"pageContent":"`substrReplace` {.collection-method}\n\nThe `substrReplace` method replaces text within a portion of a string, starting at the position specified by the second argument and replacing the number of characters specified by the third argument. Passing `0` to the method's third argument will insert the string at the specified position without replacing any of the existing characters in the string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('1300')->substrReplace(':', 2);\n\n    // 13:\n\n    $string = Str::of('The Framework')->substrReplace(' Laravel', 3, 0);\n\n    // The Laravel Framework\n\n<a name=\"method-fluent-str-swap\"></a>\n#### `swap` {.collection-method}\n\nThe `swap` method replaces multiple values in the string using PHP's `strtr` function:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Tacos are great!')\n        ->swap([\n            'Tacos' => 'Burritos',\n            'great' => 'fantastic',\n        ]);\n\n    // Burritos are fantastic!\n\n<a name=\"method-fluent-str-take\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2294,"to":2323}}}}],["3681",{"pageContent":"`take` {.collection-method}\n\nThe `take` method returns a specified number of characters from the beginning of the string:\n\n    use Illuminate\\Support\\Str;\n\n    $taken = Str::of('Build something amazing!')->take(5);\n\n    // Build\n\n<a name=\"method-fluent-str-tap\"></a>\n#### `tap` {.collection-method}\n\nThe `tap` method passes the string to the given closure, allowing you to examine and interact with the string while not affecting the string itself. The original string is returned by the `tap` method regardless of what is returned by the closure:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('Laravel')\n        ->append(' Framework')\n        ->tap(function (Stringable $string) {\n            dump('String after append: '.$string);\n        })\n        ->upper();\n\n    // LARAVEL FRAMEWORK\n\n<a name=\"method-fluent-str-test\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2324,"to":2351}}}}],["3682",{"pageContent":"`test` {.collection-method}\n\nThe `test` method determines if a string matches the given regular expression pattern:\n\n    use Illuminate\\Support\\Str;\n\n    $result = Str::of('Laravel Framework')->test('/Laravel/');\n\n    // true\n\n<a name=\"method-fluent-str-title\"></a>\n#### `title` {.collection-method}\n\nThe `title` method converts the given string to `Title Case`:\n\n    use Illuminate\\Support\\Str;\n\n    $converted = Str::of('a nice title uses the correct case')->title();\n\n    // A Nice Title Uses The Correct Case\n\n<a name=\"method-fluent-str-trim\"></a>\n#### `trim` {.collection-method}\n\nThe `trim` method trims the given string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('  Laravel  ')->trim();\n\n    // 'Laravel'\n\n    $string = Str::of('/Laravel/')->trim('/');\n\n    // 'Laravel'\n\n<a name=\"method-fluent-str-ucfirst\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2352,"to":2388}}}}],["3683",{"pageContent":"`ucfirst` {.collection-method}\n\nThe `ucfirst` method returns the given string with the first character capitalized:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('foo bar')->ucfirst();\n\n    // Foo bar\n\n<a name=\"method-fluent-str-ucsplit\"></a>\n#### `ucsplit` {.collection-method}\n\nThe `ucsplit` method splits the given string into a collection by uppercase characters:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Foo Bar')->ucsplit();\n\n    // collect(['Foo', 'Bar'])\n\n<a name=\"method-fluent-str-upper\"></a>\n#### `upper` {.collection-method}\n\nThe `upper` method converts the given string to uppercase:\n\n    use Illuminate\\Support\\Str;\n\n    $adjusted = Str::of('laravel')->upper();\n\n    // LARAVEL\n\n<a name=\"method-fluent-str-when\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2389,"to":2421}}}}],["3684",{"pageContent":"`when` {.collection-method}\n\nThe `when` method invokes the given closure if a given condition is `true`. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('Taylor')\n                    ->when(true, function (Stringable $string) {\n                        return $string->append(' Otwell');\n                    });\n\n    // 'Taylor Otwell'\n\nIf necessary, you may pass another closure as the third parameter to the `when` method. This closure will execute if the condition parameter evaluates to `false`.\n\n<a name=\"method-fluent-str-when-contains\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2422,"to":2438}}}}],["3685",{"pageContent":"`whenContains` {.collection-method}\n\nThe `whenContains` method invokes the given closure if the string contains the given value. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('tony stark')\n                ->whenContains('tony', function (Stringable $string) {\n                    return $string->title();\n                });\n\n    // 'Tony Stark'\n\nIf necessary, you may pass another closure as the third parameter to the `when` method. This closure will execute if the string does not contain the given value.\n\nYou may also pass an array of values to determine if the given string contains any of the values in the array:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('tony stark')\n                ->whenContains(['tony', 'hulk'], function (Stringable $string) {\n                    return $string->title();\n                });\n\n    // Tony Stark","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2439,"to":2465}}}}],["3686",{"pageContent":"$string = Str::of('tony stark')\n                ->whenContains(['tony', 'hulk'], function (Stringable $string) {\n                    return $string->title();\n                });\n\n    // Tony Stark\n\n<a name=\"method-fluent-str-when-contains-all\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2465,"to":2472}}}}],["3687",{"pageContent":"`whenContainsAll` {.collection-method}\n\nThe `whenContainsAll` method invokes the given closure if the string contains all of the given sub-strings. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('tony stark')\n                    ->whenContainsAll(['tony', 'stark'], function (Stringable $string) {\n                        return $string->title();\n                    });\n\n    // 'Tony Stark'\n\nIf necessary, you may pass another closure as the third parameter to the `when` method. This closure will execute if the condition parameter evaluates to `false`.\n\n<a name=\"method-fluent-str-when-empty\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2473,"to":2489}}}}],["3688",{"pageContent":"`whenEmpty` {.collection-method}\n\nThe `whenEmpty` method invokes the given closure if the string is empty. If the closure returns a value, that value will also be returned by the `whenEmpty` method. If the closure does not return a value, the fluent string instance will be returned:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('  ')->whenEmpty(function (Stringable $string) {\n        return $string->trim()->prepend('Laravel');\n    });\n\n    // 'Laravel'\n\n<a name=\"method-fluent-str-when-not-empty\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2490,"to":2503}}}}],["3689",{"pageContent":"`whenNotEmpty` {.collection-method}\n\nThe `whenNotEmpty` method invokes the given closure if the string is not empty. If the closure returns a value, that value will also be returned by the `whenNotEmpty` method. If the closure does not return a value, the fluent string instance will be returned:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('Framework')->whenNotEmpty(function (Stringable $string) {\n        return $string->prepend('Laravel ');\n    });\n\n    // 'Laravel Framework'\n\n<a name=\"method-fluent-str-when-starts-with\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2504,"to":2517}}}}],["3690",{"pageContent":"`whenStartsWith` {.collection-method}\n\nThe `whenStartsWith` method invokes the given closure if the string starts with the given sub-string. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('disney world')->whenStartsWith('disney', function (Stringable $string) {\n        return $string->title();\n    });\n\n    // 'Disney World'\n\n<a name=\"method-fluent-str-when-ends-with\"></a>\n#### `whenEndsWith` {.collection-method}\n\nThe `whenEndsWith` method invokes the given closure if the string ends with the given sub-string. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('disney world')->whenEndsWith('world', function (Stringable $string) {\n        return $string->title();\n    });\n\n    // 'Disney World'\n\n<a name=\"method-fluent-str-when-exactly\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2518,"to":2545}}}}],["3691",{"pageContent":"`whenExactly` {.collection-method}\n\nThe `whenExactly` method invokes the given closure if the string exactly matches the given string. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('laravel')->whenExactly('laravel', function (Stringable $string) {\n        return $string->title();\n    });\n\n    // 'Laravel'\n\n<a name=\"method-fluent-str-when-not-exactly\"></a>\n#### `whenNotExactly` {.collection-method}\n\nThe `whenNotExactly` method invokes the given closure if the string does not exactly match the given string. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('framework')->whenNotExactly('laravel', function (Stringable $string) {\n        return $string->title();\n    });\n\n    // 'Framework'\n\n<a name=\"method-fluent-str-when-is\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2546,"to":2573}}}}],["3692",{"pageContent":"`whenIs` {.collection-method}\n\nThe `whenIs` method invokes the given closure if the string matches a given pattern. Asterisks may be used as wildcard values. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('foo/bar')->whenIs('foo/*', function (Stringable $string) {\n        return $string->append('/baz');\n    });\n\n    // 'foo/bar/baz'\n\n<a name=\"method-fluent-str-when-is-ascii\"></a>\n#### `whenIsAscii` {.collection-method}\n\nThe `whenIsAscii` method invokes the given closure if the string is 7 bit ASCII. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('laravel')->whenIsAscii(function (Stringable $string) {\n        return $string->title();\n    });\n\n    // 'Laravel'\n\n<a name=\"method-fluent-str-when-is-ulid\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2574,"to":2601}}}}],["3693",{"pageContent":"`whenIsUlid` {.collection-method}\n\nThe `whenIsUlid` method invokes the given closure if the string is a valid ULID. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('01gd6r360bp37zj17nxb55yv40')->whenIsUlid(function (Stringable $string) {\n        return $string->substr(0, 8);\n    });\n\n    // '01gd6r36'\n\n<a name=\"method-fluent-str-when-is-uuid\"></a>\n#### `whenIsUuid` {.collection-method}\n\nThe `whenIsUuid` method invokes the given closure if the string is a valid UUID. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('a0a2a2d2-0b87-4a18-83f2-2529882be2de')->whenIsUuid(function (Stringable $string) {\n        return $string->substr(0, 8);\n    });\n\n    // 'a0a2a2d2'\n\n<a name=\"method-fluent-str-when-test\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2602,"to":2628}}}}],["3694",{"pageContent":"`whenTest` {.collection-method}\n\nThe `whenTest` method invokes the given closure if the string matches the given regular expression. The closure will receive the fluent string instance:\n\n    use Illuminate\\Support\\Str;\n    use Illuminate\\Support\\Stringable;\n\n    $string = Str::of('laravel framework')->whenTest('/laravel/', function (Stringable $string) {\n        return $string->title();\n    });\n\n    // 'Laravel Framework'\n\n<a name=\"method-fluent-str-word-count\"></a>\n#### `wordCount` {.collection-method}\n\nThe `wordCount` method returns the number of words that a string contains:\n\n```php\nuse Illuminate\\Support\\Str;\n\nStr::of('Hello, world!')->wordCount(); // 2\n```\n\n<a name=\"method-fluent-str-words\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2629,"to":2653}}}}],["3695",{"pageContent":"`words` {.collection-method}\n\nThe `words` method limits the number of words in a string. If necessary, you may specify an additional string that will be appended to the truncated string:\n\n    use Illuminate\\Support\\Str;\n\n    $string = Str::of('Perfectly balanced, as all things should be.')->words(3, ' >>>');\n\n    // Perfectly balanced, as >>>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/strings.md","loc":{"lines":{"from":2654,"to":2662}}}}],["3696",{"pageContent":"# Directory Structure","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":1,"to":1}}}}],["3697",{"pageContent":"- [Introduction](#introduction)\n- [The Root Directory](#the-root-directory)\n    - [The `app` Directory](#the-root-app-directory)\n    - [The `bootstrap` Directory](#the-bootstrap-directory)\n    - [The `config` Directory](#the-config-directory)\n    - [The `database` Directory](#the-database-directory)\n    - [The `public` Directory](#the-public-directory)\n    - [The `resources` Directory](#the-resources-directory)\n    - [The `routes` Directory](#the-routes-directory)\n    - [The `storage` Directory](#the-storage-directory)\n    - [The `tests` Directory](#the-tests-directory)\n    - [The `vendor` Directory](#the-vendor-directory)\n- [The App Directory](#the-app-directory)\n    - [The `Broadcasting` Directory](#the-broadcasting-directory)\n    - [The `Console` Directory](#the-console-directory)\n    - [The `Events` Directory](#the-events-directory)\n    - [The `Exceptions` Directory](#the-exceptions-directory)\n    - [The `Http` Directory](#the-http-directory)\n    - [The `Jobs` Directory](#the-jobs-directory)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":3,"to":21}}}}],["3698",{"pageContent":"- [The `Exceptions` Directory](#the-exceptions-directory)\n    - [The `Http` Directory](#the-http-directory)\n    - [The `Jobs` Directory](#the-jobs-directory)\n    - [The `Listeners` Directory](#the-listeners-directory)\n    - [The `Mail` Directory](#the-mail-directory)\n    - [The `Models` Directory](#the-models-directory)\n    - [The `Notifications` Directory](#the-notifications-directory)\n    - [The `Policies` Directory](#the-policies-directory)\n    - [The `Providers` Directory](#the-providers-directory)\n    - [The `Rules` Directory](#the-rules-directory)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":21,"to":30}}}}],["3699",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":32,"to":32}}}}],["3700",{"pageContent":"Introduction\n\nThe default Laravel application structure is intended to provide a great starting point for both large and small applications. But you are free to organize your application however you like. Laravel imposes almost no restrictions on where any given class is located - as long as Composer can autoload the class.\n\n> **Note**\n> New to Laravel? Check out the [Laravel Bootcamp](https://bootcamp.laravel.com) for a hands-on tour of the framework while we walk you through building your first Laravel application.\n\n<a name=\"the-root-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":33,"to":40}}}}],["3701",{"pageContent":"The Root Directory\n\n<a name=\"the-root-app-directory\"></a>\n#### The App Directory\n\nThe `app` directory contains the core code of your application. We'll explore this directory in more detail soon; however, almost all of the classes in your application will be in this directory.\n\n<a name=\"the-bootstrap-directory\"></a>\n#### The Bootstrap Directory\n\nThe `bootstrap` directory contains the `app.php` file which bootstraps the framework. This directory also houses a `cache` directory which contains framework generated files for performance optimization such as the route and services cache files. You should not typically need to modify any files within this directory.\n\n<a name=\"the-config-directory\"></a>\n#### The Config Directory\n\nThe `config` directory, as the name implies, contains all of your application's configuration files. It's a great idea to read through all of these files and familiarize yourself with all of the options available to you.\n\n<a name=\"the-database-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":41,"to":58}}}}],["3702",{"pageContent":"The Database Directory\n\nThe `database` directory contains your database migrations, model factories, and seeds. If you wish, you may also use this directory to hold an SQLite database.\n\n<a name=\"the-public-directory\"></a>\n#### The Public Directory\n\nThe `public` directory contains the `index.php` file, which is the entry point for all requests entering your application and configures autoloading. This directory also houses your assets such as images, JavaScript, and CSS.\n\n<a name=\"the-resources-directory\"></a>\n#### The Resources Directory\n\nThe `resources` directory contains your [views](/docs/{{version}}/views) as well as your raw, un-compiled assets such as CSS or JavaScript.\n\n<a name=\"the-routes-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":59,"to":73}}}}],["3703",{"pageContent":"The Routes Directory\n\nThe `routes` directory contains all of the route definitions for your application. By default, several route files are included with Laravel: `web.php`, `api.php`, `console.php`, and `channels.php`.\n\nThe `web.php` file contains routes that the `RouteServiceProvider` places in the `web` middleware group, which provides session state, CSRF protection, and cookie encryption. If your application does not offer a stateless, RESTful API then all your routes will most likely be defined in the `web.php` file.\n\nThe `api.php` file contains routes that the `RouteServiceProvider` places in the `api` middleware group. These routes are intended to be stateless, so requests entering the application through these routes are intended to be authenticated [via tokens](/docs/{{version}}/sanctum) and will not have access to session state.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":74,"to":80}}}}],["3704",{"pageContent":"The `console.php` file is where you may define all of your closure based console commands. Each closure is bound to a command instance allowing a simple approach to interacting with each command's IO methods. Even though this file does not define HTTP routes, it defines console based entry points (routes) into your application.\n\nThe `channels.php` file is where you may register all of the [event broadcasting](/docs/{{version}}/broadcasting) channels that your application supports.\n\n<a name=\"the-storage-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":82,"to":86}}}}],["3705",{"pageContent":"The Storage Directory\n\nThe `storage` directory contains your logs, compiled Blade templates, file based sessions, file caches, and other files generated by the framework. This directory is segregated into `app`, `framework`, and `logs` directories. The `app` directory may be used to store any files generated by your application. The `framework` directory is used to store framework generated files and caches. Finally, the `logs` directory contains your application's log files.\n\nThe `storage/app/public` directory may be used to store user-generated files, such as profile avatars, that should be publicly accessible. You should create a symbolic link at `public/storage` which points to this directory. You may create the link using the `php artisan storage:link` Artisan command.\n\n<a name=\"the-tests-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":87,"to":93}}}}],["3706",{"pageContent":"The Tests Directory\n\nThe `tests` directory contains your automated tests. Example [PHPUnit](https://phpunit.de/) unit tests and feature tests are provided out of the box. Each test class should be suffixed with the word `Test`. You may run your tests using the `phpunit` or `php vendor/bin/phpunit` commands. Or, if you would like a more detailed and beautiful representation of your test results, you may run your tests using the `php artisan test` Artisan command.\n\n<a name=\"the-vendor-directory\"></a>\n#### The Vendor Directory\n\nThe `vendor` directory contains your [Composer](https://getcomposer.org) dependencies.\n\n<a name=\"the-app-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":94,"to":103}}}}],["3707",{"pageContent":"The App Directory\n\nThe majority of your application is housed in the `app` directory. By default, this directory is namespaced under `App` and is autoloaded by Composer using the [PSR-4 autoloading standard](https://www.php-fig.org/psr/psr-4/).\n\nThe `app` directory contains a variety of additional directories such as `Console`, `Http`, and `Providers`. Think of the `Console` and `Http` directories as providing an API into the core of your application. The HTTP protocol and CLI are both mechanisms to interact with your application, but do not actually contain application logic. In other words, they are two ways of issuing commands to your application. The `Console` directory contains all of your Artisan commands, while the `Http` directory contains your controllers, middleware, and requests.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":104,"to":108}}}}],["3708",{"pageContent":"A variety of other directories will be generated inside the `app` directory as you use the `make` Artisan commands to generate classes. So, for example, the `app/Jobs` directory will not exist until you execute the `make:job` Artisan command to generate a job class.\n\n> **Note**  \n> Many of the classes in the `app` directory can be generated by Artisan via commands. To review the available commands, run the `php artisan list make` command in your terminal.\n\n<a name=\"the-broadcasting-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":110,"to":115}}}}],["3709",{"pageContent":"The Broadcasting Directory\n\nThe `Broadcasting` directory contains all of the broadcast channel classes for your application. These classes are generated using the `make:channel` command. This directory does not exist by default, but will be created for you when you create your first channel. To learn more about channels, check out the documentation on [event broadcasting](/docs/{{version}}/broadcasting).\n\n<a name=\"the-console-directory\"></a>\n#### The Console Directory\n\nThe `Console` directory contains all of the custom Artisan commands for your application. These commands may be generated using the `make:command` command. This directory also houses your console kernel, which is where your custom Artisan commands are registered and your [scheduled tasks](/docs/{{version}}/scheduling) are defined.\n\n<a name=\"the-events-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":116,"to":125}}}}],["3710",{"pageContent":"The Events Directory\n\nThis directory does not exist by default, but will be created for you by the `event:generate` and `make:event` Artisan commands. The `Events` directory houses [event classes](/docs/{{version}}/events). Events may be used to alert other parts of your application that a given action has occurred, providing a great deal of flexibility and decoupling.\n\n<a name=\"the-exceptions-directory\"></a>\n#### The Exceptions Directory\n\nThe `Exceptions` directory contains your application's exception handler and is also a good place to place any exceptions thrown by your application. If you would like to customize how your exceptions are logged or rendered, you should modify the `Handler` class in this directory.\n\n<a name=\"the-http-directory\"></a>\n#### The Http Directory\n\nThe `Http` directory contains your controllers, middleware, and form requests. Almost all of the logic to handle requests entering your application will be placed in this directory.\n\n<a name=\"the-jobs-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":126,"to":140}}}}],["3711",{"pageContent":"The Jobs Directory\n\nThis directory does not exist by default, but will be created for you if you execute the `make:job` Artisan command. The `Jobs` directory houses the [queueable jobs](/docs/{{version}}/queues) for your application. Jobs may be queued by your application or run synchronously within the current request lifecycle. Jobs that run synchronously during the current request are sometimes referred to as \"commands\" since they are an implementation of the [command pattern](https://en.wikipedia.org/wiki/Command_pattern).\n\n<a name=\"the-listeners-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":141,"to":145}}}}],["3712",{"pageContent":"The Listeners Directory\n\nThis directory does not exist by default, but will be created for you if you execute the `event:generate` or `make:listener` Artisan commands. The `Listeners` directory contains the classes that handle your [events](/docs/{{version}}/events). Event listeners receive an event instance and perform logic in response to the event being fired. For example, a `UserRegistered` event might be handled by a `SendWelcomeEmail` listener.\n\n<a name=\"the-mail-directory\"></a>\n#### The Mail Directory\n\nThis directory does not exist by default, but will be created for you if you execute the `make:mail` Artisan command. The `Mail` directory contains all of your [classes that represent emails](/docs/{{version}}/mail) sent by your application. Mail objects allow you to encapsulate all of the logic of building an email in a single, simple class that may be sent using the `Mail::send` method.\n\n<a name=\"the-models-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":146,"to":155}}}}],["3713",{"pageContent":"The Models Directory\n\nThe `Models` directory contains all of your [Eloquent model classes](/docs/{{version}}/eloquent). The Eloquent ORM included with Laravel provides a beautiful, simple ActiveRecord implementation for working with your database. Each database table has a corresponding \"Model\" which is used to interact with that table. Models allow you to query for data in your tables, as well as insert new records into the table.\n\n<a name=\"the-notifications-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":156,"to":160}}}}],["3714",{"pageContent":"The Notifications Directory\n\nThis directory does not exist by default, but will be created for you if you execute the `make:notification` Artisan command. The `Notifications` directory contains all of the \"transactional\" [notifications](/docs/{{version}}/notifications) that are sent by your application, such as simple notifications about events that happen within your application. Laravel's notification feature abstracts sending notifications over a variety of drivers such as email, Slack, SMS, or stored in a database.\n\n<a name=\"the-policies-directory\"></a>\n#### The Policies Directory\n\nThis directory does not exist by default, but will be created for you if you execute the `make:policy` Artisan command. The `Policies` directory contains the [authorization policy classes](/docs/{{version}}/authorization) for your application. Policies are used to determine if a user can perform a given action against a resource.\n\n<a name=\"the-providers-directory\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":161,"to":170}}}}],["3715",{"pageContent":"The Providers Directory\n\nThe `Providers` directory contains all of the [service providers](/docs/{{version}}/providers) for your application. Service providers bootstrap your application by binding services in the service container, registering events, or performing any other tasks to prepare your application for incoming requests.\n\nIn a fresh Laravel application, this directory will already contain several providers. You are free to add your own providers to this directory as needed.\n\n<a name=\"the-rules-directory\"></a>\n#### The Rules Directory\n\nThis directory does not exist by default, but will be created for you if you execute the `make:rule` Artisan command. The `Rules` directory contains the custom validation rule objects for your application. Rules are used to encapsulate complicated validation logic in a simple object. For more information, check out the [validation documentation](/docs/{{version}}/validation).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/structure.md","loc":{"lines":{"from":171,"to":180}}}}],["3716",{"pageContent":"# Laravel Telescope","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":1,"to":1}}}}],["3717",{"pageContent":"- [Introduction](#introduction)\n- [Installation](#installation)\n    - [Local Only Installation](#local-only-installation)\n    - [Configuration](#configuration)\n    - [Data Pruning](#data-pruning)\n    - [Dashboard Authorization](#dashboard-authorization)\n- [Upgrading Telescope](#upgrading-telescope)\n- [Filtering](#filtering)\n    - [Entries](#filtering-entries)\n    - [Batches](#filtering-batches)\n- [Tagging](#tagging)\n- [Available Watchers](#available-watchers)\n    - [Batch Watcher](#batch-watcher)\n    - [Cache Watcher](#cache-watcher)\n    - [Command Watcher](#command-watcher)\n    - [Dump Watcher](#dump-watcher)\n    - [Event Watcher](#event-watcher)\n    - [Exception Watcher](#exception-watcher)\n    - [Gate Watcher](#gate-watcher)\n    - [HTTP Client Watcher](#http-client-watcher)\n    - [Job Watcher](#job-watcher)\n    - [Log Watcher](#log-watcher)\n    - [Mail Watcher](#mail-watcher)\n    - [Model Watcher](#model-watcher)\n    - [Notification Watcher](#notification-watcher)\n    - [Query Watcher](#query-watcher)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":3,"to":28}}}}],["3718",{"pageContent":"- [Log Watcher](#log-watcher)\n    - [Mail Watcher](#mail-watcher)\n    - [Model Watcher](#model-watcher)\n    - [Notification Watcher](#notification-watcher)\n    - [Query Watcher](#query-watcher)\n    - [Redis Watcher](#redis-watcher)\n    - [Request Watcher](#request-watcher)\n    - [Schedule Watcher](#schedule-watcher)\n    - [View Watcher](#view-watcher)\n- [Displaying User Avatars](#displaying-user-avatars)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":28,"to":37}}}}],["3719",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":39,"to":39}}}}],["3720",{"pageContent":"Introduction\n\n[Laravel Telescope](https://github.com/laravel/telescope) makes a wonderful companion to your local Laravel development environment. Telescope provides insight into the requests coming into your application, exceptions, log entries, database queries, queued jobs, mail, notifications, cache operations, scheduled tasks, variable dumps, and more.\n\n<img src=\"https://laravel.com/img/docs/telescope-example.png\">\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":40,"to":46}}}}],["3721",{"pageContent":"Installation\n\nYou may use the Composer package manager to install Telescope into your Laravel project:\n\n```shell\ncomposer require laravel/telescope\n```\n\nAfter installing Telescope, publish its assets using the `telescope:install` Artisan command. After installing Telescope, you should also run the `migrate` command in order to create the tables needed to store Telescope's data:\n\n```shell\nphp artisan telescope:install\n\nphp artisan migrate\n```\n\n<a name=\"migration-customization\"></a>\n#### Migration Customization\n\nIf you are not going to use Telescope's default migrations, you should call the `Telescope::ignoreMigrations` method in the `register` method of your application's `App\\Providers\\AppServiceProvider` class. You may export the default migrations using the following command: `php artisan vendor:publish --tag=telescope-migrations`\n\n<a name=\"local-only-installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":47,"to":68}}}}],["3722",{"pageContent":"Local Only Installation\n\nIf you plan to only use Telescope to assist your local development, you may install Telescope using the `--dev` flag:\n\n```shell\ncomposer require laravel/telescope --dev\n\nphp artisan telescope:install\n\nphp artisan migrate","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":69,"to":78}}}}],["3723",{"pageContent":"After running `telescope:install`, you should remove the `TelescopeServiceProvider` service provider registration from your application's `config/app.php` configuration file. Instead, manually register Telescope's service providers in the `register` method of your `App\\Providers\\AppServiceProvider` class. We will ensure the current environment is `local` before registering the providers:\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        if ($this->app->environment('local')) {\n            $this->app->register(\\Laravel\\Telescope\\TelescopeServiceProvider::class);\n            $this->app->register(TelescopeServiceProvider::class);\n        }\n    }\n\nFinally, you should also prevent the Telescope package from being [auto-discovered](/docs/{{version}}/packages#package-discovery) by adding the following to your `composer.json` file:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":81,"to":94}}}}],["3724",{"pageContent":"Finally, you should also prevent the Telescope package from being [auto-discovered](/docs/{{version}}/packages#package-discovery) by adding the following to your `composer.json` file:\n\n```json\n\"extra\": {\n    \"laravel\": {\n        \"dont-discover\": [\n            \"laravel/telescope\"\n        ]\n    }\n},","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":94,"to":103}}}}],["3725",{"pageContent":"<a name=\"configuration\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":106,"to":106}}}}],["3726",{"pageContent":"Configuration\n\nAfter publishing Telescope's assets, its primary configuration file will be located at `config/telescope.php`. This configuration file allows you to configure your [watcher options](#available-watchers). Each configuration option includes a description of its purpose, so be sure to thoroughly explore this file.\n\nIf desired, you may disable Telescope's data collection entirely using the `enabled` configuration option:\n\n    'enabled' => env('TELESCOPE_ENABLED', true),\n\n<a name=\"data-pruning\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":107,"to":115}}}}],["3727",{"pageContent":"Data Pruning\n\nWithout pruning, the `telescope_entries` table can accumulate records very quickly. To mitigate this, you should [schedule](/docs/{{version}}/scheduling) the `telescope:prune` Artisan command to run daily:\n\n    $schedule->command('telescope:prune')->daily();\n\nBy default, all entries older than 24 hours will be pruned. You may use the `hours` option when calling the command to determine how long to retain Telescope data. For example, the following command will delete all records created over 48 hours ago:\n\n    $schedule->command('telescope:prune --hours=48')->daily();\n\n<a name=\"dashboard-authorization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":116,"to":126}}}}],["3728",{"pageContent":"Dashboard Authorization\n\nThe Telescope dashboard may be accessed at the `/telescope` route. By default, you will only be able to access this dashboard in the `local` environment. Within your `app/Providers/TelescopeServiceProvider.php` file, there is an [authorization gate](/docs/{{version}}/authorization#gates) definition. This authorization gate controls access to Telescope in **non-local** environments. You are free to modify this gate as needed to restrict access to your Telescope installation:\n\n    use App\\Models\\User;\n\n    /**\n     * Register the Telescope gate.\n     *\n     * This gate determines who can access Telescope in non-local environments.\n     */\n    protected function gate(): void\n    {\n        Gate::define('viewTelescope', function (User $user) {\n            return in_array($user->email, [\n                'taylor@laravel.com',\n            ]);\n        });\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":127,"to":145}}}}],["3729",{"pageContent":"> **Warning**  \n> You should ensure you change your `APP_ENV` environment variable to `production` in your production environment. Otherwise, your Telescope installation will be publicly available.\n\n<a name=\"upgrading-telescope\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":147,"to":150}}}}],["3730",{"pageContent":"Upgrading Telescope\n\nWhen upgrading to a new major version of Telescope, it's important that you carefully review [the upgrade guide](https://github.com/laravel/telescope/blob/master/UPGRADE.md).\n\nIn addition, when upgrading to any new Telescope version, you should re-publish Telescope's assets:\n\n```shell\nphp artisan telescope:publish\n```\n\nTo keep the assets up-to-date and avoid issues in future updates, you may add the `vendor:publish --tag=laravel-assets` command to the `post-update-cmd` scripts in your application's `composer.json` file:\n\n```json\n{\n    \"scripts\": {\n        \"post-update-cmd\": [\n            \"@php artisan vendor:publish --tag=laravel-assets --ansi --force\"\n        ]\n    }\n}\n```\n\n<a name=\"filtering\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":151,"to":173}}}}],["3731",{"pageContent":"Filtering\n\n<a name=\"filtering-entries\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":174,"to":176}}}}],["3732",{"pageContent":"Entries\n\nYou may filter the data that is recorded by Telescope via the `filter` closure that is defined in your `App\\Providers\\TelescopeServiceProvider` class. By default, this closure records all data in the `local` environment and exceptions, failed jobs, scheduled tasks, and data with monitored tags in all other environments:\n\n    use Laravel\\Telescope\\IncomingEntry;\n    use Laravel\\Telescope\\Telescope;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->hideSensitiveRequestDetails();\n\n        Telescope::filter(function (IncomingEntry $entry) {\n            if ($this->app->environment('local')) {\n                return true;\n            }\n\n            return $entry->isReportableException() ||\n                $entry->isFailedJob() ||\n                $entry->isScheduledTask() ||\n                $entry->isSlowQuery() ||\n                $entry->hasMonitoredTag();\n        });\n    }\n\n<a name=\"filtering-batches\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":177,"to":204}}}}],["3733",{"pageContent":"Batches\n\nWhile the `filter` closure filters data for individual entries, you may use the `filterBatch` method to register a closure that filters all data for a given request or console command. If the closure returns `true`, all of the entries are recorded by Telescope:\n\n    use Illuminate\\Support\\Collection;\n    use Laravel\\Telescope\\IncomingEntry;\n    use Laravel\\Telescope\\Telescope;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->hideSensitiveRequestDetails();\n\n        Telescope::filterBatch(function (Collection $entries) {\n            if ($this->app->environment('local')) {\n                return true;\n            }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":205,"to":223}}}}],["3734",{"pageContent":"Telescope::filterBatch(function (Collection $entries) {\n            if ($this->app->environment('local')) {\n                return true;\n            }\n\n            return $entries->contains(function (IncomingEntry $entry) {\n                return $entry->isReportableException() ||\n                    $entry->isFailedJob() ||\n                    $entry->isScheduledTask() ||\n                    $entry->isSlowQuery() ||\n                    $entry->hasMonitoredTag();\n                });\n        });\n    }\n\n<a name=\"tagging\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":223,"to":238}}}}],["3735",{"pageContent":"Tagging\n\nTelescope allows you to search entries by \"tag\". Often, tags are Eloquent model class names or authenticated user IDs which Telescope automatically adds to entries. Occasionally, you may want to attach your own custom tags to entries. To accomplish this, you may use the `Telescope::tag` method. The `tag` method accepts a closure which should return an array of tags. The tags returned by the closure will be merged with any tags Telescope would automatically attach to the entry. Typically, you should call the `tag` method within the `register` method of your `App\\Providers\\TelescopeServiceProvider` class:\n\n    use Laravel\\Telescope\\IncomingEntry;\n    use Laravel\\Telescope\\Telescope;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->hideSensitiveRequestDetails();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":239,"to":251}}}}],["3736",{"pageContent":"/**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        $this->hideSensitiveRequestDetails();\n\n        Telescope::tag(function (IncomingEntry $entry) {\n            return $entry->type === 'request'\n                        ? ['status:'.$entry->content['response_status']]\n                        : [];\n        });\n     }\n\n<a name=\"available-watchers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":251,"to":265}}}}],["3737",{"pageContent":"Available Watchers\n\nTelescope \"watchers\" gather application data when a request or console command is executed. You may customize the list of watchers that you would like to enable within your `config/telescope.php` configuration file:\n\n    'watchers' => [\n        Watchers\\CacheWatcher::class => true,\n        Watchers\\CommandWatcher::class => true,\n        ...\n    ],\n\nSome watchers also allow you to provide additional customization options:\n\n    'watchers' => [\n        Watchers\\QueryWatcher::class => [\n            'enabled' => env('TELESCOPE_QUERY_WATCHER', true),\n            'slow' => 100,\n        ],\n        ...\n    ],\n\n<a name=\"batch-watcher\"></a>\n### Batch Watcher\n\nThe batch watcher records information about queued [batches](/docs/{{version}}/queues#job-batching), including the job and connection information.\n\n<a name=\"cache-watcher\"></a>\n### Cache Watcher\n\nThe cache watcher records data when a cache key is hit, missed, updated and forgotten.\n\n<a name=\"command-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":266,"to":296}}}}],["3738",{"pageContent":"Cache Watcher\n\nThe cache watcher records data when a cache key is hit, missed, updated and forgotten.\n\n<a name=\"command-watcher\"></a>\n### Command Watcher\n\nThe command watcher records the arguments, options, exit code, and output whenever an Artisan command is executed. If you would like to exclude certain commands from being recorded by the watcher, you may specify the command in the `ignore` option within your `config/telescope.php` file:\n\n    'watchers' => [\n        Watchers\\CommandWatcher::class => [\n            'enabled' => env('TELESCOPE_COMMAND_WATCHER', true),\n            'ignore' => ['key:generate'],\n        ],\n        ...\n    ],\n\n<a name=\"dump-watcher\"></a>\n### Dump Watcher\n\nThe dump watcher records and displays your variable dumps in Telescope. When using Laravel, variables may be dumped using the global `dump` function. The dump watcher tab must be open in a browser for the dump to be recorded, otherwise, the dumps will be ignored by the watcher.\n\n<a name=\"event-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":296,"to":318}}}}],["3739",{"pageContent":"Event Watcher\n\nThe event watcher records the payload, listeners, and broadcast data for any [events](/docs/{{version}}/events) dispatched by your application. The Laravel framework's internal events are ignored by the Event watcher.\n\n<a name=\"exception-watcher\"></a>\n### Exception Watcher\n\nThe exception watcher records the data and stack trace for any reportable exceptions that are thrown by your application.\n\n<a name=\"gate-watcher\"></a>\n### Gate Watcher\n\nThe gate watcher records the data and result of [gate and policy](/docs/{{version}}/authorization) checks by your application. If you would like to exclude certain abilities from being recorded by the watcher, you may specify those in the `ignore_abilities` option in your `config/telescope.php` file:\n\n    'watchers' => [\n        Watchers\\GateWatcher::class => [\n            'enabled' => env('TELESCOPE_GATE_WATCHER', true),\n            'ignore_abilities' => ['viewNova'],\n        ],\n        ...\n    ],\n\n<a name=\"http-client-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":319,"to":341}}}}],["3740",{"pageContent":"HTTP Client Watcher\n\nThe HTTP client watcher records outgoing [HTTP client requests](/docs/{{version}}/http-client) made by your application.\n\n<a name=\"job-watcher\"></a>\n### Job Watcher\n\nThe job watcher records the data and status of any [jobs](/docs/{{version}}/queues) dispatched by your application.\n\n<a name=\"log-watcher\"></a>\n### Log Watcher\n\nThe log watcher records the [log data](/docs/{{version}}/logging) for any logs written by your application.\n\nBy default, Telescope will only record logs at the `error` level and above. However, you can modify the `level` option in your application's `config/telescope.php` configuration file to modify this behavior:\n\n    'watchers' => [\n        Watchers\\LogWatcher::class => [\n            'enabled' => env('TELESCOPE_LOG_WATCHER', true),\n            'level' => 'debug',\n        ],\n\n        // ...\n    ],\n\n<a name=\"mail-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":342,"to":367}}}}],["3741",{"pageContent":"Mail Watcher\n\nThe mail watcher allows you to view an in-browser preview of [emails](/docs/{{version}}/mail) sent by your application along with their associated data. You may also download the email as an `.eml` file.\n\n<a name=\"model-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":368,"to":372}}}}],["3742",{"pageContent":"Model Watcher\n\nThe model watcher records model changes whenever an Eloquent [model event](/docs/{{version}}/eloquent#events) is dispatched. You may specify which model events should be recorded via the watcher's `events` option:\n\n    'watchers' => [\n        Watchers\\ModelWatcher::class => [\n            'enabled' => env('TELESCOPE_MODEL_WATCHER', true),\n            'events' => ['eloquent.created*', 'eloquent.updated*'],\n        ],\n        ...\n    ],\n\nIf you would like to record the number of models hydrated during a given request, enable the `hydrations` option:\n\n    'watchers' => [\n        Watchers\\ModelWatcher::class => [\n            'enabled' => env('TELESCOPE_MODEL_WATCHER', true),\n            'events' => ['eloquent.created*', 'eloquent.updated*'],\n            'hydrations' => true,\n        ],\n        ...\n    ],\n\n<a name=\"notification-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":373,"to":396}}}}],["3743",{"pageContent":"Notification Watcher\n\nThe notification watcher records all [notifications](/docs/{{version}}/notifications) sent by your application. If the notification triggers an email and you have the mail watcher enabled, the email will also be available for preview on the mail watcher screen.\n\n<a name=\"query-watcher\"></a>\n### Query Watcher\n\nThe query watcher records the raw SQL, bindings, and execution time for all queries that are executed by your application. The watcher also tags any queries slower than 100 milliseconds as `slow`. You may customize the slow query threshold using the watcher's `slow` option:\n\n    'watchers' => [\n        Watchers\\QueryWatcher::class => [\n            'enabled' => env('TELESCOPE_QUERY_WATCHER', true),\n            'slow' => 50,\n        ],\n        ...\n    ],\n\n<a name=\"redis-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":397,"to":414}}}}],["3744",{"pageContent":"Redis Watcher\n\nThe Redis watcher records all [Redis](/docs/{{version}}/redis) commands executed by your application. If you are using Redis for caching, cache commands will also be recorded by the Redis watcher.\n\n<a name=\"request-watcher\"></a>\n### Request Watcher\n\nThe request watcher records the request, headers, session, and response data associated with any requests handled by the application. You may limit your recorded response data via the `size_limit` (in kilobytes) option:\n\n    'watchers' => [\n        Watchers\\RequestWatcher::class => [\n            'enabled' => env('TELESCOPE_REQUEST_WATCHER', true),\n            'size_limit' => env('TELESCOPE_RESPONSE_SIZE_LIMIT', 64),\n        ],\n        ...\n    ],\n\n<a name=\"schedule-watcher\"></a>\n### Schedule Watcher\n\nThe schedule watcher records the command and output of any [scheduled tasks](/docs/{{version}}/scheduling) run by your application.\n\n<a name=\"view-watcher\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":415,"to":437}}}}],["3745",{"pageContent":"Schedule Watcher\n\nThe schedule watcher records the command and output of any [scheduled tasks](/docs/{{version}}/scheduling) run by your application.\n\n<a name=\"view-watcher\"></a>\n### View Watcher\n\nThe view watcher records the [view](/docs/{{version}}/views) name, path, data, and \"composers\" used when rendering views.\n\n<a name=\"displaying-user-avatars\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":437,"to":446}}}}],["3746",{"pageContent":"Displaying User Avatars\n\nThe Telescope dashboard displays the user avatar for the user that was authenticated when a given entry was saved. By default, Telescope will retrieve avatars using the Gravatar web service. However, you may customize the avatar URL by registering a callback in your `App\\Providers\\TelescopeServiceProvider` class. The callback will receive the user's ID and email address and should return the user's avatar image URL:\n\n    use App\\Models\\User;\n    use Laravel\\Telescope\\Telescope;\n\n    /**\n     * Register any application services.\n     */\n    public function register(): void\n    {\n        // ...\n\n        Telescope::avatar(function (string $id, string $email) {\n            return '/avatars/'.User::find($id)->avatar_path;\n        });\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/telescope.md","loc":{"lines":{"from":447,"to":464}}}}],["3747",{"pageContent":"# Testing: Getting Started\n\n- [Introduction](#introduction)\n- [Environment](#environment)\n- [Creating Tests](#creating-tests)\n- [Running Tests](#running-tests)\n    - [Running Tests In Parallel](#running-tests-in-parallel)\n    - [Reporting Test Coverage](#reporting-test-coverage)\n    - [Profiling Tests](#profiling-tests)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":1,"to":11}}}}],["3748",{"pageContent":"Introduction\n\nLaravel is built with testing in mind. In fact, support for testing with PHPUnit is included out of the box and a `phpunit.xml` file is already set up for your application. The framework also ships with convenient helper methods that allow you to expressively test your applications.\n\nBy default, your application's `tests` directory contains two directories: `Feature` and `Unit`. Unit tests are tests that focus on a very small, isolated portion of your code. In fact, most unit tests probably focus on a single method. Tests within your \"Unit\" test directory do not boot your Laravel application and therefore are unable to access your application's database or other framework services.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":12,"to":16}}}}],["3749",{"pageContent":"Feature tests may test a larger portion of your code, including how several objects interact with each other or even a full HTTP request to a JSON endpoint. **Generally, most of your tests should be feature tests. These types of tests provide the most confidence that your system as a whole is functioning as intended.**\n\nAn `ExampleTest.php` file is provided in both the `Feature` and `Unit` test directories. After installing a new Laravel application, execute the `vendor/bin/phpunit` or `php artisan test` commands to run your tests.\n\n<a name=\"environment\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":18,"to":22}}}}],["3750",{"pageContent":"Environment\n\nWhen running tests, Laravel will automatically set the [configuration environment](/docs/{{version}}/configuration#environment-configuration) to `testing` because of the environment variables defined in the `phpunit.xml` file. Laravel also automatically configures the session and cache to the `array` driver while testing, meaning no session or cache data will be persisted while testing.\n\nYou are free to define other testing environment configuration values as necessary. The `testing` environment variables may be configured in your application's `phpunit.xml` file, but make sure to clear your configuration cache using the `config:clear` Artisan command before running your tests!\n\n<a name=\"the-env-testing-environment-file\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":23,"to":29}}}}],["3751",{"pageContent":"The `.env.testing` Environment File\n\nIn addition, you may create a `.env.testing` file in the root of your project. This file will be used instead of the `.env` file when running PHPUnit tests or executing Artisan commands with the `--env=testing` option.\n\n<a name=\"the-creates-application-trait\"></a>\n#### The `CreatesApplication` Trait\n\nLaravel includes a `CreatesApplication` trait that is applied to your application's base `TestCase` class. This trait contains a `createApplication` method that bootstraps the Laravel application before running your tests. It's important that you leave this trait at its original location as some features, such as Laravel's parallel testing feature, depend on it.\n\n<a name=\"creating-tests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":30,"to":39}}}}],["3752",{"pageContent":"Creating Tests\n\nTo create a new test case, use the `make:test` Artisan command. By default, tests will be placed in the `tests/Feature` directory:\n\n```shell\nphp artisan make:test UserTest\n```\n\nIf you would like to create a test within the `tests/Unit` directory, you may use the `--unit` option when executing the `make:test` command:\n\n```shell\nphp artisan make:test UserTest --unit\n```\n\nIf you would like to create a [Pest PHP](https://pestphp.com) test, you may provide the `--pest` option to the `make:test` command:\n\n```shell\nphp artisan make:test UserTest --pest\nphp artisan make:test UserTest --unit --pest","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":40,"to":58}}}}],["3753",{"pageContent":"> **Note**  \n> Test stubs may be customized using [stub publishing](/docs/{{version}}/artisan#stub-customization).\n\nOnce the test has been generated, you may define test methods as you normally would using [PHPUnit](https://phpunit.de). To run your tests, execute the `vendor/bin/phpunit` or `php artisan test` command from your terminal:\n\n    <?php\n\n    namespace Tests\\Unit;\n\n    use PHPUnit\\Framework\\TestCase;\n\n    class ExampleTest extends TestCase\n    {\n        /**\n         * A basic test example.\n         */\n        public function test_basic_test(): void\n        {\n            $this->assertTrue(true);\n        }\n    }\n\n> **Warning**  \n> If you define your own `setUp` / `tearDown` methods within a test class, be sure to call the respective `parent::setUp()` / `parent::tearDown()` methods on the parent class.\n\n<a name=\"running-tests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":61,"to":86}}}}],["3754",{"pageContent":"Running Tests\n\nAs mentioned previously, once you've written tests, you may run them using `phpunit`:\n\n```shell\n./vendor/bin/phpunit\n```\n\nIn addition to the `phpunit` command, you may use the `test` Artisan command to run your tests. The Artisan test runner provides verbose test reports in order to ease development and debugging:\n\n```shell\nphp artisan test\n```\n\nAny arguments that can be passed to the `phpunit` command may also be passed to the Artisan `test` command:\n\n```shell\nphp artisan test --testsuite=Feature --stop-on-failure\n```\n\n<a name=\"running-tests-in-parallel\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":87,"to":107}}}}],["3755",{"pageContent":"Running Tests In Parallel\n\nBy default, Laravel and PHPUnit execute your tests sequentially within a single process. However, you may greatly reduce the amount of time it takes to run your tests by running tests simultaneously across multiple processes. To get started, you should install the `brianium/paratest` Composer package as a \"dev\" dependency. Then, include the `--parallel` option when executing the `test` Artisan command:\n\n```shell\ncomposer require brianium/paratest --dev\n\nphp artisan test --parallel\n```\n\nBy default, Laravel will create as many processes as there are available CPU cores on your machine. However, you may adjust the number of processes using the `--processes` option:\n\n```shell\nphp artisan test --parallel --processes=4\n```\n\n> **Warning**  \n> When running tests in parallel, some PHPUnit options (such as `--do-not-cache-result`) may not be available.\n\n<a name=\"parallel-testing-and-databases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":108,"to":127}}}}],["3756",{"pageContent":"Parallel Testing & Databases\n\nAs long as you have configured a primary database connection, Laravel automatically handles creating and migrating a test database for each parallel process that is running your tests. The test databases will be suffixed with a process token which is unique per process. For example, if you have two parallel test processes, Laravel will create and use `your_db_test_1` and `your_db_test_2` test databases.\n\nBy default, test databases persist between calls to the `test` Artisan command so that they can be used again by subsequent `test` invocations. However, you may re-create them using the `--recreate-databases` option:\n\n```shell\nphp artisan test --parallel --recreate-databases\n```\n\n<a name=\"parallel-testing-hooks\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":128,"to":138}}}}],["3757",{"pageContent":"Parallel Testing Hooks\n\nOccasionally, you may need to prepare certain resources used by your application's tests so they may be safely used by multiple test processes.\n\nUsing the `ParallelTesting` facade, you may specify code to be executed on the `setUp` and `tearDown` of a process or test case. The given closures receive the `$token` and `$testCase` variables that contain the process token and the current test case, respectively:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\Artisan;\n    use Illuminate\\Support\\Facades\\ParallelTesting;\n    use Illuminate\\Support\\ServiceProvider;\n    use PHPUnit\\Framework\\TestCase;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            ParallelTesting::setUpProcess(function (int $token) {\n                // ...\n            });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":139,"to":163}}}}],["3758",{"pageContent":"ParallelTesting::setUpTestCase(function (int $token, TestCase $testCase) {\n                // ...\n            });\n\n            // Executed when a test database is created...\n            ParallelTesting::setUpTestDatabase(function (string $database, int $token) {\n                Artisan::call('db:seed');\n            });\n\n            ParallelTesting::tearDownTestCase(function (int $token, TestCase $testCase) {\n                // ...\n            });\n\n            ParallelTesting::tearDownProcess(function (int $token) {\n                // ...\n            });\n        }\n    }\n\n<a name=\"accessing-the-parallel-testing-token\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":165,"to":184}}}}],["3759",{"pageContent":"Accessing The Parallel Testing Token\n\nIf you would like to access the current parallel process \"token\" from any other location in your application's test code, you may use the `token` method. This token is a unique, string identifier for an individual test process and may be used to segment resources across parallel test processes. For example, Laravel automatically appends this token to the end of the test databases created by each parallel testing process:\n\n    $token = ParallelTesting::token();\n\n<a name=\"reporting-test-coverage\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":185,"to":191}}}}],["3760",{"pageContent":"Reporting Test Coverage\n\n> **Warning**  \n> This feature requires [Xdebug](https://xdebug.org) or [PCOV](https://pecl.php.net/package/pcov).\n\nWhen running your application tests, you may want to determine whether your test cases are actually covering the application code and how much application code is used when running your tests. To accomplish this, you may provide the `--coverage` option when invoking the `test` command:\n\n```shell\nphp artisan test --coverage\n```\n\n<a name=\"enforcing-a-minimum-coverage-threshold\"></a>\n#### Enforcing A Minimum Coverage Threshold\n\nYou may use the `--min` option to define a minimum test coverage threshold for your application. The test suite will fail if this threshold is not met:\n\n```shell\nphp artisan test --coverage --min=80.3\n```\n\n<a name=\"profiling-tests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":192,"to":212}}}}],["3761",{"pageContent":"Profiling Tests\n\nThe Artisan test runner also includes a convenient mechanism for listing your application's slowest tests. Invoke the `test` command with the `--profile` option to be presented with a list of your ten slowest tests, allowing you to easily investigate which tests can be improved to speed up your test suite:\n\n```shell\nphp artisan test --profile\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/testing.md","loc":{"lines":{"from":213,"to":219}}}}],["3762",{"pageContent":"# Upgrade Guide\n\n- [Upgrading To 10.0 From 9.x](#upgrade-10.0)\n\n<a name=\"high-impact-changes\"></a>\n## High Impact Changes\n\n<div class=\"content-list\" markdown=\"1\">\n\n- [Updating Dependencies](#updating-dependencies)\n- [Updating Minimum Stability](#updating-minimum-stability)\n\n</div>\n\n<a name=\"medium-impact-changes\"></a>\n## Medium Impact Changes\n\n<div class=\"content-list\" markdown=\"1\">\n\n- [Database Expressions](#database-expressions)\n- [Model \"Dates\" Property](#model-dates-property)\n- [Monolog 3](#monolog-3)\n- [Redis Cache Tags](#redis-cache-tags)\n- [Service Mocking](#service-mocking)\n- [The Language Directory](#language-directory)\n\n</div>\n\n<a name=\"low-impact-changes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":1,"to":29}}}}],["3763",{"pageContent":"Low Impact Changes\n\n<div class=\"content-list\" markdown=\"1\">\n\n- [Closure Validation Rule Messages](#closure-validation-rule-messages)\n- [Form Request `after` Method](#form-request-after-method)\n- [Public Path Binding](#public-path-binding)\n- [Query Exception Constructor](#query-exception-constructor)\n- [Rate Limiter Return Values](#rate-limiter-return-values)\n- [The `Redirect::home` Method](#redirect-home)\n- [The `Bus::dispatchNow` Method](#dispatch-now)\n- [The `registerPolicies` Method](#register-policies)\n- [ULID Columns](#ulid-columns)\n\n</div>\n\n<a name=\"upgrade-10.0\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":30,"to":46}}}}],["3764",{"pageContent":"Upgrading To 10.0 From 9.x\n\n<a name=\"estimated-upgrade-time-??-minutes\"></a>\n#### Estimated Upgrade Time: 10 Minutes\n\n> **Note**  \n> We attempt to document every possible breaking change. Since some of these breaking changes are in obscure parts of the framework only a portion of these changes may actually affect your application. Want to save time? You can use [Laravel Shift](https://laravelshift.com/) to help automate your application upgrades.\n\n<a name=\"updating-dependencies\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":47,"to":55}}}}],["3765",{"pageContent":"Updating Dependencies\n\n**Likelihood Of Impact: High**\n\n#### PHP 8.1.0 Required\n\nLaravel now requires PHP 8.1.0 or greater.\n\n#### Composer 2.2.0 Required\n\nLaravel now requires [Composer](https://getcomposer.org) 2.2.0 or greater.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":56,"to":66}}}}],["3766",{"pageContent":"Composer Dependencies\n\nYou should update the following dependencies in your application's `composer.json` file:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- `laravel/framework` to `^10.0`\n- `laravel/sanctum` to `^3.2`\n- `doctrine/dbal` to `^3.0`\n- `spatie/laravel-ignition` to `^2.0`\n- `laravel/passport` to `^11.0` ([Upgrade Guide](https://github.com/laravel/passport/blob/11.x/UPGRADE.md))\n\n</div>\n\nIf you are upgrading to Sanctum 3.x from the 2.x release series, please consult the [Sanctum upgrade guide](https://github.com/laravel/sanctum/blob/3.x/UPGRADE.md).\n\nFurthermore, if you wish to use [PHPUnit 10](https://phpunit.de/announcements/phpunit-10.html), you should delete the `processUncoveredFiles` attribute from the `<coverage>` section of your application's `phpunit.xml` configuration file. Then, update the following dependencies in your application's `composer.json` file:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- `nunomaduro/collision` to `^7.0`\n- `phpunit/phpunit` to `^10.0`\n\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":68,"to":91}}}}],["3767",{"pageContent":"<div class=\"content-list\" markdown=\"1\">\n\n- `nunomaduro/collision` to `^7.0`\n- `phpunit/phpunit` to `^10.0`\n\n</div>\n\nFinally, examine any other third-party packages consumed by your application and verify you are using the proper version for Laravel 10 support.\n\n<a name=\"updating-minimum-stability\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":91,"to":100}}}}],["3768",{"pageContent":"Minimum Stability\n\nYou should update the `minimum-stability` setting in your application's `composer.json` file to `stable`. Or, since the default value of `minimum-stability` is `stable`, you may delete this setting from your application's `composer.json` file:\n\n```json\n\"minimum-stability\": \"stable\",\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":101,"to":107}}}}],["3769",{"pageContent":"Application\n\n<a name=\"public-path-binding\"></a>\n#### Public Path Binding\n\n**Likelihood Of Impact: Low**\n\nIf your application is customizing its \"public path\" by binding `path.public` into the container, you should instead update your code to invoke the `usePublicPath` method offered by the `Illuminate\\Foundation\\Application` object:\n\n```php\napp()->usePublicPath(__DIR__.'/public');\n```\n\n### Authorization\n\n<a name=\"register-policies\"></a>\n### The `registerPolicies` Method\n\n**Likelihood Of Impact: Low**\n\nThe `registerPolicies` method of the `AuthServiceProvider` is now invoked automatically by the framework. Therefore, you may remove the call to this method from the `boot` method of your application's `AuthServiceProvider`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":109,"to":129}}}}],["3770",{"pageContent":"Cache\n\n<a name=\"redis-cache-tags\"></a>\n#### Redis Cache Tags\n\n**Likelihood Of Impact: Medium**\n\nRedis [cache tag](/docs/{{version}}/cache#cache-tags) support has been rewritten for better performance and storage efficiency. In previous releases of Laravel, stale cache tags would accumulate in the cache when using Redis as your application's cache driver.\n\nHowever, to properly prune stale cache tag entries, Laravel's new `cache:prune-stale-tags` Artisan command should be [scheduled](/docs/{{version}}/scheduling) in your application's `App\\Console\\Kernel` class:\n\n    $schedule->command('cache:prune-stale-tags')->hourly();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":131,"to":142}}}}],["3771",{"pageContent":"Database\n\n<a name=\"database-expressions\"></a>\n#### Database Expressions\n\n**Likelihood Of Impact: Medium**\n\nDatabase \"expressions\" (typically generated via `DB::raw`) have been rewritten in Laravel 10.x to offer additional functionality in the future. Notably, the grammar's raw string value must now be retrieved via the expression's `getValue(Grammar $grammar)` method. Casting an expression to a string using `(string)` is no longer supported.\n\n**Typically, this does not affect end-user applications**; however, if your application is manually casting database expressions to strings using `(string)` or invoking the `__toString` method on the expression directly, you should update your code to invoke the `getValue` method instead:\n\n```php\nuse Illuminate\\Support\\Facades\\DB;\n\n$expression = DB::raw('select 1');\n\n$string = $expression->getValue(DB::connection()->getQueryGrammar());\n```\n\n<a name=\"query-exception-constructor\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":144,"to":163}}}}],["3772",{"pageContent":"Query Exception Constructor\n\n**Likelihood Of Impact: Very Low**\n\nThe `Illuminate\\Database\\QueryException` constructor now accepts a string connection name as its first argument. If your application is manually throwing this exception, you should adjust your code accordingly.\n\n<a name=\"ulid-columns\"></a>\n#### ULID Columns\n\n**Likelihood Of Impact: Low**\n\nWhen migrations invoke the `ulid` method without any arguments, the column will now be named `ulid`. In previous releases of Laravel, invoking this method without any arguments created a column erroneously named `uuid`:\n\n    $table->ulid();\n\nTo explicitly specify a column name when invoking the `ulid` method, you may pass the column name to the method:\n\n    $table->ulid('ulid');","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":164,"to":181}}}}],["3773",{"pageContent":"Eloquent\n\n<a name=\"model-dates-property\"></a>\n#### Model \"Dates\" Property\n\n**Likelihood Of Impact: Medium**\n\nThe Eloquent model's deprecated `$dates` property has been removed. Your application should now use the `$casts` property:\n\n```php\nprotected $casts = [\n    'deployed_at' => 'datetime',\n];\n```\n\n### Localization\n\n<a name=\"language-directory\"></a>\n#### The Language Directory\n\n**Likelihood Of Impact: None**\n\nThough not relevant to existing applications, the Laravel application skeleton no longer contains the `lang` directory by default. Instead, when writing new Laravel applications, it may be published using the `lang:publish` Artisan command:\n\n```shell\nphp artisan lang:publish\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":183,"to":209}}}}],["3774",{"pageContent":"Logging\n\n<a name=\"monolog-3\"></a>\n#### Monolog 3\n\n**Likelihood Of Impact: Medium**\n\nLaravel's Monolog dependency has been updated to Monolog 3.x. If you are directly interacting with Monolog within your application, you should review Monolog's [upgrade guide](https://github.com/Seldaek/monolog/blob/main/UPGRADE.md).\n\nIf you are using third-party logging services such as BugSnag or Rollbar, you may need to upgrade those third-party packages to a version that supports Monolog 3.x and Laravel 10.x.\n\n### Queues\n\n<a name=\"dispatch-now\"></a>\n#### The `Bus::dispatchNow` Method\n\n**Likelihood Of Impact: Low**\n\nThe deprecated `Bus::dispatchNow` and `dispatch_now` methods have been removed. Instead, your application should use the `Bus::dispatchSync` and `dispatch_sync` methods, respectively.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":211,"to":229}}}}],["3775",{"pageContent":"Routing\n\n<a name=\"middleware-aliases\"></a>\n#### Middleware Aliases\n\n**Likelihood Of Impact: Optional**\n\nIn new Laravel applications, the `$routeMiddleware` property of the `App\\Http\\Kernel` class has been renamed to `$middlewareAliases` to better reflect its purpose. You are welcome to rename this property in your existing applications; however, it is not required.\n\n<a name=\"rate-limiter-return-values\"></a>\n#### Rate Limiter Return Values\n\n**Likelihood Of Impact: Low**\n\nWhen invoking the `RateLimiter::attempt` method, the value returned by the provided closure will now be returned by the method. If nothing or `null` is returned, the `attempt` method will return `true`:\n\n```php\n$value = RateLimiter::attempt('key', 10, fn () => ['example'], 1);\n\n$value; // ['example']\n```\n\n<a name=\"redirect-home\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":231,"to":253}}}}],["3776",{"pageContent":"The `Redirect::home` Method\n\n**Likelihood Of Impact: Very Low**\n\nThe deprecated `Redirect::home` method has been removed. Instead, your application should redirect to an explicitly named route:\n\n```php\nreturn Redirect::route('home');\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":254,"to":262}}}}],["3777",{"pageContent":"Testing\n\n<a name=\"service-mocking\"></a>\n#### Service Mocking\n\n**Likelihood Of Impact: Medium**\n\nThe deprecated `MocksApplicationServices` trait has been removed from the framework. This trait provided testing methods such as `expectsEvents`, `expectsJobs`, and `expectsNotifications`.\n\nIf your application uses these methods, we recommend you transition to `Event::fake`, `Bus::fake`, and `Notification::fake`, respectively. You can learn more about mocking via fakes in the corresponding documentation for the component you are attempting to fake.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":264,"to":273}}}}],["3778",{"pageContent":"Validation\n\n<a name=\"closure-validation-rule-messages\"></a>\n#### Closure Validation Rule Messages\n\n**Likelihood Of Impact: Very Low**\n\nWhen writing closure based custom validation rules, invoking the `$fail` callback more than once will now append the messages to an array instead of overwriting the previous message. Typically, this will not affect your application.\n\nIn addition, the `$fail` callback now returns an object. If you were previously type-hinting the return type of your validation closure, this may require you to update your type-hint:\n\n```php\npublic function rules()\n{\n    'name' => [\n        function ($attribute, $value, $fail) {\n            $fail('validation.translation.key')->translate();\n        },\n    ],\n}\n```\n\n<a name=\"form-request-after-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":275,"to":297}}}}],["3779",{"pageContent":"Form Request After Method\n\n**Likelihood Of Impact: Very Low**\n\nWithin form requests, the `after` method is now [reserved by Laravel](https://github.com/laravel/framework/pull/46757). If your form requests define an `after` method, the method should be renamed or modified to utilize the new \"after validation\" feature of Laravel's form requests.\n\n<a name=\"miscellaneous\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":298,"to":304}}}}],["3780",{"pageContent":"Miscellaneous\n\nWe also encourage you to view the changes in the `laravel/laravel` [GitHub repository](https://github.com/laravel/laravel). While many of these changes are not required, you may wish to keep these files in sync with your application. Some of these changes will be covered in this upgrade guide, but others, such as changes to configuration files or comments, will not be.\n\nYou can easily view the changes with the [GitHub comparison tool](https://github.com/laravel/laravel/compare/9.x...10.x) and choose which updates are important to you. However, many of the changes shown by the GitHub comparison tool are due to our organization's adoption of PHP native types. These changes are backwards compatible and the adoption of them during the migration to Laravel 10 is optional.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/upgrade.md","loc":{"lines":{"from":305,"to":309}}}}],["3781",{"pageContent":"# URL Generation\n\n- [Introduction](#introduction)\n- [The Basics](#the-basics)\n    - [Generating URLs](#generating-urls)\n    - [Accessing The Current URL](#accessing-the-current-url)\n- [URLs For Named Routes](#urls-for-named-routes)\n    - [Signed URLs](#signed-urls)\n- [URLs For Controller Actions](#urls-for-controller-actions)\n- [Default Values](#default-values)\n\n<a name=\"introduction\"></a>\n## Introduction\n\nLaravel provides several helpers to assist you in generating URLs for your application. These helpers are primarily helpful when building links in your templates and API responses, or when generating redirect responses to another part of your application.\n\n<a name=\"the-basics\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":1,"to":17}}}}],["3782",{"pageContent":"The Basics\n\n<a name=\"generating-urls\"></a>\n### Generating URLs\n\nThe `url` helper may be used to generate arbitrary URLs for your application. The generated URL will automatically use the scheme (HTTP or HTTPS) and host from the current request being handled by the application:\n\n    $post = App\\Models\\Post::find(1);\n\n    echo url(\"/posts/{$post->id}\");\n\n    // http://example.com/posts/1\n\n<a name=\"accessing-the-current-url\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":18,"to":31}}}}],["3783",{"pageContent":"Accessing The Current URL\n\nIf no path is provided to the `url` helper, an `Illuminate\\Routing\\UrlGenerator` instance is returned, allowing you to access information about the current URL:\n\n    // Get the current URL without the query string...\n    echo url()->current();\n\n    // Get the current URL including the query string...\n    echo url()->full();\n\n    // Get the full URL for the previous request...\n    echo url()->previous();\n\nEach of these methods may also be accessed via the `URL` [facade](/docs/{{version}}/facades):\n\n    use Illuminate\\Support\\Facades\\URL;\n\n    echo URL::current();\n\n<a name=\"urls-for-named-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":32,"to":51}}}}],["3784",{"pageContent":"URLs For Named Routes\n\nThe `route` helper may be used to generate URLs to [named routes](/docs/{{version}}/routing#named-routes). Named routes allow you to generate URLs without being coupled to the actual URL defined on the route. Therefore, if the route's URL changes, no changes need to be made to your calls to the `route` function. For example, imagine your application contains a route defined like the following:\n\n    Route::get('/post/{post}', function (Post $post) {\n        // ...\n    })->name('post.show');\n\nTo generate a URL to this route, you may use the `route` helper like so:\n\n    echo route('post.show', ['post' => 1]);\n\n    // http://example.com/post/1\n\nOf course, the `route` helper may also be used to generate URLs for routes with multiple parameters:\n\n    Route::get('/post/{post}/comment/{comment}', function (Post $post, Comment $comment) {\n        // ...\n    })->name('comment.show');\n\n    echo route('comment.show', ['post' => 1, 'comment' => 3]);\n\n    // http://example.com/post/1/comment/3","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":52,"to":74}}}}],["3785",{"pageContent":"echo route('comment.show', ['post' => 1, 'comment' => 3]);\n\n    // http://example.com/post/1/comment/3\n\nAny additional array elements that do not correspond to the route's definition parameters will be added to the URL's query string:\n\n    echo route('post.show', ['post' => 1, 'search' => 'rocket']);\n\n    // http://example.com/post/1?search=rocket\n\n<a name=\"eloquent-models\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":74,"to":84}}}}],["3786",{"pageContent":"Eloquent Models\n\nYou will often be generating URLs using the route key (typically the primary key) of [Eloquent models](/docs/{{version}}/eloquent). For this reason, you may pass Eloquent models as parameter values. The `route` helper will automatically extract the model's route key:\n\n    echo route('post.show', ['post' => $post]);\n\n<a name=\"signed-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":85,"to":91}}}}],["3787",{"pageContent":"Signed URLs\n\nLaravel allows you to easily create \"signed\" URLs to named routes. These URLs have a \"signature\" hash appended to the query string which allows Laravel to verify that the URL has not been modified since it was created. Signed URLs are especially useful for routes that are publicly accessible yet need a layer of protection against URL manipulation.\n\nFor example, you might use signed URLs to implement a public \"unsubscribe\" link that is emailed to your customers. To create a signed URL to a named route, use the `signedRoute` method of the `URL` facade:\n\n    use Illuminate\\Support\\Facades\\URL;\n\n    return URL::signedRoute('unsubscribe', ['user' => 1]);\n\nYou may exclude the domain from the signed URL hash by providing the `absolute` argument to the `signedRoute` method:\n\n    return URL::signedRoute('unsubscribe', ['user' => 1], absolute: false);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":92,"to":104}}}}],["3788",{"pageContent":"You may exclude the domain from the signed URL hash by providing the `absolute` argument to the `signedRoute` method:\n\n    return URL::signedRoute('unsubscribe', ['user' => 1], absolute: false);\n\nIf you would like to generate a temporary signed route URL that expires after a specified amount of time, you may use the `temporarySignedRoute` method. When Laravel validates a temporary signed route URL, it will ensure that the expiration timestamp that is encoded into the signed URL has not elapsed:\n\n    use Illuminate\\Support\\Facades\\URL;\n\n    return URL::temporarySignedRoute(\n        'unsubscribe', now()->addMinutes(30), ['user' => 1]\n    );\n\n<a name=\"validating-signed-route-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":104,"to":116}}}}],["3789",{"pageContent":"Validating Signed Route Requests\n\nTo verify that an incoming request has a valid signature, you should call the `hasValidSignature` method on the incoming `Illuminate\\Http\\Request` instance:\n\n    use Illuminate\\Http\\Request;\n\n    Route::get('/unsubscribe/{user}', function (Request $request) {\n        if (! $request->hasValidSignature()) {\n            abort(401);\n        }\n\n        // ...\n    })->name('unsubscribe');\n\nSometimes, you may need to allow your application's frontend to append data to a signed URL, such as when performing client-side pagination. Therefore, you can specify request query parameters that should be ignored when validating a signed URL using the `hasValidSignatureWhileIgnoring` method. Remember, ignoring parameters allows anyone to modify those parameters on the request:\n\n    if (! $request->hasValidSignatureWhileIgnoring(['page', 'order'])) {\n        abort(401);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":117,"to":135}}}}],["3790",{"pageContent":"if (! $request->hasValidSignatureWhileIgnoring(['page', 'order'])) {\n        abort(401);\n    }\n\nInstead of validating signed URLs using the incoming request instance, you may assign the `Illuminate\\Routing\\Middleware\\ValidateSignature` [middleware](/docs/{{version}}/middleware) to the route. If it is not already present, you may assign this middleware an alias in your HTTP kernel's `$middlewareAliases` array:\n\n    /**\n     * The application's middleware aliases.\n     *\n     * Aliases may be used to conveniently assign middleware to routes and groups.\n     *\n     * @var array<string, class-string|string>\n     */\n    protected $middlewareAliases = [\n        'signed' => \\Illuminate\\Routing\\Middleware\\ValidateSignature::class,\n    ];\n\nOnce you have registered the middleware in your kernel, you may attach it to a route. If the incoming request does not have a valid signature, the middleware will automatically return a `403` HTTP response:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":135,"to":152}}}}],["3791",{"pageContent":"Route::post('/unsubscribe/{user}', function (Request $request) {\n        // ...\n    })->name('unsubscribe')->middleware('signed');\n\nIf your signed URLs do not include the domain in the URL hash, you should provide the `relative` argument to the middleware:\n\n    Route::post('/unsubscribe/{user}', function (Request $request) {\n        // ...\n    })->name('unsubscribe')->middleware('signed:relative');\n\n<a name=\"responding-to-invalid-signed-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":154,"to":164}}}}],["3792",{"pageContent":"Responding To Invalid Signed Routes\n\nWhen someone visits a signed URL that has expired, they will receive a generic error page for the `403` HTTP status code. However, you can customize this behavior by defining a custom \"renderable\" closure for the `InvalidSignatureException` exception in your exception handler. This closure should return an HTTP response:\n\n    use Illuminate\\Routing\\Exceptions\\InvalidSignatureException;\n\n    /**\n     * Register the exception handling callbacks for the application.\n     */\n    public function register(): void\n    {\n        $this->renderable(function (InvalidSignatureException $e) {\n            return response()->view('error.link-expired', [], 403);\n        });\n    }\n\n<a name=\"urls-for-controller-actions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":165,"to":181}}}}],["3793",{"pageContent":"URLs For Controller Actions\n\nThe `action` function generates a URL for the given controller action:\n\n    use App\\Http\\Controllers\\HomeController;\n\n    $url = action([HomeController::class, 'index']);\n\nIf the controller method accepts route parameters, you may pass an associative array of route parameters as the second argument to the function:\n\n    $url = action([UserController::class, 'profile'], ['id' => 1]);\n\n<a name=\"default-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":182,"to":194}}}}],["3794",{"pageContent":"Default Values\n\nFor some applications, you may wish to specify request-wide default values for certain URL parameters. For example, imagine many of your routes define a `{locale}` parameter:\n\n    Route::get('/{locale}/posts', function () {\n        // ...\n    })->name('post.index');\n\nIt is cumbersome to always pass the `locale` every time you call the `route` helper. So, you may use the `URL::defaults` method to define a default value for this parameter that will always be applied during the current request. You may wish to call this method from a [route middleware](/docs/{{version}}/middleware#assigning-middleware-to-routes) so that you have access to the current request:\n\n    <?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\URL;\n    use Symfony\\Component\\HttpFoundation\\Response;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":195,"to":212}}}}],["3795",{"pageContent":"<?php\n\n    namespace App\\Http\\Middleware;\n\n    use Closure;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\URL;\n    use Symfony\\Component\\HttpFoundation\\Response;\n\n    class SetDefaultLocaleForUrls\n    {\n        /**\n         * Handle an incoming request.\n         *\n         * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n         */\n        public function handle(Request $request, Closure $next): Response\n        {\n            URL::defaults(['locale' => $request->user()->locale]);\n\n            return $next($request);\n        }\n    }\n\nOnce the default value for the `locale` parameter has been set, you are no longer required to pass its value when generating URLs via the `route` helper.\n\n<a name=\"url-defaults-middleware-priority\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":212,"to":238}}}}],["3796",{"pageContent":"URL Defaults & Middleware Priority\n\nSetting URL default values can interfere with Laravel's handling of implicit model bindings. Therefore, you should [prioritize your middleware](/docs/{{version}}/middleware#sorting-middleware) that set URL defaults to be executed before Laravel's own `SubstituteBindings` middleware. You can accomplish this by making sure your middleware occurs before the `SubstituteBindings` middleware within the `$middlewarePriority` property of your application's HTTP kernel.\n\nThe `$middlewarePriority` property is defined in the base `Illuminate\\Foundation\\Http\\Kernel` class. You may copy its definition from that class and overwrite it in your application's HTTP kernel in order to modify it:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":239,"to":243}}}}],["3797",{"pageContent":"/**\n     * The priority-sorted list of middleware.\n     *\n     * This forces non-global middleware to always be in the given order.\n     *\n     * @var array\n     */\n    protected $middlewarePriority = [\n        // ...\n         \\App\\Http\\Middleware\\SetDefaultLocaleForUrls::class,\n         \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n         // ...\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/urls.md","loc":{"lines":{"from":245,"to":257}}}}],["3798",{"pageContent":"# Laravel Valet\n\n- [Introduction](#introduction)\n- [Installation](#installation)\n    - [Upgrading Valet](#upgrading-valet)\n- [Serving Sites](#serving-sites)\n    - [The \"Park\" Command](#the-park-command)\n    - [The \"Link\" Command](#the-link-command)\n    - [Securing Sites With TLS](#securing-sites)\n    - [Serving a Default Site](#serving-a-default-site)\n    - [Per-Site PHP Versions](#per-site-php-versions)\n- [Sharing Sites](#sharing-sites)\n    - [Sharing Sites On Your Local Network](#sharing-sites-on-your-local-network)\n- [Site Specific Environment Variables](#site-specific-environment-variables)\n- [Proxying Services](#proxying-services)\n- [Custom Valet Drivers](#custom-valet-drivers)\n    - [Local Drivers](#local-drivers)\n- [Other Valet Commands](#other-valet-commands)\n- [Valet Directories & Files](#valet-directories-and-files)\n    - [Disk Access](#disk-access)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":1,"to":22}}}}],["3799",{"pageContent":"Introduction\n\n> **Note**\n> Looking for an even easier way to develop Laravel applications on macOS? Check out [Laravel Herd](https://herd.laravel.com). Herd includes everything you need to get started with Laravel development, including Valet, PHP, and Composer.\n\n[Laravel Valet](https://github.com/laravel/valet) is a development environment for macOS minimalists. Laravel Valet configures your Mac to always run [Nginx](https://www.nginx.com/) in the background when your machine starts. Then, using [DnsMasq](https://en.wikipedia.org/wiki/Dnsmasq), Valet proxies all requests on the `*.test` domain to point to sites installed on your local machine.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":23,"to":28}}}}],["3800",{"pageContent":"In other words, Valet is a blazing fast Laravel development environment that uses roughly 7 MB of RAM. Valet isn't a complete replacement for [Sail](/docs/{{version}}/sail) or [Homestead](/docs/{{version}}/homestead), but provides a great alternative if you want flexible basics, prefer extreme speed, or are working on a machine with a limited amount of RAM.\n\nOut of the box, Valet support includes, but is not limited to:\n\n<style>\n    #valet-support > ul {\n        column-count: 3; -moz-column-count: 3; -webkit-column-count: 3;\n        line-height: 1.9;\n    }\n</style>\n\n<div id=\"valet-support\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":30,"to":41}}}}],["3801",{"pageContent":"<style>\n    #valet-support > ul {\n        column-count: 3; -moz-column-count: 3; -webkit-column-count: 3;\n        line-height: 1.9;\n    }\n</style>\n\n<div id=\"valet-support\" markdown=\"1\">\n\n- [Laravel](https://laravel.com)\n- [Bedrock](https://roots.io/bedrock/)\n- [CakePHP 3](https://cakephp.org)\n- [ConcreteCMS](https://www.concretecms.com/)\n- [Contao](https://contao.org/en/)\n- [Craft](https://craftcms.com)\n- [Drupal](https://www.drupal.org/)\n- [ExpressionEngine](https://www.expressionengine.com/)\n- [Jigsaw](https://jigsaw.tighten.co)\n- [Joomla](https://www.joomla.org/)\n- [Katana](https://github.com/themsaid/katana)\n- [Kirby](https://getkirby.com/)\n- [Magento](https://magento.com/)\n- [OctoberCMS](https://octobercms.com/)\n- [Sculpin](https://sculpin.io/)\n- [Slim](https://www.slimframework.com)\n- [Statamic](https://statamic.com)\n- Static HTML\n- [Symfony](https://symfony.com)\n- [WordPress](https://wordpress.org)\n- [Zend](https://framework.zend.com)\n\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":41,"to":72}}}}],["3802",{"pageContent":"</div>\n\nHowever, you may extend Valet with your own [custom drivers](#custom-valet-drivers).\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":72,"to":76}}}}],["3803",{"pageContent":"Installation\n\n> **Warning**  \n> Valet requires macOS and [Homebrew](https://brew.sh/). Before installation, you should make sure that no other programs such as Apache or Nginx are binding to your local machine's port 80.\n\nTo get started, you first need to ensure that Homebrew is up to date using the `update` command:\n\n```shell\nbrew update\n```\n\nNext, you should use Homebrew to install PHP:\n\n```shell\nbrew install php\n```\n\nAfter installing PHP, you are ready to install the [Composer package manager](https://getcomposer.org). In addition, you should make sure the `$HOME/.composer/vendor/bin` directory is in your system's \"PATH\". After Composer has been installed, you may install Laravel Valet as a global Composer package:\n\n```shell\ncomposer global require laravel/valet\n```\n\nFinally, you may execute Valet's `install` command. This will configure and install Valet and DnsMasq. In addition, the daemons Valet depends on will be configured to launch when your system starts:\n\n```shell\nvalet install","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":77,"to":103}}}}],["3804",{"pageContent":"Once Valet is installed, try pinging any `*.test` domain on your terminal using a command such as `ping foobar.test`. If Valet is installed correctly you should see this domain responding on `127.0.0.1`.\n\nValet will automatically start its required services each time your machine boots.\n\n<a name=\"php-versions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":106,"to":110}}}}],["3805",{"pageContent":"PHP Versions\n\n> **Note**  \n> Instead of modifying your global PHP version, you can instruct Valet to use per-site PHP versions via the `isolate` [command](#per-site-php-versions).\n\nValet allows you to switch PHP versions using the `valet use php@version` command. Valet will install the specified PHP version via Homebrew if it is not already installed:\n\n```shell\nvalet use php@8.1\n\nvalet use php\n```\n\nYou may also create a `.valetrc` file in the root of your project. The `.valetrc` file should contain the PHP version the site should use:\n\n```shell\nphp=php@8.1\n```\n\nOnce this file has been created, you may simply execute the `valet use` command and the command will determine the site's preferred PHP version by reading the file.\n\n> **Warning**  \n> Valet only serves one PHP version at a time, even if you have multiple PHP versions installed.\n\n<a name=\"database\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":111,"to":135}}}}],["3806",{"pageContent":"Database\n\nIf your application needs a database, check out [DBngin](https://dbngin.com), which provides a free, all-in-one database management tool that includes MySQL, PostgreSQL, and Redis. After DBngin has been installed, you can connect to your database at `127.0.0.1` using the `root` username and an empty string for the password.\n\n<a name=\"resetting-your-installation\"></a>\n#### Resetting Your Installation\n\nIf you are having trouble getting your Valet installation to run properly, executing the `composer global require laravel/valet` command followed by `valet install` will reset your installation and can solve a variety of problems. In rare cases, it may be necessary to \"hard reset\" Valet by executing `valet uninstall --force` followed by `valet install`.\n\n<a name=\"upgrading-valet\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":136,"to":145}}}}],["3807",{"pageContent":"Upgrading Valet\n\nYou may update your Valet installation by executing the `composer global require laravel/valet` command in your terminal. After upgrading, it is good practice to run the `valet install` command so Valet can make additional upgrades to your configuration files if necessary.\n\n<a name=\"upgrading-to-valet-4\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":146,"to":150}}}}],["3808",{"pageContent":"Upgrading To Valet 4\n\nIf you're upgrading from Valet 3 to Valet 4, take the following steps to properly upgrade your Valet installation:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- If you've added `.valetphprc` files to customize your site's PHP version, rename each `.valetphprc` file to `.valetrc`. Then, prepend `php=` to the existing content of the `.valetrc` file.\n- Update any custom drivers to match the namespace, extension, type-hints, and return type-hints of the new driver system. You may consult Valet's [SampleValetDriver](https://github.com/laravel/valet/blob/d7787c025e60abc24a5195dc7d4c5c6f2d984339/cli/stubs/SampleValetDriver.php) as an example.\n- If you use PHP 7.1 - 7.4 to serve your sites, make sure you still use Homebrew to install a version of PHP that's 8.0 or higher, as Valet will use this version, even if it's not your primary linked version, to run some of its scripts.\n\n</div>\n\n<a name=\"serving-sites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":151,"to":163}}}}],["3809",{"pageContent":"Serving Sites\n\nOnce Valet is installed, you're ready to start serving your Laravel applications. Valet provides two commands to help you serve your applications: `park` and `link`.\n\n<a name=\"the-park-command\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":164,"to":168}}}}],["3810",{"pageContent":"The `park` Command\n\nThe `park` command registers a directory on your machine that contains your applications. Once the directory has been \"parked\" with Valet, all of the directories within that directory will be accessible in your web browser at `http://<directory-name>.test`:\n\n```shell\ncd ~/Sites\n\nvalet park\n```\n\nThat's all there is to it. Now, any application you create within your \"parked\" directory will automatically be served using the `http://<directory-name>.test` convention. So, if your parked directory contains a directory named \"laravel\", the application within that directory will be accessible at `http://laravel.test`. In addition, Valet automatically allows you to access the site using wildcard subdomains (`http://foo.laravel.test`).\n\n<a name=\"the-link-command\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":169,"to":181}}}}],["3811",{"pageContent":"The `link` Command\n\nThe `link` command can also be used to serve your Laravel applications. This command is useful if you want to serve a single site in a directory and not the entire directory:\n\n```shell\ncd ~/Sites/laravel\n\nvalet link\n```\n\nOnce an application has been linked to Valet using the `link` command, you may access the application using its directory name. So, the site that was linked in the example above may be accessed at `http://laravel.test`. In addition, Valet automatically allows you to access the site using wildcard sub-domains (`http://foo.laravel.test`).\n\nIf you would like to serve the application at a different hostname, you may pass the hostname to the `link` command. For example, you may run the following command to make an application available at `http://application.test`:\n\n```shell\ncd ~/Sites/laravel\n\nvalet link application\n```\n\nOf course, you may also serve applications on subdomains using the `link` command:\n\n```shell\nvalet link api.application","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":182,"to":205}}}}],["3812",{"pageContent":"Of course, you may also serve applications on subdomains using the `link` command:\n\n```shell\nvalet link api.application\n```\n\nYou may execute the `links` command to display a list of all of your linked directories:\n\n```shell\nvalet links\n```\n\nThe `unlink` command may be used to destroy the symbolic link for a site:\n\n```shell\ncd ~/Sites/laravel\n\nvalet unlink\n```\n\n<a name=\"securing-sites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":205,"to":225}}}}],["3813",{"pageContent":"Securing Sites With TLS\n\nBy default, Valet serves sites over HTTP. However, if you would like to serve a site over encrypted TLS using HTTP/2, you may use the `secure` command. For example, if your site is being served by Valet on the `laravel.test` domain, you should run the following command to secure it:\n\n```shell\nvalet secure laravel\n```\n\nTo \"unsecure\" a site and revert back to serving its traffic over plain HTTP, use the `unsecure` command. Like the `secure` command, this command accepts the hostname that you wish to unsecure:\n\n```shell\nvalet unsecure laravel\n```\n\n<a name=\"serving-a-default-site\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":226,"to":240}}}}],["3814",{"pageContent":"Serving A Default Site\n\nSometimes, you may wish to configure Valet to serve a \"default\" site instead of a `404` when visiting an unknown `test` domain. To accomplish this, you may add a `default` option to your `~/.config/valet/config.json` configuration file containing the path to the site that should serve as your default site:\n\n    \"default\": \"/Users/Sally/Sites/example-site\",\n\n<a name=\"per-site-php-versions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":241,"to":247}}}}],["3815",{"pageContent":"Per-Site PHP Versions\n\nBy default, Valet uses your global PHP installation to serve your sites. However, if you need to support multiple PHP versions across various sites, you may use the `isolate` command to specify which PHP version a particular site should use. The `isolate` command configures Valet to use the specified PHP version for the site located in your current working directory:\n\n```shell\ncd ~/Sites/example-site\n\nvalet isolate php@8.0\n```\n\nIf your site name does not match the name of the directory that contains it, you may specify the site name using the `--site` option:\n\n```shell\nvalet isolate php@8.0 --site=\"site-name\"\n```\n\nFor convenience, you may use the `valet php`, `composer`, and `which-php` commands to proxy calls to the appropriate PHP CLI or tool based on the site's configured PHP version:\n\n```shell\nvalet php\nvalet composer\nvalet which-php\n```\n\nYou may execute the `isolated` command to display a list of all of your isolated sites and their PHP versions:\n\n```shell\nvalet isolated","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":248,"to":275}}}}],["3816",{"pageContent":"You may execute the `isolated` command to display a list of all of your isolated sites and their PHP versions:\n\n```shell\nvalet isolated\n```\n\nTo revert a site back to Valet's globally installed PHP version, you may invoke the `unisolate` command from the site's root directory:\n\n```shell\nvalet unisolate\n```\n\n<a name=\"sharing-sites\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":275,"to":287}}}}],["3817",{"pageContent":"Sharing Sites\n\nValet includes a command to share your local sites with the world, providing an easy way to test your site on mobile devices or share it with team members and clients.\n\nOut of the box, Valet supports sharing your sites via ngrok or Expose. Before sharing a site, you should update your Valet configuration using the `share-tool` command, specifying either `ngrok` or `expose`:\n\n```shell\nvalet share-tool ngrok\n```\n\nIf you choose a tool and don't have it installed via Homebrew (for ngrok) or Composer (for Expose), Valet will automatically prompt you to install it. Of course, both tools require you to authenticate your ngrok or Expose account before you can start sharing sites.\n\nTo share a site, navigate to the site's directory in your terminal and run Valet's `share` command. A publicly accessible URL will be placed into your clipboard and is ready to paste directly into your browser or to be shared with your team:\n\n```shell\ncd ~/Sites/laravel\n\nvalet share","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":288,"to":305}}}}],["3818",{"pageContent":"To stop sharing your site, you may press `Control + C`.\n\n> **Warning**\n> If you're using a custom DNS server (like `1.1.1.1`), ngrok sharing may not work correctly. If this is the case on your machine, open your Mac's system settings, go to the Network settings, open the Advanced settings, then go the DNS tab and add `127.0.0.1` as your first DNS server.\n\n<a name=\"sharing-sites-via-ngrok\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":308,"to":313}}}}],["3819",{"pageContent":"Sharing Sites Via Ngrok\n\nSharing your site using ngrok requires you to [create an ngrok account](https://dashboard.ngrok.com/signup) and [set up an authentication token](https://dashboard.ngrok.com/get-started/your-authtoken). Once you have an authentication token, you can update your Valet configuration with that token:\n\n```shell\nvalet set-ngrok-token YOUR_TOKEN_HERE\n```\n\n> **Note**  \n> You may pass additional ngrok parameters to the share command, such as `valet share --region=eu`. For more information, consult the [ngrok documentation](https://ngrok.com/docs).\n\n<a name=\"sharing-sites-via-expose\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":314,"to":325}}}}],["3820",{"pageContent":"Sharing Sites Via Expose\n\nSharing your site using Expose requires you to [create an Expose account](https://expose.dev/register) and [authenticate with Expose via your authentication token](https://expose.dev/docs/getting-started/getting-your-token).\n\nYou may consult the [Expose documentation](https://expose.dev/docs) for information regarding the additional command-line parameters it supports.\n\n<a name=\"sharing-sites-on-your-local-network\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":326,"to":332}}}}],["3821",{"pageContent":"Sharing Sites On Your Local Network\n\nValet restricts incoming traffic to the internal `127.0.0.1` interface by default so that your development machine isn't exposed to security risks from the Internet.\n\nIf you wish to allow other devices on your local network to access the Valet sites on your machine via your machine's IP address (eg: `192.168.1.10/application.test`), you will need to manually edit the appropriate Nginx configuration file for that site to remove the restriction on the `listen` directive. You should remove the `127.0.0.1:` prefix on the `listen` directive for ports 80 and 443.\n\nIf you have not run `valet secure` on the project, you can open up network access for all non-HTTPS sites by editing the `/usr/local/etc/nginx/valet/valet.conf` file. However, if you're serving the project site over HTTPS (you have run `valet secure` for the site) then you should edit the `~/.config/valet/Nginx/app-name.test` file.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":333,"to":339}}}}],["3822",{"pageContent":"Once you have updated your Nginx configuration, run the `valet restart` command to apply the configuration changes.\n\n<a name=\"site-specific-environment-variables\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":341,"to":343}}}}],["3823",{"pageContent":"Site Specific Environment Variables\n\nSome applications using other frameworks may depend on server environment variables but do not provide a way for those variables to be configured within your project. Valet allows you to configure site specific environment variables by adding a `.valet-env.php` file within the root of your project. This file should return an array of site / environment variable pairs which will be added to the global `$_SERVER` array for each site specified in the array:\n\n    <?php\n\n    return [\n        // Set $_SERVER['key'] to \"value\" for the laravel.test site...\n        'laravel' => [\n            'key' => 'value',\n        ],\n\n        // Set $_SERVER['key'] to \"value\" for all sites...\n        '*' => [\n            'key' => 'value',\n        ],\n    ];\n\n<a name=\"proxying-services\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":344,"to":362}}}}],["3824",{"pageContent":"Proxying Services\n\nSometimes you may wish to proxy a Valet domain to another service on your local machine. For example, you may occasionally need to run Valet while also running a separate site in Docker; however, Valet and Docker can't both bind to port 80 at the same time.\n\nTo solve this, you may use the `proxy` command to generate a proxy. For example, you may proxy all traffic from `http://elasticsearch.test` to `http://127.0.0.1:9200`:\n\n```shell\n# Proxy over HTTP...\nvalet proxy elasticsearch http://127.0.0.1:9200\n\n# Proxy over TLS + HTTP/2...\nvalet proxy elasticsearch http://127.0.0.1:9200 --secure\n```\n\nYou may remove a proxy using the `unproxy` command:\n\n```shell\nvalet unproxy elasticsearch\n```\n\nYou may use the `proxies` command to list all site configurations that are proxied:\n\n```shell\nvalet proxies\n```\n\n<a name=\"custom-valet-drivers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":363,"to":389}}}}],["3825",{"pageContent":"Custom Valet Drivers\n\nYou can write your own Valet \"driver\" to serve PHP applications running on a framework or CMS that is not natively supported by Valet. When you install Valet, a `~/.config/valet/Drivers` directory is created which contains a `SampleValetDriver.php` file. This file contains a sample driver implementation to demonstrate how to write a custom driver. Writing a driver only requires you to implement three methods: `serves`, `isStaticFile`, and `frontControllerPath`.\n\nAll three methods receive the `$sitePath`, `$siteName`, and `$uri` values as their arguments. The `$sitePath` is the fully qualified path to the site being served on your machine, such as `/Users/Lisa/Sites/my-project`. The `$siteName` is the \"host\" / \"site name\" portion of the domain (`my-project`). The `$uri` is the incoming request URI (`/foo/bar`).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":390,"to":394}}}}],["3826",{"pageContent":"Once you have completed your custom Valet driver, place it in the `~/.config/valet/Drivers` directory using the `FrameworkValetDriver.php` naming convention. For example, if you are writing a custom valet driver for WordPress, your filename should be `WordPressValetDriver.php`.\n\nLet's take a look at a sample implementation of each method your custom Valet driver should implement.\n\n<a name=\"the-serves-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":396,"to":400}}}}],["3827",{"pageContent":"The `serves` Method\n\nThe `serves` method should return `true` if your driver should handle the incoming request. Otherwise, the method should return `false`. So, within this method, you should attempt to determine if the given `$sitePath` contains a project of the type you are trying to serve.\n\nFor example, let's imagine we are writing a `WordPressValetDriver`. Our `serves` method might look something like this:\n\n    /**\n     * Determine if the driver serves the request.\n     */\n    public function serves(string $sitePath, string $siteName, string $uri): bool\n    {\n        return is_dir($sitePath.'/wp-admin');\n    }\n\n<a name=\"the-isstaticfile-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":401,"to":415}}}}],["3828",{"pageContent":"The `isStaticFile` Method\n\nThe `isStaticFile` should determine if the incoming request is for a file that is \"static\", such as an image or a stylesheet. If the file is static, the method should return the fully qualified path to the static file on disk. If the incoming request is not for a static file, the method should return `false`:\n\n    /**\n     * Determine if the incoming request is for a static file.\n     *\n     * @return string|false\n     */\n    public function isStaticFile(string $sitePath, string $siteName, string $uri)\n    {\n        if (file_exists($staticFilePath = $sitePath.'/public/'.$uri)) {\n            return $staticFilePath;\n        }\n\n        return false;\n    }\n\n> **Warning**  \n> The `isStaticFile` method will only be called if the `serves` method returns `true` for the incoming request and the request URI is not `/`.\n\n<a name=\"the-frontcontrollerpath-method\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":416,"to":437}}}}],["3829",{"pageContent":"The `frontControllerPath` Method\n\nThe `frontControllerPath` method should return the fully qualified path to your application's \"front controller\", which is typically an \"index.php\" file or equivalent:\n\n    /**\n     * Get the fully resolved path to the application's front controller.\n     */\n    public function frontControllerPath(string $sitePath, string $siteName, string $uri): string\n    {\n        return $sitePath.'/public/index.php';\n    }\n\n<a name=\"local-drivers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":438,"to":450}}}}],["3830",{"pageContent":"Local Drivers\n\nIf you would like to define a custom Valet driver for a single application, create a `LocalValetDriver.php` file in the application's root directory. Your custom driver may extend the base `ValetDriver` class or extend an existing application specific driver such as the `LaravelValetDriver`:\n\n    use Valet\\Drivers\\LaravelValetDriver;\n\n    class LocalValetDriver extends LaravelValetDriver\n    {\n        /**\n         * Determine if the driver serves the request.\n         */\n        public function serves(string $sitePath, string $siteName, string $uri): bool\n        {\n            return true;\n        }\n\n        /**\n         * Get the fully resolved path to the application's front controller.\n         */\n        public function frontControllerPath(string $sitePath, string $siteName, string $uri): string\n        {\n            return $sitePath.'/public_html/index.php';\n        }\n    }\n\n<a name=\"other-valet-commands\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":451,"to":476}}}}],["3831",{"pageContent":"Other Valet Commands\n\n<div class=\"overflow-auto\">\n\nCommand  | Description\n------------- | -------------\n`valet list` | Display a list of all Valet commands.\n`valet diagnose` | Output diagnostics to aid in debugging Valet.\n`valet directory-listing` | Determine directory-listing behavior. Default is \"off\", which renders a 404 page for directories.\n`valet forget` | Run this command from a \"parked\" directory to remove it from the parked directory list.\n`valet log` | View a list of logs which are written by Valet's services.\n`valet paths` | View all of your \"parked\" paths.\n`valet restart` | Restart the Valet daemons.\n`valet start` | Start the Valet daemons.\n`valet stop` | Stop the Valet daemons.\n`valet trust` | Add sudoers files for Brew and Valet to allow Valet commands to be run without prompting for your password.\n`valet uninstall` | Uninstall Valet: shows instructions for manual uninstall. Pass the `--force` option to aggressively delete all of Valet's resources.\n\n</div>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":477,"to":495}}}}],["3832",{"pageContent":"</div>\n\n<a name=\"valet-directories-and-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":495,"to":497}}}}],["3833",{"pageContent":"Valet Directories & Files\n\nYou may find the following directory and file information helpful while troubleshooting issues with your Valet environment:\n\n#### `~/.config/valet`\n\nContains all of Valet's configuration. You may wish to maintain a backup of this directory.\n\n#### `~/.config/valet/dnsmasq.d/`\n\nThis directory contains DNSMasq's configuration.\n\n#### `~/.config/valet/Drivers/`\n\nThis directory contains Valet's drivers. Drivers determine how a particular framework / CMS is served.\n\n#### `~/.config/valet/Nginx/`\n\nThis directory contains all of Valet's Nginx site configurations. These files are rebuilt when running the `install` and `secure` commands.\n\n#### `~/.config/valet/Sites/`\n\nThis directory contains all of the symbolic links for your [linked projects](#the-link-command).\n\n#### `~/.config/valet/config.json`\n\nThis file is Valet's master configuration file.\n\n#### `~/.config/valet/valet.sock`\n\nThis file is the PHP-FPM socket used by Valet's Nginx installation. This will only exist if PHP is running properly.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":498,"to":528}}}}],["3834",{"pageContent":"`~/.config/valet/valet.sock`\n\nThis file is the PHP-FPM socket used by Valet's Nginx installation. This will only exist if PHP is running properly.\n\n#### `~/.config/valet/Log/fpm-php.www.log`\n\nThis file is the user log for PHP errors.\n\n#### `~/.config/valet/Log/nginx-error.log`\n\nThis file is the user log for Nginx errors.\n\n#### `/usr/local/var/log/php-fpm.log`\n\nThis file is the system log for PHP-FPM errors.\n\n#### `/usr/local/var/log/nginx`\n\nThis directory contains the Nginx access and error logs.\n\n#### `/usr/local/etc/php/X.X/conf.d`\n\nThis directory contains the `*.ini` files for various PHP configuration settings.\n\n#### `/usr/local/etc/php/X.X/php-fpm.d/valet-fpm.conf`\n\nThis file is the PHP-FPM pool configuration file.\n\n#### `~/.composer/vendor/laravel/valet/cli/stubs/secure.valet.conf`\n\nThis file is the default Nginx configuration used for building SSL certificates for your sites.\n\n<a name=\"disk-access\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":528,"to":560}}}}],["3835",{"pageContent":"Disk Access\n\nSince macOS 10.14, [access to some files and directories is restricted by default](https://manuals.info.apple.com/MANUALS/1000/MA1902/en_US/apple-platform-security-guide.pdf). These restrictions include the Desktop, Documents, and Downloads directories. In addition, network volume and removable volume access is restricted. Therefore, Valet recommends your site folders are located outside of these protected locations.\n\nHowever, if you wish to serve sites from within one of those locations, you will need to give Nginx \"Full Disk Access\". Otherwise, you may encounter server errors or other unpredictable behavior from Nginx, especially when serving static assets. Typically, macOS will automatically prompt you to grant Nginx full access to these locations. Or, you may do so manually via `System Preferences` > `Security & Privacy` > `Privacy` and selecting `Full Disk Access`. Next, enable any `nginx` entries in the main window pane.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/valet.md","loc":{"lines":{"from":561,"to":565}}}}],["3836",{"pageContent":"# Validation","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1,"to":1}}}}],["3837",{"pageContent":"- [Introduction](#introduction)\n- [Validation Quickstart](#validation-quickstart)\n    - [Defining The Routes](#quick-defining-the-routes)\n    - [Creating The Controller](#quick-creating-the-controller)\n    - [Writing The Validation Logic](#quick-writing-the-validation-logic)\n    - [Displaying The Validation Errors](#quick-displaying-the-validation-errors)\n    - [Repopulating Forms](#repopulating-forms)\n    - [A Note On Optional Fields](#a-note-on-optional-fields)\n    - [Validation Error Response Format](#validation-error-response-format)\n- [Form Request Validation](#form-request-validation)\n    - [Creating Form Requests](#creating-form-requests)\n    - [Authorizing Form Requests](#authorizing-form-requests)\n    - [Customizing The Error Messages](#customizing-the-error-messages)\n    - [Preparing Input For Validation](#preparing-input-for-validation)\n- [Manually Creating Validators](#manually-creating-validators)\n    - [Automatic Redirection](#automatic-redirection)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":3,"to":18}}}}],["3838",{"pageContent":"- [Preparing Input For Validation](#preparing-input-for-validation)\n- [Manually Creating Validators](#manually-creating-validators)\n    - [Automatic Redirection](#automatic-redirection)\n    - [Named Error Bags](#named-error-bags)\n    - [Customizing The Error Messages](#manual-customizing-the-error-messages)\n    - [Performing Additional Validation](#performing-additional-validation)\n- [Working With Validated Input](#working-with-validated-input)\n- [Working With Error Messages](#working-with-error-messages)\n    - [Specifying Custom Messages In Language Files](#specifying-custom-messages-in-language-files)\n    - [Specifying Attributes In Language Files](#specifying-attribute-in-language-files)\n    - [Specifying Values In Language Files](#specifying-values-in-language-files)\n- [Available Validation Rules](#available-validation-rules)\n- [Conditionally Adding Rules](#conditionally-adding-rules)\n- [Validating Arrays](#validating-arrays)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":18,"to":31}}}}],["3839",{"pageContent":"- [Available Validation Rules](#available-validation-rules)\n- [Conditionally Adding Rules](#conditionally-adding-rules)\n- [Validating Arrays](#validating-arrays)\n    - [Validating Nested Array Input](#validating-nested-array-input)\n    - [Error Message Indexes & Positions](#error-message-indexes-and-positions)\n- [Validating Files](#validating-files)\n- [Validating Passwords](#validating-passwords)\n- [Custom Validation Rules](#custom-validation-rules)\n    - [Using Rule Objects](#using-rule-objects)\n    - [Using Closures](#using-closures)\n    - [Implicit Rules](#implicit-rules)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":31,"to":41}}}}],["3840",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":43,"to":43}}}}],["3841",{"pageContent":"Introduction\n\nLaravel provides several different approaches to validate your application's incoming data. It is most common to use the `validate` method available on all incoming HTTP requests. However, we will discuss other approaches to validation as well.\n\nLaravel includes a wide variety of convenient validation rules that you may apply to data, even providing the ability to validate if values are unique in a given database table. We'll cover each of these validation rules in detail so that you are familiar with all of Laravel's validation features.\n\n<a name=\"validation-quickstart\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":44,"to":50}}}}],["3842",{"pageContent":"Validation Quickstart\n\nTo learn about Laravel's powerful validation features, let's look at a complete example of validating a form and displaying the error messages back to the user. By reading this high-level overview, you'll be able to gain a good general understanding of how to validate incoming request data using Laravel:\n\n<a name=\"quick-defining-the-routes\"></a>\n### Defining The Routes\n\nFirst, let's assume we have the following routes defined in our `routes/web.php` file:\n\n    use App\\Http\\Controllers\\PostController;\n\n    Route::get('/post/create', [PostController::class, 'create']);\n    Route::post('/post', [PostController::class, 'store']);\n\nThe `GET` route will display a form for the user to create a new blog post, while the `POST` route will store the new blog post in the database.\n\n<a name=\"quick-creating-the-controller\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":51,"to":67}}}}],["3843",{"pageContent":"Creating The Controller\n\nNext, let's take a look at a simple controller that handles incoming requests to these routes. We'll leave the `store` method empty for now:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\View\\View;\n\n    class PostController extends Controller\n    {\n        /**\n         * Show the form to create a new blog post.\n         */\n        public function create(): View\n        {\n            return view('post.create');\n        }\n\n        /**\n         * Store a new blog post.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            // Validate and store the blog post...\n\n            $post = /** ... */\n\n            return to_route('post.show', ['post' => $post->id]);\n        }\n    }\n\n<a name=\"quick-writing-the-validation-logic\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":68,"to":103}}}}],["3844",{"pageContent":"Writing The Validation Logic\n\nNow we are ready to fill in our `store` method with the logic to validate the new blog post. To do this, we will use the `validate` method provided by the `Illuminate\\Http\\Request` object. If the validation rules pass, your code will keep executing normally; however, if validation fails, an `Illuminate\\Validation\\ValidationException` exception will be thrown and the proper error response will automatically be sent back to the user.\n\nIf validation fails during a traditional HTTP request, a redirect response to the previous URL will be generated. If the incoming request is an XHR request, a [JSON response containing the validation error messages](#validation-error-response-format) will be returned.\n\nTo get a better understanding of the `validate` method, let's jump back into the `store` method:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":104,"to":110}}}}],["3845",{"pageContent":"To get a better understanding of the `validate` method, let's jump back into the `store` method:\n\n    /**\n     * Store a new blog post.\n     */\n    public function store(Request $request): RedirectResponse\n    {\n        $validated = $request->validate([\n            'title' => 'required|unique:posts|max:255',\n            'body' => 'required',\n        ]);\n\n        // The blog post is valid...\n\n        return redirect('/posts');\n    }\n\nAs you can see, the validation rules are passed into the `validate` method. Don't worry - all available validation rules are [documented](#available-validation-rules). Again, if the validation fails, the proper response will automatically be generated. If the validation passes, our controller will continue executing normally.\n\nAlternatively, validation rules may be specified as arrays of rules instead of a single `|` delimited string:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":110,"to":129}}}}],["3846",{"pageContent":"Alternatively, validation rules may be specified as arrays of rules instead of a single `|` delimited string:\n\n    $validatedData = $request->validate([\n        'title' => ['required', 'unique:posts', 'max:255'],\n        'body' => ['required'],\n    ]);\n\nIn addition, you may use the `validateWithBag` method to validate a request and store any error messages within a [named error bag](#named-error-bags):\n\n    $validatedData = $request->validateWithBag('post', [\n        'title' => ['required', 'unique:posts', 'max:255'],\n        'body' => ['required'],\n    ]);\n\n<a name=\"stopping-on-first-validation-failure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":129,"to":143}}}}],["3847",{"pageContent":"Stopping On First Validation Failure\n\nSometimes you may wish to stop running validation rules on an attribute after the first validation failure. To do so, assign the `bail` rule to the attribute:\n\n    $request->validate([\n        'title' => 'bail|required|unique:posts|max:255',\n        'body' => 'required',\n    ]);\n\nIn this example, if the `unique` rule on the `title` attribute fails, the `max` rule will not be checked. Rules will be validated in the order they are assigned.\n\n<a name=\"a-note-on-nested-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":144,"to":155}}}}],["3848",{"pageContent":"A Note On Nested Attributes\n\nIf the incoming HTTP request contains \"nested\" field data, you may specify these fields in your validation rules using \"dot\" syntax:\n\n    $request->validate([\n        'title' => 'required|unique:posts|max:255',\n        'author.name' => 'required',\n        'author.description' => 'required',\n    ]);\n\nOn the other hand, if your field name contains a literal period, you can explicitly prevent this from being interpreted as \"dot\" syntax by escaping the period with a backslash:\n\n    $request->validate([\n        'title' => 'required|unique:posts|max:255',\n        'v1\\.0' => 'required',\n    ]);\n\n<a name=\"quick-displaying-the-validation-errors\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":156,"to":173}}}}],["3849",{"pageContent":"Displaying The Validation Errors\n\nSo, what if the incoming request fields do not pass the given validation rules? As mentioned previously, Laravel will automatically redirect the user back to their previous location. In addition, all of the validation errors and [request input](/docs/{{version}}/requests#retrieving-old-input) will automatically be [flashed to the session](/docs/{{version}}/session#flash-data).\n\nAn `$errors` variable is shared with all of your application's views by the `Illuminate\\View\\Middleware\\ShareErrorsFromSession` middleware, which is provided by the `web` middleware group. When this middleware is applied an `$errors` variable will always be available in your views, allowing you to conveniently assume the `$errors` variable is always defined and can be safely used. The `$errors` variable will be an instance of `Illuminate\\Support\\MessageBag`. For more information on working with this object, [check out its documentation](#working-with-error-messages).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":174,"to":178}}}}],["3850",{"pageContent":"So, in our example, the user will be redirected to our controller's `create` method when validation fails, allowing us to display the error messages in the view:\n\n```blade\n<!-- /resources/views/post/create.blade.php -->\n\n<h1>Create Post</h1>\n\n@if ($errors->any())\n    <div class=\"alert alert-danger\">\n        <ul>\n            @foreach ($errors->all() as $error)\n                <li>{{ $error }}</li>\n            @endforeach\n        </ul>\n    </div>\n@endif\n\n<!-- Create Post Form -->","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":180,"to":197}}}}],["3851",{"pageContent":"<a name=\"quick-customizing-the-error-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":200,"to":200}}}}],["3852",{"pageContent":"Customizing The Error Messages\n\nLaravel's built-in validation rules each have an error message that is located in your application's `lang/en/validation.php` file. If your application does not have a `lang` directory, you may instruct Laravel to create it using the `lang:publish` Artisan command.\n\nWithin the `lang/en/validation.php` file, you will find a translation entry for each validation rule. You are free to change or modify these messages based on the needs of your application.\n\nIn addition, you may copy this file to another language directory to translate the messages for your application's language. To learn more about Laravel localization, check out the complete [localization documentation](/docs/{{version}}/localization).\n\n> **Warning**\n> By default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files, you may publish them via the `lang:publish` Artisan command.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":201,"to":210}}}}],["3853",{"pageContent":"<a name=\"quick-xhr-requests-and-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":212,"to":212}}}}],["3854",{"pageContent":"XHR Requests & Validation\n\nIn this example, we used a traditional form to send data to the application. However, many applications receive XHR requests from a JavaScript powered frontend. When using the `validate` method during an XHR request, Laravel will not generate a redirect response. Instead, Laravel generates a [JSON response containing all of the validation errors](#validation-error-response-format). This JSON response will be sent with a 422 HTTP status code.\n\n<a name=\"the-at-error-directive\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":213,"to":217}}}}],["3855",{"pageContent":"The `@error` Directive\n\nYou may use the `@error` [Blade](/docs/{{version}}/blade) directive to quickly determine if validation error messages exist for a given attribute. Within an `@error` directive, you may echo the `$message` variable to display the error message:\n\n```blade\n<!-- /resources/views/post/create.blade.php -->\n\n<label for=\"title\">Post Title</label>\n\n<input id=\"title\"\n    type=\"text\"\n    name=\"title\"\n    class=\"@error('title') is-invalid @enderror\">\n\n@error('title')\n    <div class=\"alert alert-danger\">{{ $message }}</div>\n@enderror\n```\n\nIf you are using [named error bags](#named-error-bags), you may pass the name of the error bag as the second argument to the `@error` directive:\n\n```blade\n<input ... class=\"@error('title', 'post') is-invalid @enderror\">\n```\n\n<a name=\"repopulating-forms\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":218,"to":243}}}}],["3856",{"pageContent":"Repopulating Forms\n\nWhen Laravel generates a redirect response due to a validation error, the framework will automatically [flash all of the request's input to the session](/docs/{{version}}/session#flash-data). This is done so that you may conveniently access the input during the next request and repopulate the form that the user attempted to submit.\n\nTo retrieve flashed input from the previous request, invoke the `old` method on an instance of `Illuminate\\Http\\Request`. The `old` method will pull the previously flashed input data from the [session](/docs/{{version}}/session):\n\n    $title = $request->old('title');\n\nLaravel also provides a global `old` helper. If you are displaying old input within a [Blade template](/docs/{{version}}/blade), it is more convenient to use the `old` helper to repopulate the form. If no old input exists for the given field, `null` will be returned:\n\n```blade\n<input type=\"text\" name=\"title\" value=\"{{ old('title') }}\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":244,"to":255}}}}],["3857",{"pageContent":"<a name=\"a-note-on-optional-fields\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":258,"to":258}}}}],["3858",{"pageContent":"A Note On Optional Fields\n\nBy default, Laravel includes the `TrimStrings` and `ConvertEmptyStringsToNull` middleware in your application's global middleware stack. These middleware are listed in the stack by the `App\\Http\\Kernel` class. Because of this, you will often need to mark your \"optional\" request fields as `nullable` if you do not want the validator to consider `null` values as invalid. For example:\n\n    $request->validate([\n        'title' => 'required|unique:posts|max:255',\n        'body' => 'required',\n        'publish_at' => 'nullable|date',\n    ]);\n\nIn this example, we are specifying that the `publish_at` field may be either `null` or a valid date representation. If the `nullable` modifier is not added to the rule definition, the validator would consider `null` an invalid date.\n\n<a name=\"validation-error-response-format\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":259,"to":271}}}}],["3859",{"pageContent":"Validation Error Response Format\n\nWhen your application throws a `Illuminate\\Validation\\ValidationException` exception and the incoming HTTP request is expecting a JSON response, Laravel will automatically format the error messages for you and return a `422 Unprocessable Entity` HTTP response.\n\nBelow, you can review an example of the JSON response format for validation errors. Note that nested error keys are flattened into \"dot\" notation format:\n\n```json\n{\n    \"message\": \"The team name must be a string. (and 4 more errors)\",\n    \"errors\": {\n        \"team_name\": [\n            \"The team name must be a string.\",\n            \"The team name must be at least 1 characters.\"\n        ],\n        \"authorization.role\": [\n            \"The selected authorization.role is invalid.\"\n        ],\n        \"users.0.email\": [\n            \"The users.0.email field is required.\"\n        ],\n        \"users.2.email\": [\n            \"The users.2.email must be a valid email address.\"\n        ]\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":272,"to":296}}}}],["3860",{"pageContent":"<a name=\"form-request-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":299,"to":299}}}}],["3861",{"pageContent":"Form Request Validation\n\n<a name=\"creating-form-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":300,"to":302}}}}],["3862",{"pageContent":"Creating Form Requests\n\nFor more complex validation scenarios, you may wish to create a \"form request\". Form requests are custom request classes that encapsulate their own validation and authorization logic. To create a form request class, you may use the `make:request` Artisan CLI command:\n\n```shell\nphp artisan make:request StorePostRequest","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":303,"to":308}}}}],["3863",{"pageContent":"The generated form request class will be placed in the `app/Http/Requests` directory. If this directory does not exist, it will be created when you run the `make:request` command. Each form request generated by Laravel has two methods: `authorize` and `rules`.\n\nAs you might have guessed, the `authorize` method is responsible for determining if the currently authenticated user can perform the action represented by the request, while the `rules` method returns the validation rules that should apply to the request's data:\n\n    /**\n     * Get the validation rules that apply to the request.\n     *\n     * @return array<string, \\Illuminate\\Contracts\\Validation\\Rule|array|string>\n     */\n    public function rules(): array\n    {\n        return [\n            'title' => 'required|unique:posts|max:255',\n            'body' => 'required',\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":311,"to":326}}}}],["3864",{"pageContent":"> **Note**\n> You may type-hint any dependencies you require within the `rules` method's signature. They will automatically be resolved via the Laravel [service container](/docs/{{version}}/container).\n\nSo, how are the validation rules evaluated? All you need to do is type-hint the request on your controller method. The incoming form request is validated before the controller method is called, meaning you do not need to clutter your controller with any validation logic:\n\n    /**\n     * Store a new blog post.\n     */\n    public function store(StorePostRequest $request): RedirectResponse\n    {\n        // The incoming request is valid...\n\n        // Retrieve the validated input data...\n        $validated = $request->validated();\n\n        // Retrieve a portion of the validated input data...\n        $validated = $request->safe()->only(['name', 'email']);\n        $validated = $request->safe()->except(['name', 'email']);\n\n        // Store the blog post...\n\n        return redirect('/posts');\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":328,"to":350}}}}],["3865",{"pageContent":"// Store the blog post...\n\n        return redirect('/posts');\n    }\n\nIf validation fails, a redirect response will be generated to send the user back to their previous location. The errors will also be flashed to the session so they are available for display. If the request was an XHR request, an HTTP response with a 422 status code will be returned to the user including a [JSON representation of the validation errors](#validation-error-response-format).\n\n> **Note**\n> Need to add real-time form request validation to your Inertia powered Laravel frontend? Check out [Laravel Precognition](/docs/{{version}}/precognition).\n\n<a name=\"performing-additional-validation-on-form-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":350,"to":360}}}}],["3866",{"pageContent":"Performing Additional Validation\n\nSometimes you need to perform additional validation after your initial validation is complete. You can accomplish this using the form request's `after` method.\n\nThe `after` method should return an array of callables or closures which will be invoked after validation is complete. The given callables will receive an `Illuminate\\Validation\\Validator` instance, allowing you to raise additional error messages if necessary:\n\n    use Illuminate\\Validation\\Validator;\n\n    /**\n     * Get the \"after\" validation callables for the request.\n     */\n    public function after(): array\n    {\n        return [\n            function (Validator $validator) {\n                if ($this->somethingElseIsInvalid()) {\n                    $validator->errors()->add(\n                        'field',\n                        'Something is wrong with this field!'\n                    );\n                }\n            }\n        ];\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":361,"to":384}}}}],["3867",{"pageContent":"As noted, the array returned by the `after` method may also contain invokable classes. The `__invoke` method of these classes will receive an `Illuminate\\Validation\\Validator` instance:\n\n```php\nuse App\\Validation\\ValidateShippingTime;\nuse App\\Validation\\ValidateUserStatus;\nuse Illuminate\\Validation\\Validator;\n\n/**\n * Get the \"after\" validation callables for the request.\n */\npublic function after(): array\n{\n    return [\n        new ValidateUserStatus,\n        new ValidateShippingTime,\n        function (Validator $validator) {\n            //\n        }\n    ];\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":386,"to":405}}}}],["3868",{"pageContent":"<a name=\"request-stopping-on-first-validation-rule-failure\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":408,"to":408}}}}],["3869",{"pageContent":"Stopping On The First Validation Failure\n\nBy adding a `stopOnFirstFailure` property to your request class, you may inform the validator that it should stop validating all attributes once a single validation failure has occurred:\n\n    /**\n     * Indicates if the validator should stop on the first rule failure.\n     *\n     * @var bool\n     */\n    protected $stopOnFirstFailure = true;\n\n<a name=\"customizing-the-redirect-location\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":409,"to":420}}}}],["3870",{"pageContent":"Customizing The Redirect Location\n\nAs previously discussed, a redirect response will be generated to send the user back to their previous location when form request validation fails. However, you are free to customize this behavior. To do so, define a `$redirect` property on your form request:\n\n    /**\n     * The URI that users should be redirected to if validation fails.\n     *\n     * @var string\n     */\n    protected $redirect = '/dashboard';\n\nOr, if you would like to redirect users to a named route, you may define a `$redirectRoute` property instead:\n\n    /**\n     * The route that users should be redirected to if validation fails.\n     *\n     * @var string\n     */\n    protected $redirectRoute = 'dashboard';\n\n<a name=\"authorizing-form-requests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":421,"to":441}}}}],["3871",{"pageContent":"Authorizing Form Requests\n\nThe form request class also contains an `authorize` method. Within this method, you may determine if the authenticated user actually has the authority to update a given resource. For example, you may determine if a user actually owns a blog comment they are attempting to update. Most likely, you will interact with your [authorization gates and policies](/docs/{{version}}/authorization) within this method:\n\n    use App\\Models\\Comment;\n\n    /**\n     * Determine if the user is authorized to make this request.\n     */\n    public function authorize(): bool\n    {\n        $comment = Comment::find($this->route('comment'));\n\n        return $comment && $this->user()->can('update', $comment);\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":442,"to":456}}}}],["3872",{"pageContent":"return $comment && $this->user()->can('update', $comment);\n    }\n\nSince all form requests extend the base Laravel request class, we may use the `user` method to access the currently authenticated user. Also, note the call to the `route` method in the example above. This method grants you access to the URI parameters defined on the route being called, such as the `{comment}` parameter in the example below:\n\n    Route::post('/comment/{comment}');\n\nTherefore, if your application is taking advantage of [route model binding](/docs/{{version}}/routing#route-model-binding), your code may be made even more succinct by accessing the resolved model as a property of the request:\n\n    return $this->user()->can('update', $this->comment);\n\nIf the `authorize` method returns `false`, an HTTP response with a 403 status code will automatically be returned and your controller method will not execute.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":456,"to":467}}}}],["3873",{"pageContent":"If the `authorize` method returns `false`, an HTTP response with a 403 status code will automatically be returned and your controller method will not execute.\n\nIf you plan to handle authorization logic for the request in another part of your application, you may simply return `true` from the `authorize` method:\n\n    /**\n     * Determine if the user is authorized to make this request.\n     */\n    public function authorize(): bool\n    {\n        return true;\n    }\n\n> **Note**\n> You may type-hint any dependencies you need within the `authorize` method's signature. They will automatically be resolved via the Laravel [service container](/docs/{{version}}/container).\n\n<a name=\"customizing-the-error-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":467,"to":482}}}}],["3874",{"pageContent":"Customizing The Error Messages\n\nYou may customize the error messages used by the form request by overriding the `messages` method. This method should return an array of attribute / rule pairs and their corresponding error messages:\n\n    /**\n     * Get the error messages for the defined validation rules.\n     *\n     * @return array<string, string>\n     */\n    public function messages(): array\n    {\n        return [\n            'title.required' => 'A title is required',\n            'body.required' => 'A message is required',\n        ];\n    }\n\n<a name=\"customizing-the-validation-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":483,"to":500}}}}],["3875",{"pageContent":"Customizing The Validation Attributes\n\nMany of Laravel's built-in validation rule error messages contain an `:attribute` placeholder. If you would like the `:attribute` placeholder of your validation message to be replaced with a custom attribute name, you may specify the custom names by overriding the `attributes` method. This method should return an array of attribute / name pairs:\n\n    /**\n     * Get custom attributes for validator errors.\n     *\n     * @return array<string, string>\n     */\n    public function attributes(): array\n    {\n        return [\n            'email' => 'email address',\n        ];\n    }\n\n<a name=\"preparing-input-for-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":501,"to":517}}}}],["3876",{"pageContent":"Preparing Input For Validation\n\nIf you need to prepare or sanitize any data from the request before you apply your validation rules, you may use the `prepareForValidation` method:\n\n    use Illuminate\\Support\\Str;\n\n    /**\n     * Prepare the data for validation.\n     */\n    protected function prepareForValidation(): void\n    {\n        $this->merge([\n            'slug' => Str::slug($this->slug),\n        ]);\n    }\n\nLikewise, if you need to normalize any request data after validation is complete, you may use the `passedValidation` method:\n\n    /**\n     * Handle a passed validation attempt.\n     */\n    protected function passedValidation(): void\n    {\n        $this->replace(['name' => 'Taylor']);\n    }\n\n<a name=\"manually-creating-validators\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":518,"to":544}}}}],["3877",{"pageContent":"Manually Creating Validators\n\nIf you do not want to use the `validate` method on the request, you may create a validator instance manually using the `Validator` [facade](/docs/{{version}}/facades). The `make` method on the facade generates a new validator instance:\n\n    <?php\n\n    namespace App\\Http\\Controllers;\n\n    use Illuminate\\Http\\RedirectResponse;\n    use Illuminate\\Http\\Request;\n    use Illuminate\\Support\\Facades\\Validator;\n\n    class PostController extends Controller\n    {\n        /**\n         * Store a new blog post.\n         */\n        public function store(Request $request): RedirectResponse\n        {\n            $validator = Validator::make($request->all(), [\n                'title' => 'required|unique:posts|max:255',\n                'body' => 'required',\n            ]);\n\n            if ($validator->fails()) {\n                return redirect('post/create')\n                            ->withErrors($validator)\n                            ->withInput();\n            }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":545,"to":573}}}}],["3878",{"pageContent":"if ($validator->fails()) {\n                return redirect('post/create')\n                            ->withErrors($validator)\n                            ->withInput();\n            }\n\n            // Retrieve the validated input...\n            $validated = $validator->validated();\n\n            // Retrieve a portion of the validated input...\n            $validated = $validator->safe()->only(['name', 'email']);\n            $validated = $validator->safe()->except(['name', 'email']);\n\n            // Store the blog post...\n\n            return redirect('/posts');\n        }\n    }\n\nThe first argument passed to the `make` method is the data under validation. The second argument is an array of the validation rules that should be applied to the data.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":573,"to":592}}}}],["3879",{"pageContent":"The first argument passed to the `make` method is the data under validation. The second argument is an array of the validation rules that should be applied to the data.\n\nAfter determining whether the request validation failed, you may use the `withErrors` method to flash the error messages to the session. When using this method, the `$errors` variable will automatically be shared with your views after redirection, allowing you to easily display them back to the user. The `withErrors` method accepts a validator, a `MessageBag`, or a PHP `array`.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":592,"to":594}}}}],["3880",{"pageContent":"Stopping On First Validation Failure\n\nThe `stopOnFirstFailure` method will inform the validator that it should stop validating all attributes once a single validation failure has occurred:\n\n    if ($validator->stopOnFirstFailure()->fails()) {\n        // ...\n    }\n\n<a name=\"automatic-redirection\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":596,"to":604}}}}],["3881",{"pageContent":"Automatic Redirection\n\nIf you would like to create a validator instance manually but still take advantage of the automatic redirection offered by the HTTP request's `validate` method, you may call the `validate` method on an existing validator instance. If validation fails, the user will automatically be redirected or, in the case of an XHR request, a [JSON response will be returned](#validation-error-response-format):\n\n    Validator::make($request->all(), [\n        'title' => 'required|unique:posts|max:255',\n        'body' => 'required',\n    ])->validate();\n\nYou may use the `validateWithBag` method to store the error messages in a [named error bag](#named-error-bags) if validation fails:\n\n    Validator::make($request->all(), [\n        'title' => 'required|unique:posts|max:255',\n        'body' => 'required',\n    ])->validateWithBag('post');\n\n<a name=\"named-error-bags\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":605,"to":621}}}}],["3882",{"pageContent":"Named Error Bags\n\nIf you have multiple forms on a single page, you may wish to name the `MessageBag` containing the validation errors, allowing you to retrieve the error messages for a specific form. To achieve this, pass a name as the second argument to `withErrors`:\n\n    return redirect('register')->withErrors($validator, 'login');\n\nYou may then access the named `MessageBag` instance from the `$errors` variable:\n\n```blade\n{{ $errors->login->first('email') }}\n```\n\n<a name=\"manual-customizing-the-error-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":622,"to":634}}}}],["3883",{"pageContent":"Customizing The Error Messages\n\nIf needed, you may provide custom error messages that a validator instance should use instead of the default error messages provided by Laravel. There are several ways to specify custom messages. First, you may pass the custom messages as the third argument to the `Validator::make` method:\n\n    $validator = Validator::make($input, $rules, $messages = [\n        'required' => 'The :attribute field is required.',\n    ]);\n\nIn this example, the `:attribute` placeholder will be replaced by the actual name of the field under validation. You may also utilize other placeholders in validation messages. For example:\n\n    $messages = [\n        'same' => 'The :attribute and :other must match.',\n        'size' => 'The :attribute must be exactly :size.',\n        'between' => 'The :attribute value :input is not between :min - :max.',\n        'in' => 'The :attribute must be one of the following types: :values',\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":635,"to":650}}}}],["3884",{"pageContent":"<a name=\"specifying-a-custom-message-for-a-given-attribute\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":652,"to":652}}}}],["3885",{"pageContent":"Specifying A Custom Message For A Given Attribute\n\nSometimes you may wish to specify a custom error message only for a specific attribute. You may do so using \"dot\" notation. Specify the attribute's name first, followed by the rule:\n\n    $messages = [\n        'email.required' => 'We need to know your email address!',\n    ];\n\n<a name=\"specifying-custom-attribute-values\"></a>\n#### Specifying Custom Attribute Values\n\nMany of Laravel's built-in error messages include an `:attribute` placeholder that is replaced with the name of the field or attribute under validation. To customize the values used to replace these placeholders for specific fields, you may pass an array of custom attributes as the fourth argument to the `Validator::make` method:\n\n    $validator = Validator::make($input, $rules, $messages, [\n        'email' => 'email address',\n    ]);\n\n<a name=\"performing-additional-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":653,"to":670}}}}],["3886",{"pageContent":"Performing Additional Validation\n\nSometimes you need to perform additional validation after your initial validation is complete. You can accomplish this using the validator's `after` method. The `after` method accepts a closure or an array of callables which will be invoked after validation is complete. The given callables will receive an `Illuminate\\Validation\\Validator` instance, allowing you to raise additional error messages if necessary:\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $validator = Validator::make(/* ... */);\n\n    $validator->after(function ($validator) {\n        if ($this->somethingElseIsInvalid()) {\n            $validator->errors()->add(\n                'field', 'Something is wrong with this field!'\n            );\n        }\n    });\n\n    if ($validator->fails()) {\n        // ...\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":671,"to":689}}}}],["3887",{"pageContent":"if ($validator->fails()) {\n        // ...\n    }\n\nAs noted, the `after` method also accepts an array of callables, which is particularly convenient if your \"after validation\" logic is encapsulated in invokable classes, which will receive an `Illuminate\\Validation\\Validator` instance via their `__invoke` method:\n\n```php\nuse App\\Validation\\ValidateShippingTime;\nuse App\\Validation\\ValidateUserStatus;\n\n$validator->after([\n    new ValidateUserStatus,\n    new ValidateShippingTime,\n    function ($validator) {\n        // ...\n    },\n]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":689,"to":705}}}}],["3888",{"pageContent":"<a name=\"working-with-validated-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":708,"to":708}}}}],["3889",{"pageContent":"Working With Validated Input\n\nAfter validating incoming request data using a form request or a manually created validator instance, you may wish to retrieve the incoming request data that actually underwent validation. This can be accomplished in several ways. First, you may call the `validated` method on a form request or validator instance. This method returns an array of the data that was validated:\n\n    $validated = $request->validated();\n\n    $validated = $validator->validated();\n\nAlternatively, you may call the `safe` method on a form request or validator instance. This method returns an instance of `Illuminate\\Support\\ValidatedInput`. This object exposes `only`, `except`, and `all` methods to retrieve a subset of the validated data or the entire array of validated data:\n\n    $validated = $request->safe()->only(['name', 'email']);\n\n    $validated = $request->safe()->except(['name', 'email']);\n\n    $validated = $request->safe()->all();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":709,"to":723}}}}],["3890",{"pageContent":"$validated = $request->safe()->only(['name', 'email']);\n\n    $validated = $request->safe()->except(['name', 'email']);\n\n    $validated = $request->safe()->all();\n\nIn addition, the `Illuminate\\Support\\ValidatedInput` instance may be iterated over and accessed like an array:\n\n    // Validated data may be iterated...\n    foreach ($request->safe() as $key => $value) {\n        // ...\n    }\n\n    // Validated data may be accessed as an array...\n    $validated = $request->safe();\n\n    $email = $validated['email'];\n\nIf you would like to add additional fields to the validated data, you may call the `merge` method:\n\n    $validated = $request->safe()->merge(['name' => 'Taylor Otwell']);\n\nIf you would like to retrieve the validated data as a [collection](/docs/{{version}}/collections) instance, you may call the `collect` method:\n\n    $collection = $request->safe()->collect();\n\n<a name=\"working-with-error-messages\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":723,"to":749}}}}],["3891",{"pageContent":"Working With Error Messages\n\nAfter calling the `errors` method on a `Validator` instance, you will receive an `Illuminate\\Support\\MessageBag` instance, which has a variety of convenient methods for working with error messages. The `$errors` variable that is automatically made available to all views is also an instance of the `MessageBag` class.\n\n<a name=\"retrieving-the-first-error-message-for-a-field\"></a>\n#### Retrieving The First Error Message For A Field\n\nTo retrieve the first error message for a given field, use the `first` method:\n\n    $errors = $validator->errors();\n\n    echo $errors->first('email');\n\n<a name=\"retrieving-all-error-messages-for-a-field\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":750,"to":763}}}}],["3892",{"pageContent":"Retrieving All Error Messages For A Field\n\nIf you need to retrieve an array of all the messages for a given field, use the `get` method:\n\n    foreach ($errors->get('email') as $message) {\n        // ...\n    }\n\nIf you are validating an array form field, you may retrieve all of the messages for each of the array elements using the `*` character:\n\n    foreach ($errors->get('attachments.*') as $message) {\n        // ...\n    }\n\n<a name=\"retrieving-all-error-messages-for-all-fields\"></a>\n#### Retrieving All Error Messages For All Fields\n\nTo retrieve an array of all messages for all fields, use the `all` method:\n\n    foreach ($errors->all() as $message) {\n        // ...\n    }\n\n<a name=\"determining-if-messages-exist-for-a-field\"></a>\n#### Determining If Messages Exist For A Field\n\nThe `has` method may be used to determine if any error messages exist for a given field:\n\n    if ($errors->has('email')) {\n        // ...\n    }\n\n<a name=\"specifying-custom-messages-in-language-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":764,"to":796}}}}],["3893",{"pageContent":"Specifying Custom Messages In Language Files\n\nLaravel's built-in validation rules each have an error message that is located in your application's `lang/en/validation.php` file. If your application does not have a `lang` directory, you may instruct Laravel to create it using the `lang:publish` Artisan command.\n\nWithin the `lang/en/validation.php` file, you will find a translation entry for each validation rule. You are free to change or modify these messages based on the needs of your application.\n\nIn addition, you may copy this file to another language directory to translate the messages for your application's language. To learn more about Laravel localization, check out the complete [localization documentation](/docs/{{version}}/localization).\n\n> **Warning**\n> By default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files, you may publish them via the `lang:publish` Artisan command.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":797,"to":806}}}}],["3894",{"pageContent":"<a name=\"custom-messages-for-specific-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":808,"to":808}}}}],["3895",{"pageContent":"Custom Messages For Specific Attributes\n\nYou may customize the error messages used for specified attribute and rule combinations within your application's validation language files. To do so, add your message customizations to the `custom` array of your application's `lang/xx/validation.php` language file:\n\n    'custom' => [\n        'email' => [\n            'required' => 'We need to know your email address!',\n            'max' => 'Your email address is too long!'\n        ],\n    ],\n\n<a name=\"specifying-attribute-in-language-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":809,"to":820}}}}],["3896",{"pageContent":"Specifying Attributes In Language Files\n\nMany of Laravel's built-in error messages include an `:attribute` placeholder that is replaced with the name of the field or attribute under validation. If you would like the `:attribute` portion of your validation message to be replaced with a custom value, you may specify the custom attribute name in the `attributes` array of your `lang/xx/validation.php` language file:\n\n    'attributes' => [\n        'email' => 'email address',\n    ],\n\n> **Warning**\n> By default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files, you may publish them via the `lang:publish` Artisan command.\n\n<a name=\"specifying-values-in-language-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":821,"to":832}}}}],["3897",{"pageContent":"Specifying Values In Language Files\n\nSome of Laravel's built-in validation rule error messages contain a `:value` placeholder that is replaced with the current value of the request attribute. However, you may occasionally need the `:value` portion of your validation message to be replaced with a custom representation of the value. For example, consider the following rule that specifies that a credit card number is required if the `payment_type` has a value of `cc`:\n\n    Validator::make($request->all(), [\n        'credit_card_number' => 'required_if:payment_type,cc'\n    ]);\n\nIf this validation rule fails, it will produce the following error message:\n\n```none\nThe credit card number field is required when payment type is cc.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":833,"to":844}}}}],["3898",{"pageContent":"Instead of displaying `cc` as the payment type value, you may specify a more user-friendly value representation in your `lang/xx/validation.php` language file by defining a `values` array:\n\n    'values' => [\n        'payment_type' => [\n            'cc' => 'credit card'\n        ],\n    ],\n\n> **Warning**\n> By default, the Laravel application skeleton does not include the `lang` directory. If you would like to customize Laravel's language files, you may publish them via the `lang:publish` Artisan command.\n\nAfter defining this value, the validation rule will produce the following error message:\n\n```none\nThe credit card number field is required when payment type is credit card.\n```\n\n<a name=\"available-validation-rules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":847,"to":864}}}}],["3899",{"pageContent":"Available Validation Rules\n\nBelow is a list of all available validation rules and their function:\n\n<style>\n    .collection-method-list > p {\n        columns: 10.8em 3; -moz-columns: 10.8em 3; -webkit-columns: 10.8em 3;\n    }\n\n    .collection-method-list a {\n        display: block;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n</style>\n\n<div class=\"collection-method-list\" markdown=\"1\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":865,"to":882}}}}],["3900",{"pageContent":"[Accepted](#rule-accepted)\n[Accepted If](#rule-accepted-if)\n[Active URL](#rule-active-url)\n[After (Date)](#rule-after)\n[After Or Equal (Date)](#rule-after-or-equal)\n[Alpha](#rule-alpha)\n[Alpha Dash](#rule-alpha-dash)\n[Alpha Numeric](#rule-alpha-num)\n[Array](#rule-array)\n[Ascii](#rule-ascii)\n[Bail](#rule-bail)\n[Before (Date)](#rule-before)\n[Before Or Equal (Date)](#rule-before-or-equal)\n[Between](#rule-between)\n[Boolean](#rule-boolean)\n[Confirmed](#rule-confirmed)\n[Current Password](#rule-current-password)\n[Date](#rule-date)\n[Date Equals](#rule-date-equals)\n[Date Format](#rule-date-format)\n[Decimal](#rule-decimal)\n[Declined](#rule-declined)\n[Declined If](#rule-declined-if)\n[Different](#rule-different)\n[Digits](#rule-digits)\n[Digits Between](#rule-digits-between)\n[Dimensions (Image Files)](#rule-dimensions)\n[Distinct](#rule-distinct)\n[Doesnt Start With](#rule-doesnt-start-with)\n[Doesnt End With](#rule-doesnt-end-with)\n[Email](#rule-email)\n[Ends With](#rule-ends-with)\n[Enum](#rule-enum)\n[Exclude](#rule-exclude)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":884,"to":917}}}}],["3901",{"pageContent":"[Distinct](#rule-distinct)\n[Doesnt Start With](#rule-doesnt-start-with)\n[Doesnt End With](#rule-doesnt-end-with)\n[Email](#rule-email)\n[Ends With](#rule-ends-with)\n[Enum](#rule-enum)\n[Exclude](#rule-exclude)\n[Exclude If](#rule-exclude-if)\n[Exclude Unless](#rule-exclude-unless)\n[Exclude With](#rule-exclude-with)\n[Exclude Without](#rule-exclude-without)\n[Exists (Database)](#rule-exists)\n[File](#rule-file)\n[Filled](#rule-filled)\n[Greater Than](#rule-gt)\n[Greater Than Or Equal](#rule-gte)\n[Image (File)](#rule-image)\n[In](#rule-in)\n[In Array](#rule-in-array)\n[Integer](#rule-integer)\n[IP Address](#rule-ip)\n[JSON](#rule-json)\n[Less Than](#rule-lt)\n[Less Than Or Equal](#rule-lte)\n[Lowercase](#rule-lowercase)\n[MAC Address](#rule-mac)\n[Max](#rule-max)\n[Max Digits](#rule-max-digits)\n[MIME Types](#rule-mimetypes)\n[MIME Type By File Extension](#rule-mimes)\n[Min](#rule-min)\n[Min Digits](#rule-min-digits)\n[Missing](#rule-missing)\n[Missing If](#rule-missing-if)\n[Missing Unless](#rule-missing-unless)\n[Missing With](#rule-missing-with)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":917,"to":952}}}}],["3902",{"pageContent":"[Min](#rule-min)\n[Min Digits](#rule-min-digits)\n[Missing](#rule-missing)\n[Missing If](#rule-missing-if)\n[Missing Unless](#rule-missing-unless)\n[Missing With](#rule-missing-with)\n[Missing With All](#rule-missing-with-all)\n[Multiple Of](#rule-multiple-of)\n[Not In](#rule-not-in)\n[Not Regex](#rule-not-regex)\n[Nullable](#rule-nullable)\n[Numeric](#rule-numeric)\n[Password](#rule-password)\n[Present](#rule-present)\n[Prohibited](#rule-prohibited)\n[Prohibited If](#rule-prohibited-if)\n[Prohibited Unless](#rule-prohibited-unless)\n[Prohibits](#rule-prohibits)\n[Regular Expression](#rule-regex)\n[Required](#rule-required)\n[Required If](#rule-required-if)\n[Required If Accepted](#rule-required-if-accepted)\n[Required Unless](#rule-required-unless)\n[Required With](#rule-required-with)\n[Required With All](#rule-required-with-all)\n[Required Without](#rule-required-without)\n[Required Without All](#rule-required-without-all)\n[Required Array Keys](#rule-required-array-keys)\n[Same](#rule-same)\n[Size](#rule-size)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":952,"to":981}}}}],["3903",{"pageContent":"[Required Without](#rule-required-without)\n[Required Without All](#rule-required-without-all)\n[Required Array Keys](#rule-required-array-keys)\n[Same](#rule-same)\n[Size](#rule-size)\n[Sometimes](#validating-when-present)\n[Starts With](#rule-starts-with)\n[String](#rule-string)\n[Timezone](#rule-timezone)\n[Unique (Database)](#rule-unique)\n[Uppercase](#rule-uppercase)\n[URL](#rule-url)\n[ULID](#rule-ulid)\n[UUID](#rule-uuid)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":981,"to":994}}}}],["3904",{"pageContent":"</div>\n\n<a name=\"rule-accepted\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":996,"to":998}}}}],["3905",{"pageContent":"accepted\n\nThe field under validation must be `\"yes\"`, `\"on\"`, `1`, or `true`. This is useful for validating \"Terms of Service\" acceptance or similar fields.\n\n<a name=\"rule-accepted-if\"></a>\n#### accepted_if:anotherfield,value,...\n\nThe field under validation must be `\"yes\"`, `\"on\"`, `1`, or `true` if another field under validation is equal to a specified value. This is useful for validating \"Terms of Service\" acceptance or similar fields.\n\n<a name=\"rule-active-url\"></a>\n#### active_url\n\nThe field under validation must have a valid A or AAAA record according to the `dns_get_record` PHP function. The hostname of the provided URL is extracted using the `parse_url` PHP function before being passed to `dns_get_record`.\n\n<a name=\"rule-after\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":999,"to":1013}}}}],["3906",{"pageContent":"after:_date_\n\nThe field under validation must be a value after a given date. The dates will be passed into the `strtotime` PHP function in order to be converted to a valid `DateTime` instance:\n\n    'start_date' => 'required|date|after:tomorrow'\n\nInstead of passing a date string to be evaluated by `strtotime`, you may specify another field to compare against the date:\n\n    'finish_date' => 'required|date|after:start_date'\n\n<a name=\"rule-after-or-equal\"></a>\n#### after\\_or\\_equal:_date_\n\nThe field under validation must be a value after or equal to the given date. For more information, see the [after](#rule-after) rule.\n\n<a name=\"rule-alpha\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1014,"to":1029}}}}],["3907",{"pageContent":"after\\_or\\_equal:_date_\n\nThe field under validation must be a value after or equal to the given date. For more information, see the [after](#rule-after) rule.\n\n<a name=\"rule-alpha\"></a>\n#### alpha\n\nThe field under validation must be entirely Unicode alphabetic characters contained in [`\\p{L}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AL%3A%5D&g=&i=) and [`\\p{M}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AM%3A%5D&g=&i=).\n\nTo restrict this validation rule to characters in the ASCII range (`a-z` and `A-Z`), you may provide the `ascii` option to the validation rule:\n\n```php\n'username' => 'alpha:ascii',\n```\n\n<a name=\"rule-alpha-dash\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1029,"to":1044}}}}],["3908",{"pageContent":"alpha_dash\n\nThe field under validation must be entirely Unicode alpha-numeric characters contained in [`\\p{L}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AL%3A%5D&g=&i=), [`\\p{M}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AM%3A%5D&g=&i=), [`\\p{N}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AN%3A%5D&g=&i=), as well as ASCII dashes (`-`) and ASCII underscores (`_`).\n\nTo restrict this validation rule to characters in the ASCII range (`a-z` and `A-Z`), you may provide the `ascii` option to the validation rule:\n\n```php\n'username' => 'alpha_dash:ascii',\n```\n\n<a name=\"rule-alpha-num\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1045,"to":1055}}}}],["3909",{"pageContent":"alpha_num\n\nThe field under validation must be entirely Unicode alpha-numeric characters contained in [`\\p{L}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AL%3A%5D&g=&i=), [`\\p{M}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AM%3A%5D&g=&i=), and [`\\p{N}`](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5B%3AN%3A%5D&g=&i=).\n\nTo restrict this validation rule to characters in the ASCII range (`a-z` and `A-Z`), you may provide the `ascii` option to the validation rule:\n\n```php\n'username' => 'alpha_num:ascii',\n```\n\n<a name=\"rule-array\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1056,"to":1066}}}}],["3910",{"pageContent":"array\n\nThe field under validation must be a PHP `array`.\n\nWhen additional values are provided to the `array` rule, each key in the input array must be present within the list of values provided to the rule. In the following example, the `admin` key in the input array is invalid since it is not contained in the list of values provided to the `array` rule:\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $input = [\n        'user' => [\n            'name' => 'Taylor Otwell',\n            'username' => 'taylorotwell',\n            'admin' => true,\n        ],\n    ];\n\n    Validator::make($input, [\n        'user' => 'array:name,username',\n    ]);\n\nIn general, you should always specify the array keys that are allowed to be present within your array.\n\n<a name=\"rule-ascii\"></a>\n#### ascii\n\nThe field under validation must be entirely 7-bit ASCII characters.\n\n<a name=\"rule-bail\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1067,"to":1094}}}}],["3911",{"pageContent":"ascii\n\nThe field under validation must be entirely 7-bit ASCII characters.\n\n<a name=\"rule-bail\"></a>\n#### bail\n\nStop running validation rules for the field after the first validation failure.\n\nWhile the `bail` rule will only stop validating a specific field when it encounters a validation failure, the `stopOnFirstFailure` method will inform the validator that it should stop validating all attributes once a single validation failure has occurred:\n\n    if ($validator->stopOnFirstFailure()->fails()) {\n        // ...\n    }\n\n<a name=\"rule-before\"></a>\n#### before:_date_\n\nThe field under validation must be a value preceding the given date. The dates will be passed into the PHP `strtotime` function in order to be converted into a valid `DateTime` instance. In addition, like the [`after`](#rule-after) rule, the name of another field under validation may be supplied as the value of `date`.\n\n<a name=\"rule-before-or-equal\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1094,"to":1114}}}}],["3912",{"pageContent":"before\\_or\\_equal:_date_\n\nThe field under validation must be a value preceding or equal to the given date. The dates will be passed into the PHP `strtotime` function in order to be converted into a valid `DateTime` instance. In addition, like the [`after`](#rule-after) rule, the name of another field under validation may be supplied as the value of `date`.\n\n<a name=\"rule-between\"></a>\n#### between:_min_,_max_\n\nThe field under validation must have a size between the given _min_ and _max_ (inclusive). Strings, numerics, arrays, and files are evaluated in the same fashion as the [`size`](#rule-size) rule.\n\n<a name=\"rule-boolean\"></a>\n#### boolean\n\nThe field under validation must be able to be cast as a boolean. Accepted input are `true`, `false`, `1`, `0`, `\"1\"`, and `\"0\"`.\n\n<a name=\"rule-confirmed\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1115,"to":1129}}}}],["3913",{"pageContent":"boolean\n\nThe field under validation must be able to be cast as a boolean. Accepted input are `true`, `false`, `1`, `0`, `\"1\"`, and `\"0\"`.\n\n<a name=\"rule-confirmed\"></a>\n#### confirmed\n\nThe field under validation must have a matching field of `{field}_confirmation`. For example, if the field under validation is `password`, a matching `password_confirmation` field must be present in the input.\n\n<a name=\"rule-current-password\"></a>\n#### current_password\n\nThe field under validation must match the authenticated user's password. You may specify an [authentication guard](/docs/{{version}}/authentication) using the rule's first parameter:\n\n    'password' => 'current_password:api'\n\n<a name=\"rule-date\"></a>\n#### date\n\nThe field under validation must be a valid, non-relative date according to the `strtotime` PHP function.\n\n<a name=\"rule-date-equals\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1129,"to":1150}}}}],["3914",{"pageContent":"date\n\nThe field under validation must be a valid, non-relative date according to the `strtotime` PHP function.\n\n<a name=\"rule-date-equals\"></a>\n#### date_equals:_date_\n\nThe field under validation must be equal to the given date. The dates will be passed into the PHP `strtotime` function in order to be converted into a valid `DateTime` instance.\n\n<a name=\"rule-date-format\"></a>\n#### date_format:_format_,...\n\nThe field under validation must match one of the given _formats_. You should use **either** `date` or `date_format` when validating a field, not both. This validation rule supports all formats supported by PHP's [DateTime](https://www.php.net/manual/en/class.datetime.php) class.\n\n<a name=\"rule-decimal\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1150,"to":1164}}}}],["3915",{"pageContent":"decimal:_min_,_max_\n\nThe field under validation must be numeric and must contain the specified number of decimal places:\n\n    // Must have exactly two decimal places (9.99)...\n    'price' => 'decimal:2'\n\n    // Must have between 2 and 4 decimal places...\n    'price' => 'decimal:2,4'\n\n<a name=\"rule-declined\"></a>\n#### declined\n\nThe field under validation must be `\"no\"`, `\"off\"`, `0`, or `false`.\n\n<a name=\"rule-declined-if\"></a>\n#### declined_if:anotherfield,value,...\n\nThe field under validation must be `\"no\"`, `\"off\"`, `0`, or `false` if another field under validation is equal to a specified value.\n\n<a name=\"rule-different\"></a>\n#### different:_field_\n\nThe field under validation must have a different value than _field_.\n\n<a name=\"rule-digits\"></a>\n#### digits:_value_\n\nThe integer under validation must have an exact length of _value_.\n\n<a name=\"rule-digits-between\"></a>\n#### digits_between:_min_,_max_\n\nThe integer validation must have a length between the given _min_ and _max_.\n\n<a name=\"rule-dimensions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1165,"to":1200}}}}],["3916",{"pageContent":"dimensions\n\nThe file under validation must be an image meeting the dimension constraints as specified by the rule's parameters:\n\n    'avatar' => 'dimensions:min_width=100,min_height=200'\n\nAvailable constraints are: _min\\_width_, _max\\_width_, _min\\_height_, _max\\_height_, _width_, _height_, _ratio_.\n\nA _ratio_ constraint should be represented as width divided by height. This can be specified either by a fraction like `3/2` or a float like `1.5`:\n\n    'avatar' => 'dimensions:ratio=3/2'\n\nSince this rule requires several arguments, you may use the `Rule::dimensions` method to fluently construct the rule:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($data, [\n        'avatar' => [\n            'required',\n            Rule::dimensions()->maxWidth(1000)->maxHeight(500)->ratio(3 / 2),\n        ],\n    ]);\n\n<a name=\"rule-distinct\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1201,"to":1225}}}}],["3917",{"pageContent":"distinct\n\nWhen validating arrays, the field under validation must not have any duplicate values:\n\n    'foo.*.id' => 'distinct'\n\nDistinct uses loose variable comparisons by default. To use strict comparisons, you may add the `strict` parameter to your validation rule definition:\n\n    'foo.*.id' => 'distinct:strict'\n\nYou may add `ignore_case` to the validation rule's arguments to make the rule ignore capitalization differences:\n\n    'foo.*.id' => 'distinct:ignore_case'\n\n<a name=\"rule-doesnt-start-with\"></a>\n#### doesnt_start_with:_foo_,_bar_,...\n\nThe field under validation must not start with one of the given values.\n\n<a name=\"rule-doesnt-end-with\"></a>\n#### doesnt_end_with:_foo_,_bar_,...\n\nThe field under validation must not end with one of the given values.\n\n<a name=\"rule-email\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1226,"to":1250}}}}],["3918",{"pageContent":"email\n\nThe field under validation must be formatted as an email address. This validation rule utilizes the [`egulias/email-validator`](https://github.com/egulias/EmailValidator) package for validating the email address. By default, the `RFCValidation` validator is applied, but you can apply other validation styles as well:\n\n    'email' => 'email:rfc,dns'\n\nThe example above will apply the `RFCValidation` and `DNSCheckValidation` validations. Here's a full list of validation styles you can apply:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- `rfc`: `RFCValidation`\n- `strict`: `NoRFCWarningsValidation`\n- `dns`: `DNSCheckValidation`\n- `spoof`: `SpoofCheckValidation`\n- `filter`: `FilterEmailValidation`\n- `filter_unicode`: `FilterEmailValidation::unicode()`\n\n</div>\n\nThe `filter` validator, which uses PHP's `filter_var` function, ships with Laravel and was Laravel's default email validation behavior prior to Laravel version 5.8.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1251,"to":1270}}}}],["3919",{"pageContent":"</div>\n\nThe `filter` validator, which uses PHP's `filter_var` function, ships with Laravel and was Laravel's default email validation behavior prior to Laravel version 5.8.\n\n> **Warning**  \n> The `dns` and `spoof` validators require the PHP `intl` extension.\n\n<a name=\"rule-ends-with\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1270,"to":1277}}}}],["3920",{"pageContent":"ends_with:_foo_,_bar_,...\n\nThe field under validation must end with one of the given values.\n\n<a name=\"rule-enum\"></a>\n#### enum\n\nThe `Enum` rule is a class based rule that validates whether the field under validation contains a valid enum value. The `Enum` rule accepts the name of the enum as its only constructor argument:\n\n    use App\\Enums\\ServerStatus;\n    use Illuminate\\Validation\\Rule;\n\n    $request->validate([\n        'status' => [Rule::enum(ServerStatus::class)],\n    ]);\n\n<a name=\"rule-exclude\"></a>\n#### exclude\n\nThe field under validation will be excluded from the request data returned by the `validate` and `validated` methods.\n\n<a name=\"rule-exclude-if\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1278,"to":1299}}}}],["3921",{"pageContent":"exclude\n\nThe field under validation will be excluded from the request data returned by the `validate` and `validated` methods.\n\n<a name=\"rule-exclude-if\"></a>\n#### exclude_if:_anotherfield_,_value_\n\nThe field under validation will be excluded from the request data returned by the `validate` and `validated` methods if the _anotherfield_ field is equal to _value_.\n\nIf complex conditional exclusion logic is required, you may utilize the `Rule::excludeIf` method. This method accepts a boolean or a closure. When given a closure, the closure should return `true` or `false` to indicate if the field under validation should be excluded:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($request->all(), [\n        'role_id' => Rule::excludeIf($request->user()->is_admin),\n    ]);\n\n    Validator::make($request->all(), [\n        'role_id' => Rule::excludeIf(fn () => $request->user()->is_admin),\n    ]);\n\n<a name=\"rule-exclude-unless\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1299,"to":1321}}}}],["3922",{"pageContent":"exclude_unless:_anotherfield_,_value_\n\nThe field under validation will be excluded from the request data returned by the `validate` and `validated` methods unless _anotherfield_'s field is equal to _value_. If _value_ is `null` (`exclude_unless:name,null`), the field under validation will be excluded unless the comparison field is `null` or the comparison field is missing from the request data.\n\n<a name=\"rule-exclude-with\"></a>\n#### exclude_with:_anotherfield_\n\nThe field under validation will be excluded from the request data returned by the `validate` and `validated` methods if the _anotherfield_ field is present.\n\n<a name=\"rule-exclude-without\"></a>\n#### exclude_without:_anotherfield_\n\nThe field under validation will be excluded from the request data returned by the `validate` and `validated` methods if the _anotherfield_ field is not present.\n\n<a name=\"rule-exists\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1322,"to":1336}}}}],["3923",{"pageContent":"exists:_table_,_column_\n\nThe field under validation must exist in a given database table.\n\n<a name=\"basic-usage-of-exists-rule\"></a>\n#### Basic Usage Of Exists Rule\n\n    'state' => 'exists:states'\n\nIf the `column` option is not specified, the field name will be used. So, in this case, the rule will validate that the `states` database table contains a record with a `state` column value matching the request's `state` attribute value.\n\n<a name=\"specifying-a-custom-column-name\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1337,"to":1348}}}}],["3924",{"pageContent":"Specifying A Custom Column Name\n\nYou may explicitly specify the database column name that should be used by the validation rule by placing it after the database table name:\n\n    'state' => 'exists:states,abbreviation'\n\nOccasionally, you may need to specify a specific database connection to be used for the `exists` query. You can accomplish this by prepending the connection name to the table name:\n\n    'email' => 'exists:connection.staff,email'\n\nInstead of specifying the table name directly, you may specify the Eloquent model which should be used to determine the table name:\n\n    'user_id' => 'exists:App\\Models\\User,id'\n\nIf you would like to customize the query executed by the validation rule, you may use the `Rule` class to fluently define the rule. In this example, we'll also specify the validation rules as an array instead of using the `|` character to delimit them:\n\n    use Illuminate\\Database\\Query\\Builder;\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1349,"to":1367}}}}],["3925",{"pageContent":"use Illuminate\\Database\\Query\\Builder;\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($data, [\n        'email' => [\n            'required',\n            Rule::exists('staff')->where(function (Builder $query) {\n                return $query->where('account_id', 1);\n            }),\n        ],\n    ]);\n\nYou may explicitly specify the database column name that should be used by the `exists` rule generated by the `Rule::exists` method by providing the column name as the second argument to the `exists` method:\n\n    'state' => Rule::exists('states', 'abbreviation'),\n\n<a name=\"rule-file\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1367,"to":1384}}}}],["3926",{"pageContent":"file\n\nThe field under validation must be a successfully uploaded file.\n\n<a name=\"rule-filled\"></a>\n#### filled\n\nThe field under validation must not be empty when it is present.\n\n<a name=\"rule-gt\"></a>\n#### gt:_field_\n\nThe field under validation must be greater than the given _field_ or _value_. The two fields must be of the same type. Strings, numerics, arrays, and files are evaluated using the same conventions as the [`size`](#rule-size) rule.\n\n<a name=\"rule-gte\"></a>\n#### gte:_field_\n\nThe field under validation must be greater than or equal to the given _field_ or _value_. The two fields must be of the same type. Strings, numerics, arrays, and files are evaluated using the same conventions as the [`size`](#rule-size) rule.\n\n<a name=\"rule-image\"></a>\n#### image\n\nThe file under validation must be an image (jpg, jpeg, png, bmp, gif, svg, or webp).\n\n<a name=\"rule-in\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1385,"to":1409}}}}],["3927",{"pageContent":"in:_foo_,_bar_,...\n\nThe field under validation must be included in the given list of values. Since this rule often requires you to `implode` an array, the `Rule::in` method may be used to fluently construct the rule:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($data, [\n        'zones' => [\n            'required',\n            Rule::in(['first-zone', 'second-zone']),\n        ],\n    ]);\n\nWhen the `in` rule is combined with the `array` rule, each value in the input array must be present within the list of values provided to the `in` rule. In the following example, the `LAS` airport code in the input array is invalid since it is not contained in the list of airports provided to the `in` rule:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    $input = [\n        'airports' => ['NYC', 'LAS'],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1410,"to":1431}}}}],["3928",{"pageContent":"use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    $input = [\n        'airports' => ['NYC', 'LAS'],\n    ];\n\n    Validator::make($input, [\n        'airports' => [\n            'required',\n            'array',\n        ],\n        'airports.*' => Rule::in(['NYC', 'LIT']),\n    ]);\n\n<a name=\"rule-in-array\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1431,"to":1446}}}}],["3929",{"pageContent":"in_array:_anotherfield_.*\n\nThe field under validation must exist in _anotherfield_'s values.\n\n<a name=\"rule-integer\"></a>\n#### integer\n\nThe field under validation must be an integer.\n\n> **Warning**  \n> This validation rule does not verify that the input is of the \"integer\" variable type, only that the input is of a type accepted by PHP's `FILTER_VALIDATE_INT` rule. If you need to validate the input as being a number please use this rule in combination with [the `numeric` validation rule](#rule-numeric).\n\n<a name=\"rule-ip\"></a>\n#### ip\n\nThe field under validation must be an IP address.\n\n<a name=\"ipv4\"></a>\n#### ipv4\n\nThe field under validation must be an IPv4 address.\n\n<a name=\"ipv6\"></a>\n#### ipv6\n\nThe field under validation must be an IPv6 address.\n\n<a name=\"rule-json\"></a>\n#### json\n\nThe field under validation must be a valid JSON string.\n\n<a name=\"rule-lt\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1447,"to":1479}}}}],["3930",{"pageContent":"ipv6\n\nThe field under validation must be an IPv6 address.\n\n<a name=\"rule-json\"></a>\n#### json\n\nThe field under validation must be a valid JSON string.\n\n<a name=\"rule-lt\"></a>\n#### lt:_field_\n\nThe field under validation must be less than the given _field_. The two fields must be of the same type. Strings, numerics, arrays, and files are evaluated using the same conventions as the [`size`](#rule-size) rule.\n\n<a name=\"rule-lte\"></a>\n#### lte:_field_\n\nThe field under validation must be less than or equal to the given _field_. The two fields must be of the same type. Strings, numerics, arrays, and files are evaluated using the same conventions as the [`size`](#rule-size) rule.\n\n<a name=\"rule-lowercase\"></a>\n#### lowercase\n\nThe field under validation must be lowercase.\n\n<a name=\"rule-mac\"></a>\n#### mac_address\n\nThe field under validation must be a MAC address.\n\n<a name=\"rule-max\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1479,"to":1508}}}}],["3931",{"pageContent":"lowercase\n\nThe field under validation must be lowercase.\n\n<a name=\"rule-mac\"></a>\n#### mac_address\n\nThe field under validation must be a MAC address.\n\n<a name=\"rule-max\"></a>\n#### max:_value_\n\nThe field under validation must be less than or equal to a maximum _value_. Strings, numerics, arrays, and files are evaluated in the same fashion as the [`size`](#rule-size) rule.\n\n<a name=\"rule-max-digits\"></a>\n#### max_digits:_value_\n\nThe integer under validation must have a maximum length of _value_.\n\n<a name=\"rule-mimetypes\"></a>\n#### mimetypes:_text/plain_,...\n\nThe file under validation must match one of the given MIME types:\n\n    'video' => 'mimetypes:video/avi,video/mpeg,video/quicktime'\n\nTo determine the MIME type of the uploaded file, the file's contents will be read and the framework will attempt to guess the MIME type, which may be different from the client's provided MIME type.\n\n<a name=\"rule-mimes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1508,"to":1536}}}}],["3932",{"pageContent":"mimes:_foo_,_bar_,...\n\nThe file under validation must have a MIME type corresponding to one of the listed extensions.\n\n<a name=\"basic-usage-of-mime-rule\"></a>\n#### Basic Usage Of MIME Rule\n\n    'photo' => 'mimes:jpg,bmp,png'\n\nEven though you only need to specify the extensions, this rule actually validates the MIME type of the file by reading the file's contents and guessing its MIME type. A full listing of MIME types and their corresponding extensions may be found at the following location:\n\n[https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types](https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types)\n\n<a name=\"rule-min\"></a>\n#### min:_value_\n\nThe field under validation must have a minimum _value_. Strings, numerics, arrays, and files are evaluated in the same fashion as the [`size`](#rule-size) rule.\n\n<a name=\"rule-min-digits\"></a>\n#### min_digits:_value_\n\nThe integer under validation must have a minimum length of _value_.\n\n<a name=\"rule-multiple-of\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1537,"to":1560}}}}],["3933",{"pageContent":"min_digits:_value_\n\nThe integer under validation must have a minimum length of _value_.\n\n<a name=\"rule-multiple-of\"></a>\n#### multiple_of:_value_\n\nThe field under validation must be a multiple of _value_.\n\n<a name=\"rule-missing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1560,"to":1569}}}}],["3934",{"pageContent":"multiple_of:_value_\n\nThe field under validation must be a multiple of _value_.\n\n<a name=\"rule-missing\"></a>\n#### missing\n\nThe field under validation must not be present in the input data.\n\n <a name=\"rule-missing-if\"></a>\n #### missing_if:_anotherfield_,_value_,...\n\n The field under validation must not be present if the _anotherfield_ field is equal to any _value_.\n\n <a name=\"rule-missing-unless\"></a>\n #### missing_unless:_anotherfield_,_value_\n\nThe field under validation must not be present unless the _anotherfield_ field is equal to any _value_.\n\n <a name=\"rule-missing-with\"></a>\n #### missing_with:_foo_,_bar_,...\n\n The field under validation must not be present _only if_ any of the other specified fields are present.\n\n <a name=\"rule-missing-with-all\"></a>\n #### missing_with_all:_foo_,_bar_,...\n\n The field under validation must not be present _only if_ all of the other specified fields are present.\n\n<a name=\"rule-not-in\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1569,"to":1598}}}}],["3935",{"pageContent":"not_in:_foo_,_bar_,...\n\nThe field under validation must not be included in the given list of values. The `Rule::notIn` method may be used to fluently construct the rule:\n\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($data, [\n        'toppings' => [\n            'required',\n            Rule::notIn(['sprinkles', 'cherries']),\n        ],\n    ]);\n\n<a name=\"rule-not-regex\"></a>\n#### not_regex:_pattern_\n\nThe field under validation must not match the given regular expression.\n\nInternally, this rule uses the PHP `preg_match` function. The pattern specified should obey the same formatting required by `preg_match` and thus also include valid delimiters. For example: `'email' => 'not_regex:/^.+$/i'`.\n\n> **Warning**  \n> When using the `regex` / `not_regex` patterns, it may be necessary to specify your validation rules using an array instead of using `|` delimiters, especially if the regular expression contains a `|` character.\n\n<a name=\"rule-nullable\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1599,"to":1622}}}}],["3936",{"pageContent":"nullable\n\nThe field under validation may be `null`.\n\n<a name=\"rule-numeric\"></a>\n#### numeric\n\nThe field under validation must be [numeric](https://www.php.net/manual/en/function.is-numeric.php).\n\n<a name=\"rule-password\"></a>\n#### password\n\nThe field under validation must match the authenticated user's password.\n\n> **Warning**  \n> This rule was renamed to `current_password` with the intention of removing it in Laravel 9. Please use the [Current Password](#rule-current-password) rule instead.\n\n<a name=\"rule-present\"></a>\n#### present\n\nThe field under validation must exist in the input data.\n\n<a name=\"rule-prohibited\"></a>\n#### prohibited\n\nThe field under validation must be missing or empty. A field is \"empty\" if it meets one of the following criteria:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- The value is `null`.\n- The value is an empty string.\n- The value is an empty array or empty `Countable` object.\n- The value is an uploaded file with an empty path.\n\n</div>\n\n<a name=\"rule-prohibited-if\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1623,"to":1659}}}}],["3937",{"pageContent":"prohibited_if:_anotherfield_,_value_,...\n\nThe field under validation must be missing or empty if the _anotherfield_ field is equal to any _value_. A field is \"empty\" if it meets one of the following criteria:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- The value is `null`.\n- The value is an empty string.\n- The value is an empty array or empty `Countable` object.\n- The value is an uploaded file with an empty path.\n\n</div>\n\nIf complex conditional prohibition logic is required, you may utilize the `Rule::prohibitedIf` method. This method accepts a boolean or a closure. When given a closure, the closure should return `true` or `false` to indicate if the field under validation should be prohibited:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($request->all(), [\n        'role_id' => Rule::prohibitedIf($request->user()->is_admin),\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1660,"to":1680}}}}],["3938",{"pageContent":"use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($request->all(), [\n        'role_id' => Rule::prohibitedIf($request->user()->is_admin),\n    ]);\n\n    Validator::make($request->all(), [\n        'role_id' => Rule::prohibitedIf(fn () => $request->user()->is_admin),\n    ]);\n\n<a name=\"rule-prohibited-unless\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1680,"to":1691}}}}],["3939",{"pageContent":"prohibited_unless:_anotherfield_,_value_,...\n\nThe field under validation must be missing or empty unless the _anotherfield_ field is equal to any _value_. A field is \"empty\" if it meets one of the following criteria:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- The value is `null`.\n- The value is an empty string.\n- The value is an empty array or empty `Countable` object.\n- The value is an uploaded file with an empty path.\n\n</div>\n\n<a name=\"rule-prohibits\"></a>\n#### prohibits:_anotherfield_,...\n\nIf the field under validation is not missing or empty, all fields in _anotherfield_ must be missing or empty. A field is \"empty\" if it meets one of the following criteria:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- The value is `null`.\n- The value is an empty string.\n- The value is an empty array or empty `Countable` object.\n- The value is an uploaded file with an empty path.\n\n</div>\n\n<a name=\"rule-regex\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1692,"to":1719}}}}],["3940",{"pageContent":"regex:_pattern_\n\nThe field under validation must match the given regular expression.\n\nInternally, this rule uses the PHP `preg_match` function. The pattern specified should obey the same formatting required by `preg_match` and thus also include valid delimiters. For example: `'email' => 'regex:/^.+@.+$/i'`.\n\n> **Warning**  \n> When using the `regex` / `not_regex` patterns, it may be necessary to specify rules in an array instead of using `|` delimiters, especially if the regular expression contains a `|` character.\n\n<a name=\"rule-required\"></a>\n#### required\n\nThe field under validation must be present in the input data and not empty. A field is \"empty\" if it meets one of the following criteria:\n\n<div class=\"content-list\" markdown=\"1\">\n\n- The value is `null`.\n- The value is an empty string.\n- The value is an empty array or empty `Countable` object.\n- The value is an uploaded file with no path.\n\n</div>\n\n<a name=\"rule-required-if\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1720,"to":1743}}}}],["3941",{"pageContent":"required_if:_anotherfield_,_value_,...\n\nThe field under validation must be present and not empty if the _anotherfield_ field is equal to any _value_.\n\nIf you would like to construct a more complex condition for the `required_if` rule, you may use the `Rule::requiredIf` method. This method accepts a boolean or a closure. When passed a closure, the closure should return `true` or `false` to indicate if the field under validation is required:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($request->all(), [\n        'role_id' => Rule::requiredIf($request->user()->is_admin),\n    ]);\n\n    Validator::make($request->all(), [\n        'role_id' => Rule::requiredIf(fn () => $request->user()->is_admin),\n    ]);\n\n<a name=\"rule-required-if-accepted\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1744,"to":1761}}}}],["3942",{"pageContent":"required_if_accepted:_anotherfield,...\n\nThe field under validation must be present and not empty if the _anotherfield_ field is equal to `yes`, `on`, `1`, `\"1\"`, `true`, or `\"true\"`.\n\n<a name=\"rule-required-unless\"></a>\n#### required_unless:_anotherfield_,_value_,...\n\nThe field under validation must be present and not empty unless the _anotherfield_ field is equal to any _value_. This also means _anotherfield_ must be present in the request data unless _value_ is `null`. If _value_ is `null` (`required_unless:name,null`), the field under validation will be required unless the comparison field is `null` or the comparison field is missing from the request data.\n\n<a name=\"rule-required-with\"></a>\n#### required_with:_foo_,_bar_,...\n\nThe field under validation must be present and not empty _only if_ any of the other specified fields are present and not empty.\n\n<a name=\"rule-required-with-all\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1762,"to":1776}}}}],["3943",{"pageContent":"required_with:_foo_,_bar_,...\n\nThe field under validation must be present and not empty _only if_ any of the other specified fields are present and not empty.\n\n<a name=\"rule-required-with-all\"></a>\n#### required_with_all:_foo_,_bar_,...\n\nThe field under validation must be present and not empty _only if_ all of the other specified fields are present and not empty.\n\n<a name=\"rule-required-without\"></a>\n#### required_without:_foo_,_bar_,...\n\nThe field under validation must be present and not empty _only when_ any of the other specified fields are empty or not present.\n\n<a name=\"rule-required-without-all\"></a>\n#### required_without_all:_foo_,_bar_,...\n\nThe field under validation must be present and not empty _only when_ all of the other specified fields are empty or not present.\n\n<a name=\"rule-required-array-keys\"></a>\n#### required_array_keys:_foo_,_bar_,...\n\nThe field under validation must be an array and must contain at least the specified keys.\n\n<a name=\"rule-same\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1776,"to":1800}}}}],["3944",{"pageContent":"required_array_keys:_foo_,_bar_,...\n\nThe field under validation must be an array and must contain at least the specified keys.\n\n<a name=\"rule-same\"></a>\n#### same:_field_\n\nThe given _field_ must match the field under validation.\n\n<a name=\"rule-size\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1800,"to":1809}}}}],["3945",{"pageContent":"same:_field_\n\nThe given _field_ must match the field under validation.\n\n<a name=\"rule-size\"></a>\n#### size:_value_\n\nThe field under validation must have a size matching the given _value_. For string data, _value_ corresponds to the number of characters. For numeric data, _value_ corresponds to a given integer value (the attribute must also have the `numeric` or `integer` rule). For an array, _size_ corresponds to the `count` of the array. For files, _size_ corresponds to the file size in kilobytes. Let's look at some examples:\n\n    // Validate that a string is exactly 12 characters long...\n    'title' => 'size:12';\n\n    // Validate that a provided integer equals 10...\n    'seats' => 'integer|size:10';\n\n    // Validate that an array has exactly 5 elements...\n    'tags' => 'array|size:5';\n\n    // Validate that an uploaded file is exactly 512 kilobytes...\n    'image' => 'file|size:512';\n\n<a name=\"rule-starts-with\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1809,"to":1830}}}}],["3946",{"pageContent":"starts_with:_foo_,_bar_,...\n\nThe field under validation must start with one of the given values.\n\n<a name=\"rule-string\"></a>\n#### string\n\nThe field under validation must be a string. If you would like to allow the field to also be `null`, you should assign the `nullable` rule to the field.\n\n<a name=\"rule-timezone\"></a>\n#### timezone\n\nThe field under validation must be a valid timezone identifier according to the `DateTimeZone::listIdentifiers` method.\n\nThe arguments [accepted by the `DateTimeZone::listIdentifiers` method](https://www.php.net/manual/en/datetimezone.listidentifiers.php) may also be provided to this validation rule:\n\n    'timezone' => 'required|timezone:all';\n\n    'timezone' => 'required|timezone:Africa';\n\n    'timezone' => 'required|timezone:per_country,US';\n\n<a name=\"rule-unique\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1831,"to":1853}}}}],["3947",{"pageContent":"unique:_table_,_column_\n\nThe field under validation must not exist within the given database table.\n\n**Specifying A Custom Table / Column Name:**\n\nInstead of specifying the table name directly, you may specify the Eloquent model which should be used to determine the table name:\n\n    'email' => 'unique:App\\Models\\User,email_address'\n\nThe `column` option may be used to specify the field's corresponding database column. If the `column` option is not specified, the name of the field under validation will be used.\n\n    'email' => 'unique:users,email_address'\n\n**Specifying A Custom Database Connection**\n\nOccasionally, you may need to set a custom connection for database queries made by the Validator. To accomplish this, you may prepend the connection name to the table name:\n\n    'email' => 'unique:connection.users,email_address'\n\n**Forcing A Unique Rule To Ignore A Given ID:**","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1854,"to":1874}}}}],["3948",{"pageContent":"'email' => 'unique:connection.users,email_address'\n\n**Forcing A Unique Rule To Ignore A Given ID:**\n\nSometimes, you may wish to ignore a given ID during unique validation. For example, consider an \"update profile\" screen that includes the user's name, email address, and location. You will probably want to verify that the email address is unique. However, if the user only changes the name field and not the email field, you do not want a validation error to be thrown because the user is already the owner of the email address in question.\n\nTo instruct the validator to ignore the user's ID, we'll use the `Rule` class to fluently define the rule. In this example, we'll also specify the validation rules as an array instead of using the `|` character to delimit the rules:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1874,"to":1883}}}}],["3949",{"pageContent":"use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    Validator::make($data, [\n        'email' => [\n            'required',\n            Rule::unique('users')->ignore($user->id),\n        ],\n    ]);\n\n> **Warning**  \n> You should never pass any user controlled request input into the `ignore` method. Instead, you should only pass a system generated unique ID such as an auto-incrementing ID or UUID from an Eloquent model instance. Otherwise, your application will be vulnerable to an SQL injection attack.\n\nInstead of passing the model key's value to the `ignore` method, you may also pass the entire model instance. Laravel will automatically extract the key from the model:\n\n    Rule::unique('users')->ignore($user)\n\nIf your table uses a primary key column name other than `id`, you may specify the name of the column when calling the `ignore` method:\n\n    Rule::unique('users')->ignore($user->id, 'user_id')","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1883,"to":1902}}}}],["3950",{"pageContent":"If your table uses a primary key column name other than `id`, you may specify the name of the column when calling the `ignore` method:\n\n    Rule::unique('users')->ignore($user->id, 'user_id')\n\nBy default, the `unique` rule will check the uniqueness of the column matching the name of the attribute being validated. However, you may pass a different column name as the second argument to the `unique` method:\n\n    Rule::unique('users', 'email_address')->ignore($user->id)\n\n**Adding Additional Where Clauses:**\n\nYou may specify additional query conditions by customizing the query using the `where` method. For example, let's add a query condition that scopes the query to only search records that have an `account_id` column value of `1`:\n\n    'email' => Rule::unique('users')->where(fn (Builder $query) => $query->where('account_id', 1))\n\n<a name=\"rule-uppercase\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1902,"to":1916}}}}],["3951",{"pageContent":"uppercase\n\nThe field under validation must be uppercase.\n\n<a name=\"rule-url\"></a>\n#### url\n\nThe field under validation must be a valid URL.\n\nIf you would like to specify the URL protocols that should be considered valid, you may pass the protocols as validation rule parameters:\n\n```php\n'url' => 'url:http,https',\n\n'game' => 'url:minecraft,steam',\n```\n\n<a name=\"rule-ulid\"></a>\n#### ulid\n\nThe field under validation must be a valid [Universally Unique Lexicographically Sortable Identifier](https://github.com/ulid/spec) (ULID).\n\n<a name=\"rule-uuid\"></a>\n#### uuid\n\nThe field under validation must be a valid RFC 4122 (version 1, 3, 4, or 5) universally unique identifier (UUID).\n\n<a name=\"conditionally-adding-rules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1917,"to":1944}}}}],["3952",{"pageContent":"Conditionally Adding Rules\n\n<a name=\"skipping-validation-when-fields-have-certain-values\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1945,"to":1947}}}}],["3953",{"pageContent":"Skipping Validation When Fields Have Certain Values\n\nYou may occasionally wish to not validate a given field if another field has a given value. You may accomplish this using the `exclude_if` validation rule. In this example, the `appointment_date` and `doctor_name` fields will not be validated if the `has_appointment` field has a value of `false`:\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $validator = Validator::make($data, [\n        'has_appointment' => 'required|boolean',\n        'appointment_date' => 'exclude_if:has_appointment,false|required|date',\n        'doctor_name' => 'exclude_if:has_appointment,false|required|string',\n    ]);\n\nAlternatively, you may use the `exclude_unless` rule to not validate a given field unless another field has a given value:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1948,"to":1960}}}}],["3954",{"pageContent":"Alternatively, you may use the `exclude_unless` rule to not validate a given field unless another field has a given value:\n\n    $validator = Validator::make($data, [\n        'has_appointment' => 'required|boolean',\n        'appointment_date' => 'exclude_unless:has_appointment,true|required|date',\n        'doctor_name' => 'exclude_unless:has_appointment,true|required|string',\n    ]);\n\n<a name=\"validating-when-present\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1960,"to":1968}}}}],["3955",{"pageContent":"Validating When Present\n\nIn some situations, you may wish to run validation checks against a field **only** if that field is present in the data being validated. To quickly accomplish this, add the `sometimes` rule to your rule list:\n\n    $v = Validator::make($data, [\n        'email' => 'sometimes|required|email',\n    ]);\n\nIn the example above, the `email` field will only be validated if it is present in the `$data` array.\n\n> **Note**  \n> If you are attempting to validate a field that should always be present but may be empty, check out [this note on optional fields](#a-note-on-optional-fields).\n\n<a name=\"complex-conditional-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1969,"to":1982}}}}],["3956",{"pageContent":"Complex Conditional Validation\n\nSometimes you may wish to add validation rules based on more complex conditional logic. For example, you may wish to require a given field only if another field has a greater value than 100. Or, you may need two fields to have a given value only when another field is present. Adding these validation rules doesn't have to be a pain. First, create a `Validator` instance with your _static rules_ that never change:\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $validator = Validator::make($request->all(), [\n        'email' => 'required|email',\n        'games' => 'required|numeric',\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1983,"to":1992}}}}],["3957",{"pageContent":"use Illuminate\\Support\\Facades\\Validator;\n\n    $validator = Validator::make($request->all(), [\n        'email' => 'required|email',\n        'games' => 'required|numeric',\n    ]);\n\nLet's assume our web application is for game collectors. If a game collector registers with our application and they own more than 100 games, we want them to explain why they own so many games. For example, perhaps they run a game resale shop, or maybe they just enjoy collecting games. To conditionally add this requirement, we can use the `sometimes` method on the `Validator` instance.\n\n    use Illuminate\\Support\\Fluent;\n\n    $validator->sometimes('reason', 'required|max:500', function (Fluent $input) {\n        return $input->games >= 100;\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":1992,"to":2005}}}}],["3958",{"pageContent":"use Illuminate\\Support\\Fluent;\n\n    $validator->sometimes('reason', 'required|max:500', function (Fluent $input) {\n        return $input->games >= 100;\n    });\n\nThe first argument passed to the `sometimes` method is the name of the field we are conditionally validating. The second argument is a list of the rules we want to add. If the closure passed as the third argument returns `true`, the rules will be added. This method makes it a breeze to build complex conditional validations. You may even add conditional validations for several fields at once:\n\n    $validator->sometimes(['reason', 'cost'], 'required', function (Fluent $input) {\n        return $input->games >= 100;\n    });\n\n> **Note**  \n> The `$input` parameter passed to your closure will be an instance of `Illuminate\\Support\\Fluent` and may be used to access your input and files under validation.\n\n<a name=\"complex-conditional-array-validation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2005,"to":2020}}}}],["3959",{"pageContent":"Complex Conditional Array Validation\n\nSometimes you may want to validate a field based on another field in the same nested array whose index you do not know. In these situations, you may allow your closure to receive a second argument which will be the current individual item in the array being validated:\n\n    $input = [\n        'channels' => [\n            [\n                'type' => 'email',\n                'address' => 'abigail@example.com',\n            ],\n            [\n                'type' => 'url',\n                'address' => 'https://example.com',\n            ],\n        ],\n    ];\n\n    $validator->sometimes('channels.*.address', 'email', function (Fluent $input, Fluent $item) {\n        return $item->type === 'email';\n    });\n\n    $validator->sometimes('channels.*.address', 'url', function (Fluent $input, Fluent $item) {\n        return $item->type !== 'email';\n    });","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2021,"to":2044}}}}],["3960",{"pageContent":"$validator->sometimes('channels.*.address', 'url', function (Fluent $input, Fluent $item) {\n        return $item->type !== 'email';\n    });\n\nLike the `$input` parameter passed to the closure, the `$item` parameter is an instance of `Illuminate\\Support\\Fluent` when the attribute data is an array; otherwise, it is a string.\n\n<a name=\"validating-arrays\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2044,"to":2050}}}}],["3961",{"pageContent":"Validating Arrays\n\nAs discussed in the [`array` validation rule documentation](#rule-array), the `array` rule accepts a list of allowed array keys. If any additional keys are present within the array, validation will fail:\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $input = [\n        'user' => [\n            'name' => 'Taylor Otwell',\n            'username' => 'taylorotwell',\n            'admin' => true,\n        ],\n    ];\n\n    Validator::make($input, [\n        'user' => 'array:name,username',\n    ]);\n\nIn general, you should always specify the array keys that are allowed to be present within your array. Otherwise, the validator's `validate` and `validated` methods will return all of the validated data, including the array and all of its keys, even if those keys were not validated by other nested array validation rules.\n\n<a name=\"validating-nested-array-input\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2051,"to":2071}}}}],["3962",{"pageContent":"Validating Nested Array Input\n\nValidating nested array based form input fields doesn't have to be a pain. You may use \"dot notation\" to validate attributes within an array. For example, if the incoming HTTP request contains a `photos[profile]` field, you may validate it like so:\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $validator = Validator::make($request->all(), [\n        'photos.profile' => 'required|image',\n    ]);\n\nYou may also validate each element of an array. For example, to validate that each email in a given array input field is unique, you may do the following:\n\n    $validator = Validator::make($request->all(), [\n        'person.*.email' => 'email|unique:users',\n        'person.*.first_name' => 'required_with:person.*.last_name',\n    ]);\n\nLikewise, you may use the `*` character when specifying [custom validation messages in your language files](#custom-messages-for-specific-attributes), making it a breeze to use a single validation message for array based fields:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2072,"to":2089}}}}],["3963",{"pageContent":"'custom' => [\n        'person.*.email' => [\n            'unique' => 'Each person must have a unique email address',\n        ]\n    ],\n\n<a name=\"accessing-nested-array-data\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2091,"to":2097}}}}],["3964",{"pageContent":"Accessing Nested Array Data\n\nSometimes you may need to access the value for a given nested array element when assigning validation rules to the attribute. You may accomplish this using the `Rule::forEach` method. The `forEach` method accepts a closure that will be invoked for each iteration of the array attribute under validation and will receive the attribute's value and explicit, fully-expanded attribute name. The closure should return an array of rules to assign to the array element:\n\n    use App\\Rules\\HasPermission;\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n\n    $validator = Validator::make($request->all(), [\n        'companies.*.id' => Rule::forEach(function (string|null $value, string $attribute) {\n            return [\n                Rule::exists(Company::class, 'id'),\n                new HasPermission('manage-company', $value),\n            ];\n        }),\n    ]);\n\n<a name=\"error-message-indexes-and-positions\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2098,"to":2115}}}}],["3965",{"pageContent":"Error Message Indexes & Positions\n\nWhen validating arrays, you may want to reference the index or position of a particular item that failed validation within the error message displayed by your application. To accomplish this, you may include the `:index` (starts from `0`) and `:position` (starts from `1`) placeholders within your [custom validation message](#manual-customizing-the-error-messages):\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $input = [\n        'photos' => [\n            [\n                'name' => 'BeachVacation.jpg',\n                'description' => 'A photo of my beach vacation!',\n            ],\n            [\n                'name' => 'GrandCanyon.jpg',\n                'description' => '',\n            ],\n        ],\n    ];\n\n    Validator::validate($input, [\n        'photos.*.description' => 'required',\n    ], [\n        'photos.*.description.required' => 'Please describe photo #:position.',\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2116,"to":2139}}}}],["3966",{"pageContent":"Validator::validate($input, [\n        'photos.*.description' => 'required',\n    ], [\n        'photos.*.description.required' => 'Please describe photo #:position.',\n    ]);\n\nGiven the example above, validation will fail and the user will be presented with the following error of _\"Please describe photo #2.\"_\n\nIf necessary, you may reference more deeply nested indexes and positions via `second-index`, `second-position`, `third-index`, `third-position`, etc.\n\n    'photos.*.attributes.*.string' => 'Invalid attribute for photo #:second-position.',\n\n<a name=\"validating-files\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2139,"to":2151}}}}],["3967",{"pageContent":"Validating Files\n\nLaravel provides a variety of validation rules that may be used to validate uploaded files, such as `mimes`, `image`, `min`, and `max`. While you are free to specify these rules individually when validating files, Laravel also offers a fluent file validation rule builder that you may find convenient:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rules\\File;\n\n    Validator::validate($input, [\n        'attachment' => [\n            'required',\n            File::types(['mp3', 'wav'])\n                ->min(1024)\n                ->max(12 * 1024),\n        ],\n    ]);\n\nIf your application accepts images uploaded by your users, you may use the `File` rule's `image` constructor method to indicate that the uploaded file should be an image. In addition, the `dimensions` rule may be used to limit the dimensions of the image:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n    use Illuminate\\Validation\\Rules\\File;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2152,"to":2172}}}}],["3968",{"pageContent":"use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rule;\n    use Illuminate\\Validation\\Rules\\File;\n\n    Validator::validate($input, [\n        'photo' => [\n            'required',\n            File::image()\n                ->min(1024)\n                ->max(12 * 1024)\n                ->dimensions(Rule::dimensions()->maxWidth(1000)->maxHeight(500)),\n        ],\n    ]);\n\n> **Note**  \n> More information regarding validating image dimensions may be found in the [dimension rule documentation](#rule-dimensions).\n\n<a name=\"validating-files-file-sizes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2172,"to":2189}}}}],["3969",{"pageContent":"File Sizes\n\nFor convenience, minimum and maximum file sizes may be specified as a string with a suffix indicating the file size units. The `kb`, `mb`, `gb`, and `tb` suffixes are supported:\n\n```php\nFile::image()\n    ->min('1kb')\n    ->max('10mb')\n```\n\n<a name=\"validating-files-file-types\"></a>\n#### File Types\n\nEven though you only need to specify the extensions when invoking the `types` method, this method actually validates the MIME type of the file by reading the file's contents and guessing its MIME type. A full listing of MIME types and their corresponding extensions may be found at the following location:\n\n[https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types](https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types)\n\n<a name=\"validating-passwords\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2190,"to":2207}}}}],["3970",{"pageContent":"Validating Passwords\n\nTo ensure that passwords have an adequate level of complexity, you may use Laravel's `Password` rule object:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Illuminate\\Validation\\Rules\\Password;\n\n    $validator = Validator::make($request->all(), [\n        'password' => ['required', 'confirmed', Password::min(8)],\n    ]);\n\nThe `Password` rule object allows you to easily customize the password complexity requirements for your application, such as specifying that passwords require at least one letter, number, symbol, or characters with mixed casing:\n\n    // Require at least 8 characters...\n    Password::min(8)\n\n    // Require at least one letter...\n    Password::min(8)->letters()\n\n    // Require at least one uppercase and one lowercase letter...\n    Password::min(8)->mixedCase()\n\n    // Require at least one number...\n    Password::min(8)->numbers()\n\n    // Require at least one symbol...\n    Password::min(8)->symbols()","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2208,"to":2234}}}}],["3971",{"pageContent":"// Require at least one number...\n    Password::min(8)->numbers()\n\n    // Require at least one symbol...\n    Password::min(8)->symbols()\n\nIn addition, you may ensure that a password has not been compromised in a public password data breach leak using the `uncompromised` method:\n\n    Password::min(8)->uncompromised()\n\nInternally, the `Password` rule object uses the [k-Anonymity](https://en.wikipedia.org/wiki/K-anonymity) model to determine if a password has been leaked via the [haveibeenpwned.com](https://haveibeenpwned.com) service without sacrificing the user's privacy or security.\n\nBy default, if a password appears at least once in a data leak, it will be considered compromised. You can customize this threshold using the first argument of the `uncompromised` method:\n\n    // Ensure the password appears less than 3 times in the same data leak...\n    Password::min(8)->uncompromised(3);\n\nOf course, you may chain all the methods in the examples above:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2234,"to":2251}}}}],["3972",{"pageContent":"// Ensure the password appears less than 3 times in the same data leak...\n    Password::min(8)->uncompromised(3);\n\nOf course, you may chain all the methods in the examples above:\n\n    Password::min(8)\n        ->letters()\n        ->mixedCase()\n        ->numbers()\n        ->symbols()\n        ->uncompromised()\n\n<a name=\"defining-default-password-rules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2251,"to":2263}}}}],["3973",{"pageContent":"Defining Default Password Rules\n\nYou may find it convenient to specify the default validation rules for passwords in a single location of your application. You can easily accomplish this using the `Password::defaults` method, which accepts a closure. The closure given to the `defaults` method should return the default configuration of the Password rule. Typically, the `defaults` rule should be called within the `boot` method of one of your application's service providers:\n\n```php\nuse Illuminate\\Validation\\Rules\\Password;\n\n/**\n * Bootstrap any application services.\n */\npublic function boot(): void\n{\n    Password::defaults(function () {\n        $rule = Password::min(8);\n\n        return $this->app->isProduction()\n                    ? $rule->mixedCase()->uncompromised()\n                    : $rule;\n    });\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2264,"to":2283}}}}],["3974",{"pageContent":"Then, when you would like to apply the default rules to a particular password undergoing validation, you may invoke the `defaults` method with no arguments:\n\n    'password' => ['required', Password::defaults()],\n\nOccasionally, you may want to attach additional validation rules to your default password validation rules. You may use the `rules` method to accomplish this:\n\n    use App\\Rules\\ZxcvbnRule;\n\n    Password::defaults(function () {\n        $rule = Password::min(8)->rules([new ZxcvbnRule]);\n\n        // ...\n    });\n\n<a name=\"custom-validation-rules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2286,"to":2300}}}}],["3975",{"pageContent":"Custom Validation Rules\n\n<a name=\"using-rule-objects\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2301,"to":2303}}}}],["3976",{"pageContent":"Using Rule Objects\n\nLaravel provides a variety of helpful validation rules; however, you may wish to specify some of your own. One method of registering custom validation rules is using rule objects. To generate a new rule object, you may use the `make:rule` Artisan command. Let's use this command to generate a rule that verifies a string is uppercase. Laravel will place the new rule in the `app/Rules` directory. If this directory does not exist, Laravel will create it when you execute the Artisan command to create your rule:\n\n```shell\nphp artisan make:rule Uppercase","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2304,"to":2309}}}}],["3977",{"pageContent":"Once the rule has been created, we are ready to define its behavior. A rule object contains a single method: `validate`. This method receives the attribute name, its value, and a callback that should be invoked on failure with the validation error message:\n\n    <?php\n\n    namespace App\\Rules;\n\n    use Closure;\n    use Illuminate\\Contracts\\Validation\\ValidationRule;\n\n    class Uppercase implements ValidationRule\n    {\n        /**\n         * Run the validation rule.\n         */\n        public function validate(string $attribute, mixed $value, Closure $fail): void\n        {\n            if (strtoupper($value) !== $value) {\n                $fail('The :attribute must be uppercase.');\n            }\n        }\n    }\n\nOnce the rule has been defined, you may attach it to a validator by passing an instance of the rule object with your other validation rules:\n\n    use App\\Rules\\Uppercase;\n\n    $request->validate([\n        'name' => ['required', 'string', new Uppercase],\n    ]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2312,"to":2340}}}}],["3978",{"pageContent":"Translating Validation Messages\n\nInstead of providing a literal error message to the `$fail` closure, you may also provide a [translation string key](/docs/{{version}}/localization) and instruct Laravel to translate the error message:\n\n    if (strtoupper($value) !== $value) {\n        $fail('validation.uppercase')->translate();\n    }\n\nIf necessary, you may provide placeholder replacements and the preferred language as the first and second arguments to the `translate` method:\n\n    $fail('validation.location')->translate([\n        'value' => $this->value,\n    ], 'fr')","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2342,"to":2354}}}}],["3979",{"pageContent":"Accessing Additional Data\n\nIf your custom validation rule class needs to access all of the other data undergoing validation, your rule class may implement the `Illuminate\\Contracts\\Validation\\DataAwareRule` interface. This interface requires your class to define a `setData` method. This method will automatically be invoked by Laravel (before validation proceeds) with all of the data under validation:\n\n    <?php\n\n    namespace App\\Rules;\n\n    use Illuminate\\Contracts\\Validation\\DataAwareRule;\n    use Illuminate\\Contracts\\Validation\\ValidationRule;\n\n    class Uppercase implements DataAwareRule, ValidationRule\n    {\n        /**\n         * All of the data under validation.\n         *\n         * @var array<string, mixed>\n         */\n        protected $data = [];\n\n        // ...\n\n        /**\n         * Set the data under validation.\n         *\n         * @param  array<string, mixed>  $data\n         */\n        public function setData(array $data): static\n        {\n            $this->data = $data;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2356,"to":2385}}}}],["3980",{"pageContent":"return $this;\n        }\n    }\n\nOr, if your validation rule requires access to the validator instance performing the validation, you may implement the `ValidatorAwareRule` interface:\n\n    <?php\n\n    namespace App\\Rules;\n\n    use Illuminate\\Contracts\\Validation\\ValidationRule;\n    use Illuminate\\Contracts\\Validation\\ValidatorAwareRule;\n    use Illuminate\\Validation\\Validator;\n\n    class Uppercase implements ValidationRule, ValidatorAwareRule\n    {\n        /**\n         * The validator instance.\n         *\n         * @var \\Illuminate\\Validation\\Validator\n         */\n        protected $validator;\n\n        // ...\n\n        /**\n         * Set the current validator.\n         */\n        public function setValidator(Validator $validator): static\n        {\n            $this->validator = $validator;\n\n            return $this;\n        }\n    }\n\n<a name=\"using-closures\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2387,"to":2423}}}}],["3981",{"pageContent":"Using Closures\n\nIf you only need the functionality of a custom rule once throughout your application, you may use a closure instead of a rule object. The closure receives the attribute's name, the attribute's value, and a `$fail` callback that should be called if validation fails:\n\n    use Illuminate\\Support\\Facades\\Validator;\n    use Closure;\n\n    $validator = Validator::make($request->all(), [\n        'title' => [\n            'required',\n            'max:255',\n            function (string $attribute, mixed $value, Closure $fail) {\n                if ($value === 'foo') {\n                    $fail(\"The {$attribute} is invalid.\");\n                }\n            },\n        ],\n    ]);\n\n<a name=\"implicit-rules\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2424,"to":2443}}}}],["3982",{"pageContent":"Implicit Rules\n\nBy default, when an attribute being validated is not present or contains an empty string, normal validation rules, including custom rules, are not run. For example, the [`unique`](#rule-unique) rule will not be run against an empty string:\n\n    use Illuminate\\Support\\Facades\\Validator;\n\n    $rules = ['name' => 'unique:users,name'];\n\n    $input = ['name' => ''];\n\n    Validator::make($input, $rules)->passes(); // true\n\nFor a custom rule to run even when an attribute is empty, the rule must imply that the attribute is required. To quickly generate a new implicit rule object, you may use the `make:rule` Artisan command with the `--implicit` option:\n\n```shell\nphp artisan make:rule Uppercase --implicit\n```\n\n> **Warning**  \n> An \"implicit\" rule only _implies_ that the attribute is required. Whether it actually invalidates a missing or empty attribute is up to you.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/validation.md","loc":{"lines":{"from":2444,"to":2463}}}}],["3983",{"pageContent":"# Email Verification\n\n- [Introduction](#introduction)\n    - [Model Preparation](#model-preparation)\n    - [Database Preparation](#database-preparation)\n- [Routing](#verification-routing)\n    - [The Email Verification Notice](#the-email-verification-notice)\n    - [The Email Verification Handler](#the-email-verification-handler)\n    - [Resending The Verification Email](#resending-the-verification-email)\n    - [Protecting Routes](#protecting-routes)\n- [Customization](#customization)\n- [Events](#events)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":1,"to":14}}}}],["3984",{"pageContent":"Introduction\n\nMany web applications require users to verify their email addresses before using the application. Rather than forcing you to re-implement this feature by hand for each application you create, Laravel provides convenient built-in services for sending and verifying email verification requests.\n\n> **Note**  \n> Want to get started fast? Install one of the [Laravel application starter kits](/docs/{{version}}/starter-kits) in a fresh Laravel application. The starter kits will take care of scaffolding your entire authentication system, including email verification support.\n\n<a name=\"model-preparation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":15,"to":22}}}}],["3985",{"pageContent":"Model Preparation\n\nBefore getting started, verify that your `App\\Models\\User` model implements the `Illuminate\\Contracts\\Auth\\MustVerifyEmail` contract:\n\n    <?php\n\n    namespace App\\Models;\n\n    use Illuminate\\Contracts\\Auth\\MustVerifyEmail;\n    use Illuminate\\Foundation\\Auth\\User as Authenticatable;\n    use Illuminate\\Notifications\\Notifiable;\n\n    class User extends Authenticatable implements MustVerifyEmail\n    {\n        use Notifiable;\n\n        // ...\n    }\n\nOnce this interface has been added to your model, newly registered users will automatically be sent an email containing an email verification link. As you can see by examining your application's `App\\Providers\\EventServiceProvider`, Laravel already contains a `SendEmailVerificationNotification` [listener](/docs/{{version}}/events) that is attached to the `Illuminate\\Auth\\Events\\Registered` event. This event listener will send the email verification link to the user.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":23,"to":42}}}}],["3986",{"pageContent":"If you are manually implementing registration within your application instead of using [a starter kit](/docs/{{version}}/starter-kits), you should ensure that you are dispatching the `Illuminate\\Auth\\Events\\Registered` event after a user's registration is successful:\n\n    use Illuminate\\Auth\\Events\\Registered;\n\n    event(new Registered($user));\n\n<a name=\"database-preparation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":44,"to":50}}}}],["3987",{"pageContent":"Database Preparation\n\nNext, your `users` table must contain an `email_verified_at` column to store the date and time that the user's email address was verified. By default, the `users` table migration included with the Laravel framework already includes this column. So, all you need to do is run your database migrations:\n\n```shell\nphp artisan migrate\n```\n\n<a name=\"verification-routing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":51,"to":59}}}}],["3988",{"pageContent":"Routing\n\nTo properly implement email verification, three routes will need to be defined. First, a route will be needed to display a notice to the user that they should click the email verification link in the verification email that Laravel sent them after registration.\n\nSecond, a route will be needed to handle requests generated when the user clicks the email verification link in the email.\n\nThird, a route will be needed to resend a verification link if the user accidentally loses the first verification link.\n\n<a name=\"the-email-verification-notice\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":60,"to":68}}}}],["3989",{"pageContent":"The Email Verification Notice\n\nAs mentioned previously, a route should be defined that will return a view instructing the user to click the email verification link that was emailed to them by Laravel after registration. This view will be displayed to users when they try to access other parts of the application without verifying their email address first. Remember, the link is automatically emailed to the user as long as your `App\\Models\\User` model implements the `MustVerifyEmail` interface:\n\n    Route::get('/email/verify', function () {\n        return view('auth.verify-email');\n    })->middleware('auth')->name('verification.notice');\n\nThe route that returns the email verification notice should be named `verification.notice`. It is important that the route is assigned this exact name since the `verified` middleware [included with Laravel](#protecting-routes) will automatically redirect to this route name if a user has not verified their email address.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":69,"to":77}}}}],["3990",{"pageContent":"> **Note**  \n> When manually implementing email verification, you are required to define the contents of the verification notice view yourself. If you would like scaffolding that includes all necessary authentication and verification views, check out the [Laravel application starter kits](/docs/{{version}}/starter-kits).\n\n<a name=\"the-email-verification-handler\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":79,"to":82}}}}],["3991",{"pageContent":"The Email Verification Handler\n\nNext, we need to define a route that will handle requests generated when the user clicks the email verification link that was emailed to them. This route should be named `verification.verify` and be assigned the `auth` and `signed` middlewares:\n\n    use Illuminate\\Foundation\\Auth\\EmailVerificationRequest;\n\n    Route::get('/email/verify/{id}/{hash}', function (EmailVerificationRequest $request) {\n        $request->fulfill();\n\n        return redirect('/home');\n    })->middleware(['auth', 'signed'])->name('verification.verify');\n\nBefore moving on, let's take a closer look at this route. First, you'll notice we are using an `EmailVerificationRequest` request type instead of the typical `Illuminate\\Http\\Request` instance. The `EmailVerificationRequest` is a [form request](/docs/{{version}}/validation#form-request-validation) that is included with Laravel. This request will automatically take care of validating the request's `id` and `hash` parameters.","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":83,"to":95}}}}],["3992",{"pageContent":"Next, we can proceed directly to calling the `fulfill` method on the request. This method will call the `markEmailAsVerified` method on the authenticated user and dispatch the `Illuminate\\Auth\\Events\\Verified` event. The `markEmailAsVerified` method is available to the default `App\\Models\\User` model via the `Illuminate\\Foundation\\Auth\\User` base class. Once the user's email address has been verified, you may redirect them wherever you wish.\n\n<a name=\"resending-the-verification-email\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":97,"to":99}}}}],["3993",{"pageContent":"Resending The Verification Email\n\nSometimes a user may misplace or accidentally delete the email address verification email. To accommodate this, you may wish to define a route to allow the user to request that the verification email be resent. You may then make a request to this route by placing a simple form submission button within your [verification notice view](#the-email-verification-notice):\n\n    use Illuminate\\Http\\Request;\n\n    Route::post('/email/verification-notification', function (Request $request) {\n        $request->user()->sendEmailVerificationNotification();\n\n        return back()->with('message', 'Verification link sent!');\n    })->middleware(['auth', 'throttle:6,1'])->name('verification.send');\n\n<a name=\"protecting-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":100,"to":112}}}}],["3994",{"pageContent":"Protecting Routes\n\n[Route middleware](/docs/{{version}}/middleware) may be used to only allow verified users to access a given route. Laravel ships with a `verified` middleware alias, which is an alias for the `Illuminate\\Auth\\Middleware\\EnsureEmailIsVerified` class. Since this middleware is already registered in your application's HTTP kernel, all you need to do is attach the middleware to a route definition. Typically, this middleware is paired with the `auth` middleware:\n\n    Route::get('/profile', function () {\n        // Only verified users may access this route...\n    })->middleware(['auth', 'verified']);\n\nIf an unverified user attempts to access a route that has been assigned this middleware, they will automatically be redirected to the `verification.notice` [named route](/docs/{{version}}/routing#named-routes).\n\n<a name=\"customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":113,"to":123}}}}],["3995",{"pageContent":"Customization\n\n<a name=\"verification-email-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":124,"to":126}}}}],["3996",{"pageContent":"Verification Email Customization\n\nAlthough the default email verification notification should satisfy the requirements of most applications, Laravel allows you to customize how the email verification mail message is constructed.\n\nTo get started, pass a closure to the `toMailUsing` method provided by the `Illuminate\\Auth\\Notifications\\VerifyEmail` notification. The closure will receive the notifiable model instance that is receiving the notification as well as the signed email verification URL that the user must visit to verify their email address. The closure should return an instance of `Illuminate\\Notifications\\Messages\\MailMessage`. Typically, you should call the `toMailUsing` method from the `boot` method of your application's `App\\Providers\\AuthServiceProvider` class:\n\n    use Illuminate\\Auth\\Notifications\\VerifyEmail;\n    use Illuminate\\Notifications\\Messages\\MailMessage;","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":127,"to":134}}}}],["3997",{"pageContent":"use Illuminate\\Auth\\Notifications\\VerifyEmail;\n    use Illuminate\\Notifications\\Messages\\MailMessage;\n\n    /**\n     * Register any authentication / authorization services.\n     */\n    public function boot(): void\n    {\n        // ...\n\n        VerifyEmail::toMailUsing(function (object $notifiable, string $url) {\n            return (new MailMessage)\n                ->subject('Verify Email Address')\n                ->line('Click the button below to verify your email address.')\n                ->action('Verify Email Address', $url);\n        });\n    }\n\n> **Note**  \n> To learn more about mail notifications, please consult the [mail notification documentation](/docs/{{version}}/notifications#mail-notifications).\n\n<a name=\"events\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":134,"to":155}}}}],["3998",{"pageContent":"Events\n\nWhen using the [Laravel application starter kits](/docs/{{version}}/starter-kits), Laravel dispatches [events](/docs/{{version}}/events) during the email verification process. If you are manually handling email verification for your application, you may wish to manually dispatch these events after verification is completed. You may attach listeners to these events in your application's `EventServiceProvider`:\n\n    use App\\Listeners\\LogVerifiedUser;\n    use Illuminate\\Auth\\Events\\Verified;\n    \n    /**\n     * The event listener mappings for the application.\n     *\n     * @var array\n     */\n    protected $listen = [\n        Verified::class => [\n            LogVerifiedUser::class,\n        ],\n    ];","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/verification.md","loc":{"lines":{"from":156,"to":172}}}}],["3999",{"pageContent":"# Views\n\n- [Introduction](#introduction)\n    - [Writing Views In React / Vue](#writing-views-in-react-or-vue)\n- [Creating & Rendering Views](#creating-and-rendering-views)\n    - [Nested View Directories](#nested-view-directories)\n    - [Creating The First Available View](#creating-the-first-available-view)\n    - [Determining If A View Exists](#determining-if-a-view-exists)\n- [Passing Data To Views](#passing-data-to-views)\n    - [Sharing Data With All Views](#sharing-data-with-all-views)\n- [View Composers](#view-composers)\n    - [View Creators](#view-creators)\n- [Optimizing Views](#optimizing-views)\n\n<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":1,"to":15}}}}],["4000",{"pageContent":"Introduction\n\nOf course, it's not practical to return entire HTML documents strings directly from your routes and controllers. Thankfully, views provide a convenient way to place all of our HTML in separate files.\n\nViews separate your controller / application logic from your presentation logic and are stored in the `resources/views` directory. When using Laravel, view templates are usually written using the [Blade templating language](/docs/{{version}}/blade). A simple view might look something like this:\n\n```blade\n<!-- View stored in resources/views/greeting.blade.php -->\n\n<html>\n    <body>\n        <h1>Hello, {{ $name }}</h1>\n    </body>\n</html>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":16,"to":29}}}}],["4001",{"pageContent":"Since this view is stored at `resources/views/greeting.blade.php`, we may return it using the global `view` helper like so:\n\n    Route::get('/', function () {\n        return view('greeting', ['name' => 'James']);\n    });\n\n> **Note**  \n> Looking for more information on how to write Blade templates? Check out the full [Blade documentation](/docs/{{version}}/blade) to get started.\n\n<a name=\"writing-views-in-react-or-vue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":32,"to":41}}}}],["4002",{"pageContent":"Writing Views In React / Vue\n\nInstead of writing their frontend templates in PHP via Blade, many developers have begun to prefer to write their templates using React or Vue. Laravel makes this painless thanks to [Inertia](https://inertiajs.com/), a library that makes it a cinch to tie your React / Vue frontend to your Laravel backend without the typical complexities of building an SPA.\n\nOur Breeze and Jetstream [starter kits](/docs/{{version}}/starter-kits) give you a great starting point for your next Laravel application powered by Inertia. In addition, the [Laravel Bootcamp](https://bootcamp.laravel.com) provides a full demonstration of building a Laravel application powered by Inertia, including examples in Vue and React.\n\n<a name=\"creating-and-rendering-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":42,"to":48}}}}],["4003",{"pageContent":"Creating & Rendering Views\n\nYou may create a view by placing a file with the `.blade.php` extension in your application's `resources/views` directory or by using the `make:view` Artisan command:\n\n```shell\nphp artisan make:view greeting","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":49,"to":54}}}}],["4004",{"pageContent":"The `.blade.php` extension informs the framework that the file contains a [Blade template](/docs/{{version}}/blade). Blade templates contain HTML as well as Blade directives that allow you to easily echo values, create \"if\" statements, iterate over data, and more.\n\nOnce you have created a view, you may return it from one of your application's routes or controllers using the global `view` helper:\n\n    Route::get('/', function () {\n        return view('greeting', ['name' => 'James']);\n    });\n\nViews may also be returned using the `View` facade:\n\n    use Illuminate\\Support\\Facades\\View;\n\n    return View::make('greeting', ['name' => 'James']);\n\nAs you can see, the first argument passed to the `view` helper corresponds to the name of the view file in the `resources/views` directory. The second argument is an array of data that should be made available to the view. In this case, we are passing the `name` variable, which is displayed in the view using [Blade syntax](/docs/{{version}}/blade).","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":57,"to":71}}}}],["4005",{"pageContent":"<a name=\"nested-view-directories\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":73,"to":73}}}}],["4006",{"pageContent":"Nested View Directories\n\nViews may also be nested within subdirectories of the `resources/views` directory. \"Dot\" notation may be used to reference nested views. For example, if your view is stored at `resources/views/admin/profile.blade.php`, you may return it from one of your application's routes / controllers like so:\n\n    return view('admin.profile', $data);\n\n> **Warning**  \n> View directory names should not contain the `.` character.\n\n<a name=\"creating-the-first-available-view\"></a>\n### Creating The First Available View\n\nUsing the `View` facade's `first` method, you may create the first view that exists in a given array of views. This may be useful if your application or package allows views to be customized or overwritten:\n\n    use Illuminate\\Support\\Facades\\View;\n\n    return View::first(['custom.admin', 'admin'], $data);\n\n<a name=\"determining-if-a-view-exists\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":74,"to":92}}}}],["4007",{"pageContent":"Determining If A View Exists\n\nIf you need to determine if a view exists, you may use the `View` facade. The `exists` method will return `true` if the view exists:\n\n    use Illuminate\\Support\\Facades\\View;\n\n    if (View::exists('emails.customer')) {\n        // ...\n    }\n\n<a name=\"passing-data-to-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":93,"to":103}}}}],["4008",{"pageContent":"Passing Data To Views\n\nAs you saw in the previous examples, you may pass an array of data to views to make that data available to the view:\n\n    return view('greetings', ['name' => 'Victoria']);\n\nWhen passing information in this manner, the data should be an array with key / value pairs. After providing data to a view, you can then access each value within your view using the data's keys, such as `<?php echo $name; ?>`.\n\nAs an alternative to passing a complete array of data to the `view` helper function, you may use the `with` method to add individual pieces of data to the view. The `with` method returns an instance of the view object so that you can continue chaining methods before returning the view:\n\n    return view('greeting')\n                ->with('name', 'Victoria')\n                ->with('occupation', 'Astronaut');\n\n<a name=\"sharing-data-with-all-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":104,"to":118}}}}],["4009",{"pageContent":"Sharing Data With All Views\n\nOccasionally, you may need to share data with all views that are rendered by your application. You may do so using the `View` facade's `share` method. Typically, you should place calls to the `share` method within a service provider's `boot` method. You are free to add them to the `App\\Providers\\AppServiceProvider` class or generate a separate service provider to house them:\n\n    <?php\n\n    namespace App\\Providers;\n\n    use Illuminate\\Support\\Facades\\View;\n\n    class AppServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }\n\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            View::share('key', 'value');\n        }\n    }\n\n<a name=\"view-composers\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":119,"to":148}}}}],["4010",{"pageContent":"View Composers\n\nView composers are callbacks or class methods that are called when a view is rendered. If you have data that you want to be bound to a view each time that view is rendered, a view composer can help you organize that logic into a single location. View composers may prove particularly useful if the same view is returned by multiple routes or controllers within your application and always needs a particular piece of data.\n\nTypically, view composers will be registered within one of your application's [service providers](/docs/{{version}}/providers). In this example, we'll assume that we have created a new `App\\Providers\\ViewServiceProvider` to house this logic.\n\nWe'll use the `View` facade's `composer` method to register the view composer. Laravel does not include a default directory for class based view composers, so you are free to organize them however you wish. For example, you could create an `app/View/Composers` directory to house all of your application's view composers:","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":149,"to":155}}}}],["4011",{"pageContent":"<?php\n\n    namespace App\\Providers;\n\n    use App\\View\\Composers\\ProfileComposer;\n    use Illuminate\\Support\\Facades;\n    use Illuminate\\Support\\ServiceProvider;\n    use Illuminate\\View\\View;\n\n    class ViewServiceProvider extends ServiceProvider\n    {\n        /**\n         * Register any application services.\n         */\n        public function register(): void\n        {\n            // ...\n        }\n\n        /**\n         * Bootstrap any application services.\n         */\n        public function boot(): void\n        {\n            // Using class based composers...\n            Facades\\View::composer('profile', ProfileComposer::class);\n\n            // Using closure based composers...\n            Facades\\View::composer('welcome', function (View $view) {\n                // ...\n            });\n\n            Facades\\View::composer('dashboard', function (View $view) {\n                // ...\n            });\n        }\n    }","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":157,"to":193}}}}],["4012",{"pageContent":"Facades\\View::composer('dashboard', function (View $view) {\n                // ...\n            });\n        }\n    }\n\n> **Warning**  \n> Remember, if you create a new service provider to contain your view composer registrations, you will need to add the service provider to the `providers` array in the `config/app.php` configuration file.\n\nNow that we have registered the composer, the `compose` method of the `App\\View\\Composers\\ProfileComposer` class will be executed each time the `profile` view is being rendered. Let's take a look at an example of the composer class:\n\n    <?php\n\n    namespace App\\View\\Composers;\n\n    use App\\Repositories\\UserRepository;\n    use Illuminate\\View\\View;\n\n    class ProfileComposer\n    {\n        /**\n         * Create a new profile composer.\n         */\n        public function __construct(\n            protected UserRepository $users,\n        ) {}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":193,"to":218}}}}],["4013",{"pageContent":"class ProfileComposer\n    {\n        /**\n         * Create a new profile composer.\n         */\n        public function __construct(\n            protected UserRepository $users,\n        ) {}\n\n        /**\n         * Bind data to the view.\n         */\n        public function compose(View $view): void\n        {\n            $view->with('count', $this->users->count());\n        }\n    }\n\nAs you can see, all view composers are resolved via the [service container](/docs/{{version}}/container), so you may type-hint any dependencies you need within a composer's constructor.\n\n<a name=\"attaching-a-composer-to-multiple-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":218,"to":238}}}}],["4014",{"pageContent":"Attaching A Composer To Multiple Views\n\nYou may attach a view composer to multiple views at once by passing an array of views as the first argument to the `composer` method:\n\n    use App\\Views\\Composers\\MultiComposer;\n    use Illuminate\\Support\\Facades\\View;\n\n    View::composer(\n        ['profile', 'dashboard'],\n        MultiComposer::class\n    );\n\nThe `composer` method also accepts the `*` character as a wildcard, allowing you to attach a composer to all views:\n\n    use Illuminate\\Support\\Facades;\n    use Illuminate\\View\\View;\n\n    Facades\\View::composer('*', function (View $view) {\n        // ...\n    });\n\n<a name=\"view-creators\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":239,"to":260}}}}],["4015",{"pageContent":"View Creators\n\nView \"creators\" are very similar to view composers; however, they are executed immediately after the view is instantiated instead of waiting until the view is about to render. To register a view creator, use the `creator` method:\n\n    use App\\View\\Creators\\ProfileCreator;\n    use Illuminate\\Support\\Facades\\View;\n\n    View::creator('profile', ProfileCreator::class);\n\n<a name=\"optimizing-views\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":261,"to":270}}}}],["4016",{"pageContent":"Optimizing Views\n\nBy default, Blade template views are compiled on demand. When a request is executed that renders a view, Laravel will determine if a compiled version of the view exists. If the file exists, Laravel will then determine if the uncompiled view has been modified more recently than the compiled view. If the compiled view either does not exist, or the uncompiled view has been modified, Laravel will recompile the view.\n\nCompiling views during the request may have a small negative impact on performance, so Laravel provides the `view:cache` Artisan command to precompile all of the views utilized by your application. For increased performance, you may wish to run this command as part of your deployment process:\n\n```shell\nphp artisan view:cache\n```\n\nYou may use the `view:clear` command to clear the view cache:\n\n```shell\nphp artisan view:clear\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/views.md","loc":{"lines":{"from":271,"to":285}}}}],["4017",{"pageContent":"# Asset Bundling (Vite)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":1,"to":1}}}}],["4018",{"pageContent":"- [Introduction](#introduction)\n- [Installation & Setup](#installation)\n  - [Installing Node](#installing-node)\n  - [Installing Vite And The Laravel Plugin](#installing-vite-and-laravel-plugin)\n  - [Configuring Vite](#configuring-vite)\n  - [Loading Your Scripts And Styles](#loading-your-scripts-and-styles)\n- [Running Vite](#running-vite)\n- [Working With JavaScript](#working-with-scripts)\n  - [Aliases](#aliases)\n  - [Vue](#vue)\n  - [React](#react)\n  - [Inertia](#inertia)\n  - [URL Processing](#url-processing)\n- [Working With Stylesheets](#working-with-stylesheets)\n- [Working With Blade & Routes](#working-with-blade-and-routes)\n  - [Processing Static Assets With Vite](#blade-processing-static-assets)\n  - [Refreshing On Save](#blade-refreshing-on-save)\n  - [Aliases](#blade-aliases)\n- [Custom Base URLs](#custom-base-urls)\n- [Environment Variables](#environment-variables)\n- [Disabling Vite In Tests](#disabling-vite-in-tests)\n- [Server-Side Rendering (SSR)](#ssr)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":3,"to":24}}}}],["4019",{"pageContent":"- [Custom Base URLs](#custom-base-urls)\n- [Environment Variables](#environment-variables)\n- [Disabling Vite In Tests](#disabling-vite-in-tests)\n- [Server-Side Rendering (SSR)](#ssr)\n- [Script & Style Tag Attributes](#script-and-style-attributes)\n  - [Content Security Policy (CSP) Nonce](#content-security-policy-csp-nonce)\n  - [Subresource Integrity (SRI)](#subresource-integrity-sri)\n  - [Arbitrary Attributes](#arbitrary-attributes)\n- [Advanced Customization](#advanced-customization)\n  - [Correcting Dev Server URLs](#correcting-dev-server-urls)","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":24,"to":33}}}}],["4020",{"pageContent":"<a name=\"introduction\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":35,"to":35}}}}],["4021",{"pageContent":"Introduction\n\n[Vite](https://vitejs.dev) is a modern frontend build tool that provides an extremely fast development environment and bundles your code for production. When building applications with Laravel, you will typically use Vite to bundle your application's CSS and JavaScript files into production ready assets.\n\nLaravel integrates seamlessly with Vite by providing an official plugin and Blade directive to load your assets for development and production.\n\n> **Note**  \n> Are you running Laravel Mix? Vite has replaced Laravel Mix in new Laravel installations. For Mix documentation, please visit the [Laravel Mix](https://laravel-mix.com/) website. If you would like to switch to Vite, please see our [migration guide](https://github.com/laravel/vite-plugin/blob/main/UPGRADE.md#migrating-from-laravel-mix-to-vite).\n\n<a name=\"vite-or-mix\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":36,"to":45}}}}],["4022",{"pageContent":"Choosing Between Vite And Laravel Mix\n\nBefore transitioning to Vite, new Laravel applications utilized [Mix](https://laravel-mix.com/), which is powered by [webpack](https://webpack.js.org/), when bundling assets. Vite focuses on providing a faster and more productive experience when building rich JavaScript applications. If you are developing a Single Page Application (SPA), including those developed with tools like [Inertia](https://inertiajs.com), Vite will be the perfect fit.\n\nVite also works well with traditional server-side rendered applications with JavaScript \"sprinkles\", including those using [Livewire](https://livewire.laravel.com). However, it lacks some features that Laravel Mix supports, such as the ability to copy arbitrary assets into the build that are not referenced directly in your JavaScript application.\n\n<a name=\"migrating-back-to-mix\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":46,"to":52}}}}],["4023",{"pageContent":"Migrating Back To Mix\n\nHave you started a new Laravel application using our Vite scaffolding but need to move back to Laravel Mix and webpack? No problem. Please consult our [official guide on migrating from Vite to Mix](https://github.com/laravel/vite-plugin/blob/main/UPGRADE.md#migrating-from-vite-to-laravel-mix).\n\n<a name=\"installation\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":53,"to":57}}}}],["4024",{"pageContent":"Installation & Setup\n\n> **Note**  \n> The following documentation discusses how to manually install and configure the Laravel Vite plugin. However, Laravel's [starter kits](/docs/{{version}}/starter-kits) already include all of this scaffolding and are the fastest way to get started with Laravel and Vite.\n\n<a name=\"installing-node\"></a>\n### Installing Node\n\nYou must ensure that Node.js (16+) and NPM are installed before running Vite and the Laravel plugin:\n\n```sh\nnode -v\nnpm -v\n```\n\nYou can easily install the latest version of Node and NPM using simple graphical installers from [the official Node website](https://nodejs.org/en/download/). Or, if you are using [Laravel Sail](https://laravel.com/docs/{{version}}/sail), you may invoke Node and NPM through Sail:\n\n```sh\n./vendor/bin/sail node -v\n./vendor/bin/sail npm -v\n```\n\n<a name=\"installing-vite-and-laravel-plugin\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":58,"to":80}}}}],["4025",{"pageContent":"Installing Vite And The Laravel Plugin\n\nWithin a fresh installation of Laravel, you will find a `package.json` file in the root of your application's directory structure. The default `package.json` file already includes everything you need to get started using Vite and the Laravel plugin. You may install your application's frontend dependencies via NPM:\n\n```sh\nnpm install\n```\n\n<a name=\"configuring-vite\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":81,"to":89}}}}],["4026",{"pageContent":"Configuring Vite\n\nVite is configured via a `vite.config.js` file in the root of your project. You are free to customize this file based on your needs, and you may also install any other plugins your application requires, such as `@vitejs/plugin-vue` or `@vitejs/plugin-react`.\n\nThe Laravel Vite plugin requires you to specify the entry points for your application. These may be JavaScript or CSS files, and include preprocessed languages such as TypeScript, JSX, TSX, and Sass.\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel([\n            'resources/css/app.css',\n            'resources/js/app.js',\n        ]),\n    ],\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":90,"to":107}}}}],["4027",{"pageContent":"If you are building an SPA, including applications built using Inertia, Vite works best without CSS entry points:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel([\n            'resources/css/app.css', // [tl! remove]\n            'resources/js/app.js',\n        ]),\n    ],\n});\n```\n\nInstead, you should import your CSS via JavaScript. Typically, this would be done in your application's `resources/js/app.js` file:\n\n```js\nimport './bootstrap';\nimport '../css/app.css'; // [tl! add]\n```\n\nThe Laravel plugin also supports multiple entry points and advanced configuration options such as [SSR entry points](#ssr).\n\n<a name=\"working-with-a-secure-development-server\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":110,"to":135}}}}],["4028",{"pageContent":"Working With A Secure Development Server\n\nIf your local development web server is serving your application via HTTPS, you may run into issues connecting to the Vite development server.\n\nIf you are using [Laravel Herd](https://herd.laravel.com) and have secured the site or you are using [Laravel Valet](/docs/{{version}}/valet) and have run the [secure command](/docs/{{version}}/valet#securing-sites) against your application, you may configure the Vite development server to automatically use the generated TLS certificates:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            // ...\n            detectTls: 'my-app.test', // [tl! add]\n        }),\n    ],\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":136,"to":153}}}}],["4029",{"pageContent":"When using another web server, you should generate a trusted certificate and manually configure Vite to use the generated certificates:\n\n```js\n// ...\nimport fs from 'fs'; // [tl! add]\n\nconst host = 'my-app.test'; // [tl! add]\n\nexport default defineConfig({\n    // ...\n    server: { // [tl! add]\n        host, // [tl! add]\n        hmr: { host }, // [tl! add]\n        https: { // [tl! add]\n            key: fs.readFileSync(`/path/to/${host}.key`), // [tl! add]\n            cert: fs.readFileSync(`/path/to/${host}.crt`), // [tl! add]\n        }, // [tl! add]\n    }, // [tl! add]\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":156,"to":174}}}}],["4030",{"pageContent":"If you are unable to generate a trusted certificate for your system, you may install and configure the [`@vitejs/plugin-basic-ssl` plugin](https://github.com/vitejs/vite-plugin-basic-ssl). When using untrusted certificates, you will need to accept the certificate warning for Vite's development server in your browser by following the \"Local\" link in your console when running the `npm run dev` command.\n\n<a name=\"configuring-hmr-in-sail-on-wsl2\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":177,"to":179}}}}],["4031",{"pageContent":"Running The Development Server In Sail On WSL2\n\nWhen running the Vite development server within [Laravel Sail](/docs/{{version}}/sail) on Windows Subsystem for Linux 2 (WSL2), you should add the following configuration to your `vite.config.js` file to ensure the browser can communicate with the development server:\n\n```js\n// ...\n\nexport default defineConfig({\n    // ...\n    server: { // [tl! add:start]\n        hmr: {\n            host: 'localhost',\n        },\n    }, // [tl! add:end]\n});\n```\n\nIf your file changes are not being reflected in the browser while the development server is running, you may also need to configure Vite's [`server.watch.usePolling` option](https://vitejs.dev/config/server-options.html#server-watch).\n\n<a name=\"loading-your-scripts-and-styles\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":180,"to":199}}}}],["4032",{"pageContent":"Loading Your Scripts And Styles\n\nWith your Vite entry points configured, you may now reference them in a `@vite()` Blade directive that you add to the `<head>` of your application's root template:\n\n```blade\n<!doctype html>\n<head>\n    {{-- ... --}}\n\n    @vite(['resources/css/app.css', 'resources/js/app.js'])\n</head>\n```\n\nIf you're importing your CSS via JavaScript, you only need to include the JavaScript entry point:\n\n```blade\n<!doctype html>\n<head>\n    {{-- ... --}}\n\n    @vite('resources/js/app.js')\n</head>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":200,"to":221}}}}],["4033",{"pageContent":"If you're importing your CSS via JavaScript, you only need to include the JavaScript entry point:\n\n```blade\n<!doctype html>\n<head>\n    {{-- ... --}}\n\n    @vite('resources/js/app.js')\n</head>\n```\n\nThe `@vite` directive will automatically detect the Vite development server and inject the Vite client to enable Hot Module Replacement. In build mode, the directive will load your compiled and versioned assets, including any imported CSS.\n\nIf needed, you may also specify the build path of your compiled assets when invoking the `@vite` directive:\n\n```blade\n<!doctype html>\n<head>\n    {{-- Given build path is relative to public path. --}}\n\n    @vite('resources/js/app.js', 'vendor/courier/build')\n</head>\n```\n\n<a name=\"inline-assets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":221,"to":245}}}}],["4034",{"pageContent":"Inline Assets\n\nSometimes it may be necessary to include the raw content of assets rather than linking to the versioned URL of the asset. For example, you may need to include asset content directly into your page when passing HTML content to a PDF generator. You may output the content of Vite assets using the `content` method provided by the `Vite` facade:\n\n```blade\n@php\nuse Illuminate\\Support\\Facades\\Vite;\n@endphp\n\n<!doctype html>\n<head>\n    {{-- ... --}}\n\n    <style>\n        {!! Vite::content('resources/css/app.css') !!}\n    </style>\n    <script>\n        {!! Vite::content('resources/js/app.js') !!}\n    </script>\n</head>\n```\n\n<a name=\"running-vite\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":246,"to":268}}}}],["4035",{"pageContent":"Running Vite\n\nThere are two ways you can run Vite. You may run the development server via the `dev` command, which is useful while developing locally. The development server will automatically detect changes to your files and instantly reflect them in any open browser windows.\n\nOr, running the `build` command will version and bundle your application's assets and get them ready for you to deploy to production:\n\n```shell\n# Run the Vite development server...\nnpm run dev\n\n# Build and version the assets for production...\nnpm run build\n```\n\nIf you are running the development server in [Sail](/docs/{{version}}/sail) on WSL2, you may need some [additional configuration](#configuring-hmr-in-sail-on-wsl2) options.\n\n<a name=\"working-with-scripts\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":269,"to":285}}}}],["4036",{"pageContent":"Working With JavaScript\n\n<a name=\"aliases\"></a>\n### Aliases\n\nBy default, The Laravel plugin provides a common alias to help you hit the ground running and conveniently import your application's assets:\n\n```js\n{\n    '@' => '/resources/js'\n}\n```\n\nYou may overwrite the `'@'` alias by adding your own to the `vite.config.js` configuration file:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel(['resources/ts/app.tsx']),\n    ],\n    resolve: {\n        alias: {\n            '@': '/resources/ts',\n        },\n    },\n});\n```\n\n<a name=\"vue\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":286,"to":317}}}}],["4037",{"pageContent":"Vue\n\nIf you would like to build your frontend using the [Vue](https://vuejs.org/) framework, then you will also need to install the `@vitejs/plugin-vue` plugin:\n\n```sh\nnpm install --save-dev @vitejs/plugin-vue","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":318,"to":323}}}}],["4038",{"pageContent":"You may then include the plugin in your `vite.config.js` configuration file. There are a few additional options you will need when using the Vue plugin with Laravel:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\nimport vue from '@vitejs/plugin-vue';\n\nexport default defineConfig({\n    plugins: [\n        laravel(['resources/js/app.js']),\n        vue({\n            template: {\n                transformAssetUrls: {\n                    // The Vue plugin will re-write asset URLs, when referenced\n                    // in Single File Components, to point to the Laravel web\n                    // server. Setting this to `null` allows the Laravel plugin\n                    // to instead re-write asset URLs to point to the Vite\n                    // server instead.\n                    base: null,","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":326,"to":344}}}}],["4039",{"pageContent":"// The Vue plugin will parse absolute URLs and treat them\n                    // as absolute paths to files on disk. Setting this to\n                    // `false` will leave absolute URLs un-touched so they can\n                    // reference assets in the public directory as expected.\n                    includeAbsolute: false,\n                },\n            },\n        }),\n    ],\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":346,"to":355}}}}],["4040",{"pageContent":"> **Note**  \n> Laravel's [starter kits](/docs/{{version}}/starter-kits) already include the proper Laravel, Vue, and Vite configuration. Check out [Laravel Breeze](/docs/{{version}}/starter-kits#breeze-and-inertia) for the fastest way to get started with Laravel, Vue, and Vite.\n\n<a name=\"react\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":358,"to":361}}}}],["4041",{"pageContent":"React\n\nIf you would like to build your frontend using the [React](https://reactjs.org/) framework, then you will also need to install the `@vitejs/plugin-react` plugin:\n\n```sh\nnpm install --save-dev @vitejs/plugin-react\n```\n\nYou may then include the plugin in your `vite.config.js` configuration file:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig({\n    plugins: [\n        laravel(['resources/js/app.jsx']),\n        react(),\n    ],\n});\n```\n\nYou will need to ensure that any files containing JSX have a `.jsx` or `.tsx` extension, remembering to update your entry point, if required, as [shown above](#configuring-vite).\n\nYou will also need to include the additional `@viteReactRefresh` Blade directive alongside your existing `@vite` directive.\n\n```blade\n@viteReactRefresh\n@vite('resources/js/app.jsx')","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":362,"to":391}}}}],["4042",{"pageContent":"The `@viteReactRefresh` directive must be called before the `@vite` directive.\n\n> **Note**  \n> Laravel's [starter kits](/docs/{{version}}/starter-kits) already include the proper Laravel, React, and Vite configuration. Check out [Laravel Breeze](/docs/{{version}}/starter-kits#breeze-and-inertia) for the fastest way to get started with Laravel, React, and Vite.\n\n<a name=\"inertia\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":394,"to":399}}}}],["4043",{"pageContent":"Inertia\n\nThe Laravel Vite plugin provides a convenient `resolvePageComponent` function to help you resolve your Inertia page components. Below is an example of the helper in use with Vue 3; however, you may also utilize the function in other frameworks such as React:\n\n```js\nimport { createApp, h } from 'vue';\nimport { createInertiaApp } from '@inertiajs/vue3';\nimport { resolvePageComponent } from 'laravel-vite-plugin/inertia-helpers';\n\ncreateInertiaApp({\n  resolve: (name) => resolvePageComponent(`./Pages/${name}.vue`, import.meta.glob('./Pages/**/*.vue')),\n  setup({ el, App, props, plugin }) {\n    return createApp({ render: () => h(App, props) })\n      .use(plugin)\n      .mount(el)\n  },\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":400,"to":416}}}}],["4044",{"pageContent":"> **Note**  \n> Laravel's [starter kits](/docs/{{version}}/starter-kits) already include the proper Laravel, Inertia, and Vite configuration. Check out [Laravel Breeze](/docs/{{version}}/starter-kits#breeze-and-inertia) for the fastest way to get started with Laravel, Inertia, and Vite.\n\n<a name=\"url-processing\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":419,"to":422}}}}],["4045",{"pageContent":"URL Processing\n\nWhen using Vite and referencing assets in your application's HTML, CSS, or JS, there are a couple of caveats to consider. First, if you reference assets with an absolute path, Vite will not include the asset in the build; therefore, you should ensure that the asset is available in your public directory.\n\nWhen referencing relative asset paths, you should remember that the paths are relative to the file where they are referenced. Any assets referenced via a relative path will be re-written, versioned, and bundled by Vite.\n\nConsider the following project structure:\n\n```nothing\npublic/\n  taylor.png\nresources/\n  js/\n    Pages/\n      Welcome.vue\n  images/\n    abigail.png\n```\n\nThe following example demonstrates how Vite will treat relative and absolute URLs:\n\n```html\n<!-- This asset is not handled by Vite and will not be included in the build -->\n<img src=\"/taylor.png\">\n\n<!-- This asset will be re-written, versioned, and bundled by Vite -->\n<img src=\"../../images/abigail.png\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":423,"to":449}}}}],["4046",{"pageContent":"<a name=\"working-with-stylesheets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":452,"to":452}}}}],["4047",{"pageContent":"Working With Stylesheets\n\nYou can learn more about Vite's CSS support within the [Vite documentation](https://vitejs.dev/guide/features.html#css). If you are using PostCSS plugins such as [Tailwind](https://tailwindcss.com), you may create a `postcss.config.js` file in the root of your project and Vite will automatically apply it:\n\n```js\nexport default {\n    plugins: {\n        tailwindcss: {},\n        autoprefixer: {},\n    },\n};\n```\n\n> **Note**\n> Laravel's [starter kits](/docs/{{version}}/starter-kits) already include the proper Tailwind, PostCSS, and Vite configuration. Or, if you would like to use Tailwind and Laravel without using one of our starter kits, check out [Tailwind's installation guide for Laravel](https://tailwindcss.com/docs/guides/laravel).\n\n<a name=\"working-with-blade-and-routes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":453,"to":469}}}}],["4048",{"pageContent":"Working With Blade & Routes\n\n<a name=\"blade-processing-static-assets\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":470,"to":472}}}}],["4049",{"pageContent":"Processing Static Assets With Vite\n\nWhen referencing assets in your JavaScript or CSS, Vite automatically processes and versions them. In addition, when building Blade based applications, Vite can also process and version static assets that you reference solely in Blade templates.\n\nHowever, in order to accomplish this, you need to make Vite aware of your assets by importing the static assets into the application's entry point. For example, if you want to process and version all images stored in `resources/images` and all fonts stored in `resources/fonts`, you should add the following in your application's `resources/js/app.js` entry point:\n\n```js\nimport.meta.glob([\n  '../images/**',\n  '../fonts/**',\n]);\n```\n\nThese assets will now be processed by Vite when running `npm run build`. You can then reference these assets in Blade templates using the `Vite::asset` method, which will return the versioned URL for a given asset:\n\n```blade\n<img src=\"{{ Vite::asset('resources/images/logo.png') }}\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":473,"to":489}}}}],["4050",{"pageContent":"<a name=\"blade-refreshing-on-save\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":492,"to":492}}}}],["4051",{"pageContent":"Refreshing On Save\n\nWhen your application is built using traditional server-side rendering with Blade, Vite can improve your development workflow by automatically refreshing the browser when you make changes to view files in your application. To get started, you can simply specify the `refresh` option as `true`.\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            // ...\n            refresh: true,\n        }),\n    ],\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":493,"to":508}}}}],["4052",{"pageContent":"When the `refresh` option is `true`, saving files in the following directories will trigger the browser to perform a full page refresh while you are running `npm run dev`:\n\n- `app/View/Components/**`\n- `lang/**`\n- `resources/lang/**`\n- `resources/views/**`\n- `routes/**`\n\nWatching the `routes/**` directory is useful if you are utilizing [Ziggy](https://github.com/tighten/ziggy) to generate route links within your application's frontend.\n\nIf these default paths do not suit your needs, you can specify your own list of paths to watch:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            // ...\n            refresh: ['resources/views/**'],\n        }),\n    ],\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":511,"to":534}}}}],["4053",{"pageContent":"Under the hood, the Laravel Vite plugin uses the [`vite-plugin-full-reload`](https://github.com/ElMassimo/vite-plugin-full-reload) package, which offers some advanced configuration options to fine-tune this feature's behavior. If you need this level of customization, you may provide a `config` definition:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            // ...\n            refresh: [{\n                paths: ['path/to/watch/**'],\n                config: { delay: 300 }\n            }],\n        }),\n    ],\n});\n```\n\n<a name=\"blade-aliases\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":537,"to":556}}}}],["4054",{"pageContent":"Aliases\n\nIt is common in JavaScript applications to [create aliases](#aliases) to regularly referenced directories. But, you may also create aliases to use in Blade by using the `macro` method on the `Illuminate\\Support\\Facades\\Vite` class. Typically, \"macros\" should be defined within the `boot` method of a [service provider](/docs/{{version}}/providers):\n\n    /**\n     * Bootstrap any application services.\n     */\n    public function boot(): void\n    {\n        Vite::macro('image', fn (string $asset) => $this->asset(\"resources/images/{$asset}\"));\n    }\n\nOnce a macro has been defined, it can be invoked within your templates. For example, we can use the `image` macro defined above to reference an asset located at `resources/images/logo.png`:\n\n```blade\n<img src=\"{{ Vite::image('logo.png') }}\" alt=\"Laravel Logo\">\n```\n\n<a name=\"custom-base-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":557,"to":575}}}}],["4055",{"pageContent":"Custom Base URLs\n\nIf your Vite compiled assets are deployed to a domain separate from your application, such as via a CDN, you must specify the `ASSET_URL` environment variable within your application's `.env` file:\n\n```env\nASSET_URL=https://cdn.example.com\n```\n\nAfter configuring the asset URL, all re-written URLs to your assets will be prefixed with the configured value:\n\n```nothing\nhttps://cdn.example.com/build/assets/app.9dce8d17.js\n```\n\nRemember that [absolute URLs are not re-written by Vite](#url-processing), so they will not be prefixed.\n\n<a name=\"environment-variables\"></a>\n## Environment Variables\n\nYou may inject environment variables into your JavaScript by prefixing them with `VITE_` in your application's `.env` file:\n\n```env\nVITE_SENTRY_DSN_PUBLIC=http://example.com\n```\n\nYou may access injected environment variables via the `import.meta.env` object:\n\n```js\nimport.meta.env.VITE_SENTRY_DSN_PUBLIC\n```\n\n<a name=\"disabling-vite-in-tests\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":576,"to":607}}}}],["4056",{"pageContent":"Disabling Vite In Tests\n\nLaravel's Vite integration will attempt to resolve your assets while running your tests, which requires you to either run the Vite development server or build your assets.\n\nIf you would prefer to mock Vite during testing, you may call the `withoutVite` method, which is is available for any tests that extend Laravel's `TestCase` class:\n\n```php\nuse Tests\\TestCase;\n\nclass ExampleTest extends TestCase\n{\n    public function test_without_vite_example(): void\n    {\n        $this->withoutVite();\n\n        // ...\n    }\n}\n```\n\nIf you would like to disable Vite for all tests, you may call the `withoutVite` method from the `setUp` method on your base `TestCase` class:\n\n```php\n<?php\n\nnamespace Tests;\n\nuse Illuminate\\Foundation\\Testing\\TestCase as BaseTestCase;\n\nabstract class TestCase extends BaseTestCase\n{\n    use CreatesApplication;\n\n    protected function setUp(): void// [tl! add:start]\n    {\n        parent::setUp();\n\n        $this->withoutVite();\n    }// [tl! add:end]\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":608,"to":647}}}}],["4057",{"pageContent":"<a name=\"ssr\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":650,"to":650}}}}],["4058",{"pageContent":"Server-Side Rendering (SSR)\n\nThe Laravel Vite plugin makes it painless to set up server-side rendering with Vite. To get started, create an SSR entry point at `resources/js/ssr.js` and specify the entry point by passing a configuration option to the Laravel plugin:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            input: 'resources/js/app.js',\n            ssr: 'resources/js/ssr.js',\n        }),\n    ],\n});\n```\n\nTo ensure you don't forget to rebuild the SSR entry point, we recommend augmenting the \"build\" script in your application's `package.json` to create your SSR build:\n\n```json\n\"scripts\": {\n     \"dev\": \"vite\",\n     \"build\": \"vite build\" // [tl! remove]\n     \"build\": \"vite build && vite build --ssr\" // [tl! add]\n}\n```\n\nThen, to build and start the SSR server, you may run the following commands:\n\n```sh\nnpm run build\nnode bootstrap/ssr/ssr.js","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":651,"to":683}}}}],["4059",{"pageContent":"Then, to build and start the SSR server, you may run the following commands:\n\n```sh\nnpm run build\nnode bootstrap/ssr/ssr.js\n```\n\nIf you are using [SSR with Inertia](https://inertiajs.com/server-side-rendering), you may instead use the `inertia:start-ssr` Artisan command to start the SSR server:\n\n```sh\nphp artisan inertia:start-ssr\n```\n\n> **Note**  \n> Laravel's [starter kits](/docs/{{version}}/starter-kits) already include the proper Laravel, Inertia SSR, and Vite configuration. Check out [Laravel Breeze](/docs/{{version}}/starter-kits#breeze-and-inertia) for the fastest way to get started with Laravel, Inertia SSR, and Vite.\n\n<a name=\"script-and-style-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":683,"to":699}}}}],["4060",{"pageContent":"Script & Style Tag Attributes\n\n<a name=\"content-security-policy-csp-nonce\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":700,"to":702}}}}],["4061",{"pageContent":"Content Security Policy (CSP) Nonce\n\nIf you wish to include a [`nonce` attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce) on your script and style tags as part of your [Content Security Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP), you may generate or specify a nonce using the `useCspNonce` method within a custom [middleware](/docs/{{version}}/middleware):\n\n```php\n<?php\n\nnamespace App\\Http\\Middleware;\n\nuse Closure;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Vite;\nuse Symfony\\Component\\HttpFoundation\\Response;\n\nclass AddContentSecurityPolicyHeaders\n{\n    /**\n     * Handle an incoming request.\n     *\n     * @param  \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response)  $next\n     */\n    public function handle(Request $request, Closure $next): Response\n    {\n        Vite::useCspNonce();","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":703,"to":726}}}}],["4062",{"pageContent":"return $next($request)->withHeaders([\n            'Content-Security-Policy' => \"script-src 'nonce-\".Vite::cspNonce().\"'\",\n        ]);\n    }\n}","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":728,"to":732}}}}],["4063",{"pageContent":"After invoking the `useCspNonce` method, Laravel will automatically include the `nonce` attributes on all generated script and style tags.\n\nIf you need to specify the nonce elsewhere, including the [Ziggy `@route` directive](https://github.com/tighten/ziggy#using-routes-with-a-content-security-policy) included with Laravel's [starter kits](/docs/{{version}}/starter-kits), you may retrieve it using the `cspNonce` method:\n\n```blade\n@routes(nonce: Vite::cspNonce())\n```\n\nIf you already have a nonce that you would like to instruct Laravel to use, you may pass the nonce to the `useCspNonce` method:\n\n```php\nVite::useCspNonce($nonce);\n```\n\n<a name=\"subresource-integrity-sri\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":735,"to":749}}}}],["4064",{"pageContent":"Subresource Integrity (SRI)\n\nIf your Vite manifest includes `integrity` hashes for your assets, Laravel will automatically add the `integrity` attribute on any script and style tags it generates in order to enforce [Subresource Integrity](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity). By default, Vite does not include the `integrity` hash in its manifest, but you may enable it by installing the [`vite-plugin-manifest-sri`](https://www.npmjs.com/package/vite-plugin-manifest-sri) NPM plugin:\n\n```shell\nnpm install --save-dev vite-plugin-manifest-sri\n```\n\nYou may then enable this plugin in your `vite.config.js` file:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\nimport manifestSRI from 'vite-plugin-manifest-sri';// [tl! add]\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            // ...\n        }),\n        manifestSRI(),// [tl! add]\n    ],\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":750,"to":772}}}}],["4065",{"pageContent":"If required, you may also customize the manifest key where the integrity hash can be found:\n\n```php\nuse Illuminate\\Support\\Facades\\Vite;\n\nVite::useIntegrityKey('custom-integrity-key');\n```\n\nIf you would like to disable this auto-detection completely, you may pass `false` to the `useIntegrityKey` method:\n\n```php\nVite::useIntegrityKey(false);\n```\n\n<a name=\"arbitrary-attributes\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":775,"to":789}}}}],["4066",{"pageContent":"Arbitrary Attributes\n\nIf you need to include additional attributes on your script and style tags, such as the [`data-turbo-track`](https://turbo.hotwired.dev/handbook/drive#reloading-when-assets-change) attribute, you may specify them via the `useScriptTagAttributes` and `useStyleTagAttributes` methods. Typically, this methods should be invoked from a [service provider](/docs/{{version}}/providers):\n\n```php\nuse Illuminate\\Support\\Facades\\Vite;\n\nVite::useScriptTagAttributes([\n    'data-turbo-track' => 'reload', // Specify a value for the attribute...\n    'async' => true, // Specify an attribute without a value...\n    'integrity' => false, // Exclude an attribute that would otherwise be included...\n]);\n\nVite::useStyleTagAttributes([\n    'data-turbo-track' => 'reload',\n]);","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":790,"to":805}}}}],["4067",{"pageContent":"If you need to conditionally add attributes, you may pass a callback that will receive the asset source path, its URL, its manifest chunk, and the entire manifest:\n\n```php\nuse Illuminate\\Support\\Facades\\Vite;\n\nVite::useScriptTagAttributes(fn (string $src, string $url, array|null $chunk, array|null $manifest) => [\n    'data-turbo-track' => $src === 'resources/js/app.js' ? 'reload' : false,\n]);\n\nVite::useStyleTagAttributes(fn (string $src, string $url, array|null $chunk, array|null $manifest) => [\n    'data-turbo-track' => $chunk && $chunk['isEntry'] ? 'reload' : false,\n]);\n```\n\n> **Warning**  \n> The `$chunk` and `$manifest` arguments will be `null` while the Vite development server is running.\n\n<a name=\"advanced-customization\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":808,"to":825}}}}],["4068",{"pageContent":"Advanced Customization\n\nOut of the box, Laravel's Vite plugin uses sensible conventions that should work for the majority of applications; however, sometimes you may need to customize Vite's behavior. To enable additional customization options, we offer the following methods and options which can be used in place of the `@vite` Blade directive:\n\n```blade\n<!doctype html>\n<head>\n    {{-- ... --}}\n\n    {{\n        Vite::useHotFile(storage_path('vite.hot')) // Customize the \"hot\" file...\n            ->useBuildDirectory('bundle') // Customize the build directory...\n            ->useManifestFilename('assets.json') // Customize the manifest filename...\n            ->withEntryPoints(['resources/js/app.js']) // Specify the entry points...\n    }}\n</head>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":826,"to":841}}}}],["4069",{"pageContent":"Within the `vite.config.js` file, you should then specify the same configuration:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            hotFile: 'storage/vite.hot', // Customize the \"hot\" file...\n            buildDirectory: 'bundle', // Customize the build directory...\n            input: ['resources/js/app.js'], // Specify the entry points...\n        }),\n    ],\n    build: {\n      manifest: 'assets.json', // Customize the manifest filename...\n    },\n});\n```\n\n<a name=\"correcting-dev-server-urls\"></a>","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":844,"to":864}}}}],["4070",{"pageContent":"Correcting Dev Server URLs\n\nSome plugins within the Vite ecosystem assume that URLs which begin with a forward-slash will always point to the Vite dev server. However, due to the nature of the Laravel integration, this is not the case.\n\nFor example, the `vite-imagetools` plugin outputs URLs like the following while Vite is serving your assets:\n\n```html\n<img src=\"/@imagetools/f0b2f404b13f052c604e632f2fb60381bf61a520\">","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":865,"to":872}}}}],["4071",{"pageContent":"The `vite-imagetools` plugin is expecting that the output URL will be intercepted by Vite and the plugin may then handle all URLs that start with `/@imagetools`. If you are using plugins that are expecting this behaviour, you will need to manually correct the URLs. You can do this in your `vite.config.js` file by using the `transformOnServe` option. \n\nIn this particular example, we will prepend the dev server URL to all occurrences of `/@imagetools` within the generated code:\n\n```js\nimport { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\nimport { imagetools } from 'vite-imagetools';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            // ...\n            transformOnServe: (code, devServerUrl) => code.replaceAll('/@imagetools', devServerUrl+'/@imagetools'),\n        }),\n        imagetools(),\n    ],\n});","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":875,"to":892}}}}],["4072",{"pageContent":"Now, while Vite is serving Assets, it will output URLs that point to the Vite dev server:\n\n```html\n- <img src=\"/@imagetools/f0b2f404b13f052c604e632f2fb60381bf61a520\"><!-- [tl! remove] -->\n+ <img src=\"http://[::1]:5173/@imagetools/f0b2f404b13f052c604e632f2fb60381bf61a520\"><!-- [tl! add] -->\n```","metadata":{"source":"/Users/marchorne/personal/monkey-labs-server/docs/vite.md","loc":{"lines":{"from":895,"to":900}}}}]]